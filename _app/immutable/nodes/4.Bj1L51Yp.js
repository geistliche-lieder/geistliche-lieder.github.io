import{a as w,n as ve,t as M,c as $e}from"../chunks/disclose-version.CgYNnb_O.js";import{ae as Oe,b as Te,ad as qe,t as P,p as z,k as ne,g as t,c as r,r as i,s as m,d as A,a as V,au as F,w as E,n as Ee,f as ce,ao as Re,L as Ue}from"../chunks/runtime.CZXkAWHM.js";import{r as de,i as I,b as Ge,a as j}from"../chunks/props.BhmNFJO9.js";import{i as xe}from"../chunks/lifecycle.BYP-n5hl.js";import{s as R,a as T}from"../chunks/store.BX77XggA.js";import{p as ye}from"../chunks/stores.B0bONA-Y.js";import{d as ke,e as We,s as ae}from"../chunks/render.5dFlmWfK.js";import{l as Je,s as me,r as Le,b as Ae,C as Ke,F as He,P as Qe,a as se,D as Me,c as he,T as Ie,e as Se,i as je,d as we,V as Xe,S as Ye,f as Ze}from"../chunks/SettingsPage.BJizVsgG.js";import{t as Be,g as Pe,a as Q,b as et,p as Ne,c as be}from"../chunks/music.cUEfQeyk.js";import{d as ge,f as Ce,o as ze,c as Fe}from"../chunks/store.d1Jg0ypw.js";import{o as Ve,a as tt}from"../chunks/index-client.Cu6jvvy_.js";function at(o,s,n=s){var e,a,u=()=>{cancelAnimationFrame(e),o.paused||(e=requestAnimationFrame(u));var v=o.currentTime;a!==v&&n(a=v)};e=requestAnimationFrame(u),o.addEventListener("timeupdate",u),Oe(()=>{var v=Number(s());a!==v&&!isNaN(v)&&(o.currentTime=a=v)}),Te(()=>cancelAnimationFrame(e))}function st(o,s,n=s){var e=s(),a=()=>{e!==o.paused&&n(e=o.paused)};Je(o,["play","pause","canplay"],a,e==null),qe(()=>{(e=!!s())!==o.paused&&(e?o.pause():o.play().catch(()=>{n(e=!0)}))})}function nt(o,s,n,e,a){var u=()=>{e(n[o])};n.addEventListener(s,u),u(),(n===document.body||n===window||n===document)&&Te(()=>{n.removeEventListener(s,u)})}var it=ve('<svg><path fill="currentColor" d="M11 19v-6H2v-2h9V5l11 7z"></path></svg>');function lt(o,s){const n=de(s,["$$slots","$$events","$$legacy"]);var e=it();let a;P(()=>a=me(e,a,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),w(o,e)}var rt=ve('<svg><path fill="currentColor" d="M13 19L2 12l11-7v6h9v2h-9z"></path></svg>');function ot(o,s){const n=de(s,["$$slots","$$events","$$legacy"]);var e=rt();let a;P(()=>a=me(e,a,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),w(o,e)}var ut=ve('<svg><path fill="currentColor" d="M14 19V5h4v14zm-8 0V5h4v14z"></path></svg>');function ct(o,s){const n=de(s,["$$slots","$$events","$$legacy"]);var e=ut();let a;P(()=>a=me(e,a,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),w(o,e)}var vt=ve('<svg><path fill="currentColor" d="M14 20v-2h2.6l-3.175-3.175L14.85 13.4L18 16.55V14h2v6zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4zm3.775-9.425L4 5.4L5.4 4l5.175 5.175z"></path></svg>');function dt(o,s){const n=de(s,["$$slots","$$events","$$legacy"]);var e=vt();let a;P(()=>a=me(e,a,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),w(o,e)}function mt(o,s){s().song&&Be(s().song.link)}var ft=M('<progress class="progress flex-1 self-center mx-2"></progress>'),pt=M('<input class="range flex-1 mx-2" type="range" min="0">'),gt=M("<button><!></button>"),_t=M("<button><!></button>"),bt=M('<div class="h-18 flex flex-col items-center rounded-md border-t-2"><div class="flex-1 w-full max-w-lg relative mt-2 px-2"> </div> <div class="flex-1 w-full max-w-lg relative mt-2"><div class="flex flex-row items-center"><!> <button class="inline btn btn-sm btn-circle relative"><!></button></div></div> <div class="w-full max-w-lg flex flex-row justify-between px-2"><p> </p> <p> </p></div> <div class="h-8 flex justify-center gap-1"><button><!></button> <button><!></button> <!> <button><!></button> <button><!></button></div> <audio id="audio" autoplay></audio></div>');function ht(o,s){z(s,!0);const n=R(),e=()=>T(ge,"$currentSong",n),a=()=>T(Ce,"$favorites",n);let u=F(null),v=F(!0),p=F(0),f=F(0);const S=E(()=>Math.round(t(f)));async function y(l){const c=await Pe(l);navigator.mediaSession.metadata.artwork=[{src:c}]}function b(){navigator.mediaSession.setActionHandler("nexttrack",()=>{e().playNext?e().playNext():A(f,j(t(p))),$()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{e().playPrevious?e().playPrevious():A(f,0),$()}),navigator.mediaSession.setActionHandler("play",k),navigator.mediaSession.setActionHandler("pause",_),navigator.mediaSession.setActionHandler("stop",()=>{_(),g()}),navigator.mediaSession.setActionHandler("seekforward",l=>{const c=l.seekOffset||10;t(f)+c<t(p)?A(f,t(f)+c):A(f,j(t(p))),$()}),navigator.mediaSession.setActionHandler("seekbackward",l=>{const c=l.seekOffset||10;t(f)<c?A(f,0):A(f,t(f)-c),$()}),navigator.mediaSession.setActionHandler("seekto",l=>{l.seekTime&&(l.fastSeek?t(u).fastSeek(l.seekTime):A(f,j(l.seekTime)),$())})}Ve(()=>b());function x(){A(f,0)}ne(()=>{var l,c,q;"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(l=e().song)==null?void 0:l.name,album:(c=e().album)==null?void 0:c.name}),(q=e().album)!=null&&q.image&&y(e().album.image),x())}),ne(()=>$());function $(){"mediaSession"in navigator&&(navigator.mediaSession.setPositionState({duration:t(p),position:t(S)}),navigator.mediaSession.playbackState="playing")}function k(){t(u).play(),navigator.mediaSession.playbackState="playing"}function _(){t(u).pause(),navigator.mediaSession.playbackState="paused"}function g(){ge.set({isLoading:!1,song:null,album:null,src:null}),navigator.mediaSession.playbackState="none"}function L(l){return l=Math.round(l),`${Math.floor(l/60)}`.padStart(2,"0")+":"+`${l%60}`.padStart(2,"0")}const B=E(()=>{var l;return e().isLoading?"Lädt...":(l=e().song)==null?void 0:l.name});var X=bt(),D=r(X),_e=r(D,!0);i(D);var ie=m(D,2),Y=r(ie),Z=r(Y);I(Z,()=>e().isLoading,l=>{var c=ft();w(l,c)},l=>{var c=pt();Le(c),P(()=>se(c,"max",t(p))),Ae(c,()=>t(f),q=>A(f,q)),w(l,c)});var O=m(Z,2);O.__click=g;var le=r(O);Ke(le,{}),i(O),i(Y),i(ie);var U=m(ie,2),G=r(U),re=r(G,!0);P(()=>ae(re,L(t(S)))),i(G);var ee=m(G,2),oe=r(ee,!0);P(()=>ae(oe,L(t(p)))),i(ee),i(U);var W=m(U,2),J=r(W);J.__click=[mt,e];var fe=r(J),pe=E(()=>e().song!=null&&a().includes(Q(e().song.link)));He(fe,{get isFavorite(){return t(pe)}}),i(J);var K=m(J,2);K.__click=function(...l){var c;(c=e().playPrevious)==null||c.apply(this,l)};var d=r(K);ot(d,{}),i(K);var h=m(K,2);I(h,()=>!t(v),l=>{var c=gt();c.__click=_;var q=r(c);ct(q,{}),i(c),w(l,c)},l=>{var c=_t();c.__click=k;var q=r(c);Qe(q,{}),i(c),P(()=>c.disabled=e().isLoading),w(l,c)});var C=m(h,2);C.__click=function(...l){var c;(c=e().playNext)==null||c.apply(this,l)};var ue=r(C);lt(ue,{}),i(C);var N=m(C,2);N.__click=function(...l){var c;(c=e().playRandom)==null||c.apply(this,l)};var te=r(N);dt(te,{}),i(N),i(W);var H=m(W,2);Ge(H,l=>A(u,l),()=>t(u)),i(X),P(()=>{ae(_e,t(B)),K.disabled=e().playPrevious==null,C.disabled=e().playNext==null,se(H,"src",e().src)}),We("ended",H,function(...l){var c;(c=e().playNext)==null||c.apply(this,l)}),st(H,()=>t(v),l=>A(v,l)),nt("duration","durationchange",H,l=>A(p,l)),at(H,()=>t(f),l=>A(f,l)),w(o,X),V()}ke(["click"]);var wt=(o,s)=>Be(s.music.link),$t=M('<li class="flex"><button><p class="flex-1 hover:underline"> </p></button> <!> <button><!></button></li>');function De(o,s){z(s,!0);const n=R(),e=()=>T(ge,"$currentSong",n),a=()=>T(ze,"$offlineMusics",n),u=()=>T(Ce,"$favorites",n);var v=$t(),p=r(v);p.__click=function(...k){var _;(_=s.playMusic)==null||_.apply(this,k)};var f=r(p),S=r(f,!0);i(f),i(p);var y=m(p,2);I(y,()=>a().includes(Q(s.music.link)),k=>{Me(k,{})});var b=m(y,2);b.__click=[wt,s];var x=r(b),$=E(()=>u().includes(Q(s.music.link)));He(x,{get isFavorite(){return t($)}}),i(b),i(v),P(()=>{he(p,`w-full text-left ${s.music===e().song?"font-bold":""}`),ae(S,s.music.name)}),w(o,v),V()}ke(["click"]);async function xt(o,s){for(const n of t(s).musics)await et({name:n.name,...n.link})}var yt=M("<button><!></button>"),kt=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),Lt=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),At=M('<main class="flex-1 flex flex-col"><!> <div class="flex-1 flex justify-center"><div class="card w-full md:w-96 bg-base-100 shadow-xl"><div class="mb-2"><!></div> <ul class="mx-2"></ul></div></div></main>');function Mt(o,s){z(s,!0);const n=R(),e=()=>T(Fe,"$albums",n),a=E(()=>e().german.concat(e().russian).concat(e().instrumental).find(_=>_.folderName===s.album));let u=F(null);ne(()=>{t(a).image&&Pe(t(a).image).then(_=>A(u,j(_)))});async function v(_){const g=t(a).musics.indexOf(_);Ne(t(a),t(a).musics,g)}var p=At(),f=r(p),S=E(()=>t(a).name??"Lädt...");Ie(f,{get title(){return t(S)},withCloseButton:!0,children:(_,g)=>{var L=yt();L.__click=[xt,a];var B=r(L);Me(B,{}),i(L),w(_,L)},$$slots:{default:!0}});var y=m(f,2),b=r(y),x=r(b),$=r(x);I($,()=>t(u),_=>{var g=kt(),L=r(g);i(g),P(()=>se(L,"src",t(u))),w(_,g)},_=>{var g=Lt();w(_,g)}),i(x);var k=m(x,2);Se(k,21,()=>t(a).musics,je,(_,g)=>{De(_,{get music(){return t(g)},playMusic:()=>v(t(g))})}),i(k),i(b),i(y),i(p),w(o,p),V()}ke(["click"]);var St=ve('<svg><path fill="currentColor" d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h10l6 6v10q0 .825-.587 1.413T19 21zm2-4h10v-2H7zm0-4h10v-2H7zm0-4h7V7H7z"></path></svg>');function Pt(o,s){const n=de(s,["$$slots","$$events","$$legacy"]);var e=St();let a;P(()=>a=me(e,a,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),w(o,e)}var Ct=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),Ft=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),Tt=M('<div class="card w-full md:w-96 bg-base-100 shadow-xl h-min"><!> <div class="card-body w-full md:w-96"><p class="card-title"> </p></div> <div class="card-actions justify-end"><a class="btn btn-primary capitalize">Öffnen</a></div></div>');function Ht(o,s){z(s,!0);let n=F(null),e=F(null),a;a=new IntersectionObserver(async x=>{x[0].isIntersecting&&!t(n)&&(A(n,j(await Pe(s.album.image))),a.unobserve(t(e)),a=null)}),Ve(()=>{A(e,j(document.getElementById(`album_card_${s.album.name}`))),a.observe(t(e))}),tt(()=>{a==null||a.unobserve(t(e))});var u=Tt(),v=r(u);I(v,()=>t(n),x=>{var $=Ct(),k=r($);i($),P(()=>se(k,"src",t(n))),w(x,$)},x=>{var $=Ft();w(x,$)});var p=m(v,2),f=r(p),S=r(f,!0);i(f),i(p);var y=m(p,2),b=r(y);i(y),i(u),P(()=>{se(u,"id",`album_card_${s.album.name}`),ae(S,s.album.name),se(b,"href",`#album/${s.album.folderName}`)}),w(o,u),V()}var It=M('<div class="flex-1 flex flex-col overflow-hidden"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Alben</option><option>Deutsche Alben</option><option>Russische Alben</option><option>Instrumentelle Alben</option></select> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <div class="flex-1 flex flex-wrap justify-between gap-4 overflow-auto"></div></div>');function jt(o,s){z(s,!0);const n=R(),e=()=>T(Fe,"$albums",n);let a=F(j([])),u=F(""),v=F("all");ne(()=>{let g;if(t(v)==="all")g=e().german.concat(e().russian).concat(e().instrumental);else if(t(v)==="german")g=e().german;else if(t(v)==="russian")g=e().russian;else if(t(v)==="instrumental")g=e().instrumental;else throw new Error("No album selected.");A(a,j(g.filter(L=>t(u).toLocaleLowerCase().split(" ").every(B=>L.name.toLocaleLowerCase().includes(B))).sort((L,B)=>L.name>B.name?1:-1)))});var p=It(),f=r(p),S=r(f),y=r(S);y.value=(y.__value="all")==null?"":"all";var b=m(y);b.value=(b.__value="german")==null?"":"german";var x=m(b);x.value=(x.__value="russian")==null?"":"russian";var $=m(x);$.value=($.__value="instrumental")==null?"":"instrumental",i(S);var k=m(S,2);Le(k),i(f);var _=m(f,2);Se(_,21,()=>t(a),g=>g.folderName,(g,L)=>{Ht(g,{get album(){return t(L)}})}),i(_),i(p),we(S,()=>t(v),g=>A(v,g)),Ae(k,()=>t(u),g=>A(u,g)),w(o,p),V()}var Bt=M("<option> </option>"),Nt=M('<select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><!></select>'),zt=M('<div class="flex-1 flex flex-col justify-center"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><option>Favoriten</option><option>Heruntergeladene Lieder</option><option>Deutsche Lieder</option><option>Russische Lieder</option><option>Instrumentelle Lieder</option><option>Geistliche Lieder</option><option>Песнь Возрождения</option></select> <!> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <!></div>');function Vt(o,s){z(s,!0);const n=R(),e=()=>T(Ce,"$favorites",n),a=()=>T(ze,"$offlineMusics",n),u=()=>T(Fe,"$albums",n);let v=F("");const p={getMusics:d=>be(d)},f={getMusics:d=>be(d).filter(h=>e().includes(Q(h.link)))},S={getMusics:d=>be(d).filter(h=>a().includes(Q(h.link)))},y={getAlbums:d=>d.german,getMusics:d=>d.german.flatMap(h=>h.musics)},b={getAlbums:d=>d.russian,getMusics:d=>d.russian.flatMap(h=>h.musics)},x={getAlbums:d=>d.instrumental,getMusics:d=>d.instrumental.flatMap(h=>h.musics)},$={getMusics:d=>d.geistlicheLieder.musics.map(h=>({...h,name:h.name.replace("_"," - ")}))},k={getMusics:d=>d.russianBook.musics};let _=F(j(p));const g=E(()=>t(_).getAlbums==null?null:t(_).getAlbums(u()));let L=F(null);ne(()=>{t(L)&&(!t(g)||!t(g).includes(t(L)))&&A(L,null)});function B(d,h){return d.localeCompare(h,void 0,{numeric:!0,sensitivity:"base"})}function X(d,h){return B(d.name,h.name)}let D=F(j([]));ne(()=>{A(D,j(t(L)!=null?t(L).musics.sort(X):t(_).getMusics(u()).sort(X)))});async function _e(d){const h=t(D).indexOf(d),C=[...u().german,...u().russian,...u().instrumental,u().geistlicheLieder,u().russianBook].find(ue=>ue.musics.some(N=>Q(N.link)===Q(d.link)))??null;Ne(C,t(D),h)}const ie=E(()=>t(D).filter(d=>t(v).toLocaleLowerCase().split(" ").every(h=>d.name.toLocaleLowerCase().includes(h))));var Y=zt(),Z=r(Y),O=r(Z),le=r(O);le.value=(le.__value=p)==null?"":p;var U=m(le);U.value=(U.__value=f)==null?"":f;var G=m(U);G.value=(G.__value=S)==null?"":S;var re=m(G);re.value=(re.__value=y)==null?"":y;var ee=m(re);ee.value=(ee.__value=b)==null?"":b;var oe=m(ee);oe.value=(oe.__value=x)==null?"":x;var W=m(oe);W.value=(W.__value=$)==null?"":$;var J=m(W);J.value=(J.__value=k)==null?"":k,i(O);var fe=m(O,2);I(fe,()=>t(g),d=>{var h=Nt(),C=r(h);C.value=(C.__value=null)==null?"":null;var ue=m(C);Se(ue,17,()=>t(g),je,(N,te)=>{var H=Bt(),l={},c=r(H,!0);i(H),P(()=>{l!==(l=t(te))&&(H.value=(H.__value=t(te))==null?"":t(te)),ae(c,t(te).name)}),w(N,H)}),i(h),we(h,()=>t(L),N=>A(L,N)),w(d,h)});var pe=m(fe,2);Le(pe),i(Z);var K=m(Z,2);Xe(K,{get items(){return t(ie)},height:"100%",Children:(h,C=Ee)=>{De(h,{get music(){return C()},playMusic:()=>_e(C())})},$$slots:{Children:!0}}),i(Y),we(O,()=>t(_),d=>A(_,d)),Ae(pe,()=>t(v),d=>A(v,d)),w(o,Y),V()}var Dt=M('<a href="/"><!></a> <a href="#settings"><!></a>',1),Ot=M('<div class="flex-1 flex flex-col overflow-hidden"><!> <div class="tabs justify-center"><a href="/music">Lieder</a> <a href="/music#alben">Alben</a></div> <div class="flex-1 flex overflow-auto p-1"><!></div></div>');function qt(o,s){z(s,!1);const n=R(),e=()=>T(ye,"$page",n);xe();var a=Ot(),u=r(a);Ie(u,{title:"Geistliche Lieder!",withCloseButton:!1,children:(b,x)=>{var $=Dt(),k=ce($),_=r(k);Pt(_,{}),i(k);var g=m(k,2),L=r(g);Ye(L,{}),i(g),w(b,$)},$$slots:{default:!0}});var v=m(u,2),p=r(v),f=m(p,2);i(v);var S=m(v,2),y=r(S);I(y,()=>e().url.hash==="",b=>{Vt(b,{})},b=>{var x=$e(),$=ce(x);I($,()=>e().url.hash==="#alben",k=>{jt(k,{})},null,!0),w(b,x)}),i(S),i(a),P(()=>{he(p,`tab ${e().url.hash===""?"tab-active":""}`),he(f,`tab ${e().url.hash==="#alben"?"tab-active":""}`)}),w(o,a),V()}var Et=M('<div class="self-center mb-2 w-full"><!></div>'),Rt=M('<div class="w-full h-full flex flex-col"><main class="overflow-auto flex-1 flex flex-col"><!></main> <!></div>');function Ut(o,s){z(s,!1);const n=R(),e=()=>T(ye,"$page",n),a=()=>T(ge,"$currentSong",n);function u(){return decodeURI(e().url.hash.substring(7))}xe();var v=Rt(),p=r(v),f=r(p);I(f,()=>e().url.hash===""||e().url.hash==="#alben",y=>{qt(y,{})},y=>{var b=$e(),x=ce(b);I(x,()=>e().url.hash.startsWith("#album"),$=>{var k=Re(u);Mt($,{get album(){return t(k)}})},null,!0),w(y,b)}),i(p);var S=m(p,2);I(S,()=>a().src!=null||a().isLoading,y=>{var b=Et(),x=r(b);ht(x,{}),i(b),w(y,b)}),i(v),w(o,v),V()}var Gt=M(`<div class="divider">Info</div> <p class="inline">Nachdem Lieder einmal ausgewählt wurden, werden diese heruntergeladen und
    offline gespeichert. Danach können diese Lieder auch ohne Internet gehört
    werden und werden selbst bei einer Internetverbindung nicht erneut
    heruntergeladen. Dass ein Lied heruntergeladen wurde, erkennt man am <!>-Icon</p>`,1);function Wt(o){Ze(o,{children:(s,n)=>{var e=Gt(),a=m(ce(e),2),u=m(r(a));Me(u,{class:"inline"}),Ue(),i(a),w(s,e)},$$slots:{default:!0}})}function ia(o,s){z(s,!1);const n=R(),e=()=>T(ye,"$page",n);xe();var a=$e(),u=ce(a);I(u,()=>e().url.hash==="#settings",v=>{Wt(v)},v=>{Ut(v,{})}),w(o,a),V()}export{ia as component};
