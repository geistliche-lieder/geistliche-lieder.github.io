import{n as Ue,s as lt,k as ht,l as Ft,r as rr,e as He,o as $t,m as Ct,p as vn}from"../chunks/scheduler.c7c6d1ea.js";import{S as ut,i as ft,g as Q,s as me,m as Be,h as Z,j as oe,c as be,y as Me,f as J,n as Oe,k as Y,a as Ee,x as q,z as Ie,A as ke,o as dt,B as _n,r as et,u as tt,v as rt,d as Pe,t as je,w as nt,C as nr,D as pt,p as Nt,b as xt,e as dr,E as Yt}from"../chunks/index.eab26d42.js";import{p as Dr}from"../chunks/stores.b2b9a450.js";import{T as Fr,e as Qe,u as En,o as Sn,i as An}from"../chunks/TitleBar.f5b25ff0.js";import{c as Ye,a as Bt}from"../chunks/store.d78c978e.js";const kn=typeof window<"u";let In=kn?e=>requestAnimationFrame(e):Ue;const Bn=(e,t)=>t.some(r=>e instanceof r);let pr,yr;function On(){return pr||(pr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rn(){return yr||(yr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $r=new WeakMap,Jt=new WeakMap,Wr=new WeakMap,qt=new WeakMap,ir=new WeakMap;function Tn(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{r(Je(e.result)),s()},l=()=>{n(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&$r.set(r,e)}).catch(()=>{}),ir.set(t,e),t}function Ln(e){if(Jt.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{r(),s()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});Jt.set(e,t)}let Xt={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Jt.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Wr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Je(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Pn(e){Xt=e(Xt)}function Cn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Vt(this),t,...r);return Wr.set(n,t.sort?t.sort():[t]),Je(n)}:Rn().includes(e)?function(...t){return e.apply(Vt(this),t),Je($r.get(this))}:function(...t){return Je(e.apply(Vt(this),t))}}function jn(e){return typeof e=="function"?Cn(e):(e instanceof IDBTransaction&&Ln(e),Bn(e,On())?new Proxy(e,Xt):e)}function Je(e){if(e instanceof IDBRequest)return Tn(e);if(qt.has(e))return qt.get(e);const t=jn(e);return t!==e&&(qt.set(e,t),ir.set(t,e)),t}const Vt=e=>ir.get(e);function Mn(e,t,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const l=indexedDB.open(e,t),o=Je(l);return n&&l.addEventListener("upgradeneeded",f=>{n(Je(l.result),f.oldVersion,f.newVersion,Je(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Un=["get","getKey","getAll","getAllKeys","count"],Nn=["put","add","delete","clear"],zt=new Map;function gr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zt.get(t))return zt.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=Nn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Un.includes(r)))return;const a=async function(l,...o){const f=this.transaction(l,s?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),s&&f.done]))[0]};return zt.set(t,a),a}Pn(e=>({...e,get:(t,r,n)=>gr(t,r)||e.get(t,r,n),has:(t,r)=>!!gr(t,r)||e.has(t,r)}));var xn=Object.create,or=Object.defineProperty,Dn=Object.getOwnPropertyDescriptor,Fn=Object.getOwnPropertyNames,$n=Object.getPrototypeOf,Wn=Object.prototype.hasOwnProperty,qn=e=>or(e,"__esModule",{value:!0}),Vn=(e,t)=>()=>(e&&(t=e(e=0)),t),se=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fn(t))!Wn.call(e,s)&&(r||s!=="default")&&or(e,s,{get:()=>t[s],enumerable:!(n=Dn(t,s))||n.enumerable});return e},$e=(e,t)=>zn(qn(or(e!=null?xn($n(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Gn=se(e=>{re(),e.byteLength=f,e.toByteArray=y,e.fromByteArray=E;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(a=0,l=s.length;a<l;++a)t[a]=s[a],r[s.charCodeAt(a)]=a;var a,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(c){var p=c.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=c.indexOf("=");m===-1&&(m=p);var I=m===p?0:4-m%4;return[m,I]}function f(c){var p=o(c),m=p[0],I=p[1];return(m+I)*3/4-I}function d(c,p,m){return(p+m)*3/4-m}function y(c){var p,m=o(c),I=m[0],b=m[1],A=new n(d(c,I,b)),O=0,M=b>0?I-4:I,S;for(S=0;S<M;S+=4)p=r[c.charCodeAt(S)]<<18|r[c.charCodeAt(S+1)]<<12|r[c.charCodeAt(S+2)]<<6|r[c.charCodeAt(S+3)],A[O++]=p>>16&255,A[O++]=p>>8&255,A[O++]=p&255;return b===2&&(p=r[c.charCodeAt(S)]<<2|r[c.charCodeAt(S+1)]>>4,A[O++]=p&255),b===1&&(p=r[c.charCodeAt(S)]<<10|r[c.charCodeAt(S+1)]<<4|r[c.charCodeAt(S+2)]>>2,A[O++]=p>>8&255,A[O++]=p&255),A}function g(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function _(c,p,m){for(var I,b=[],A=p;A<m;A+=3)I=(c[A]<<16&16711680)+(c[A+1]<<8&65280)+(c[A+2]&255),b.push(g(I));return b.join("")}function E(c){for(var p,m=c.length,I=m%3,b=[],A=16383,O=0,M=m-I;O<M;O+=A)b.push(_(c,O,O+A>M?M:O+A));return I===1?(p=c[m-1],b.push(t[p>>2]+t[p<<4&63]+"==")):I===2&&(p=(c[m-2]<<8)+c[m-1],b.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),b.join("")}}),Hn=se(e=>{re(),e.read=function(t,r,n,s,a){var l,o,f=a*8-s-1,d=(1<<f)-1,y=d>>1,g=-7,_=n?a-1:0,E=n?-1:1,c=t[r+_];for(_+=E,l=c&(1<<-g)-1,c>>=-g,g+=f;g>0;l=l*256+t[r+_],_+=E,g-=8);for(o=l&(1<<-g)-1,l>>=-g,g+=s;g>0;o=o*256+t[r+_],_+=E,g-=8);if(l===0)l=1-y;else{if(l===d)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,s),l=l-y}return(c?-1:1)*o*Math.pow(2,l-s)},e.write=function(t,r,n,s,a,l){var o,f,d,y=l*8-a-1,g=(1<<y)-1,_=g>>1,E=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=s?0:l-1,p=s?1:-1,m=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=g):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?r+=E/d:r+=E*Math.pow(2,1-_),r*d>=2&&(o++,d/=2),o+_>=g?(f=0,o=g):o+_>=1?(f=(r*d-1)*Math.pow(2,a),o=o+_):(f=r*Math.pow(2,_-1)*Math.pow(2,a),o=0));a>=8;t[n+c]=f&255,c+=p,f/=256,a-=8);for(o=o<<a|f,y+=a;y>0;t[n+c]=o&255,c+=p,o/=256,y-=8);t[n+c-p]|=m*128}}),Tt=se(e=>{re();var t=Gn(),r=Hn(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;var s=2147483647;e.kMaxLength=s,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>s)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,h){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(i)}return f(i,u,h)}o.poolSize=8192;function f(i,u,h){if(typeof i=="string")return _(i,u);if(ArrayBuffer.isView(i))return c(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Ne(i,ArrayBuffer)||i&&Ne(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ne(i,SharedArrayBuffer)||i&&Ne(i.buffer,SharedArrayBuffer)))return p(i,u,h);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let k=i.valueOf&&i.valueOf();if(k!=null&&k!==i)return o.from(k,u,h);let P=m(i);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,h){return f(i,u,h)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function y(i,u,h){return d(i),i<=0?l(i):u!==void 0?typeof h=="string"?l(i).fill(u,h):l(i).fill(u):l(i)}o.alloc=function(i,u,h){return y(i,u,h)};function g(i){return d(i),l(i<0?0:I(i)|0)}o.allocUnsafe=function(i){return g(i)},o.allocUnsafeSlow=function(i){return g(i)};function _(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=A(i,u)|0,k=l(h),P=k.write(i,u);return P!==h&&(k=k.slice(0,P)),k}function E(i){let u=i.length<0?0:I(i.length)|0,h=l(u);for(let k=0;k<u;k+=1)h[k]=i[k]&255;return h}function c(i){if(Ne(i,Uint8Array)){let u=new Uint8Array(i);return p(u.buffer,u.byteOffset,u.byteLength)}return E(i)}function p(i,u,h){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let k;return u===void 0&&h===void 0?k=new Uint8Array(i):h===void 0?k=new Uint8Array(i,u):k=new Uint8Array(i,u,h),Object.setPrototypeOf(k,o.prototype),k}function m(i){if(o.isBuffer(i)){let u=I(i.length)|0,h=l(u);return h.length===0||i.copy(h,0,0,u),h}if(i.length!==void 0)return typeof i.length!="number"||bt(i.length)?l(0):E(i);if(i.type==="Buffer"&&Array.isArray(i.data))return E(i.data)}function I(i){if(i>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return i|0}function b(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Ne(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Ne(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let h=i.length,k=u.length;for(let P=0,F=Math.min(h,k);P<F;++P)if(i[P]!==u[P]){h=i[P],k=u[P];break}return h<k?-1:k<h?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<i.length;++h)u+=i[h].length;let k=o.allocUnsafe(u),P=0;for(h=0;h<i.length;++h){let F=i[h];if(Ne(F,Uint8Array))P+F.length>k.length?(o.isBuffer(F)||(F=o.from(F)),F.copy(k,P)):Uint8Array.prototype.set.call(k,F,P);else if(o.isBuffer(F))F.copy(k,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=F.length}return k};function A(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Ne(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let h=i.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&h===0)return 0;let P=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return ye(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return xe(i).length;default:if(P)return k?-1:ye(i).length;u=(""+u).toLowerCase(),P=!0}}o.byteLength=A;function O(i,u,h){let k=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return ce(this,u,h);case"utf8":case"utf-8":return X(this,u,h);case"ascii":return fe(this,u,h);case"latin1":case"binary":return Se(this,u,h);case"base64":return G(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,u,h);default:if(k)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),k=!0}}o.prototype._isBuffer=!0;function M(i,u,h){let k=i[u];i[u]=i[h],i[h]=k}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)M(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)M(this,u,u+3),M(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)M(this,u,u+7),M(this,u+1,u+6),M(this,u+2,u+5),M(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?X(this,0,i):O.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,h,k,P){if(Ne(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),h===void 0&&(h=i?i.length:0),k===void 0&&(k=0),P===void 0&&(P=this.length),u<0||h>i.length||k<0||P>this.length)throw new RangeError("out of range index");if(k>=P&&u>=h)return 0;if(k>=P)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,k>>>=0,P>>>=0,this===i)return 0;let F=P-k,H=h-u,ve=Math.min(F,H),Le=this.slice(k,P),Ae=i.slice(u,h);for(let _e=0;_e<ve;++_e)if(Le[_e]!==Ae[_e]){F=Le[_e],H=Ae[_e];break}return F<H?-1:H<F?1:0};function S(i,u,h,k,P){if(i.length===0)return-1;if(typeof h=="string"?(k=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,bt(h)&&(h=P?0:i.length-1),h<0&&(h=i.length+h),h>=i.length){if(P)return-1;h=i.length-1}else if(h<0)if(P)h=0;else return-1;if(typeof u=="string"&&(u=o.from(u,k)),o.isBuffer(u))return u.length===0?-1:T(i,u,h,k,P);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(i,u,h):Uint8Array.prototype.lastIndexOf.call(i,u,h):T(i,[u],h,k,P);throw new TypeError("val must be string, number or Buffer")}function T(i,u,h,k,P){let F=1,H=i.length,ve=u.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(i.length<2||u.length<2)return-1;F=2,H/=2,ve/=2,h/=2}function Le(_e,Re){return F===1?_e[Re]:_e.readUInt16BE(Re*F)}let Ae;if(P){let _e=-1;for(Ae=h;Ae<H;Ae++)if(Le(i,Ae)===Le(u,_e===-1?0:Ae-_e)){if(_e===-1&&(_e=Ae),Ae-_e+1===ve)return _e*F}else _e!==-1&&(Ae-=Ae-_e),_e=-1}else for(h+ve>H&&(h=H-ve),Ae=h;Ae>=0;Ae--){let _e=!0;for(let Re=0;Re<ve;Re++)if(Le(i,Ae+Re)!==Le(u,Re)){_e=!1;break}if(_e)return Ae}return-1}o.prototype.includes=function(i,u,h){return this.indexOf(i,u,h)!==-1},o.prototype.indexOf=function(i,u,h){return S(this,i,u,h,!0)},o.prototype.lastIndexOf=function(i,u,h){return S(this,i,u,h,!1)};function C(i,u,h,k){h=Number(h)||0;let P=i.length-h;k?(k=Number(k),k>P&&(k=P)):k=P;let F=u.length;k>F/2&&(k=F/2);let H;for(H=0;H<k;++H){let ve=parseInt(u.substr(H*2,2),16);if(bt(ve))return H;i[h+H]=ve}return H}function x(i,u,h,k){return Ke(ye(u,i.length-h),i,h,k)}function $(i,u,h,k){return Ke(pe(u),i,h,k)}function j(i,u,h,k){return Ke(xe(u),i,h,k)}function z(i,u,h,k){return Ke(U(u,i.length-h),i,h,k)}o.prototype.write=function(i,u,h,k){if(u===void 0)k="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")k=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,k===void 0&&(k="utf8")):(k=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let P=this.length-u;if((h===void 0||h>P)&&(h=P),i.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let F=!1;for(;;)switch(k){case"hex":return C(this,i,u,h);case"utf8":case"utf-8":return x(this,i,u,h);case"ascii":case"latin1":case"binary":return $(this,i,u,h);case"base64":return j(this,i,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,i,u,h);default:if(F)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),F=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(i,u,h){return u===0&&h===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(u,h))}function X(i,u,h){h=Math.min(i.length,h);let k=[],P=u;for(;P<h;){let F=i[P],H=null,ve=F>239?4:F>223?3:F>191?2:1;if(P+ve<=h){let Le,Ae,_e,Re;switch(ve){case 1:F<128&&(H=F);break;case 2:Le=i[P+1],(Le&192)===128&&(Re=(F&31)<<6|Le&63,Re>127&&(H=Re));break;case 3:Le=i[P+1],Ae=i[P+2],(Le&192)===128&&(Ae&192)===128&&(Re=(F&15)<<12|(Le&63)<<6|Ae&63,Re>2047&&(Re<55296||Re>57343)&&(H=Re));break;case 4:Le=i[P+1],Ae=i[P+2],_e=i[P+3],(Le&192)===128&&(Ae&192)===128&&(_e&192)===128&&(Re=(F&15)<<18|(Le&63)<<12|(Ae&63)<<6|_e&63,Re>65535&&Re<1114112&&(H=Re))}}H===null?(H=65533,ve=1):H>65535&&(H-=65536,k.push(H>>>10&1023|55296),H=56320|H&1023),k.push(H),P+=ve}return ne(k)}var ie=4096;function ne(i){let u=i.length;if(u<=ie)return String.fromCharCode.apply(String,i);let h="",k=0;for(;k<u;)h+=String.fromCharCode.apply(String,i.slice(k,k+=ie));return h}function fe(i,u,h){let k="";h=Math.min(i.length,h);for(let P=u;P<h;++P)k+=String.fromCharCode(i[P]&127);return k}function Se(i,u,h){let k="";h=Math.min(i.length,h);for(let P=u;P<h;++P)k+=String.fromCharCode(i[P]);return k}function ce(i,u,h){let k=i.length;(!u||u<0)&&(u=0),(!h||h<0||h>k)&&(h=k);let P="";for(let F=u;F<h;++F)P+=Pt[i[F]];return P}function we(i,u,h){let k=i.slice(u,h),P="";for(let F=0;F<k.length-1;F+=2)P+=String.fromCharCode(k[F]+k[F+1]*256);return P}o.prototype.slice=function(i,u){let h=this.length;i=~~i,u=u===void 0?h:~~u,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<i&&(u=i);let k=this.subarray(i,u);return Object.setPrototypeOf(k,o.prototype),k};function de(i,u,h){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>h)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||de(i,u,this.length);let k=this[i],P=1,F=0;for(;++F<u&&(P*=256);)k+=this[i+F]*P;return k},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||de(i,u,this.length);let k=this[i+--u],P=1;for(;u>0&&(P*=256);)k+=this[i+--u]*P;return k},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||de(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||de(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||de(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||de(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||de(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=De(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let k=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,P=this[++i]+this[++i]*2**8+this[++i]*2**16+h*2**24;return BigInt(k)+(BigInt(P)<<BigInt(32))}),o.prototype.readBigUInt64BE=De(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let k=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],P=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h;return(BigInt(k)<<BigInt(32))+BigInt(P)}),o.prototype.readIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||de(i,u,this.length);let k=this[i],P=1,F=0;for(;++F<u&&(P*=256);)k+=this[i+F]*P;return P*=128,k>=P&&(k-=Math.pow(2,8*u)),k},o.prototype.readIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||de(i,u,this.length);let k=u,P=1,F=this[i+--k];for(;k>0&&(P*=256);)F+=this[i+--k]*P;return P*=128,F>=P&&(F-=Math.pow(2,8*u)),F},o.prototype.readInt8=function(i,u){return i=i>>>0,u||de(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||de(i,2,this.length);let h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||de(i,2,this.length);let h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||de(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||de(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=De(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let k=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(h<<24);return(BigInt(k)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=De(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let k=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(k)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||de(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||de(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||de(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||de(i,8,this.length),r.read(this,i,!1,52,8)};function R(i,u,h,k,P,F){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>P||u<F)throw new RangeError('"value" argument is out of bounds');if(h+k>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,h,k){if(i=+i,u=u>>>0,h=h>>>0,!k){let H=Math.pow(2,8*h)-1;R(this,i,u,h,H,0)}let P=1,F=0;for(this[u]=i&255;++F<h&&(P*=256);)this[u+F]=i/P&255;return u+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,h,k){if(i=+i,u=u>>>0,h=h>>>0,!k){let H=Math.pow(2,8*h)-1;R(this,i,u,h,H,0)}let P=h-1,F=1;for(this[u+P]=i&255;--P>=0&&(F*=256);)this[u+P]=i/F&255;return u+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function N(i,u,h,k,P){le(u,k,P,i,h,7);let F=Number(u&BigInt(4294967295));i[h++]=F,F=F>>8,i[h++]=F,F=F>>8,i[h++]=F,F=F>>8,i[h++]=F;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,h}function W(i,u,h,k,P){le(u,k,P,i,h,7);let F=Number(u&BigInt(4294967295));i[h+7]=F,F=F>>8,i[h+6]=F,F=F>>8,i[h+5]=F,F=F>>8,i[h+4]=F;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h+3]=H,H=H>>8,i[h+2]=H,H=H>>8,i[h+1]=H,H=H>>8,i[h]=H,h+8}o.prototype.writeBigUInt64LE=De(function(i,u=0){return N(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=De(function(i,u=0){return W(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,h,k){if(i=+i,u=u>>>0,!k){let ve=Math.pow(2,8*h-1);R(this,i,u,h,ve-1,-ve)}let P=0,F=1,H=0;for(this[u]=i&255;++P<h&&(F*=256);)i<0&&H===0&&this[u+P-1]!==0&&(H=1),this[u+P]=(i/F>>0)-H&255;return u+h},o.prototype.writeIntBE=function(i,u,h,k){if(i=+i,u=u>>>0,!k){let ve=Math.pow(2,8*h-1);R(this,i,u,h,ve-1,-ve)}let P=h-1,F=1,H=0;for(this[u+P]=i&255;--P>=0&&(F*=256);)i<0&&H===0&&this[u+P+1]!==0&&(H=1),this[u+P]=(i/F>>0)-H&255;return u+h},o.prototype.writeInt8=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||R(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=De(function(i,u=0){return N(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=De(function(i,u=0){return W(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function te(i,u,h,k,P,F){if(h+k>i.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function ge(i,u,h,k,P){return u=+u,h=h>>>0,P||te(i,u,h,4),r.write(i,u,h,k,23,4),h+4}o.prototype.writeFloatLE=function(i,u,h){return ge(this,i,u,!0,h)},o.prototype.writeFloatBE=function(i,u,h){return ge(this,i,u,!1,h)};function he(i,u,h,k,P){return u=+u,h=h>>>0,P||te(i,u,h,8),r.write(i,u,h,k,52,8),h+8}o.prototype.writeDoubleLE=function(i,u,h){return he(this,i,u,!0,h)},o.prototype.writeDoubleBE=function(i,u,h){return he(this,i,u,!1,h)},o.prototype.copy=function(i,u,h,k){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!k&&k!==0&&(k=this.length),u>=i.length&&(u=i.length),u||(u=0),k>0&&k<h&&(k=h),k===h||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),i.length-u<k-h&&(k=i.length-u+h);let P=k-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,k):Uint8Array.prototype.set.call(i,this.subarray(h,k),u),P},o.prototype.fill=function(i,u,h,k){if(typeof i=="string"){if(typeof u=="string"?(k=u,u=0,h=this.length):typeof h=="string"&&(k=h,h=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!o.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(i.length===1){let F=i.charCodeAt(0);(k==="utf8"&&F<128||k==="latin1")&&(i=F)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let P;if(typeof i=="number")for(P=u;P<h;++P)this[P]=i;else{let F=o.isBuffer(i)?i:o.from(i,k),H=F.length;if(H===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(P=0;P<h-u;++P)this[P+u]=F[P%H]}return this};var B={};function L(i,u,h){B[i]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(i,u,h){let k=`The value of "${i}" is out of range.`,P=h;return Number.isInteger(h)&&Math.abs(h)>2**32?P=D(String(h)):typeof h=="bigint"&&(P=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(P=D(P)),P+="n"),k+=` It must be ${u}. Received ${P}`,k},RangeError);function D(i){let u="",h=i.length,k=i[0]==="-"?1:0;for(;h>=k+4;h-=3)u=`_${i.slice(h-3,h)}${u}`;return`${i.slice(0,h)}${u}`}function K(i,u,h){w(u,"offset"),(i[u]===void 0||i[u+h]===void 0)&&v(u,i.length-(h+1))}function le(i,u,h,k,P,F){if(i>h||i<u){let H=typeof u=="bigint"?"n":"",ve;throw F>3?u===0||u===BigInt(0)?ve=`>= 0${H} and < 2${H} ** ${(F+1)*8}${H}`:ve=`>= -(2${H} ** ${(F+1)*8-1}${H}) and < 2 ** ${(F+1)*8-1}${H}`:ve=`>= ${u}${H} and <= ${h}${H}`,new B.ERR_OUT_OF_RANGE("value",ve,i)}K(k,P,F)}function w(i,u){if(typeof i!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",i)}function v(i,u,h){throw Math.floor(i)!==i?(w(i,h),new B.ERR_OUT_OF_RANGE(h||"offset","an integer",i)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,i)}var V=/[^+/0-9A-Za-z-_]/g;function ee(i){if(i=i.split("=")[0],i=i.trim().replace(V,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function ye(i,u){u=u||1/0;let h,k=i.length,P=null,F=[];for(let H=0;H<k;++H){if(h=i.charCodeAt(H),h>55295&&h<57344){if(!P){if(h>56319){(u-=3)>-1&&F.push(239,191,189);continue}else if(H+1===k){(u-=3)>-1&&F.push(239,191,189);continue}P=h;continue}if(h<56320){(u-=3)>-1&&F.push(239,191,189),P=h;continue}h=(P-55296<<10|h-56320)+65536}else P&&(u-=3)>-1&&F.push(239,191,189);if(P=null,h<128){if((u-=1)<0)break;F.push(h)}else if(h<2048){if((u-=2)<0)break;F.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;F.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;F.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return F}function pe(i){let u=[];for(let h=0;h<i.length;++h)u.push(i.charCodeAt(h)&255);return u}function U(i,u){let h,k,P,F=[];for(let H=0;H<i.length&&!((u-=2)<0);++H)h=i.charCodeAt(H),k=h>>8,P=h%256,F.push(P),F.push(k);return F}function xe(i){return t.toByteArray(ee(i))}function Ke(i,u,h,k){let P;for(P=0;P<k&&!(P+h>=u.length||P>=i.length);++P)u[P+h]=i[P];return P}function Ne(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function bt(i){return i!==i}var Pt=function(){let i="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let k=h*16;for(let P=0;P<16;++P)u[k+P]=i[h]+i[P]}return u}();function De(i){return typeof BigInt>"u"?wt:i}function wt(){throw new Error("BigInt not supported")}}),ae,ue,Ze,re=Vn(()=>{ae=$e(Tt(),1),ue={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},Ze=globalThis}),Lt=se((e,t)=>{re();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(S,T,C){return Function.prototype.apply.call(S,T,C)},s;r&&typeof r.ownKeys=="function"?s=r.ownKeys:Object.getOwnPropertySymbols?s=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:s=function(S){return Object.getOwnPropertyNames(S)};function a(S){console&&console.warn&&console.warn(S)}var l=Number.isNaN||function(S){return S!==S};function o(){o.init.call(this)}t.exports=o,t.exports.once=A,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");f=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function y(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return y(this)},o.prototype.emit=function(S){for(var T=[],C=1;C<arguments.length;C++)T.push(arguments[C]);var x=S==="error",$=this._events;if($!==void 0)x=x&&$.error===void 0;else if(!x)return!1;if(x){var j;if(T.length>0&&(j=T[0]),j instanceof Error)throw j;var z=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw z.context=j,z}var G=$[S];if(G===void 0)return!1;if(typeof G=="function")n(G,this,T);else for(var X=G.length,ie=m(G,X),C=0;C<X;++C)n(ie[C],this,T);return!0};function g(S,T,C,x){var $,j,z;if(d(C),j=S._events,j===void 0?(j=S._events=Object.create(null),S._eventsCount=0):(j.newListener!==void 0&&(S.emit("newListener",T,C.listener?C.listener:C),j=S._events),z=j[T]),z===void 0)z=j[T]=C,++S._eventsCount;else if(typeof z=="function"?z=j[T]=x?[C,z]:[z,C]:x?z.unshift(C):z.push(C),$=y(S),$>0&&z.length>$&&!z.warned){z.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=S,G.type=T,G.count=z.length,a(G)}return S}o.prototype.addListener=function(S,T){return g(this,S,T,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,T){return g(this,S,T,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(S,T,C){var x={fired:!1,wrapFn:void 0,target:S,type:T,listener:C},$=_.bind(x);return $.listener=C,x.wrapFn=$,$}o.prototype.once=function(S,T){return d(T),this.on(S,E(this,S,T)),this},o.prototype.prependOnceListener=function(S,T){return d(T),this.prependListener(S,E(this,S,T)),this},o.prototype.removeListener=function(S,T){var C,x,$,j,z;if(d(T),x=this._events,x===void 0)return this;if(C=x[S],C===void 0)return this;if(C===T||C.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete x[S],x.removeListener&&this.emit("removeListener",S,C.listener||T));else if(typeof C!="function"){for($=-1,j=C.length-1;j>=0;j--)if(C[j]===T||C[j].listener===T){z=C[j].listener,$=j;break}if($<0)return this;$===0?C.shift():I(C,$),C.length===1&&(x[S]=C[0]),x.removeListener!==void 0&&this.emit("removeListener",S,z||T)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var T,C,x;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[S]),this;if(arguments.length===0){var $=Object.keys(C),j;for(x=0;x<$.length;++x)j=$[x],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=C[S],typeof T=="function")this.removeListener(S,T);else if(T!==void 0)for(x=T.length-1;x>=0;x--)this.removeListener(S,T[x]);return this};function c(S,T,C){var x=S._events;if(x===void 0)return[];var $=x[T];return $===void 0?[]:typeof $=="function"?C?[$.listener||$]:[$]:C?b($):m($,$.length)}o.prototype.listeners=function(S){return c(this,S,!0)},o.prototype.rawListeners=function(S){return c(this,S,!1)},o.listenerCount=function(S,T){return typeof S.listenerCount=="function"?S.listenerCount(T):p.call(S,T)},o.prototype.listenerCount=p;function p(S){var T=this._events;if(T!==void 0){var C=T[S];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function m(S,T){for(var C=new Array(T),x=0;x<T;++x)C[x]=S[x];return C}function I(S,T){for(;T+1<S.length;T++)S[T]=S[T+1];S.pop()}function b(S){for(var T=new Array(S.length),C=0;C<T.length;++C)T[C]=S[C].listener||S[C];return T}function A(S,T){return new Promise(function(C,x){function $(z){S.removeListener(T,j),x(z)}function j(){typeof S.removeListener=="function"&&S.removeListener("error",$),C([].slice.call(arguments))}M(S,T,j,{once:!0}),T!=="error"&&O(S,$,{once:!0})})}function O(S,T,C){typeof S.on=="function"&&M(S,"error",T,C)}function M(S,T,C,x){if(typeof S.on=="function")x.once?S.once(T,C):S.on(T,C);else if(typeof S.addEventListener=="function")S.addEventListener(T,function $(j){x.once&&S.removeEventListener(T,$),C(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}}),qr=se((e,t)=>{re(),t.exports=Lt().EventEmitter}),Vr=se(()=>{re()}),Kn=se((e,t)=>{re();function r(c,p){var m=Object.keys(c);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(c);p&&(I=I.filter(function(b){return Object.getOwnPropertyDescriptor(c,b).enumerable})),m.push.apply(m,I)}return m}function n(c){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?r(Object(m),!0).forEach(function(I){s(c,I,m[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(I){Object.defineProperty(c,I,Object.getOwnPropertyDescriptor(m,I))})}return c}function s(c,p,m){return p in c?Object.defineProperty(c,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[p]=m,c}function a(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function l(c,p){for(var m=0;m<p.length;m++){var I=p[m];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,I.key,I)}}function o(c,p,m){return p&&l(c.prototype,p),m&&l(c,m),c}var f=Tt(),d=f.Buffer,y=Vr(),g=y.inspect,_=g&&g.custom||"inspect";function E(c,p,m){d.prototype.copy.call(c,p,m)}t.exports=function(){function c(){a(this,c),this.head=null,this.tail=null,this.length=0}return o(c,[{key:"push",value:function(p){var m={data:p,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(p){var m={data:p,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var m=this.head,I=""+m.data;m=m.next;)I+=p+m.data;return I}},{key:"concat",value:function(p){if(this.length===0)return d.alloc(0);for(var m=d.allocUnsafe(p>>>0),I=this.head,b=0;I;)E(I.data,m,b),b+=I.data.length,I=I.next;return m}},{key:"consume",value:function(p,m){var I;return p<this.head.data.length?(I=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?I=this.shift():I=m?this._getString(p):this._getBuffer(p),I}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var m=this.head,I=1,b=m.data;for(p-=b.length;m=m.next;){var A=m.data,O=p>A.length?A.length:p;if(O===A.length?b+=A:b+=A.slice(0,p),p-=O,p===0){O===A.length?(++I,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=A.slice(O));break}++I}return this.length-=I,b}},{key:"_getBuffer",value:function(p){var m=d.allocUnsafe(p),I=this.head,b=1;for(I.data.copy(m),p-=I.data.length;I=I.next;){var A=I.data,O=p>A.length?A.length:p;if(A.copy(m,m.length-p,0,O),p-=O,p===0){O===A.length?(++b,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=A.slice(O));break}++b}return this.length-=b,m}},{key:_,value:function(p,m){return g(this,n({},m,{depth:0,customInspect:!1}))}}]),c}()}),zr=se((e,t)=>{re();function r(f,d){var y=this,g=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return g||_?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ue.nextTick(l,this,f)):ue.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(E){!d&&E?y._writableState?y._writableState.errorEmitted?ue.nextTick(s,y):(y._writableState.errorEmitted=!0,ue.nextTick(n,y,E)):ue.nextTick(n,y,E):d?(ue.nextTick(s,y),d(E)):ue.nextTick(s,y)}),this)}function n(f,d){l(f,d),s(f)}function s(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var y=f._readableState,g=f._writableState;y&&y.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:a,errorOrDestroy:o}}),gt=se((e,t)=>{re();function r(d,y){d.prototype=Object.create(y.prototype),d.prototype.constructor=d,d.__proto__=y}var n={};function s(d,y,g){g||(g=Error);function _(c,p,m){return typeof y=="string"?y:y(c,p,m)}var E=function(c){r(p,c);function p(m,I,b){return c.call(this,_(m,I,b))||this}return p}(g);E.prototype.name=g.name,E.prototype.code=d,n[d]=E}function a(d,y){if(Array.isArray(d)){var g=d.length;return d=d.map(function(_){return String(_)}),g>2?"one of ".concat(y," ").concat(d.slice(0,g-1).join(", "),", or ")+d[g-1]:g===2?"one of ".concat(y," ").concat(d[0]," or ").concat(d[1]):"of ".concat(y," ").concat(d[0])}else return"of ".concat(y," ").concat(String(d))}function l(d,y,g){return d.substr(!g||g<0?0:+g,y.length)===y}function o(d,y,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-y.length,g)===y}function f(d,y,g){return typeof g!="number"&&(g=0),g+y.length>d.length?!1:d.indexOf(y,g)!==-1}s("ERR_INVALID_OPT_VALUE",function(d,y){return'The value "'+y+'" is invalid for option "'+d+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(d,y,g){var _;typeof y=="string"&&l(y,"not ")?(_="must not be",y=y.replace(/^not /,"")):_="must be";var E;if(o(d," argument"))E="The ".concat(d," ").concat(_," ").concat(a(y,"type"));else{var c=f(d,".")?"property":"argument";E='The "'.concat(d,'" ').concat(c," ").concat(_," ").concat(a(y,"type"))}return E+=". Received type ".concat(typeof g),E},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),Gr=se((e,t)=>{re();var r=gt().codes.ERR_INVALID_OPT_VALUE;function n(a,l,o){return a.highWaterMark!=null?a.highWaterMark:l?a[o]:null}function s(a,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var y=f?o:"highWaterMark";throw new r(y,d)}return Math.floor(d)}return a.objectMode?16:16*1024}t.exports={getHighWaterMark:s}}),it=se((e,t)=>{re(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}}),Yn=se((e,t)=>{re(),t.exports=r;function r(s,a){if(n("noDeprecation"))return s;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(a);n("traceDeprecation")?console.trace(a):console.warn(a),l=!0}return s.apply(this,arguments)}return o}function n(s){try{if(!Ze.localStorage)return!1}catch{return!1}var a=Ze.localStorage[s];return a==null?!1:String(a).toLowerCase()==="true"}}),Hr=se((e,t)=>{re(),t.exports=$;function r(B){var L=this;this.next=null,this.entry=null,this.finish=function(){he(L,B)}}var n;$.WritableState=C;var s={deprecate:Yn()},a=qr(),l=Tt().Buffer,o=Ze.Uint8Array||function(){};function f(B){return l.from(B)}function d(B){return l.isBuffer(B)||B instanceof o}var y=zr(),g=Gr(),_=g.getHighWaterMark,E=gt().codes,c=E.ERR_INVALID_ARG_TYPE,p=E.ERR_METHOD_NOT_IMPLEMENTED,m=E.ERR_MULTIPLE_CALLBACK,I=E.ERR_STREAM_CANNOT_PIPE,b=E.ERR_STREAM_DESTROYED,A=E.ERR_STREAM_NULL_VALUES,O=E.ERR_STREAM_WRITE_AFTER_END,M=E.ERR_UNKNOWN_ENCODING,S=y.errorOrDestroy;it()($,a);function T(){}function C(B,L,D){n=n||yt(),B=B||{},typeof D!="boolean"&&(D=L instanceof n),this.objectMode=!!B.objectMode,D&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=_(this,B,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var K=B.decodeStrings===!1;this.decodeStrings=!K,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){Se(L,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}C.prototype.getBuffer=function(){for(var B=this.bufferedRequest,L=[];B;)L.push(B),B=B.next;return L},function(){try{Object.defineProperty(C.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var x;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(B){return x.call(this,B)?!0:this!==$?!1:B&&B._writableState instanceof C}})):x=function(B){return B instanceof this};function $(B){n=n||yt();var L=this instanceof n;if(!L&&!x.call($,this))return new $(B);this._writableState=new C(B,this,L),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),a.call(this)}$.prototype.pipe=function(){S(this,new I)};function j(B,L){var D=new O;S(B,D),ue.nextTick(L,D)}function z(B,L,D,K){var le;return D===null?le=new A:typeof D!="string"&&!L.objectMode&&(le=new c("chunk",["string","Buffer"],D)),le?(S(B,le),ue.nextTick(K,le),!1):!0}$.prototype.write=function(B,L,D){var K=this._writableState,le=!1,w=!K.objectMode&&d(B);return w&&!l.isBuffer(B)&&(B=f(B)),typeof L=="function"&&(D=L,L=null),w?L="buffer":L||(L=K.defaultEncoding),typeof D!="function"&&(D=T),K.ending?j(this,D):(w||z(this,K,B,D))&&(K.pendingcb++,le=X(this,K,w,B,L,D)),le},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&de(this,B))},$.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new M(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(B,L,D){return!B.objectMode&&B.decodeStrings!==!1&&typeof L=="string"&&(L=l.from(L,D)),L}Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function X(B,L,D,K,le,w){if(!D){var v=G(L,K,le);K!==v&&(D=!0,le="buffer",K=v)}var V=L.objectMode?1:K.length;L.length+=V;var ee=L.length<L.highWaterMark;if(ee||(L.needDrain=!0),L.writing||L.corked){var ye=L.lastBufferedRequest;L.lastBufferedRequest={chunk:K,encoding:le,isBuf:D,callback:w,next:null},ye?ye.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else ie(B,L,!1,V,K,le,w);return ee}function ie(B,L,D,K,le,w,v){L.writelen=K,L.writecb=v,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new b("write")):D?B._writev(le,L.onwrite):B._write(le,w,L.onwrite),L.sync=!1}function ne(B,L,D,K,le){--L.pendingcb,D?(ue.nextTick(le,K),ue.nextTick(te,B,L),B._writableState.errorEmitted=!0,S(B,K)):(le(K),B._writableState.errorEmitted=!0,S(B,K),te(B,L))}function fe(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function Se(B,L){var D=B._writableState,K=D.sync,le=D.writecb;if(typeof le!="function")throw new m;if(fe(D),L)ne(B,D,K,L,le);else{var w=R(D)||B.destroyed;!w&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&de(B,D),K?ue.nextTick(ce,B,D,w,le):ce(B,D,w,le)}}function ce(B,L,D,K){D||we(B,L),L.pendingcb--,K(),te(B,L)}function we(B,L){L.length===0&&L.needDrain&&(L.needDrain=!1,B.emit("drain"))}function de(B,L){L.bufferProcessing=!0;var D=L.bufferedRequest;if(B._writev&&D&&D.next){var K=L.bufferedRequestCount,le=new Array(K),w=L.corkedRequestsFree;w.entry=D;for(var v=0,V=!0;D;)le[v]=D,D.isBuf||(V=!1),D=D.next,v+=1;le.allBuffers=V,ie(B,L,!0,L.length,le,"",w.finish),L.pendingcb++,L.lastBufferedRequest=null,w.next?(L.corkedRequestsFree=w.next,w.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;D;){var ee=D.chunk,ye=D.encoding,pe=D.callback,U=L.objectMode?1:ee.length;if(ie(B,L,!1,U,ee,ye,pe),D=D.next,L.bufferedRequestCount--,L.writing)break}D===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=D,L.bufferProcessing=!1}$.prototype._write=function(B,L,D){D(new p("_write()"))},$.prototype._writev=null,$.prototype.end=function(B,L,D){var K=this._writableState;return typeof B=="function"?(D=B,B=null,L=null):typeof L=="function"&&(D=L,L=null),B!=null&&this.write(B,L),K.corked&&(K.corked=1,this.uncork()),K.ending||ge(this,K,D),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function R(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function N(B,L){B._final(function(D){L.pendingcb--,D&&S(B,D),L.prefinished=!0,B.emit("prefinish"),te(B,L)})}function W(B,L){!L.prefinished&&!L.finalCalled&&(typeof B._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,ue.nextTick(N,B,L)):(L.prefinished=!0,B.emit("prefinish")))}function te(B,L){var D=R(L);if(D&&(W(B,L),L.pendingcb===0&&(L.finished=!0,B.emit("finish"),L.autoDestroy))){var K=B._readableState;(!K||K.autoDestroy&&K.endEmitted)&&B.destroy()}return D}function ge(B,L,D){L.ending=!0,te(B,L),D&&(L.finished?ue.nextTick(D):B.once("finish",D)),L.ended=!0,B.writable=!1}function he(B,L,D){var K=B.entry;for(B.entry=null;K;){var le=K.callback;L.pendingcb--,le(D),K=K.next}L.corkedRequestsFree.next=B}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){!this._writableState||(this._writableState.destroyed=B)}}),$.prototype.destroy=y.destroy,$.prototype._undestroy=y.undestroy,$.prototype._destroy=function(B,L){L(B)}}),yt=se((e,t)=>{re();var r=Object.keys||function(g){var _=[];for(var E in g)_.push(E);return _};t.exports=f;var n=Kr(),s=Hr();for(it()(f,n),a=r(s.prototype),o=0;o<a.length;o++)l=a[o],f.prototype[l]||(f.prototype[l]=s.prototype[l]);var a,l,o;function f(g){if(!(this instanceof f))return new f(g);n.call(this,g),s.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||ue.nextTick(y,this)}function y(g){g.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}),Jn=se((e,t)=>{re();var r=Tt(),n=r.Buffer;function s(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=a);function a(l,o,f){return n(l,o,f)}a.prototype=Object.create(n.prototype),s(n,a),a.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},a.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),mr=se(e=>{re();var t=Jn().Buffer,r=t.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(b){if(!b)return"utf8";for(var A;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(A)return;b=(""+b).toLowerCase(),A=!0}}function s(b){var A=n(b);if(typeof A!="string"&&(t.isEncoding===r||!r(b)))throw new Error("Unknown encoding: "+b);return A||b}e.StringDecoder=a;function a(b){this.encoding=s(b);var A;switch(this.encoding){case"utf16le":this.text=_,this.end=E,A=4;break;case"utf8":this.fillLast=d,A=4;break;case"base64":this.text=c,this.end=p,A=3;break;default:this.write=m,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(A)}a.prototype.write=function(b){if(b.length===0)return"";var A,O;if(this.lastNeed){if(A=this.fillLast(b),A===void 0)return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<b.length?A?A+this.text(b,O):this.text(b,O):A||""},a.prototype.end=g,a.prototype.text=y,a.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function l(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function o(b,A,O){var M=A.length-1;if(M<O)return 0;var S=l(A[M]);return S>=0?(S>0&&(b.lastNeed=S-1),S):--M<O||S===-2?0:(S=l(A[M]),S>=0?(S>0&&(b.lastNeed=S-2),S):--M<O||S===-2?0:(S=l(A[M]),S>=0?(S>0&&(S===2?S=0:b.lastNeed=S-3),S):0))}function f(b,A,O){if((A[0]&192)!==128)return b.lastNeed=0,"�";if(b.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return b.lastNeed=1,"�";if(b.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return b.lastNeed=2,"�"}}function d(b){var A=this.lastTotal-this.lastNeed,O=f(this,b);if(O!==void 0)return O;if(this.lastNeed<=b.length)return b.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,A,0,b.length),this.lastNeed-=b.length}function y(b,A){var O=o(this,b,A);if(!this.lastNeed)return b.toString("utf8",A);this.lastTotal=O;var M=b.length-(O-this.lastNeed);return b.copy(this.lastChar,0,M),b.toString("utf8",A,M)}function g(b){var A=b&&b.length?this.write(b):"";return this.lastNeed?A+"�":A}function _(b,A){if((b.length-A)%2===0){var O=b.toString("utf16le",A);if(O){var M=O.charCodeAt(O.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",A,b.length-1)}function E(b){var A=b&&b.length?this.write(b):"";if(this.lastNeed){var O=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,O)}return A}function c(b,A){var O=(b.length-A)%3;return O===0?b.toString("base64",A):(this.lastNeed=3-O,this.lastTotal=3,O===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",A,b.length-O))}function p(b){var A=b&&b.length?this.write(b):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function m(b){return b.toString(this.encoding)}function I(b){return b&&b.length?this.write(b):""}}),ar=se((e,t)=>{re();var r=gt().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,y=new Array(d),g=0;g<d;g++)y[g]=arguments[g];o.apply(this,y)}}}function s(){}function a(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||s);var y=f.readable||f.readable!==!1&&o.readable,g=f.writable||f.writable!==!1&&o.writable,_=function(){o.writable||c()},E=o._writableState&&o._writableState.finished,c=function(){g=!1,E=!0,y||d.call(o)},p=o._readableState&&o._readableState.endEmitted,m=function(){y=!1,p=!0,g||d.call(o)},I=function(O){d.call(o,O)},b=function(){var O;if(y&&!p)return(!o._readableState||!o._readableState.ended)&&(O=new r),d.call(o,O);if(g&&!E)return(!o._writableState||!o._writableState.ended)&&(O=new r),d.call(o,O)},A=function(){o.req.on("finish",c)};return a(o)?(o.on("complete",c),o.on("abort",b),o.req?A():o.on("request",A)):g&&!o._writableState&&(o.on("end",_),o.on("close",_)),o.on("end",m),o.on("finish",c),f.error!==!1&&o.on("error",I),o.on("close",b),function(){o.removeListener("complete",c),o.removeListener("abort",b),o.removeListener("request",A),o.req&&o.req.removeListener("finish",c),o.removeListener("end",_),o.removeListener("close",_),o.removeListener("finish",c),o.removeListener("end",m),o.removeListener("error",I),o.removeListener("close",b)}}t.exports=l}),Xn=se((e,t)=>{re();var r;function n(A,O,M){return O in A?Object.defineProperty(A,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[O]=M,A}var s=ar(),a=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),y=Symbol("handlePromise"),g=Symbol("stream");function _(A,O){return{value:A,done:O}}function E(A){var O=A[a];if(O!==null){var M=A[g].read();M!==null&&(A[d]=null,A[a]=null,A[l]=null,O(_(M,!1)))}}function c(A){ue.nextTick(E,A)}function p(A,O){return function(M,S){A.then(function(){if(O[f]){M(_(void 0,!0));return}O[y](M,S)},S)}}var m=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((r={get stream(){return this[g]},next:function(){var A=this,O=this[o];if(O!==null)return Promise.reject(O);if(this[f])return Promise.resolve(_(void 0,!0));if(this[g].destroyed)return new Promise(function(C,x){ue.nextTick(function(){A[o]?x(A[o]):C(_(void 0,!0))})});var M=this[d],S;if(M)S=new Promise(p(M,this));else{var T=this[g].read();if(T!==null)return Promise.resolve(_(T,!1));S=new Promise(this[y])}return this[d]=S,S}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var A=this;return new Promise(function(O,M){A[g].destroy(null,function(S){if(S){M(S);return}O(_(void 0,!0))})})}),r),m),b=function(A){var O,M=Object.create(I,(O={},n(O,g,{value:A,writable:!0}),n(O,a,{value:null,writable:!0}),n(O,l,{value:null,writable:!0}),n(O,o,{value:null,writable:!0}),n(O,f,{value:A._readableState.endEmitted,writable:!0}),n(O,y,{value:function(S,T){var C=M[g].read();C?(M[d]=null,M[a]=null,M[l]=null,S(_(C,!1))):(M[a]=S,M[l]=T)},writable:!0}),O));return M[d]=null,s(A,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var T=M[l];T!==null&&(M[d]=null,M[a]=null,M[l]=null,T(S)),M[o]=S;return}var C=M[a];C!==null&&(M[d]=null,M[a]=null,M[l]=null,C(_(void 0,!0))),M[f]=!0}),A.on("readable",c.bind(null,M)),M};t.exports=b}),Qn=se((e,t)=>{re(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Kr=se((e,t)=>{re(),t.exports=j;var r;j.ReadableState=$,Lt().EventEmitter;var n=function(w,v){return w.listeners(v).length},s=qr(),a=Tt().Buffer,l=Ze.Uint8Array||function(){};function o(w){return a.from(w)}function f(w){return a.isBuffer(w)||w instanceof l}var d=Vr(),y;d&&d.debuglog?y=d.debuglog("stream"):y=function(){};var g=Kn(),_=zr(),E=Gr(),c=E.getHighWaterMark,p=gt().codes,m=p.ERR_INVALID_ARG_TYPE,I=p.ERR_STREAM_PUSH_AFTER_EOF,b=p.ERR_METHOD_NOT_IMPLEMENTED,A=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,M,S;it()(j,s);var T=_.errorOrDestroy,C=["error","close","destroy","pause","resume"];function x(w,v,V){if(typeof w.prependListener=="function")return w.prependListener(v,V);!w._events||!w._events[v]?w.on(v,V):Array.isArray(w._events[v])?w._events[v].unshift(V):w._events[v]=[V,w._events[v]]}function $(w,v,V){r=r||yt(),w=w||{},typeof V!="boolean"&&(V=v instanceof r),this.objectMode=!!w.objectMode,V&&(this.objectMode=this.objectMode||!!w.readableObjectMode),this.highWaterMark=c(this,w,"readableHighWaterMark",V),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=w.emitClose!==!1,this.autoDestroy=!!w.autoDestroy,this.destroyed=!1,this.defaultEncoding=w.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,w.encoding&&(O||(O=mr().StringDecoder),this.decoder=new O(w.encoding),this.encoding=w.encoding)}function j(w){if(r=r||yt(),!(this instanceof j))return new j(w);var v=this instanceof r;this._readableState=new $(w,this,v),this.readable=!0,w&&(typeof w.read=="function"&&(this._read=w.read),typeof w.destroy=="function"&&(this._destroy=w.destroy)),s.call(this)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(w){!this._readableState||(this._readableState.destroyed=w)}}),j.prototype.destroy=_.destroy,j.prototype._undestroy=_.undestroy,j.prototype._destroy=function(w,v){v(w)},j.prototype.push=function(w,v){var V=this._readableState,ee;return V.objectMode?ee=!0:typeof w=="string"&&(v=v||V.defaultEncoding,v!==V.encoding&&(w=a.from(w,v),v=""),ee=!0),z(this,w,v,!1,ee)},j.prototype.unshift=function(w){return z(this,w,null,!0,!1)};function z(w,v,V,ee,ye){y("readableAddChunk",v);var pe=w._readableState;if(v===null)pe.reading=!1,Se(w,pe);else{var U;if(ye||(U=X(pe,v)),U)T(w,U);else if(pe.objectMode||v&&v.length>0)if(typeof v!="string"&&!pe.objectMode&&Object.getPrototypeOf(v)!==a.prototype&&(v=o(v)),ee)pe.endEmitted?T(w,new A):G(w,pe,v,!0);else if(pe.ended)T(w,new I);else{if(pe.destroyed)return!1;pe.reading=!1,pe.decoder&&!V?(v=pe.decoder.write(v),pe.objectMode||v.length!==0?G(w,pe,v,!1):de(w,pe)):G(w,pe,v,!1)}else ee||(pe.reading=!1,de(w,pe))}return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function G(w,v,V,ee){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,w.emit("data",V)):(v.length+=v.objectMode?1:V.length,ee?v.buffer.unshift(V):v.buffer.push(V),v.needReadable&&ce(w)),de(w,v)}function X(w,v){var V;return!f(v)&&typeof v!="string"&&v!==void 0&&!w.objectMode&&(V=new m("chunk",["string","Buffer","Uint8Array"],v)),V}j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(w){O||(O=mr().StringDecoder);var v=new O(w);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ee="";V!==null;)ee+=v.write(V.data),V=V.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var ie=1073741824;function ne(w){return w>=ie?w=ie:(w--,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w++),w}function fe(w,v){return w<=0||v.length===0&&v.ended?0:v.objectMode?1:w!==w?v.flowing&&v.length?v.buffer.head.data.length:v.length:(w>v.highWaterMark&&(v.highWaterMark=ne(w)),w<=v.length?w:v.ended?v.length:(v.needReadable=!0,0))}j.prototype.read=function(w){y("read",w),w=parseInt(w,10);var v=this._readableState,V=w;if(w!==0&&(v.emittedReadable=!1),w===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return y("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?D(this):ce(this),null;if(w=fe(w,v),w===0&&v.ended)return v.length===0&&D(this),null;var ee=v.needReadable;y("need readable",ee),(v.length===0||v.length-w<v.highWaterMark)&&(ee=!0,y("length less than watermark",ee)),v.ended||v.reading?(ee=!1,y("reading or ended",ee)):ee&&(y("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(w=fe(V,v)));var ye;return w>0?ye=L(w,v):ye=null,ye===null?(v.needReadable=v.length<=v.highWaterMark,w=0):(v.length-=w,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),V!==w&&v.ended&&D(this)),ye!==null&&this.emit("data",ye),ye};function Se(w,v){if(y("onEofChunk"),!v.ended){if(v.decoder){var V=v.decoder.end();V&&V.length&&(v.buffer.push(V),v.length+=v.objectMode?1:V.length)}v.ended=!0,v.sync?ce(w):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,we(w)))}}function ce(w){var v=w._readableState;y("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(y("emitReadable",v.flowing),v.emittedReadable=!0,ue.nextTick(we,w))}function we(w){var v=w._readableState;y("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(w.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,B(w)}function de(w,v){v.readingMore||(v.readingMore=!0,ue.nextTick(R,w,v))}function R(w,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var V=v.length;if(y("maybeReadMore read 0"),w.read(0),V===v.length)break}v.readingMore=!1}j.prototype._read=function(w){T(this,new b("_read()"))},j.prototype.pipe=function(w,v){var V=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=w;break;case 1:ee.pipes=[ee.pipes,w];break;default:ee.pipes.push(w);break}ee.pipesCount+=1,y("pipe count=%d opts=%j",ee.pipesCount,v);var ye=(!v||v.end!==!1)&&w!==ue.stdout&&w!==ue.stderr,pe=ye?xe:u;ee.endEmitted?ue.nextTick(pe):V.once("end",pe),w.on("unpipe",U);function U(h,k){y("onunpipe"),h===V&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,bt())}function xe(){y("onend"),w.end()}var Ke=N(V);w.on("drain",Ke);var Ne=!1;function bt(){y("cleanup"),w.removeListener("close",wt),w.removeListener("finish",i),w.removeListener("drain",Ke),w.removeListener("error",De),w.removeListener("unpipe",U),V.removeListener("end",xe),V.removeListener("end",u),V.removeListener("data",Pt),Ne=!0,ee.awaitDrain&&(!w._writableState||w._writableState.needDrain)&&Ke()}V.on("data",Pt);function Pt(h){y("ondata");var k=w.write(h);y("dest.write",k),k===!1&&((ee.pipesCount===1&&ee.pipes===w||ee.pipesCount>1&&le(ee.pipes,w)!==-1)&&!Ne&&(y("false write response, pause",ee.awaitDrain),ee.awaitDrain++),V.pause())}function De(h){y("onerror",h),u(),w.removeListener("error",De),n(w,"error")===0&&T(w,h)}x(w,"error",De);function wt(){w.removeListener("finish",i),u()}w.once("close",wt);function i(){y("onfinish"),w.removeListener("close",wt),u()}w.once("finish",i);function u(){y("unpipe"),V.unpipe(w)}return w.emit("pipe",V),ee.flowing||(y("pipe resume"),V.resume()),w};function N(w){return function(){var v=w._readableState;y("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&n(w,"data")&&(v.flowing=!0,B(w))}}j.prototype.unpipe=function(w){var v=this._readableState,V={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return w&&w!==v.pipes?this:(w||(w=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,w&&w.emit("unpipe",this,V),this);if(!w){var ee=v.pipes,ye=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var pe=0;pe<ye;pe++)ee[pe].emit("unpipe",this,{hasUnpiped:!1});return this}var U=le(v.pipes,w);return U===-1?this:(v.pipes.splice(U,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),w.emit("unpipe",this,V),this)},j.prototype.on=function(w,v){var V=s.prototype.on.call(this,w,v),ee=this._readableState;return w==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):w==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,y("on readable",ee.length,ee.reading),ee.length?ce(this):ee.reading||ue.nextTick(te,this)),V},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(w,v){var V=s.prototype.removeListener.call(this,w,v);return w==="readable"&&ue.nextTick(W,this),V},j.prototype.removeAllListeners=function(w){var v=s.prototype.removeAllListeners.apply(this,arguments);return(w==="readable"||w===void 0)&&ue.nextTick(W,this),v};function W(w){var v=w._readableState;v.readableListening=w.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:w.listenerCount("data")>0&&w.resume()}function te(w){y("readable nexttick read 0"),w.read(0)}j.prototype.resume=function(){var w=this._readableState;return w.flowing||(y("resume"),w.flowing=!w.readableListening,ge(this,w)),w.paused=!1,this};function ge(w,v){v.resumeScheduled||(v.resumeScheduled=!0,ue.nextTick(he,w,v))}function he(w,v){y("resume",v.reading),v.reading||w.read(0),v.resumeScheduled=!1,w.emit("resume"),B(w),v.flowing&&!v.reading&&w.read(0)}j.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function B(w){var v=w._readableState;for(y("flow",v.flowing);v.flowing&&w.read()!==null;);}j.prototype.wrap=function(w){var v=this,V=this._readableState,ee=!1;w.on("end",function(){if(y("wrapped end"),V.decoder&&!V.ended){var U=V.decoder.end();U&&U.length&&v.push(U)}v.push(null)}),w.on("data",function(U){if(y("wrapped data"),V.decoder&&(U=V.decoder.write(U)),!(V.objectMode&&U==null)&&!(!V.objectMode&&(!U||!U.length))){var xe=v.push(U);xe||(ee=!0,w.pause())}});for(var ye in w)this[ye]===void 0&&typeof w[ye]=="function"&&(this[ye]=function(U){return function(){return w[U].apply(w,arguments)}}(ye));for(var pe=0;pe<C.length;pe++)w.on(C[pe],this.emit.bind(this,C[pe]));return this._read=function(U){y("wrapped _read",U),ee&&(ee=!1,w.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=Xn()),M(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(w){this._readableState&&(this._readableState.flowing=w)}}),j._fromList=L,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(w,v){if(v.length===0)return null;var V;return v.objectMode?V=v.buffer.shift():!w||w>=v.length?(v.decoder?V=v.buffer.join(""):v.buffer.length===1?V=v.buffer.first():V=v.buffer.concat(v.length),v.buffer.clear()):V=v.buffer.consume(w,v.decoder),V}function D(w){var v=w._readableState;y("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,ue.nextTick(K,v,w))}function K(w,v){if(y("endReadableNT",w.endEmitted,w.length),!w.endEmitted&&w.length===0&&(w.endEmitted=!0,v.readable=!1,v.emit("end"),w.autoDestroy)){var V=v._writableState;(!V||V.autoDestroy&&V.finished)&&v.destroy()}}typeof Symbol=="function"&&(j.from=function(w,v){return S===void 0&&(S=Qn()),S(j,w,v)});function le(w,v){for(var V=0,ee=w.length;V<ee;V++)if(w[V]===v)return V;return-1}}),Yr=se((e,t)=>{re(),t.exports=d;var r=gt().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=yt();it()(d,o);function f(_,E){var c=this._transformState;c.transforming=!1;var p=c.writecb;if(p===null)return this.emit("error",new s);c.writechunk=null,c.writecb=null,E!=null&&this.push(E),p(_);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function d(_){if(!(this instanceof d))return new d(_);o.call(this,_),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",y)}function y(){var _=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(E,c){g(_,E,c)}):g(this,null,null)}d.prototype.push=function(_,E){return this._transformState.needTransform=!1,o.prototype.push.call(this,_,E)},d.prototype._transform=function(_,E,c){c(new n("_transform()"))},d.prototype._write=function(_,E,c){var p=this._transformState;if(p.writecb=c,p.writechunk=_,p.writeencoding=E,!p.transforming){var m=this._readableState;(p.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},d.prototype._read=function(_){var E=this._transformState;E.writechunk!==null&&!E.transforming?(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform)):E.needTransform=!0},d.prototype._destroy=function(_,E){o.prototype._destroy.call(this,_,function(c){E(c)})};function g(_,E,c){if(E)return _.emit("error",E);if(c!=null&&_.push(c),_._writableState.length)throw new l;if(_._transformState.transforming)throw new a;return _.push(null)}}),Zn=se((e,t)=>{re(),t.exports=n;var r=Yr();it()(n,r);function n(s){if(!(this instanceof n))return new n(s);r.call(this,s)}n.prototype._transform=function(s,a,l){l(null,s)}}),ei=se((e,t)=>{re();var r;function n(c){var p=!1;return function(){p||(p=!0,c.apply(void 0,arguments))}}var s=gt().codes,a=s.ERR_MISSING_ARGS,l=s.ERR_STREAM_DESTROYED;function o(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,p,m,I){I=n(I);var b=!1;c.on("close",function(){b=!0}),r===void 0&&(r=ar()),r(c,{readable:p,writable:m},function(O){if(O)return I(O);b=!0,I()});var A=!1;return function(O){if(!b&&!A){if(A=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();I(O||new l("pipe"))}}}function y(c){c()}function g(c,p){return c.pipe(p)}function _(c){return!c.length||typeof c[c.length-1]!="function"?o:c.pop()}function E(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];var I=_(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new a("streams");var b,A=p.map(function(O,M){var S=M<p.length-1,T=M>0;return d(O,S,T,function(C){b||(b=C),C&&A.forEach(y),!S&&(A.forEach(y),I(b))})});return p.reduce(g)}t.exports=E}),mt=se((e,t)=>{re(),e=t.exports=Kr(),e.Stream=e,e.Readable=e,e.Writable=Hr(),e.Duplex=yt(),e.Transform=Yr(),e.PassThrough=Zn(),e.finished=ar(),e.pipeline=ei()}),ti=se((e,t)=>{re(),t.exports=r;function r(n,s){if(n&&s)return r(n)(s);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){a[l]=n[l]}),a;function a(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(y){f[y]=d[y]}),f}}}),Jr=se((e,t)=>{re();var r=ti();t.exports=r(n),t.exports.strict=r(s),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})});function n(a){var l=function(){return l.called?l.value:(l.called=!0,l.value=a.apply(this,arguments))};return l.called=!1,l}function s(a){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=a.apply(this,arguments)},o=a.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),Xr=se((e,t)=>{re();var r=Jr(),n=function(){},s=function(o){return o.setHeader&&typeof o.abort=="function"},a=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var y=o._writableState,g=o._readableState,_=f.readable||f.readable!==!1&&o.readable,E=f.writable||f.writable!==!1&&o.writable,c=!1,p=function(){o.writable||m()},m=function(){E=!1,_||d.call(o)},I=function(){_=!1,E||d.call(o)},b=function(T){d.call(o,T?new Error("exited with error code: "+T):null)},A=function(T){d.call(o,T)},O=function(){ue.nextTick(M)},M=function(){if(!c){if(_&&!(g&&g.ended&&!g.destroyed))return d.call(o,new Error("premature close"));if(E&&!(y&&y.ended&&!y.destroyed))return d.call(o,new Error("premature close"))}},S=function(){o.req.on("finish",m)};return s(o)?(o.on("complete",m),o.on("abort",O),o.req?S():o.on("request",S)):E&&!y&&(o.on("end",p),o.on("close",p)),a(o)&&o.on("exit",b),o.on("end",I),o.on("finish",m),f.error!==!1&&o.on("error",A),o.on("close",O),function(){c=!0,o.removeListener("complete",m),o.removeListener("abort",O),o.removeListener("request",S),o.req&&o.req.removeListener("finish",m),o.removeListener("end",p),o.removeListener("close",p),o.removeListener("finish",m),o.removeListener("exit",b),o.removeListener("end",I),o.removeListener("error",A),o.removeListener("close",O)}};t.exports=l}),ri=se(()=>{re()}),ni=se((e,t)=>{re();var r=Jr(),n=Xr(),s=ri(),a=function(){},l=/^v?\.0/.test(ue.version),o=function(c){return typeof c=="function"},f=function(c){return!l||!s?!1:(c instanceof(s.ReadStream||a)||c instanceof(s.WriteStream||a))&&o(c.close)},d=function(c){return c.setHeader&&o(c.abort)},y=function(c,p,m,I){I=r(I);var b=!1;c.on("close",function(){b=!0}),n(c,{readable:p,writable:m},function(O){if(O)return I(O);b=!0,I()});var A=!1;return function(O){if(!b&&!A){if(A=!0,f(c))return c.close(a);if(d(c))return c.abort();if(o(c.destroy))return c.destroy();I(O||new Error("stream was destroyed"))}}},g=function(c){c()},_=function(c,p){return c.pipe(p)},E=function(){var c=Array.prototype.slice.call(arguments),p=o(c[c.length-1]||a)&&c.pop()||a;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var m,I=c.map(function(b,A){var O=A<c.length-1,M=A>0;return y(b,O,M,function(S){m||(m=S),S&&I.forEach(g),!O&&(I.forEach(g),p(m))})});return c.reduce(_)};t.exports=E}),ii=se((e,t)=>{re(),t.exports=r;function r(s){var a=s._readableState;return a?a.objectMode||typeof s._duplexState=="number"?s.read():s.read(n(a)):null}function n(s){return s.buffer.length?s.buffer.head?s.buffer.head.data.length:s.buffer[0].length:s.length}}),oi=se((e,t)=>{re();var r=mt(),n=Xr(),s=it(),a=ii(),l=ae.Buffer.from&&ae.Buffer.from!==Uint8Array.from?ae.Buffer.from([0]):new ae.Buffer([0]),o=function(c,p){c._corked?c.once("uncork",p):p()},f=function(c,p){c._autoDestroy&&c.destroy(p)},d=function(c,p){return function(m){m?f(c,m.message==="premature close"?null:m):p&&!c._ended&&c.end()}},y=function(c,p){if(!c||c._writableState&&c._writableState.finished)return p();if(c._writableState)return c.end(p);c.end(),p()},g=function(){},_=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},E=function(c,p,m){if(!(this instanceof E))return new E(c,p,m);r.Duplex.call(this,m),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!m||m.autoDestroy!==!1,this._forwardDestroy=!m||m.destroy!==!1,this._forwardEnd=!m||m.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),p&&this.setReadable(p)};s(E,r.Duplex),E.obj=function(c,p,m){return m||(m={}),m.objectMode=!0,m.highWaterMark=16,new E(c,p,m)},E.prototype.cork=function(){++this._corked===1&&this.emit("cork")},E.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},E.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var p=this,m=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),I=function(){var A=p._ondrain;p._ondrain=null,A&&A()},b=function(){p._writable.removeListener("drain",I),m()};this._unwrite&&ue.nextTick(I),this._writable=c,this._writable.on("drain",I),this._unwrite=b,this.uncork()},E.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var p=this,m=n(c,{writable:!1,readable:!0},d(this)),I=function(){p._forward()},b=function(){p.push(null)},A=function(){p._readable2.removeListener("readable",I),p._readable2.removeListener("end",b),m()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:_(c),this._readable2.on("readable",I),this._readable2.on("end",b),this._unread=A,this._forward()},E.prototype._read=function(){this._drained=!0,this._forward()},E.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=a(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},E.prototype.destroy=function(c,p){if(p||(p=g),this.destroyed)return p(null);this.destroyed=!0;var m=this;ue.nextTick(function(){m._destroy(c),p(null)})},E.prototype._destroy=function(c){if(c){var p=this._ondrain;this._ondrain=null,p?p(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},E.prototype._write=function(c,p,m){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,c,p,m));if(c===l)return this._finish(m);if(!this._writable)return m();this._writable.write(c)===!1?this._ondrain=m:this.destroyed||m()}},E.prototype._finish=function(c){var p=this;this.emit("preend"),o(this,function(){y(p._forwardEnd&&p._writable,function(){p._writableState.prefinished===!1&&(p._writableState.prefinished=!0),p.emit("prefinish"),o(p,c)})})},E.prototype.end=function(c,p,m){return typeof c=="function"?this.end(null,null,c):typeof p=="function"?this.end(c,null,p):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,m))},t.exports=E}),ai=se((e,t)=>{re();var r=ni(),n=it(),s=oi(),a=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=a(arguments);if(!(this instanceof f))return new f(d);s.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,s),f.prototype.setPipeline=function(){var d=a(arguments),y=this,g=!1,_=d[0],E=d[d.length-1];E=E.readable?E:null,_=_.writable?_:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){g||y.cork()}),r(d,function(p){if(y.removeListener("close",c),p)return y.destroy(p.message==="premature close"?null:p);g=!0,y._autoDestroy===!1&&(y._autoDestroy=!0),y.uncork()}),this.destroyed)return c();this.setWritable(_),this.setReadable(E)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),si=se(()=>{re()}),Qr=se((e,t)=>{re(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof ue<"u"&&typeof ue.pid=="number"&&ue.versions&&ue.versions.node)return s(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return a(l,o)}function s(l,o){var f=si(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var y=new Uint8Array(l),g=0;g<l;++g)y[g]=d.readUInt8(g);return y;default:throw new Error(o.type+" is unsupported.")}}function a(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var y=new ae.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new ae.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),Zr=se((e,t)=>{re(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var a=42;r[n]=a;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==a||o.enumerable!==!0)return!1}return!0}}),Wt=se((e,t)=>{re();var r=Zr();t.exports=function(){return r()&&!!Symbol.toStringTag}}),li=se((e,t)=>{re();var r=typeof Symbol<"u"&&Symbol,n=Zr();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),ui=se((e,t)=>{re();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,s=Object.prototype.toString,a="[object Function]";t.exports=function(l){var o=this;if(typeof o!="function"||s.call(o)!==a)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,y=function(){if(this instanceof d){var p=o.apply(this,f.concat(n.call(arguments)));return Object(p)===p?p:this}else return o.apply(l,f.concat(n.call(arguments)))},g=Math.max(0,o.length-f.length),_=[],E=0;E<g;E++)_.push("$"+E);if(d=Function("binder","return function ("+_.join(",")+"){ return binder.apply(this,arguments); }")(y),o.prototype){var c=function(){};c.prototype=o.prototype,d.prototype=new c,c.prototype=null}return d}}),sr=se((e,t)=>{re();var r=ui();t.exports=Function.prototype.bind||r}),fi=se((e,t)=>{re();var r=sr();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),lr=se((e,t)=>{re();var r,n=SyntaxError,s=Function,a=TypeError,l=function(j){try{return s('"use strict"; return ('+j+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new a},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,y=li()(),g=Object.getPrototypeOf||function(j){return j.__proto__},_={},E=typeof Uint8Array>"u"?r:g(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":y?g([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":_,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?g(g([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y?r:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y?r:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?g(""[Symbol.iterator]()):r,"%Symbol%":y?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":E,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},p=function j(z){var G;if(z==="%AsyncFunction%")G=l("async function () {}");else if(z==="%GeneratorFunction%")G=l("function* () {}");else if(z==="%AsyncGeneratorFunction%")G=l("async function* () {}");else if(z==="%AsyncGenerator%"){var X=j("%AsyncGeneratorFunction%");X&&(G=X.prototype)}else if(z==="%AsyncIteratorPrototype%"){var ie=j("%AsyncGenerator%");ie&&(G=g(ie.prototype))}return c[z]=G,G},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=sr(),b=fi(),A=I.call(Function.call,Array.prototype.concat),O=I.call(Function.apply,Array.prototype.splice),M=I.call(Function.call,String.prototype.replace),S=I.call(Function.call,String.prototype.slice),T=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,x=function(j){var z=S(j,0,1),G=S(j,-1);if(z==="%"&&G!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(G==="%"&&z!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var X=[];return M(j,T,function(ie,ne,fe,Se){X[X.length]=fe?M(Se,C,"$1"):ne||ie}),X},$=function(j,z){var G=j,X;if(b(m,G)&&(X=m[G],G="%"+X[0]+"%"),b(c,G)){var ie=c[G];if(ie===_&&(ie=p(G)),typeof ie>"u"&&!z)throw new a("intrinsic "+j+" exists, but is not available. Please file an issue!");return{alias:X,name:G,value:ie}}throw new n("intrinsic "+j+" does not exist!")};t.exports=function(j,z){if(typeof j!="string"||j.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new a('"allowMissing" argument must be a boolean');var G=x(j),X=G.length>0?G[0]:"",ie=$("%"+X+"%",z),ne=ie.name,fe=ie.value,Se=!1,ce=ie.alias;ce&&(X=ce[0],O(G,A([0,1],ce)));for(var we=1,de=!0;we<G.length;we+=1){var R=G[we],N=S(R,0,1),W=S(R,-1);if((N==='"'||N==="'"||N==="`"||W==='"'||W==="'"||W==="`")&&N!==W)throw new n("property names with quotes must have matching quotes");if((R==="constructor"||!de)&&(Se=!0),X+="."+R,ne="%"+X+"%",b(c,ne))fe=c[ne];else if(fe!=null){if(!(R in fe)){if(!z)throw new a("base intrinsic for "+j+" exists, but the property is not available.");return}if(o&&we+1>=G.length){var te=o(fe,R);de=!!te,de&&"get"in te&&!("originalValue"in te.get)?fe=te.get:fe=fe[R]}else de=b(fe,R),fe=fe[R];de&&!Se&&(c[ne]=fe)}}return fe}}),ci=se((e,t)=>{re();var r=sr(),n=lr(),s=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(a,s),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(g){var _=l(r,a,arguments);if(o&&f){var E=o(_,"length");E.configurable&&f(_,"length",{value:1+d(0,g.length-(arguments.length-1))})}return _};var y=function(){return l(r,s,arguments)};f?f(t.exports,"apply",{value:y}):t.exports.apply=y}),ur=se((e,t)=>{re();var r=lr(),n=ci(),s=n(r("String.prototype.indexOf"));t.exports=function(a,l){var o=r(a,!!l);return typeof o=="function"&&s(a,".prototype.")>-1?n(o):o}}),hi=se((e,t)=>{re();var r=Wt()(),n=ur(),s=n("Object.prototype.toString"),a=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:s(f)==="[object Arguments]"},l=function(f){return a(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&s(f)!=="[object Array]"&&s(f.callee)==="[object Function]"},o=function(){return a(arguments)}();a.isLegacyArguments=l,t.exports=o?a:l}),di=se((e,t)=>{re();var r=Object.prototype.toString,n=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=Wt()(),l=Object.getPrototypeOf,o=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(s.test(n.call(d)))return!0;if(!a){var y=r.call(d);return y==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var g=o();f=g?l(g):!1}return l(d)===f}}),en=se((e,t)=>{re();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(s,a,l){if(n.call(a)!=="[object Function]")throw new TypeError("iterator must be a function");var o=s.length;if(o===+o)for(var f=0;f<o;f++)a.call(l,s[f],f,s);else for(var d in s)r.call(s,d)&&a.call(l,s[d],d,s)}}),tn=se((e,t)=>{re();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Ze:globalThis;t.exports=function(){for(var s=[],a=0;a<r.length;a++)typeof n[r[a]]=="function"&&(s[s.length]=r[a]);return s}}),rn=se((e,t)=>{re();var r=lr(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),nn=se((e,t)=>{re();var r=en(),n=tn(),s=ur(),a=s("Object.prototype.toString"),l=Wt()(),o=typeof globalThis>"u"?Ze:globalThis,f=n(),d=s("Array.prototype.indexOf",!0)||function(p,m){for(var I=0;I<p.length;I+=1)if(p[I]===m)return I;return-1},y=s("String.prototype.slice"),g={},_=rn(),E=Object.getPrototypeOf;l&&_&&E&&r(f,function(p){var m=new o[p];if(Symbol.toStringTag in m){var I=E(m),b=_(I,Symbol.toStringTag);if(!b){var A=E(I);b=_(A,Symbol.toStringTag)}g[p]=b.get}});var c=function(p){var m=!1;return r(g,function(I,b){if(!m)try{m=I.call(p)===b}catch{}}),m};t.exports=function(p){if(!p||typeof p!="object")return!1;if(!l||!(Symbol.toStringTag in p)){var m=y(a(p),8,-1);return d(f,m)>-1}return _?c(p):!1}}),pi=se((e,t)=>{re();var r=en(),n=tn(),s=ur(),a=s("Object.prototype.toString"),l=Wt()(),o=typeof globalThis>"u"?Ze:globalThis,f=n(),d=s("String.prototype.slice"),y={},g=rn(),_=Object.getPrototypeOf;l&&g&&_&&r(f,function(p){if(typeof o[p]=="function"){var m=new o[p];if(Symbol.toStringTag in m){var I=_(m),b=g(I,Symbol.toStringTag);if(!b){var A=_(I);b=g(A,Symbol.toStringTag)}y[p]=b.get}}});var E=function(p){var m=!1;return r(y,function(I,b){if(!m)try{var A=I.call(p);A===b&&(m=A)}catch{}}),m},c=nn();t.exports=function(p){return c(p)?!l||!(Symbol.toStringTag in p)?d(a(p),8,-1):E(p):!1}}),yi=se(e=>{re();var t=hi(),r=di(),n=pi(),s=nn();function a(U){return U.call.bind(U)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=a(Object.prototype.toString),d=a(Number.prototype.valueOf),y=a(String.prototype.valueOf),g=a(Boolean.prototype.valueOf);l&&(_=a(BigInt.prototype.valueOf));var _;o&&(E=a(Symbol.prototype.valueOf));var E;function c(U,xe){if(typeof U!="object")return!1;try{return xe(U),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=s;function p(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"}e.isPromise=p;function m(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):s(U)||N(U)}e.isArrayBufferView=m;function I(U){return n(U)==="Uint8Array"}e.isUint8Array=I;function b(U){return n(U)==="Uint8ClampedArray"}e.isUint8ClampedArray=b;function A(U){return n(U)==="Uint16Array"}e.isUint16Array=A;function O(U){return n(U)==="Uint32Array"}e.isUint32Array=O;function M(U){return n(U)==="Int8Array"}e.isInt8Array=M;function S(U){return n(U)==="Int16Array"}e.isInt16Array=S;function T(U){return n(U)==="Int32Array"}e.isInt32Array=T;function C(U){return n(U)==="Float32Array"}e.isFloat32Array=C;function x(U){return n(U)==="Float64Array"}e.isFloat64Array=x;function $(U){return n(U)==="BigInt64Array"}e.isBigInt64Array=$;function j(U){return n(U)==="BigUint64Array"}e.isBigUint64Array=j;function z(U){return f(U)==="[object Map]"}z.working=typeof Map<"u"&&z(new Map);function G(U){return typeof Map>"u"?!1:z.working?z(U):U instanceof Map}e.isMap=G;function X(U){return f(U)==="[object Set]"}X.working=typeof Set<"u"&&X(new Set);function ie(U){return typeof Set>"u"?!1:X.working?X(U):U instanceof Set}e.isSet=ie;function ne(U){return f(U)==="[object WeakMap]"}ne.working=typeof WeakMap<"u"&&ne(new WeakMap);function fe(U){return typeof WeakMap>"u"?!1:ne.working?ne(U):U instanceof WeakMap}e.isWeakMap=fe;function Se(U){return f(U)==="[object WeakSet]"}Se.working=typeof WeakSet<"u"&&Se(new WeakSet);function ce(U){return Se(U)}e.isWeakSet=ce;function we(U){return f(U)==="[object ArrayBuffer]"}we.working=typeof ArrayBuffer<"u"&&we(new ArrayBuffer);function de(U){return typeof ArrayBuffer>"u"?!1:we.working?we(U):U instanceof ArrayBuffer}e.isArrayBuffer=de;function R(U){return f(U)==="[object DataView]"}R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1));function N(U){return typeof DataView>"u"?!1:R.working?R(U):U instanceof DataView}e.isDataView=N;var W=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function te(U){return f(U)==="[object SharedArrayBuffer]"}function ge(U){return typeof W>"u"?!1:(typeof te.working>"u"&&(te.working=te(new W)),te.working?te(U):U instanceof W)}e.isSharedArrayBuffer=ge;function he(U){return f(U)==="[object AsyncFunction]"}e.isAsyncFunction=he;function B(U){return f(U)==="[object Map Iterator]"}e.isMapIterator=B;function L(U){return f(U)==="[object Set Iterator]"}e.isSetIterator=L;function D(U){return f(U)==="[object Generator]"}e.isGeneratorObject=D;function K(U){return f(U)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=K;function le(U){return c(U,d)}e.isNumberObject=le;function w(U){return c(U,y)}e.isStringObject=w;function v(U){return c(U,g)}e.isBooleanObject=v;function V(U){return l&&c(U,_)}e.isBigIntObject=V;function ee(U){return o&&c(U,E)}e.isSymbolObject=ee;function ye(U){return le(U)||w(U)||v(U)||V(U)||ee(U)}e.isBoxedPrimitive=ye;function pe(U){return typeof Uint8Array<"u"&&(de(U)||ge(U))}e.isAnyArrayBuffer=pe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(e,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})}),gi=se((e,t)=>{re(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),mi=se(e=>{re();var t=Object.getOwnPropertyDescriptors||function(R){for(var N=Object.keys(R),W={},te=0;te<N.length;te++)W[N[te]]=Object.getOwnPropertyDescriptor(R,N[te]);return W},r=/%[sdj%]/g;e.format=function(R){if(!M(R)){for(var N=[],W=0;W<arguments.length;W++)N.push(l(arguments[W]));return N.join(" ")}for(var W=1,te=arguments,ge=te.length,he=String(R).replace(r,function(D){if(D==="%%")return"%";if(W>=ge)return D;switch(D){case"%s":return String(te[W++]);case"%d":return Number(te[W++]);case"%j":try{return JSON.stringify(te[W++])}catch{return"[Circular]"}default:return D}}),B=te[W];W<ge;B=te[++W])b(B)||!x(B)?he+=" "+B:he+=" "+l(B);return he},e.deprecate=function(R,N){if(typeof ue<"u"&&ue.noDeprecation===!0)return R;if(typeof ue>"u")return function(){return e.deprecate(R,N).apply(this,arguments)};var W=!1;function te(){if(!W){if(ue.throwDeprecation)throw new Error(N);ue.traceDeprecation?console.trace(N):console.error(N),W=!0}return R.apply(this,arguments)}return te};var n={},s=/^$/;ue.env.NODE_DEBUG&&(a=ue.env.NODE_DEBUG,a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i"));var a;e.debuglog=function(R){if(R=R.toUpperCase(),!n[R])if(s.test(R)){var N=ue.pid;n[R]=function(){var W=e.format.apply(e,arguments);console.error("%s %d: %s",R,N,W)}}else n[R]=function(){};return n[R]};function l(R,N){var W={seen:[],stylize:f};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),I(N)?W.showHidden=N:N&&e._extend(W,N),T(W.showHidden)&&(W.showHidden=!1),T(W.depth)&&(W.depth=2),T(W.colors)&&(W.colors=!1),T(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=o),y(W,R,W.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(R,N){var W=l.styles[N];return W?"\x1B["+l.colors[W][0]+"m"+R+"\x1B["+l.colors[W][1]+"m":R}function f(R,N){return R}function d(R){var N={};return R.forEach(function(W,te){N[W]=!0}),N}function y(R,N,W){if(R.customInspect&&N&&z(N.inspect)&&N.inspect!==e.inspect&&!(N.constructor&&N.constructor.prototype===N)){var te=N.inspect(W,R);return M(te)||(te=y(R,te,W)),te}var ge=g(R,N);if(ge)return ge;var he=Object.keys(N),B=d(he);if(R.showHidden&&(he=Object.getOwnPropertyNames(N)),j(N)&&(he.indexOf("message")>=0||he.indexOf("description")>=0))return _(N);if(he.length===0){if(z(N)){var L=N.name?": "+N.name:"";return R.stylize("[Function"+L+"]","special")}if(C(N))return R.stylize(RegExp.prototype.toString.call(N),"regexp");if($(N))return R.stylize(Date.prototype.toString.call(N),"date");if(j(N))return _(N)}var D="",K=!1,le=["{","}"];if(m(N)&&(K=!0,le=["[","]"]),z(N)){var w=N.name?": "+N.name:"";D=" [Function"+w+"]"}if(C(N)&&(D=" "+RegExp.prototype.toString.call(N)),$(N)&&(D=" "+Date.prototype.toUTCString.call(N)),j(N)&&(D=" "+_(N)),he.length===0&&(!K||N.length==0))return le[0]+D+le[1];if(W<0)return C(N)?R.stylize(RegExp.prototype.toString.call(N),"regexp"):R.stylize("[Object]","special");R.seen.push(N);var v;return K?v=E(R,N,W,B,he):v=he.map(function(V){return c(R,N,W,B,V,K)}),R.seen.pop(),p(v,D,le)}function g(R,N){if(T(N))return R.stylize("undefined","undefined");if(M(N)){var W="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(W,"string")}if(O(N))return R.stylize(""+N,"number");if(I(N))return R.stylize(""+N,"boolean");if(b(N))return R.stylize("null","null")}function _(R){return"["+Error.prototype.toString.call(R)+"]"}function E(R,N,W,te,ge){for(var he=[],B=0,L=N.length;B<L;++B)Se(N,String(B))?he.push(c(R,N,W,te,String(B),!0)):he.push("");return ge.forEach(function(D){D.match(/^\d+$/)||he.push(c(R,N,W,te,D,!0))}),he}function c(R,N,W,te,ge,he){var B,L,D;if(D=Object.getOwnPropertyDescriptor(N,ge)||{value:N[ge]},D.get?D.set?L=R.stylize("[Getter/Setter]","special"):L=R.stylize("[Getter]","special"):D.set&&(L=R.stylize("[Setter]","special")),Se(te,ge)||(B="["+ge+"]"),L||(R.seen.indexOf(D.value)<0?(b(W)?L=y(R,D.value,null):L=y(R,D.value,W-1),L.indexOf(`
`)>-1&&(he?L=L.split(`
`).map(function(K){return"  "+K}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(K){return"   "+K}).join(`
`))):L=R.stylize("[Circular]","special")),T(B)){if(he&&ge.match(/^\d+$/))return L;B=JSON.stringify(""+ge),B.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.substr(1,B.length-2),B=R.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=R.stylize(B,"string"))}return B+": "+L}function p(R,N,W){var te=0,ge=R.reduce(function(he,B){return te++,B.indexOf(`
`)>=0&&te++,he+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ge>60?W[0]+(N===""?"":N+`
 `)+" "+R.join(`,
  `)+" "+W[1]:W[0]+N+" "+R.join(", ")+" "+W[1]}e.types=yi();function m(R){return Array.isArray(R)}e.isArray=m;function I(R){return typeof R=="boolean"}e.isBoolean=I;function b(R){return R===null}e.isNull=b;function A(R){return R==null}e.isNullOrUndefined=A;function O(R){return typeof R=="number"}e.isNumber=O;function M(R){return typeof R=="string"}e.isString=M;function S(R){return typeof R=="symbol"}e.isSymbol=S;function T(R){return R===void 0}e.isUndefined=T;function C(R){return x(R)&&X(R)==="[object RegExp]"}e.isRegExp=C,e.types.isRegExp=C;function x(R){return typeof R=="object"&&R!==null}e.isObject=x;function $(R){return x(R)&&X(R)==="[object Date]"}e.isDate=$,e.types.isDate=$;function j(R){return x(R)&&(X(R)==="[object Error]"||R instanceof Error)}e.isError=j,e.types.isNativeError=j;function z(R){return typeof R=="function"}e.isFunction=z;function G(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}e.isPrimitive=G,e.isBuffer=gi();function X(R){return Object.prototype.toString.call(R)}function ie(R){return R<10?"0"+R.toString(10):R.toString(10)}var ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fe(){var R=new Date,N=[ie(R.getHours()),ie(R.getMinutes()),ie(R.getSeconds())].join(":");return[R.getDate(),ne[R.getMonth()],N].join(" ")}e.log=function(){console.log("%s - %s",fe(),e.format.apply(e,arguments))},e.inherits=it(),e._extend=function(R,N){if(!N||!x(N))return R;for(var W=Object.keys(N),te=W.length;te--;)R[W[te]]=N[W[te]];return R};function Se(R,N){return Object.prototype.hasOwnProperty.call(R,N)}var ce=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');if(ce&&R[ce]){var N=R[ce];if(typeof N!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(N,ce,{value:N,enumerable:!1,writable:!1,configurable:!0}),N}function N(){for(var W,te,ge=new Promise(function(L,D){W=L,te=D}),he=[],B=0;B<arguments.length;B++)he.push(arguments[B]);he.push(function(L,D){L?te(L):W(D)});try{R.apply(this,he)}catch(L){te(L)}return ge}return Object.setPrototypeOf(N,Object.getPrototypeOf(R)),ce&&Object.defineProperty(N,ce,{value:N,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(N,t(R))},e.promisify.custom=ce;function we(R,N){if(!R){var W=new Error("Promise was rejected with a falsy value");W.reason=R,R=W}return N(R)}function de(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var W=[],te=0;te<arguments.length;te++)W.push(arguments[te]);var ge=W.pop();if(typeof ge!="function")throw new TypeError("The last argument must be of type Function");var he=this,B=function(){return ge.apply(he,arguments)};R.apply(this,W).then(function(L){ue.nextTick(B.bind(null,null,L))},function(L){ue.nextTick(we.bind(null,L,B))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(R)),Object.defineProperties(N,t(R)),N}e.callbackify=de}),bi=se((e,t)=>{re();var r=mt(),n=mi(),s=r.Transform;function a(l){if(!(this instanceof a))return new a(l);this._toSkip=l.skip,s.call(this,l)}n.inherits(a,s),a.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=a});re();re();var on=$e(mt(),1),an=$e(ai(),1);re();var sn=$e(mt(),1);function ln(e,t){let r=[],n;e.on("data",s=>r.push(s)),e.on("end",()=>{n||(n=!0,t(null,ae.Buffer.concat(r)))}),e.on("error",s=>{n||(n=!0,t(s))})}function un(e){let t;return new sn.Transform({transform(r,n,s){t&&(r=ae.Buffer.concat([t,r]));let a=Math.floor(r.length/e)*e;a?r.length>a?(t=r.slice(a),this.push(r.slice(0,a))):(t=void 0,this.push(r)):t=t?ae.Buffer.concat([t,r]):r,s()},flush(r){t&&this.push(t),r()}})}function wi(e,t){let r=[],n=0;return new sn.Transform({transform(s,a,l){r.push(s),n+=s.length,l()},flush(s){t(n);function a(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",a);e.end(),s()}a()}})}function Ce(e){let t,r=new Promise((n,s)=>{t=(a,l)=>{a?s(a):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var vi=$e(Qr(),1);re();re();var fr=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,s,a,l=this._tables[0][4],o=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[s=e.slice(0),a=[]],t=f;t<4*f+28;t++)n=s[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),s[t]=s[t-f]^n;for(r=0;t;r++,t--)n=s[r&3?t:t-4],t<=4||r<4?a[r]=n:a[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],s,a,l,o=[],f=[],d,y,g,_,E,c;for(s=0;s<256;s++)f[(o[s]=s<<1^(s>>7)*283)^s]=s;for(a=l=0;!r[a];a^=d||1,l=f[l]||1)for(_=l^l<<1^l<<2^l<<3^l<<4,_=_>>8^_&255^99,r[a]=_,n[_]=a,g=o[y=o[d=o[a]]],c=g*16843009^y*65537^d*257^a*16843008,E=o[_]*257^_*16843008,s=0;s<4;s++)e[s][a]=E=E<<24^E>>>8,t[s][_]=c=c<<24^c>>>8;for(s=0;s<5;s++)e[s]=e[s].slice(0),t[s]=t[s].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],s=e[t?3:1]^r[1],a=e[2]^r[2],l=e[t?1:3]^r[3],o,f,d,y=r.length/4-2,g,_=4,E=[0,0,0,0],c=this._tables[t],p=c[0],m=c[1],I=c[2],b=c[3],A=c[4];for(g=0;g<y;g++)o=p[n>>>24]^m[s>>16&255]^I[a>>8&255]^b[l&255]^r[_],f=p[s>>>24]^m[a>>16&255]^I[l>>8&255]^b[n&255]^r[_+1],d=p[a>>>24]^m[l>>16&255]^I[n>>8&255]^b[s&255]^r[_+2],l=p[l>>>24]^m[n>>16&255]^I[s>>8&255]^b[a&255]^r[_+3],_+=4,n=o,s=f,a=d;for(g=0;g<4;g++)E[t?3&-g:g]=A[n>>>24]<<24^A[s>>16&255]<<16^A[a>>8&255]<<8^A[l&255]^r[_++],o=n,n=s,s=a,a=l,l=o;return E}};fr.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function _i(e){let t,r,n,s=[2479122403,2108737444,3518906241,22203222],a=ae.Buffer.alloc(Math.ceil(e.length/4)*4);for(a.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let o=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(o[t/4]=a.readInt32BE(t+r));s=new fr(o).encrypt(s)}let l=ae.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(s[t],t*4);return l}function Ei(e,t,r){let n=ae.Buffer.from(t.s,"base64"),s=1e5,a="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:s,hash:{name:a}},l,256)).then(l=>{r(null,ae.Buffer.from(l))}).catch(r)}var ze=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new fr(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,s;for(n=0;n<e.length;n+=16){for(s=0;s<4;s++)r[s]=e.readUInt32BE(n+s*4)^t[s];for(t=this.aes.encrypt(r),s=0;s<4;s++)e.writeInt32BE(t[s],n+s*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),s,a;for(s=0;s<e.length;s+=16){for(a=0;a<4;a++)r[a]=e.readUInt32BE(s+a*4);for(n=r,r=this.aes.decrypt(r),a=0;a<4;a++)e.writeInt32BE(r[a]^t[a],s+a*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let s=e.length-n;t[n/4&3]^=e.readIntBE(n,s)<<(4-s)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=ae.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},fn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=ae.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ae.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ae.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},cn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=ae.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=ae.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=ae.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(ae.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function We(e){return typeof e=="string"?cr(e):e}function Te(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cr(e){return ae.Buffer.from(e,"base64")}function st(e){return new ze(hn(e).slice(0,16))}function Si(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=We(e),e||(e=(0,vi.default)(24)),e instanceof ae.Buffer||(e=ae.Buffer.from(e));let n=new on.Transform({transform(o,f,d){l.update(o);let y=a.encrypt(o);d(null,ae.Buffer.from(y))},flush(o){n.mac=l.condense(),n.key=ki(e,n.mac),o()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let s=new ze(e.slice(0,16)),a=new fn(s,e.slice(16),r),l=new cn(s,e.slice(16));return n=(0,an.default)(un(16),n),n}function Ai(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=We(e),e instanceof ae.Buffer||(e=ae.Buffer.from(e));let n=st(e),s=new fn(n,e.slice(16),r),a=!t.disableVerification&&new cn(n,e.slice(16)),l=new on.Transform({transform(o,f,d){let y=s.decrypt(o);a&&a.update(y),d(null,ae.Buffer.from(y))},flush(o){if(a&&(l.mac=a.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,an.default)(un(16),l),l}function hn(e){let t=ae.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function ki(e,t){let r=ae.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function Ii(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let s=0;s<r;s++)n|=e[s]^t[s];return n===0}re();re();var Ge={},Bi=Math.log(2);function Ot(e){let t=[];for(;e-- >0;)t[e]=0;return t}function Rt(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function Oi(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function dn(e,t){let r=e.length,n=t.length;if(r<n)return dn(t,e);let s=[],a=0,l=0;for(;l<n;l++)a+=e[l]+t[l],s[l]=a&268435455,a>>>=28;for(;l<r;l++)a+=e[l],s[l]=a&268435455,a>>>=28;return a&&(s[l]=a),s}function Fe(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let s=[],a=0,l;for(l=0;l<n;l++)a+=e[l]-t[l],s[l]=a&268435455,a>>=28;for(;l<r;l++)a+=e[l],s[l]=a&268435455,a>>=28;return a?[]:Rt(s)}function Qt(e,t,r,n,s){let a=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*a,y=a*o+((d&16383)<<14)+e[t]+s;return e[t]=y&268435455,s=l*f+(d>>14)+(y>>28),s}function Ri(e){let t=e.length,r=2*t,n=Ot(r),s=0,a,l;for(a=0;a<t;a++){for(s=Qt(n,2*a,e[a],e[a],0),l=a+1;l<t;l++)s=Qt(n,a+l,2*e[l],e[a],s);n[a+t]=s}return Rt(n)}function Xe(e,t){let r=e.length,n=t.length,s=Ot(r+n-1),a,l,o;for(l=0;l<n;l++){for(a=0,o=0;o<r;o++)a=Qt(s,l+o,e[o],t[l],a);s[l+r]=a}return Rt(s)}function vt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function pn(e,t){let r=e.length-1,n=t.length-1,s=r-n,a,l,o,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return Ge.q=[0],Ge.mod=e,Ge;if(r===n&&vt(e,n,2)/vt(t,n,2)<4){for(a=e.concat(),l=0;o=Fe(a,t),o.length!==0;)a=o,l++;return Ge.q=[l],Ge.mod=a,Ge}let d=Math.floor(Math.log(t[n])/Bi)+1,y=28-d;a=e.concat();let g=t.concat();if(y){for(f=n;f>0;f--)g[f]=g[f]<<y&268435455|g[f-1]>>d;for(g[0]=g[0]<<y&268435455,a[r]&(268435455<<d&268435455)&&(a[++r]=0,s++),f=r;f>0;f--)a[f]=a[f]<<y&268435455|a[f-1]>>d;a[0]=a[0]<<y&268435455}let _,E=Ot(s+1),c=Ot(s).concat(g);for(;_=Fe(a,c),_.length!==0;)E[s]++,a=_;let p=g[n],m=vt(g,n,2),I;for(f=r;f>n;f--){I=f-n-1,f>=a.length?E[I]=1:a[f]===p?E[I]=268435455:E[I]=Math.floor(vt(a,f,2)/p);let b=vt(a,f,3);for(;E[I]*m>b;)E[I]--;c=c.slice(1),_=Fe(a,Xe([E[I]],c)),_.length===0&&(E[I]--,_=Fe(a,Xe([E[I]],c))),a=_}if(y){for(f=0;f<a.length-1;f++)a[f]=a[f]>>y|a[f+1]<<d&268435455;a[a.length-1]>>=y}return Ge.q=Rt(E),Ge.mod=Rt(a),Ge}function Ti(e,t){let r=0,n;for(let s=e.length-1;s>=0;s--)n=e[s],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function ct(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Ti(e,t[0])]}return pn(e,t).mod}function At(e,t,r){let n=e.length-(t.length<<1);if(n>0)return At(e.slice(0,n).concat(At(e.slice(n),t,r)),t,r);let s=t.length+1,a=t.length-1,l,o=Xe(e.slice(a),r).slice(s),f=e.slice(0,s),d=Xe(o,t).slice(0,s),y=Fe(f,d);y.length===0&&(f[s]=1,y=Fe(f,d));for(let g=0;l=Fe(y,t),l.length!==0;g++)if(y=l,g>=3)return At(y,t,r);return y}function br(e,t,r){let n=e.concat(),s=t.length-1,a=r.length*2,l=Ot(a+1);for(l[a]=1,l=pn(l,r).q,a=Oi(t[s])-2;s>=0;s--){for(;a>=0;a-=1)n=At(Ri(n),r,l),t[s]&1<<a&&(n=At(Xe(n,e),r,l));a=28-1}return n}function Li(e,t,r,n,s){let a=br(ct(e,r),ct(t,Fe(r,[1])),r),l=br(ct(e,n),ct(t,Fe(n,[1])),n),o=Fe(l,a);return o.length===0?(o=Fe(a,l),o=ct(Xe(o,s),n),o=Fe(n,o)):o=ct(Xe(o,s),n),dn(Xe(o,r),a)}function yn(e){let t=1,r=[0],n=0,s=256,a=e.length,l;if(a<2)return 0;let o=(a-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(s<<=1)>255&&(s=1,l=e.charCodeAt(--a)),t>268435455&&(t=1,r[++n]=0),l&s&&(r[n]|=t),t<<=1;return r}function Pi(e){let t=1,r=0,n=[0],s=1,a=0,l=e.length*28,o="",f;for(f=0;f<l;f++)e[r]&t&&(n[a]|=s),(s<<=1)>255&&(s=1,n[++a]=0),(t<<=1)>268435455&&(t=1,r++);for(;a>=0&&n[a]===0;)a--;for(f=0;f<=a;f++)o=String.fromCharCode(n[f])+o;return o}function Ci(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=yn(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function ji(e,t){let r=yn(e.toString("binary")),n=Pi(Li(r,t[2],t[0],t[1],t[3]));return ae.Buffer.from(n,"binary")}re();var Mi=$e(Lt(),1);re();var Ui=null;re();var Ni=globalThis.fetch,xi=Ni;re();var Di=globalThis.AbortController||Ui,Zt=Di,er=4,wr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+er+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later",19:"ETOOMANYCONNECTIONS (-19)",24:"EGOINGOVERQUOTA (-24)",25:"EROLLEDBACK (-25)",26:"EMFAREQUIRED (-26): Multi-Factor Authentication Required",27:"EMASTERONLY (-27)",28:"EBUSINESSPASTDUE (-28)",29:"EPAYWALL (-29): ODQ paywall state",400:"ETOOERR (-400)",401:"ESHAREROVERQUOTA (-401)"},Fi="https://g.api.mega.co.nz/",$i=null,Wi=null,Et=class extends Mi.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||Fi;let r="1.1.2";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||$i,this.httpsAgent=t.httpsAgent||Wi,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),xi(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[s,a]=Ce(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(vr).then(o=>{if(this.closed&&!n)return;if(!o)return s(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<er)return setTimeout(()=>{this.request(e,s,r+1)},Math.pow(2,r+1)*1e3);f=Error(wr[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);s(f,o)}).catch(o=>{s(o)}),a}pull(e,t=0){let r=new Zt;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(vr).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<er)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(wr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(qi).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new Zt;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return Et.globalApi||(Et.globalApi=new Et),Et.globalApi}};function vr(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function qi(e){if(e.name!=="AbortError")throw e}var Dt=Et,Vi=$e(Lt(),1);re();re();var zi=$e(Lt(),1),Gi=$e(mt(),1),Hi=$e(bi(),1),at=class extends zi.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?We(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Dt.getGlobalApi(),!(this.api instanceof Dt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=We(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=cr(e),st(this.key).decryptCBC(e);let t=at.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=gn[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=Ce(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(s,a)=>{if(s)return t(s);if(this.directory){let l=Object.create(null),o=a.f,f=o.find(y=>y.k&&y.h===y.k.split(":")[0]),d=this.key?new ze(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let y of o){if(y===f)continue;let g=new at(y,this.storage);g.loadMetadata(d,y),g.downloadId=[this.downloadId,y.h],l[y.h]=g}for(let y of o){let g=l[y.p];if(g){let _=l[y.h];g.children||(g.children=[]),g.children.push(_),_.parent=g}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let y=l[this.loadedFile];typeof y>"u"?t(Error("Node (file or folder) not found in folder")):t(null,y)}else t(null,this)}else{if(this.size=a.s,this.decryptAttributes(a.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,s=e.end||null,a=e.maxConnections||4,l=e.initialChunkSize||128*1024,o=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=e.forceHttps??!0?2:0,y={a:"g",g:1,ssl:d};if(this.nodeId?y.n=this.nodeId:Array.isArray(this.downloadId)?(y._querystring={n:this.downloadId[0]},y.n=this.downloadId[1]):y.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let g=this.key&&!e.returnCiphertext?Ai(this.key,{start:n,disableVerification:n!==0||s!==null}):new Gi.PassThrough,_=n===r?g:g.pipe(new Hi.default({skip:r-n})),E=e.handleRetries||at.defaultHandleRetries;return this.api.request(y,(c,p)=>{if(c)return _.emit("error",c);if(typeof p.g!="string"||p.g.substr(0,4)!=="http")return _.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(p.s===0)return _.end();if(s||(s=p.s-1),r>s)return _.emit("error",Error("You can't download past the end of the file."));function m(j){if(j.status!==200){if(j.status===509){let z=j.headers.get("x-mega-time-left"),G=Error("Bandwidth limit reached: "+z+" seconds until it resets");G.timeLimit=z,_.emit("error",G);return}_.emit("error",Error("MEGA returned a "+j.status+" status code"))}}function I(j){_.emit("error",j)}let b=0;if(_.on("data",j=>{b+=j.length,_.emit("progress",{bytesLoaded:b,bytesTotal:p.s})}),a===1){let j=new Zt;_.on("close",()=>{j.abort()}),this.api.fetch(p.g+"/"+n+"-"+s,{signal:j.signal}).then(z=>{m(z);let G=z.body;if(G)if(G.pipe)z.body.pipe(g);else if(G.getReader){let X=G.getReader(),ie=({done:ne,value:fe})=>{if(ne)g.end();else return g.write(fe),X.read().then(ie)};X.read().then(ie)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(I);return}let A={},O=0,M=0,S=!1,T=n,C=l;_.on("error",()=>{S=!0}),_.on("close",()=>{S=!0});let x=()=>{if(T>s){S=!0,O===M&&g.end();return}let j=T,z=Math.min(s,j+C-1),G=O++,X=0,ie=()=>{X++,this.api.fetch(p.g+"/"+j+"-"+z).then(ne=>(m(ne),ne.arrayBuffer())).then(ne=>{let fe=ae.Buffer.from(ne);A[G]=fe,M===G&&$()},ne=>{E(X,ne,fe=>{fe?I(fe):ie()})})};ie(),T=z+1,C<f&&(C=C+o)},$=()=>{let j;for(;;){let z=A[M];if(!z||(j=!g.write(z),delete A[M],M++,j))break}S&&O===M&&g.end(),j?g.once("drain",$):x()};for(let j=0;j<a;j++)x()}),t&&ln(_,t),_}downloadBuffer(e,t){let[r,n]=Ce(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=Ce(t);typeof e=="boolean"&&(e={noKey:e});let s=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(s+=`#${Te(this.key)}`),!e.noKey&&this.loadedFile&&(s+=`/file/${this.loadedFile}`),r(null,s),n}static fromURL(e,t={}){if(typeof e=="object")return new at(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),s=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),a=n[0];if(s&&!a||!s&&a)throw Error("Invalid URL: too few arguments");return new at({downloadId:s,key:a,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new at({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},gn=["","red","orange","yellow","green","blue","purple","grey"],Ve=at,Gt=$e(Qr(),1),_r=$e(mt(),1),Er={},St=class extends Ve{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let s of r){let a=s.split(":")[0];if(a===t.user){e.k=s;break}let l=t.shareKeys[a];if(l){e.k=s,n=Er[a],n||(n=Er[a]=new ze(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=Ce(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=ae.Buffer.from((0,Gt.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let s=e.key,a=St.packAttributes(e.attributes);st(s).encryptCBC(a);let l=ae.Buffer.from(s);this.storage.aes.encryptECB(l);let o={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:Te(a),k:Te(l)}]},f=kt(this.storage.shareKeys,this);return f.length>0&&(o.cr=jt(this.storage,[{nodeId:"xxxxxxxx",key:s}],f)),this.api.request(o,(d,y)=>{if(d)return r(d);let g=this.storage._importFile(y.f[0]);this.storage.emit("add",g),r(null,g)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,s]=Ce(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let a,l=We(e.key);l||(l=(0,Gt.default)(24)),l instanceof ae.Buffer||(l=ae.Buffer.from(l));let o=e.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(a=l,l=hn(l).slice(0,24)),e.key=l;let f=[],d=(_,E,c,p)=>{if(_)return g(_);if(!c||c.length===0){g(Error("Server returned a invalid response while uploading"));return}let m=Number(c.toString());if(m<0){g(Error("Server returned error "+m+" while uploading"));return}if(f[E]=c,E===0&&!a&&(a=p.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let I=St.packAttributes(e.attributes);st(a).encryptCBC(I);let b=ae.Buffer.from(a);this.storage.aes.encryptECB(b);let A={h:Te(f[0]),t:0,a:Te(I),k:Te(b)};f.length!==1&&(A.fa=f.slice(1).map((S,T)=>T+"*"+Te(S)).filter(S=>S).join("/"));let O={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[A]},M=kt(this.storage.shareKeys,this);M.length>0&&(O.cr=jt(this.storage,[{nodeId:A.h,key:a}],M)),this.api.request(O,(S,T)=>{if(S)return g(S);let C=this.storage._importFile(T.f[0]);this.storage.emit("add",C),y.emit("complete",C),n&&n(null,C)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let y=this._upload(e,t,0,d);function g(_){y.listenerCount("error")?y.emit("error",_):n(_)}return y.complete=s,y}_upload(e,t,r,n){let s=e.uploadCiphertext?new _r.PassThrough:Si(e.key),a=s,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,a.end(t)),l!=null?(l===0&&s.end(),this._uploadWithSize(a,l,s,r,e,n)):a=wi(a,o=>{this._uploadWithSize(a,o,s,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(a),a}_uploadAttribute(e,t,r,n){let s=(a,l)=>{if(a)return n(a);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=ae.Buffer.concat([l,ae.Buffer.alloc(f)])),(e.handle?st(e.key):new ze(e.key.slice(0,16))).encryptCBC(l);let d=new _r.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof ae.Buffer){s(null,t);return}ln(t,s)}_uploadWithSize(e,t,r,n,s,a){let l=s.forceHttps??!0?2:0,o=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};s.handle&&(o.h=s.handle);let f=n===0?s.initialChunkSize||128*1024:t,d=s.chunkSizeIncrement||128*1024,y=s.maxChunkSize||1024*1024,g=s.maxConnections||4,_=s.handleRetries||Ve.defaultHandleRetries,E=f,c=0,p=!1,m=0,I,b,A,O,M,S=()=>{O=Math.min(E,t-m),b=ae.Buffer.alloc(O),c++,E<y&&(E+=d),M=0,I&&(I.copy(b),M=Math.min(I.length,O),I=I.length>O?I.slice(O):null),M===O?T():(p=!0,x())},T=()=>{let $=m,j=b,z=0,G=()=>{z++,this.api.fetch(A+"/"+(n===0?$:n-1),{method:"POST",body:j,headers:{"content-length":j.length}}).then(X=>{if(X.status!==200)throw Error("MEGA returned a "+X.status+" status code");return X.arrayBuffer()}).then(X=>{let ie=ae.Buffer.from(X);ie.length>0?(r.end(),ue.nextTick(()=>{a(null,n,ie,r)})):m<t&&!p&&S()},X=>{_(z,X,ie=>{ie?e.emit("error",ie):G()})})};G(),b=null,m+=O,m<t&&!p&&c<g&&S()},C=0,x=()=>{for(;;){let $=r.read();if($===null){r.once("readable",x);break}if(C+=$.length,e.emit("progress",{bytesLoaded:C,bytesTotal:t}),$.copy(b,M),M+=$.length,M>=O){p=!1,I=$.slice($.length-(M-O)),T();break}}};r.on("end",()=>{t&&C!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+C))}),this.api.request(o,($,j)=>{if($)return a($);A=j.p,S()})}uploadAttribute(e,t,r){let[n,s]=Ce(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(a,l,o,f)=>{if(a)return n(a);let d={a:"pfa",n:this.nodeId,fa:e+"*"+Te(o)};this.api.request(d,(y,g)=>{if(y)return n(y);n(null,this)})}),s}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof Ve))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=kt(this.storage.shareKeys,e);return n.length>0&&(r.cr=jt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=Ce(t);Object.assign(this.attributes,e);let s=St.packAttributes(this.attributes);return st(this.key).encryptCBC(s),this.api.request({a:"a",n:this.nodeId,at:Te(s)},a=>{this.parseAttributes(this.attributes),r(a)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=gn.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,s]=Ce(t);return this.api.request({a:"l",n:this.nodeId},(a,l)=>{if(a)return n(a);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(o+=`#${Te(r||this.key)}`),n(null,o)}),s}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let s=We(e.key);s||(s=(0,Gt.default)(16)),s instanceof ae.Buffer||(s=ae.Buffer.from(s));let[a,l]=Ce(t);if(s.length!==16)return a(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=s;let o=ae.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:Te(this.storage.aes.encryptECB(ae.Buffer.from(s))),ha:Te(o),cr:jt(this.storage,this)};return this.api.request(f,d=>{if(d)return a(d);this.link(Object.assign({__folderKey:s},e),a)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=Ce(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=Ve.fromURL(e)),!(e instanceof Ve))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let s=(a,l)=>{if(a)return r(a);let o=St.packAttributes(l.attributes);st(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:Te(o),k:Te(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(y,g)=>{if(y)return r(y);let _=this.storage._importFile(g.f[0]);this.storage.emit("add",_),r(null,_)})};return e.attributes?s(null,e):e.loadAttributes(s),n}static packAttributes(e){let t=JSON.stringify(e);t=ae.Buffer.from(`MEGA${t}`);let r=ae.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function jt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=mn(t)),r||(r=t.map(a=>kt(n,a)).reduce((a,l)=>a.concat(l)).filter((a,l,o)=>l===o.indexOf(a)));let s=[r,t.map(a=>a.nodeId),[]];for(let a=r.length;a--;){let l=new ze(n[r[a]]);for(let o=t.length;o--;){let f=ae.Buffer.from(t[o].key);f&&(f.length===32||f.length===16)&&s[2].push(a,o,Te(l.encryptECB(f)))}}return s}function mn(e){return[e].concat((e.children||[]).map(mn).reduce((t,r)=>t.concat(r),[]))}function kt(e,t){let r=t.nodeId,n=t.parent,s=[];return e[r]&&s.push(r),n?s.concat(kt(e,n)):s}var Ki=St,Yi=class extends Vi.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=Ce(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Dt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):ue.nextTick(()=>{r(null,this)})}login(e){let[t,r]=Ce(e);if(typeof this.options.email!="string")return ue.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},s=f=>{this.api.request({a:"ug"},(d,y)=>{if(d)return f(d);this.name=y.name,this.user=y.u,this.options.autoload?this.reload(!0,g=>{if(g)return f(g);n()}):n()})};this.email=this.options.email.toLowerCase();let a=f=>{let d=_i(ae.Buffer.from(this.options.password)),y=new ze(d),g=Te(y.stringhash(ae.Buffer.from(this.email))),_={a:"us",user:this.email,uh:g};o(_,y,f)},l=(f,d)=>{Ei(ae.Buffer.from(this.options.password),f,(y,g)=>{if(y)return d(y);let _=new ze(g.slice(0,16)),E=Te(g.slice(16)),c={a:"us",user:this.email,uh:E};o(c,_,d)})},o=(f,d,y)=>{delete this.options.password,this.options.secondFactorCode&&(f.mfa=this.options.secondFactorCode.toString()),this.api.request(f,(g,_)=>{if(g)return y(g);this.key=We(_.k),d.decryptECB(this.key),this.aes=new ze(this.key);let E=We(_.csid),c=this.aes.decryptECB(We(_.privk)),p=Ci(c);if(!p)throw Error("invalid credentials");let m=Te(ji(E,p).slice(0,43));this.api.sid=this.sid=m,this.RSAPrivateKey=p,s(y)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return a(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=Ce(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(s,a)=>{var l;if(s)return r(s);this.shareKeys=a.ok.reduce((o,f)=>{let d=f.h,y=this.aes.encryptECB(ae.Buffer.from(d+d));return Ii(We(f.ha),y)&&(o[d]=this.aes.decryptECB(We(f.k))),o},{});for(let o of a.f)if(o=this._importFile(o),a.ph!==void 0&&(o.shareId=(l=a.ph.find(f=>f.h===o.nodeId))==null?void 0:l.ph,o.shared=!!o.shareId,o.shared)){o.shareURL=`https://mega.nz/${o.directory?"folder":"file"}/${o.shareId}`;let f=o.directory?this.shareKeys[o.nodeId]:o.key;f&&(o.shareURL+="#"+Te(f))}r(null,this.mounts)}),this.api.on("sc",s=>{let a={};s.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?a[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete a[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(a).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new Ki(e,this);if(e.t===Ji&&(this.root=t,t.name="Cloud Drive"),e.t===Qi&&(this.trash=t,t.name="Rubbish Bin"),e.t===Xi&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=Ce(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,s)=>{n&&t(n);let a={};a.type=s.utype,a.spaceUsed=s.cstrg,a.spaceTotal=s.mstrg,a.downloadBandwidthTotal=s.mxfer||Math.pow(1024,5)*10,a.downloadBandwidthUsed=s.caxfer||0,a.sharedBandwidthUsed=s.csxfer||0,a.sharedBandwidthLimit=s.srvratio,t(null,a)}),r}toJSON(){return{key:Te(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new Yi(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=cr(e.key),t.aes=new ze(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},Ji=2,Xi=3,Qi=4;Ve.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function ot(){return await Mn("music",2,{upgrade(e,t,r,n,s){t<1&&(e.createObjectStore("album",{keyPath:"folderName"}),e.createObjectStore("image",{keyPath:"id"}),e.createObjectStore("song",{keyPath:"id"})),e.createObjectStore("albumFolder")}})}async function Zi(){const e=await ot(),t=await e.getAll("album"),r=await e.get("albumFolder","german")??[],n=await e.get("albumFolder","russian")??[],s=await e.get("albumFolder","instrumental")??[],a=await e.get("albumFolder","geistlicheLieder")??[],l=await e.get("albumFolder","russianBook")??[];return e.close(),{german:t.filter(o=>r.includes(o.folderName)),russian:t.filter(o=>n.includes(o.folderName)),instrumental:t.filter(o=>s.includes(o.folderName)),geistlicheLieder:t.find(o=>a.includes(o.folderName)),russianBook:t.find(o=>l.includes(o.folderName))}}async function eo(e){const t=await ot(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian"),n.put(e.instrumental.map(l=>l.folderName),"instrumental"),n.put([e.geistlicheLieder.folderName],"geistlicheLieder"),n.put([e.russianBook.folderName],"russianBook");const s=r.objectStore("album");s.clear();const a=[];for(const l of e.german)a.push(s.put(l));for(const l of e.russian)a.push(s.put(l));for(const l of e.instrumental)a.push(s.put(l));a.push(s.put(e.geistlicheLieder)),a.push(s.put(e.russianBook)),await Promise.all(a),r.commit(),t.close()}const Sr={};async function hr(e){const t=qe(e);let r=Sr[t];if(!r){const n=await to(e);r=URL.createObjectURL(n),Sr[t]=r}return r}async function to(e){const t=qe(e),r=await ot(),n=await r.get("image",t);if(r.close(),n)return n.blob;const s=await new Ve({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),a=new Blob([s]);return ro(e,a),a}async function ro(e,t){const n={id:qe(e),blob:t},s=await ot();await s.add("image",n),s.close()}async function bn(e){const t=qe(e),r=await ot(),n=await r.get("song",t);if(r.close(),n)return n.blob;const s=await new Ve({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),a=new Blob([s],{type:"audio/mpeg"});return no(e,a),a}async function no(e,t){const n={id:qe(e),name:e.name,blob:t},s=await ot();await s.add("song",n),s.close()}async function io(e){const t=await ot(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(qe(n)))}async function oo(){const e=await ot(),t=await e.getAllKeys("song");return e.close(),t}function qe(e){return JSON.stringify({key:e.key,downloadId:e.downloadId})}const _t={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA",GEISTLICHE_LIEDER_URL:"https://mega.nz/folder/Dm5x2LRZ#OLhiAvvoX4qZTZGDLPn0SQ",RUSSIAN_BOOK:"https://mega.nz/folder/3zIxQbpT#pwb_r_7oq0ZRnerldK4sLA"};function Ht(e){var t,r;return e.german.flatMap(n=>n.songs).concat(e.russian.flatMap(n=>n.songs)).concat(e.instrumental.flatMap(n=>n.songs)).concat(((t=e.geistlicheLieder)==null?void 0:t.songs.map(n=>({...n,name:n.name.split("_",2)[1]})))??[]).concat(((r=e.russianBook)==null?void 0:r.songs.map(n=>({...n,name:n.name.split("-",2)[1].trimStart()})))??[])}async function ao(){return{german:await Kt(_t.GERMAN_SONGS_URL),russian:await Kt(_t.RUSSIAN_SONGS_URL),instrumental:await Kt(_t.INSTRUMENTAL_SONGS_URL),geistlicheLieder:await Ar(_t.GEISTLICHE_LIEDER_URL),russianBook:await Ar(_t.RUSSIAN_BOOK)}}async function Kt(e){const t=Ve.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(wn)}async function Ar(e){const t=Ve.fromURL(e);return await t.loadAttributes(),wn(t)}function wn(e){const t=e.children.find(r=>{var n;return(n=r.name)==null?void 0:n.endsWith(".jpg")});return{name:e.name.split("(")[0].trim(),folderName:e.name,image:t?{key:t.key,downloadId:t.downloadId,fileSize:t.size}:null,songs:e.children.filter(r=>r.name.endsWith(".mp3")||r.name.endsWith(".webm")||r.name.endsWith(".mp4")).map(r=>({name:r.name.substring(0,r.name.lastIndexOf(".")).trim(),link:{key:r.key,downloadId:r.downloadId,fileSize:r.size}}))}}async function It(e,t,r){try{const n=t[r];Ye.update(a=>({...a,isLoading:!0}));const s=await bn({name:n.name,...n.link});Ye.update(a=>(a.src!=null&&URL.revokeObjectURL(a.src),{...a,isLoading:!1,src:URL.createObjectURL(s),album:e,song:n,playPrevious:r>0?()=>It(e,t,r-1):null,playNext:r<t.length-1?()=>It(e,t,r+1):null,playRandom:()=>It(e,t,so(t.length))}))}catch{Ye.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function so(e){return Math.floor(Math.random()*e)}const Ut="music/favorites";function tr(e){var r;const t=qe(e);return((r=localStorage.getItem(Ut))==null?void 0:r.includes(t))??!1}function lo(e){const t=`;${qe(e)};`,r=localStorage.getItem(Ut);(r==null?void 0:r.includes(t))??!1?localStorage.setItem(Ut,r.replace(t,"")):localStorage.setItem(Ut,r+t)}function uo(e){let t,r,n,s,a;return{c(){t=Q("button"),r=Be("play_arrow"),this.h()},l(l){t=Z(l,"BUTTON",{class:!0});var o=oe(t);r=Oe(o,"play_arrow"),o.forEach(J),this.h()},h(){Y(t,"class","material-symbols-outlined btn btn-sm btn-circle"),t.disabled=n=e[1].isLoading},m(l,o){Ee(l,t,o),q(t,r),s||(a=ke(t,"click",e[6]),s=!0)},p(l,o){o&2&&n!==(n=l[1].isLoading)&&(t.disabled=n)},d(l){l&&J(t),s=!1,a()}}}function fo(e){let t,r="pause",n,s;return{c(){t=Q("button"),t.textContent=r,this.h()},l(a){t=Z(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-trrviv"&&(t.textContent=r),this.h()},h(){Y(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(a,l){Ee(a,t,l),n||(s=ke(t,"click",e[7]),n=!0)},p:Ue,d(a){a&&J(t),n=!1,s()}}}function co(e){let t,r,n,s,a,l,o="X",f,d,y,g=Mt(e[5])+"",_,E,c,p=Mt(e[3])+"",m,I,b,A,O,M,S,T,C,x,$,j,z,G,X,ie,ne,fe="shuffle",Se,ce,we,de=!0,R=!1,N,W,te;function ge(D,K){return D[2]?uo:fo}let he=ge(e),B=he(e);function L(){cancelAnimationFrame(N),ce.paused||(N=In(L),R=!0),e[13].call(ce)}return{c(){t=Q("div"),r=Q("div"),n=Q("div"),s=Q("input"),a=me(),l=Q("button"),l.textContent=o,f=me(),d=Q("div"),y=Q("p"),_=Be(g),E=me(),c=Q("p"),m=Be(p),I=me(),b=Q("div"),A=Q("button"),O=Be("favorite"),S=me(),T=Q("button"),C=Be("skip_previous"),$=me(),B.c(),j=me(),z=Q("button"),G=Be("skip_next"),ie=me(),ne=Q("button"),ne.textContent=fe,Se=me(),ce=Q("audio"),this.h()},l(D){t=Z(D,"DIV",{class:!0});var K=oe(t);r=Z(K,"DIV",{class:!0});var le=oe(r);n=Z(le,"DIV",{class:!0});var w=oe(n);s=Z(w,"INPUT",{class:!0,type:!0,min:!0,max:!0}),a=be(w),l=Z(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-1crfd7b"&&(l.textContent=o),w.forEach(J),le.forEach(J),f=be(K),d=Z(K,"DIV",{class:!0});var v=oe(d);y=Z(v,"P",{});var V=oe(y);_=Oe(V,g),V.forEach(J),E=be(v),c=Z(v,"P",{});var ee=oe(c);m=Oe(ee,p),ee.forEach(J),v.forEach(J),I=be(K),b=Z(K,"DIV",{class:!0});var ye=oe(b);A=Z(ye,"BUTTON",{class:!0});var pe=oe(A);O=Oe(pe,"favorite"),pe.forEach(J),S=be(ye),T=Z(ye,"BUTTON",{class:!0});var U=oe(T);C=Oe(U,"skip_previous"),U.forEach(J),$=be(ye),B.l(ye),j=be(ye),z=Z(ye,"BUTTON",{class:!0});var xe=oe(z);G=Oe(xe,"skip_next"),xe.forEach(J),ie=be(ye),ne=Z(ye,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(ne)!=="svelte-18hvivn"&&(ne.textContent=fe),ye.forEach(J),Se=be(K),ce=Z(K,"AUDIO",{id:!0,src:!0}),oe(ce).forEach(J),K.forEach(J),this.h()},h(){Y(s,"class","range flex-1"),Y(s,"type","range"),Y(s,"min","0"),Y(s,"max",e[3]),Y(l,"class","inline btn btn-sm btn-circle ml-2 relative bottom-2"),Y(n,"class","flex"),Y(r,"class","flex-1 w-full max-w-lg relative mt-2"),Y(d,"class","w-full max-w-lg flex flex-row justify-between"),Y(A,"class",M=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`),Y(T,"class","material-symbols-outlined btn btn-sm btn-circle"),T.disabled=x=e[1].playPrevious==null,Y(z,"class","material-symbols-outlined btn btn-sm btn-circle"),z.disabled=X=e[1].playNext==null,Y(ne,"class","material-symbols-outlined btn btn-sm btn-circle"),Y(b,"class","h-8 flex justify-center gap-1"),Y(ce,"id","audio"),ce.autoplay=!0,ht(ce.src,we=e[1].src)||Y(ce,"src",we),e[3]===void 0&&Ft(()=>e[12].call(ce)),Y(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(D,K){Ee(D,t,K),q(t,r),q(r,n),q(n,s),Ie(s,e[0]),q(n,a),q(n,l),q(t,f),q(t,d),q(d,y),q(y,_),q(d,E),q(d,c),q(c,m),q(t,I),q(t,b),q(b,A),q(A,O),q(b,S),q(b,T),q(T,C),q(b,$),B.m(b,null),q(b,j),q(b,z),q(z,G),q(b,ie),q(b,ne),q(t,Se),q(t,ce),W||(te=[ke(s,"change",e[10]),ke(s,"input",e[10]),ke(l,"click",e[9]),ke(A,"click",e[8]),ke(T,"click",function(){Ct(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),ke(z,"click",function(){Ct(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),ke(ne,"click",function(){Ct(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),ke(ce,"play",e[11]),ke(ce,"pause",e[11]),ke(ce,"durationchange",e[12]),ke(ce,"timeupdate",L),ke(ce,"ended",function(){Ct(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],W=!0)},p(D,[K]){e=D,K&8&&Y(s,"max",e[3]),K&1&&Ie(s,e[0]),K&32&&g!==(g=Mt(e[5])+"")&&dt(_,g),K&8&&p!==(p=Mt(e[3])+"")&&dt(m,p),K&16&&M!==(M=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`)&&Y(A,"class",M),K&2&&x!==(x=e[1].playPrevious==null)&&(T.disabled=x),he===(he=ge(e))&&B?B.p(e,K):(B.d(1),B=he(e),B&&(B.c(),B.m(b,j))),K&2&&X!==(X=e[1].playNext==null)&&(z.disabled=X),K&2&&!ht(ce.src,we=e[1].src)&&Y(ce,"src",we),K&4&&de!==(de=e[2])&&ce[de?"pause":"play"](),!R&&K&1&&!isNaN(e[0])&&(ce.currentTime=e[0]),R=!1},i:Ue,o:Ue,d(D){D&&J(t),B.d(),W=!1,rr(te)}}}function Mt(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function ho(e,t,r){let n,s,a;He(e,Ye,A=>r(1,a=A));let l=null;$t(()=>{l=document.getElementById("audio")});let o=!0,f=0,d=0;async function y(A){const O=await hr(A);navigator.mediaSession.metadata.artwork=[{src:O}]}function g(){l.play()}function _(){l.pause()}function E(){a.song&&(lo(a.song.link),r(4,s=tr(a.song.link)))}function c(){Ye.set({isLoading:!1,song:null,album:null,src:null})}function p(){d=_n(this.value),r(0,d)}function m(){o=this.paused,r(2,o)}function I(){f=this.duration,r(3,f)}function b(){d=this.currentTime,r(0,d)}return e.$$.update=()=>{var A,O,M;e.$$.dirty&1&&r(5,n=Math.round(d)),e.$$.dirty&2&&r(4,s=a.song!=null&&tr(a.song.link)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(A=a.song)==null?void 0:A.name,album:(O=a.album)==null?void 0:O.name}),(M=a.album)!=null&&M.image&&y(a.album.image),navigator.mediaSession.setActionHandler("nexttrack",a.playNext??null),navigator.mediaSession.setActionHandler("previoustrack",a.playPrevious??null))},[d,a,o,f,s,n,g,_,E,c,p,m,I,b]}class po extends ut{constructor(t){super(),ft(this,t,ho,co,lt,{})}}function kr(e,t,r){const n=e.slice();return n[10]=t[r],n}function yo(e){let t,r="download",n,s;return{c(){t=Q("button"),t.textContent=r,this.h()},l(a){t=Z(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-1q4a5e4"&&(t.textContent=r),this.h()},h(){Y(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(a,l){Ee(a,t,l),n||(s=ke(t,"click",e[5]),n=!0)},p:Ue,d(a){a&&J(t),n=!1,s()}}}function go(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Q("div"),t.innerHTML=r,this.h()},l(n){t=Z(n,"DIV",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-134bier"&&(t.innerHTML=r),this.h()},h(){Y(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,s){Ee(n,t,s)},p:Ue,d(n){n&&J(t)}}}function mo(e){let t,r,n;return{c(){t=Q("figure"),r=Q("img"),this.h()},l(s){t=Z(s,"FIGURE",{});var a=oe(t);r=Z(a,"IMG",{src:!0,alt:!0,class:!0}),a.forEach(J),this.h()},h(){ht(r.src,n=e[2])||Y(r,"src",n),Y(r,"alt","Albumbild"),Y(r,"class","w-48 h-48 object-scale-down")},m(s,a){Ee(s,t,a),q(t,r)},p(s,a){a&4&&!ht(r.src,n=s[2])&&Y(r,"src",n)},d(s){s&&J(t)}}}function Ir(e){let t,r="download";return{c(){t=Q("span"),t.textContent=r,this.h()},l(n){t=Z(n,"SPAN",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-yi50h3"&&(t.textContent=r),this.h()},h(){Y(t,"class","material-symbols-outlined")},m(n,s){Ee(n,t,s)},d(n){n&&J(t)}}}function Br(e){let t,r,n=e[10].name+"",s,a,l=e[1].includes(e[10].link),o,f,d,y,g=l&&Ir();function _(){return e[8](e[10])}return{c(){t=Q("li"),r=Q("p"),s=Be(n),a=me(),g&&g.c(),o=me(),this.h()},l(E){t=Z(E,"LI",{class:!0});var c=oe(t);r=Z(c,"P",{class:!0});var p=oe(r);s=Oe(p,n),p.forEach(J),a=be(c),g&&g.l(c),o=be(c),c.forEach(J),this.h()},h(){Y(r,"class","flex-1 hover:underline"),Y(t,"class",f=`cursor-pointer flex ${e[10]===e[3].song?"font-bold":""}`)},m(E,c){Ee(E,t,c),q(t,r),q(r,s),q(t,a),g&&g.m(t,null),q(t,o),d||(y=ke(t,"click",_),d=!0)},p(E,c){e=E,c&1&&n!==(n=e[10].name+"")&&dt(s,n),c&3&&(l=e[1].includes(e[10].link)),l?g||(g=Ir(),g.c(),g.m(t,o)):g&&(g.d(1),g=null),c&9&&f!==(f=`cursor-pointer flex ${e[10]===e[3].song?"font-bold":""}`)&&Y(t,"class",f)},d(E){E&&J(t),g&&g.d(),d=!1,y()}}}function bo(e){let t,r,n,s,a,l,o,f,d;r=new Fr({props:{title:e[0].name??"Lädt...",withCloseButton:!0,$$slots:{default:[yo]},$$scope:{ctx:e}}});function y(p,m){return p[2]?mo:go}let g=y(e),_=g(e),E=Qe(e[0].songs??[]),c=[];for(let p=0;p<E.length;p+=1)c[p]=Br(kr(e,E,p));return{c(){t=Q("main"),et(r.$$.fragment),n=me(),s=Q("div"),a=Q("div"),l=Q("div"),_.c(),o=me(),f=Q("ul");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){t=Z(p,"MAIN",{class:!0});var m=oe(t);tt(r.$$.fragment,m),n=be(m),s=Z(m,"DIV",{class:!0});var I=oe(s);a=Z(I,"DIV",{class:!0});var b=oe(a);l=Z(b,"DIV",{class:!0});var A=oe(l);_.l(A),A.forEach(J),o=be(b),f=Z(b,"UL",{class:!0});var O=oe(f);for(let M=0;M<c.length;M+=1)c[M].l(O);O.forEach(J),b.forEach(J),I.forEach(J),m.forEach(J),this.h()},h(){Y(l,"class","mb-2"),Y(f,"class","mx-2"),Y(a,"class","card w-full md:w-96 bg-base-100 shadow-xl"),Y(s,"class","flex-1 flex justify-center"),Y(t,"class","flex-1 flex flex-col")},m(p,m){Ee(p,t,m),rt(r,t,null),q(t,n),q(t,s),q(s,a),q(a,l),_.m(l,null),q(a,o),q(a,f);for(let I=0;I<c.length;I+=1)c[I]&&c[I].m(f,null);d=!0},p(p,[m]){const I={};if(m&1&&(I.title=p[0].name??"Lädt..."),m&8192&&(I.$$scope={dirty:m,ctx:p}),r.$set(I),g===(g=y(p))&&_?_.p(p,m):(_.d(1),_=g(p),_&&(_.c(),_.m(l,null))),m&27){E=Qe(p[0].songs??[]);let b;for(b=0;b<E.length;b+=1){const A=kr(p,E,b);c[b]?c[b].p(A,m):(c[b]=Br(A),c[b].c(),c[b].m(f,null))}for(;b<c.length;b+=1)c[b].d(1);c.length=E.length}},i(p){d||(Pe(r.$$.fragment,p),d=!0)},o(p){je(r.$$.fragment,p),d=!1},d(p){p&&J(t),nt(r),_.d(),nr(c,p)}}}function wo(e,t,r){let n,s,a;He(e,Bt,E=>r(7,s=E)),He(e,Ye,E=>r(3,a=E));let{album:l}=t,o=[],f;async function d(E){const c=n.songs.indexOf(E);It(n,n.songs,c),y()}async function y(){r(1,o=await io(n.songs.map(E=>E.link)))}async function g(){for(const E of n.songs)await bn({name:E.name,...E.link}),y()}$t(()=>{y()});const _=E=>d(E);return e.$$set=E=>{"album"in E&&r(6,l=E.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=s.german.concat(s.russian).concat(s.instrumental).find(E=>E.folderName===l)),e.$$.dirty&1&&n.image&&hr(n.image).then(E=>r(2,f=E))},[n,o,f,a,d,g,l,s,_]}class vo extends ut{constructor(t){super(),ft(this,t,wo,bo,lt,{album:6})}}function _o(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Q("div"),t.innerHTML=r,this.h()},l(n){t=Z(n,"DIV",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-m3w8dv"&&(t.innerHTML=r),this.h()},h(){Y(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,s){Ee(n,t,s)},p:Ue,d(n){n&&J(t)}}}function Eo(e){let t,r,n;return{c(){t=Q("figure"),r=Q("img"),this.h()},l(s){t=Z(s,"FIGURE",{});var a=oe(t);r=Z(a,"IMG",{src:!0,alt:!0,class:!0}),a.forEach(J),this.h()},h(){ht(r.src,n=e[1])||Y(r,"src",n),Y(r,"alt","Albumbild"),Y(r,"class","w-48 h-48 object-scale-down")},m(s,a){Ee(s,t,a),q(t,r)},p(s,a){a&2&&!ht(r.src,n=s[1])&&Y(r,"src",n)},d(s){s&&J(t)}}}function So(e){let t,r,n,s,a=e[0].name+"",l,o,f,d,y,g,_;function E(m,I){return m[1]?Eo:_o}let c=E(e),p=c(e);return{c(){t=Q("div"),p.c(),r=me(),n=Q("div"),s=Q("p"),l=Be(a),o=me(),f=Q("div"),d=Q("a"),y=Be("Öffnen"),this.h()},l(m){t=Z(m,"DIV",{id:!0,class:!0});var I=oe(t);p.l(I),r=be(I),n=Z(I,"DIV",{class:!0});var b=oe(n);s=Z(b,"P",{class:!0});var A=oe(s);l=Oe(A,a),A.forEach(J),b.forEach(J),o=be(I),f=Z(I,"DIV",{class:!0});var O=oe(f);d=Z(O,"A",{class:!0,href:!0});var M=oe(d);y=Oe(M,"Öffnen"),M.forEach(J),O.forEach(J),I.forEach(J),this.h()},h(){Y(s,"class","card-title"),Y(n,"class","card-body w-full md:w-96"),Y(d,"class","btn btn-primary capitalize"),Y(d,"href",g=`#album/${e[0].folderName}`),Y(f,"class","card-actions justify-end"),Y(t,"id",_=`album_card_${e[0].name}`),Y(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(m,I){Ee(m,t,I),p.m(t,null),q(t,r),q(t,n),q(n,s),q(s,l),q(t,o),q(t,f),q(f,d),q(d,y)},p(m,[I]){c===(c=E(m))&&p?p.p(m,I):(p.d(1),p=c(m),p&&(p.c(),p.m(t,r))),I&1&&a!==(a=m[0].name+"")&&dt(l,a),I&1&&g!==(g=`#album/${m[0].folderName}`)&&Y(d,"href",g),I&1&&_!==(_=`album_card_${m[0].name}`)&&Y(t,"id",_)},i:Ue,o:Ue,d(m){m&&J(t),p.d()}}}function Ao(e,t,r){let{album:n}=t,s,a,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!s&&(r(1,s=await hr(n.image)),l.unobserve(a),l=null)}),$t(()=>{a=document.getElementById(`album_card_${n.name}`),l.observe(a)}),vn(()=>{l==null||l.unobserve(a)}),e.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,s]}class ko extends ut{constructor(t){super(),ft(this,t,Ao,So,lt,{album:0})}}function Or(e,t,r){const n=e.slice();return n[6]=t[r],n}function Rr(e,t){let r,n,s;return n=new ko({props:{album:t[6]}}),{key:e,first:null,c(){r=dr(),et(n.$$.fragment),this.h()},l(a){r=dr(),tt(n.$$.fragment,a),this.h()},h(){this.first=r},m(a,l){Ee(a,r,l),rt(n,a,l),s=!0},p(a,l){t=a;const o={};l&4&&(o.album=t[6]),n.$set(o)},i(a){s||(Pe(n.$$.fragment,a),s=!0)},o(a){je(n.$$.fragment,a),s=!1},d(a){a&&J(r),nt(n,a)}}}function Io(e){let t,r,n,s,a="Alle Alben",l,o="Deutsche Alben",f,d="Russische Alben",y,g="Instrumentelle Alben",_,E,c,p,m=[],I=new Map,b,A,O,M=Qe(e[2]);const S=T=>T[6].folderName;for(let T=0;T<M.length;T+=1){let C=Or(e,M,T),x=S(C);I.set(x,m[T]=Rr(x,C))}return{c(){t=Q("div"),r=Q("div"),n=Q("select"),s=Q("option"),s.textContent=a,l=Q("option"),l.textContent=o,f=Q("option"),f.textContent=d,y=Q("option"),y.textContent=g,_=me(),E=Q("input"),c=me(),p=Q("div");for(let T=0;T<m.length;T+=1)m[T].c();this.h()},l(T){t=Z(T,"DIV",{class:!0});var C=oe(t);r=Z(C,"DIV",{class:!0});var x=oe(r);n=Z(x,"SELECT",{class:!0});var $=oe(n);s=Z($,"OPTION",{"data-svelte-h":!0}),Me(s)!=="svelte-1i7obur"&&(s.textContent=a),l=Z($,"OPTION",{"data-svelte-h":!0}),Me(l)!=="svelte-1i51hln"&&(l.textContent=o),f=Z($,"OPTION",{"data-svelte-h":!0}),Me(f)!=="svelte-1opew9k"&&(f.textContent=d),y=Z($,"OPTION",{"data-svelte-h":!0}),Me(y)!=="svelte-hlo9rd"&&(y.textContent=g),$.forEach(J),_=be(x),E=Z(x,"INPUT",{class:!0,placeholder:!0,type:!0}),x.forEach(J),c=be(C),p=Z(C,"DIV",{class:!0});var j=oe(p);for(let z=0;z<m.length;z+=1)m[z].l(j);j.forEach(J),C.forEach(J),this.h()},h(){s.__value="all",Ie(s,s.__value),l.__value="german",Ie(l,l.__value),f.__value="russian",Ie(f,f.__value),y.__value="instrumental",Ie(y,y.__value),Y(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ft(()=>e[4].call(n)),Y(E,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),Y(E,"placeholder","Suche"),Y(E,"type","search"),Y(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),Y(p,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),Y(t,"class","flex-1 flex flex-col overflow-hidden")},m(T,C){Ee(T,t,C),q(t,r),q(r,n),q(n,s),q(n,l),q(n,f),q(n,y),pt(n,e[1],!0),q(r,_),q(r,E),Ie(E,e[0]),q(t,c),q(t,p);for(let x=0;x<m.length;x+=1)m[x]&&m[x].m(p,null);b=!0,A||(O=[ke(n,"change",e[4]),ke(E,"input",e[5])],A=!0)},p(T,[C]){C&2&&pt(n,T[1]),C&1&&E.value!==T[0]&&Ie(E,T[0]),C&4&&(M=Qe(T[2]),Nt(),m=En(m,C,S,1,T,M,I,p,Sn,Rr,null,Or),xt())},i(T){if(!b){for(let C=0;C<M.length;C+=1)Pe(m[C]);b=!0}},o(T){for(let C=0;C<m.length;C+=1)je(m[C]);b=!1},d(T){T&&J(t);for(let C=0;C<m.length;C+=1)m[C].d();A=!1,rr(O)}}}function Bo(e,t,r){let n;He(e,Bt,d=>r(3,n=d));let s=[],a="",l="all";function o(){l=Yt(this),r(1,l)}function f(){a=this.value,r(0,a)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian).concat(n.instrumental);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else if(l==="instrumental")d=n.instrumental;else throw new Error("No album selected.");r(2,s=d.filter(y=>a.toLocaleLowerCase().split(" ").every(g=>y.name.toLocaleLowerCase().includes(g))).sort((y,g)=>y.name>g.name?1:-1))}},[a,l,s,n,o,f]}class Oo extends ut{constructor(t){super(),ft(this,t,Bo,Io,lt,{})}}function Tr(e,t,r){const n=e.slice();return n[22]=t[r],n}function Lr(e,t,r){const n=e.slice();return n[25]=t[r],n}function Pr(e){let t,r,n="Alle Lieder",s,a,l=Qe(e[3]),o=[];for(let f=0;f<l.length;f+=1)o[f]=Cr(Lr(e,l,f));return{c(){t=Q("select"),r=Q("option"),r.textContent=n;for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){t=Z(f,"SELECT",{class:!0});var d=oe(t);r=Z(d,"OPTION",{"data-svelte-h":!0}),Me(r)!=="svelte-1023i8w"&&(r.textContent=n);for(let y=0;y<o.length;y+=1)o[y].l(d);d.forEach(J),this.h()},h(){r.__value=null,Ie(r,r.__value),Y(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Ft(()=>e[19].call(t))},m(f,d){Ee(f,t,d),q(t,r);for(let y=0;y<o.length;y+=1)o[y]&&o[y].m(t,null);pt(t,e[2],!0),s||(a=ke(t,"change",e[19]),s=!0)},p(f,d){if(d&8){l=Qe(f[3]);let y;for(y=0;y<l.length;y+=1){const g=Lr(f,l,y);o[y]?o[y].p(g,d):(o[y]=Cr(g),o[y].c(),o[y].m(t,null))}for(;y<o.length;y+=1)o[y].d(1);o.length=l.length}d&12&&pt(t,f[2])},d(f){f&&J(t),nr(o,f),s=!1,a()}}}function Cr(e){let t,r=e[25].name+"",n,s;return{c(){t=Q("option"),n=Be(r),this.h()},l(a){t=Z(a,"OPTION",{});var l=oe(t);n=Oe(l,r),l.forEach(J),this.h()},h(){t.__value=s=e[25],Ie(t,t.__value)},m(a,l){Ee(a,t,l),q(t,n)},p(a,l){l&8&&r!==(r=a[25].name+"")&&dt(n,r),l&8&&s!==(s=a[25])&&(t.__value=s,Ie(t,t.__value))},d(a){a&&J(t)}}}function jr(e){let t,r="download";return{c(){t=Q("span"),t.textContent=r,this.h()},l(n){t=Z(n,"SPAN",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-yi50h3"&&(t.textContent=r),this.h()},h(){Y(t,"class","material-symbols-outlined")},m(n,s){Ee(n,t,s)},d(n){n&&J(t)}}}function Mr(e){var E;let t,r,n=e[22].name+"",s,a,l=(E=e[4])==null?void 0:E.includes(qe(e[22].link)),o,f,d,y,g=l&&jr();function _(){return e[21](e[22])}return{c(){t=Q("li"),r=Q("p"),s=Be(n),a=me(),g&&g.c(),o=me(),this.h()},l(c){t=Z(c,"LI",{class:!0});var p=oe(t);r=Z(p,"P",{class:!0});var m=oe(r);s=Oe(m,n),m.forEach(J),a=be(p),g&&g.l(p),o=be(p),p.forEach(J),this.h()},h(){Y(r,"class","flex-1 hover:underline"),Y(t,"class",f=`cursor-pointer flex ${e[22]===e[6].song?"font-bold":""}`)},m(c,p){Ee(c,t,p),q(t,r),q(r,s),q(t,a),g&&g.m(t,null),q(t,o),d||(y=ke(t,"click",_),d=!0)},p(c,p){var m;e=c,p&32&&n!==(n=e[22].name+"")&&dt(s,n),p&48&&(l=(m=e[4])==null?void 0:m.includes(qe(e[22].link))),l?g||(g=jr(),g.c(),g.m(t,o)):g&&(g.d(1),g=null),p&96&&f!==(f=`cursor-pointer flex ${e[22]===e[6].song?"font-bold":""}`)&&Y(t,"class",f)},d(c){c&&J(t),g&&g.d(),d=!1,y()}}}function Ro(e){let t,r,n,s,a,l,o,f,d,y,g,_,E,c,p,m,I,b,A,O,M,S,T,C,x,$,j=e[3]&&Pr(e),z=Qe(e[5]),G=[];for(let X=0;X<z.length;X+=1)G[X]=Mr(Tr(e,z,X));return{c(){t=Q("div"),r=Q("div"),n=Q("select"),s=Q("option"),a=Be("Alle Lieder"),l=Q("option"),o=Be("Favoriten"),f=Q("option"),d=Be("Heruntergeladene Lieder"),y=Q("option"),g=Be("Deutsche Lieder"),_=Q("option"),E=Be("Russische Lieder"),c=Q("option"),p=Be("Instrumentelle Lieder"),m=Q("option"),I=Be("Geistliche Lieder"),b=Q("option"),A=Be("Песнь Возрождения"),O=me(),j&&j.c(),M=me(),S=Q("input"),T=me(),C=Q("ul");for(let X=0;X<G.length;X+=1)G[X].c();this.h()},l(X){t=Z(X,"DIV",{class:!0});var ie=oe(t);r=Z(ie,"DIV",{class:!0});var ne=oe(r);n=Z(ne,"SELECT",{class:!0});var fe=oe(n);s=Z(fe,"OPTION",{});var Se=oe(s);a=Oe(Se,"Alle Lieder"),Se.forEach(J),l=Z(fe,"OPTION",{});var ce=oe(l);o=Oe(ce,"Favoriten"),ce.forEach(J),f=Z(fe,"OPTION",{});var we=oe(f);d=Oe(we,"Heruntergeladene Lieder"),we.forEach(J),y=Z(fe,"OPTION",{});var de=oe(y);g=Oe(de,"Deutsche Lieder"),de.forEach(J),_=Z(fe,"OPTION",{});var R=oe(_);E=Oe(R,"Russische Lieder"),R.forEach(J),c=Z(fe,"OPTION",{});var N=oe(c);p=Oe(N,"Instrumentelle Lieder"),N.forEach(J),m=Z(fe,"OPTION",{});var W=oe(m);I=Oe(W,"Geistliche Lieder"),W.forEach(J),b=Z(fe,"OPTION",{});var te=oe(b);A=Oe(te,"Песнь Возрождения"),te.forEach(J),fe.forEach(J),O=be(ne),j&&j.l(ne),M=be(ne),S=Z(ne,"INPUT",{class:!0,placeholder:!0,type:!0}),ne.forEach(J),T=be(ie),C=Z(ie,"UL",{class:!0});var ge=oe(C);for(let he=0;he<G.length;he+=1)G[he].l(ge);ge.forEach(J),ie.forEach(J),this.h()},h(){s.__value=e[7],Ie(s,s.__value),l.__value=e[8],Ie(l,l.__value),f.__value=e[9],Ie(f,f.__value),y.__value=e[10],Ie(y,y.__value),_.__value=e[11],Ie(_,_.__value),c.__value=e[12],Ie(c,c.__value),m.__value=e[13],Ie(m,m.__value),b.__value=e[14],Ie(b,b.__value),Y(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ft(()=>e[18].call(n)),Y(S,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),Y(S,"placeholder","Suche"),Y(S,"type","search"),Y(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),Y(C,"class","flex-1 overflow-auto mx-2"),Y(t,"class","flex-1 flex flex-col justify-center")},m(X,ie){Ee(X,t,ie),q(t,r),q(r,n),q(n,s),q(s,a),q(n,l),q(l,o),q(n,f),q(f,d),q(n,y),q(y,g),q(n,_),q(_,E),q(n,c),q(c,p),q(n,m),q(m,I),q(n,b),q(b,A),pt(n,e[1],!0),q(r,O),j&&j.m(r,null),q(r,M),q(r,S),Ie(S,e[0]),q(t,T),q(t,C);for(let ne=0;ne<G.length;ne+=1)G[ne]&&G[ne].m(C,null);x||($=[ke(n,"change",e[18]),ke(S,"input",e[20])],x=!0)},p(X,[ie]){if(ie&32642&&pt(n,X[1]),X[3]?j?j.p(X,ie):(j=Pr(X),j.c(),j.m(r,M)):j&&(j.d(1),j=null),ie&1&&S.value!==X[0]&&Ie(S,X[0]),ie&32880){z=Qe(X[5]);let ne;for(ne=0;ne<z.length;ne+=1){const fe=Tr(X,z,ne);G[ne]?G[ne].p(fe,ie):(G[ne]=Mr(fe),G[ne].c(),G[ne].m(C,null))}for(;ne<G.length;ne+=1)G[ne].d(1);G.length=z.length}},i:Ue,o:Ue,d(X){X&&J(t),j&&j.d(),nr(G,X),x=!1,rr($)}}}function To(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}function Ur(e,t){return To(e.name,t.name)}function Lo(e,t,r){let n,s,a,l;He(e,Bt,x=>r(17,a=x)),He(e,Ye,x=>r(6,l=x));let o="";const f={getSongs:x=>Ht(x)},d={getSongs:x=>Ht(x).filter($=>tr($.link))},y={getSongs:x=>Ht(x).filter($=>I.includes(qe($.link)))},g={getAlbums:x=>x.german,getSongs:x=>x.german.flatMap($=>$.songs)},_={getAlbums:x=>x.russian,getSongs:x=>x.russian.flatMap($=>$.songs)},E={getAlbums:x=>x.instrumental,getSongs:x=>x.instrumental.flatMap($=>$.songs)},c={getSongs:x=>x.geistlicheLieder.songs.map($=>({...$,name:$.name.replace("_"," - ")}))},p={getSongs:x=>x.russianBook.songs};let m=f,I,b=null,A;async function O(x){const $=A.indexOf(x);It(null,A,$)}function M(){m=Yt(this),r(1,m),r(14,p),r(13,c),r(12,E),r(11,_),r(10,g),r(9,y),r(8,d),r(7,f)}function S(){b=Yt(this),r(2,b),r(3,n),r(1,m),r(17,a),r(3,n),r(1,m),r(17,a)}function T(){o=this.value,r(0,o)}const C=x=>O(x);e.$$.update=()=>{e.$$.dirty&131074&&r(3,n=m.getAlbums==null?null:m.getAlbums(a)),e.$$.dirty&12&&b&&(!n||!n.includes(b))&&r(2,b=null),e.$$.dirty&131078&&(b?r(16,A=b.songs.sort(Ur)):r(16,A=m.getSongs(a).sort(Ur))),e.$$.dirty&65537&&r(5,s=A.filter(x=>o.toLocaleLowerCase().split(" ").every($=>x.name.toLocaleLowerCase().includes($))))};{async function x(){r(4,I=await oo())}x()}return[o,m,b,n,I,s,l,f,d,y,g,_,E,c,p,O,A,a,M,S,T,C]}class Po extends ut{constructor(t){super(),ft(this,t,Lo,Ro,lt,{})}}function Co(e){let t,r="lyrics";return{c(){t=Q("a"),t.textContent=r,this.h()},l(n){t=Z(n,"A",{class:!0,href:!0,"data-svelte-h":!0}),Me(t)!=="svelte-157x70e"&&(t.textContent=r),this.h()},h(){Y(t,"class","material-symbols-outlined btn btn-sm btn-circle"),Y(t,"href","/")},m(n,s){Ee(n,t,s)},p:Ue,d(n){n&&J(t)}}}function jo(e){let t,r;return t=new Oo({}),{c(){et(t.$$.fragment)},l(n){tt(t.$$.fragment,n)},m(n,s){rt(t,n,s),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){nt(t,n)}}}function Mo(e){let t,r;return t=new Po({}),{c(){et(t.$$.fragment)},l(n){tt(t.$$.fragment,n)},m(n,s){rt(t,n,s),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){nt(t,n)}}}function Uo(e){let t,r,n,s,a,l,o,f,d,y,g,_,E,c,p,m;r=new Fr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Co]},$$scope:{ctx:e}}});const I=[Mo,jo],b=[];function A(O,M){return O[0].url.hash===""?0:O[0].url.hash==="#alben"?1:-1}return~(c=A(e))&&(p=b[c]=I[c](e)),{c(){t=Q("div"),et(r.$$.fragment),n=me(),s=Q("div"),a=Q("a"),l=Be("Lieder"),f=me(),d=Q("a"),y=Be("Alben"),_=me(),E=Q("div"),p&&p.c(),this.h()},l(O){t=Z(O,"DIV",{class:!0});var M=oe(t);tt(r.$$.fragment,M),n=be(M),s=Z(M,"DIV",{class:!0});var S=oe(s);a=Z(S,"A",{class:!0,href:!0});var T=oe(a);l=Oe(T,"Lieder"),T.forEach(J),f=be(S),d=Z(S,"A",{class:!0,href:!0});var C=oe(d);y=Oe(C,"Alben"),C.forEach(J),S.forEach(J),_=be(M),E=Z(M,"DIV",{class:!0});var x=oe(E);p&&p.l(x),x.forEach(J),M.forEach(J),this.h()},h(){Y(a,"class",o=`tab ${e[0].url.hash===""?"tab-active":""}`),Y(a,"href","/music"),Y(d,"class",g=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),Y(d,"href","/music#alben"),Y(s,"class","tabs justify-center"),Y(E,"class","flex-1 flex overflow-auto p-1"),Y(t,"class","flex-1 flex flex-col overflow-hidden")},m(O,M){Ee(O,t,M),rt(r,t,null),q(t,n),q(t,s),q(s,a),q(a,l),q(s,f),q(s,d),q(d,y),q(t,_),q(t,E),~c&&b[c].m(E,null),m=!0},p(O,[M]){const S={};M&2&&(S.$$scope={dirty:M,ctx:O}),r.$set(S),(!m||M&1&&o!==(o=`tab ${O[0].url.hash===""?"tab-active":""}`))&&Y(a,"class",o),(!m||M&1&&g!==(g=`tab ${O[0].url.hash==="#alben"?"tab-active":""}`))&&Y(d,"class",g);let T=c;c=A(O),c!==T&&(p&&(Nt(),je(b[T],1,1,()=>{b[T]=null}),xt()),~c?(p=b[c],p||(p=b[c]=I[c](O),p.c()),Pe(p,1),p.m(E,null)):p=null)},i(O){m||(Pe(r.$$.fragment,O),Pe(p),m=!0)},o(O){je(r.$$.fragment,O),je(p),m=!1},d(O){O&&J(t),nt(r),~c&&b[c].d()}}}function No(e,t,r){let n;return He(e,Dr,s=>r(0,n=s)),[n]}class xo extends ut{constructor(t){super(),ft(this,t,No,Uo,lt,{})}}function Do(e){let t,r;return t=new vo({props:{album:e[2]()}}),{c(){et(t.$$.fragment)},l(n){tt(t.$$.fragment,n)},m(n,s){rt(t,n,s),r=!0},p:Ue,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){nt(t,n)}}}function Fo(e){let t,r;return t=new xo({}),{c(){et(t.$$.fragment)},l(n){tt(t.$$.fragment,n)},m(n,s){rt(t,n,s),r=!0},p:Ue,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){nt(t,n)}}}function Nr(e){let t,r,n,s,a=e[1].isLoading&&xr();return n=new po({}),{c(){a&&a.c(),t=me(),r=Q("div"),et(n.$$.fragment),this.h()},l(l){a&&a.l(l),t=be(l),r=Z(l,"DIV",{class:!0});var o=oe(r);tt(n.$$.fragment,o),o.forEach(J),this.h()},h(){Y(r,"class","self-center mb-2 w-full")},m(l,o){a&&a.m(l,o),Ee(l,t,o),Ee(l,r,o),rt(n,r,null),s=!0},p(l,o){l[1].isLoading?a||(a=xr(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i(l){s||(Pe(n.$$.fragment,l),s=!0)},o(l){je(n.$$.fragment,l),s=!1},d(l){l&&(J(t),J(r)),a&&a.d(l),nt(n)}}}function xr(e){let t;return{c(){t=Q("progress"),this.h()},l(r){t=Z(r,"PROGRESS",{class:!0}),oe(t).forEach(J),this.h()},h(){Y(t,"class","progress w-56 self-center mb-2")},m(r,n){Ee(r,t,n)},d(r){r&&J(t)}}}function $o(e){let t,r,n,s,a,l,o;const f=[Fo,Do],d=[];function y(_,E){return E&1&&(n=null),_[0].url.hash===""||_[0].url.hash==="#alben"?0:(n==null&&(n=!!_[0].url.hash.startsWith("#album")),n?1:-1)}~(s=y(e,-1))&&(a=d[s]=f[s](e));let g=(e[1].src!=null||e[1].isLoading)&&Nr(e);return{c(){t=Q("div"),r=Q("main"),a&&a.c(),l=me(),g&&g.c(),this.h()},l(_){t=Z(_,"DIV",{class:!0});var E=oe(t);r=Z(E,"MAIN",{class:!0});var c=oe(r);a&&a.l(c),c.forEach(J),l=be(E),g&&g.l(E),E.forEach(J),this.h()},h(){Y(r,"class","overflow-auto flex-1 flex flex-col"),Y(t,"class","w-full h-full flex flex-col")},m(_,E){Ee(_,t,E),q(t,r),~s&&d[s].m(r,null),q(t,l),g&&g.m(t,null),o=!0},p(_,[E]){let c=s;s=y(_,E),s===c?~s&&d[s].p(_,E):(a&&(Nt(),je(d[c],1,1,()=>{d[c]=null}),xt()),~s?(a=d[s],a?a.p(_,E):(a=d[s]=f[s](_),a.c()),Pe(a,1),a.m(r,null)):a=null),_[1].src!=null||_[1].isLoading?g?(g.p(_,E),E&2&&Pe(g,1)):(g=Nr(_),g.c(),Pe(g,1),g.m(t,null)):g&&(Nt(),je(g,1,1,()=>{g=null}),xt())},i(_){o||(Pe(a),Pe(g),o=!0)},o(_){je(a),je(g),o=!1},d(_){_&&J(t),~s&&d[s].d(),g&&g.d()}}}function Wo(e,t,r){let n,s;He(e,Dr,l=>r(0,n=l)),He(e,Ye,l=>r(1,s=l)),$t(()=>{(async()=>{An()&&(Dt.getGlobalApi().userAgent=null);let o;return"wakeLock"in navigator&&(o=await navigator.wakeLock.request("screen")),Zi().then(Bt.set),navigator.onLine&&await ao().then(async f=>{Bt.set(f),await eo(f)}),()=>{o.release()}})()});function a(){return decodeURI(n.url.hash.substring(7))}return[n,s,a]}class Ko extends ut{constructor(t){super(),ft(this,t,Wo,$o,lt,{})}}export{Ko as component};
