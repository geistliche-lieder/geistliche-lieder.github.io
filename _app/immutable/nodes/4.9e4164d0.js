import{n as et,k as Pn,s as Ge,l as We,m as tt,c as Nt,u as Ut,g as Ct,d as Dt,p as bt,q as Jt,r as Ft,e as qe,o as hr,v as Gt,w as $n}from"../chunks/scheduler.cd932b42.js";import{S as He,i as Ke,r as Se,u as Ae,v as ke,d as le,t as fe,w as Ie,g as Y,s as _e,m as Ce,h as J,j as ie,c as Ee,f as H,n as De,k as X,a as Le,x as V,z as Pe,A as Te,o as wt,p as st,b as lt,B as Mn,C as Jr,y as pt,D as vt,e as Ir,E as ar}from"../chunks/index.5684e23d.js";import{p as Xr}from"../chunks/stores.de81d5b0.js";import{I as xt,g as Wt,a as qt,b as jn,F as dr,c as Nn,d as Un,T as Qr,e as _t,u as Cn,o as Dn,V as Fn,i as xn}from"../chunks/VirtualList.5950c98c.js";import{f as gt,o as Xt,c as it,a as $t}from"../chunks/store.3ba0d815.js";const Wn=typeof window<"u";let qn=Wn?e=>requestAnimationFrame(e):et;const Vn=(e,t)=>t.some(r=>e instanceof r);let Br,Or;function zn(){return Br||(Br=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gn(){return Or||(Or=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zr=new WeakMap,sr=new WeakMap,en=new WeakMap,Zt=new WeakMap,pr=new WeakMap;function Hn(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{r(ot(e.result)),i()},l=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Zr.set(r,e)}).catch(()=>{}),pr.set(t,e),t}function Kn(e){if(sr.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{r(),i()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});sr.set(e,t)}let lr={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return sr.get(e);if(t==="objectStoreNames")return e.objectStoreNames||en.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ot(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Yn(e){lr=e(lr)}function Jn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(er(this),t,...r);return en.set(n,t.sort?t.sort():[t]),ot(n)}:Gn().includes(e)?function(...t){return e.apply(er(this),t),ot(Zr.get(this))}:function(...t){return ot(e.apply(er(this),t))}}function Xn(e){return typeof e=="function"?Jn(e):(e instanceof IDBTransaction&&Kn(e),Vn(e,zn())?new Proxy(e,lr):e)}function ot(e){if(e instanceof IDBRequest)return Hn(e);if(Zt.has(e))return Zt.get(e);const t=Xn(e);return t!==e&&(Zt.set(e,t),pr.set(t,e)),t}const er=e=>pr.get(e);function Qn(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),a=ot(l);return n&&l.addEventListener("upgradeneeded",f=>{n(ot(l.result),f.oldVersion,f.newVersion,ot(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),a.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const Zn=["get","getKey","getAll","getAllKeys","count"],ei=["put","add","delete","clear"],tr=new Map;function Rr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(tr.get(t))return tr.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=ei.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Zn.includes(r)))return;const o=async function(l,...a){const f=this.transaction(l,i?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(a.shift())),(await Promise.all([d[r](...a),i&&f.done]))[0]};return tr.set(t,o),o}Yn(e=>({...e,get:(t,r,n)=>Rr(t,r)||e.get(t,r,n),has:(t,r)=>!!Rr(t,r)||e.has(t,r)}));var ti=Object.create,gr=Object.defineProperty,ri=Object.getOwnPropertyDescriptor,ni=Object.getOwnPropertyNames,ii=Object.getPrototypeOf,oi=Object.prototype.hasOwnProperty,ai=e=>gr(e,"__esModule",{value:!0}),si=(e,t)=>()=>(e&&(t=e(e=0)),t),se=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),li=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ni(t))!oi.call(e,i)&&(r||i!=="default")&&gr(e,i,{get:()=>t[i],enumerable:!(n=ri(t,i))||n.enumerable});return e},Ye=(e,t)=>li(ai(gr(e!=null?ti(ii(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ui=se(e=>{re(),e.byteLength=f,e.toByteArray=p,e.fromByteArray=k;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,l=i.length;o<l;++o)t[o]=i[o],r[i.charCodeAt(o)]=o;var o,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(c){var y=c.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=c.indexOf("=");g===-1&&(g=y);var A=g===y?0:4-g%4;return[g,A]}function f(c){var y=a(c),g=y[0],A=y[1];return(g+A)*3/4-A}function d(c,y,g){return(y+g)*3/4-g}function p(c){var y,g=a(c),A=g[0],w=g[1],E=new n(d(c,A,w)),I=0,j=w>0?A-4:A,S;for(S=0;S<j;S+=4)y=r[c.charCodeAt(S)]<<18|r[c.charCodeAt(S+1)]<<12|r[c.charCodeAt(S+2)]<<6|r[c.charCodeAt(S+3)],E[I++]=y>>16&255,E[I++]=y>>8&255,E[I++]=y&255;return w===2&&(y=r[c.charCodeAt(S)]<<2|r[c.charCodeAt(S+1)]>>4,E[I++]=y&255),w===1&&(y=r[c.charCodeAt(S)]<<10|r[c.charCodeAt(S+1)]<<4|r[c.charCodeAt(S+2)]>>2,E[I++]=y>>8&255,E[I++]=y&255),E}function m(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function v(c,y,g){for(var A,w=[],E=y;E<g;E+=3)A=(c[E]<<16&16711680)+(c[E+1]<<8&65280)+(c[E+2]&255),w.push(m(A));return w.join("")}function k(c){for(var y,g=c.length,A=g%3,w=[],E=16383,I=0,j=g-A;I<j;I+=E)w.push(v(c,I,I+E>j?j:I+E));return A===1?(y=c[g-1],w.push(t[y>>2]+t[y<<4&63]+"==")):A===2&&(y=(c[g-2]<<8)+c[g-1],w.push(t[y>>10]+t[y>>4&63]+t[y<<2&63]+"=")),w.join("")}}),fi=se(e=>{re(),e.read=function(t,r,n,i,o){var l,a,f=o*8-i-1,d=(1<<f)-1,p=d>>1,m=-7,v=n?o-1:0,k=n?-1:1,c=t[r+v];for(v+=k,l=c&(1<<-m)-1,c>>=-m,m+=f;m>0;l=l*256+t[r+v],v+=k,m-=8);for(a=l&(1<<-m)-1,l>>=-m,m+=i;m>0;a=a*256+t[r+v],v+=k,m-=8);if(l===0)l=1-p;else{if(l===d)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,i),l=l-p}return(c?-1:1)*a*Math.pow(2,l-i)},e.write=function(t,r,n,i,o,l){var a,f,d,p=l*8-o-1,m=(1<<p)-1,v=m>>1,k=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:l-1,y=i?1:-1,g=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,a=m):(a=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+v>=1?r+=k/d:r+=k*Math.pow(2,1-v),r*d>=2&&(a++,d/=2),a+v>=m?(f=0,a=m):a+v>=1?(f=(r*d-1)*Math.pow(2,o),a=a+v):(f=r*Math.pow(2,v-1)*Math.pow(2,o),a=0));o>=8;t[n+c]=f&255,c+=y,f/=256,o-=8);for(a=a<<o|f,p+=o;p>0;t[n+c]=a&255,c+=y,a/=256,p-=8);t[n+c-y]|=g*128}}),Vt=se(e=>{re();var t=ui(),r=fi(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let s=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(s,u),s.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(s){if(s>i)throw new RangeError('The value "'+s+'" is invalid for option "size"');let u=new Uint8Array(s);return Object.setPrototypeOf(u,a.prototype),u}function a(s,u,h){if(typeof s=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(s)}return f(s,u,h)}a.poolSize=8192;function f(s,u,h){if(typeof s=="string")return v(s,u);if(ArrayBuffer.isView(s))return c(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(Fe(s,ArrayBuffer)||s&&Fe(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Fe(s,SharedArrayBuffer)||s&&Fe(s.buffer,SharedArrayBuffer)))return y(s,u,h);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=s.valueOf&&s.valueOf();if(B!=null&&B!==s)return a.from(B,u,h);let $=g(s);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return a.from(s[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}a.from=function(s,u,h){return f(s,u,h)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function p(s,u,h){return d(s),s<=0?l(s):u!==void 0?typeof h=="string"?l(s).fill(u,h):l(s).fill(u):l(s)}a.alloc=function(s,u,h){return p(s,u,h)};function m(s){return d(s),l(s<0?0:A(s)|0)}a.allocUnsafe=function(s){return m(s)},a.allocUnsafeSlow=function(s){return m(s)};function v(s,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=E(s,u)|0,B=l(h),$=B.write(s,u);return $!==h&&(B=B.slice(0,$)),B}function k(s){let u=s.length<0?0:A(s.length)|0,h=l(u);for(let B=0;B<u;B+=1)h[B]=s[B]&255;return h}function c(s){if(Fe(s,Uint8Array)){let u=new Uint8Array(s);return y(u.buffer,u.byteOffset,u.byteLength)}return k(s)}function y(s,u,h){if(u<0||s.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let B;return u===void 0&&h===void 0?B=new Uint8Array(s):h===void 0?B=new Uint8Array(s,u):B=new Uint8Array(s,u,h),Object.setPrototypeOf(B,a.prototype),B}function g(s){if(a.isBuffer(s)){let u=A(s.length)|0,h=l(u);return h.length===0||s.copy(h,0,0,u),h}if(s.length!==void 0)return typeof s.length!="number"||nt(s.length)?l(0):k(s);if(s.type==="Buffer"&&Array.isArray(s.data))return k(s.data)}function A(s){if(s>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return s|0}function w(s){return+s!=s&&(s=0),a.alloc(+s)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,u){if(Fe(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),Fe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(s)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let h=s.length,B=u.length;for(let $=0,C=Math.min(h,B);$<C;++$)if(s[$]!==u[$]){h=s[$],B=u[$];break}return h<B?-1:B<h?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<s.length;++h)u+=s[h].length;let B=a.allocUnsafe(u),$=0;for(h=0;h<s.length;++h){let C=s[h];if(Fe(C,Uint8Array))$+C.length>B.length?(a.isBuffer(C)||(C=a.from(C)),C.copy(B,$)):Uint8Array.prototype.set.call(B,C,$);else if(a.isBuffer(C))C.copy(B,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=C.length}return B};function E(s,u){if(a.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||Fe(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);let h=s.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&h===0)return 0;let $=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return be(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return $e(s).length;default:if($)return B?-1:be(s).length;u=(""+u).toLowerCase(),$=!0}}a.byteLength=E;function I(s,u,h){let B=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(s||(s="utf8");;)switch(s){case"hex":return we(this,u,h);case"utf8":case"utf-8":return ee(this,u,h);case"ascii":return pe(this,u,h);case"latin1":case"binary":return ve(this,u,h);case"base64":return G(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,u,h);default:if(B)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function j(s,u,h){let B=s[u];s[u]=s[h],s[h]=B}a.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)j(this,u,u+1);return this},a.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)j(this,u,u+3),j(this,u+1,u+2);return this},a.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)j(this,u,u+7),j(this,u+1,u+6),j(this,u+2,u+5),j(this,u+3,u+4);return this},a.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?ee(this,0,s):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="",u=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(s,u,h,B,$){if(Fe(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),h===void 0&&(h=s?s.length:0),B===void 0&&(B=0),$===void 0&&($=this.length),u<0||h>s.length||B<0||$>this.length)throw new RangeError("out of range index");if(B>=$&&u>=h)return 0;if(B>=$)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,B>>>=0,$>>>=0,this===s)return 0;let C=$-B,K=h-u,Be=Math.min(C,K),Ue=this.slice(B,$),Re=s.slice(u,h);for(let Oe=0;Oe<Be;++Oe)if(Ue[Oe]!==Re[Oe]){C=Ue[Oe],K=Re[Oe];break}return C<K?-1:K<C?1:0};function S(s,u,h,B,$){if(s.length===0)return-1;if(typeof h=="string"?(B=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,nt(h)&&(h=$?0:s.length-1),h<0&&(h=s.length+h),h>=s.length){if($)return-1;h=s.length-1}else if(h<0)if($)h=0;else return-1;if(typeof u=="string"&&(u=a.from(u,B)),a.isBuffer(u))return u.length===0?-1:P(s,u,h,B,$);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(s,u,h):Uint8Array.prototype.lastIndexOf.call(s,u,h):P(s,[u],h,B,$);throw new TypeError("val must be string, number or Buffer")}function P(s,u,h,B,$){let C=1,K=s.length,Be=u.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(s.length<2||u.length<2)return-1;C=2,K/=2,Be/=2,h/=2}function Ue(Oe,Me){return C===1?Oe[Me]:Oe.readUInt16BE(Me*C)}let Re;if($){let Oe=-1;for(Re=h;Re<K;Re++)if(Ue(s,Re)===Ue(u,Oe===-1?0:Re-Oe)){if(Oe===-1&&(Oe=Re),Re-Oe+1===Be)return Oe*C}else Oe!==-1&&(Re-=Re-Oe),Oe=-1}else for(h+Be>K&&(h=K-Be),Re=h;Re>=0;Re--){let Oe=!0;for(let Me=0;Me<Be;Me++)if(Ue(s,Re+Me)!==Ue(u,Me)){Oe=!1;break}if(Oe)return Re}return-1}a.prototype.includes=function(s,u,h){return this.indexOf(s,u,h)!==-1},a.prototype.indexOf=function(s,u,h){return S(this,s,u,h,!0)},a.prototype.lastIndexOf=function(s,u,h){return S(this,s,u,h,!1)};function M(s,u,h,B){h=Number(h)||0;let $=s.length-h;B?(B=Number(B),B>$&&(B=$)):B=$;let C=u.length;B>C/2&&(B=C/2);let K;for(K=0;K<B;++K){let Be=parseInt(u.substr(K*2,2),16);if(nt(Be))return K;s[h+K]=Be}return K}function z(s,u,h,B){return Je(be(u,s.length-h),s,h,B)}function x(s,u,h,B){return Je(he(u),s,h,B)}function R(s,u,h,B){return Je($e(u),s,h,B)}function F(s,u,h,B){return Je(N(u,s.length-h),s,h,B)}a.prototype.write=function(s,u,h,B){if(u===void 0)B="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")B=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,B===void 0&&(B="utf8")):(B=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let $=this.length-u;if((h===void 0||h>$)&&(h=$),s.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let C=!1;for(;;)switch(B){case"hex":return M(this,s,u,h);case"utf8":case"utf-8":return z(this,s,u,h);case"ascii":case"latin1":case"binary":return x(this,s,u,h);case"base64":return R(this,s,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,s,u,h);default:if(C)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),C=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(s,u,h){return u===0&&h===s.length?t.fromByteArray(s):t.fromByteArray(s.slice(u,h))}function ee(s,u,h){h=Math.min(s.length,h);let B=[],$=u;for(;$<h;){let C=s[$],K=null,Be=C>239?4:C>223?3:C>191?2:1;if($+Be<=h){let Ue,Re,Oe,Me;switch(Be){case 1:C<128&&(K=C);break;case 2:Ue=s[$+1],(Ue&192)===128&&(Me=(C&31)<<6|Ue&63,Me>127&&(K=Me));break;case 3:Ue=s[$+1],Re=s[$+2],(Ue&192)===128&&(Re&192)===128&&(Me=(C&15)<<12|(Ue&63)<<6|Re&63,Me>2047&&(Me<55296||Me>57343)&&(K=Me));break;case 4:Ue=s[$+1],Re=s[$+2],Oe=s[$+3],(Ue&192)===128&&(Re&192)===128&&(Oe&192)===128&&(Me=(C&15)<<18|(Ue&63)<<12|(Re&63)<<6|Oe&63,Me>65535&&Me<1114112&&(K=Me))}}K===null?(K=65533,Be=1):K>65535&&(K-=65536,B.push(K>>>10&1023|55296),K=56320|K&1023),B.push(K),$+=Be}return de(B)}var oe=4096;function de(s){let u=s.length;if(u<=oe)return String.fromCharCode.apply(String,s);let h="",B=0;for(;B<u;)h+=String.fromCharCode.apply(String,s.slice(B,B+=oe));return h}function pe(s,u,h){let B="";h=Math.min(s.length,h);for(let $=u;$<h;++$)B+=String.fromCharCode(s[$]&127);return B}function ve(s,u,h){let B="";h=Math.min(s.length,h);for(let $=u;$<h;++$)B+=String.fromCharCode(s[$]);return B}function we(s,u,h){let B=s.length;(!u||u<0)&&(u=0),(!h||h<0||h>B)&&(h=B);let $="";for(let C=u;C<h;++C)$+=ct[s[C]];return $}function ge(s,u,h){let B=s.slice(u,h),$="";for(let C=0;C<B.length-1;C+=2)$+=String.fromCharCode(B[C]+B[C+1]*256);return $}a.prototype.slice=function(s,u){let h=this.length;s=~~s,u=u===void 0?h:~~u,s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<s&&(u=s);let B=this.subarray(s,u);return Object.setPrototypeOf(B,a.prototype),B};function ce(s,u,h){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+u>h)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,u,h){s=s>>>0,u=u>>>0,h||ce(s,u,this.length);let B=this[s],$=1,C=0;for(;++C<u&&($*=256);)B+=this[s+C]*$;return B},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,u,h){s=s>>>0,u=u>>>0,h||ce(s,u,this.length);let B=this[s+--u],$=1;for(;u>0&&($*=256);)B+=this[s+--u]*$;return B},a.prototype.readUint8=a.prototype.readUInt8=function(s,u){return s=s>>>0,u||ce(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||ce(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||ce(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=Ve(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let B=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,$=this[++s]+this[++s]*2**8+this[++s]*2**16+h*2**24;return BigInt(B)+(BigInt($)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let B=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],$=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h;return(BigInt(B)<<BigInt(32))+BigInt($)}),a.prototype.readIntLE=function(s,u,h){s=s>>>0,u=u>>>0,h||ce(s,u,this.length);let B=this[s],$=1,C=0;for(;++C<u&&($*=256);)B+=this[s+C]*$;return $*=128,B>=$&&(B-=Math.pow(2,8*u)),B},a.prototype.readIntBE=function(s,u,h){s=s>>>0,u=u>>>0,h||ce(s,u,this.length);let B=u,$=1,C=this[s+--B];for(;B>0&&($*=256);)C+=this[s+--B]*$;return $*=128,C>=$&&(C-=Math.pow(2,8*u)),C},a.prototype.readInt8=function(s,u){return s=s>>>0,u||ce(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,u){s=s>>>0,u||ce(s,2,this.length);let h=this[s]|this[s+1]<<8;return h&32768?h|4294901760:h},a.prototype.readInt16BE=function(s,u){s=s>>>0,u||ce(s,2,this.length);let h=this[s+1]|this[s]<<8;return h&32768?h|4294901760:h},a.prototype.readInt32LE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=Ve(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let B=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(h<<24);return(BigInt(B)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=Ve(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let B=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(B)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h)}),a.prototype.readFloatLE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||ce(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||ce(s,8,this.length),r.read(this,s,!1,52,8)};function T(s,u,h,B,$,C){if(!a.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>$||u<C)throw new RangeError('"value" argument is out of bounds');if(h+B>s.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,u,h,B){if(s=+s,u=u>>>0,h=h>>>0,!B){let K=Math.pow(2,8*h)-1;T(this,s,u,h,K,0)}let $=1,C=0;for(this[u]=s&255;++C<h&&($*=256);)this[u+C]=s/$&255;return u+h},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,u,h,B){if(s=+s,u=u>>>0,h=h>>>0,!B){let K=Math.pow(2,8*h)-1;T(this,s,u,h,K,0)}let $=h-1,C=1;for(this[u+$]=s&255;--$>=0&&(C*=256);)this[u+$]=s/C&255;return u+h},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,1,255,0),this[u]=s&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function U(s,u,h,B,$){te(u,B,$,s,h,7);let C=Number(u&BigInt(4294967295));s[h++]=C,C=C>>8,s[h++]=C,C=C>>8,s[h++]=C,C=C>>8,s[h++]=C;let K=Number(u>>BigInt(32)&BigInt(4294967295));return s[h++]=K,K=K>>8,s[h++]=K,K=K>>8,s[h++]=K,K=K>>8,s[h++]=K,h}function q(s,u,h,B,$){te(u,B,$,s,h,7);let C=Number(u&BigInt(4294967295));s[h+7]=C,C=C>>8,s[h+6]=C,C=C>>8,s[h+5]=C,C=C>>8,s[h+4]=C;let K=Number(u>>BigInt(32)&BigInt(4294967295));return s[h+3]=K,K=K>>8,s[h+2]=K,K=K>>8,s[h+1]=K,K=K>>8,s[h]=K,h+8}a.prototype.writeBigUInt64LE=Ve(function(s,u=0){return U(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(s,u=0){return q(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,u,h,B){if(s=+s,u=u>>>0,!B){let Be=Math.pow(2,8*h-1);T(this,s,u,h,Be-1,-Be)}let $=0,C=1,K=0;for(this[u]=s&255;++$<h&&(C*=256);)s<0&&K===0&&this[u+$-1]!==0&&(K=1),this[u+$]=(s/C>>0)-K&255;return u+h},a.prototype.writeIntBE=function(s,u,h,B){if(s=+s,u=u>>>0,!B){let Be=Math.pow(2,8*h-1);T(this,s,u,h,Be-1,-Be)}let $=h-1,C=1,K=0;for(this[u+$]=s&255;--$>=0&&(C*=256);)s<0&&K===0&&this[u+$+1]!==0&&(K=1),this[u+$]=(s/C>>0)-K&255;return u+h},a.prototype.writeInt8=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},a.prototype.writeInt16LE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeInt16BE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeInt32LE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},a.prototype.writeInt32BE=function(s,u,h){return s=+s,u=u>>>0,h||T(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},a.prototype.writeBigInt64LE=Ve(function(s,u=0){return U(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(s,u=0){return q(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(s,u,h,B,$,C){if(h+B>s.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function me(s,u,h,B,$){return u=+u,h=h>>>0,$||Q(s,u,h,4),r.write(s,u,h,B,23,4),h+4}a.prototype.writeFloatLE=function(s,u,h){return me(this,s,u,!0,h)},a.prototype.writeFloatBE=function(s,u,h){return me(this,s,u,!1,h)};function ye(s,u,h,B,$){return u=+u,h=h>>>0,$||Q(s,u,h,8),r.write(s,u,h,B,52,8),h+8}a.prototype.writeDoubleLE=function(s,u,h){return ye(this,s,u,!0,h)},a.prototype.writeDoubleBE=function(s,u,h){return ye(this,s,u,!1,h)},a.prototype.copy=function(s,u,h,B){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(h||(h=0),!B&&B!==0&&(B=this.length),u>=s.length&&(u=s.length),u||(u=0),B>0&&B<h&&(B=h),B===h||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),s.length-u<B-h&&(B=s.length-u+h);let $=B-h;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,B):Uint8Array.prototype.set.call(s,this.subarray(h,B),u),$},a.prototype.fill=function(s,u,h,B){if(typeof s=="string"){if(typeof u=="string"?(B=u,u=0,h=this.length):typeof h=="string"&&(B=h,h=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!a.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(s.length===1){let C=s.charCodeAt(0);(B==="utf8"&&C<128||B==="latin1")&&(s=C)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,s||(s=0);let $;if(typeof s=="number")for($=u;$<h;++$)this[$]=s;else{let C=a.isBuffer(s)?s:a.from(s,B),K=C.length;if(K===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for($=0;$<h-u;++$)this[$+u]=C[$%K]}return this};var O={};function L(s,u,h){O[s]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(s,u){return`The "${s}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(s,u,h){let B=`The value of "${s}" is out of range.`,$=h;return Number.isInteger(h)&&Math.abs(h)>2**32?$=D(String(h)):typeof h=="bigint"&&($=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&($=D($)),$+="n"),B+=` It must be ${u}. Received ${$}`,B},RangeError);function D(s){let u="",h=s.length,B=s[0]==="-"?1:0;for(;h>=B+4;h-=3)u=`_${s.slice(h-3,h)}${u}`;return`${s.slice(0,h)}${u}`}function ne(s,u,h){b(u,"offset"),(s[u]===void 0||s[u+h]===void 0)&&_(u,s.length-(h+1))}function te(s,u,h,B,$,C){if(s>h||s<u){let K=typeof u=="bigint"?"n":"",Be;throw C>3?u===0||u===BigInt(0)?Be=`>= 0${K} and < 2${K} ** ${(C+1)*8}${K}`:Be=`>= -(2${K} ** ${(C+1)*8-1}${K}) and < 2 ** ${(C+1)*8-1}${K}`:Be=`>= ${u}${K} and <= ${h}${K}`,new O.ERR_OUT_OF_RANGE("value",Be,s)}ne(B,$,C)}function b(s,u){if(typeof s!="number")throw new O.ERR_INVALID_ARG_TYPE(u,"number",s)}function _(s,u,h){throw Math.floor(s)!==s?(b(s,h),new O.ERR_OUT_OF_RANGE(h||"offset","an integer",s)):u<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,s)}var W=/[^+/0-9A-Za-z-_]/g;function Z(s){if(s=s.split("=")[0],s=s.trim().replace(W,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function be(s,u){u=u||1/0;let h,B=s.length,$=null,C=[];for(let K=0;K<B;++K){if(h=s.charCodeAt(K),h>55295&&h<57344){if(!$){if(h>56319){(u-=3)>-1&&C.push(239,191,189);continue}else if(K+1===B){(u-=3)>-1&&C.push(239,191,189);continue}$=h;continue}if(h<56320){(u-=3)>-1&&C.push(239,191,189),$=h;continue}h=($-55296<<10|h-56320)+65536}else $&&(u-=3)>-1&&C.push(239,191,189);if($=null,h<128){if((u-=1)<0)break;C.push(h)}else if(h<2048){if((u-=2)<0)break;C.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;C.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;C.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return C}function he(s){let u=[];for(let h=0;h<s.length;++h)u.push(s.charCodeAt(h)&255);return u}function N(s,u){let h,B,$,C=[];for(let K=0;K<s.length&&!((u-=2)<0);++K)h=s.charCodeAt(K),B=h>>8,$=h%256,C.push($),C.push(B);return C}function $e(s){return t.toByteArray(Z(s))}function Je(s,u,h,B){let $;for($=0;$<B&&!($+h>=u.length||$>=s.length);++$)u[$+h]=s[$];return $}function Fe(s,u){return s instanceof u||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===u.name}function nt(s){return s!==s}var ct=function(){let s="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let B=h*16;for(let $=0;$<16;++$)u[B+$]=s[h]+s[$]}return u}();function Ve(s){return typeof BigInt>"u"?kt:s}function kt(){throw new Error("BigInt not supported")}}),ae,ue,ut,re=si(()=>{ae=Ye(Vt(),1),ue={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},ut=globalThis}),zt=se((e,t)=>{re();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(S,P,M){return Function.prototype.apply.call(S,P,M)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:i=function(S){return Object.getOwnPropertyNames(S)};function o(S){console&&console.warn&&console.warn(S)}var l=Number.isNaN||function(S){return S!==S};function a(){a.init.call(this)}t.exports=a,t.exports.once=E,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var f=10;function d(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");f=S}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function p(S){return S._maxListeners===void 0?a.defaultMaxListeners:S._maxListeners}a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(S){for(var P=[],M=1;M<arguments.length;M++)P.push(arguments[M]);var z=S==="error",x=this._events;if(x!==void 0)z=z&&x.error===void 0;else if(!z)return!1;if(z){var R;if(P.length>0&&(R=P[0]),R instanceof Error)throw R;var F=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw F.context=R,F}var G=x[S];if(G===void 0)return!1;if(typeof G=="function")n(G,this,P);else for(var ee=G.length,oe=g(G,ee),M=0;M<ee;++M)n(oe[M],this,P);return!0};function m(S,P,M,z){var x,R,F;if(d(M),R=S._events,R===void 0?(R=S._events=Object.create(null),S._eventsCount=0):(R.newListener!==void 0&&(S.emit("newListener",P,M.listener?M.listener:M),R=S._events),F=R[P]),F===void 0)F=R[P]=M,++S._eventsCount;else if(typeof F=="function"?F=R[P]=z?[M,F]:[F,M]:z?F.unshift(M):F.push(M),x=p(S),x>0&&F.length>x&&!F.warned){F.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=S,G.type=P,G.count=F.length,o(G)}return S}a.prototype.addListener=function(S,P){return m(this,S,P,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(S,P){return m(this,S,P,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(S,P,M){var z={fired:!1,wrapFn:void 0,target:S,type:P,listener:M},x=v.bind(z);return x.listener=M,z.wrapFn=x,x}a.prototype.once=function(S,P){return d(P),this.on(S,k(this,S,P)),this},a.prototype.prependOnceListener=function(S,P){return d(P),this.prependListener(S,k(this,S,P)),this},a.prototype.removeListener=function(S,P){var M,z,x,R,F;if(d(P),z=this._events,z===void 0)return this;if(M=z[S],M===void 0)return this;if(M===P||M.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete z[S],z.removeListener&&this.emit("removeListener",S,M.listener||P));else if(typeof M!="function"){for(x=-1,R=M.length-1;R>=0;R--)if(M[R]===P||M[R].listener===P){F=M[R].listener,x=R;break}if(x<0)return this;x===0?M.shift():A(M,x),M.length===1&&(z[S]=M[0]),z.removeListener!==void 0&&this.emit("removeListener",S,F||P)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(S){var P,M,z;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[S]),this;if(arguments.length===0){var x=Object.keys(M),R;for(z=0;z<x.length;++z)R=x[z],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=M[S],typeof P=="function")this.removeListener(S,P);else if(P!==void 0)for(z=P.length-1;z>=0;z--)this.removeListener(S,P[z]);return this};function c(S,P,M){var z=S._events;if(z===void 0)return[];var x=z[P];return x===void 0?[]:typeof x=="function"?M?[x.listener||x]:[x]:M?w(x):g(x,x.length)}a.prototype.listeners=function(S){return c(this,S,!0)},a.prototype.rawListeners=function(S){return c(this,S,!1)},a.listenerCount=function(S,P){return typeof S.listenerCount=="function"?S.listenerCount(P):y.call(S,P)},a.prototype.listenerCount=y;function y(S){var P=this._events;if(P!==void 0){var M=P[S];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function g(S,P){for(var M=new Array(P),z=0;z<P;++z)M[z]=S[z];return M}function A(S,P){for(;P+1<S.length;P++)S[P]=S[P+1];S.pop()}function w(S){for(var P=new Array(S.length),M=0;M<P.length;++M)P[M]=S[M].listener||S[M];return P}function E(S,P){return new Promise(function(M,z){function x(F){S.removeListener(P,R),z(F)}function R(){typeof S.removeListener=="function"&&S.removeListener("error",x),M([].slice.call(arguments))}j(S,P,R,{once:!0}),P!=="error"&&I(S,x,{once:!0})})}function I(S,P,M){typeof S.on=="function"&&j(S,"error",P,M)}function j(S,P,M,z){if(typeof S.on=="function")z.once?S.once(P,M):S.on(P,M);else if(typeof S.addEventListener=="function")S.addEventListener(P,function x(R){z.once&&S.removeEventListener(P,x),M(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}}),tn=se((e,t)=>{re(),t.exports=zt().EventEmitter}),rn=se(()=>{re()}),ci=se((e,t)=>{re();function r(c,y){var g=Object.keys(c);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(c);y&&(A=A.filter(function(w){return Object.getOwnPropertyDescriptor(c,w).enumerable})),g.push.apply(g,A)}return g}function n(c){for(var y=1;y<arguments.length;y++){var g=arguments[y]!=null?arguments[y]:{};y%2?r(Object(g),!0).forEach(function(A){i(c,A,g[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach(function(A){Object.defineProperty(c,A,Object.getOwnPropertyDescriptor(g,A))})}return c}function i(c,y,g){return y in c?Object.defineProperty(c,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[y]=g,c}function o(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function l(c,y){for(var g=0;g<y.length;g++){var A=y[g];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(c,A.key,A)}}function a(c,y,g){return y&&l(c.prototype,y),g&&l(c,g),c}var f=Vt(),d=f.Buffer,p=rn(),m=p.inspect,v=m&&m.custom||"inspect";function k(c,y,g){d.prototype.copy.call(c,y,g)}t.exports=function(){function c(){o(this,c),this.head=null,this.tail=null,this.length=0}return a(c,[{key:"push",value:function(y){var g={data:y,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(y){var g={data:y,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var g=this.head,A=""+g.data;g=g.next;)A+=y+g.data;return A}},{key:"concat",value:function(y){if(this.length===0)return d.alloc(0);for(var g=d.allocUnsafe(y>>>0),A=this.head,w=0;A;)k(A.data,g,w),w+=A.data.length,A=A.next;return g}},{key:"consume",value:function(y,g){var A;return y<this.head.data.length?(A=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?A=this.shift():A=g?this._getString(y):this._getBuffer(y),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var g=this.head,A=1,w=g.data;for(y-=w.length;g=g.next;){var E=g.data,I=y>E.length?E.length:y;if(I===E.length?w+=E:w+=E.slice(0,y),y-=I,y===0){I===E.length?(++A,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=E.slice(I));break}++A}return this.length-=A,w}},{key:"_getBuffer",value:function(y){var g=d.allocUnsafe(y),A=this.head,w=1;for(A.data.copy(g),y-=A.data.length;A=A.next;){var E=A.data,I=y>E.length?E.length:y;if(E.copy(g,g.length-y,0,I),y-=I,y===0){I===E.length?(++w,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=E.slice(I));break}++w}return this.length-=w,g}},{key:v,value:function(y,g){return m(this,n({},g,{depth:0,customInspect:!1}))}}]),c}()}),nn=se((e,t)=>{re();function r(f,d){var p=this,m=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return m||v?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ue.nextTick(l,this,f)):ue.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(k){!d&&k?p._writableState?p._writableState.errorEmitted?ue.nextTick(i,p):(p._writableState.errorEmitted=!0,ue.nextTick(n,p,k)):ue.nextTick(n,p,k):d?(ue.nextTick(i,p),d(k)):ue.nextTick(i,p)}),this)}function n(f,d){l(f,d),i(f)}function i(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function a(f,d){var p=f._readableState,m=f._writableState;p&&p.autoDestroy||m&&m.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:o,errorOrDestroy:a}}),St=se((e,t)=>{re();function r(d,p){d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p}var n={};function i(d,p,m){m||(m=Error);function v(c,y,g){return typeof p=="string"?p:p(c,y,g)}var k=function(c){r(y,c);function y(g,A,w){return c.call(this,v(g,A,w))||this}return y}(m);k.prototype.name=m.name,k.prototype.code=d,n[d]=k}function o(d,p){if(Array.isArray(d)){var m=d.length;return d=d.map(function(v){return String(v)}),m>2?"one of ".concat(p," ").concat(d.slice(0,m-1).join(", "),", or ")+d[m-1]:m===2?"one of ".concat(p," ").concat(d[0]," or ").concat(d[1]):"of ".concat(p," ").concat(d[0])}else return"of ".concat(p," ").concat(String(d))}function l(d,p,m){return d.substr(!m||m<0?0:+m,p.length)===p}function a(d,p,m){return(m===void 0||m>d.length)&&(m=d.length),d.substring(m-p.length,m)===p}function f(d,p,m){return typeof m!="number"&&(m=0),m+p.length>d.length?!1:d.indexOf(p,m)!==-1}i("ERR_INVALID_OPT_VALUE",function(d,p){return'The value "'+p+'" is invalid for option "'+d+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(d,p,m){var v;typeof p=="string"&&l(p,"not ")?(v="must not be",p=p.replace(/^not /,"")):v="must be";var k;if(a(d," argument"))k="The ".concat(d," ").concat(v," ").concat(o(p,"type"));else{var c=f(d,".")?"property":"argument";k='The "'.concat(d,'" ').concat(c," ").concat(v," ").concat(o(p,"type"))}return k+=". Received type ".concat(typeof m),k},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),on=se((e,t)=>{re();var r=St().codes.ERR_INVALID_OPT_VALUE;function n(o,l,a){return o.highWaterMark!=null?o.highWaterMark:l?o[a]:null}function i(o,l,a,f){var d=n(l,f,a);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var p=f?a:"highWaterMark";throw new r(p,d)}return Math.floor(d)}return o.objectMode?16:16*1024}t.exports={getHighWaterMark:i}}),ft=se((e,t)=>{re(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),hi=se((e,t)=>{re(),t.exports=r;function r(i,o){if(n("noDeprecation"))return i;var l=!1;function a(){if(!l){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return i.apply(this,arguments)}return a}function n(i){try{if(!ut.localStorage)return!1}catch{return!1}var o=ut.localStorage[i];return o==null?!1:String(o).toLowerCase()==="true"}}),an=se((e,t)=>{re(),t.exports=x;function r(O){var L=this;this.next=null,this.entry=null,this.finish=function(){ye(L,O)}}var n;x.WritableState=M;var i={deprecate:hi()},o=tn(),l=Vt().Buffer,a=ut.Uint8Array||function(){};function f(O){return l.from(O)}function d(O){return l.isBuffer(O)||O instanceof a}var p=nn(),m=on(),v=m.getHighWaterMark,k=St().codes,c=k.ERR_INVALID_ARG_TYPE,y=k.ERR_METHOD_NOT_IMPLEMENTED,g=k.ERR_MULTIPLE_CALLBACK,A=k.ERR_STREAM_CANNOT_PIPE,w=k.ERR_STREAM_DESTROYED,E=k.ERR_STREAM_NULL_VALUES,I=k.ERR_STREAM_WRITE_AFTER_END,j=k.ERR_UNKNOWN_ENCODING,S=p.errorOrDestroy;ft()(x,o);function P(){}function M(O,L,D){n=n||Et(),O=O||{},typeof D!="boolean"&&(D=L instanceof n),this.objectMode=!!O.objectMode,D&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=v(this,O,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=O.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){ve(L,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var O=this.bufferedRequest,L=[];O;)L.push(O),O=O.next;return L},function(){try{Object.defineProperty(M.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(O){return z.call(this,O)?!0:this!==x?!1:O&&O._writableState instanceof M}})):z=function(O){return O instanceof this};function x(O){n=n||Et();var L=this instanceof n;if(!L&&!z.call(x,this))return new x(O);this._writableState=new M(O,this,L),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),o.call(this)}x.prototype.pipe=function(){S(this,new A)};function R(O,L){var D=new I;S(O,D),ue.nextTick(L,D)}function F(O,L,D,ne){var te;return D===null?te=new E:typeof D!="string"&&!L.objectMode&&(te=new c("chunk",["string","Buffer"],D)),te?(S(O,te),ue.nextTick(ne,te),!1):!0}x.prototype.write=function(O,L,D){var ne=this._writableState,te=!1,b=!ne.objectMode&&d(O);return b&&!l.isBuffer(O)&&(O=f(O)),typeof L=="function"&&(D=L,L=null),b?L="buffer":L||(L=ne.defaultEncoding),typeof D!="function"&&(D=P),ne.ending?R(this,D):(b||F(this,ne,O,D))&&(ne.pendingcb++,te=ee(this,ne,b,O,L,D)),te},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&ce(this,O))},x.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new j(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(O,L,D){return!O.objectMode&&O.decodeStrings!==!1&&typeof L=="string"&&(L=l.from(L,D)),L}Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee(O,L,D,ne,te,b){if(!D){var _=G(L,ne,te);ne!==_&&(D=!0,te="buffer",ne=_)}var W=L.objectMode?1:ne.length;L.length+=W;var Z=L.length<L.highWaterMark;if(Z||(L.needDrain=!0),L.writing||L.corked){var be=L.lastBufferedRequest;L.lastBufferedRequest={chunk:ne,encoding:te,isBuf:D,callback:b,next:null},be?be.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else oe(O,L,!1,W,ne,te,b);return Z}function oe(O,L,D,ne,te,b,_){L.writelen=ne,L.writecb=_,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new w("write")):D?O._writev(te,L.onwrite):O._write(te,b,L.onwrite),L.sync=!1}function de(O,L,D,ne,te){--L.pendingcb,D?(ue.nextTick(te,ne),ue.nextTick(Q,O,L),O._writableState.errorEmitted=!0,S(O,ne)):(te(ne),O._writableState.errorEmitted=!0,S(O,ne),Q(O,L))}function pe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function ve(O,L){var D=O._writableState,ne=D.sync,te=D.writecb;if(typeof te!="function")throw new g;if(pe(D),L)de(O,D,ne,L,te);else{var b=T(D)||O.destroyed;!b&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&ce(O,D),ne?ue.nextTick(we,O,D,b,te):we(O,D,b,te)}}function we(O,L,D,ne){D||ge(O,L),L.pendingcb--,ne(),Q(O,L)}function ge(O,L){L.length===0&&L.needDrain&&(L.needDrain=!1,O.emit("drain"))}function ce(O,L){L.bufferProcessing=!0;var D=L.bufferedRequest;if(O._writev&&D&&D.next){var ne=L.bufferedRequestCount,te=new Array(ne),b=L.corkedRequestsFree;b.entry=D;for(var _=0,W=!0;D;)te[_]=D,D.isBuf||(W=!1),D=D.next,_+=1;te.allBuffers=W,oe(O,L,!0,L.length,te,"",b.finish),L.pendingcb++,L.lastBufferedRequest=null,b.next?(L.corkedRequestsFree=b.next,b.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;D;){var Z=D.chunk,be=D.encoding,he=D.callback,N=L.objectMode?1:Z.length;if(oe(O,L,!1,N,Z,be,he),D=D.next,L.bufferedRequestCount--,L.writing)break}D===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=D,L.bufferProcessing=!1}x.prototype._write=function(O,L,D){D(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(O,L,D){var ne=this._writableState;return typeof O=="function"?(D=O,O=null,L=null):typeof L=="function"&&(D=L,L=null),O!=null&&this.write(O,L),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||me(this,ne,D),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function U(O,L){O._final(function(D){L.pendingcb--,D&&S(O,D),L.prefinished=!0,O.emit("prefinish"),Q(O,L)})}function q(O,L){!L.prefinished&&!L.finalCalled&&(typeof O._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,ue.nextTick(U,O,L)):(L.prefinished=!0,O.emit("prefinish")))}function Q(O,L){var D=T(L);if(D&&(q(O,L),L.pendingcb===0&&(L.finished=!0,O.emit("finish"),L.autoDestroy))){var ne=O._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&O.destroy()}return D}function me(O,L,D){L.ending=!0,Q(O,L),D&&(L.finished?ue.nextTick(D):O.once("finish",D)),L.ended=!0,O.writable=!1}function ye(O,L,D){var ne=O.entry;for(O.entry=null;ne;){var te=ne.callback;L.pendingcb--,te(D),ne=ne.next}L.corkedRequestsFree.next=O}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(O){!this._writableState||(this._writableState.destroyed=O)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(O,L){L(O)}}),Et=se((e,t)=>{re();var r=Object.keys||function(m){var v=[];for(var k in m)v.push(k);return v};t.exports=f;var n=sn(),i=an();for(ft()(f,n),o=r(i.prototype),a=0;a<o.length;a++)l=o[a],f.prototype[l]||(f.prototype[l]=i.prototype[l]);var o,l,a;function f(m){if(!(this instanceof f))return new f(m);n.call(this,m),i.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||ue.nextTick(p,this)}function p(m){m.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}),di=se((e,t)=>{re();var r=Vt(),n=r.Buffer;function i(l,a){for(var f in l)a[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(l,a,f){return n(l,a,f)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(l,a,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,a,f)},o.alloc=function(l,a,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return a!==void 0?typeof f=="string"?d.fill(a,f):d.fill(a):d.fill(0),d},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),Tr=se(e=>{re();var t=di().Buffer,r=t.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var E;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(E)return;w=(""+w).toLowerCase(),E=!0}}function i(w){var E=n(w);if(typeof E!="string"&&(t.isEncoding===r||!r(w)))throw new Error("Unknown encoding: "+w);return E||w}e.StringDecoder=o;function o(w){this.encoding=i(w);var E;switch(this.encoding){case"utf16le":this.text=v,this.end=k,E=4;break;case"utf8":this.fillLast=d,E=4;break;case"base64":this.text=c,this.end=y,E=3;break;default:this.write=g,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(E)}o.prototype.write=function(w){if(w.length===0)return"";var E,I;if(this.lastNeed){if(E=this.fillLast(w),E===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<w.length?E?E+this.text(w,I):this.text(w,I):E||""},o.prototype.end=m,o.prototype.text=p,o.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function l(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function a(w,E,I){var j=E.length-1;if(j<I)return 0;var S=l(E[j]);return S>=0?(S>0&&(w.lastNeed=S-1),S):--j<I||S===-2?0:(S=l(E[j]),S>=0?(S>0&&(w.lastNeed=S-2),S):--j<I||S===-2?0:(S=l(E[j]),S>=0?(S>0&&(S===2?S=0:w.lastNeed=S-3),S):0))}function f(w,E,I){if((E[0]&192)!==128)return w.lastNeed=0,"�";if(w.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return w.lastNeed=1,"�";if(w.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return w.lastNeed=2,"�"}}function d(w){var E=this.lastTotal-this.lastNeed,I=f(this,w);if(I!==void 0)return I;if(this.lastNeed<=w.length)return w.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,E,0,w.length),this.lastNeed-=w.length}function p(w,E){var I=a(this,w,E);if(!this.lastNeed)return w.toString("utf8",E);this.lastTotal=I;var j=w.length-(I-this.lastNeed);return w.copy(this.lastChar,0,j),w.toString("utf8",E,j)}function m(w){var E=w&&w.length?this.write(w):"";return this.lastNeed?E+"�":E}function v(w,E){if((w.length-E)%2===0){var I=w.toString("utf16le",E);if(I){var j=I.charCodeAt(I.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",E,w.length-1)}function k(w){var E=w&&w.length?this.write(w):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,I)}return E}function c(w,E){var I=(w.length-E)%3;return I===0?w.toString("base64",E):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",E,w.length-I))}function y(w){var E=w&&w.length?this.write(w):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function g(w){return w.toString(this.encoding)}function A(w){return w&&w.length?this.write(w):""}}),yr=se((e,t)=>{re();var r=St().codes.ERR_STREAM_PREMATURE_CLOSE;function n(a){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,p=new Array(d),m=0;m<d;m++)p[m]=arguments[m];a.apply(this,p)}}}function i(){}function o(a){return a.setHeader&&typeof a.abort=="function"}function l(a,f,d){if(typeof f=="function")return l(a,null,f);f||(f={}),d=n(d||i);var p=f.readable||f.readable!==!1&&a.readable,m=f.writable||f.writable!==!1&&a.writable,v=function(){a.writable||c()},k=a._writableState&&a._writableState.finished,c=function(){m=!1,k=!0,p||d.call(a)},y=a._readableState&&a._readableState.endEmitted,g=function(){p=!1,y=!0,m||d.call(a)},A=function(I){d.call(a,I)},w=function(){var I;if(p&&!y)return(!a._readableState||!a._readableState.ended)&&(I=new r),d.call(a,I);if(m&&!k)return(!a._writableState||!a._writableState.ended)&&(I=new r),d.call(a,I)},E=function(){a.req.on("finish",c)};return o(a)?(a.on("complete",c),a.on("abort",w),a.req?E():a.on("request",E)):m&&!a._writableState&&(a.on("end",v),a.on("close",v)),a.on("end",g),a.on("finish",c),f.error!==!1&&a.on("error",A),a.on("close",w),function(){a.removeListener("complete",c),a.removeListener("abort",w),a.removeListener("request",E),a.req&&a.req.removeListener("finish",c),a.removeListener("end",v),a.removeListener("close",v),a.removeListener("finish",c),a.removeListener("end",g),a.removeListener("error",A),a.removeListener("close",w)}}t.exports=l}),pi=se((e,t)=>{re();var r;function n(E,I,j){return I in E?Object.defineProperty(E,I,{value:j,enumerable:!0,configurable:!0,writable:!0}):E[I]=j,E}var i=yr(),o=Symbol("lastResolve"),l=Symbol("lastReject"),a=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),m=Symbol("stream");function v(E,I){return{value:E,done:I}}function k(E){var I=E[o];if(I!==null){var j=E[m].read();j!==null&&(E[d]=null,E[o]=null,E[l]=null,I(v(j,!1)))}}function c(E){ue.nextTick(k,E)}function y(E,I){return function(j,S){E.then(function(){if(I[f]){j(v(void 0,!0));return}I[p](j,S)},S)}}var g=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((r={get stream(){return this[m]},next:function(){var E=this,I=this[a];if(I!==null)return Promise.reject(I);if(this[f])return Promise.resolve(v(void 0,!0));if(this[m].destroyed)return new Promise(function(M,z){ue.nextTick(function(){E[a]?z(E[a]):M(v(void 0,!0))})});var j=this[d],S;if(j)S=new Promise(y(j,this));else{var P=this[m].read();if(P!==null)return Promise.resolve(v(P,!1));S=new Promise(this[p])}return this[d]=S,S}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var E=this;return new Promise(function(I,j){E[m].destroy(null,function(S){if(S){j(S);return}I(v(void 0,!0))})})}),r),g),w=function(E){var I,j=Object.create(A,(I={},n(I,m,{value:E,writable:!0}),n(I,o,{value:null,writable:!0}),n(I,l,{value:null,writable:!0}),n(I,a,{value:null,writable:!0}),n(I,f,{value:E._readableState.endEmitted,writable:!0}),n(I,p,{value:function(S,P){var M=j[m].read();M?(j[d]=null,j[o]=null,j[l]=null,S(v(M,!1))):(j[o]=S,j[l]=P)},writable:!0}),I));return j[d]=null,i(E,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=j[l];P!==null&&(j[d]=null,j[o]=null,j[l]=null,P(S)),j[a]=S;return}var M=j[o];M!==null&&(j[d]=null,j[o]=null,j[l]=null,M(v(void 0,!0))),j[f]=!0}),E.on("readable",c.bind(null,j)),j};t.exports=w}),gi=se((e,t)=>{re(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),sn=se((e,t)=>{re(),t.exports=R;var r;R.ReadableState=x,zt().EventEmitter;var n=function(b,_){return b.listeners(_).length},i=tn(),o=Vt().Buffer,l=ut.Uint8Array||function(){};function a(b){return o.from(b)}function f(b){return o.isBuffer(b)||b instanceof l}var d=rn(),p;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var m=ci(),v=nn(),k=on(),c=k.getHighWaterMark,y=St().codes,g=y.ERR_INVALID_ARG_TYPE,A=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,E=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,I,j,S;ft()(R,i);var P=v.errorOrDestroy,M=["error","close","destroy","pause","resume"];function z(b,_,W){if(typeof b.prependListener=="function")return b.prependListener(_,W);!b._events||!b._events[_]?b.on(_,W):Array.isArray(b._events[_])?b._events[_].unshift(W):b._events[_]=[W,b._events[_]]}function x(b,_,W){r=r||Et(),b=b||{},typeof W!="boolean"&&(W=_ instanceof r),this.objectMode=!!b.objectMode,W&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=c(this,b,"readableHighWaterMark",W),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(I||(I=Tr().StringDecoder),this.decoder=new I(b.encoding),this.encoding=b.encoding)}function R(b){if(r=r||Et(),!(this instanceof R))return new R(b);var _=this instanceof r;this._readableState=new x(b,this,_),this.readable=!0,b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy)),i.call(this)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(b){!this._readableState||(this._readableState.destroyed=b)}}),R.prototype.destroy=v.destroy,R.prototype._undestroy=v.undestroy,R.prototype._destroy=function(b,_){_(b)},R.prototype.push=function(b,_){var W=this._readableState,Z;return W.objectMode?Z=!0:typeof b=="string"&&(_=_||W.defaultEncoding,_!==W.encoding&&(b=o.from(b,_),_=""),Z=!0),F(this,b,_,!1,Z)},R.prototype.unshift=function(b){return F(this,b,null,!0,!1)};function F(b,_,W,Z,be){p("readableAddChunk",_);var he=b._readableState;if(_===null)he.reading=!1,ve(b,he);else{var N;if(be||(N=ee(he,_)),N)P(b,N);else if(he.objectMode||_&&_.length>0)if(typeof _!="string"&&!he.objectMode&&Object.getPrototypeOf(_)!==o.prototype&&(_=a(_)),Z)he.endEmitted?P(b,new E):G(b,he,_,!0);else if(he.ended)P(b,new A);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!W?(_=he.decoder.write(_),he.objectMode||_.length!==0?G(b,he,_,!1):ce(b,he)):G(b,he,_,!1)}else Z||(he.reading=!1,ce(b,he))}return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function G(b,_,W,Z){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,b.emit("data",W)):(_.length+=_.objectMode?1:W.length,Z?_.buffer.unshift(W):_.buffer.push(W),_.needReadable&&we(b)),ce(b,_)}function ee(b,_){var W;return!f(_)&&typeof _!="string"&&_!==void 0&&!b.objectMode&&(W=new g("chunk",["string","Buffer","Uint8Array"],_)),W}R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(b){I||(I=Tr().StringDecoder);var _=new I(b);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,Z="";W!==null;)Z+=_.write(W.data),W=W.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var oe=1073741824;function de(b){return b>=oe?b=oe:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++),b}function pe(b,_){return b<=0||_.length===0&&_.ended?0:_.objectMode?1:b!==b?_.flowing&&_.length?_.buffer.head.data.length:_.length:(b>_.highWaterMark&&(_.highWaterMark=de(b)),b<=_.length?b:_.ended?_.length:(_.needReadable=!0,0))}R.prototype.read=function(b){p("read",b),b=parseInt(b,10);var _=this._readableState,W=b;if(b!==0&&(_.emittedReadable=!1),b===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return p("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?D(this):we(this),null;if(b=pe(b,_),b===0&&_.ended)return _.length===0&&D(this),null;var Z=_.needReadable;p("need readable",Z),(_.length===0||_.length-b<_.highWaterMark)&&(Z=!0,p("length less than watermark",Z)),_.ended||_.reading?(Z=!1,p("reading or ended",Z)):Z&&(p("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(b=pe(W,_)));var be;return b>0?be=L(b,_):be=null,be===null?(_.needReadable=_.length<=_.highWaterMark,b=0):(_.length-=b,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),W!==b&&_.ended&&D(this)),be!==null&&this.emit("data",be),be};function ve(b,_){if(p("onEofChunk"),!_.ended){if(_.decoder){var W=_.decoder.end();W&&W.length&&(_.buffer.push(W),_.length+=_.objectMode?1:W.length)}_.ended=!0,_.sync?we(b):(_.needReadable=!1,_.emittedReadable||(_.emittedReadable=!0,ge(b)))}}function we(b){var _=b._readableState;p("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(p("emitReadable",_.flowing),_.emittedReadable=!0,ue.nextTick(ge,b))}function ge(b){var _=b._readableState;p("emitReadable_",_.destroyed,_.length,_.ended),!_.destroyed&&(_.length||_.ended)&&(b.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,O(b)}function ce(b,_){_.readingMore||(_.readingMore=!0,ue.nextTick(T,b,_))}function T(b,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var W=_.length;if(p("maybeReadMore read 0"),b.read(0),W===_.length)break}_.readingMore=!1}R.prototype._read=function(b){P(this,new w("_read()"))},R.prototype.pipe=function(b,_){var W=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=b;break;case 1:Z.pipes=[Z.pipes,b];break;default:Z.pipes.push(b);break}Z.pipesCount+=1,p("pipe count=%d opts=%j",Z.pipesCount,_);var be=(!_||_.end!==!1)&&b!==ue.stdout&&b!==ue.stderr,he=be?$e:u;Z.endEmitted?ue.nextTick(he):W.once("end",he),b.on("unpipe",N);function N(h,B){p("onunpipe"),h===W&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,nt())}function $e(){p("onend"),b.end()}var Je=U(W);b.on("drain",Je);var Fe=!1;function nt(){p("cleanup"),b.removeListener("close",kt),b.removeListener("finish",s),b.removeListener("drain",Je),b.removeListener("error",Ve),b.removeListener("unpipe",N),W.removeListener("end",$e),W.removeListener("end",u),W.removeListener("data",ct),Fe=!0,Z.awaitDrain&&(!b._writableState||b._writableState.needDrain)&&Je()}W.on("data",ct);function ct(h){p("ondata");var B=b.write(h);p("dest.write",B),B===!1&&((Z.pipesCount===1&&Z.pipes===b||Z.pipesCount>1&&te(Z.pipes,b)!==-1)&&!Fe&&(p("false write response, pause",Z.awaitDrain),Z.awaitDrain++),W.pause())}function Ve(h){p("onerror",h),u(),b.removeListener("error",Ve),n(b,"error")===0&&P(b,h)}z(b,"error",Ve);function kt(){b.removeListener("finish",s),u()}b.once("close",kt);function s(){p("onfinish"),b.removeListener("close",kt),u()}b.once("finish",s);function u(){p("unpipe"),W.unpipe(b)}return b.emit("pipe",W),Z.flowing||(p("pipe resume"),W.resume()),b};function U(b){return function(){var _=b._readableState;p("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n(b,"data")&&(_.flowing=!0,O(b))}}R.prototype.unpipe=function(b){var _=this._readableState,W={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return b&&b!==_.pipes?this:(b||(b=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,b&&b.emit("unpipe",this,W),this);if(!b){var Z=_.pipes,be=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var he=0;he<be;he++)Z[he].emit("unpipe",this,{hasUnpiped:!1});return this}var N=te(_.pipes,b);return N===-1?this:(_.pipes.splice(N,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),b.emit("unpipe",this,W),this)},R.prototype.on=function(b,_){var W=i.prototype.on.call(this,b,_),Z=this._readableState;return b==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):b==="readable"&&!Z.endEmitted&&!Z.readableListening&&(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,p("on readable",Z.length,Z.reading),Z.length?we(this):Z.reading||ue.nextTick(Q,this)),W},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(b,_){var W=i.prototype.removeListener.call(this,b,_);return b==="readable"&&ue.nextTick(q,this),W},R.prototype.removeAllListeners=function(b){var _=i.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&ue.nextTick(q,this),_};function q(b){var _=b._readableState;_.readableListening=b.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:b.listenerCount("data")>0&&b.resume()}function Q(b){p("readable nexttick read 0"),b.read(0)}R.prototype.resume=function(){var b=this._readableState;return b.flowing||(p("resume"),b.flowing=!b.readableListening,me(this,b)),b.paused=!1,this};function me(b,_){_.resumeScheduled||(_.resumeScheduled=!0,ue.nextTick(ye,b,_))}function ye(b,_){p("resume",_.reading),_.reading||b.read(0),_.resumeScheduled=!1,b.emit("resume"),O(b),_.flowing&&!_.reading&&b.read(0)}R.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(b){var _=b._readableState;for(p("flow",_.flowing);_.flowing&&b.read()!==null;);}R.prototype.wrap=function(b){var _=this,W=this._readableState,Z=!1;b.on("end",function(){if(p("wrapped end"),W.decoder&&!W.ended){var N=W.decoder.end();N&&N.length&&_.push(N)}_.push(null)}),b.on("data",function(N){if(p("wrapped data"),W.decoder&&(N=W.decoder.write(N)),!(W.objectMode&&N==null)&&!(!W.objectMode&&(!N||!N.length))){var $e=_.push(N);$e||(Z=!0,b.pause())}});for(var be in b)this[be]===void 0&&typeof b[be]=="function"&&(this[be]=function(N){return function(){return b[N].apply(b,arguments)}}(be));for(var he=0;he<M.length;he++)b.on(M[he],this.emit.bind(this,M[he]));return this._read=function(N){p("wrapped _read",N),Z&&(Z=!1,b.resume())},this},typeof Symbol=="function"&&(R.prototype[Symbol.asyncIterator]=function(){return j===void 0&&(j=pi()),j(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}}),R._fromList=L,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(b,_){if(_.length===0)return null;var W;return _.objectMode?W=_.buffer.shift():!b||b>=_.length?(_.decoder?W=_.buffer.join(""):_.buffer.length===1?W=_.buffer.first():W=_.buffer.concat(_.length),_.buffer.clear()):W=_.buffer.consume(b,_.decoder),W}function D(b){var _=b._readableState;p("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,ue.nextTick(ne,_,b))}function ne(b,_){if(p("endReadableNT",b.endEmitted,b.length),!b.endEmitted&&b.length===0&&(b.endEmitted=!0,_.readable=!1,_.emit("end"),b.autoDestroy)){var W=_._writableState;(!W||W.autoDestroy&&W.finished)&&_.destroy()}}typeof Symbol=="function"&&(R.from=function(b,_){return S===void 0&&(S=gi()),S(R,b,_)});function te(b,_){for(var W=0,Z=b.length;W<Z;W++)if(b[W]===_)return W;return-1}}),ln=se((e,t)=>{re(),t.exports=d;var r=St().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,a=Et();ft()(d,a);function f(v,k){var c=this._transformState;c.transforming=!1;var y=c.writecb;if(y===null)return this.emit("error",new i);c.writechunk=null,c.writecb=null,k!=null&&this.push(k),y(v);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function d(v){if(!(this instanceof d))return new d(v);a.call(this,v),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",p)}function p(){var v=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(k,c){m(v,k,c)}):m(this,null,null)}d.prototype.push=function(v,k){return this._transformState.needTransform=!1,a.prototype.push.call(this,v,k)},d.prototype._transform=function(v,k,c){c(new n("_transform()"))},d.prototype._write=function(v,k,c){var y=this._transformState;if(y.writecb=c,y.writechunk=v,y.writeencoding=k,!y.transforming){var g=this._readableState;(y.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},d.prototype._read=function(v){var k=this._transformState;k.writechunk!==null&&!k.transforming?(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform)):k.needTransform=!0},d.prototype._destroy=function(v,k){a.prototype._destroy.call(this,v,function(c){k(c)})};function m(v,k,c){if(k)return v.emit("error",k);if(c!=null&&v.push(c),v._writableState.length)throw new l;if(v._transformState.transforming)throw new o;return v.push(null)}}),yi=se((e,t)=>{re(),t.exports=n;var r=ln();ft()(n,r);function n(i){if(!(this instanceof n))return new n(i);r.call(this,i)}n.prototype._transform=function(i,o,l){l(null,i)}}),mi=se((e,t)=>{re();var r;function n(c){var y=!1;return function(){y||(y=!0,c.apply(void 0,arguments))}}var i=St().codes,o=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function a(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,y,g,A){A=n(A);var w=!1;c.on("close",function(){w=!0}),r===void 0&&(r=yr()),r(c,{readable:y,writable:g},function(I){if(I)return A(I);w=!0,A()});var E=!1;return function(I){if(!w&&!E){if(E=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();A(I||new l("pipe"))}}}function p(c){c()}function m(c,y){return c.pipe(y)}function v(c){return!c.length||typeof c[c.length-1]!="function"?a:c.pop()}function k(){for(var c=arguments.length,y=new Array(c),g=0;g<c;g++)y[g]=arguments[g];var A=v(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new o("streams");var w,E=y.map(function(I,j){var S=j<y.length-1,P=j>0;return d(I,S,P,function(M){w||(w=M),M&&E.forEach(p),!S&&(E.forEach(p),A(w))})});return y.reduce(m)}t.exports=k}),At=se((e,t)=>{re(),e=t.exports=sn(),e.Stream=e,e.Readable=e,e.Writable=an(),e.Duplex=Et(),e.Transform=ln(),e.PassThrough=yi(),e.finished=yr(),e.pipeline=mi()}),bi=se((e,t)=>{re(),t.exports=r;function r(n,i){if(n&&i)return r(n)(i);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){o[l]=n[l]}),o;function o(){for(var l=new Array(arguments.length),a=0;a<l.length;a++)l[a]=arguments[a];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(p){f[p]=d[p]}),f}}}),un=se((e,t)=>{re();var r=bi();t.exports=r(n),t.exports.strict=r(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})});function n(o){var l=function(){return l.called?l.value:(l.called=!0,l.value=o.apply(this,arguments))};return l.called=!1,l}function i(o){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=o.apply(this,arguments)},a=o.name||"Function wrapped with `once`";return l.onceError=a+" shouldn't be called more than once",l.called=!1,l}}),fn=se((e,t)=>{re();var r=un(),n=function(){},i=function(a){return a.setHeader&&typeof a.abort=="function"},o=function(a){return a.stdio&&Array.isArray(a.stdio)&&a.stdio.length===3},l=function(a,f,d){if(typeof f=="function")return l(a,null,f);f||(f={}),d=r(d||n);var p=a._writableState,m=a._readableState,v=f.readable||f.readable!==!1&&a.readable,k=f.writable||f.writable!==!1&&a.writable,c=!1,y=function(){a.writable||g()},g=function(){k=!1,v||d.call(a)},A=function(){v=!1,k||d.call(a)},w=function(P){d.call(a,P?new Error("exited with error code: "+P):null)},E=function(P){d.call(a,P)},I=function(){ue.nextTick(j)},j=function(){if(!c){if(v&&!(m&&m.ended&&!m.destroyed))return d.call(a,new Error("premature close"));if(k&&!(p&&p.ended&&!p.destroyed))return d.call(a,new Error("premature close"))}},S=function(){a.req.on("finish",g)};return i(a)?(a.on("complete",g),a.on("abort",I),a.req?S():a.on("request",S)):k&&!p&&(a.on("end",y),a.on("close",y)),o(a)&&a.on("exit",w),a.on("end",A),a.on("finish",g),f.error!==!1&&a.on("error",E),a.on("close",I),function(){c=!0,a.removeListener("complete",g),a.removeListener("abort",I),a.removeListener("request",S),a.req&&a.req.removeListener("finish",g),a.removeListener("end",y),a.removeListener("close",y),a.removeListener("finish",g),a.removeListener("exit",w),a.removeListener("end",A),a.removeListener("error",E),a.removeListener("close",I)}};t.exports=l}),wi=se(()=>{re()}),vi=se((e,t)=>{re();var r=un(),n=fn(),i=wi(),o=function(){},l=/^v?\.0/.test(ue.version),a=function(c){return typeof c=="function"},f=function(c){return!l||!i?!1:(c instanceof(i.ReadStream||o)||c instanceof(i.WriteStream||o))&&a(c.close)},d=function(c){return c.setHeader&&a(c.abort)},p=function(c,y,g,A){A=r(A);var w=!1;c.on("close",function(){w=!0}),n(c,{readable:y,writable:g},function(I){if(I)return A(I);w=!0,A()});var E=!1;return function(I){if(!w&&!E){if(E=!0,f(c))return c.close(o);if(d(c))return c.abort();if(a(c.destroy))return c.destroy();A(I||new Error("stream was destroyed"))}}},m=function(c){c()},v=function(c,y){return c.pipe(y)},k=function(){var c=Array.prototype.slice.call(arguments),y=a(c[c.length-1]||o)&&c.pop()||o;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var g,A=c.map(function(w,E){var I=E<c.length-1,j=E>0;return p(w,I,j,function(S){g||(g=S),S&&A.forEach(m),!I&&(A.forEach(m),y(g))})});return c.reduce(v)};t.exports=k}),_i=se((e,t)=>{re(),t.exports=r;function r(i){var o=i._readableState;return o?o.objectMode||typeof i._duplexState=="number"?i.read():i.read(n(o)):null}function n(i){return i.buffer.length?i.buffer.head?i.buffer.head.data.length:i.buffer[0].length:i.length}}),Ei=se((e,t)=>{re();var r=At(),n=fn(),i=ft(),o=_i(),l=ae.Buffer.from&&ae.Buffer.from!==Uint8Array.from?ae.Buffer.from([0]):new ae.Buffer([0]),a=function(c,y){c._corked?c.once("uncork",y):y()},f=function(c,y){c._autoDestroy&&c.destroy(y)},d=function(c,y){return function(g){g?f(c,g.message==="premature close"?null:g):y&&!c._ended&&c.end()}},p=function(c,y){if(!c||c._writableState&&c._writableState.finished)return y();if(c._writableState)return c.end(y);c.end(),y()},m=function(){},v=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},k=function(c,y,g){if(!(this instanceof k))return new k(c,y,g);r.Duplex.call(this,g),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!g||g.autoDestroy!==!1,this._forwardDestroy=!g||g.destroy!==!1,this._forwardEnd=!g||g.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),y&&this.setReadable(y)};i(k,r.Duplex),k.obj=function(c,y,g){return g||(g={}),g.objectMode=!0,g.highWaterMark=16,new k(c,y,g)},k.prototype.cork=function(){++this._corked===1&&this.emit("cork")},k.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},k.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var y=this,g=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),A=function(){var E=y._ondrain;y._ondrain=null,E&&E()},w=function(){y._writable.removeListener("drain",A),g()};this._unwrite&&ue.nextTick(A),this._writable=c,this._writable.on("drain",A),this._unwrite=w,this.uncork()},k.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var y=this,g=n(c,{writable:!1,readable:!0},d(this)),A=function(){y._forward()},w=function(){y.push(null)},E=function(){y._readable2.removeListener("readable",A),y._readable2.removeListener("end",w),g()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:v(c),this._readable2.on("readable",A),this._readable2.on("end",w),this._unread=E,this._forward()},k.prototype._read=function(){this._drained=!0,this._forward()},k.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=o(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},k.prototype.destroy=function(c,y){if(y||(y=m),this.destroyed)return y(null);this.destroyed=!0;var g=this;ue.nextTick(function(){g._destroy(c),y(null)})},k.prototype._destroy=function(c){if(c){var y=this._ondrain;this._ondrain=null,y?y(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},k.prototype._write=function(c,y,g){if(!this.destroyed){if(this._corked)return a(this,this._write.bind(this,c,y,g));if(c===l)return this._finish(g);if(!this._writable)return g();this._writable.write(c)===!1?this._ondrain=g:this.destroyed||g()}},k.prototype._finish=function(c){var y=this;this.emit("preend"),a(this,function(){p(y._forwardEnd&&y._writable,function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),a(y,c)})})},k.prototype.end=function(c,y,g){return typeof c=="function"?this.end(null,null,c):typeof y=="function"?this.end(c,null,y):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,g))},t.exports=k}),Si=se((e,t)=>{re();var r=vi(),n=ft(),i=Ei(),o=function(a){return a.length?Array.isArray(a[0])?a[0]:Array.prototype.slice.call(a):[]},l=function(a){var f=function(){var d=o(arguments);if(!(this instanceof f))return new f(d);i.call(this,null,null,a),d.length&&this.setPipeline(d)};return n(f,i),f.prototype.setPipeline=function(){var d=o(arguments),p=this,m=!1,v=d[0],k=d[d.length-1];k=k.readable?k:null,v=v.writable?v:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){m||p.cork()}),r(d,function(y){if(p.removeListener("close",c),y)return p.destroy(y.message==="premature close"?null:y);m=!0,p._autoDestroy===!1&&(p._autoDestroy=!0),p.uncork()}),this.destroyed)return c();this.setWritable(v),this.setReadable(k)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),Ai=se(()=>{re()}),cn=se((e,t)=>{re(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,a){if(a=a||{type:"Array"},typeof ue<"u"&&typeof ue.pid=="number"&&ue.versions&&ue.versions.node)return i(l,a);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return o(l,a)}function i(l,a){var f=Ai(),d=f.randomBytes(l);switch(a.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var p=new Uint8Array(l),m=0;m<l;++m)p[m]=d.readUInt8(m);return p;default:throw new Error(a.type+" is unsupported.")}}function o(l,a){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),a.type){case"Array":return[].slice.call(f);case"Buffer":try{var p=new ae.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new ae.Buffer(f);case"Uint8Array":return f;default:throw new Error(a.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),hn=se((e,t)=>{re(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;r[n]=o;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(r,n);if(a.value!==o||a.enumerable!==!0)return!1}return!0}}),Qt=se((e,t)=>{re();var r=hn();t.exports=function(){return r()&&!!Symbol.toStringTag}}),ki=se((e,t)=>{re();var r=typeof Symbol<"u"&&Symbol,n=hn();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),Ii=se((e,t)=>{re();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,o="[object Function]";t.exports=function(l){var a=this;if(typeof a!="function"||i.call(a)!==o)throw new TypeError(r+a);for(var f=n.call(arguments,1),d,p=function(){if(this instanceof d){var y=a.apply(this,f.concat(n.call(arguments)));return Object(y)===y?y:this}else return a.apply(l,f.concat(n.call(arguments)))},m=Math.max(0,a.length-f.length),v=[],k=0;k<m;k++)v.push("$"+k);if(d=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this,arguments); }")(p),a.prototype){var c=function(){};c.prototype=a.prototype,d.prototype=new c,c.prototype=null}return d}}),mr=se((e,t)=>{re();var r=Ii();t.exports=Function.prototype.bind||r}),Bi=se((e,t)=>{re();var r=mr();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),br=se((e,t)=>{re();var r,n=SyntaxError,i=Function,o=TypeError,l=function(R){try{return i('"use strict"; return ('+R+").constructor;")()}catch{}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var f=function(){throw new o},d=a?function(){try{return arguments.callee,f}catch{try{return a(arguments,"callee").get}catch{return f}}}():f,p=ki()(),m=Object.getPrototypeOf||function(R){return R.__proto__},v={},k=typeof Uint8Array>"u"?r:m(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":p?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":v,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?m(m([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?r:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?r:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?m(""[Symbol.iterator]()):r,"%Symbol%":p?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":k,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},y=function R(F){var G;if(F==="%AsyncFunction%")G=l("async function () {}");else if(F==="%GeneratorFunction%")G=l("function* () {}");else if(F==="%AsyncGeneratorFunction%")G=l("async function* () {}");else if(F==="%AsyncGenerator%"){var ee=R("%AsyncGeneratorFunction%");ee&&(G=ee.prototype)}else if(F==="%AsyncIteratorPrototype%"){var oe=R("%AsyncGenerator%");oe&&(G=m(oe.prototype))}return c[F]=G,G},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=mr(),w=Bi(),E=A.call(Function.call,Array.prototype.concat),I=A.call(Function.apply,Array.prototype.splice),j=A.call(Function.call,String.prototype.replace),S=A.call(Function.call,String.prototype.slice),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,z=function(R){var F=S(R,0,1),G=S(R,-1);if(F==="%"&&G!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(G==="%"&&F!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ee=[];return j(R,P,function(oe,de,pe,ve){ee[ee.length]=pe?j(ve,M,"$1"):de||oe}),ee},x=function(R,F){var G=R,ee;if(w(g,G)&&(ee=g[G],G="%"+ee[0]+"%"),w(c,G)){var oe=c[G];if(oe===v&&(oe=y(G)),typeof oe>"u"&&!F)throw new o("intrinsic "+R+" exists, but is not available. Please file an issue!");return{alias:ee,name:G,value:oe}}throw new n("intrinsic "+R+" does not exist!")};t.exports=function(R,F){if(typeof R!="string"||R.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof F!="boolean")throw new o('"allowMissing" argument must be a boolean');var G=z(R),ee=G.length>0?G[0]:"",oe=x("%"+ee+"%",F),de=oe.name,pe=oe.value,ve=!1,we=oe.alias;we&&(ee=we[0],I(G,E([0,1],we)));for(var ge=1,ce=!0;ge<G.length;ge+=1){var T=G[ge],U=S(T,0,1),q=S(T,-1);if((U==='"'||U==="'"||U==="`"||q==='"'||q==="'"||q==="`")&&U!==q)throw new n("property names with quotes must have matching quotes");if((T==="constructor"||!ce)&&(ve=!0),ee+="."+T,de="%"+ee+"%",w(c,de))pe=c[de];else if(pe!=null){if(!(T in pe)){if(!F)throw new o("base intrinsic for "+R+" exists, but the property is not available.");return}if(a&&ge+1>=G.length){var Q=a(pe,T);ce=!!Q,ce&&"get"in Q&&!("originalValue"in Q.get)?pe=Q.get:pe=pe[T]}else ce=w(pe,T),pe=pe[T];ce&&!ve&&(c[de]=pe)}}return pe}}),Oi=se((e,t)=>{re();var r=mr(),n=br(),i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(o,i),a=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(m){var v=l(r,o,arguments);if(a&&f){var k=a(v,"length");k.configurable&&f(v,"length",{value:1+d(0,m.length-(arguments.length-1))})}return v};var p=function(){return l(r,i,arguments)};f?f(t.exports,"apply",{value:p}):t.exports.apply=p}),wr=se((e,t)=>{re();var r=br(),n=Oi(),i=n(r("String.prototype.indexOf"));t.exports=function(o,l){var a=r(o,!!l);return typeof a=="function"&&i(o,".prototype.")>-1?n(a):a}}),Ri=se((e,t)=>{re();var r=Qt()(),n=wr(),i=n("Object.prototype.toString"),o=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:i(f)==="[object Arguments]"},l=function(f){return o(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&i(f)!=="[object Array]"&&i(f.callee)==="[object Function]"},a=function(){return o(arguments)}();o.isLegacyArguments=l,t.exports=a?o:l}),Ti=se((e,t)=>{re();var r=Object.prototype.toString,n=Function.prototype.toString,i=/^\s*(?:function)?\*/,o=Qt()(),l=Object.getPrototypeOf,a=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(i.test(n.call(d)))return!0;if(!o){var p=r.call(d);return p==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var m=a();f=m?l(m):!1}return l(d)===f}}),dn=se((e,t)=>{re();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(i,o,l){if(n.call(o)!=="[object Function]")throw new TypeError("iterator must be a function");var a=i.length;if(a===+a)for(var f=0;f<a;f++)o.call(l,i[f],f,i);else for(var d in i)r.call(i,d)&&o.call(l,i[d],d,i)}}),pn=se((e,t)=>{re();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?ut:globalThis;t.exports=function(){for(var i=[],o=0;o<r.length;o++)typeof n[r[o]]=="function"&&(i[i.length]=r[o]);return i}}),gn=se((e,t)=>{re();var r=br(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),yn=se((e,t)=>{re();var r=dn(),n=pn(),i=wr(),o=i("Object.prototype.toString"),l=Qt()(),a=typeof globalThis>"u"?ut:globalThis,f=n(),d=i("Array.prototype.indexOf",!0)||function(y,g){for(var A=0;A<y.length;A+=1)if(y[A]===g)return A;return-1},p=i("String.prototype.slice"),m={},v=gn(),k=Object.getPrototypeOf;l&&v&&k&&r(f,function(y){var g=new a[y];if(Symbol.toStringTag in g){var A=k(g),w=v(A,Symbol.toStringTag);if(!w){var E=k(A);w=v(E,Symbol.toStringTag)}m[y]=w.get}});var c=function(y){var g=!1;return r(m,function(A,w){if(!g)try{g=A.call(y)===w}catch{}}),g};t.exports=function(y){if(!y||typeof y!="object")return!1;if(!l||!(Symbol.toStringTag in y)){var g=p(o(y),8,-1);return d(f,g)>-1}return v?c(y):!1}}),Li=se((e,t)=>{re();var r=dn(),n=pn(),i=wr(),o=i("Object.prototype.toString"),l=Qt()(),a=typeof globalThis>"u"?ut:globalThis,f=n(),d=i("String.prototype.slice"),p={},m=gn(),v=Object.getPrototypeOf;l&&m&&v&&r(f,function(y){if(typeof a[y]=="function"){var g=new a[y];if(Symbol.toStringTag in g){var A=v(g),w=m(A,Symbol.toStringTag);if(!w){var E=v(A);w=m(E,Symbol.toStringTag)}p[y]=w.get}}});var k=function(y){var g=!1;return r(p,function(A,w){if(!g)try{var E=A.call(y);E===w&&(g=E)}catch{}}),g},c=yn();t.exports=function(y){return c(y)?!l||!(Symbol.toStringTag in y)?d(o(y),8,-1):k(y):!1}}),Pi=se(e=>{re();var t=Ri(),r=Ti(),n=Li(),i=yn();function o(N){return N.call.bind(N)}var l=typeof BigInt<"u",a=typeof Symbol<"u",f=o(Object.prototype.toString),d=o(Number.prototype.valueOf),p=o(String.prototype.valueOf),m=o(Boolean.prototype.valueOf);l&&(v=o(BigInt.prototype.valueOf));var v;a&&(k=o(Symbol.prototype.valueOf));var k;function c(N,$e){if(typeof N!="object")return!1;try{return $e(N),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=i;function y(N){return typeof Promise<"u"&&N instanceof Promise||N!==null&&typeof N=="object"&&typeof N.then=="function"&&typeof N.catch=="function"}e.isPromise=y;function g(N){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(N):i(N)||U(N)}e.isArrayBufferView=g;function A(N){return n(N)==="Uint8Array"}e.isUint8Array=A;function w(N){return n(N)==="Uint8ClampedArray"}e.isUint8ClampedArray=w;function E(N){return n(N)==="Uint16Array"}e.isUint16Array=E;function I(N){return n(N)==="Uint32Array"}e.isUint32Array=I;function j(N){return n(N)==="Int8Array"}e.isInt8Array=j;function S(N){return n(N)==="Int16Array"}e.isInt16Array=S;function P(N){return n(N)==="Int32Array"}e.isInt32Array=P;function M(N){return n(N)==="Float32Array"}e.isFloat32Array=M;function z(N){return n(N)==="Float64Array"}e.isFloat64Array=z;function x(N){return n(N)==="BigInt64Array"}e.isBigInt64Array=x;function R(N){return n(N)==="BigUint64Array"}e.isBigUint64Array=R;function F(N){return f(N)==="[object Map]"}F.working=typeof Map<"u"&&F(new Map);function G(N){return typeof Map>"u"?!1:F.working?F(N):N instanceof Map}e.isMap=G;function ee(N){return f(N)==="[object Set]"}ee.working=typeof Set<"u"&&ee(new Set);function oe(N){return typeof Set>"u"?!1:ee.working?ee(N):N instanceof Set}e.isSet=oe;function de(N){return f(N)==="[object WeakMap]"}de.working=typeof WeakMap<"u"&&de(new WeakMap);function pe(N){return typeof WeakMap>"u"?!1:de.working?de(N):N instanceof WeakMap}e.isWeakMap=pe;function ve(N){return f(N)==="[object WeakSet]"}ve.working=typeof WeakSet<"u"&&ve(new WeakSet);function we(N){return ve(N)}e.isWeakSet=we;function ge(N){return f(N)==="[object ArrayBuffer]"}ge.working=typeof ArrayBuffer<"u"&&ge(new ArrayBuffer);function ce(N){return typeof ArrayBuffer>"u"?!1:ge.working?ge(N):N instanceof ArrayBuffer}e.isArrayBuffer=ce;function T(N){return f(N)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function U(N){return typeof DataView>"u"?!1:T.working?T(N):N instanceof DataView}e.isDataView=U;var q=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(N){return f(N)==="[object SharedArrayBuffer]"}function me(N){return typeof q>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new q)),Q.working?Q(N):N instanceof q)}e.isSharedArrayBuffer=me;function ye(N){return f(N)==="[object AsyncFunction]"}e.isAsyncFunction=ye;function O(N){return f(N)==="[object Map Iterator]"}e.isMapIterator=O;function L(N){return f(N)==="[object Set Iterator]"}e.isSetIterator=L;function D(N){return f(N)==="[object Generator]"}e.isGeneratorObject=D;function ne(N){return f(N)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=ne;function te(N){return c(N,d)}e.isNumberObject=te;function b(N){return c(N,p)}e.isStringObject=b;function _(N){return c(N,m)}e.isBooleanObject=_;function W(N){return l&&c(N,v)}e.isBigIntObject=W;function Z(N){return a&&c(N,k)}e.isSymbolObject=Z;function be(N){return te(N)||b(N)||_(N)||W(N)||Z(N)}e.isBoxedPrimitive=be;function he(N){return typeof Uint8Array<"u"&&(ce(N)||me(N))}e.isAnyArrayBuffer=he,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(N){Object.defineProperty(e,N,{enumerable:!1,value:function(){throw new Error(N+" is not supported in userland")}})})}),$i=se((e,t)=>{re(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),Mi=se(e=>{re();var t=Object.getOwnPropertyDescriptors||function(T){for(var U=Object.keys(T),q={},Q=0;Q<U.length;Q++)q[U[Q]]=Object.getOwnPropertyDescriptor(T,U[Q]);return q},r=/%[sdj%]/g;e.format=function(T){if(!j(T)){for(var U=[],q=0;q<arguments.length;q++)U.push(l(arguments[q]));return U.join(" ")}for(var q=1,Q=arguments,me=Q.length,ye=String(T).replace(r,function(D){if(D==="%%")return"%";if(q>=me)return D;switch(D){case"%s":return String(Q[q++]);case"%d":return Number(Q[q++]);case"%j":try{return JSON.stringify(Q[q++])}catch{return"[Circular]"}default:return D}}),O=Q[q];q<me;O=Q[++q])w(O)||!z(O)?ye+=" "+O:ye+=" "+l(O);return ye},e.deprecate=function(T,U){if(typeof ue<"u"&&ue.noDeprecation===!0)return T;if(typeof ue>"u")return function(){return e.deprecate(T,U).apply(this,arguments)};var q=!1;function Q(){if(!q){if(ue.throwDeprecation)throw new Error(U);ue.traceDeprecation?console.trace(U):console.error(U),q=!0}return T.apply(this,arguments)}return Q};var n={},i=/^$/;ue.env.NODE_DEBUG&&(o=ue.env.NODE_DEBUG,o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i"));var o;e.debuglog=function(T){if(T=T.toUpperCase(),!n[T])if(i.test(T)){var U=ue.pid;n[T]=function(){var q=e.format.apply(e,arguments);console.error("%s %d: %s",T,U,q)}}else n[T]=function(){};return n[T]};function l(T,U){var q={seen:[],stylize:f};return arguments.length>=3&&(q.depth=arguments[2]),arguments.length>=4&&(q.colors=arguments[3]),A(U)?q.showHidden=U:U&&e._extend(q,U),P(q.showHidden)&&(q.showHidden=!1),P(q.depth)&&(q.depth=2),P(q.colors)&&(q.colors=!1),P(q.customInspect)&&(q.customInspect=!0),q.colors&&(q.stylize=a),p(q,T,q.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(T,U){var q=l.styles[U];return q?"\x1B["+l.colors[q][0]+"m"+T+"\x1B["+l.colors[q][1]+"m":T}function f(T,U){return T}function d(T){var U={};return T.forEach(function(q,Q){U[q]=!0}),U}function p(T,U,q){if(T.customInspect&&U&&F(U.inspect)&&U.inspect!==e.inspect&&!(U.constructor&&U.constructor.prototype===U)){var Q=U.inspect(q,T);return j(Q)||(Q=p(T,Q,q)),Q}var me=m(T,U);if(me)return me;var ye=Object.keys(U),O=d(ye);if(T.showHidden&&(ye=Object.getOwnPropertyNames(U)),R(U)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return v(U);if(ye.length===0){if(F(U)){var L=U.name?": "+U.name:"";return T.stylize("[Function"+L+"]","special")}if(M(U))return T.stylize(RegExp.prototype.toString.call(U),"regexp");if(x(U))return T.stylize(Date.prototype.toString.call(U),"date");if(R(U))return v(U)}var D="",ne=!1,te=["{","}"];if(g(U)&&(ne=!0,te=["[","]"]),F(U)){var b=U.name?": "+U.name:"";D=" [Function"+b+"]"}if(M(U)&&(D=" "+RegExp.prototype.toString.call(U)),x(U)&&(D=" "+Date.prototype.toUTCString.call(U)),R(U)&&(D=" "+v(U)),ye.length===0&&(!ne||U.length==0))return te[0]+D+te[1];if(q<0)return M(U)?T.stylize(RegExp.prototype.toString.call(U),"regexp"):T.stylize("[Object]","special");T.seen.push(U);var _;return ne?_=k(T,U,q,O,ye):_=ye.map(function(W){return c(T,U,q,O,W,ne)}),T.seen.pop(),y(_,D,te)}function m(T,U){if(P(U))return T.stylize("undefined","undefined");if(j(U)){var q="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return T.stylize(q,"string")}if(I(U))return T.stylize(""+U,"number");if(A(U))return T.stylize(""+U,"boolean");if(w(U))return T.stylize("null","null")}function v(T){return"["+Error.prototype.toString.call(T)+"]"}function k(T,U,q,Q,me){for(var ye=[],O=0,L=U.length;O<L;++O)ve(U,String(O))?ye.push(c(T,U,q,Q,String(O),!0)):ye.push("");return me.forEach(function(D){D.match(/^\d+$/)||ye.push(c(T,U,q,Q,D,!0))}),ye}function c(T,U,q,Q,me,ye){var O,L,D;if(D=Object.getOwnPropertyDescriptor(U,me)||{value:U[me]},D.get?D.set?L=T.stylize("[Getter/Setter]","special"):L=T.stylize("[Getter]","special"):D.set&&(L=T.stylize("[Setter]","special")),ve(Q,me)||(O="["+me+"]"),L||(T.seen.indexOf(D.value)<0?(w(q)?L=p(T,D.value,null):L=p(T,D.value,q-1),L.indexOf(`
`)>-1&&(ye?L=L.split(`
`).map(function(ne){return"  "+ne}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(ne){return"   "+ne}).join(`
`))):L=T.stylize("[Circular]","special")),P(O)){if(ye&&me.match(/^\d+$/))return L;O=JSON.stringify(""+me),O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=T.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=T.stylize(O,"string"))}return O+": "+L}function y(T,U,q){var Q=0,me=T.reduce(function(ye,O){return Q++,O.indexOf(`
`)>=0&&Q++,ye+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?q[0]+(U===""?"":U+`
 `)+" "+T.join(`,
  `)+" "+q[1]:q[0]+U+" "+T.join(", ")+" "+q[1]}e.types=Pi();function g(T){return Array.isArray(T)}e.isArray=g;function A(T){return typeof T=="boolean"}e.isBoolean=A;function w(T){return T===null}e.isNull=w;function E(T){return T==null}e.isNullOrUndefined=E;function I(T){return typeof T=="number"}e.isNumber=I;function j(T){return typeof T=="string"}e.isString=j;function S(T){return typeof T=="symbol"}e.isSymbol=S;function P(T){return T===void 0}e.isUndefined=P;function M(T){return z(T)&&ee(T)==="[object RegExp]"}e.isRegExp=M,e.types.isRegExp=M;function z(T){return typeof T=="object"&&T!==null}e.isObject=z;function x(T){return z(T)&&ee(T)==="[object Date]"}e.isDate=x,e.types.isDate=x;function R(T){return z(T)&&(ee(T)==="[object Error]"||T instanceof Error)}e.isError=R,e.types.isNativeError=R;function F(T){return typeof T=="function"}e.isFunction=F;function G(T){return T===null||typeof T=="boolean"||typeof T=="number"||typeof T=="string"||typeof T=="symbol"||typeof T>"u"}e.isPrimitive=G,e.isBuffer=$i();function ee(T){return Object.prototype.toString.call(T)}function oe(T){return T<10?"0"+T.toString(10):T.toString(10)}var de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var T=new Date,U=[oe(T.getHours()),oe(T.getMinutes()),oe(T.getSeconds())].join(":");return[T.getDate(),de[T.getMonth()],U].join(" ")}e.log=function(){console.log("%s - %s",pe(),e.format.apply(e,arguments))},e.inherits=ft(),e._extend=function(T,U){if(!U||!z(U))return T;for(var q=Object.keys(U),Q=q.length;Q--;)T[q[Q]]=U[q[Q]];return T};function ve(T,U){return Object.prototype.hasOwnProperty.call(T,U)}var we=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');if(we&&T[we]){var U=T[we];if(typeof U!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,we,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var q,Q,me=new Promise(function(L,D){q=L,Q=D}),ye=[],O=0;O<arguments.length;O++)ye.push(arguments[O]);ye.push(function(L,D){L?Q(L):q(D)});try{T.apply(this,ye)}catch(L){Q(L)}return me}return Object.setPrototypeOf(U,Object.getPrototypeOf(T)),we&&Object.defineProperty(U,we,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,t(T))},e.promisify.custom=we;function ge(T,U){if(!T){var q=new Error("Promise was rejected with a falsy value");q.reason=T,T=q}return U(T)}function ce(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var q=[],Q=0;Q<arguments.length;Q++)q.push(arguments[Q]);var me=q.pop();if(typeof me!="function")throw new TypeError("The last argument must be of type Function");var ye=this,O=function(){return me.apply(ye,arguments)};T.apply(this,q).then(function(L){ue.nextTick(O.bind(null,null,L))},function(L){ue.nextTick(ge.bind(null,L,O))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(T)),Object.defineProperties(U,t(T)),U}e.callbackify=ce}),ji=se((e,t)=>{re();var r=At(),n=Mi(),i=r.Transform;function o(l){if(!(this instanceof o))return new o(l);this._toSkip=l.skip,i.call(this,l)}n.inherits(o,i),o.prototype._transform=function(l,a,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=o});re();re();var mn=Ye(At(),1),bn=Ye(Si(),1);re();var wn=Ye(At(),1);function vn(e,t){let r=[],n;e.on("data",i=>r.push(i)),e.on("end",()=>{n||(n=!0,t(null,ae.Buffer.concat(r)))}),e.on("error",i=>{n||(n=!0,t(i))})}function _n(e){let t;return new wn.Transform({transform(r,n,i){t&&(r=ae.Buffer.concat([t,r]));let o=Math.floor(r.length/e)*e;o?r.length>o?(t=r.slice(o),this.push(r.slice(0,o))):(t=void 0,this.push(r)):t=t?ae.Buffer.concat([t,r]):r,i()},flush(r){t&&this.push(t),r()}})}function Ni(e,t){let r=[],n=0;return new wn.Transform({transform(i,o,l){r.push(i),n+=i.length,l()},flush(i){t(n);function o(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",o);e.end(),i()}o()}})}function xe(e){let t,r=new Promise((n,i)=>{t=(o,l)=>{o?i(o):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var Ui=Ye(cn(),1);re();re();var vr=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,i,o,l=this._tables[0][4],a=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[i=e.slice(0),o=[]],t=f;t<4*f+28;t++)n=i[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),i[t]=i[t-f]^n;for(r=0;t;r++,t--)n=i[r&3?t:t-4],t<=4||r<4?o[r]=n:o[r]=a[0][l[n>>>24]]^a[1][l[n>>16&255]]^a[2][l[n>>8&255]]^a[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],i,o,l,a=[],f=[],d,p,m,v,k,c;for(i=0;i<256;i++)f[(a[i]=i<<1^(i>>7)*283)^i]=i;for(o=l=0;!r[o];o^=d||1,l=f[l]||1)for(v=l^l<<1^l<<2^l<<3^l<<4,v=v>>8^v&255^99,r[o]=v,n[v]=o,m=a[p=a[d=a[o]]],c=m*16843009^p*65537^d*257^o*16843008,k=a[v]*257^v*16843008,i=0;i<4;i++)e[i][o]=k=k<<24^k>>>8,t[i][v]=c=c<<24^c>>>8;for(i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],i=e[t?3:1]^r[1],o=e[2]^r[2],l=e[t?1:3]^r[3],a,f,d,p=r.length/4-2,m,v=4,k=[0,0,0,0],c=this._tables[t],y=c[0],g=c[1],A=c[2],w=c[3],E=c[4];for(m=0;m<p;m++)a=y[n>>>24]^g[i>>16&255]^A[o>>8&255]^w[l&255]^r[v],f=y[i>>>24]^g[o>>16&255]^A[l>>8&255]^w[n&255]^r[v+1],d=y[o>>>24]^g[l>>16&255]^A[n>>8&255]^w[i&255]^r[v+2],l=y[l>>>24]^g[n>>16&255]^A[i>>8&255]^w[o&255]^r[v+3],v+=4,n=a,i=f,o=d;for(m=0;m<4;m++)k[t?3&-m:m]=E[n>>>24]<<24^E[i>>16&255]<<16^E[o>>8&255]<<8^E[l&255]^r[v++],a=n,n=i,i=o,o=l,l=a;return k}};vr.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function Ci(e){let t,r,n,i=[2479122403,2108737444,3518906241,22203222],o=ae.Buffer.alloc(Math.ceil(e.length/4)*4);for(o.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let a=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(a[t/4]=o.readInt32BE(t+r));i=new vr(a).encrypt(i)}let l=ae.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(i[t],t*4);return l}function Di(e,t,r){let n=ae.Buffer.from(t.s,"base64"),i=1e5,o="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:i,hash:{name:o}},l,256)).then(l=>{r(null,ae.Buffer.from(l))}).catch(r)}var Ze=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new vr(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,i;for(n=0;n<e.length;n+=16){for(i=0;i<4;i++)r[i]=e.readUInt32BE(n+i*4)^t[i];for(t=this.aes.encrypt(r),i=0;i<4;i++)e.writeInt32BE(t[i],n+i*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),i,o;for(i=0;i<e.length;i+=16){for(o=0;o<4;o++)r[o]=e.readUInt32BE(i+o*4);for(n=r,r=this.aes.decrypt(r),o=0;o<4;o++)e.writeInt32BE(r[o]^t[o],i+o*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let i=e.length-n;t[n/4&3]^=e.readIntBE(n,i)<<(4-i)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=ae.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},En=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=ae.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ae.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ae.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},Sn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=ae.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=ae.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=ae.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(ae.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function Xe(e){return typeof e=="string"?_r(e):e}function je(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function _r(e){return ae.Buffer.from(e,"base64")}function dt(e){return new Ze(An(e).slice(0,16))}function Fi(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=Xe(e),e||(e=(0,Ui.default)(24)),e instanceof ae.Buffer||(e=ae.Buffer.from(e));let n=new mn.Transform({transform(a,f,d){l.update(a);let p=o.encrypt(a);d(null,ae.Buffer.from(p))},flush(a){n.mac=l.condense(),n.key=Wi(e,n.mac),a()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let i=new Ze(e.slice(0,16)),o=new En(i,e.slice(16),r),l=new Sn(i,e.slice(16));return n=(0,bn.default)(_n(16),n),n}function xi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=Xe(e),e instanceof ae.Buffer||(e=ae.Buffer.from(e));let n=dt(e),i=new En(n,e.slice(16),r),o=!t.disableVerification&&new Sn(n,e.slice(16)),l=new mn.Transform({transform(a,f,d){let p=i.decrypt(a);o&&o.update(p),d(null,ae.Buffer.from(p))},flush(a){if(o&&(l.mac=o.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){a(Error("MAC verification failed"));return}a()}});return l=(0,bn.default)(_n(16),l),l}function An(e){let t=ae.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function Wi(e,t){let r=ae.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function qi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let i=0;i<r;i++)n|=e[i]^t[i];return n===0}re();re();var rt={},Vi=Math.log(2);function Mt(e){let t=[];for(;e-- >0;)t[e]=0;return t}function jt(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function zi(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function kn(e,t){let r=e.length,n=t.length;if(r<n)return kn(t,e);let i=[],o=0,l=0;for(;l<n;l++)o+=e[l]+t[l],i[l]=o&268435455,o>>>=28;for(;l<r;l++)o+=e[l],i[l]=o&268435455,o>>>=28;return o&&(i[l]=o),i}function ze(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let i=[],o=0,l;for(l=0;l<n;l++)o+=e[l]-t[l],i[l]=o&268435455,o>>=28;for(;l<r;l++)o+=e[l],i[l]=o&268435455,o>>=28;return o?[]:jt(i)}function ur(e,t,r,n,i){let o=r&16383,l=r>>14,a=n&16383,f=n>>14,d=l*a+f*o,p=o*a+((d&16383)<<14)+e[t]+i;return e[t]=p&268435455,i=l*f+(d>>14)+(p>>28),i}function Gi(e){let t=e.length,r=2*t,n=Mt(r),i=0,o,l;for(o=0;o<t;o++){for(i=ur(n,2*o,e[o],e[o],0),l=o+1;l<t;l++)i=ur(n,o+l,2*e[l],e[o],i);n[o+t]=i}return jt(n)}function at(e,t){let r=e.length,n=t.length,i=Mt(r+n-1),o,l,a;for(l=0;l<n;l++){for(o=0,a=0;a<r;a++)o=ur(i,l+a,e[a],t[l],o);i[l+r]=o}return jt(i)}function It(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function In(e,t){let r=e.length-1,n=t.length-1,i=r-n,o,l,a,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return rt.q=[0],rt.mod=e,rt;if(r===n&&It(e,n,2)/It(t,n,2)<4){for(o=e.concat(),l=0;a=ze(o,t),a.length!==0;)o=a,l++;return rt.q=[l],rt.mod=o,rt}let d=Math.floor(Math.log(t[n])/Vi)+1,p=28-d;o=e.concat();let m=t.concat();if(p){for(f=n;f>0;f--)m[f]=m[f]<<p&268435455|m[f-1]>>d;for(m[0]=m[0]<<p&268435455,o[r]&(268435455<<d&268435455)&&(o[++r]=0,i++),f=r;f>0;f--)o[f]=o[f]<<p&268435455|o[f-1]>>d;o[0]=o[0]<<p&268435455}let v,k=Mt(i+1),c=Mt(i).concat(m);for(;v=ze(o,c),v.length!==0;)k[i]++,o=v;let y=m[n],g=It(m,n,2),A;for(f=r;f>n;f--){A=f-n-1,f>=o.length?k[A]=1:o[f]===y?k[A]=268435455:k[A]=Math.floor(It(o,f,2)/y);let w=It(o,f,3);for(;k[A]*g>w;)k[A]--;c=c.slice(1),v=ze(o,at([k[A]],c)),v.length===0&&(k[A]--,v=ze(o,at([k[A]],c))),o=v}if(p){for(f=0;f<o.length-1;f++)o[f]=o[f]>>p|o[f+1]<<d&268435455;o[o.length-1]>>=p}return rt.q=jt(k),rt.mod=jt(o),rt}function Hi(e,t){let r=0,n;for(let i=e.length-1;i>=0;i--)n=e[i],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function mt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Hi(e,t[0])]}return In(e,t).mod}function Tt(e,t,r){let n=e.length-(t.length<<1);if(n>0)return Tt(e.slice(0,n).concat(Tt(e.slice(n),t,r)),t,r);let i=t.length+1,o=t.length-1,l,a=at(e.slice(o),r).slice(i),f=e.slice(0,i),d=at(a,t).slice(0,i),p=ze(f,d);p.length===0&&(f[i]=1,p=ze(f,d));for(let m=0;l=ze(p,t),l.length!==0;m++)if(p=l,m>=3)return Tt(p,t,r);return p}function Lr(e,t,r){let n=e.concat(),i=t.length-1,o=r.length*2,l=Mt(o+1);for(l[o]=1,l=In(l,r).q,o=zi(t[i])-2;i>=0;i--){for(;o>=0;o-=1)n=Tt(Gi(n),r,l),t[i]&1<<o&&(n=Tt(at(n,e),r,l));o=28-1}return n}function Ki(e,t,r,n,i){let o=Lr(mt(e,r),mt(t,ze(r,[1])),r),l=Lr(mt(e,n),mt(t,ze(n,[1])),n),a=ze(l,o);return a.length===0?(a=ze(o,l),a=mt(at(a,i),n),a=ze(n,a)):a=mt(at(a,i),n),kn(at(a,r),o)}function Bn(e){let t=1,r=[0],n=0,i=256,o=e.length,l;if(o<2)return 0;let a=(o-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>a||f<a-8)return 0;for(let d=0;d<a;d++)(i<<=1)>255&&(i=1,l=e.charCodeAt(--o)),t>268435455&&(t=1,r[++n]=0),l&i&&(r[n]|=t),t<<=1;return r}function Yi(e){let t=1,r=0,n=[0],i=1,o=0,l=e.length*28,a="",f;for(f=0;f<l;f++)e[r]&t&&(n[o]|=i),(i<<=1)>255&&(i=1,n[++o]=0),(t<<=1)>268435455&&(t=1,r++);for(;o>=0&&n[o]===0;)o--;for(f=0;f<=o;f++)a=String.fromCharCode(n[f])+a;return a}function Ji(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=Bn(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Xi(e,t){let r=Bn(e.toString("binary")),n=Yi(Ki(r,t[2],t[0],t[1],t[3]));return ae.Buffer.from(n,"binary")}re();var Qi=Ye(zt(),1);re();var Zi=null;re();var eo=globalThis.fetch,to=eo;re();var ro=globalThis.AbortController||Zi,fr=ro,cr=4,Pr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+cr+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later",19:"ETOOMANYCONNECTIONS (-19)",24:"EGOINGOVERQUOTA (-24)",25:"EROLLEDBACK (-25)",26:"EMFAREQUIRED (-26): Multi-Factor Authentication Required",27:"EMASTERONLY (-27)",28:"EBUSINESSPASTDUE (-28)",29:"EPAYWALL (-29): ODQ paywall state",400:"ETOOERR (-400)",401:"ESHAREROVERQUOTA (-401)"},no="https://g.api.mega.co.nz/",io=null,oo=null,Ot=class extends Qi.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||no;let r="1.1.2";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||io,this.httpsAgent=t.httpsAgent||oo,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),to(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[i,o]=xe(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then($r).then(a=>{if(this.closed&&!n)return;if(!a)return i(Error("Empty response"));a.length&&(a=a[0]);let f;if(typeof a=="number"&&a<0){if(a===-3&&r<cr)return setTimeout(()=>{this.request(e,i,r+1)},Math.pow(2,r+1)*1e3);f=Error(Pr[-a])}else this.keepalive&&a&&a.sn&&this.pull(a.sn);i(f,a)}).catch(a=>{i(a)}),o}pull(e,t=0){let r=new fr;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then($r).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<cr)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(Pr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(ao).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new fr;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return Ot.globalApi||(Ot.globalApi=new Ot),Ot.globalApi}};function $r(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function ao(e){if(e.name!=="AbortError")throw e}var Yt=Ot,so=Ye(zt(),1);re();re();var lo=Ye(zt(),1),uo=Ye(At(),1),fo=Ye(ji(),1),ht=class extends lo.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?Xe(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Yt.getGlobalApi(),!(this.api instanceof Yt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=Xe(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=_r(e),dt(this.key).decryptCBC(e);let t=ht.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=On[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=xe(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(i,o)=>{if(i)return t(i);if(this.directory){let l=Object.create(null),a=o.f,f=a.find(p=>p.k&&p.h===p.k.split(":")[0]),d=this.key?new Ze(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let p of a){if(p===f)continue;let m=new ht(p,this.storage);m.loadMetadata(d,p),m.downloadId=[this.downloadId,p.h],l[p.h]=m}for(let p of a){let m=l[p.p];if(m){let v=l[p.h];m.children||(m.children=[]),m.children.push(v),v.parent=m}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let p=l[this.loadedFile];typeof p>"u"?t(Error("Node (file or folder) not found in folder")):t(null,p)}else t(null,this)}else{if(this.size=o.s,this.decryptAttributes(o.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,i=e.end||null,o=e.maxConnections||4,l=e.initialChunkSize||128*1024,a=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=e.forceHttps??!0?2:0,p={a:"g",g:1,ssl:d};if(this.nodeId?p.n=this.nodeId:Array.isArray(this.downloadId)?(p._querystring={n:this.downloadId[0]},p.n=this.downloadId[1]):p.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let m=this.key&&!e.returnCiphertext?xi(this.key,{start:n,disableVerification:n!==0||i!==null}):new uo.PassThrough,v=n===r?m:m.pipe(new fo.default({skip:r-n})),k=e.handleRetries||ht.defaultHandleRetries;return this.api.request(p,(c,y)=>{if(c)return v.emit("error",c);if(typeof y.g!="string"||y.g.substr(0,4)!=="http")return v.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(y.s===0)return v.end();if(i||(i=y.s-1),r>i)return v.emit("error",Error("You can't download past the end of the file."));function g(R){if(R.status!==200){if(R.status===509){let F=R.headers.get("x-mega-time-left"),G=Error("Bandwidth limit reached: "+F+" seconds until it resets");G.timeLimit=F,v.emit("error",G);return}v.emit("error",Error("MEGA returned a "+R.status+" status code"))}}function A(R){v.emit("error",R)}let w=0;if(v.on("data",R=>{w+=R.length,v.emit("progress",{bytesLoaded:w,bytesTotal:y.s})}),o===1){let R=new fr;v.on("close",()=>{R.abort()}),this.api.fetch(y.g+"/"+n+"-"+i,{signal:R.signal}).then(F=>{g(F);let G=F.body;if(G)if(G.pipe)F.body.pipe(m);else if(G.getReader){let ee=G.getReader(),oe=({done:de,value:pe})=>{if(de)m.end();else return m.write(pe),ee.read().then(oe)};ee.read().then(oe)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(A);return}let E={},I=0,j=0,S=!1,P=n,M=l;v.on("error",()=>{S=!0}),v.on("close",()=>{S=!0});let z=()=>{if(P>i){S=!0,I===j&&m.end();return}let R=P,F=Math.min(i,R+M-1),G=I++,ee=0,oe=()=>{ee++,this.api.fetch(y.g+"/"+R+"-"+F).then(de=>(g(de),de.arrayBuffer())).then(de=>{let pe=ae.Buffer.from(de);E[G]=pe,j===G&&x()},de=>{k(ee,de,pe=>{pe?A(pe):oe()})})};oe(),P=F+1,M<f&&(M=M+a)},x=()=>{let R;for(;;){let F=E[j];if(!F||(R=!m.write(F),delete E[j],j++,R))break}S&&I===j&&m.end(),R?m.once("drain",x):z()};for(let R=0;R<o;R++)z()}),t&&vn(v,t),v}downloadBuffer(e,t){let[r,n]=xe(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=xe(t);typeof e=="boolean"&&(e={noKey:e});let i=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(i+=`#${je(this.key)}`),!e.noKey&&this.loadedFile&&(i+=`/file/${this.loadedFile}`),r(null,i),n}static fromURL(e,t={}){if(typeof e=="object")return new ht(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),i=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),o=n[0];if(i&&!o||!i&&o)throw Error("Invalid URL: too few arguments");return new ht({downloadId:i,key:o,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new ht({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},On=["","red","orange","yellow","green","blue","purple","grey"],Qe=ht,rr=Ye(cn(),1),Mr=Ye(At(),1),jr={},Rt=class extends Qe{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let i of r){let o=i.split(":")[0];if(o===t.user){e.k=i;break}let l=t.shareKeys[o];if(l){e.k=i,n=jr[o],n||(n=jr[o]=new Ze(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=xe(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=ae.Buffer.from((0,rr.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let i=e.key,o=Rt.packAttributes(e.attributes);dt(i).encryptCBC(o);let l=ae.Buffer.from(i);this.storage.aes.encryptECB(l);let a={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:je(o),k:je(l)}]},f=Lt(this.storage.shareKeys,this);return f.length>0&&(a.cr=Ht(this.storage,[{nodeId:"xxxxxxxx",key:i}],f)),this.api.request(a,(d,p)=>{if(d)return r(d);let m=this.storage._importFile(p.f[0]);this.storage.emit("add",m),r(null,m)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,i]=xe(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let o,l=Xe(e.key);l||(l=(0,rr.default)(24)),l instanceof ae.Buffer||(l=ae.Buffer.from(l));let a=e.uploadCiphertext?32:24;if(l.length!==a)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(o=l,l=An(l).slice(0,24)),e.key=l;let f=[],d=(v,k,c,y)=>{if(v)return m(v);if(!c||c.length===0){m(Error("Server returned a invalid response while uploading"));return}let g=Number(c.toString());if(g<0){m(Error("Server returned error "+g+" while uploading"));return}if(f[k]=c,k===0&&!o&&(o=y.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let A=Rt.packAttributes(e.attributes);dt(o).encryptCBC(A);let w=ae.Buffer.from(o);this.storage.aes.encryptECB(w);let E={h:je(f[0]),t:0,a:je(A),k:je(w)};f.length!==1&&(E.fa=f.slice(1).map((S,P)=>P+"*"+je(S)).filter(S=>S).join("/"));let I={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[E]},j=Lt(this.storage.shareKeys,this);j.length>0&&(I.cr=Ht(this.storage,[{nodeId:E.h,key:o}],j)),this.api.request(I,(S,P)=>{if(S)return m(S);let M=this.storage._importFile(P.f[0]);this.storage.emit("add",M),p.emit("complete",M),n&&n(null,M)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let p=this._upload(e,t,0,d);function m(v){p.listenerCount("error")?p.emit("error",v):n(v)}return p.complete=i,p}_upload(e,t,r,n){let i=e.uploadCiphertext?new Mr.PassThrough:Fi(e.key),o=i,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,o.end(t)),l!=null?(l===0&&i.end(),this._uploadWithSize(o,l,i,r,e,n)):o=Ni(o,a=>{this._uploadWithSize(o,a,i,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(o),o}_uploadAttribute(e,t,r,n){let i=(o,l)=>{if(o)return n(o);let a=l.length,f=Math.ceil(a/16)*16-a;f!==0&&(l=ae.Buffer.concat([l,ae.Buffer.alloc(f)])),(e.handle?dt(e.key):new Ze(e.key.slice(0,16))).encryptCBC(l);let d=new Mr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof ae.Buffer){i(null,t);return}vn(t,i)}_uploadWithSize(e,t,r,n,i,o){let l=i.forceHttps??!0?2:0,a=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};i.handle&&(a.h=i.handle);let f=n===0?i.initialChunkSize||128*1024:t,d=i.chunkSizeIncrement||128*1024,p=i.maxChunkSize||1024*1024,m=i.maxConnections||4,v=i.handleRetries||Qe.defaultHandleRetries,k=f,c=0,y=!1,g=0,A,w,E,I,j,S=()=>{I=Math.min(k,t-g),w=ae.Buffer.alloc(I),c++,k<p&&(k+=d),j=0,A&&(A.copy(w),j=Math.min(A.length,I),A=A.length>I?A.slice(I):null),j===I?P():(y=!0,z())},P=()=>{let x=g,R=w,F=0,G=()=>{F++,this.api.fetch(E+"/"+(n===0?x:n-1),{method:"POST",body:R,headers:{"content-length":R.length}}).then(ee=>{if(ee.status!==200)throw Error("MEGA returned a "+ee.status+" status code");return ee.arrayBuffer()}).then(ee=>{let oe=ae.Buffer.from(ee);oe.length>0?(r.end(),ue.nextTick(()=>{o(null,n,oe,r)})):g<t&&!y&&S()},ee=>{v(F,ee,oe=>{oe?e.emit("error",oe):G()})})};G(),w=null,g+=I,g<t&&!y&&c<m&&S()},M=0,z=()=>{for(;;){let x=r.read();if(x===null){r.once("readable",z);break}if(M+=x.length,e.emit("progress",{bytesLoaded:M,bytesTotal:t}),x.copy(w,j),j+=x.length,j>=I){y=!1,A=x.slice(x.length-(j-I)),P();break}}};r.on("end",()=>{t&&M!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+M))}),this.api.request(a,(x,R)=>{if(x)return o(x);E=R.p,S()})}uploadAttribute(e,t,r){let[n,i]=xe(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(o,l,a,f)=>{if(o)return n(o);let d={a:"pfa",n:this.nodeId,fa:e+"*"+je(a)};this.api.request(d,(p,m)=>{if(p)return n(p);n(null,this)})}),i}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof Qe))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=Lt(this.storage.shareKeys,e);return n.length>0&&(r.cr=Ht(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=xe(t);Object.assign(this.attributes,e);let i=Rt.packAttributes(this.attributes);return dt(this.key).encryptCBC(i),this.api.request({a:"a",n:this.nodeId,at:je(i)},o=>{this.parseAttributes(this.attributes),r(o)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=On.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,i]=xe(t);return this.api.request({a:"l",n:this.nodeId},(o,l)=>{if(o)return n(o);let a=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(a+=`#${je(r||this.key)}`),n(null,a)}),i}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let i=Xe(e.key);i||(i=(0,rr.default)(16)),i instanceof ae.Buffer||(i=ae.Buffer.from(i));let[o,l]=xe(t);if(i.length!==16)return o(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=i;let a=ae.Buffer.from(r+r);this.storage.aes.encryptECB(a);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:je(this.storage.aes.encryptECB(ae.Buffer.from(i))),ha:je(a),cr:Ht(this.storage,this)};return this.api.request(f,d=>{if(d)return o(d);this.link(Object.assign({__folderKey:i},e),o)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=xe(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=Qe.fromURL(e)),!(e instanceof Qe))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let i=(o,l)=>{if(o)return r(o);let a=Rt.packAttributes(l.attributes);dt(l.key).encryptCBC(a);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:je(a),k:je(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(p,m)=>{if(p)return r(p);let v=this.storage._importFile(m.f[0]);this.storage.emit("add",v),r(null,v)})};return e.attributes?i(null,e):e.loadAttributes(i),n}static packAttributes(e){let t=JSON.stringify(e);t=ae.Buffer.from(`MEGA${t}`);let r=ae.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Ht(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=Rn(t)),r||(r=t.map(o=>Lt(n,o)).reduce((o,l)=>o.concat(l)).filter((o,l,a)=>l===a.indexOf(o)));let i=[r,t.map(o=>o.nodeId),[]];for(let o=r.length;o--;){let l=new Ze(n[r[o]]);for(let a=t.length;a--;){let f=ae.Buffer.from(t[a].key);f&&(f.length===32||f.length===16)&&i[2].push(o,a,je(l.encryptECB(f)))}}return i}function Rn(e){return[e].concat((e.children||[]).map(Rn).reduce((t,r)=>t.concat(r),[]))}function Lt(e,t){let r=t.nodeId,n=t.parent,i=[];return e[r]&&i.push(r),n?i.concat(Lt(e,n)):i}var co=Rt,ho=class extends so.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=xe(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Yt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):ue.nextTick(()=>{r(null,this)})}login(e){let[t,r]=xe(e);if(typeof this.options.email!="string")return ue.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},i=f=>{this.api.request({a:"ug"},(d,p)=>{if(d)return f(d);this.name=p.name,this.user=p.u,this.options.autoload?this.reload(!0,m=>{if(m)return f(m);n()}):n()})};this.email=this.options.email.toLowerCase();let o=f=>{let d=Ci(ae.Buffer.from(this.options.password)),p=new Ze(d),m=je(p.stringhash(ae.Buffer.from(this.email))),v={a:"us",user:this.email,uh:m};a(v,p,f)},l=(f,d)=>{Di(ae.Buffer.from(this.options.password),f,(p,m)=>{if(p)return d(p);let v=new Ze(m.slice(0,16)),k=je(m.slice(16)),c={a:"us",user:this.email,uh:k};a(c,v,d)})},a=(f,d,p)=>{delete this.options.password,this.options.secondFactorCode&&(f.mfa=this.options.secondFactorCode.toString()),this.api.request(f,(m,v)=>{if(m)return p(m);this.key=Xe(v.k),d.decryptECB(this.key),this.aes=new Ze(this.key);let k=Xe(v.csid),c=this.aes.decryptECB(Xe(v.privk)),y=Ji(c);if(!y)throw Error("invalid credentials");let g=je(Xi(k,y).slice(0,43));this.api.sid=this.sid=g,this.RSAPrivateKey=y,i(p)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return o(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=xe(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(i,o)=>{var l;if(i)return r(i);this.shareKeys=o.ok.reduce((a,f)=>{let d=f.h,p=this.aes.encryptECB(ae.Buffer.from(d+d));return qi(Xe(f.ha),p)&&(a[d]=this.aes.decryptECB(Xe(f.k))),a},{});for(let a of o.f)if(a=this._importFile(a),o.ph!==void 0&&(a.shareId=(l=o.ph.find(f=>f.h===a.nodeId))==null?void 0:l.ph,a.shared=!!a.shareId,a.shared)){a.shareURL=`https://mega.nz/${a.directory?"folder":"file"}/${a.shareId}`;let f=a.directory?this.shareKeys[a.nodeId]:a.key;f&&(a.shareURL+="#"+je(f))}r(null,this.mounts)}),this.api.on("sc",i=>{let o={};i.forEach(l=>{if(l.a==="u"){let a=this.files[l.n];a&&(a.timestamp=l.ts,a.decryptAttributes(l.at),a.emit("update"),this.emit("update",a))}else l.a==="d"?o[l.n]=!0:l.a==="t"&&l.t.f.forEach(a=>{let f=this.files[a.h];if(f){delete o[a.h];let d=f.parent;if(d.nodeId===a.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[a.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(a))})}),Object.keys(o).forEach(l=>{let a=this.files[l],f=a.parent;f.children.splice(f.children.indexOf(a),1),this.emit("delete",a),a.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new co(e,this);if(e.t===po&&(this.root=t,t.name="Cloud Drive"),e.t===yo&&(this.trash=t,t.name="Rubbish Bin"),e.t===go&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=xe(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,i)=>{n&&t(n);let o={};o.type=i.utype,o.spaceUsed=i.cstrg,o.spaceTotal=i.mstrg,o.downloadBandwidthTotal=i.mxfer||Math.pow(1024,5)*10,o.downloadBandwidthUsed=i.caxfer||0,o.sharedBandwidthUsed=i.csxfer||0,o.sharedBandwidthLimit=i.srvratio,t(null,o)}),r}toJSON(){return{key:je(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new ho(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=_r(e.key),t.aes=new Ze(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},po=2,go=3,yo=4;Qe.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let nr=null;async function yt(){const e=await Qn("music",3,{upgrade(t,r,n,i,o){nr=r,r<1&&(t.createObjectStore("album",{keyPath:"folderName"}),t.createObjectStore("image",{keyPath:"id"}),t.createObjectStore("song",{keyPath:"id"})),r<2&&t.createObjectStore("albumFolder")}});return nr&&nr<3&&await e.clear("song"),e}async function mo(){const e=await yt(),t=await e.getAll("album"),r=await e.get("albumFolder","german")??[],n=await e.get("albumFolder","russian")??[],i=await e.get("albumFolder","instrumental")??[],o=await e.get("albumFolder","geistlicheLieder")??[],l=await e.get("albumFolder","russianBook")??[];return e.close(),{german:t.filter(a=>r.includes(a.folderName)),russian:t.filter(a=>n.includes(a.folderName)),instrumental:t.filter(a=>i.includes(a.folderName)),geistlicheLieder:t.find(a=>o.includes(a.folderName)),russianBook:t.find(a=>l.includes(a.folderName))}}async function bo(e){const t=await yt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian"),n.put(e.instrumental.map(l=>l.folderName),"instrumental"),n.put([e.geistlicheLieder.folderName],"geistlicheLieder"),n.put([e.russianBook.folderName],"russianBook");const i=r.objectStore("album");i.clear();const o=[];for(const l of e.german)o.push(i.put(l));for(const l of e.russian)o.push(i.put(l));for(const l of e.instrumental)o.push(i.put(l));o.push(i.put(e.geistlicheLieder)),o.push(i.put(e.russianBook)),await Promise.all(o),r.commit(),t.close()}const Nr={};async function Er(e){const t=Ne(e);let r=Nr[t];if(!r){const n=await wo(e);r=URL.createObjectURL(n),Nr[t]=r}return r}async function wo(e){const t=Ne(e),r=await yt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const i=await new Qe({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),o=new Blob([i]);return vo(e,o),o}async function vo(e,t){const n={id:Ne(e),blob:t},i=await yt();await i.add("image",n),i.close()}async function Tn(e){const t=Ne(e),r=await yt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const i=await new Qe({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),o=new Blob([i],{type:"audio/mpeg"});return _o(e,o),o}async function _o(e,t){const n={id:Ne(e),name:e.name,blob:t},i=await yt();await i.add("song",n),i.close()}async function Eo(){const e=await yt(),t=await e.getAllKeys("song");return e.close(),t}function Ne(e){return JSON.stringify(e.downloadId)}const Bt={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA",GEISTLICHE_LIEDER_URL:"https://mega.nz/folder/Dm5x2LRZ#OLhiAvvoX4qZTZGDLPn0SQ",RUSSIAN_BOOK:"https://mega.nz/folder/3zIxQbpT#pwb_r_7oq0ZRnerldK4sLA"};function ir(e){var t,r;return e.german.flatMap(n=>n.songs).concat(e.russian.flatMap(n=>n.songs)).concat(e.instrumental.flatMap(n=>n.songs)).concat(((t=e.geistlicheLieder)==null?void 0:t.songs.map(n=>({...n,name:n.name.split("_",2)[1]})))??[]).concat(((r=e.russianBook)==null?void 0:r.songs.map(n=>({...n,name:n.name.split("-",2)[1].trimStart()})))??[])}async function So(){return{german:await or(Bt.GERMAN_SONGS_URL),russian:await or(Bt.RUSSIAN_SONGS_URL),instrumental:await or(Bt.INSTRUMENTAL_SONGS_URL),geistlicheLieder:await Ur(Bt.GEISTLICHE_LIEDER_URL),russianBook:await Ur(Bt.RUSSIAN_BOOK)}}async function or(e){const t=Qe.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(Ln)}async function Ur(e){const t=Qe.fromURL(e);return await t.loadAttributes(),Ln(t)}function Ln(e){const t=e.children.find(r=>{var n;return(n=r.name)==null?void 0:n.endsWith(".jpg")});return{name:e.name.split("(")[0].trim(),folderName:e.name,image:t?{key:t.key,downloadId:t.downloadId,fileSize:t.size}:null,songs:e.children.filter(r=>r.name.endsWith(".mp3")||r.name.endsWith(".webm")||r.name.endsWith(".mp4")).map(r=>({name:r.name.substring(0,r.name.lastIndexOf(".")).trim(),link:{key:r.key,downloadId:r.downloadId,fileSize:r.size}}))}}async function Pt(e,t,r){try{const n=t[r];it.update(o=>({...o,isLoading:!0}));const i=await Tn({name:n.name,...n.link});Xt.update(o=>{const l=Ne(n.link);return o.includes(l)?o:[...o,l]}),it.update(o=>(o.src!=null&&URL.revokeObjectURL(o.src),{...o,isLoading:!1,src:URL.createObjectURL(i),album:e,song:n,playPrevious:r>0?()=>Pt(e,t,r-1):null,playNext:r<t.length-1?()=>Pt(e,t,r+1):null,playRandom:()=>Pt(e,t,Ao(t.length))}))}catch{it.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function Ao(e){return Math.floor(Math.random()*e)}const Sr="music/favorites";function ko(){gt.set(localStorage.getItem(Sr)??"")}async function Io(){Xt.set(await Eo())}function Bo(){let e=Pn(gt);return e==null&&(e=localStorage.getItem(Sr)??"",gt.set(e)),e}function Ar(e){const t=`;${Ne(e)};`,r=Bo();let n;(r==null?void 0:r.includes(t))??!1?n=r.replace(t,""):n=r+t,localStorage.setItem(Sr,n),gt.set(n)}function Oo(e){let t;const r=e[2].default,n=Nt(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ut(n,r,i,i[3],t?Dt(r,i[3],o,null):Ct(i[3]),null)},i(i){t||(le(n,i),t=!0)},o(i){fe(n,i),t=!1},d(i){n&&n.d(i)}}}function Ro(e){let t,r;const n=[{name:"arrow-right"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Oo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){Se(t.$$.fragment)},l(o){Ae(t.$$.fragment,o)},m(o,l){ke(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){fe(t.$$.fragment,o),r=!1},d(o){Ie(t,o)}}}function To(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M5 12l14 0"}],["path",{d:"M13 18l6 -6"}],["path",{d:"M13 6l6 6"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Lo extends He{constructor(t){super(),Ke(this,t,To,Ro,Ge,{})}}const Po=Lo;function $o(e){let t;const r=e[2].default,n=Nt(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ut(n,r,i,i[3],t?Dt(r,i[3],o,null):Ct(i[3]),null)},i(i){t||(le(n,i),t=!0)},o(i){fe(n,i),t=!1},d(i){n&&n.d(i)}}}function Mo(e){let t,r;const n=[{name:"arrows-shuffle"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[$o]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){Se(t.$$.fragment)},l(o){Ae(t.$$.fragment,o)},m(o,l){ke(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){fe(t.$$.fragment,o),r=!1},d(o){Ie(t,o)}}}function jo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M18 4l3 3l-3 3"}],["path",{d:"M18 20l3 -3l-3 -3"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class No extends He{constructor(t){super(),Ke(this,t,jo,Mo,Ge,{})}}const Uo=No;function Co(e){let t;const r=e[2].default,n=Nt(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ut(n,r,i,i[3],t?Dt(r,i[3],o,null):Ct(i[3]),null)},i(i){t||(le(n,i),t=!0)},o(i){fe(n,i),t=!1},d(i){n&&n.d(i)}}}function Do(e){let t,r;const n=[{name:"download"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Co]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){Se(t.$$.fragment)},l(o){Ae(t.$$.fragment,o)},m(o,l){ke(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){fe(t.$$.fragment,o),r=!1},d(o){Ie(t,o)}}}function Fo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}],["path",{d:"M7 11l5 5l5 -5"}],["path",{d:"M12 4l0 12"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class xo extends He{constructor(t){super(),Ke(this,t,Fo,Do,Ge,{})}}const kr=xo;function Wo(e){let t;const r=e[2].default,n=Nt(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ut(n,r,i,i[3],t?Dt(r,i[3],o,null):Ct(i[3]),null)},i(i){t||(le(n,i),t=!0)},o(i){fe(n,i),t=!1},d(i){n&&n.d(i)}}}function qo(e){let t,r;const n=[{name:"notes"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Wo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){Se(t.$$.fragment)},l(o){Ae(t.$$.fragment,o)},m(o,l){ke(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){fe(t.$$.fragment,o),r=!1},d(o){Ie(t,o)}}}function Vo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}],["path",{d:"M9 7l6 0"}],["path",{d:"M9 11l6 0"}],["path",{d:"M9 15l4 0"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class zo extends He{constructor(t){super(),Ke(this,t,Vo,qo,Ge,{})}}const Go=zo;function Ho(e){let t;const r=e[2].default,n=Nt(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ut(n,r,i,i[3],t?Dt(r,i[3],o,null):Ct(i[3]),null)},i(i){t||(le(n,i),t=!0)},o(i){fe(n,i),t=!1},d(i){n&&n.d(i)}}}function Ko(e){let t,r;const n=[{name:"player-pause"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Ho]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){Se(t.$$.fragment)},l(o){Ae(t.$$.fragment,o)},m(o,l){ke(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){fe(t.$$.fragment,o),r=!1},d(o){Ie(t,o)}}}function Yo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M6 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}],["path",{d:"M14 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Jo extends He{constructor(t){super(),Ke(this,t,Yo,Ko,Ge,{})}}const Xo=Jo;function Qo(e){let t,r,n,i,o,l;return r=new Un({}),{c(){t=Y("button"),Se(r.$$.fragment),this.h()},l(a){t=J(a,"BUTTON",{});var f=ie(t);Ae(r.$$.fragment,f),f.forEach(H),this.h()},h(){t.disabled=n=e[1].isLoading},m(a,f){Le(a,t,f),ke(r,t,null),i=!0,o||(l=Te(t,"click",e[6]),o=!0)},p(a,f){(!i||f&2&&n!==(n=a[1].isLoading))&&(t.disabled=n)},i(a){i||(le(r.$$.fragment,a),i=!0)},o(a){fe(r.$$.fragment,a),i=!1},d(a){a&&H(t),Ie(r),o=!1,l()}}}function Zo(e){let t,r,n,i,o;return r=new Xo({}),{c(){t=Y("button"),Se(r.$$.fragment)},l(l){t=J(l,"BUTTON",{});var a=ie(t);Ae(r.$$.fragment,a),a.forEach(H)},m(l,a){Le(l,t,a),ke(r,t,null),n=!0,i||(o=Te(t,"click",e[7]),i=!0)},p:et,i(l){n||(le(r.$$.fragment,l),n=!0)},o(l){fe(r.$$.fragment,l),n=!1},d(l){l&&H(t),Ie(r),i=!1,o()}}}function ea(e){let t,r,n,i,o,l,a,f,d,p,m=Kt(e[4])+"",v,k,c,y=Kt(e[3])+"",g,A,w,E,I,j,S,P,M,z,x,R,F,G,ee,oe,de,pe,ve,we,ge,ce,T=!0,U=!1,q,Q,me,ye;a=new jn({}),I=new dr({props:{isFavorite:e[1].song!=null&&e[5].includes(Ne(e[1].song.link))}}),P=new Nn({});const O=[Zo,Qo],L=[];function D(te,b){return te[2]?1:0}x=D(e),R=L[x]=O[x](e),ee=new Po({}),ve=new Uo({});function ne(){cancelAnimationFrame(q),ge.paused||(q=qn(ne),U=!0),e[13].call(ge)}return{c(){t=Y("div"),r=Y("div"),n=Y("div"),i=Y("input"),o=_e(),l=Y("button"),Se(a.$$.fragment),f=_e(),d=Y("div"),p=Y("p"),v=Ce(m),k=_e(),c=Y("p"),g=Ce(y),A=_e(),w=Y("div"),E=Y("button"),Se(I.$$.fragment),j=_e(),S=Y("button"),Se(P.$$.fragment),z=_e(),R.c(),F=_e(),G=Y("button"),Se(ee.$$.fragment),de=_e(),pe=Y("button"),Se(ve.$$.fragment),we=_e(),ge=Y("audio"),this.h()},l(te){t=J(te,"DIV",{class:!0});var b=ie(t);r=J(b,"DIV",{class:!0});var _=ie(r);n=J(_,"DIV",{class:!0});var W=ie(n);i=J(W,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=Ee(W),l=J(W,"BUTTON",{class:!0});var Z=ie(l);Ae(a.$$.fragment,Z),Z.forEach(H),W.forEach(H),_.forEach(H),f=Ee(b),d=J(b,"DIV",{class:!0});var be=ie(d);p=J(be,"P",{});var he=ie(p);v=De(he,m),he.forEach(H),k=Ee(be),c=J(be,"P",{});var N=ie(c);g=De(N,y),N.forEach(H),be.forEach(H),A=Ee(b),w=J(b,"DIV",{class:!0});var $e=ie(w);E=J($e,"BUTTON",{});var Je=ie(E);Ae(I.$$.fragment,Je),Je.forEach(H),j=Ee($e),S=J($e,"BUTTON",{});var Fe=ie(S);Ae(P.$$.fragment,Fe),Fe.forEach(H),z=Ee($e),R.l($e),F=Ee($e),G=J($e,"BUTTON",{});var nt=ie(G);Ae(ee.$$.fragment,nt),nt.forEach(H),de=Ee($e),pe=J($e,"BUTTON",{});var ct=ie(pe);Ae(ve.$$.fragment,ct),ct.forEach(H),$e.forEach(H),we=Ee(b),ge=J(b,"AUDIO",{id:!0,src:!0}),ie(ge).forEach(H),b.forEach(H),this.h()},h(){X(i,"class","range flex-1"),X(i,"type","range"),X(i,"min","0"),X(i,"max",e[3]),X(l,"class","inline btn btn-sm btn-circle ml-2 relative"),X(n,"class","flex flex-row items-center"),X(r,"class","flex-1 w-full max-w-lg relative mt-2"),X(d,"class","w-full max-w-lg flex flex-row justify-between"),S.disabled=M=e[1].playPrevious==null,G.disabled=oe=e[1].playNext==null,X(w,"class","h-8 flex justify-center gap-1"),X(ge,"id","audio"),ge.autoplay=!0,bt(ge.src,ce=e[1].src)||X(ge,"src",ce),e[3]===void 0&&Jt(()=>e[12].call(ge)),X(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(te,b){Le(te,t,b),V(t,r),V(r,n),V(n,i),Pe(i,e[0]),V(n,o),V(n,l),ke(a,l,null),V(t,f),V(t,d),V(d,p),V(p,v),V(d,k),V(d,c),V(c,g),V(t,A),V(t,w),V(w,E),ke(I,E,null),V(w,j),V(w,S),ke(P,S,null),V(w,z),L[x].m(w,null),V(w,F),V(w,G),ke(ee,G,null),V(w,de),V(w,pe),ke(ve,pe,null),V(t,we),V(t,ge),Q=!0,me||(ye=[Te(i,"change",e[10]),Te(i,"input",e[10]),Te(l,"click",e[9]),Te(E,"click",e[8]),Te(S,"click",function(){Gt(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),Te(G,"click",function(){Gt(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),Te(pe,"click",function(){Gt(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),Te(ge,"play",e[11]),Te(ge,"pause",e[11]),Te(ge,"durationchange",e[12]),Te(ge,"timeupdate",ne),Te(ge,"ended",function(){Gt(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],me=!0)},p(te,[b]){e=te,(!Q||b&8)&&X(i,"max",e[3]),b&1&&Pe(i,e[0]),(!Q||b&16)&&m!==(m=Kt(e[4])+"")&&wt(v,m),(!Q||b&8)&&y!==(y=Kt(e[3])+"")&&wt(g,y);const _={};b&34&&(_.isFavorite=e[1].song!=null&&e[5].includes(Ne(e[1].song.link))),I.$set(_),(!Q||b&2&&M!==(M=e[1].playPrevious==null))&&(S.disabled=M);let W=x;x=D(e),x===W?L[x].p(e,b):(st(),fe(L[W],1,1,()=>{L[W]=null}),lt(),R=L[x],R?R.p(e,b):(R=L[x]=O[x](e),R.c()),le(R,1),R.m(w,F)),(!Q||b&2&&oe!==(oe=e[1].playNext==null))&&(G.disabled=oe),(!Q||b&2&&!bt(ge.src,ce=e[1].src))&&X(ge,"src",ce),b&4&&T!==(T=e[2])&&ge[T?"pause":"play"](),!U&&b&1&&!isNaN(e[0])&&(ge.currentTime=e[0]),U=!1},i(te){Q||(le(a.$$.fragment,te),le(I.$$.fragment,te),le(P.$$.fragment,te),le(R),le(ee.$$.fragment,te),le(ve.$$.fragment,te),Q=!0)},o(te){fe(a.$$.fragment,te),fe(I.$$.fragment,te),fe(P.$$.fragment,te),fe(R),fe(ee.$$.fragment,te),fe(ve.$$.fragment,te),Q=!1},d(te){te&&H(t),Ie(a),Ie(I),Ie(P),L[x].d(),Ie(ee),Ie(ve),me=!1,Ft(ye)}}}function Kt(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function ta(e,t,r){let n,i,o;qe(e,it,E=>r(1,i=E)),qe(e,gt,E=>r(5,o=E));let l=null;hr(()=>{l=document.getElementById("audio")});let a=!0,f=0,d=0;async function p(E){const I=await Er(E);navigator.mediaSession.metadata.artwork=[{src:I}]}function m(){l.play()}function v(){l.pause()}function k(){i.song&&Ar(i.song.link)}function c(){it.set({isLoading:!1,song:null,album:null,src:null})}function y(){d=Mn(this.value),r(0,d)}function g(){a=this.paused,r(2,a)}function A(){f=this.duration,r(3,f)}function w(){d=this.currentTime,r(0,d)}return e.$$.update=()=>{var E,I,j;e.$$.dirty&1&&r(4,n=Math.round(d)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(E=i.song)==null?void 0:E.name,album:(I=i.album)==null?void 0:I.name}),(j=i.album)!=null&&j.image&&p(i.album.image),navigator.mediaSession.setActionHandler("nexttrack",i.playNext??null),navigator.mediaSession.setActionHandler("previoustrack",i.playPrevious??null))},[d,i,a,f,n,o,m,v,k,c,y,g,A,w]}class ra extends He{constructor(t){super(),Ke(this,t,ta,ea,Ge,{})}}function Cr(e,t,r){const n=e.slice();return n[11]=t[r],n}function na(e){let t,r,n,i,o;return r=new kr({}),{c(){t=Y("button"),Se(r.$$.fragment)},l(l){t=J(l,"BUTTON",{});var a=ie(t);Ae(r.$$.fragment,a),a.forEach(H)},m(l,a){Le(l,t,a),ke(r,t,null),n=!0,i||(o=Te(t,"click",e[6]),i=!0)},p:et,i(l){n||(le(r.$$.fragment,l),n=!0)},o(l){fe(r.$$.fragment,l),n=!1},d(l){l&&H(t),Ie(r),i=!1,o()}}}function ia(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Y("div"),t.innerHTML=r,this.h()},l(n){t=J(n,"DIV",{class:!0,"data-svelte-h":!0}),pt(t)!=="svelte-134bier"&&(t.innerHTML=r),this.h()},h(){X(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,i){Le(n,t,i)},p:et,d(n){n&&H(t)}}}function oa(e){let t,r,n;return{c(){t=Y("figure"),r=Y("img"),this.h()},l(i){t=J(i,"FIGURE",{});var o=ie(t);r=J(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(H),this.h()},h(){bt(r.src,n=e[1])||X(r,"src",n),X(r,"alt","Albumbild"),X(r,"class","w-48 h-48 object-scale-down")},m(i,o){Le(i,t,o),V(t,r)},p(i,o){o&2&&!bt(r.src,n=i[1])&&X(r,"src",n)},d(i){i&&H(t)}}}function Dr(e){let t,r;return t=new kr({}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function Fr(e){let t,r,n,i=e[11].name+"",o,l,a,f=e[3].includes(Ne(e[11].link)),d,p,m,v,k,c,y;function g(){return e[9](e[11])}let A=f&&Dr();m=new dr({props:{isFavorite:e[4].includes(Ne(e[11].link))}});function w(){return e[10](e[11])}return{c(){t=Y("li"),r=Y("button"),n=Y("p"),o=Ce(i),a=_e(),A&&A.c(),d=_e(),p=Y("button"),Se(m.$$.fragment),v=_e(),this.h()},l(E){t=J(E,"LI",{class:!0});var I=ie(t);r=J(I,"BUTTON",{class:!0});var j=ie(r);n=J(j,"P",{class:!0});var S=ie(n);o=De(S,i),S.forEach(H),j.forEach(H),a=Ee(I),A&&A.l(I),d=Ee(I),p=J(I,"BUTTON",{});var P=ie(p);Ae(m.$$.fragment,P),P.forEach(H),v=Ee(I),I.forEach(H),this.h()},h(){X(n,"class","flex-1 hover:underline"),X(r,"class",l=`w-full text-left ${e[11]===e[2].song?"font-bold":""}`),X(t,"class","flex")},m(E,I){Le(E,t,I),V(t,r),V(r,n),V(n,o),V(t,a),A&&A.m(t,null),V(t,d),V(t,p),ke(m,p,null),V(t,v),k=!0,c||(y=[Te(r,"click",g),Te(p,"click",w)],c=!0)},p(E,I){e=E,(!k||I&1)&&i!==(i=e[11].name+"")&&wt(o,i),(!k||I&5&&l!==(l=`w-full text-left ${e[11]===e[2].song?"font-bold":""}`))&&X(r,"class",l),I&9&&(f=e[3].includes(Ne(e[11].link))),f?A?I&9&&le(A,1):(A=Dr(),A.c(),le(A,1),A.m(t,d)):A&&(st(),fe(A,1,1,()=>{A=null}),lt());const j={};I&17&&(j.isFavorite=e[4].includes(Ne(e[11].link))),m.$set(j)},i(E){k||(le(A),le(m.$$.fragment,E),k=!0)},o(E){fe(A),fe(m.$$.fragment,E),k=!1},d(E){E&&H(t),A&&A.d(),Ie(m),c=!1,Ft(y)}}}function aa(e){let t,r,n,i,o,l,a,f,d;r=new Qr({props:{title:e[0].name??"Lädt...",withCloseButton:!0,$$slots:{default:[na]},$$scope:{ctx:e}}});function p(g,A){return g[1]?oa:ia}let m=p(e),v=m(e),k=_t(e[0].songs??[]),c=[];for(let g=0;g<k.length;g+=1)c[g]=Fr(Cr(e,k,g));const y=g=>fe(c[g],1,1,()=>{c[g]=null});return{c(){t=Y("main"),Se(r.$$.fragment),n=_e(),i=Y("div"),o=Y("div"),l=Y("div"),v.c(),a=_e(),f=Y("ul");for(let g=0;g<c.length;g+=1)c[g].c();this.h()},l(g){t=J(g,"MAIN",{class:!0});var A=ie(t);Ae(r.$$.fragment,A),n=Ee(A),i=J(A,"DIV",{class:!0});var w=ie(i);o=J(w,"DIV",{class:!0});var E=ie(o);l=J(E,"DIV",{class:!0});var I=ie(l);v.l(I),I.forEach(H),a=Ee(E),f=J(E,"UL",{class:!0});var j=ie(f);for(let S=0;S<c.length;S+=1)c[S].l(j);j.forEach(H),E.forEach(H),w.forEach(H),A.forEach(H),this.h()},h(){X(l,"class","mb-2"),X(f,"class","mx-2"),X(o,"class","card w-full md:w-96 bg-base-100 shadow-xl"),X(i,"class","flex-1 flex justify-center"),X(t,"class","flex-1 flex flex-col")},m(g,A){Le(g,t,A),ke(r,t,null),V(t,n),V(t,i),V(i,o),V(o,l),v.m(l,null),V(o,a),V(o,f);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(f,null);d=!0},p(g,[A]){const w={};if(A&1&&(w.title=g[0].name??"Lädt..."),A&16384&&(w.$$scope={dirty:A,ctx:g}),r.$set(w),m===(m=p(g))&&v?v.p(g,A):(v.d(1),v=m(g),v&&(v.c(),v.m(l,null))),A&61){k=_t(g[0].songs??[]);let E;for(E=0;E<k.length;E+=1){const I=Cr(g,k,E);c[E]?(c[E].p(I,A),le(c[E],1)):(c[E]=Fr(I),c[E].c(),le(c[E],1),c[E].m(f,null))}for(st(),E=k.length;E<c.length;E+=1)y(E);lt()}},i(g){if(!d){le(r.$$.fragment,g);for(let A=0;A<k.length;A+=1)le(c[A]);d=!0}},o(g){fe(r.$$.fragment,g),c=c.filter(Boolean);for(let A=0;A<c.length;A+=1)fe(c[A]);d=!1},d(g){g&&H(t),Ie(r),v.d(),Jr(c,g)}}}function sa(e,t,r){let n,i,o,l,a;qe(e,$t,c=>r(8,i=c)),qe(e,it,c=>r(2,o=c)),qe(e,Xt,c=>r(3,l=c)),qe(e,gt,c=>r(4,a=c));let{album:f}=t,d;async function p(c){const y=n.songs.indexOf(c);Pt(n,n.songs,y)}async function m(){for(const c of n.songs)await Tn({name:c.name,...c.link})}const v=c=>p(c),k=c=>Ar(c.link);return e.$$set=c=>{"album"in c&&r(7,f=c.album)},e.$$.update=()=>{e.$$.dirty&384&&r(0,n=i.german.concat(i.russian).concat(i.instrumental).find(c=>c.folderName===f)),e.$$.dirty&1&&n.image&&Er(n.image).then(c=>r(1,d=c))},[n,d,o,l,a,p,m,f,i,v,k]}class la extends He{constructor(t){super(),Ke(this,t,sa,aa,Ge,{album:7})}}function ua(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Y("div"),t.innerHTML=r,this.h()},l(n){t=J(n,"DIV",{class:!0,"data-svelte-h":!0}),pt(t)!=="svelte-m3w8dv"&&(t.innerHTML=r),this.h()},h(){X(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,i){Le(n,t,i)},p:et,d(n){n&&H(t)}}}function fa(e){let t,r,n;return{c(){t=Y("figure"),r=Y("img"),this.h()},l(i){t=J(i,"FIGURE",{});var o=ie(t);r=J(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(H),this.h()},h(){bt(r.src,n=e[1])||X(r,"src",n),X(r,"alt","Albumbild"),X(r,"class","w-48 h-48 object-scale-down")},m(i,o){Le(i,t,o),V(t,r)},p(i,o){o&2&&!bt(r.src,n=i[1])&&X(r,"src",n)},d(i){i&&H(t)}}}function ca(e){let t,r,n,i,o=e[0].name+"",l,a,f,d,p,m,v;function k(g,A){return g[1]?fa:ua}let c=k(e),y=c(e);return{c(){t=Y("div"),y.c(),r=_e(),n=Y("div"),i=Y("p"),l=Ce(o),a=_e(),f=Y("div"),d=Y("a"),p=Ce("Öffnen"),this.h()},l(g){t=J(g,"DIV",{id:!0,class:!0});var A=ie(t);y.l(A),r=Ee(A),n=J(A,"DIV",{class:!0});var w=ie(n);i=J(w,"P",{class:!0});var E=ie(i);l=De(E,o),E.forEach(H),w.forEach(H),a=Ee(A),f=J(A,"DIV",{class:!0});var I=ie(f);d=J(I,"A",{class:!0,href:!0});var j=ie(d);p=De(j,"Öffnen"),j.forEach(H),I.forEach(H),A.forEach(H),this.h()},h(){X(i,"class","card-title"),X(n,"class","card-body w-full md:w-96"),X(d,"class","btn btn-primary capitalize"),X(d,"href",m=`#album/${e[0].folderName}`),X(f,"class","card-actions justify-end"),X(t,"id",v=`album_card_${e[0].name}`),X(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(g,A){Le(g,t,A),y.m(t,null),V(t,r),V(t,n),V(n,i),V(i,l),V(t,a),V(t,f),V(f,d),V(d,p)},p(g,[A]){c===(c=k(g))&&y?y.p(g,A):(y.d(1),y=c(g),y&&(y.c(),y.m(t,r))),A&1&&o!==(o=g[0].name+"")&&wt(l,o),A&1&&m!==(m=`#album/${g[0].folderName}`)&&X(d,"href",m),A&1&&v!==(v=`album_card_${g[0].name}`)&&X(t,"id",v)},i:et,o:et,d(g){g&&H(t),y.d()}}}function ha(e,t,r){let{album:n}=t,i,o,l;return l=new IntersectionObserver(async a=>{a[0].isIntersecting&&!i&&(r(1,i=await Er(n.image)),l.unobserve(o),l=null)}),hr(()=>{o=document.getElementById(`album_card_${n.name}`),l.observe(o)}),$n(()=>{l==null||l.unobserve(o)}),e.$$set=a=>{"album"in a&&r(0,n=a.album)},[n,i]}class da extends He{constructor(t){super(),Ke(this,t,ha,ca,Ge,{album:0})}}function xr(e,t,r){const n=e.slice();return n[6]=t[r],n}function Wr(e,t){let r,n,i;return n=new da({props:{album:t[6]}}),{key:e,first:null,c(){r=Ir(),Se(n.$$.fragment),this.h()},l(o){r=Ir(),Ae(n.$$.fragment,o),this.h()},h(){this.first=r},m(o,l){Le(o,r,l),ke(n,o,l),i=!0},p(o,l){t=o;const a={};l&4&&(a.album=t[6]),n.$set(a)},i(o){i||(le(n.$$.fragment,o),i=!0)},o(o){fe(n.$$.fragment,o),i=!1},d(o){o&&H(r),Ie(n,o)}}}function pa(e){let t,r,n,i,o="Alle Alben",l,a="Deutsche Alben",f,d="Russische Alben",p,m="Instrumentelle Alben",v,k,c,y,g=[],A=new Map,w,E,I,j=_t(e[2]);const S=P=>P[6].folderName;for(let P=0;P<j.length;P+=1){let M=xr(e,j,P),z=S(M);A.set(z,g[P]=Wr(z,M))}return{c(){t=Y("div"),r=Y("div"),n=Y("select"),i=Y("option"),i.textContent=o,l=Y("option"),l.textContent=a,f=Y("option"),f.textContent=d,p=Y("option"),p.textContent=m,v=_e(),k=Y("input"),c=_e(),y=Y("div");for(let P=0;P<g.length;P+=1)g[P].c();this.h()},l(P){t=J(P,"DIV",{class:!0});var M=ie(t);r=J(M,"DIV",{class:!0});var z=ie(r);n=J(z,"SELECT",{class:!0});var x=ie(n);i=J(x,"OPTION",{"data-svelte-h":!0}),pt(i)!=="svelte-1i7obur"&&(i.textContent=o),l=J(x,"OPTION",{"data-svelte-h":!0}),pt(l)!=="svelte-1i51hln"&&(l.textContent=a),f=J(x,"OPTION",{"data-svelte-h":!0}),pt(f)!=="svelte-1opew9k"&&(f.textContent=d),p=J(x,"OPTION",{"data-svelte-h":!0}),pt(p)!=="svelte-hlo9rd"&&(p.textContent=m),x.forEach(H),v=Ee(z),k=J(z,"INPUT",{class:!0,placeholder:!0,type:!0}),z.forEach(H),c=Ee(M),y=J(M,"DIV",{class:!0});var R=ie(y);for(let F=0;F<g.length;F+=1)g[F].l(R);R.forEach(H),M.forEach(H),this.h()},h(){i.__value="all",Pe(i,i.__value),l.__value="german",Pe(l,l.__value),f.__value="russian",Pe(f,f.__value),p.__value="instrumental",Pe(p,p.__value),X(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Jt(()=>e[4].call(n)),X(k,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),X(k,"placeholder","Suche"),X(k,"type","search"),X(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),X(y,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),X(t,"class","flex-1 flex flex-col overflow-hidden")},m(P,M){Le(P,t,M),V(t,r),V(r,n),V(n,i),V(n,l),V(n,f),V(n,p),vt(n,e[1],!0),V(r,v),V(r,k),Pe(k,e[0]),V(t,c),V(t,y);for(let z=0;z<g.length;z+=1)g[z]&&g[z].m(y,null);w=!0,E||(I=[Te(n,"change",e[4]),Te(k,"input",e[5])],E=!0)},p(P,[M]){M&2&&vt(n,P[1]),M&1&&k.value!==P[0]&&Pe(k,P[0]),M&4&&(j=_t(P[2]),st(),g=Cn(g,M,S,1,P,j,A,y,Dn,Wr,null,xr),lt())},i(P){if(!w){for(let M=0;M<j.length;M+=1)le(g[M]);w=!0}},o(P){for(let M=0;M<g.length;M+=1)fe(g[M]);w=!1},d(P){P&&H(t);for(let M=0;M<g.length;M+=1)g[M].d();E=!1,Ft(I)}}}function ga(e,t,r){let n;qe(e,$t,d=>r(3,n=d));let i=[],o="",l="all";function a(){l=ar(this),r(1,l)}function f(){o=this.value,r(0,o)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian).concat(n.instrumental);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else if(l==="instrumental")d=n.instrumental;else throw new Error("No album selected.");r(2,i=d.filter(p=>o.toLocaleLowerCase().split(" ").every(m=>p.name.toLocaleLowerCase().includes(m))).sort((p,m)=>p.name>m.name?1:-1))}},[o,l,i,n,a,f]}class ya extends He{constructor(t){super(),Ke(this,t,ga,pa,Ge,{})}}function qr(e,t,r){const n=e.slice();return n[25]=t[r],n}function Vr(e){let t,r,n="Alle Lieder",i,o,l=_t(e[3]),a=[];for(let f=0;f<l.length;f+=1)a[f]=zr(qr(e,l,f));return{c(){t=Y("select"),r=Y("option"),r.textContent=n;for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){t=J(f,"SELECT",{class:!0});var d=ie(t);r=J(d,"OPTION",{"data-svelte-h":!0}),pt(r)!=="svelte-1023i8w"&&(r.textContent=n);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(H),this.h()},h(){r.__value=null,Pe(r,r.__value),X(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Jt(()=>e[20].call(t))},m(f,d){Le(f,t,d),V(t,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);vt(t,e[2],!0),i||(o=Te(t,"change",e[20]),i=!0)},p(f,d){if(d&8){l=_t(f[3]);let p;for(p=0;p<l.length;p+=1){const m=qr(f,l,p);a[p]?a[p].p(m,d):(a[p]=zr(m),a[p].c(),a[p].m(t,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}d&12&&vt(t,f[2])},d(f){f&&H(t),Jr(a,f),i=!1,o()}}}function zr(e){let t,r=e[25].name+"",n,i;return{c(){t=Y("option"),n=Ce(r),this.h()},l(o){t=J(o,"OPTION",{});var l=ie(t);n=De(l,r),l.forEach(H),this.h()},h(){t.__value=i=e[25],Pe(t,t.__value)},m(o,l){Le(o,t,l),V(t,n)},p(o,l){l&8&&r!==(r=o[25].name+"")&&wt(n,r),l&8&&i!==(i=o[25])&&(t.__value=i,Pe(t,t.__value))},d(o){o&&H(t)}}}function Gr(e){let t,r;return t=new kr({}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function ma(e){let t,r,n,i=e[24].name+"",o,l,a,f=e[5].includes(Ne(e[24].link)),d,p,m,v,k,c;function y(){return e[22](e[24])}let g=f&&Gr();m=new dr({props:{isFavorite:e[6].includes(Ne(e[24].link))}});function A(){return e[23](e[24])}return{c(){t=Y("li"),r=Y("button"),n=Y("p"),o=Ce(i),a=_e(),g&&g.c(),d=_e(),p=Y("button"),Se(m.$$.fragment),this.h()},l(w){t=J(w,"LI",{class:!0});var E=ie(t);r=J(E,"BUTTON",{class:!0});var I=ie(r);n=J(I,"P",{class:!0});var j=ie(n);o=De(j,i),j.forEach(H),I.forEach(H),a=Ee(E),g&&g.l(E),d=Ee(E),p=J(E,"BUTTON",{});var S=ie(p);Ae(m.$$.fragment,S),S.forEach(H),E.forEach(H),this.h()},h(){X(n,"class","flex-1 hover:underline"),X(r,"class",l=`w-full text-left ${e[24]===e[7].song?"font-bold":""}`),X(t,"class","flex")},m(w,E){Le(w,t,E),V(t,r),V(r,n),V(n,o),V(t,a),g&&g.m(t,null),V(t,d),V(t,p),ke(m,p,null),v=!0,k||(c=[Te(r,"click",y),Te(p,"click",A)],k=!0)},p(w,E){e=w,(!v||E&16777216)&&i!==(i=e[24].name+"")&&wt(o,i),(!v||E&16777344&&l!==(l=`w-full text-left ${e[24]===e[7].song?"font-bold":""}`))&&X(r,"class",l),E&16777248&&(f=e[5].includes(Ne(e[24].link))),f?g?E&16777248&&le(g,1):(g=Gr(),g.c(),le(g,1),g.m(t,d)):g&&(st(),fe(g,1,1,()=>{g=null}),lt());const I={};E&16777280&&(I.isFavorite=e[6].includes(Ne(e[24].link))),m.$set(I)},i(w){v||(le(g),le(m.$$.fragment,w),v=!0)},o(w){fe(g),fe(m.$$.fragment,w),v=!1},d(w){w&&H(t),g&&g.d(),Ie(m),k=!1,Ft(c)}}}function ba(e){let t,r,n,i,o,l,a,f,d,p,m,v,k,c,y,g,A,w,E,I,j,S,P,M,z,x,R,F=e[3]&&Vr(e);return M=new Fn({props:{items:e[4],height:"100%",$$slots:{default:[ma,({item:G})=>({24:G}),({item:G})=>G?16777216:0]},$$scope:{ctx:e}}}),{c(){t=Y("div"),r=Y("div"),n=Y("select"),i=Y("option"),o=Ce("Alle Lieder"),l=Y("option"),a=Ce("Favoriten"),f=Y("option"),d=Ce("Heruntergeladene Lieder"),p=Y("option"),m=Ce("Deutsche Lieder"),v=Y("option"),k=Ce("Russische Lieder"),c=Y("option"),y=Ce("Instrumentelle Lieder"),g=Y("option"),A=Ce("Geistliche Lieder"),w=Y("option"),E=Ce("Песнь Возрождения"),I=_e(),F&&F.c(),j=_e(),S=Y("input"),P=_e(),Se(M.$$.fragment),this.h()},l(G){t=J(G,"DIV",{class:!0});var ee=ie(t);r=J(ee,"DIV",{class:!0});var oe=ie(r);n=J(oe,"SELECT",{class:!0});var de=ie(n);i=J(de,"OPTION",{});var pe=ie(i);o=De(pe,"Alle Lieder"),pe.forEach(H),l=J(de,"OPTION",{});var ve=ie(l);a=De(ve,"Favoriten"),ve.forEach(H),f=J(de,"OPTION",{});var we=ie(f);d=De(we,"Heruntergeladene Lieder"),we.forEach(H),p=J(de,"OPTION",{});var ge=ie(p);m=De(ge,"Deutsche Lieder"),ge.forEach(H),v=J(de,"OPTION",{});var ce=ie(v);k=De(ce,"Russische Lieder"),ce.forEach(H),c=J(de,"OPTION",{});var T=ie(c);y=De(T,"Instrumentelle Lieder"),T.forEach(H),g=J(de,"OPTION",{});var U=ie(g);A=De(U,"Geistliche Lieder"),U.forEach(H),w=J(de,"OPTION",{});var q=ie(w);E=De(q,"Песнь Возрождения"),q.forEach(H),de.forEach(H),I=Ee(oe),F&&F.l(oe),j=Ee(oe),S=J(oe,"INPUT",{class:!0,placeholder:!0,type:!0}),oe.forEach(H),P=Ee(ee),Ae(M.$$.fragment,ee),ee.forEach(H),this.h()},h(){i.__value=e[8],Pe(i,i.__value),l.__value=e[9],Pe(l,l.__value),f.__value=e[10],Pe(f,f.__value),p.__value=e[11],Pe(p,p.__value),v.__value=e[12],Pe(v,v.__value),c.__value=e[13],Pe(c,c.__value),g.__value=e[14],Pe(g,g.__value),w.__value=e[15],Pe(w,w.__value),X(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Jt(()=>e[19].call(n)),X(S,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),X(S,"placeholder","Suche"),X(S,"type","search"),X(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),X(t,"class","flex-1 flex flex-col justify-center")},m(G,ee){Le(G,t,ee),V(t,r),V(r,n),V(n,i),V(i,o),V(n,l),V(l,a),V(n,f),V(f,d),V(n,p),V(p,m),V(n,v),V(v,k),V(n,c),V(c,y),V(n,g),V(g,A),V(n,w),V(w,E),vt(n,e[1],!0),V(r,I),F&&F.m(r,null),V(r,j),V(r,S),Pe(S,e[0]),V(t,P),ke(M,t,null),z=!0,x||(R=[Te(n,"change",e[19]),Te(S,"input",e[21])],x=!0)},p(G,[ee]){ee&65282&&vt(n,G[1]),G[3]?F?F.p(G,ee):(F=Vr(G),F.c(),F.m(r,j)):F&&(F.d(1),F=null),ee&1&&S.value!==G[0]&&Pe(S,G[0]);const oe={};ee&16&&(oe.items=G[4]),ee&285212896&&(oe.$$scope={dirty:ee,ctx:G}),M.$set(oe)},i(G){z||(le(M.$$.fragment,G),z=!0)},o(G){fe(M.$$.fragment,G),z=!1},d(G){G&&H(t),F&&F.d(),Ie(M),x=!1,Ft(R)}}}function wa(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}function Hr(e,t){return wa(e.name,t.name)}function va(e,t,r){let n,i,o,l,a,f;qe(e,$t,R=>r(18,o=R)),qe(e,Xt,R=>r(5,l=R)),qe(e,gt,R=>r(6,a=R)),qe(e,it,R=>r(7,f=R));let d="";const p={getSongs:R=>ir(R)},m={getSongs:R=>ir(R).filter(F=>a.includes(Ne(F.link)))},v={getSongs:R=>ir(R).filter(F=>l.includes(Ne(F.link)))},k={getAlbums:R=>R.german,getSongs:R=>R.german.flatMap(F=>F.songs)},c={getAlbums:R=>R.russian,getSongs:R=>R.russian.flatMap(F=>F.songs)},y={getAlbums:R=>R.instrumental,getSongs:R=>R.instrumental.flatMap(F=>F.songs)},g={getSongs:R=>R.geistlicheLieder.songs.map(F=>({...F,name:F.name.replace("_"," - ")}))},A={getSongs:R=>R.russianBook.songs};let w=p,E=null,I;async function j(R){const F=I.indexOf(R);Pt(null,I,F)}function S(){w=ar(this),r(1,w),r(15,A),r(14,g),r(13,y),r(12,c),r(11,k),r(10,v),r(9,m),r(8,p)}function P(){E=ar(this),r(2,E),r(3,n),r(1,w),r(18,o),r(3,n),r(1,w),r(18,o)}function M(){d=this.value,r(0,d)}const z=R=>j(R),x=R=>Ar(R.link);return e.$$.update=()=>{e.$$.dirty&262146&&r(3,n=w.getAlbums==null?null:w.getAlbums(o)),e.$$.dirty&12&&E&&(!n||!n.includes(E))&&r(2,E=null),e.$$.dirty&262150&&(E?r(17,I=E.songs.sort(Hr)):r(17,I=w.getSongs(o).sort(Hr))),e.$$.dirty&131073&&r(4,i=I.filter(R=>d.toLocaleLowerCase().split(" ").every(F=>R.name.toLocaleLowerCase().includes(F))))},[d,w,E,n,i,l,a,f,p,m,v,k,c,y,g,A,j,I,o,S,P,M,z,x]}class _a extends He{constructor(t){super(),Ke(this,t,va,ba,Ge,{})}}function Ea(e){let t,r,n;return r=new Go({}),{c(){t=Y("a"),Se(r.$$.fragment),this.h()},l(i){t=J(i,"A",{href:!0});var o=ie(t);Ae(r.$$.fragment,o),o.forEach(H),this.h()},h(){X(t,"href","/")},m(i,o){Le(i,t,o),ke(r,t,null),n=!0},p:et,i(i){n||(le(r.$$.fragment,i),n=!0)},o(i){fe(r.$$.fragment,i),n=!1},d(i){i&&H(t),Ie(r)}}}function Sa(e){let t,r;return t=new ya({}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function Aa(e){let t,r;return t=new _a({}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function ka(e){let t,r,n,i,o,l,a,f,d,p,m,v,k,c,y,g;r=new Qr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Ea]},$$scope:{ctx:e}}});const A=[Aa,Sa],w=[];function E(I,j){return I[0].url.hash===""?0:I[0].url.hash==="#alben"?1:-1}return~(c=E(e))&&(y=w[c]=A[c](e)),{c(){t=Y("div"),Se(r.$$.fragment),n=_e(),i=Y("div"),o=Y("a"),l=Ce("Lieder"),f=_e(),d=Y("a"),p=Ce("Alben"),v=_e(),k=Y("div"),y&&y.c(),this.h()},l(I){t=J(I,"DIV",{class:!0});var j=ie(t);Ae(r.$$.fragment,j),n=Ee(j),i=J(j,"DIV",{class:!0});var S=ie(i);o=J(S,"A",{class:!0,href:!0});var P=ie(o);l=De(P,"Lieder"),P.forEach(H),f=Ee(S),d=J(S,"A",{class:!0,href:!0});var M=ie(d);p=De(M,"Alben"),M.forEach(H),S.forEach(H),v=Ee(j),k=J(j,"DIV",{class:!0});var z=ie(k);y&&y.l(z),z.forEach(H),j.forEach(H),this.h()},h(){X(o,"class",a=`tab ${e[0].url.hash===""?"tab-active":""}`),X(o,"href","/music"),X(d,"class",m=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),X(d,"href","/music#alben"),X(i,"class","tabs justify-center"),X(k,"class","flex-1 flex overflow-auto p-1"),X(t,"class","flex-1 flex flex-col overflow-hidden")},m(I,j){Le(I,t,j),ke(r,t,null),V(t,n),V(t,i),V(i,o),V(o,l),V(i,f),V(i,d),V(d,p),V(t,v),V(t,k),~c&&w[c].m(k,null),g=!0},p(I,[j]){const S={};j&2&&(S.$$scope={dirty:j,ctx:I}),r.$set(S),(!g||j&1&&a!==(a=`tab ${I[0].url.hash===""?"tab-active":""}`))&&X(o,"class",a),(!g||j&1&&m!==(m=`tab ${I[0].url.hash==="#alben"?"tab-active":""}`))&&X(d,"class",m);let P=c;c=E(I),c!==P&&(y&&(st(),fe(w[P],1,1,()=>{w[P]=null}),lt()),~c?(y=w[c],y||(y=w[c]=A[c](I),y.c()),le(y,1),y.m(k,null)):y=null)},i(I){g||(le(r.$$.fragment,I),le(y),g=!0)},o(I){fe(r.$$.fragment,I),fe(y),g=!1},d(I){I&&H(t),Ie(r),~c&&w[c].d()}}}function Ia(e,t,r){let n;return qe(e,Xr,i=>r(0,n=i)),[n]}class Ba extends He{constructor(t){super(),Ke(this,t,Ia,ka,Ge,{})}}function Oa(e){let t,r;return t=new la({props:{album:e[2]()}}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},p:et,i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function Ra(e){let t,r;return t=new Ba({}),{c(){Se(t.$$.fragment)},l(n){Ae(t.$$.fragment,n)},m(n,i){ke(t,n,i),r=!0},p:et,i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){fe(t.$$.fragment,n),r=!1},d(n){Ie(t,n)}}}function Kr(e){let t,r,n,i,o=e[1].isLoading&&Yr();return n=new ra({}),{c(){o&&o.c(),t=_e(),r=Y("div"),Se(n.$$.fragment),this.h()},l(l){o&&o.l(l),t=Ee(l),r=J(l,"DIV",{class:!0});var a=ie(r);Ae(n.$$.fragment,a),a.forEach(H),this.h()},h(){X(r,"class","self-center mb-2 w-full")},m(l,a){o&&o.m(l,a),Le(l,t,a),Le(l,r,a),ke(n,r,null),i=!0},p(l,a){l[1].isLoading?o||(o=Yr(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i(l){i||(le(n.$$.fragment,l),i=!0)},o(l){fe(n.$$.fragment,l),i=!1},d(l){l&&(H(t),H(r)),o&&o.d(l),Ie(n)}}}function Yr(e){let t;return{c(){t=Y("progress"),this.h()},l(r){t=J(r,"PROGRESS",{class:!0}),ie(t).forEach(H),this.h()},h(){X(t,"class","progress w-56 self-center mb-2")},m(r,n){Le(r,t,n)},d(r){r&&H(t)}}}function Ta(e){let t,r,n,i,o,l,a;const f=[Ra,Oa],d=[];function p(v,k){return k&1&&(n=null),v[0].url.hash===""||v[0].url.hash==="#alben"?0:(n==null&&(n=!!v[0].url.hash.startsWith("#album")),n?1:-1)}~(i=p(e,-1))&&(o=d[i]=f[i](e));let m=(e[1].src!=null||e[1].isLoading)&&Kr(e);return{c(){t=Y("div"),r=Y("main"),o&&o.c(),l=_e(),m&&m.c(),this.h()},l(v){t=J(v,"DIV",{class:!0});var k=ie(t);r=J(k,"MAIN",{class:!0});var c=ie(r);o&&o.l(c),c.forEach(H),l=Ee(k),m&&m.l(k),k.forEach(H),this.h()},h(){X(r,"class","overflow-auto flex-1 flex flex-col"),X(t,"class","w-full h-full flex flex-col")},m(v,k){Le(v,t,k),V(t,r),~i&&d[i].m(r,null),V(t,l),m&&m.m(t,null),a=!0},p(v,[k]){let c=i;i=p(v,k),i===c?~i&&d[i].p(v,k):(o&&(st(),fe(d[c],1,1,()=>{d[c]=null}),lt()),~i?(o=d[i],o?o.p(v,k):(o=d[i]=f[i](v),o.c()),le(o,1),o.m(r,null)):o=null),v[1].src!=null||v[1].isLoading?m?(m.p(v,k),k&2&&le(m,1)):(m=Kr(v),m.c(),le(m,1),m.m(t,null)):m&&(st(),fe(m,1,1,()=>{m=null}),lt())},i(v){a||(le(o),le(m),a=!0)},o(v){fe(o),fe(m),a=!1},d(v){v&&H(t),~i&&d[i].d(),m&&m.d()}}}function La(e,t,r){let n,i;qe(e,Xr,l=>r(0,n=l)),qe(e,it,l=>r(1,i=l)),hr(()=>{(async()=>{xn()&&(Yt.getGlobalApi().userAgent=null),ko(),await Io(),mo().then($t.set),navigator.onLine&&await So().then(async a=>{$t.set(a),await bo(a)})})()});function o(){return decodeURI(n.url.hash.substring(7))}return[n,i,o]}class Ua extends He{constructor(t){super(),Ke(this,t,La,Ta,Ge,{})}}export{Ua as component};
