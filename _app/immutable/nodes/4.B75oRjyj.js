import{n as me,a as x,t as M,c as ke}from"../chunks/CIFocBDO.js";import{i as Ae}from"../chunks/tMrZPO6s.js";import{a5 as Ge,a6 as We,a7 as Be,H as I,p as D,v as le,Y as A,au as H,I as o,J as l,K as g,D as a,F as U,b as E,y as Je,f as fe,ad as Ke,L as Ye}from"../chunks/DMgpOUNq.js";import{r as pe,s as T,i as j,b as Qe,c as G,a as N}from"../chunks/_b71m-da.js";import{s as ge,C as Xe,F as Ne,a as ne,r as Me,b as Se,P as Ze,c as ye,D as Pe,T as ze,e as Ce,i as Ve,d as Le,V as ea,S as aa,p as Fe,f as ta}from"../chunks/GRGRIr0z.js";import{l as sa,d as He,s as ie,e as na}from"../chunks/BDe7l82h.js";import{g as Ie,a as X,t as De,p as Ee,b as ia,c as we}from"../chunks/BEqVYnbP.js";import{d as $e,f as Te,o as Oe,c as je}from"../chunks/DDsrNjAt.js";import{o as qe,a as Re}from"../chunks/9Wr19g68.js";function la(u,t,n=t){var i,e,d=()=>{cancelAnimationFrame(i),u.paused||(i=requestAnimationFrame(d));var p=u.currentTime;e!==p&&n(e=p)};i=requestAnimationFrame(d),u.addEventListener("timeupdate",d),We(()=>{var p=Number(t());e!==p&&!isNaN(p)&&(u.currentTime=e=p)}),Be(()=>{cancelAnimationFrame(i),u.removeEventListener("timeupdate",d)})}function ra(u,t,n=t){var i=t(),e=()=>{i!==u.paused&&n(i=u.paused)};sa(u,["play","pause","canplay"],e,i==null),Ge(()=>{(i=!!t())!==u.paused&&(i?u.pause():u.play().catch(()=>{n(i=!0)}))})}function oa(u,t,n,i,e){var d=()=>{i(n[u])};n.addEventListener(t,d),d(),(n===document.body||n===window||n===document)&&Be(()=>{n.removeEventListener(t,d)})}var ua=me('<svg><path fill="currentColor" d="M11 19v-6H2v-2h9V5l11 7z"></path></svg>');function ca(u,t){const n=pe(t,["$$slots","$$events","$$legacy"]);var i=ua();let e;I(()=>e=ge(i,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),x(u,i)}var va=me('<svg><path fill="currentColor" d="M13 19L2 12l11-7v6h9v2h-9z"></path></svg>');function da(u,t){const n=pe(t,["$$slots","$$events","$$legacy"]);var i=va();let e;I(()=>e=ge(i,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),x(u,i)}var fa=me('<svg><path fill="currentColor" d="M14 19V5h4v14zm-8 0V5h4v14z"></path></svg>');function ma(u,t){const n=pe(t,["$$slots","$$events","$$legacy"]);var i=fa();let e;I(()=>e=ge(i,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),x(u,i)}var pa=me('<svg><path fill="currentColor" d="M14 20v-2h2.6l-3.175-3.175L14.85 13.4L18 16.55V14h2v6zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4zm3.775-9.425L4 5.4L5.4 4l5.175 5.175z"></path></svg>');function ga(u,t){const n=pe(t,["$$slots","$$events","$$legacy"]);var i=pa();let e;I(()=>e=ge(i,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),x(u,i)}function _a(u,t){t()}function ba(u,t){t().song&&De(t().song.link)}var ha=M('<progress class="progress flex-1 self-center mx-2"></progress>'),$a=M('<input class="range flex-1 mx-2" type="range" min="0">'),xa=M('<button class="btn"><!></button>'),wa=M('<button class="btn"><!></button>'),ya=M('<div class="h-auto mb-2 flex flex-col items-center rounded-md border-t-2"><div class="flex-1 w-full max-w-lg relative mt-2 px-2"> </div> <div class="flex-1 w-full max-w-lg relative mt-2"><div class="flex flex-row items-center"><!> <button class="inline btn btn-sm btn-circle relative place-items-center"><!></button></div></div> <div class="w-full max-w-lg flex flex-row justify-between px-2"><p> </p> <p> </p></div> <div class="h-8 flex justify-center gap-2"><button class="btn"><!></button> <button class="btn"><!></button> <!> <button class="btn"><!></button> <button class="btn"><!></button></div> <audio id="audio" autoplay></audio></div>');function La(u,t){D(t,!0);const[n,i]=G(),e=()=>T($e,"$currentSong",n),d=()=>T(Te,"$favorites",n);let p=H(null),h=H(!0),b=H(0),c=H(0);const S=U(()=>Math.round(a(c)));async function C(s){const v=await Ie(s);navigator.mediaSession.metadata.artwork=[{src:v}]}function P(){navigator.mediaSession.setActionHandler("nexttrack",()=>{e().playNext?e().playNext():A(c,N(a(b))),L()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{e().playPrevious?e().playPrevious():A(c,0),L()}),navigator.mediaSession.setActionHandler("play",f),navigator.mediaSession.setActionHandler("pause",$),navigator.mediaSession.setActionHandler("stop",()=>{$(),k()}),navigator.mediaSession.setActionHandler("seekforward",s=>{const v=s.seekOffset||10;a(c)+v<a(b)?A(c,a(c)+v):A(c,N(a(b))),L()}),navigator.mediaSession.setActionHandler("seekbackward",s=>{const v=s.seekOffset||10;a(c)<v?A(c,0):A(c,a(c)-v),L()}),navigator.mediaSession.setActionHandler("seekto",s=>{s.seekTime&&(s.fastSeek?a(p).fastSeek(s.seekTime):A(c,N(s.seekTime)),L())})}qe(()=>P()),Re(()=>k()),le(()=>{var s,v,R;"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(s=e().song)==null?void 0:s.name,album:(v=e().album)==null?void 0:v.name}),(R=e().album)!=null&&R.image&&C(e().album.image),A(c,0))});function L(){"mediaSession"in navigator&&navigator.mediaSession.setPositionState({duration:a(b),position:a(S)})}function f(){a(p).play(),L(),navigator.mediaSession.playbackState="playing"}function $(){a(p).pause(),L(),navigator.mediaSession.playbackState="paused"}function k(){$e.set({isLoading:!1,song:null,album:null,src:null}),navigator.mediaSession.playbackState="none"}function _(s){return s=Math.round(s),`${Math.floor(s/60)}`.padStart(2,"0")+":"+`${s%60}`.padStart(2,"0")}const r=U(()=>{var s;return e().isLoading?"Lädt...":(s=e().song)==null?void 0:s.name});le(()=>{e().isLoading&&$()});var y=ya(),F=o(y),O=o(F,!0);l(F);var re=g(F,2),_e=o(re),Z=o(_e);{var oe=s=>{var v=ha();x(s,v)},ee=s=>{var v=$a();Me(v),v.__change=[_a,L],I(()=>ne(v,"max",a(b))),Se(v,()=>a(c),R=>A(c,R)),x(s,v)};j(Z,s=>{e().isLoading?s(oe):s(ee,!1)})}var W=g(Z,2);W.__click=k;var ue=o(W);Xe(ue,{}),l(W),l(_e),l(re);var J=g(re,2),K=o(J),ce=o(K,!0);l(K);var ae=g(K,2),ve=o(ae,!0);l(ae),l(J);var te=g(J,2),Y=o(te);Y.__click=[ba,e];var xe=o(Y);const be=U(()=>e().song!=null&&d().includes(X(e().song.link)));Ne(xe,{get isFavorite(){return a(be)}}),l(Y);var Q=g(Y,2);Q.__click=function(...s){var v;(v=e().playPrevious)==null||v.apply(this,s)};var m=o(Q);da(m,{}),l(Q);var w=g(Q,2);{var z=s=>{var v=xa();v.__click=$;var R=o(v);ma(R,{}),l(v),x(s,v)},de=s=>{var v=wa();v.__click=f;var R=o(v);Ze(R,{}),l(v),I(()=>v.disabled=e().isLoading),x(s,v)};j(w,s=>{!e().isLoading&&!a(h)?s(z):s(de,!1)})}var B=g(w,2);B.__click=function(...s){var v;(v=e().playNext)==null||v.apply(this,s)};var se=o(B);ca(se,{}),l(B);var V=g(B,2);V.__click=function(...s){var v;(v=e().playRandom)==null||v.apply(this,s)};var he=o(V);ga(he,{}),l(V),l(te);var q=g(te,2);Qe(q,s=>A(p,s),()=>a(p)),l(y),I((s,v)=>{ie(O,a(r)),ie(ce,s),ie(ve,v),Q.disabled=e().playPrevious==null,B.disabled=e().playNext==null,ne(q,"src",e().isLoading?"":e().src)},[()=>_(a(S)),()=>e().isLoading?"":_(a(b))]),na("ended",q,function(...s){var v;(v=e().playNext)==null||v.apply(this,s)}),ra(q,()=>a(h),s=>A(h,s)),oa("duration","durationchange",q,s=>A(b,s)),la(q,()=>a(c),s=>A(c,s)),x(u,y),E(),i()}He(["change","click"]);var ka=M('<div class="badge"><!></div>'),Aa=(u,t)=>De(t.music.link),Ma=M('<li class="flex"><button><p class="flex-1 hover:underline"> </p></button> <div class="flex gap-2"><!> <button class="btn btn-sm btn-circle"><!></button></div></li>');function Ue(u,t){D(t,!0);const[n,i]=G(),e=()=>T($e,"$currentSong",n),d=()=>T(Oe,"$offlineMusics",n),p=()=>T(Te,"$favorites",n);var h=Ma(),b=o(h);b.__click=function(..._){var r;(r=t.playMusic)==null||r.apply(this,_)};var c=o(b),S=o(c,!0);l(c),l(b);var C=g(b,2),P=o(C);{var L=_=>{var r=ka(),y=o(r);Pe(y,{}),l(r),x(_,r)};j(P,_=>{d().includes(X(t.music.link))&&_(L)})}var f=g(P,2);f.__click=[Aa,t];var $=o(f);const k=U(()=>p().includes(X(t.music.link)));Ne($,{get isFavorite(){return a(k)}}),l(f),l(C),l(h),I(()=>{ye(b,1,`w-full text-left ${t.music===e().song?"font-bold":""} cursor-pointer`),ie(S,t.music.name)}),x(u,h),E(),i()}He(["click"]);async function Sa(u,t){for(const n of a(t).musics)await ia({name:n.name,...n.link})}var Pa=M('<button class="btn"><!></button>'),Ca=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),Fa=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),Ha=M('<main class="flex-1 flex flex-col"><!> <div class="flex-1 flex justify-center mt-2"><div class="card w-full md:w-96 bg-base-100 shadow-xl"><div class="mb-2"><!></div> <ul class="mx-2"></ul></div></div></main>');function Ia(u,t){D(t,!0);const[n,i]=G(),e=()=>T(je,"$albums",n),d=U(()=>e().german.concat(e().russian).concat(e().instrumental).find(r=>r.folderName===t.album));let p=H(null);le(()=>{a(d).image&&Ie(a(d).image).then(r=>A(p,N(r)))});async function h(r){const y=a(d).musics.indexOf(r);Ee(a(d),a(d).musics,y)}var b=Ha(),c=o(b);const S=U(()=>a(d).name??"Lädt...");ze(c,{get title(){return a(S)},withCloseButton:!0,children:(r,y)=>{var F=Pa();F.__click=[Sa,d];var O=o(F);Pe(O,{}),l(F),x(r,F)},$$slots:{default:!0}});var C=g(c,2),P=o(C),L=o(P),f=o(L);{var $=r=>{var y=Ca(),F=o(y);l(y),I(()=>ne(F,"src",a(p))),x(r,y)},k=r=>{var y=Fa();x(r,y)};j(f,r=>{a(p)?r($):r(k,!1)})}l(L);var _=g(L,2);Ce(_,21,()=>a(d).musics,Ve,(r,y)=>{Ue(r,{get music(){return a(y)},playMusic:()=>h(a(y))})}),l(_),l(P),l(C),l(b),x(u,b),E(),i()}He(["click"]);var Ta=me('<svg><path fill="currentColor" d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h10l6 6v10q0 .825-.587 1.413T19 21zm2-4h10v-2H7zm0-4h10v-2H7zm0-4h7V7H7z"></path></svg>');function ja(u,t){const n=pe(t,["$$slots","$$events","$$legacy"]);var i=Ta();let e;I(()=>e=ge(i,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),x(u,i)}var Ba=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),Na=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),za=M('<div class="card w-full md:w-96 bg-base-100 shadow-xl h-min"><!> <div class="card-body w-full md:w-96"><p class="card-title"> </p></div> <div class="card-actions justify-end"><a class="btn capitalize">Öffnen</a></div></div>');function Va(u,t){D(t,!0);let n=H(null),i=H(null),e;e=new IntersectionObserver(async f=>{f[0].isIntersecting&&!a(n)&&(A(n,N(await Ie(t.album.image))),e.unobserve(a(i)),e=null)}),qe(()=>{A(i,N(document.getElementById(`album_card_${t.album.name}`))),e.observe(a(i))}),Re(()=>{e==null||e.unobserve(a(i))});var d=za(),p=o(d);{var h=f=>{var $=Ba(),k=o($);l($),I(()=>ne(k,"src",a(n))),x(f,$)},b=f=>{var $=Na();x(f,$)};j(p,f=>{a(n)?f(h):f(b,!1)})}var c=g(p,2),S=o(c),C=o(S,!0);l(S),l(c);var P=g(c,2),L=o(P);l(P),l(d),I(()=>{ne(d,"id",`album_card_${t.album.name}`),ie(C,t.album.name),ne(L,"href",`#album/${t.album.folderName}`)}),x(u,d),E()}var Da=M('<div class="flex-1 flex flex-col overflow-hidden"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Alben</option><option>Deutsche Alben</option><option>Russische Alben</option><option>Instrumentelle Alben</option></select> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <div class="flex-1 flex flex-wrap justify-between gap-4 overflow-auto"></div></div>');function Ea(u,t){D(t,!0);const[n,i]=G(),e=()=>T(je,"$albums",n);let d=H(N([])),p=H(""),h=H("all");le(()=>{let _;if(a(h)==="all")_=e().german.concat(e().russian).concat(e().instrumental);else if(a(h)==="german")_=e().german;else if(a(h)==="russian")_=e().russian;else if(a(h)==="instrumental")_=e().instrumental;else throw new Error("No album selected.");A(d,N(_.filter(r=>a(p).toLocaleLowerCase().split(" ").every(y=>r.name.toLocaleLowerCase().includes(y))).sort((r,y)=>r.name>y.name?1:-1)))});var b=Da(),c=o(b),S=o(c),C=o(S);C.value=(C.__value="all")==null?"":"all";var P=g(C);P.value=(P.__value="german")==null?"":"german";var L=g(P);L.value=(L.__value="russian")==null?"":"russian";var f=g(L);f.value=(f.__value="instrumental")==null?"":"instrumental",l(S);var $=g(S,2);Me($),l(c);var k=g(c,2);Ce(k,21,()=>a(d),_=>_.folderName,(_,r)=>{Va(_,{get album(){return a(r)}})}),l(k),l(b),Le(S,()=>a(h),_=>A(h,_)),Se($,()=>a(p),_=>A(p,_)),x(u,b),E(),i()}var Oa=M("<option> </option>"),qa=M('<select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><!></select>'),Ra=M('<div class="flex-1 flex flex-col justify-center"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><option>Favoriten</option><option>Heruntergeladene Lieder</option><option>Deutsche Lieder</option><option>Russische Lieder</option><option>Instrumentelle Lieder</option><option>Geistliche Lieder</option><option>Песнь Возрождения</option></select> <!> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <!></div>');function Ua(u,t){D(t,!0);const[n,i]=G(),e=()=>T(Te,"$favorites",n),d=()=>T(Oe,"$offlineMusics",n),p=()=>T(je,"$albums",n);let h=H("");const b={getMusics:m=>we(m)},c={getMusics:m=>we(m).filter(w=>e().includes(X(w.link)))},S={getMusics:m=>we(m).filter(w=>d().includes(X(w.link)))},C={getAlbums:m=>m.german,getMusics:m=>m.german.flatMap(w=>w.musics)},P={getAlbums:m=>m.russian,getMusics:m=>m.russian.flatMap(w=>w.musics)},L={getAlbums:m=>m.instrumental,getMusics:m=>m.instrumental.flatMap(w=>w.musics)},f={getMusics:m=>m.geistlicheLieder.musics.map(w=>({...w,name:w.name.replace("_"," - ")}))},$={getMusics:m=>m.russianBook.musics};let k=H(N(b));const _=U(()=>a(k).getAlbums==null?null:a(k).getAlbums(p()));let r=H(null);le(()=>{a(r)&&(!a(_)||!a(_).includes(a(r)))&&A(r,null)});function y(m,w){return m.localeCompare(w,void 0,{numeric:!0,sensitivity:"base"})}function F(m,w){return y(m.name,w.name)}let O=H(N([]));le(()=>{A(O,N(a(r)!=null?a(r).musics.sort(F):a(k).getMusics(p()).sort(F)))});async function re(m){const w=a(O).indexOf(m),z=[...p().german,...p().russian,...p().instrumental,p().geistlicheLieder,p().russianBook].find(de=>de.musics.some(B=>X(B.link)===X(m.link)))??null;Ee(z,a(O),w)}const _e=U(()=>a(O).filter(m=>a(h).toLocaleLowerCase().split(" ").every(w=>m.name.toLocaleLowerCase().includes(w))));var Z=Ra(),oe=o(Z),ee=o(oe),W=o(ee);W.value=(W.__value=b)==null?"":b;var ue=g(W);ue.value=(ue.__value=c)==null?"":c;var J=g(ue);J.value=(J.__value=S)==null?"":S;var K=g(J);K.value=(K.__value=C)==null?"":C;var ce=g(K);ce.value=(ce.__value=P)==null?"":P;var ae=g(ce);ae.value=(ae.__value=L)==null?"":L;var ve=g(ae);ve.value=(ve.__value=f)==null?"":f;var te=g(ve);te.value=(te.__value=$)==null?"":$,l(ee);var Y=g(ee,2);{var xe=m=>{var w=qa(),z=o(w);z.value=(z.__value=null)==null?"":null;var de=g(z);Ce(de,17,()=>a(_),Ve,(B,se)=>{var V=Oa(),he={},q=o(V,!0);l(V),I(()=>{he!==(he=a(se))&&(V.value=(V.__value=a(se))==null?"":a(se)),ie(q,a(se).name)}),x(B,V)}),l(w),Le(w,()=>a(r),B=>A(r,B)),x(m,w)};j(Y,m=>{a(_)&&m(xe)})}var be=g(Y,2);Me(be),l(oe);var Q=g(oe,2);ea(Q,{get items(){return a(_e)},height:"100%",children:(w,z=Je)=>{Ue(w,{get music(){return z()},playMusic:()=>re(z())})},$$slots:{default:!0}}),l(Z),Le(ee,()=>a(k),m=>A(k,m)),Se(be,()=>a(h),m=>A(h,m)),x(u,Z),E(),i()}var Ga=M('<a class="btn" href="/"><!></a> <a class="btn" href="#settings"><!></a>',1),Wa=M('<div class="flex-1 flex flex-col overflow-hidden"><!> <div class="tabs justify-center"><a href="/music">Lieder</a> <a href="/music#alben">Alben</a></div> <div class="flex-1 flex overflow-auto p-1"><!></div></div>');function Ja(u,t){D(t,!1);const[n,i]=G(),e=()=>T(Fe,"$page",n);Ae();var d=Wa(),p=o(d);ze(p,{title:"Geistliche Lieder!",withCloseButton:!1,children:(f,$)=>{var k=Ga(),_=fe(k),r=o(_);ja(r,{}),l(_);var y=g(_,2),F=o(y);aa(F,{}),l(y),x(f,k)},$$slots:{default:!0}});var h=g(p,2),b=o(h),c=g(b,2);l(h);var S=g(h,2),C=o(S);{var P=f=>{Ua(f,{})},L=f=>{var $=ke(),k=fe($);{var _=r=>{Ea(r,{})};j(k,r=>{e().url.hash==="#alben"&&r(_)},!0)}x(f,$)};j(C,f=>{e().url.hash===""?f(P):f(L,!1)})}l(S),l(d),I(()=>{ye(b,1,`tab ${e().url.hash===""?"tab-active":""}`),ye(c,1,`tab ${e().url.hash==="#alben"?"tab-active":""}`)}),x(u,d),E(),i()}var Ka=M('<div class="self-center mb-2 w-full"><!></div>'),Ya=M('<div class="w-full h-full flex flex-col"><main class="overflow-auto flex-1 flex flex-col"><!></main> <!></div>');function Qa(u,t){D(t,!1);const[n,i]=G(),e=()=>T(Fe,"$page",n),d=()=>T($e,"$currentSong",n);function p(){return decodeURI(e().url.hash.substring(7))}Ae();var h=Ya(),b=o(h),c=o(b);{var S=f=>{Ja(f,{})},C=f=>{var $=ke(),k=fe($);{var _=r=>{const y=Ke(p);Ia(r,{get album(){return a(y)}})};j(k,r=>{e().url.hash.startsWith("#album")&&r(_)},!0)}x(f,$)};j(c,f=>{e().url.hash===""||e().url.hash==="#alben"?f(S):f(C,!1)})}l(b);var P=g(b,2);{var L=f=>{var $=Ka(),k=o($);La(k,{}),l($),x(f,$)};j(P,f=>{(d().src!=null||d().isLoading)&&f(L)})}l(h),x(u,h),E(),i()}var Xa=M(`<div class="divider">Info</div> <p class="inline">Nachdem Lieder einmal ausgewählt wurden, werden diese heruntergeladen und
    offline gespeichert. Danach können diese Lieder auch ohne Internet gehört
    werden und werden selbst bei einer Internetverbindung nicht erneut
    heruntergeladen. Dass ein Lied heruntergeladen wurde, erkennt man am <!>-Icon</p>`,1);function Za(u){ta(u,{children:(t,n)=>{var i=Xa(),e=g(fe(i),2),d=g(o(e));Pe(d,{class:"inline"}),Ye(),l(e),x(t,i)},$$slots:{default:!0}})}function ut(u,t){D(t,!1);const[n,i]=G(),e=()=>T(Fe,"$page",n);Ae();var d=ke(),p=fe(d);{var h=c=>{Za(c)},b=c=>{Qa(c,{})};j(p,c=>{e().url.hash==="#settings"?c(h):c(b,!1)})}x(u,d),E(),i()}export{ut as component};
