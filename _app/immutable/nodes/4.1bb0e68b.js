import{n as Qe,k as Ln,s as qe,l as We,m as tt,c as Ut,u as Ct,g as Dt,d as Ft,p as bt,q as Jt,r as Bt,v as Xt,e as Ge,o as dr,w as Mn}from"../chunks/scheduler.b756a13f.js";import{S as Ve,i as ze,r as we,u as ve,v as _e,d as ae,t as ue,w as Ee,g as Y,s as Ie,m as Ue,h as J,j as ie,c as Be,f as H,n as Ce,k as X,a as ke,x as G,z as Le,A as $e,o as Mt,p as st,b as lt,B as Pn,C as Kr,y as it,D as wt,e as Kt,E as sr}from"../chunks/index.a4871ec6.js";import{p as pr}from"../chunks/stores.fdee632d.js";import{I as xt,g as Wt,a as qt,b as jn,F as Yr,c as Nn,d as Un,T as Jr,e as vt,u as Cn,o as Dn,V as Fn,f as xn,i as Wn,S as qn}from"../chunks/SettingsPage.e75755b0.js";import{f as gt,o as Qt,c as pt,a as Pt}from"../chunks/store.35f58f5c.js";const Vn=typeof window<"u";let zn=Vn?e=>requestAnimationFrame(e):Qe;const Gn=(e,t)=>t.some(r=>e instanceof r);let Ir,Br;function Hn(){return Ir||(Ir=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kn(){return Br||(Br=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xr=new WeakMap,lr=new WeakMap,Qr=new WeakMap,er=new WeakMap,gr=new WeakMap;function Yn(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{r(ot(e.result)),i()},l=()=>{n(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Xr.set(r,e)}).catch(()=>{}),gr.set(t,e),t}function Jn(e){if(lr.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{r(),i()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});lr.set(e,t)}let ur={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return lr.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Qr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ot(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xn(e){ur=e(ur)}function Qn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(tr(this),t,...r);return Qr.set(n,t.sort?t.sort():[t]),ot(n)}:Kn().includes(e)?function(...t){return e.apply(tr(this),t),ot(Xr.get(this))}:function(...t){return ot(e.apply(tr(this),t))}}function Zn(e){return typeof e=="function"?Qn(e):(e instanceof IDBTransaction&&Jn(e),Gn(e,Hn())?new Proxy(e,ur):e)}function ot(e){if(e instanceof IDBRequest)return Yn(e);if(er.has(e))return er.get(e);const t=Zn(e);return t!==e&&(er.set(e,t),gr.set(t,e)),t}const tr=e=>gr.get(e);function ei(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),a=ot(l);return n&&l.addEventListener("upgradeneeded",f=>{n(ot(l.result),f.oldVersion,f.newVersion,ot(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),a.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const ti=["get","getKey","getAll","getAllKeys","count"],ri=["put","add","delete","clear"],rr=new Map;function Or(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rr.get(t))return rr.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=ri.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||ti.includes(r)))return;const o=async function(l,...a){const f=this.transaction(l,i?"readwrite":"readonly");let h=f.store;return n&&(h=h.index(a.shift())),(await Promise.all([h[r](...a),i&&f.done]))[0]};return rr.set(t,o),o}Xn(e=>({...e,get:(t,r,n)=>Or(t,r)||e.get(t,r,n),has:(t,r)=>!!Or(t,r)||e.has(t,r)}));var ni=Object.create,yr=Object.defineProperty,ii=Object.getOwnPropertyDescriptor,oi=Object.getOwnPropertyNames,ai=Object.getPrototypeOf,si=Object.prototype.hasOwnProperty,li=e=>yr(e,"__esModule",{value:!0}),ui=(e,t)=>()=>(e&&(t=e(e=0)),t),le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fi=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oi(t))!si.call(e,i)&&(r||i!=="default")&&yr(e,i,{get:()=>t[i],enumerable:!(n=ii(t,i))||n.enumerable});return e},Ye=(e,t)=>fi(li(yr(e!=null?ni(ai(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ci=le(e=>{re(),e.byteLength=f,e.toByteArray=p,e.fromByteArray=k;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,l=i.length;o<l;++o)t[o]=i[o],r[i.charCodeAt(o)]=o;var o,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(d){var g=d.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=d.indexOf("=");y===-1&&(y=g);var S=y===g?0:4-y%4;return[y,S]}function f(d){var g=a(d),y=g[0],S=g[1];return(y+S)*3/4-S}function h(d,g,y){return(g+y)*3/4-y}function p(d){var g,y=a(d),S=y[0],w=y[1],A=new n(h(d,S,w)),B=0,P=w>0?S-4:S,E;for(E=0;E<P;E+=4)g=r[d.charCodeAt(E)]<<18|r[d.charCodeAt(E+1)]<<12|r[d.charCodeAt(E+2)]<<6|r[d.charCodeAt(E+3)],A[B++]=g>>16&255,A[B++]=g>>8&255,A[B++]=g&255;return w===2&&(g=r[d.charCodeAt(E)]<<2|r[d.charCodeAt(E+1)]>>4,A[B++]=g&255),w===1&&(g=r[d.charCodeAt(E)]<<10|r[d.charCodeAt(E+1)]<<4|r[d.charCodeAt(E+2)]>>2,A[B++]=g>>8&255,A[B++]=g&255),A}function m(d){return t[d>>18&63]+t[d>>12&63]+t[d>>6&63]+t[d&63]}function _(d,g,y){for(var S,w=[],A=g;A<y;A+=3)S=(d[A]<<16&16711680)+(d[A+1]<<8&65280)+(d[A+2]&255),w.push(m(S));return w.join("")}function k(d){for(var g,y=d.length,S=y%3,w=[],A=16383,B=0,P=y-S;B<P;B+=A)w.push(_(d,B,B+A>P?P:B+A));return S===1?(g=d[y-1],w.push(t[g>>2]+t[g<<4&63]+"==")):S===2&&(g=(d[y-2]<<8)+d[y-1],w.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),w.join("")}}),hi=le(e=>{re(),e.read=function(t,r,n,i,o){var l,a,f=o*8-i-1,h=(1<<f)-1,p=h>>1,m=-7,_=n?o-1:0,k=n?-1:1,d=t[r+_];for(_+=k,l=d&(1<<-m)-1,d>>=-m,m+=f;m>0;l=l*256+t[r+_],_+=k,m-=8);for(a=l&(1<<-m)-1,l>>=-m,m+=i;m>0;a=a*256+t[r+_],_+=k,m-=8);if(l===0)l=1-p;else{if(l===h)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),l=l-p}return(d?-1:1)*a*Math.pow(2,l-i)},e.write=function(t,r,n,i,o,l){var a,f,h,p=l*8-o-1,m=(1<<p)-1,_=m>>1,k=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:l-1,g=i?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,a=m):(a=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+_>=1?r+=k/h:r+=k*Math.pow(2,1-_),r*h>=2&&(a++,h/=2),a+_>=m?(f=0,a=m):a+_>=1?(f=(r*h-1)*Math.pow(2,o),a=a+_):(f=r*Math.pow(2,_-1)*Math.pow(2,o),a=0));o>=8;t[n+d]=f&255,d+=g,f/=256,o-=8);for(a=a<<o|f,p+=o;p>0;t[n+d]=a&255,d+=g,a/=256,p-=8);t[n+d-g]|=y*128}}),Vt=le(e=>{re();var t=ci(),r=hi(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let s=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(s,u),s.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(s){if(s>i)throw new RangeError('The value "'+s+'" is invalid for option "size"');let u=new Uint8Array(s);return Object.setPrototypeOf(u,a.prototype),u}function a(s,u,c){if(typeof s=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(s)}return f(s,u,c)}a.poolSize=8192;function f(s,u,c){if(typeof s=="string")return _(s,u);if(ArrayBuffer.isView(s))return d(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(De(s,ArrayBuffer)||s&&De(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(s,SharedArrayBuffer)||s&&De(s.buffer,SharedArrayBuffer)))return g(s,u,c);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=s.valueOf&&s.valueOf();if(I!=null&&I!==s)return a.from(I,u,c);let L=y(s);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return a.from(s[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}a.from=function(s,u,c){return f(s,u,c)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function p(s,u,c){return h(s),s<=0?l(s):u!==void 0?typeof c=="string"?l(s).fill(u,c):l(s).fill(u):l(s)}a.alloc=function(s,u,c){return p(s,u,c)};function m(s){return h(s),l(s<0?0:S(s)|0)}a.allocUnsafe=function(s){return m(s)},a.allocUnsafeSlow=function(s){return m(s)};function _(s,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let c=A(s,u)|0,I=l(c),L=I.write(s,u);return L!==c&&(I=I.slice(0,L)),I}function k(s){let u=s.length<0?0:S(s.length)|0,c=l(u);for(let I=0;I<u;I+=1)c[I]=s[I]&255;return c}function d(s){if(De(s,Uint8Array)){let u=new Uint8Array(s);return g(u.buffer,u.byteOffset,u.byteLength)}return k(s)}function g(s,u,c){if(u<0||s.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let I;return u===void 0&&c===void 0?I=new Uint8Array(s):c===void 0?I=new Uint8Array(s,u):I=new Uint8Array(s,u,c),Object.setPrototypeOf(I,a.prototype),I}function y(s){if(a.isBuffer(s)){let u=S(s.length)|0,c=l(u);return c.length===0||s.copy(c,0,0,u),c}if(s.length!==void 0)return typeof s.length!="number"||nt(s.length)?l(0):k(s);if(s.type==="Buffer"&&Array.isArray(s.data))return k(s.data)}function S(s){if(s>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return s|0}function w(s){return+s!=s&&(s=0),a.alloc(+s)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,u){if(De(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),De(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(s)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let c=s.length,I=u.length;for(let L=0,F=Math.min(c,I);L<F;++L)if(s[L]!==u[L]){c=s[L],I=u[L];break}return c<I?-1:I<c?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let c;if(u===void 0)for(u=0,c=0;c<s.length;++c)u+=s[c].length;let I=a.allocUnsafe(u),L=0;for(c=0;c<s.length;++c){let F=s[c];if(De(F,Uint8Array))L+F.length>I.length?(a.isBuffer(F)||(F=a.from(F)),F.copy(I,L)):Uint8Array.prototype.set.call(I,F,L);else if(a.isBuffer(F))F.copy(I,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=F.length}return I};function A(s,u){if(a.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||De(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);let c=s.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&c===0)return 0;let L=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return be(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Me(s).length;default:if(L)return I?-1:be(s).length;u=(""+u).toLowerCase(),L=!0}}a.byteLength=A;function B(s,u,c){let I=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(s||(s="utf8");;)switch(s){case"hex":return Se(this,u,c);case"utf8":case"utf-8":return ee(this,u,c);case"ascii":return pe(this,u,c);case"latin1":case"binary":return Ae(this,u,c);case"base64":return z(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,u,c);default:if(I)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function P(s,u,c){let I=s[u];s[u]=s[c],s[c]=I}a.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)P(this,u,u+1);return this},a.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)P(this,u,u+3),P(this,u+1,u+2);return this},a.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)P(this,u,u+7),P(this,u+1,u+6),P(this,u+2,u+5),P(this,u+3,u+4);return this},a.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?ee(this,0,s):B.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="",u=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(s,u,c,I,L){if(De(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),c===void 0&&(c=s?s.length:0),I===void 0&&(I=0),L===void 0&&(L=this.length),u<0||c>s.length||I<0||L>this.length)throw new RangeError("out of range index");if(I>=L&&u>=c)return 0;if(I>=L)return-1;if(u>=c)return 1;if(u>>>=0,c>>>=0,I>>>=0,L>>>=0,this===s)return 0;let F=L-I,K=c-u,Oe=Math.min(F,K),Ne=this.slice(I,L),Te=s.slice(u,c);for(let Re=0;Re<Oe;++Re)if(Ne[Re]!==Te[Re]){F=Ne[Re],K=Te[Re];break}return F<K?-1:K<F?1:0};function E(s,u,c,I,L){if(s.length===0)return-1;if(typeof c=="string"?(I=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,nt(c)&&(c=L?0:s.length-1),c<0&&(c=s.length+c),c>=s.length){if(L)return-1;c=s.length-1}else if(c<0)if(L)c=0;else return-1;if(typeof u=="string"&&(u=a.from(u,I)),a.isBuffer(u))return u.length===0?-1:$(s,u,c,I,L);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(s,u,c):Uint8Array.prototype.lastIndexOf.call(s,u,c):$(s,[u],c,I,L);throw new TypeError("val must be string, number or Buffer")}function $(s,u,c,I,L){let F=1,K=s.length,Oe=u.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(s.length<2||u.length<2)return-1;F=2,K/=2,Oe/=2,c/=2}function Ne(Re,Pe){return F===1?Re[Pe]:Re.readUInt16BE(Pe*F)}let Te;if(L){let Re=-1;for(Te=c;Te<K;Te++)if(Ne(s,Te)===Ne(u,Re===-1?0:Te-Re)){if(Re===-1&&(Re=Te),Te-Re+1===Oe)return Re*F}else Re!==-1&&(Te-=Te-Re),Re=-1}else for(c+Oe>K&&(c=K-Oe),Te=c;Te>=0;Te--){let Re=!0;for(let Pe=0;Pe<Oe;Pe++)if(Ne(s,Te+Pe)!==Ne(u,Pe)){Re=!1;break}if(Re)return Te}return-1}a.prototype.includes=function(s,u,c){return this.indexOf(s,u,c)!==-1},a.prototype.indexOf=function(s,u,c){return E(this,s,u,c,!0)},a.prototype.lastIndexOf=function(s,u,c){return E(this,s,u,c,!1)};function M(s,u,c,I){c=Number(c)||0;let L=s.length-c;I?(I=Number(I),I>L&&(I=L)):I=L;let F=u.length;I>F/2&&(I=F/2);let K;for(K=0;K<I;++K){let Oe=parseInt(u.substr(K*2,2),16);if(nt(Oe))return K;s[c+K]=Oe}return K}function C(s,u,c,I){return Je(be(u,s.length-c),s,c,I)}function D(s,u,c,I){return Je(he(u),s,c,I)}function j(s,u,c,I){return Je(Me(u),s,c,I)}function V(s,u,c,I){return Je(N(u,s.length-c),s,c,I)}a.prototype.write=function(s,u,c,I){if(u===void 0)I="utf8",c=this.length,u=0;else if(c===void 0&&typeof u=="string")I=u,c=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(c)?(c=c>>>0,I===void 0&&(I="utf8")):(I=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let L=this.length-u;if((c===void 0||c>L)&&(c=L),s.length>0&&(c<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let F=!1;for(;;)switch(I){case"hex":return M(this,s,u,c);case"utf8":case"utf-8":return C(this,s,u,c);case"ascii":case"latin1":case"binary":return D(this,s,u,c);case"base64":return j(this,s,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,s,u,c);default:if(F)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),F=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(s,u,c){return u===0&&c===s.length?t.fromByteArray(s):t.fromByteArray(s.slice(u,c))}function ee(s,u,c){c=Math.min(s.length,c);let I=[],L=u;for(;L<c;){let F=s[L],K=null,Oe=F>239?4:F>223?3:F>191?2:1;if(L+Oe<=c){let Ne,Te,Re,Pe;switch(Oe){case 1:F<128&&(K=F);break;case 2:Ne=s[L+1],(Ne&192)===128&&(Pe=(F&31)<<6|Ne&63,Pe>127&&(K=Pe));break;case 3:Ne=s[L+1],Te=s[L+2],(Ne&192)===128&&(Te&192)===128&&(Pe=(F&15)<<12|(Ne&63)<<6|Te&63,Pe>2047&&(Pe<55296||Pe>57343)&&(K=Pe));break;case 4:Ne=s[L+1],Te=s[L+2],Re=s[L+3],(Ne&192)===128&&(Te&192)===128&&(Re&192)===128&&(Pe=(F&15)<<18|(Ne&63)<<12|(Te&63)<<6|Re&63,Pe>65535&&Pe<1114112&&(K=Pe))}}K===null?(K=65533,Oe=1):K>65535&&(K-=65536,I.push(K>>>10&1023|55296),K=56320|K&1023),I.push(K),L+=Oe}return de(I)}var oe=4096;function de(s){let u=s.length;if(u<=oe)return String.fromCharCode.apply(String,s);let c="",I=0;for(;I<u;)c+=String.fromCharCode.apply(String,s.slice(I,I+=oe));return c}function pe(s,u,c){let I="";c=Math.min(s.length,c);for(let L=u;L<c;++L)I+=String.fromCharCode(s[L]&127);return I}function Ae(s,u,c){let I="";c=Math.min(s.length,c);for(let L=u;L<c;++L)I+=String.fromCharCode(s[L]);return I}function Se(s,u,c){let I=s.length;(!u||u<0)&&(u=0),(!c||c<0||c>I)&&(c=I);let L="";for(let F=u;F<c;++F)L+=ct[s[F]];return L}function ge(s,u,c){let I=s.slice(u,c),L="";for(let F=0;F<I.length-1;F+=2)L+=String.fromCharCode(I[F]+I[F+1]*256);return L}a.prototype.slice=function(s,u){let c=this.length;s=~~s,u=u===void 0?c:~~u,s<0?(s+=c,s<0&&(s=0)):s>c&&(s=c),u<0?(u+=c,u<0&&(u=0)):u>c&&(u=c),u<s&&(u=s);let I=this.subarray(s,u);return Object.setPrototypeOf(I,a.prototype),I};function ce(s,u,c){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+u>c)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,u,c){s=s>>>0,u=u>>>0,c||ce(s,u,this.length);let I=this[s],L=1,F=0;for(;++F<u&&(L*=256);)I+=this[s+F]*L;return I},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,u,c){s=s>>>0,u=u>>>0,c||ce(s,u,this.length);let I=this[s+--u],L=1;for(;u>0&&(L*=256);)I+=this[s+--u]*L;return I},a.prototype.readUint8=a.prototype.readUInt8=function(s,u){return s=s>>>0,u||ce(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||ce(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||ce(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=He(function(s){s=s>>>0,b(s,"offset");let u=this[s],c=this[s+7];(u===void 0||c===void 0)&&v(s,this.length-8);let I=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,L=this[++s]+this[++s]*2**8+this[++s]*2**16+c*2**24;return BigInt(I)+(BigInt(L)<<BigInt(32))}),a.prototype.readBigUInt64BE=He(function(s){s=s>>>0,b(s,"offset");let u=this[s],c=this[s+7];(u===void 0||c===void 0)&&v(s,this.length-8);let I=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],L=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+c;return(BigInt(I)<<BigInt(32))+BigInt(L)}),a.prototype.readIntLE=function(s,u,c){s=s>>>0,u=u>>>0,c||ce(s,u,this.length);let I=this[s],L=1,F=0;for(;++F<u&&(L*=256);)I+=this[s+F]*L;return L*=128,I>=L&&(I-=Math.pow(2,8*u)),I},a.prototype.readIntBE=function(s,u,c){s=s>>>0,u=u>>>0,c||ce(s,u,this.length);let I=u,L=1,F=this[s+--I];for(;I>0&&(L*=256);)F+=this[s+--I]*L;return L*=128,F>=L&&(F-=Math.pow(2,8*u)),F},a.prototype.readInt8=function(s,u){return s=s>>>0,u||ce(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,u){s=s>>>0,u||ce(s,2,this.length);let c=this[s]|this[s+1]<<8;return c&32768?c|4294901760:c},a.prototype.readInt16BE=function(s,u){s=s>>>0,u||ce(s,2,this.length);let c=this[s+1]|this[s]<<8;return c&32768?c|4294901760:c},a.prototype.readInt32LE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=He(function(s){s=s>>>0,b(s,"offset");let u=this[s],c=this[s+7];(u===void 0||c===void 0)&&v(s,this.length-8);let I=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(c<<24);return(BigInt(I)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=He(function(s){s=s>>>0,b(s,"offset");let u=this[s],c=this[s+7];(u===void 0||c===void 0)&&v(s,this.length-8);let I=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(I)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+c)}),a.prototype.readFloatLE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,u){return s=s>>>0,u||ce(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||ce(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||ce(s,8,this.length),r.read(this,s,!1,52,8)};function R(s,u,c,I,L,F){if(!a.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>L||u<F)throw new RangeError('"value" argument is out of bounds');if(c+I>s.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,u,c,I){if(s=+s,u=u>>>0,c=c>>>0,!I){let K=Math.pow(2,8*c)-1;R(this,s,u,c,K,0)}let L=1,F=0;for(this[u]=s&255;++F<c&&(L*=256);)this[u+F]=s/L&255;return u+c},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,u,c,I){if(s=+s,u=u>>>0,c=c>>>0,!I){let K=Math.pow(2,8*c)-1;R(this,s,u,c,K,0)}let L=c-1,F=1;for(this[u+L]=s&255;--L>=0&&(F*=256);)this[u+L]=s/F&255;return u+c},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,1,255,0),this[u]=s&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function U(s,u,c,I,L){te(u,I,L,s,c,7);let F=Number(u&BigInt(4294967295));s[c++]=F,F=F>>8,s[c++]=F,F=F>>8,s[c++]=F,F=F>>8,s[c++]=F;let K=Number(u>>BigInt(32)&BigInt(4294967295));return s[c++]=K,K=K>>8,s[c++]=K,K=K>>8,s[c++]=K,K=K>>8,s[c++]=K,c}function q(s,u,c,I,L){te(u,I,L,s,c,7);let F=Number(u&BigInt(4294967295));s[c+7]=F,F=F>>8,s[c+6]=F,F=F>>8,s[c+5]=F,F=F>>8,s[c+4]=F;let K=Number(u>>BigInt(32)&BigInt(4294967295));return s[c+3]=K,K=K>>8,s[c+2]=K,K=K>>8,s[c+1]=K,K=K>>8,s[c]=K,c+8}a.prototype.writeBigUInt64LE=He(function(s,u=0){return U(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=He(function(s,u=0){return q(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,u,c,I){if(s=+s,u=u>>>0,!I){let Oe=Math.pow(2,8*c-1);R(this,s,u,c,Oe-1,-Oe)}let L=0,F=1,K=0;for(this[u]=s&255;++L<c&&(F*=256);)s<0&&K===0&&this[u+L-1]!==0&&(K=1),this[u+L]=(s/F>>0)-K&255;return u+c},a.prototype.writeIntBE=function(s,u,c,I){if(s=+s,u=u>>>0,!I){let Oe=Math.pow(2,8*c-1);R(this,s,u,c,Oe-1,-Oe)}let L=c-1,F=1,K=0;for(this[u+L]=s&255;--L>=0&&(F*=256);)s<0&&K===0&&this[u+L+1]!==0&&(K=1),this[u+L]=(s/F>>0)-K&255;return u+c},a.prototype.writeInt8=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},a.prototype.writeInt16LE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeInt16BE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeInt32LE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},a.prototype.writeInt32BE=function(s,u,c){return s=+s,u=u>>>0,c||R(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},a.prototype.writeBigInt64LE=He(function(s,u=0){return U(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=He(function(s,u=0){return q(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(s,u,c,I,L,F){if(c+I>s.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function me(s,u,c,I,L){return u=+u,c=c>>>0,L||Q(s,u,c,4),r.write(s,u,c,I,23,4),c+4}a.prototype.writeFloatLE=function(s,u,c){return me(this,s,u,!0,c)},a.prototype.writeFloatBE=function(s,u,c){return me(this,s,u,!1,c)};function ye(s,u,c,I,L){return u=+u,c=c>>>0,L||Q(s,u,c,8),r.write(s,u,c,I,52,8),c+8}a.prototype.writeDoubleLE=function(s,u,c){return ye(this,s,u,!0,c)},a.prototype.writeDoubleBE=function(s,u,c){return ye(this,s,u,!1,c)},a.prototype.copy=function(s,u,c,I){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(c||(c=0),!I&&I!==0&&(I=this.length),u>=s.length&&(u=s.length),u||(u=0),I>0&&I<c&&(I=c),I===c||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),s.length-u<I-c&&(I=s.length-u+c);let L=I-c;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,c,I):Uint8Array.prototype.set.call(s,this.subarray(c,I),u),L},a.prototype.fill=function(s,u,c,I){if(typeof s=="string"){if(typeof u=="string"?(I=u,u=0,c=this.length):typeof c=="string"&&(I=c,c=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(s.length===1){let F=s.charCodeAt(0);(I==="utf8"&&F<128||I==="latin1")&&(s=F)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<c)throw new RangeError("Out of range index");if(c<=u)return this;u=u>>>0,c=c===void 0?this.length:c>>>0,s||(s=0);let L;if(typeof s=="number")for(L=u;L<c;++L)this[L]=s;else{let F=a.isBuffer(s)?s:a.from(s,I),K=F.length;if(K===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(L=0;L<c-u;++L)this[L+u]=F[L%K]}return this};var O={};function T(s,u,c){O[s]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}T("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),T("ERR_INVALID_ARG_TYPE",function(s,u){return`The "${s}" argument must be of type number. Received type ${typeof u}`},TypeError),T("ERR_OUT_OF_RANGE",function(s,u,c){let I=`The value of "${s}" is out of range.`,L=c;return Number.isInteger(c)&&Math.abs(c)>2**32?L=x(String(c)):typeof c=="bigint"&&(L=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(L=x(L)),L+="n"),I+=` It must be ${u}. Received ${L}`,I},RangeError);function x(s){let u="",c=s.length,I=s[0]==="-"?1:0;for(;c>=I+4;c-=3)u=`_${s.slice(c-3,c)}${u}`;return`${s.slice(0,c)}${u}`}function ne(s,u,c){b(u,"offset"),(s[u]===void 0||s[u+c]===void 0)&&v(u,s.length-(c+1))}function te(s,u,c,I,L,F){if(s>c||s<u){let K=typeof u=="bigint"?"n":"",Oe;throw F>3?u===0||u===BigInt(0)?Oe=`>= 0${K} and < 2${K} ** ${(F+1)*8}${K}`:Oe=`>= -(2${K} ** ${(F+1)*8-1}${K}) and < 2 ** ${(F+1)*8-1}${K}`:Oe=`>= ${u}${K} and <= ${c}${K}`,new O.ERR_OUT_OF_RANGE("value",Oe,s)}ne(I,L,F)}function b(s,u){if(typeof s!="number")throw new O.ERR_INVALID_ARG_TYPE(u,"number",s)}function v(s,u,c){throw Math.floor(s)!==s?(b(s,c),new O.ERR_OUT_OF_RANGE(c||"offset","an integer",s)):u<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${u}`,s)}var W=/[^+/0-9A-Za-z-_]/g;function Z(s){if(s=s.split("=")[0],s=s.trim().replace(W,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function be(s,u){u=u||1/0;let c,I=s.length,L=null,F=[];for(let K=0;K<I;++K){if(c=s.charCodeAt(K),c>55295&&c<57344){if(!L){if(c>56319){(u-=3)>-1&&F.push(239,191,189);continue}else if(K+1===I){(u-=3)>-1&&F.push(239,191,189);continue}L=c;continue}if(c<56320){(u-=3)>-1&&F.push(239,191,189),L=c;continue}c=(L-55296<<10|c-56320)+65536}else L&&(u-=3)>-1&&F.push(239,191,189);if(L=null,c<128){if((u-=1)<0)break;F.push(c)}else if(c<2048){if((u-=2)<0)break;F.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;F.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;F.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return F}function he(s){let u=[];for(let c=0;c<s.length;++c)u.push(s.charCodeAt(c)&255);return u}function N(s,u){let c,I,L,F=[];for(let K=0;K<s.length&&!((u-=2)<0);++K)c=s.charCodeAt(K),I=c>>8,L=c%256,F.push(L),F.push(I);return F}function Me(s){return t.toByteArray(Z(s))}function Je(s,u,c,I){let L;for(L=0;L<I&&!(L+c>=u.length||L>=s.length);++L)u[L+c]=s[L];return L}function De(s,u){return s instanceof u||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===u.name}function nt(s){return s!==s}var ct=function(){let s="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){let I=c*16;for(let L=0;L<16;++L)u[I+L]=s[c]+s[L]}return u}();function He(s){return typeof BigInt>"u"?At:s}function At(){throw new Error("BigInt not supported")}}),se,fe,ut,re=ui(()=>{se=Ye(Vt(),1),fe={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},ut=globalThis}),zt=le((e,t)=>{re();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(E,$,M){return Function.prototype.apply.call(E,$,M)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:i=function(E){return Object.getOwnPropertyNames(E)};function o(E){console&&console.warn&&console.warn(E)}var l=Number.isNaN||function(E){return E!==E};function a(){a.init.call(this)}t.exports=a,t.exports.once=A,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var f=10;function h(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");f=E}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function p(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(E){for(var $=[],M=1;M<arguments.length;M++)$.push(arguments[M]);var C=E==="error",D=this._events;if(D!==void 0)C=C&&D.error===void 0;else if(!C)return!1;if(C){var j;if($.length>0&&(j=$[0]),j instanceof Error)throw j;var V=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw V.context=j,V}var z=D[E];if(z===void 0)return!1;if(typeof z=="function")n(z,this,$);else for(var ee=z.length,oe=y(z,ee),M=0;M<ee;++M)n(oe[M],this,$);return!0};function m(E,$,M,C){var D,j,V;if(h(M),j=E._events,j===void 0?(j=E._events=Object.create(null),E._eventsCount=0):(j.newListener!==void 0&&(E.emit("newListener",$,M.listener?M.listener:M),j=E._events),V=j[$]),V===void 0)V=j[$]=M,++E._eventsCount;else if(typeof V=="function"?V=j[$]=C?[M,V]:[V,M]:C?V.unshift(M):V.push(M),D=p(E),D>0&&V.length>D&&!V.warned){V.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=E,z.type=$,z.count=V.length,o(z)}return E}a.prototype.addListener=function(E,$){return m(this,E,$,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(E,$){return m(this,E,$,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(E,$,M){var C={fired:!1,wrapFn:void 0,target:E,type:$,listener:M},D=_.bind(C);return D.listener=M,C.wrapFn=D,D}a.prototype.once=function(E,$){return h($),this.on(E,k(this,E,$)),this},a.prototype.prependOnceListener=function(E,$){return h($),this.prependListener(E,k(this,E,$)),this},a.prototype.removeListener=function(E,$){var M,C,D,j,V;if(h($),C=this._events,C===void 0)return this;if(M=C[E],M===void 0)return this;if(M===$||M.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete C[E],C.removeListener&&this.emit("removeListener",E,M.listener||$));else if(typeof M!="function"){for(D=-1,j=M.length-1;j>=0;j--)if(M[j]===$||M[j].listener===$){V=M[j].listener,D=j;break}if(D<0)return this;D===0?M.shift():S(M,D),M.length===1&&(C[E]=M[0]),C.removeListener!==void 0&&this.emit("removeListener",E,V||$)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(E){var $,M,C;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[E]),this;if(arguments.length===0){var D=Object.keys(M),j;for(C=0;C<D.length;++C)j=D[C],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=M[E],typeof $=="function")this.removeListener(E,$);else if($!==void 0)for(C=$.length-1;C>=0;C--)this.removeListener(E,$[C]);return this};function d(E,$,M){var C=E._events;if(C===void 0)return[];var D=C[$];return D===void 0?[]:typeof D=="function"?M?[D.listener||D]:[D]:M?w(D):y(D,D.length)}a.prototype.listeners=function(E){return d(this,E,!0)},a.prototype.rawListeners=function(E){return d(this,E,!1)},a.listenerCount=function(E,$){return typeof E.listenerCount=="function"?E.listenerCount($):g.call(E,$)},a.prototype.listenerCount=g;function g(E){var $=this._events;if($!==void 0){var M=$[E];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function y(E,$){for(var M=new Array($),C=0;C<$;++C)M[C]=E[C];return M}function S(E,$){for(;$+1<E.length;$++)E[$]=E[$+1];E.pop()}function w(E){for(var $=new Array(E.length),M=0;M<$.length;++M)$[M]=E[M].listener||E[M];return $}function A(E,$){return new Promise(function(M,C){function D(V){E.removeListener($,j),C(V)}function j(){typeof E.removeListener=="function"&&E.removeListener("error",D),M([].slice.call(arguments))}P(E,$,j,{once:!0}),$!=="error"&&B(E,D,{once:!0})})}function B(E,$,M){typeof E.on=="function"&&P(E,"error",$,M)}function P(E,$,M,C){if(typeof E.on=="function")C.once?E.once($,M):E.on($,M);else if(typeof E.addEventListener=="function")E.addEventListener($,function D(j){C.once&&E.removeEventListener($,D),M(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}}),Zr=le((e,t)=>{re(),t.exports=zt().EventEmitter}),en=le(()=>{re()}),di=le((e,t)=>{re();function r(d,g){var y=Object.keys(d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(d);g&&(S=S.filter(function(w){return Object.getOwnPropertyDescriptor(d,w).enumerable})),y.push.apply(y,S)}return y}function n(d){for(var g=1;g<arguments.length;g++){var y=arguments[g]!=null?arguments[g]:{};g%2?r(Object(y),!0).forEach(function(S){i(d,S,y[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(y)):r(Object(y)).forEach(function(S){Object.defineProperty(d,S,Object.getOwnPropertyDescriptor(y,S))})}return d}function i(d,g,y){return g in d?Object.defineProperty(d,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[g]=y,d}function o(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function l(d,g){for(var y=0;y<g.length;y++){var S=g[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}function a(d,g,y){return g&&l(d.prototype,g),y&&l(d,y),d}var f=Vt(),h=f.Buffer,p=en(),m=p.inspect,_=m&&m.custom||"inspect";function k(d,g,y){h.prototype.copy.call(d,g,y)}t.exports=function(){function d(){o(this,d),this.head=null,this.tail=null,this.length=0}return a(d,[{key:"push",value:function(g){var y={data:g,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(g){var y={data:g,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var y=this.head,S=""+y.data;y=y.next;)S+=g+y.data;return S}},{key:"concat",value:function(g){if(this.length===0)return h.alloc(0);for(var y=h.allocUnsafe(g>>>0),S=this.head,w=0;S;)k(S.data,y,w),w+=S.data.length,S=S.next;return y}},{key:"consume",value:function(g,y){var S;return g<this.head.data.length?(S=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?S=this.shift():S=y?this._getString(g):this._getBuffer(g),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var y=this.head,S=1,w=y.data;for(g-=w.length;y=y.next;){var A=y.data,B=g>A.length?A.length:g;if(B===A.length?w+=A:w+=A.slice(0,g),g-=B,g===0){B===A.length?(++S,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=A.slice(B));break}++S}return this.length-=S,w}},{key:"_getBuffer",value:function(g){var y=h.allocUnsafe(g),S=this.head,w=1;for(S.data.copy(y),g-=S.data.length;S=S.next;){var A=S.data,B=g>A.length?A.length:g;if(A.copy(y,y.length-g,0,B),g-=B,g===0){B===A.length?(++w,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=A.slice(B));break}++w}return this.length-=w,y}},{key:_,value:function(g,y){return m(this,n({},y,{depth:0,customInspect:!1}))}}]),d}()}),tn=le((e,t)=>{re();function r(f,h){var p=this,m=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return m||_?(h?h(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,fe.nextTick(l,this,f)):fe.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(k){!h&&k?p._writableState?p._writableState.errorEmitted?fe.nextTick(i,p):(p._writableState.errorEmitted=!0,fe.nextTick(n,p,k)):fe.nextTick(n,p,k):h?(fe.nextTick(i,p),h(k)):fe.nextTick(i,p)}),this)}function n(f,h){l(f,h),i(f)}function i(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,h){f.emit("error",h)}function a(f,h){var p=f._readableState,m=f._writableState;p&&p.autoDestroy||m&&m.autoDestroy?f.destroy(h):f.emit("error",h)}t.exports={destroy:r,undestroy:o,errorOrDestroy:a}}),Et=le((e,t)=>{re();function r(h,p){h.prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p}var n={};function i(h,p,m){m||(m=Error);function _(d,g,y){return typeof p=="string"?p:p(d,g,y)}var k=function(d){r(g,d);function g(y,S,w){return d.call(this,_(y,S,w))||this}return g}(m);k.prototype.name=m.name,k.prototype.code=h,n[h]=k}function o(h,p){if(Array.isArray(h)){var m=h.length;return h=h.map(function(_){return String(_)}),m>2?"one of ".concat(p," ").concat(h.slice(0,m-1).join(", "),", or ")+h[m-1]:m===2?"one of ".concat(p," ").concat(h[0]," or ").concat(h[1]):"of ".concat(p," ").concat(h[0])}else return"of ".concat(p," ").concat(String(h))}function l(h,p,m){return h.substr(!m||m<0?0:+m,p.length)===p}function a(h,p,m){return(m===void 0||m>h.length)&&(m=h.length),h.substring(m-p.length,m)===p}function f(h,p,m){return typeof m!="number"&&(m=0),m+p.length>h.length?!1:h.indexOf(p,m)!==-1}i("ERR_INVALID_OPT_VALUE",function(h,p){return'The value "'+p+'" is invalid for option "'+h+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(h,p,m){var _;typeof p=="string"&&l(p,"not ")?(_="must not be",p=p.replace(/^not /,"")):_="must be";var k;if(a(h," argument"))k="The ".concat(h," ").concat(_," ").concat(o(p,"type"));else{var d=f(h,".")?"property":"argument";k='The "'.concat(h,'" ').concat(d," ").concat(_," ").concat(o(p,"type"))}return k+=". Received type ".concat(typeof m),k},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),rn=le((e,t)=>{re();var r=Et().codes.ERR_INVALID_OPT_VALUE;function n(o,l,a){return o.highWaterMark!=null?o.highWaterMark:l?o[a]:null}function i(o,l,a,f){var h=n(l,f,a);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var p=f?a:"highWaterMark";throw new r(p,h)}return Math.floor(h)}return o.objectMode?16:16*1024}t.exports={getHighWaterMark:i}}),ft=le((e,t)=>{re(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),pi=le((e,t)=>{re(),t.exports=r;function r(i,o){if(n("noDeprecation"))return i;var l=!1;function a(){if(!l){if(n("throwDeprecation"))throw new Error(o);n("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return i.apply(this,arguments)}return a}function n(i){try{if(!ut.localStorage)return!1}catch{return!1}var o=ut.localStorage[i];return o==null?!1:String(o).toLowerCase()==="true"}}),nn=le((e,t)=>{re(),t.exports=D;function r(O){var T=this;this.next=null,this.entry=null,this.finish=function(){ye(T,O)}}var n;D.WritableState=M;var i={deprecate:pi()},o=Zr(),l=Vt().Buffer,a=ut.Uint8Array||function(){};function f(O){return l.from(O)}function h(O){return l.isBuffer(O)||O instanceof a}var p=tn(),m=rn(),_=m.getHighWaterMark,k=Et().codes,d=k.ERR_INVALID_ARG_TYPE,g=k.ERR_METHOD_NOT_IMPLEMENTED,y=k.ERR_MULTIPLE_CALLBACK,S=k.ERR_STREAM_CANNOT_PIPE,w=k.ERR_STREAM_DESTROYED,A=k.ERR_STREAM_NULL_VALUES,B=k.ERR_STREAM_WRITE_AFTER_END,P=k.ERR_UNKNOWN_ENCODING,E=p.errorOrDestroy;ft()(D,o);function $(){}function M(O,T,x){n=n||_t(),O=O||{},typeof x!="boolean"&&(x=T instanceof n),this.objectMode=!!O.objectMode,x&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=_(this,O,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=O.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){Ae(T,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var O=this.bufferedRequest,T=[];O;)T.push(O),O=O.next;return T},function(){try{Object.defineProperty(M.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(O){return C.call(this,O)?!0:this!==D?!1:O&&O._writableState instanceof M}})):C=function(O){return O instanceof this};function D(O){n=n||_t();var T=this instanceof n;if(!T&&!C.call(D,this))return new D(O);this._writableState=new M(O,this,T),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),o.call(this)}D.prototype.pipe=function(){E(this,new S)};function j(O,T){var x=new B;E(O,x),fe.nextTick(T,x)}function V(O,T,x,ne){var te;return x===null?te=new A:typeof x!="string"&&!T.objectMode&&(te=new d("chunk",["string","Buffer"],x)),te?(E(O,te),fe.nextTick(ne,te),!1):!0}D.prototype.write=function(O,T,x){var ne=this._writableState,te=!1,b=!ne.objectMode&&h(O);return b&&!l.isBuffer(O)&&(O=f(O)),typeof T=="function"&&(x=T,T=null),b?T="buffer":T||(T=ne.defaultEncoding),typeof x!="function"&&(x=$),ne.ending?j(this,x):(b||V(this,ne,O,x))&&(ne.pendingcb++,te=ee(this,ne,b,O,T,x)),te},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&ce(this,O))},D.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new P(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(O,T,x){return!O.objectMode&&O.decodeStrings!==!1&&typeof T=="string"&&(T=l.from(T,x)),T}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee(O,T,x,ne,te,b){if(!x){var v=z(T,ne,te);ne!==v&&(x=!0,te="buffer",ne=v)}var W=T.objectMode?1:ne.length;T.length+=W;var Z=T.length<T.highWaterMark;if(Z||(T.needDrain=!0),T.writing||T.corked){var be=T.lastBufferedRequest;T.lastBufferedRequest={chunk:ne,encoding:te,isBuf:x,callback:b,next:null},be?be.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else oe(O,T,!1,W,ne,te,b);return Z}function oe(O,T,x,ne,te,b,v){T.writelen=ne,T.writecb=v,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new w("write")):x?O._writev(te,T.onwrite):O._write(te,b,T.onwrite),T.sync=!1}function de(O,T,x,ne,te){--T.pendingcb,x?(fe.nextTick(te,ne),fe.nextTick(Q,O,T),O._writableState.errorEmitted=!0,E(O,ne)):(te(ne),O._writableState.errorEmitted=!0,E(O,ne),Q(O,T))}function pe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function Ae(O,T){var x=O._writableState,ne=x.sync,te=x.writecb;if(typeof te!="function")throw new y;if(pe(x),T)de(O,x,ne,T,te);else{var b=R(x)||O.destroyed;!b&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&ce(O,x),ne?fe.nextTick(Se,O,x,b,te):Se(O,x,b,te)}}function Se(O,T,x,ne){x||ge(O,T),T.pendingcb--,ne(),Q(O,T)}function ge(O,T){T.length===0&&T.needDrain&&(T.needDrain=!1,O.emit("drain"))}function ce(O,T){T.bufferProcessing=!0;var x=T.bufferedRequest;if(O._writev&&x&&x.next){var ne=T.bufferedRequestCount,te=new Array(ne),b=T.corkedRequestsFree;b.entry=x;for(var v=0,W=!0;x;)te[v]=x,x.isBuf||(W=!1),x=x.next,v+=1;te.allBuffers=W,oe(O,T,!0,T.length,te,"",b.finish),T.pendingcb++,T.lastBufferedRequest=null,b.next?(T.corkedRequestsFree=b.next,b.next=null):T.corkedRequestsFree=new r(T),T.bufferedRequestCount=0}else{for(;x;){var Z=x.chunk,be=x.encoding,he=x.callback,N=T.objectMode?1:Z.length;if(oe(O,T,!1,N,Z,be,he),x=x.next,T.bufferedRequestCount--,T.writing)break}x===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=x,T.bufferProcessing=!1}D.prototype._write=function(O,T,x){x(new g("_write()"))},D.prototype._writev=null,D.prototype.end=function(O,T,x){var ne=this._writableState;return typeof O=="function"?(x=O,O=null,T=null):typeof T=="function"&&(x=T,T=null),O!=null&&this.write(O,T),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||me(this,ne,x),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function R(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function U(O,T){O._final(function(x){T.pendingcb--,x&&E(O,x),T.prefinished=!0,O.emit("prefinish"),Q(O,T)})}function q(O,T){!T.prefinished&&!T.finalCalled&&(typeof O._final=="function"&&!T.destroyed?(T.pendingcb++,T.finalCalled=!0,fe.nextTick(U,O,T)):(T.prefinished=!0,O.emit("prefinish")))}function Q(O,T){var x=R(T);if(x&&(q(O,T),T.pendingcb===0&&(T.finished=!0,O.emit("finish"),T.autoDestroy))){var ne=O._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&O.destroy()}return x}function me(O,T,x){T.ending=!0,Q(O,T),x&&(T.finished?fe.nextTick(x):O.once("finish",x)),T.ended=!0,O.writable=!1}function ye(O,T,x){var ne=O.entry;for(O.entry=null;ne;){var te=ne.callback;T.pendingcb--,te(x),ne=ne.next}T.corkedRequestsFree.next=O}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(O){!this._writableState||(this._writableState.destroyed=O)}}),D.prototype.destroy=p.destroy,D.prototype._undestroy=p.undestroy,D.prototype._destroy=function(O,T){T(O)}}),_t=le((e,t)=>{re();var r=Object.keys||function(m){var _=[];for(var k in m)_.push(k);return _};t.exports=f;var n=on(),i=nn();for(ft()(f,n),o=r(i.prototype),a=0;a<o.length;a++)l=o[a],f.prototype[l]||(f.prototype[l]=i.prototype[l]);var o,l,a;function f(m){if(!(this instanceof f))return new f(m);n.call(this,m),i.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function h(){this._writableState.ended||fe.nextTick(p,this)}function p(m){m.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}),gi=le((e,t)=>{re();var r=Vt(),n=r.Buffer;function i(l,a){for(var f in l)a[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o);function o(l,a,f){return n(l,a,f)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(l,a,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,a,f)},o.alloc=function(l,a,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var h=n(l);return a!==void 0?typeof f=="string"?h.fill(a,f):h.fill(a):h.fill(0),h},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),Rr=le(e=>{re();var t=gi().Buffer,r=t.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var A;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(A)return;w=(""+w).toLowerCase(),A=!0}}function i(w){var A=n(w);if(typeof A!="string"&&(t.isEncoding===r||!r(w)))throw new Error("Unknown encoding: "+w);return A||w}e.StringDecoder=o;function o(w){this.encoding=i(w);var A;switch(this.encoding){case"utf16le":this.text=_,this.end=k,A=4;break;case"utf8":this.fillLast=h,A=4;break;case"base64":this.text=d,this.end=g,A=3;break;default:this.write=y,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(A)}o.prototype.write=function(w){if(w.length===0)return"";var A,B;if(this.lastNeed){if(A=this.fillLast(w),A===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<w.length?A?A+this.text(w,B):this.text(w,B):A||""},o.prototype.end=m,o.prototype.text=p,o.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function l(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function a(w,A,B){var P=A.length-1;if(P<B)return 0;var E=l(A[P]);return E>=0?(E>0&&(w.lastNeed=E-1),E):--P<B||E===-2?0:(E=l(A[P]),E>=0?(E>0&&(w.lastNeed=E-2),E):--P<B||E===-2?0:(E=l(A[P]),E>=0?(E>0&&(E===2?E=0:w.lastNeed=E-3),E):0))}function f(w,A,B){if((A[0]&192)!==128)return w.lastNeed=0,"�";if(w.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return w.lastNeed=1,"�";if(w.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return w.lastNeed=2,"�"}}function h(w){var A=this.lastTotal-this.lastNeed,B=f(this,w);if(B!==void 0)return B;if(this.lastNeed<=w.length)return w.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,A,0,w.length),this.lastNeed-=w.length}function p(w,A){var B=a(this,w,A);if(!this.lastNeed)return w.toString("utf8",A);this.lastTotal=B;var P=w.length-(B-this.lastNeed);return w.copy(this.lastChar,0,P),w.toString("utf8",A,P)}function m(w){var A=w&&w.length?this.write(w):"";return this.lastNeed?A+"�":A}function _(w,A){if((w.length-A)%2===0){var B=w.toString("utf16le",A);if(B){var P=B.charCodeAt(B.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",A,w.length-1)}function k(w){var A=w&&w.length?this.write(w):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,B)}return A}function d(w,A){var B=(w.length-A)%3;return B===0?w.toString("base64",A):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",A,w.length-B))}function g(w){var A=w&&w.length?this.write(w):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function y(w){return w.toString(this.encoding)}function S(w){return w&&w.length?this.write(w):""}}),mr=le((e,t)=>{re();var r=Et().codes.ERR_STREAM_PREMATURE_CLOSE;function n(a){var f=!1;return function(){if(!f){f=!0;for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];a.apply(this,p)}}}function i(){}function o(a){return a.setHeader&&typeof a.abort=="function"}function l(a,f,h){if(typeof f=="function")return l(a,null,f);f||(f={}),h=n(h||i);var p=f.readable||f.readable!==!1&&a.readable,m=f.writable||f.writable!==!1&&a.writable,_=function(){a.writable||d()},k=a._writableState&&a._writableState.finished,d=function(){m=!1,k=!0,p||h.call(a)},g=a._readableState&&a._readableState.endEmitted,y=function(){p=!1,g=!0,m||h.call(a)},S=function(B){h.call(a,B)},w=function(){var B;if(p&&!g)return(!a._readableState||!a._readableState.ended)&&(B=new r),h.call(a,B);if(m&&!k)return(!a._writableState||!a._writableState.ended)&&(B=new r),h.call(a,B)},A=function(){a.req.on("finish",d)};return o(a)?(a.on("complete",d),a.on("abort",w),a.req?A():a.on("request",A)):m&&!a._writableState&&(a.on("end",_),a.on("close",_)),a.on("end",y),a.on("finish",d),f.error!==!1&&a.on("error",S),a.on("close",w),function(){a.removeListener("complete",d),a.removeListener("abort",w),a.removeListener("request",A),a.req&&a.req.removeListener("finish",d),a.removeListener("end",_),a.removeListener("close",_),a.removeListener("finish",d),a.removeListener("end",y),a.removeListener("error",S),a.removeListener("close",w)}}t.exports=l}),yi=le((e,t)=>{re();var r;function n(A,B,P){return B in A?Object.defineProperty(A,B,{value:P,enumerable:!0,configurable:!0,writable:!0}):A[B]=P,A}var i=mr(),o=Symbol("lastResolve"),l=Symbol("lastReject"),a=Symbol("error"),f=Symbol("ended"),h=Symbol("lastPromise"),p=Symbol("handlePromise"),m=Symbol("stream");function _(A,B){return{value:A,done:B}}function k(A){var B=A[o];if(B!==null){var P=A[m].read();P!==null&&(A[h]=null,A[o]=null,A[l]=null,B(_(P,!1)))}}function d(A){fe.nextTick(k,A)}function g(A,B){return function(P,E){A.then(function(){if(B[f]){P(_(void 0,!0));return}B[p](P,E)},E)}}var y=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((r={get stream(){return this[m]},next:function(){var A=this,B=this[a];if(B!==null)return Promise.reject(B);if(this[f])return Promise.resolve(_(void 0,!0));if(this[m].destroyed)return new Promise(function(M,C){fe.nextTick(function(){A[a]?C(A[a]):M(_(void 0,!0))})});var P=this[h],E;if(P)E=new Promise(g(P,this));else{var $=this[m].read();if($!==null)return Promise.resolve(_($,!1));E=new Promise(this[p])}return this[h]=E,E}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var A=this;return new Promise(function(B,P){A[m].destroy(null,function(E){if(E){P(E);return}B(_(void 0,!0))})})}),r),y),w=function(A){var B,P=Object.create(S,(B={},n(B,m,{value:A,writable:!0}),n(B,o,{value:null,writable:!0}),n(B,l,{value:null,writable:!0}),n(B,a,{value:null,writable:!0}),n(B,f,{value:A._readableState.endEmitted,writable:!0}),n(B,p,{value:function(E,$){var M=P[m].read();M?(P[h]=null,P[o]=null,P[l]=null,E(_(M,!1))):(P[o]=E,P[l]=$)},writable:!0}),B));return P[h]=null,i(A,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var $=P[l];$!==null&&(P[h]=null,P[o]=null,P[l]=null,$(E)),P[a]=E;return}var M=P[o];M!==null&&(P[h]=null,P[o]=null,P[l]=null,M(_(void 0,!0))),P[f]=!0}),A.on("readable",d.bind(null,P)),P};t.exports=w}),mi=le((e,t)=>{re(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),on=le((e,t)=>{re(),t.exports=j;var r;j.ReadableState=D,zt().EventEmitter;var n=function(b,v){return b.listeners(v).length},i=Zr(),o=Vt().Buffer,l=ut.Uint8Array||function(){};function a(b){return o.from(b)}function f(b){return o.isBuffer(b)||b instanceof l}var h=en(),p;h&&h.debuglog?p=h.debuglog("stream"):p=function(){};var m=di(),_=tn(),k=rn(),d=k.getHighWaterMark,g=Et().codes,y=g.ERR_INVALID_ARG_TYPE,S=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,A=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,B,P,E;ft()(j,i);var $=_.errorOrDestroy,M=["error","close","destroy","pause","resume"];function C(b,v,W){if(typeof b.prependListener=="function")return b.prependListener(v,W);!b._events||!b._events[v]?b.on(v,W):Array.isArray(b._events[v])?b._events[v].unshift(W):b._events[v]=[W,b._events[v]]}function D(b,v,W){r=r||_t(),b=b||{},typeof W!="boolean"&&(W=v instanceof r),this.objectMode=!!b.objectMode,W&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=d(this,b,"readableHighWaterMark",W),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(B||(B=Rr().StringDecoder),this.decoder=new B(b.encoding),this.encoding=b.encoding)}function j(b){if(r=r||_t(),!(this instanceof j))return new j(b);var v=this instanceof r;this._readableState=new D(b,this,v),this.readable=!0,b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy)),i.call(this)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(b){!this._readableState||(this._readableState.destroyed=b)}}),j.prototype.destroy=_.destroy,j.prototype._undestroy=_.undestroy,j.prototype._destroy=function(b,v){v(b)},j.prototype.push=function(b,v){var W=this._readableState,Z;return W.objectMode?Z=!0:typeof b=="string"&&(v=v||W.defaultEncoding,v!==W.encoding&&(b=o.from(b,v),v=""),Z=!0),V(this,b,v,!1,Z)},j.prototype.unshift=function(b){return V(this,b,null,!0,!1)};function V(b,v,W,Z,be){p("readableAddChunk",v);var he=b._readableState;if(v===null)he.reading=!1,Ae(b,he);else{var N;if(be||(N=ee(he,v)),N)$(b,N);else if(he.objectMode||v&&v.length>0)if(typeof v!="string"&&!he.objectMode&&Object.getPrototypeOf(v)!==o.prototype&&(v=a(v)),Z)he.endEmitted?$(b,new A):z(b,he,v,!0);else if(he.ended)$(b,new S);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!W?(v=he.decoder.write(v),he.objectMode||v.length!==0?z(b,he,v,!1):ce(b,he)):z(b,he,v,!1)}else Z||(he.reading=!1,ce(b,he))}return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function z(b,v,W,Z){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,b.emit("data",W)):(v.length+=v.objectMode?1:W.length,Z?v.buffer.unshift(W):v.buffer.push(W),v.needReadable&&Se(b)),ce(b,v)}function ee(b,v){var W;return!f(v)&&typeof v!="string"&&v!==void 0&&!b.objectMode&&(W=new y("chunk",["string","Buffer","Uint8Array"],v)),W}j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(b){B||(B=Rr().StringDecoder);var v=new B(b);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,Z="";W!==null;)Z+=v.write(W.data),W=W.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var oe=1073741824;function de(b){return b>=oe?b=oe:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++),b}function pe(b,v){return b<=0||v.length===0&&v.ended?0:v.objectMode?1:b!==b?v.flowing&&v.length?v.buffer.head.data.length:v.length:(b>v.highWaterMark&&(v.highWaterMark=de(b)),b<=v.length?b:v.ended?v.length:(v.needReadable=!0,0))}j.prototype.read=function(b){p("read",b),b=parseInt(b,10);var v=this._readableState,W=b;if(b!==0&&(v.emittedReadable=!1),b===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return p("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?x(this):Se(this),null;if(b=pe(b,v),b===0&&v.ended)return v.length===0&&x(this),null;var Z=v.needReadable;p("need readable",Z),(v.length===0||v.length-b<v.highWaterMark)&&(Z=!0,p("length less than watermark",Z)),v.ended||v.reading?(Z=!1,p("reading or ended",Z)):Z&&(p("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(b=pe(W,v)));var be;return b>0?be=T(b,v):be=null,be===null?(v.needReadable=v.length<=v.highWaterMark,b=0):(v.length-=b,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),W!==b&&v.ended&&x(this)),be!==null&&this.emit("data",be),be};function Ae(b,v){if(p("onEofChunk"),!v.ended){if(v.decoder){var W=v.decoder.end();W&&W.length&&(v.buffer.push(W),v.length+=v.objectMode?1:W.length)}v.ended=!0,v.sync?Se(b):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,ge(b)))}}function Se(b){var v=b._readableState;p("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(p("emitReadable",v.flowing),v.emittedReadable=!0,fe.nextTick(ge,b))}function ge(b){var v=b._readableState;p("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(b.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,O(b)}function ce(b,v){v.readingMore||(v.readingMore=!0,fe.nextTick(R,b,v))}function R(b,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var W=v.length;if(p("maybeReadMore read 0"),b.read(0),W===v.length)break}v.readingMore=!1}j.prototype._read=function(b){$(this,new w("_read()"))},j.prototype.pipe=function(b,v){var W=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=b;break;case 1:Z.pipes=[Z.pipes,b];break;default:Z.pipes.push(b);break}Z.pipesCount+=1,p("pipe count=%d opts=%j",Z.pipesCount,v);var be=(!v||v.end!==!1)&&b!==fe.stdout&&b!==fe.stderr,he=be?Me:u;Z.endEmitted?fe.nextTick(he):W.once("end",he),b.on("unpipe",N);function N(c,I){p("onunpipe"),c===W&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,nt())}function Me(){p("onend"),b.end()}var Je=U(W);b.on("drain",Je);var De=!1;function nt(){p("cleanup"),b.removeListener("close",At),b.removeListener("finish",s),b.removeListener("drain",Je),b.removeListener("error",He),b.removeListener("unpipe",N),W.removeListener("end",Me),W.removeListener("end",u),W.removeListener("data",ct),De=!0,Z.awaitDrain&&(!b._writableState||b._writableState.needDrain)&&Je()}W.on("data",ct);function ct(c){p("ondata");var I=b.write(c);p("dest.write",I),I===!1&&((Z.pipesCount===1&&Z.pipes===b||Z.pipesCount>1&&te(Z.pipes,b)!==-1)&&!De&&(p("false write response, pause",Z.awaitDrain),Z.awaitDrain++),W.pause())}function He(c){p("onerror",c),u(),b.removeListener("error",He),n(b,"error")===0&&$(b,c)}C(b,"error",He);function At(){b.removeListener("finish",s),u()}b.once("close",At);function s(){p("onfinish"),b.removeListener("close",At),u()}b.once("finish",s);function u(){p("unpipe"),W.unpipe(b)}return b.emit("pipe",W),Z.flowing||(p("pipe resume"),W.resume()),b};function U(b){return function(){var v=b._readableState;p("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&n(b,"data")&&(v.flowing=!0,O(b))}}j.prototype.unpipe=function(b){var v=this._readableState,W={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return b&&b!==v.pipes?this:(b||(b=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,b&&b.emit("unpipe",this,W),this);if(!b){var Z=v.pipes,be=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var he=0;he<be;he++)Z[he].emit("unpipe",this,{hasUnpiped:!1});return this}var N=te(v.pipes,b);return N===-1?this:(v.pipes.splice(N,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),b.emit("unpipe",this,W),this)},j.prototype.on=function(b,v){var W=i.prototype.on.call(this,b,v),Z=this._readableState;return b==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):b==="readable"&&!Z.endEmitted&&!Z.readableListening&&(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,p("on readable",Z.length,Z.reading),Z.length?Se(this):Z.reading||fe.nextTick(Q,this)),W},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(b,v){var W=i.prototype.removeListener.call(this,b,v);return b==="readable"&&fe.nextTick(q,this),W},j.prototype.removeAllListeners=function(b){var v=i.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&fe.nextTick(q,this),v};function q(b){var v=b._readableState;v.readableListening=b.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:b.listenerCount("data")>0&&b.resume()}function Q(b){p("readable nexttick read 0"),b.read(0)}j.prototype.resume=function(){var b=this._readableState;return b.flowing||(p("resume"),b.flowing=!b.readableListening,me(this,b)),b.paused=!1,this};function me(b,v){v.resumeScheduled||(v.resumeScheduled=!0,fe.nextTick(ye,b,v))}function ye(b,v){p("resume",v.reading),v.reading||b.read(0),v.resumeScheduled=!1,b.emit("resume"),O(b),v.flowing&&!v.reading&&b.read(0)}j.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(b){var v=b._readableState;for(p("flow",v.flowing);v.flowing&&b.read()!==null;);}j.prototype.wrap=function(b){var v=this,W=this._readableState,Z=!1;b.on("end",function(){if(p("wrapped end"),W.decoder&&!W.ended){var N=W.decoder.end();N&&N.length&&v.push(N)}v.push(null)}),b.on("data",function(N){if(p("wrapped data"),W.decoder&&(N=W.decoder.write(N)),!(W.objectMode&&N==null)&&!(!W.objectMode&&(!N||!N.length))){var Me=v.push(N);Me||(Z=!0,b.pause())}});for(var be in b)this[be]===void 0&&typeof b[be]=="function"&&(this[be]=function(N){return function(){return b[N].apply(b,arguments)}}(be));for(var he=0;he<M.length;he++)b.on(M[he],this.emit.bind(this,M[he]));return this._read=function(N){p("wrapped _read",N),Z&&(Z=!1,b.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return P===void 0&&(P=yi()),P(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}}),j._fromList=T,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function T(b,v){if(v.length===0)return null;var W;return v.objectMode?W=v.buffer.shift():!b||b>=v.length?(v.decoder?W=v.buffer.join(""):v.buffer.length===1?W=v.buffer.first():W=v.buffer.concat(v.length),v.buffer.clear()):W=v.buffer.consume(b,v.decoder),W}function x(b){var v=b._readableState;p("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,fe.nextTick(ne,v,b))}function ne(b,v){if(p("endReadableNT",b.endEmitted,b.length),!b.endEmitted&&b.length===0&&(b.endEmitted=!0,v.readable=!1,v.emit("end"),b.autoDestroy)){var W=v._writableState;(!W||W.autoDestroy&&W.finished)&&v.destroy()}}typeof Symbol=="function"&&(j.from=function(b,v){return E===void 0&&(E=mi()),E(j,b,v)});function te(b,v){for(var W=0,Z=b.length;W<Z;W++)if(b[W]===v)return W;return-1}}),an=le((e,t)=>{re(),t.exports=h;var r=Et().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,a=_t();ft()(h,a);function f(_,k){var d=this._transformState;d.transforming=!1;var g=d.writecb;if(g===null)return this.emit("error",new i);d.writechunk=null,d.writecb=null,k!=null&&this.push(k),g(_);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function h(_){if(!(this instanceof h))return new h(_);a.call(this,_),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",p)}function p(){var _=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(k,d){m(_,k,d)}):m(this,null,null)}h.prototype.push=function(_,k){return this._transformState.needTransform=!1,a.prototype.push.call(this,_,k)},h.prototype._transform=function(_,k,d){d(new n("_transform()"))},h.prototype._write=function(_,k,d){var g=this._transformState;if(g.writecb=d,g.writechunk=_,g.writeencoding=k,!g.transforming){var y=this._readableState;(g.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},h.prototype._read=function(_){var k=this._transformState;k.writechunk!==null&&!k.transforming?(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform)):k.needTransform=!0},h.prototype._destroy=function(_,k){a.prototype._destroy.call(this,_,function(d){k(d)})};function m(_,k,d){if(k)return _.emit("error",k);if(d!=null&&_.push(d),_._writableState.length)throw new l;if(_._transformState.transforming)throw new o;return _.push(null)}}),bi=le((e,t)=>{re(),t.exports=n;var r=an();ft()(n,r);function n(i){if(!(this instanceof n))return new n(i);r.call(this,i)}n.prototype._transform=function(i,o,l){l(null,i)}}),wi=le((e,t)=>{re();var r;function n(d){var g=!1;return function(){g||(g=!0,d.apply(void 0,arguments))}}var i=Et().codes,o=i.ERR_MISSING_ARGS,l=i.ERR_STREAM_DESTROYED;function a(d){if(d)throw d}function f(d){return d.setHeader&&typeof d.abort=="function"}function h(d,g,y,S){S=n(S);var w=!1;d.on("close",function(){w=!0}),r===void 0&&(r=mr()),r(d,{readable:g,writable:y},function(B){if(B)return S(B);w=!0,S()});var A=!1;return function(B){if(!w&&!A){if(A=!0,f(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();S(B||new l("pipe"))}}}function p(d){d()}function m(d,g){return d.pipe(g)}function _(d){return!d.length||typeof d[d.length-1]!="function"?a:d.pop()}function k(){for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];var S=_(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new o("streams");var w,A=g.map(function(B,P){var E=P<g.length-1,$=P>0;return h(B,E,$,function(M){w||(w=M),M&&A.forEach(p),!E&&(A.forEach(p),S(w))})});return g.reduce(m)}t.exports=k}),St=le((e,t)=>{re(),e=t.exports=on(),e.Stream=e,e.Readable=e,e.Writable=nn(),e.Duplex=_t(),e.Transform=an(),e.PassThrough=bi(),e.finished=mr(),e.pipeline=wi()}),vi=le((e,t)=>{re(),t.exports=r;function r(n,i){if(n&&i)return r(n)(i);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){o[l]=n[l]}),o;function o(){for(var l=new Array(arguments.length),a=0;a<l.length;a++)l[a]=arguments[a];var f=n.apply(this,l),h=l[l.length-1];return typeof f=="function"&&f!==h&&Object.keys(h).forEach(function(p){f[p]=h[p]}),f}}}),sn=le((e,t)=>{re();var r=vi();t.exports=r(n),t.exports.strict=r(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})});function n(o){var l=function(){return l.called?l.value:(l.called=!0,l.value=o.apply(this,arguments))};return l.called=!1,l}function i(o){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=o.apply(this,arguments)},a=o.name||"Function wrapped with `once`";return l.onceError=a+" shouldn't be called more than once",l.called=!1,l}}),ln=le((e,t)=>{re();var r=sn(),n=function(){},i=function(a){return a.setHeader&&typeof a.abort=="function"},o=function(a){return a.stdio&&Array.isArray(a.stdio)&&a.stdio.length===3},l=function(a,f,h){if(typeof f=="function")return l(a,null,f);f||(f={}),h=r(h||n);var p=a._writableState,m=a._readableState,_=f.readable||f.readable!==!1&&a.readable,k=f.writable||f.writable!==!1&&a.writable,d=!1,g=function(){a.writable||y()},y=function(){k=!1,_||h.call(a)},S=function(){_=!1,k||h.call(a)},w=function($){h.call(a,$?new Error("exited with error code: "+$):null)},A=function($){h.call(a,$)},B=function(){fe.nextTick(P)},P=function(){if(!d){if(_&&!(m&&m.ended&&!m.destroyed))return h.call(a,new Error("premature close"));if(k&&!(p&&p.ended&&!p.destroyed))return h.call(a,new Error("premature close"))}},E=function(){a.req.on("finish",y)};return i(a)?(a.on("complete",y),a.on("abort",B),a.req?E():a.on("request",E)):k&&!p&&(a.on("end",g),a.on("close",g)),o(a)&&a.on("exit",w),a.on("end",S),a.on("finish",y),f.error!==!1&&a.on("error",A),a.on("close",B),function(){d=!0,a.removeListener("complete",y),a.removeListener("abort",B),a.removeListener("request",E),a.req&&a.req.removeListener("finish",y),a.removeListener("end",g),a.removeListener("close",g),a.removeListener("finish",y),a.removeListener("exit",w),a.removeListener("end",S),a.removeListener("error",A),a.removeListener("close",B)}};t.exports=l}),_i=le(()=>{re()}),Ei=le((e,t)=>{re();var r=sn(),n=ln(),i=_i(),o=function(){},l=/^v?\.0/.test(fe.version),a=function(d){return typeof d=="function"},f=function(d){return!l||!i?!1:(d instanceof(i.ReadStream||o)||d instanceof(i.WriteStream||o))&&a(d.close)},h=function(d){return d.setHeader&&a(d.abort)},p=function(d,g,y,S){S=r(S);var w=!1;d.on("close",function(){w=!0}),n(d,{readable:g,writable:y},function(B){if(B)return S(B);w=!0,S()});var A=!1;return function(B){if(!w&&!A){if(A=!0,f(d))return d.close(o);if(h(d))return d.abort();if(a(d.destroy))return d.destroy();S(B||new Error("stream was destroyed"))}}},m=function(d){d()},_=function(d,g){return d.pipe(g)},k=function(){var d=Array.prototype.slice.call(arguments),g=a(d[d.length-1]||o)&&d.pop()||o;if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new Error("pump requires two streams per minimum");var y,S=d.map(function(w,A){var B=A<d.length-1,P=A>0;return p(w,B,P,function(E){y||(y=E),E&&S.forEach(m),!B&&(S.forEach(m),g(y))})});return d.reduce(_)};t.exports=k}),Si=le((e,t)=>{re(),t.exports=r;function r(i){var o=i._readableState;return o?o.objectMode||typeof i._duplexState=="number"?i.read():i.read(n(o)):null}function n(i){return i.buffer.length?i.buffer.head?i.buffer.head.data.length:i.buffer[0].length:i.length}}),Ai=le((e,t)=>{re();var r=St(),n=ln(),i=ft(),o=Si(),l=se.Buffer.from&&se.Buffer.from!==Uint8Array.from?se.Buffer.from([0]):new se.Buffer([0]),a=function(d,g){d._corked?d.once("uncork",g):g()},f=function(d,g){d._autoDestroy&&d.destroy(g)},h=function(d,g){return function(y){y?f(d,y.message==="premature close"?null:y):g&&!d._ended&&d.end()}},p=function(d,g){if(!d||d._writableState&&d._writableState.finished)return g();if(d._writableState)return d.end(g);d.end(),g()},m=function(){},_=function(d){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(d)},k=function(d,g,y){if(!(this instanceof k))return new k(d,g,y);r.Duplex.call(this,y),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!y||y.autoDestroy!==!1,this._forwardDestroy=!y||y.destroy!==!1,this._forwardEnd=!y||y.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,d&&this.setWritable(d),g&&this.setReadable(g)};i(k,r.Duplex),k.obj=function(d,g,y){return y||(y={}),y.objectMode=!0,y.highWaterMark=16,new k(d,g,y)},k.prototype.cork=function(){++this._corked===1&&this.emit("cork")},k.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},k.prototype.setWritable=function(d){if(this._unwrite&&this._unwrite(),this.destroyed){d&&d.destroy&&d.destroy();return}if(d===null||d===!1){this.end();return}var g=this,y=n(d,{writable:!0,readable:!1},h(this,this._forwardEnd)),S=function(){var A=g._ondrain;g._ondrain=null,A&&A()},w=function(){g._writable.removeListener("drain",S),y()};this._unwrite&&fe.nextTick(S),this._writable=d,this._writable.on("drain",S),this._unwrite=w,this.uncork()},k.prototype.setReadable=function(d){if(this._unread&&this._unread(),this.destroyed){d&&d.destroy&&d.destroy();return}if(d===null||d===!1){this.push(null),this.resume();return}var g=this,y=n(d,{writable:!1,readable:!0},h(this)),S=function(){g._forward()},w=function(){g.push(null)},A=function(){g._readable2.removeListener("readable",S),g._readable2.removeListener("end",w),y()};this._drained=!0,this._readable=d,this._readable2=d._readableState?d:_(d),this._readable2.on("readable",S),this._readable2.on("end",w),this._unread=A,this._forward()},k.prototype._read=function(){this._drained=!0,this._forward()},k.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var d;this._drained&&(d=o(this._readable2))!==null;)this.destroyed||(this._drained=this.push(d));this._forwarding=!1}},k.prototype.destroy=function(d,g){if(g||(g=m),this.destroyed)return g(null);this.destroyed=!0;var y=this;fe.nextTick(function(){y._destroy(d),g(null)})},k.prototype._destroy=function(d){if(d){var g=this._ondrain;this._ondrain=null,g?g(d):this.emit("error",d)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},k.prototype._write=function(d,g,y){if(!this.destroyed){if(this._corked)return a(this,this._write.bind(this,d,g,y));if(d===l)return this._finish(y);if(!this._writable)return y();this._writable.write(d)===!1?this._ondrain=y:this.destroyed||y()}},k.prototype._finish=function(d){var g=this;this.emit("preend"),a(this,function(){p(g._forwardEnd&&g._writable,function(){g._writableState.prefinished===!1&&(g._writableState.prefinished=!0),g.emit("prefinish"),a(g,d)})})},k.prototype.end=function(d,g,y){return typeof d=="function"?this.end(null,null,d):typeof g=="function"?this.end(d,null,g):(this._ended=!0,d&&this.write(d),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,y))},t.exports=k}),ki=le((e,t)=>{re();var r=Ei(),n=ft(),i=Ai(),o=function(a){return a.length?Array.isArray(a[0])?a[0]:Array.prototype.slice.call(a):[]},l=function(a){var f=function(){var h=o(arguments);if(!(this instanceof f))return new f(h);i.call(this,null,null,a),h.length&&this.setPipeline(h)};return n(f,i),f.prototype.setPipeline=function(){var h=o(arguments),p=this,m=!1,_=h[0],k=h[h.length-1];k=k.readable?k:null,_=_.writable?_:null;var d=function(){h[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",d),this.on("prefinish",function(){m||p.cork()}),r(h,function(g){if(p.removeListener("close",d),g)return p.destroy(g.message==="premature close"?null:g);m=!0,p._autoDestroy===!1&&(p._autoDestroy=!0),p.uncork()}),this.destroyed)return d();this.setWritable(_),this.setReadable(k)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),Ii=le(()=>{re()}),un=le((e,t)=>{re(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,a){if(a=a||{type:"Array"},typeof fe<"u"&&typeof fe.pid=="number"&&fe.versions&&fe.versions.node)return i(l,a);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return o(l,a)}function i(l,a){var f=Ii(),h=f.randomBytes(l);switch(a.type){case"Array":return[].slice.call(h);case"Buffer":return h;case"Uint8Array":for(var p=new Uint8Array(l),m=0;m<l;++m)p[m]=h.readUInt8(m);return p;default:throw new Error(a.type+" is unsupported.")}}function o(l,a){var f=new Uint8Array(l),h=window.crypto||window.msCrypto;switch(h.getRandomValues(f),a.type){case"Array":return[].slice.call(f);case"Buffer":try{var p=new se.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new se.Buffer(f);case"Uint8Array":return f;default:throw new Error(a.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),fn=le((e,t)=>{re(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;r[n]=o;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(r,n);if(a.value!==o||a.enumerable!==!0)return!1}return!0}}),Zt=le((e,t)=>{re();var r=fn();t.exports=function(){return r()&&!!Symbol.toStringTag}}),Bi=le((e,t)=>{re();var r=typeof Symbol<"u"&&Symbol,n=fn();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),Oi=le((e,t)=>{re();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,o="[object Function]";t.exports=function(l){var a=this;if(typeof a!="function"||i.call(a)!==o)throw new TypeError(r+a);for(var f=n.call(arguments,1),h,p=function(){if(this instanceof h){var g=a.apply(this,f.concat(n.call(arguments)));return Object(g)===g?g:this}else return a.apply(l,f.concat(n.call(arguments)))},m=Math.max(0,a.length-f.length),_=[],k=0;k<m;k++)_.push("$"+k);if(h=Function("binder","return function ("+_.join(",")+"){ return binder.apply(this,arguments); }")(p),a.prototype){var d=function(){};d.prototype=a.prototype,h.prototype=new d,d.prototype=null}return h}}),br=le((e,t)=>{re();var r=Oi();t.exports=Function.prototype.bind||r}),Ri=le((e,t)=>{re();var r=br();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),wr=le((e,t)=>{re();var r,n=SyntaxError,i=Function,o=TypeError,l=function(j){try{return i('"use strict"; return ('+j+").constructor;")()}catch{}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var f=function(){throw new o},h=a?function(){try{return arguments.callee,f}catch{try{return a(arguments,"callee").get}catch{return f}}}():f,p=Bi()(),m=Object.getPrototypeOf||function(j){return j.__proto__},_={},k=typeof Uint8Array>"u"?r:m(Uint8Array),d={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":p?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":_,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?m(m([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?r:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?r:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?m(""[Symbol.iterator]()):r,"%Symbol%":p?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":h,"%TypedArray%":k,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},g=function j(V){var z;if(V==="%AsyncFunction%")z=l("async function () {}");else if(V==="%GeneratorFunction%")z=l("function* () {}");else if(V==="%AsyncGeneratorFunction%")z=l("async function* () {}");else if(V==="%AsyncGenerator%"){var ee=j("%AsyncGeneratorFunction%");ee&&(z=ee.prototype)}else if(V==="%AsyncIteratorPrototype%"){var oe=j("%AsyncGenerator%");oe&&(z=m(oe.prototype))}return d[V]=z,z},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=br(),w=Ri(),A=S.call(Function.call,Array.prototype.concat),B=S.call(Function.apply,Array.prototype.splice),P=S.call(Function.call,String.prototype.replace),E=S.call(Function.call,String.prototype.slice),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,C=function(j){var V=E(j,0,1),z=E(j,-1);if(V==="%"&&z!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(z==="%"&&V!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ee=[];return P(j,$,function(oe,de,pe,Ae){ee[ee.length]=pe?P(Ae,M,"$1"):de||oe}),ee},D=function(j,V){var z=j,ee;if(w(y,z)&&(ee=y[z],z="%"+ee[0]+"%"),w(d,z)){var oe=d[z];if(oe===_&&(oe=g(z)),typeof oe>"u"&&!V)throw new o("intrinsic "+j+" exists, but is not available. Please file an issue!");return{alias:ee,name:z,value:oe}}throw new n("intrinsic "+j+" does not exist!")};t.exports=function(j,V){if(typeof j!="string"||j.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof V!="boolean")throw new o('"allowMissing" argument must be a boolean');var z=C(j),ee=z.length>0?z[0]:"",oe=D("%"+ee+"%",V),de=oe.name,pe=oe.value,Ae=!1,Se=oe.alias;Se&&(ee=Se[0],B(z,A([0,1],Se)));for(var ge=1,ce=!0;ge<z.length;ge+=1){var R=z[ge],U=E(R,0,1),q=E(R,-1);if((U==='"'||U==="'"||U==="`"||q==='"'||q==="'"||q==="`")&&U!==q)throw new n("property names with quotes must have matching quotes");if((R==="constructor"||!ce)&&(Ae=!0),ee+="."+R,de="%"+ee+"%",w(d,de))pe=d[de];else if(pe!=null){if(!(R in pe)){if(!V)throw new o("base intrinsic for "+j+" exists, but the property is not available.");return}if(a&&ge+1>=z.length){var Q=a(pe,R);ce=!!Q,ce&&"get"in Q&&!("originalValue"in Q.get)?pe=Q.get:pe=pe[R]}else ce=w(pe,R),pe=pe[R];ce&&!Ae&&(d[de]=pe)}}return pe}}),Ti=le((e,t)=>{re();var r=br(),n=wr(),i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(o,i),a=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),h=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(m){var _=l(r,o,arguments);if(a&&f){var k=a(_,"length");k.configurable&&f(_,"length",{value:1+h(0,m.length-(arguments.length-1))})}return _};var p=function(){return l(r,i,arguments)};f?f(t.exports,"apply",{value:p}):t.exports.apply=p}),vr=le((e,t)=>{re();var r=wr(),n=Ti(),i=n(r("String.prototype.indexOf"));t.exports=function(o,l){var a=r(o,!!l);return typeof a=="function"&&i(o,".prototype.")>-1?n(a):a}}),$i=le((e,t)=>{re();var r=Zt()(),n=vr(),i=n("Object.prototype.toString"),o=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:i(f)==="[object Arguments]"},l=function(f){return o(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&i(f)!=="[object Array]"&&i(f.callee)==="[object Function]"},a=function(){return o(arguments)}();o.isLegacyArguments=l,t.exports=a?o:l}),Li=le((e,t)=>{re();var r=Object.prototype.toString,n=Function.prototype.toString,i=/^\s*(?:function)?\*/,o=Zt()(),l=Object.getPrototypeOf,a=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(h){if(typeof h!="function")return!1;if(i.test(n.call(h)))return!0;if(!o){var p=r.call(h);return p==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var m=a();f=m?l(m):!1}return l(h)===f}}),cn=le((e,t)=>{re();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(i,o,l){if(n.call(o)!=="[object Function]")throw new TypeError("iterator must be a function");var a=i.length;if(a===+a)for(var f=0;f<a;f++)o.call(l,i[f],f,i);else for(var h in i)r.call(i,h)&&o.call(l,i[h],h,i)}}),hn=le((e,t)=>{re();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?ut:globalThis;t.exports=function(){for(var i=[],o=0;o<r.length;o++)typeof n[r[o]]=="function"&&(i[i.length]=r[o]);return i}}),dn=le((e,t)=>{re();var r=wr(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),pn=le((e,t)=>{re();var r=cn(),n=hn(),i=vr(),o=i("Object.prototype.toString"),l=Zt()(),a=typeof globalThis>"u"?ut:globalThis,f=n(),h=i("Array.prototype.indexOf",!0)||function(g,y){for(var S=0;S<g.length;S+=1)if(g[S]===y)return S;return-1},p=i("String.prototype.slice"),m={},_=dn(),k=Object.getPrototypeOf;l&&_&&k&&r(f,function(g){var y=new a[g];if(Symbol.toStringTag in y){var S=k(y),w=_(S,Symbol.toStringTag);if(!w){var A=k(S);w=_(A,Symbol.toStringTag)}m[g]=w.get}});var d=function(g){var y=!1;return r(m,function(S,w){if(!y)try{y=S.call(g)===w}catch{}}),y};t.exports=function(g){if(!g||typeof g!="object")return!1;if(!l||!(Symbol.toStringTag in g)){var y=p(o(g),8,-1);return h(f,y)>-1}return _?d(g):!1}}),Mi=le((e,t)=>{re();var r=cn(),n=hn(),i=vr(),o=i("Object.prototype.toString"),l=Zt()(),a=typeof globalThis>"u"?ut:globalThis,f=n(),h=i("String.prototype.slice"),p={},m=dn(),_=Object.getPrototypeOf;l&&m&&_&&r(f,function(g){if(typeof a[g]=="function"){var y=new a[g];if(Symbol.toStringTag in y){var S=_(y),w=m(S,Symbol.toStringTag);if(!w){var A=_(S);w=m(A,Symbol.toStringTag)}p[g]=w.get}}});var k=function(g){var y=!1;return r(p,function(S,w){if(!y)try{var A=S.call(g);A===w&&(y=A)}catch{}}),y},d=pn();t.exports=function(g){return d(g)?!l||!(Symbol.toStringTag in g)?h(o(g),8,-1):k(g):!1}}),Pi=le(e=>{re();var t=$i(),r=Li(),n=Mi(),i=pn();function o(N){return N.call.bind(N)}var l=typeof BigInt<"u",a=typeof Symbol<"u",f=o(Object.prototype.toString),h=o(Number.prototype.valueOf),p=o(String.prototype.valueOf),m=o(Boolean.prototype.valueOf);l&&(_=o(BigInt.prototype.valueOf));var _;a&&(k=o(Symbol.prototype.valueOf));var k;function d(N,Me){if(typeof N!="object")return!1;try{return Me(N),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=i;function g(N){return typeof Promise<"u"&&N instanceof Promise||N!==null&&typeof N=="object"&&typeof N.then=="function"&&typeof N.catch=="function"}e.isPromise=g;function y(N){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(N):i(N)||U(N)}e.isArrayBufferView=y;function S(N){return n(N)==="Uint8Array"}e.isUint8Array=S;function w(N){return n(N)==="Uint8ClampedArray"}e.isUint8ClampedArray=w;function A(N){return n(N)==="Uint16Array"}e.isUint16Array=A;function B(N){return n(N)==="Uint32Array"}e.isUint32Array=B;function P(N){return n(N)==="Int8Array"}e.isInt8Array=P;function E(N){return n(N)==="Int16Array"}e.isInt16Array=E;function $(N){return n(N)==="Int32Array"}e.isInt32Array=$;function M(N){return n(N)==="Float32Array"}e.isFloat32Array=M;function C(N){return n(N)==="Float64Array"}e.isFloat64Array=C;function D(N){return n(N)==="BigInt64Array"}e.isBigInt64Array=D;function j(N){return n(N)==="BigUint64Array"}e.isBigUint64Array=j;function V(N){return f(N)==="[object Map]"}V.working=typeof Map<"u"&&V(new Map);function z(N){return typeof Map>"u"?!1:V.working?V(N):N instanceof Map}e.isMap=z;function ee(N){return f(N)==="[object Set]"}ee.working=typeof Set<"u"&&ee(new Set);function oe(N){return typeof Set>"u"?!1:ee.working?ee(N):N instanceof Set}e.isSet=oe;function de(N){return f(N)==="[object WeakMap]"}de.working=typeof WeakMap<"u"&&de(new WeakMap);function pe(N){return typeof WeakMap>"u"?!1:de.working?de(N):N instanceof WeakMap}e.isWeakMap=pe;function Ae(N){return f(N)==="[object WeakSet]"}Ae.working=typeof WeakSet<"u"&&Ae(new WeakSet);function Se(N){return Ae(N)}e.isWeakSet=Se;function ge(N){return f(N)==="[object ArrayBuffer]"}ge.working=typeof ArrayBuffer<"u"&&ge(new ArrayBuffer);function ce(N){return typeof ArrayBuffer>"u"?!1:ge.working?ge(N):N instanceof ArrayBuffer}e.isArrayBuffer=ce;function R(N){return f(N)==="[object DataView]"}R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1));function U(N){return typeof DataView>"u"?!1:R.working?R(N):N instanceof DataView}e.isDataView=U;var q=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(N){return f(N)==="[object SharedArrayBuffer]"}function me(N){return typeof q>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new q)),Q.working?Q(N):N instanceof q)}e.isSharedArrayBuffer=me;function ye(N){return f(N)==="[object AsyncFunction]"}e.isAsyncFunction=ye;function O(N){return f(N)==="[object Map Iterator]"}e.isMapIterator=O;function T(N){return f(N)==="[object Set Iterator]"}e.isSetIterator=T;function x(N){return f(N)==="[object Generator]"}e.isGeneratorObject=x;function ne(N){return f(N)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=ne;function te(N){return d(N,h)}e.isNumberObject=te;function b(N){return d(N,p)}e.isStringObject=b;function v(N){return d(N,m)}e.isBooleanObject=v;function W(N){return l&&d(N,_)}e.isBigIntObject=W;function Z(N){return a&&d(N,k)}e.isSymbolObject=Z;function be(N){return te(N)||b(N)||v(N)||W(N)||Z(N)}e.isBoxedPrimitive=be;function he(N){return typeof Uint8Array<"u"&&(ce(N)||me(N))}e.isAnyArrayBuffer=he,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(N){Object.defineProperty(e,N,{enumerable:!1,value:function(){throw new Error(N+" is not supported in userland")}})})}),ji=le((e,t)=>{re(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),Ni=le(e=>{re();var t=Object.getOwnPropertyDescriptors||function(R){for(var U=Object.keys(R),q={},Q=0;Q<U.length;Q++)q[U[Q]]=Object.getOwnPropertyDescriptor(R,U[Q]);return q},r=/%[sdj%]/g;e.format=function(R){if(!P(R)){for(var U=[],q=0;q<arguments.length;q++)U.push(l(arguments[q]));return U.join(" ")}for(var q=1,Q=arguments,me=Q.length,ye=String(R).replace(r,function(x){if(x==="%%")return"%";if(q>=me)return x;switch(x){case"%s":return String(Q[q++]);case"%d":return Number(Q[q++]);case"%j":try{return JSON.stringify(Q[q++])}catch{return"[Circular]"}default:return x}}),O=Q[q];q<me;O=Q[++q])w(O)||!C(O)?ye+=" "+O:ye+=" "+l(O);return ye},e.deprecate=function(R,U){if(typeof fe<"u"&&fe.noDeprecation===!0)return R;if(typeof fe>"u")return function(){return e.deprecate(R,U).apply(this,arguments)};var q=!1;function Q(){if(!q){if(fe.throwDeprecation)throw new Error(U);fe.traceDeprecation?console.trace(U):console.error(U),q=!0}return R.apply(this,arguments)}return Q};var n={},i=/^$/;fe.env.NODE_DEBUG&&(o=fe.env.NODE_DEBUG,o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i"));var o;e.debuglog=function(R){if(R=R.toUpperCase(),!n[R])if(i.test(R)){var U=fe.pid;n[R]=function(){var q=e.format.apply(e,arguments);console.error("%s %d: %s",R,U,q)}}else n[R]=function(){};return n[R]};function l(R,U){var q={seen:[],stylize:f};return arguments.length>=3&&(q.depth=arguments[2]),arguments.length>=4&&(q.colors=arguments[3]),S(U)?q.showHidden=U:U&&e._extend(q,U),$(q.showHidden)&&(q.showHidden=!1),$(q.depth)&&(q.depth=2),$(q.colors)&&(q.colors=!1),$(q.customInspect)&&(q.customInspect=!0),q.colors&&(q.stylize=a),p(q,R,q.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(R,U){var q=l.styles[U];return q?"\x1B["+l.colors[q][0]+"m"+R+"\x1B["+l.colors[q][1]+"m":R}function f(R,U){return R}function h(R){var U={};return R.forEach(function(q,Q){U[q]=!0}),U}function p(R,U,q){if(R.customInspect&&U&&V(U.inspect)&&U.inspect!==e.inspect&&!(U.constructor&&U.constructor.prototype===U)){var Q=U.inspect(q,R);return P(Q)||(Q=p(R,Q,q)),Q}var me=m(R,U);if(me)return me;var ye=Object.keys(U),O=h(ye);if(R.showHidden&&(ye=Object.getOwnPropertyNames(U)),j(U)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return _(U);if(ye.length===0){if(V(U)){var T=U.name?": "+U.name:"";return R.stylize("[Function"+T+"]","special")}if(M(U))return R.stylize(RegExp.prototype.toString.call(U),"regexp");if(D(U))return R.stylize(Date.prototype.toString.call(U),"date");if(j(U))return _(U)}var x="",ne=!1,te=["{","}"];if(y(U)&&(ne=!0,te=["[","]"]),V(U)){var b=U.name?": "+U.name:"";x=" [Function"+b+"]"}if(M(U)&&(x=" "+RegExp.prototype.toString.call(U)),D(U)&&(x=" "+Date.prototype.toUTCString.call(U)),j(U)&&(x=" "+_(U)),ye.length===0&&(!ne||U.length==0))return te[0]+x+te[1];if(q<0)return M(U)?R.stylize(RegExp.prototype.toString.call(U),"regexp"):R.stylize("[Object]","special");R.seen.push(U);var v;return ne?v=k(R,U,q,O,ye):v=ye.map(function(W){return d(R,U,q,O,W,ne)}),R.seen.pop(),g(v,x,te)}function m(R,U){if($(U))return R.stylize("undefined","undefined");if(P(U)){var q="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(q,"string")}if(B(U))return R.stylize(""+U,"number");if(S(U))return R.stylize(""+U,"boolean");if(w(U))return R.stylize("null","null")}function _(R){return"["+Error.prototype.toString.call(R)+"]"}function k(R,U,q,Q,me){for(var ye=[],O=0,T=U.length;O<T;++O)Ae(U,String(O))?ye.push(d(R,U,q,Q,String(O),!0)):ye.push("");return me.forEach(function(x){x.match(/^\d+$/)||ye.push(d(R,U,q,Q,x,!0))}),ye}function d(R,U,q,Q,me,ye){var O,T,x;if(x=Object.getOwnPropertyDescriptor(U,me)||{value:U[me]},x.get?x.set?T=R.stylize("[Getter/Setter]","special"):T=R.stylize("[Getter]","special"):x.set&&(T=R.stylize("[Setter]","special")),Ae(Q,me)||(O="["+me+"]"),T||(R.seen.indexOf(x.value)<0?(w(q)?T=p(R,x.value,null):T=p(R,x.value,q-1),T.indexOf(`
`)>-1&&(ye?T=T.split(`
`).map(function(ne){return"  "+ne}).join(`
`).substr(2):T=`
`+T.split(`
`).map(function(ne){return"   "+ne}).join(`
`))):T=R.stylize("[Circular]","special")),$(O)){if(ye&&me.match(/^\d+$/))return T;O=JSON.stringify(""+me),O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=R.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=R.stylize(O,"string"))}return O+": "+T}function g(R,U,q){var Q=0,me=R.reduce(function(ye,O){return Q++,O.indexOf(`
`)>=0&&Q++,ye+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?q[0]+(U===""?"":U+`
 `)+" "+R.join(`,
  `)+" "+q[1]:q[0]+U+" "+R.join(", ")+" "+q[1]}e.types=Pi();function y(R){return Array.isArray(R)}e.isArray=y;function S(R){return typeof R=="boolean"}e.isBoolean=S;function w(R){return R===null}e.isNull=w;function A(R){return R==null}e.isNullOrUndefined=A;function B(R){return typeof R=="number"}e.isNumber=B;function P(R){return typeof R=="string"}e.isString=P;function E(R){return typeof R=="symbol"}e.isSymbol=E;function $(R){return R===void 0}e.isUndefined=$;function M(R){return C(R)&&ee(R)==="[object RegExp]"}e.isRegExp=M,e.types.isRegExp=M;function C(R){return typeof R=="object"&&R!==null}e.isObject=C;function D(R){return C(R)&&ee(R)==="[object Date]"}e.isDate=D,e.types.isDate=D;function j(R){return C(R)&&(ee(R)==="[object Error]"||R instanceof Error)}e.isError=j,e.types.isNativeError=j;function V(R){return typeof R=="function"}e.isFunction=V;function z(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}e.isPrimitive=z,e.isBuffer=ji();function ee(R){return Object.prototype.toString.call(R)}function oe(R){return R<10?"0"+R.toString(10):R.toString(10)}var de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var R=new Date,U=[oe(R.getHours()),oe(R.getMinutes()),oe(R.getSeconds())].join(":");return[R.getDate(),de[R.getMonth()],U].join(" ")}e.log=function(){console.log("%s - %s",pe(),e.format.apply(e,arguments))},e.inherits=ft(),e._extend=function(R,U){if(!U||!C(U))return R;for(var q=Object.keys(U),Q=q.length;Q--;)R[q[Q]]=U[q[Q]];return R};function Ae(R,U){return Object.prototype.hasOwnProperty.call(R,U)}var Se=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');if(Se&&R[Se]){var U=R[Se];if(typeof U!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,Se,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var q,Q,me=new Promise(function(T,x){q=T,Q=x}),ye=[],O=0;O<arguments.length;O++)ye.push(arguments[O]);ye.push(function(T,x){T?Q(T):q(x)});try{R.apply(this,ye)}catch(T){Q(T)}return me}return Object.setPrototypeOf(U,Object.getPrototypeOf(R)),Se&&Object.defineProperty(U,Se,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,t(R))},e.promisify.custom=Se;function ge(R,U){if(!R){var q=new Error("Promise was rejected with a falsy value");q.reason=R,R=q}return U(R)}function ce(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var q=[],Q=0;Q<arguments.length;Q++)q.push(arguments[Q]);var me=q.pop();if(typeof me!="function")throw new TypeError("The last argument must be of type Function");var ye=this,O=function(){return me.apply(ye,arguments)};R.apply(this,q).then(function(T){fe.nextTick(O.bind(null,null,T))},function(T){fe.nextTick(ge.bind(null,T,O))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(R)),Object.defineProperties(U,t(R)),U}e.callbackify=ce}),Ui=le((e,t)=>{re();var r=St(),n=Ni(),i=r.Transform;function o(l){if(!(this instanceof o))return new o(l);this._toSkip=l.skip,i.call(this,l)}n.inherits(o,i),o.prototype._transform=function(l,a,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=o});re();re();var gn=Ye(St(),1),yn=Ye(ki(),1);re();var mn=Ye(St(),1);function bn(e,t){let r=[],n;e.on("data",i=>r.push(i)),e.on("end",()=>{n||(n=!0,t(null,se.Buffer.concat(r)))}),e.on("error",i=>{n||(n=!0,t(i))})}function wn(e){let t;return new mn.Transform({transform(r,n,i){t&&(r=se.Buffer.concat([t,r]));let o=Math.floor(r.length/e)*e;o?r.length>o?(t=r.slice(o),this.push(r.slice(0,o))):(t=void 0,this.push(r)):t=t?se.Buffer.concat([t,r]):r,i()},flush(r){t&&this.push(t),r()}})}function Ci(e,t){let r=[],n=0;return new mn.Transform({transform(i,o,l){r.push(i),n+=i.length,l()},flush(i){t(n);function o(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",o);e.end(),i()}o()}})}function Fe(e){let t,r=new Promise((n,i)=>{t=(o,l)=>{o?i(o):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var Di=Ye(un(),1);re();re();var _r=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,i,o,l=this._tables[0][4],a=this._tables[1],f=e.length,h=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[i=e.slice(0),o=[]],t=f;t<4*f+28;t++)n=i[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^h<<24,h=h<<1^(h>>7)*283)),i[t]=i[t-f]^n;for(r=0;t;r++,t--)n=i[r&3?t:t-4],t<=4||r<4?o[r]=n:o[r]=a[0][l[n>>>24]]^a[1][l[n>>16&255]]^a[2][l[n>>8&255]]^a[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],i,o,l,a=[],f=[],h,p,m,_,k,d;for(i=0;i<256;i++)f[(a[i]=i<<1^(i>>7)*283)^i]=i;for(o=l=0;!r[o];o^=h||1,l=f[l]||1)for(_=l^l<<1^l<<2^l<<3^l<<4,_=_>>8^_&255^99,r[o]=_,n[_]=o,m=a[p=a[h=a[o]]],d=m*16843009^p*65537^h*257^o*16843008,k=a[_]*257^_*16843008,i=0;i<4;i++)e[i][o]=k=k<<24^k>>>8,t[i][_]=d=d<<24^d>>>8;for(i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],i=e[t?3:1]^r[1],o=e[2]^r[2],l=e[t?1:3]^r[3],a,f,h,p=r.length/4-2,m,_=4,k=[0,0,0,0],d=this._tables[t],g=d[0],y=d[1],S=d[2],w=d[3],A=d[4];for(m=0;m<p;m++)a=g[n>>>24]^y[i>>16&255]^S[o>>8&255]^w[l&255]^r[_],f=g[i>>>24]^y[o>>16&255]^S[l>>8&255]^w[n&255]^r[_+1],h=g[o>>>24]^y[l>>16&255]^S[n>>8&255]^w[i&255]^r[_+2],l=g[l>>>24]^y[n>>16&255]^S[i>>8&255]^w[o&255]^r[_+3],_+=4,n=a,i=f,o=h;for(m=0;m<4;m++)k[t?3&-m:m]=A[n>>>24]<<24^A[i>>16&255]<<16^A[o>>8&255]<<8^A[l&255]^r[_++],a=n,n=i,i=o,o=l,l=a;return k}};_r.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function Fi(e){let t,r,n,i=[2479122403,2108737444,3518906241,22203222],o=se.Buffer.alloc(Math.ceil(e.length/4)*4);for(o.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let a=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(a[t/4]=o.readInt32BE(t+r));i=new _r(a).encrypt(i)}let l=se.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(i[t],t*4);return l}function xi(e,t,r){let n=se.Buffer.from(t.s,"base64"),i=1e5,o="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:i,hash:{name:o}},l,256)).then(l=>{r(null,se.Buffer.from(l))}).catch(r)}var et=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new _r(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,i;for(n=0;n<e.length;n+=16){for(i=0;i<4;i++)r[i]=e.readUInt32BE(n+i*4)^t[i];for(t=this.aes.encrypt(r),i=0;i<4;i++)e.writeInt32BE(t[i],n+i*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),i,o;for(i=0;i<e.length;i+=16){for(o=0;o<4;o++)r[o]=e.readUInt32BE(i+o*4);for(n=r,r=this.aes.decrypt(r),o=0;o<4;o++)e.writeInt32BE(r[o]^t[o],i+o*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let i=e.length-n;t[n/4&3]^=e.readIntBE(n,i)<<(4-i)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=se.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},vn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=se.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(se.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(se.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},_n=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=se.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=se.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=se.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(se.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function Xe(e){return typeof e=="string"?Er(e):e}function je(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Er(e){return se.Buffer.from(e,"base64")}function dt(e){return new et(En(e).slice(0,16))}function Wi(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=Xe(e),e||(e=(0,Di.default)(24)),e instanceof se.Buffer||(e=se.Buffer.from(e));let n=new gn.Transform({transform(a,f,h){l.update(a);let p=o.encrypt(a);h(null,se.Buffer.from(p))},flush(a){n.mac=l.condense(),n.key=Vi(e,n.mac),a()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let i=new et(e.slice(0,16)),o=new vn(i,e.slice(16),r),l=new _n(i,e.slice(16));return n=(0,yn.default)(wn(16),n),n}function qi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=Xe(e),e instanceof se.Buffer||(e=se.Buffer.from(e));let n=dt(e),i=new vn(n,e.slice(16),r),o=!t.disableVerification&&new _n(n,e.slice(16)),l=new gn.Transform({transform(a,f,h){let p=i.decrypt(a);o&&o.update(p),h(null,se.Buffer.from(p))},flush(a){if(o&&(l.mac=o.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){a(Error("MAC verification failed"));return}a()}});return l=(0,yn.default)(wn(16),l),l}function En(e){let t=se.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function Vi(e,t){let r=se.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function zi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let i=0;i<r;i++)n|=e[i]^t[i];return n===0}re();re();var rt={},Gi=Math.log(2);function jt(e){let t=[];for(;e-- >0;)t[e]=0;return t}function Nt(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function Hi(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function Sn(e,t){let r=e.length,n=t.length;if(r<n)return Sn(t,e);let i=[],o=0,l=0;for(;l<n;l++)o+=e[l]+t[l],i[l]=o&268435455,o>>>=28;for(;l<r;l++)o+=e[l],i[l]=o&268435455,o>>>=28;return o&&(i[l]=o),i}function Ke(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let i=[],o=0,l;for(l=0;l<n;l++)o+=e[l]-t[l],i[l]=o&268435455,o>>=28;for(;l<r;l++)o+=e[l],i[l]=o&268435455,o>>=28;return o?[]:Nt(i)}function fr(e,t,r,n,i){let o=r&16383,l=r>>14,a=n&16383,f=n>>14,h=l*a+f*o,p=o*a+((h&16383)<<14)+e[t]+i;return e[t]=p&268435455,i=l*f+(h>>14)+(p>>28),i}function Ki(e){let t=e.length,r=2*t,n=jt(r),i=0,o,l;for(o=0;o<t;o++){for(i=fr(n,2*o,e[o],e[o],0),l=o+1;l<t;l++)i=fr(n,o+l,2*e[l],e[o],i);n[o+t]=i}return Nt(n)}function at(e,t){let r=e.length,n=t.length,i=jt(r+n-1),o,l,a;for(l=0;l<n;l++){for(o=0,a=0;a<r;a++)o=fr(i,l+a,e[a],t[l],o);i[l+r]=o}return Nt(i)}function kt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function An(e,t){let r=e.length-1,n=t.length-1,i=r-n,o,l,a,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return rt.q=[0],rt.mod=e,rt;if(r===n&&kt(e,n,2)/kt(t,n,2)<4){for(o=e.concat(),l=0;a=Ke(o,t),a.length!==0;)o=a,l++;return rt.q=[l],rt.mod=o,rt}let h=Math.floor(Math.log(t[n])/Gi)+1,p=28-h;o=e.concat();let m=t.concat();if(p){for(f=n;f>0;f--)m[f]=m[f]<<p&268435455|m[f-1]>>h;for(m[0]=m[0]<<p&268435455,o[r]&(268435455<<h&268435455)&&(o[++r]=0,i++),f=r;f>0;f--)o[f]=o[f]<<p&268435455|o[f-1]>>h;o[0]=o[0]<<p&268435455}let _,k=jt(i+1),d=jt(i).concat(m);for(;_=Ke(o,d),_.length!==0;)k[i]++,o=_;let g=m[n],y=kt(m,n,2),S;for(f=r;f>n;f--){S=f-n-1,f>=o.length?k[S]=1:o[f]===g?k[S]=268435455:k[S]=Math.floor(kt(o,f,2)/g);let w=kt(o,f,3);for(;k[S]*y>w;)k[S]--;d=d.slice(1),_=Ke(o,at([k[S]],d)),_.length===0&&(k[S]--,_=Ke(o,at([k[S]],d))),o=_}if(p){for(f=0;f<o.length-1;f++)o[f]=o[f]>>p|o[f+1]<<h&268435455;o[o.length-1]>>=p}return rt.q=Nt(k),rt.mod=Nt(o),rt}function Yi(e,t){let r=0,n;for(let i=e.length-1;i>=0;i--)n=e[i],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function mt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Yi(e,t[0])]}return An(e,t).mod}function Tt(e,t,r){let n=e.length-(t.length<<1);if(n>0)return Tt(e.slice(0,n).concat(Tt(e.slice(n),t,r)),t,r);let i=t.length+1,o=t.length-1,l,a=at(e.slice(o),r).slice(i),f=e.slice(0,i),h=at(a,t).slice(0,i),p=Ke(f,h);p.length===0&&(f[i]=1,p=Ke(f,h));for(let m=0;l=Ke(p,t),l.length!==0;m++)if(p=l,m>=3)return Tt(p,t,r);return p}function Tr(e,t,r){let n=e.concat(),i=t.length-1,o=r.length*2,l=jt(o+1);for(l[o]=1,l=An(l,r).q,o=Hi(t[i])-2;i>=0;i--){for(;o>=0;o-=1)n=Tt(Ki(n),r,l),t[i]&1<<o&&(n=Tt(at(n,e),r,l));o=28-1}return n}function Ji(e,t,r,n,i){let o=Tr(mt(e,r),mt(t,Ke(r,[1])),r),l=Tr(mt(e,n),mt(t,Ke(n,[1])),n),a=Ke(l,o);return a.length===0?(a=Ke(o,l),a=mt(at(a,i),n),a=Ke(n,a)):a=mt(at(a,i),n),Sn(at(a,r),o)}function kn(e){let t=1,r=[0],n=0,i=256,o=e.length,l;if(o<2)return 0;let a=(o-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>a||f<a-8)return 0;for(let h=0;h<a;h++)(i<<=1)>255&&(i=1,l=e.charCodeAt(--o)),t>268435455&&(t=1,r[++n]=0),l&i&&(r[n]|=t),t<<=1;return r}function Xi(e){let t=1,r=0,n=[0],i=1,o=0,l=e.length*28,a="",f;for(f=0;f<l;f++)e[r]&t&&(n[o]|=i),(i<<=1)>255&&(i=1,n[++o]=0),(t<<=1)>268435455&&(t=1,r++);for(;o>=0&&n[o]===0;)o--;for(f=0;f<=o;f++)a=String.fromCharCode(n[f])+a;return a}function Qi(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=kn(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Zi(e,t){let r=kn(e.toString("binary")),n=Xi(Ji(r,t[2],t[0],t[1],t[3]));return se.Buffer.from(n,"binary")}re();var eo=Ye(zt(),1);re();var to=null;re();var ro=globalThis.fetch,no=ro;re();var io=globalThis.AbortController||to,cr=io,hr=4,$r={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+hr+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later",19:"ETOOMANYCONNECTIONS (-19)",24:"EGOINGOVERQUOTA (-24)",25:"EROLLEDBACK (-25)",26:"EMFAREQUIRED (-26): Multi-Factor Authentication Required",27:"EMASTERONLY (-27)",28:"EBUSINESSPASTDUE (-28)",29:"EPAYWALL (-29): ODQ paywall state",400:"ETOOERR (-400)",401:"ESHAREROVERQUOTA (-401)"},oo="https://g.api.mega.co.nz/",ao=null,so=null,Ot=class extends eo.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||oo;let r="1.1.2";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||ao,this.httpsAgent=t.httpsAgent||so,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),no(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[i,o]=Fe(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(Lr).then(a=>{if(this.closed&&!n)return;if(!a)return i(Error("Empty response"));a.length&&(a=a[0]);let f;if(typeof a=="number"&&a<0){if(a===-3&&r<hr)return setTimeout(()=>{this.request(e,i,r+1)},Math.pow(2,r+1)*1e3);f=Error($r[-a])}else this.keepalive&&a&&a.sn&&this.pull(a.sn);i(f,a)}).catch(a=>{i(a)}),o}pull(e,t=0){let r=new cr;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(Lr).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<hr)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error($r[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(lo).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new cr;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return Ot.globalApi||(Ot.globalApi=new Ot),Ot.globalApi}};function Lr(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function lo(e){if(e.name!=="AbortError")throw e}var Yt=Ot,uo=Ye(zt(),1);re();re();var fo=Ye(zt(),1),co=Ye(St(),1),ho=Ye(Ui(),1),ht=class extends fo.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?Xe(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Yt.getGlobalApi(),!(this.api instanceof Yt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=Xe(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=Er(e),dt(this.key).decryptCBC(e);let t=ht.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=In[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=Fe(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(i,o)=>{if(i)return t(i);if(this.directory){let l=Object.create(null),a=o.f,f=a.find(p=>p.k&&p.h===p.k.split(":")[0]),h=this.key?new et(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let p of a){if(p===f)continue;let m=new ht(p,this.storage);m.loadMetadata(h,p),m.downloadId=[this.downloadId,p.h],l[p.h]=m}for(let p of a){let m=l[p.p];if(m){let _=l[p.h];m.children||(m.children=[]),m.children.push(_),_.parent=m}}if(this.loadMetadata(h,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let p=l[this.loadedFile];typeof p>"u"?t(Error("Node (file or folder) not found in folder")):t(null,p)}else t(null,this)}else{if(this.size=o.s,this.decryptAttributes(o.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,i=e.end||null,o=e.maxConnections||4,l=e.initialChunkSize||128*1024,a=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,h=e.forceHttps??!0?2:0,p={a:"g",g:1,ssl:h};if(this.nodeId?p.n=this.nodeId:Array.isArray(this.downloadId)?(p._querystring={n:this.downloadId[0]},p.n=this.downloadId[1]):p.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let m=this.key&&!e.returnCiphertext?qi(this.key,{start:n,disableVerification:n!==0||i!==null}):new co.PassThrough,_=n===r?m:m.pipe(new ho.default({skip:r-n})),k=e.handleRetries||ht.defaultHandleRetries;return this.api.request(p,(d,g)=>{if(d)return _.emit("error",d);if(typeof g.g!="string"||g.g.substr(0,4)!=="http")return _.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(g.s===0)return _.end();if(i||(i=g.s-1),r>i)return _.emit("error",Error("You can't download past the end of the file."));function y(j){if(j.status!==200){if(j.status===509){let V=j.headers.get("x-mega-time-left"),z=Error("Bandwidth limit reached: "+V+" seconds until it resets");z.timeLimit=V,_.emit("error",z);return}_.emit("error",Error("MEGA returned a "+j.status+" status code"))}}function S(j){_.emit("error",j)}let w=0;if(_.on("data",j=>{w+=j.length,_.emit("progress",{bytesLoaded:w,bytesTotal:g.s})}),o===1){let j=new cr;_.on("close",()=>{j.abort()}),this.api.fetch(g.g+"/"+n+"-"+i,{signal:j.signal}).then(V=>{y(V);let z=V.body;if(z)if(z.pipe)V.body.pipe(m);else if(z.getReader){let ee=z.getReader(),oe=({done:de,value:pe})=>{if(de)m.end();else return m.write(pe),ee.read().then(oe)};ee.read().then(oe)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(S);return}let A={},B=0,P=0,E=!1,$=n,M=l;_.on("error",()=>{E=!0}),_.on("close",()=>{E=!0});let C=()=>{if($>i){E=!0,B===P&&m.end();return}let j=$,V=Math.min(i,j+M-1),z=B++,ee=0,oe=()=>{ee++,this.api.fetch(g.g+"/"+j+"-"+V).then(de=>(y(de),de.arrayBuffer())).then(de=>{let pe=se.Buffer.from(de);A[z]=pe,P===z&&D()},de=>{k(ee,de,pe=>{pe?S(pe):oe()})})};oe(),$=V+1,M<f&&(M=M+a)},D=()=>{let j;for(;;){let V=A[P];if(!V||(j=!m.write(V),delete A[P],P++,j))break}E&&B===P&&m.end(),j?m.once("drain",D):C()};for(let j=0;j<o;j++)C()}),t&&bn(_,t),_}downloadBuffer(e,t){let[r,n]=Fe(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=Fe(t);typeof e=="boolean"&&(e={noKey:e});let i=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(i+=`#${je(this.key)}`),!e.noKey&&this.loadedFile&&(i+=`/file/${this.loadedFile}`),r(null,i),n}static fromURL(e,t={}){if(typeof e=="object")return new ht(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),i=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),o=n[0];if(i&&!o||!i&&o)throw Error("Invalid URL: too few arguments");return new ht({downloadId:i,key:o,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new ht({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},In=["","red","orange","yellow","green","blue","purple","grey"],Ze=ht,nr=Ye(un(),1),Mr=Ye(St(),1),Pr={},Rt=class extends Ze{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let i of r){let o=i.split(":")[0];if(o===t.user){e.k=i;break}let l=t.shareKeys[o];if(l){e.k=i,n=Pr[o],n||(n=Pr[o]=new et(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=Fe(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=se.Buffer.from((0,nr.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let i=e.key,o=Rt.packAttributes(e.attributes);dt(i).encryptCBC(o);let l=se.Buffer.from(i);this.storage.aes.encryptECB(l);let a={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:je(o),k:je(l)}]},f=$t(this.storage.shareKeys,this);return f.length>0&&(a.cr=Gt(this.storage,[{nodeId:"xxxxxxxx",key:i}],f)),this.api.request(a,(h,p)=>{if(h)return r(h);let m=this.storage._importFile(p.f[0]);this.storage.emit("add",m),r(null,m)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,i]=Fe(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let o,l=Xe(e.key);l||(l=(0,nr.default)(24)),l instanceof se.Buffer||(l=se.Buffer.from(l));let a=e.uploadCiphertext?32:24;if(l.length!==a)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(o=l,l=En(l).slice(0,24)),e.key=l;let f=[],h=(_,k,d,g)=>{if(_)return m(_);if(!d||d.length===0){m(Error("Server returned a invalid response while uploading"));return}let y=Number(d.toString());if(y<0){m(Error("Server returned error "+y+" while uploading"));return}if(f[k]=d,k===0&&!o&&(o=g.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let S=Rt.packAttributes(e.attributes);dt(o).encryptCBC(S);let w=se.Buffer.from(o);this.storage.aes.encryptECB(w);let A={h:je(f[0]),t:0,a:je(S),k:je(w)};f.length!==1&&(A.fa=f.slice(1).map((E,$)=>$+"*"+je(E)).filter(E=>E).join("/"));let B={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[A]},P=$t(this.storage.shareKeys,this);P.length>0&&(B.cr=Gt(this.storage,[{nodeId:A.h,key:o}],P)),this.api.request(B,(E,$)=>{if(E)return m(E);let M=this.storage._importFile($.f[0]);this.storage.emit("add",M),p.emit("complete",M),n&&n(null,M)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,h),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,h);let p=this._upload(e,t,0,h);function m(_){p.listenerCount("error")?p.emit("error",_):n(_)}return p.complete=i,p}_upload(e,t,r,n){let i=e.uploadCiphertext?new Mr.PassThrough:Wi(e.key),o=i,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,o.end(t)),l!=null?(l===0&&i.end(),this._uploadWithSize(o,l,i,r,e,n)):o=Ci(o,a=>{this._uploadWithSize(o,a,i,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(o),o}_uploadAttribute(e,t,r,n){let i=(o,l)=>{if(o)return n(o);let a=l.length,f=Math.ceil(a/16)*16-a;f!==0&&(l=se.Buffer.concat([l,se.Buffer.alloc(f)])),(e.handle?dt(e.key):new et(e.key.slice(0,16))).encryptCBC(l);let h=new Mr.PassThrough;h.end(l),this._uploadWithSize(h,l.length,h,r,e,n)};if(t instanceof se.Buffer){i(null,t);return}bn(t,i)}_uploadWithSize(e,t,r,n,i,o){let l=i.forceHttps??!0?2:0,a=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};i.handle&&(a.h=i.handle);let f=n===0?i.initialChunkSize||128*1024:t,h=i.chunkSizeIncrement||128*1024,p=i.maxChunkSize||1024*1024,m=i.maxConnections||4,_=i.handleRetries||Ze.defaultHandleRetries,k=f,d=0,g=!1,y=0,S,w,A,B,P,E=()=>{B=Math.min(k,t-y),w=se.Buffer.alloc(B),d++,k<p&&(k+=h),P=0,S&&(S.copy(w),P=Math.min(S.length,B),S=S.length>B?S.slice(B):null),P===B?$():(g=!0,C())},$=()=>{let D=y,j=w,V=0,z=()=>{V++,this.api.fetch(A+"/"+(n===0?D:n-1),{method:"POST",body:j,headers:{"content-length":j.length}}).then(ee=>{if(ee.status!==200)throw Error("MEGA returned a "+ee.status+" status code");return ee.arrayBuffer()}).then(ee=>{let oe=se.Buffer.from(ee);oe.length>0?(r.end(),fe.nextTick(()=>{o(null,n,oe,r)})):y<t&&!g&&E()},ee=>{_(V,ee,oe=>{oe?e.emit("error",oe):z()})})};z(),w=null,y+=B,y<t&&!g&&d<m&&E()},M=0,C=()=>{for(;;){let D=r.read();if(D===null){r.once("readable",C);break}if(M+=D.length,e.emit("progress",{bytesLoaded:M,bytesTotal:t}),D.copy(w,P),P+=D.length,P>=B){g=!1,S=D.slice(D.length-(P-B)),$();break}}};r.on("end",()=>{t&&M!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+M))}),this.api.request(a,(D,j)=>{if(D)return o(D);A=j.p,E()})}uploadAttribute(e,t,r){let[n,i]=Fe(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(o,l,a,f)=>{if(o)return n(o);let h={a:"pfa",n:this.nodeId,fa:e+"*"+je(a)};this.api.request(h,(p,m)=>{if(p)return n(p);n(null,this)})}),i}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof Ze))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=$t(this.storage.shareKeys,e);return n.length>0&&(r.cr=Gt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=Fe(t);Object.assign(this.attributes,e);let i=Rt.packAttributes(this.attributes);return dt(this.key).encryptCBC(i),this.api.request({a:"a",n:this.nodeId,at:je(i)},o=>{this.parseAttributes(this.attributes),r(o)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=In.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,i]=Fe(t);return this.api.request({a:"l",n:this.nodeId},(o,l)=>{if(o)return n(o);let a=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(a+=`#${je(r||this.key)}`),n(null,a)}),i}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let i=Xe(e.key);i||(i=(0,nr.default)(16)),i instanceof se.Buffer||(i=se.Buffer.from(i));let[o,l]=Fe(t);if(i.length!==16)return o(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=i;let a=se.Buffer.from(r+r);this.storage.aes.encryptECB(a);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:je(this.storage.aes.encryptECB(se.Buffer.from(i))),ha:je(a),cr:Gt(this.storage,this)};return this.api.request(f,h=>{if(h)return o(h);this.link(Object.assign({__folderKey:i},e),o)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=Fe(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=Ze.fromURL(e)),!(e instanceof Ze))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let i=(o,l)=>{if(o)return r(o);let a=Rt.packAttributes(l.attributes);dt(l.key).encryptCBC(a);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,h={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:je(a),k:je(this.storage.aes.encryptECB(l.key))}]};this.api.request(h,(p,m)=>{if(p)return r(p);let _=this.storage._importFile(m.f[0]);this.storage.emit("add",_),r(null,_)})};return e.attributes?i(null,e):e.loadAttributes(i),n}static packAttributes(e){let t=JSON.stringify(e);t=se.Buffer.from(`MEGA${t}`);let r=se.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Gt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=Bn(t)),r||(r=t.map(o=>$t(n,o)).reduce((o,l)=>o.concat(l)).filter((o,l,a)=>l===a.indexOf(o)));let i=[r,t.map(o=>o.nodeId),[]];for(let o=r.length;o--;){let l=new et(n[r[o]]);for(let a=t.length;a--;){let f=se.Buffer.from(t[a].key);f&&(f.length===32||f.length===16)&&i[2].push(o,a,je(l.encryptECB(f)))}}return i}function Bn(e){return[e].concat((e.children||[]).map(Bn).reduce((t,r)=>t.concat(r),[]))}function $t(e,t){let r=t.nodeId,n=t.parent,i=[];return e[r]&&i.push(r),n?i.concat($t(e,n)):i}var po=Rt,go=class extends uo.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=Fe(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Yt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):fe.nextTick(()=>{r(null,this)})}login(e){let[t,r]=Fe(e);if(typeof this.options.email!="string")return fe.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},i=f=>{this.api.request({a:"ug"},(h,p)=>{if(h)return f(h);this.name=p.name,this.user=p.u,this.options.autoload?this.reload(!0,m=>{if(m)return f(m);n()}):n()})};this.email=this.options.email.toLowerCase();let o=f=>{let h=Fi(se.Buffer.from(this.options.password)),p=new et(h),m=je(p.stringhash(se.Buffer.from(this.email))),_={a:"us",user:this.email,uh:m};a(_,p,f)},l=(f,h)=>{xi(se.Buffer.from(this.options.password),f,(p,m)=>{if(p)return h(p);let _=new et(m.slice(0,16)),k=je(m.slice(16)),d={a:"us",user:this.email,uh:k};a(d,_,h)})},a=(f,h,p)=>{delete this.options.password,this.options.secondFactorCode&&(f.mfa=this.options.secondFactorCode.toString()),this.api.request(f,(m,_)=>{if(m)return p(m);this.key=Xe(_.k),h.decryptECB(this.key),this.aes=new et(this.key);let k=Xe(_.csid),d=this.aes.decryptECB(Xe(_.privk)),g=Qi(d);if(!g)throw Error("invalid credentials");let y=je(Zi(k,g).slice(0,43));this.api.sid=this.sid=y,this.RSAPrivateKey=g,i(p)})};return this.api.request({a:"us0",user:this.email},(f,h)=>{if(f)return t(f);if(h.v===1)return o(t);if(h.v===2)return l(h,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=Fe(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(i,o)=>{var l;if(i)return r(i);this.shareKeys=o.ok.reduce((a,f)=>{let h=f.h,p=this.aes.encryptECB(se.Buffer.from(h+h));return zi(Xe(f.ha),p)&&(a[h]=this.aes.decryptECB(Xe(f.k))),a},{});for(let a of o.f)if(a=this._importFile(a),o.ph!==void 0&&(a.shareId=(l=o.ph.find(f=>f.h===a.nodeId))==null?void 0:l.ph,a.shared=!!a.shareId,a.shared)){a.shareURL=`https://mega.nz/${a.directory?"folder":"file"}/${a.shareId}`;let f=a.directory?this.shareKeys[a.nodeId]:a.key;f&&(a.shareURL+="#"+je(f))}r(null,this.mounts)}),this.api.on("sc",i=>{let o={};i.forEach(l=>{if(l.a==="u"){let a=this.files[l.n];a&&(a.timestamp=l.ts,a.decryptAttributes(l.at),a.emit("update"),this.emit("update",a))}else l.a==="d"?o[l.n]=!0:l.a==="t"&&l.t.f.forEach(a=>{let f=this.files[a.h];if(f){delete o[a.h];let h=f.parent;if(h.nodeId===a.p)return;h.children.splice(h.children.indexOf(f),1),f.parent=this.files[a.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",h),this.emit("move",f,h)}else this.emit("add",this._importFile(a))})}),Object.keys(o).forEach(l=>{let a=this.files[l],f=a.parent;f.children.splice(f.children.indexOf(a),1),this.emit("delete",a),a.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new po(e,this);if(e.t===yo&&(this.root=t,t.name="Cloud Drive"),e.t===bo&&(this.trash=t,t.name="Rubbish Bin"),e.t===mo&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=Fe(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,i)=>{n&&t(n);let o={};o.type=i.utype,o.spaceUsed=i.cstrg,o.spaceTotal=i.mstrg,o.downloadBandwidthTotal=i.mxfer||Math.pow(1024,5)*10,o.downloadBandwidthUsed=i.caxfer||0,o.sharedBandwidthUsed=i.csxfer||0,o.sharedBandwidthLimit=i.srvratio,t(null,o)}),r}toJSON(){return{key:je(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new go(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=Er(e.key),t.aes=new et(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},yo=2,mo=3,bo=4;Ze.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let ir=null;async function yt(){const e=await ei("music",3,{upgrade(t,r,n,i,o){ir=r,r<1&&(t.createObjectStore("album",{keyPath:"folderName"}),t.createObjectStore("image",{keyPath:"id"}),t.createObjectStore("song",{keyPath:"id"})),r<2&&t.createObjectStore("albumFolder")}});return ir&&ir<3&&await e.clear("song"),e}async function wo(){const e=await yt(),t=await e.getAll("album"),r=await e.get("albumFolder","german")??[],n=await e.get("albumFolder","russian")??[],i=await e.get("albumFolder","instrumental")??[],o=await e.get("albumFolder","geistlicheLieder")??[],l=await e.get("albumFolder","russianBook")??[];return e.close(),{german:t.filter(a=>r.includes(a.folderName)),russian:t.filter(a=>n.includes(a.folderName)),instrumental:t.filter(a=>i.includes(a.folderName)),geistlicheLieder:t.find(a=>o.includes(a.folderName)),russianBook:t.find(a=>l.includes(a.folderName))}}async function vo(e){const t=await yt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian"),n.put(e.instrumental.map(l=>l.folderName),"instrumental"),n.put([e.geistlicheLieder.folderName],"geistlicheLieder"),n.put([e.russianBook.folderName],"russianBook");const i=r.objectStore("album");i.clear();const o=[];for(const l of e.german)o.push(i.put(l));for(const l of e.russian)o.push(i.put(l));for(const l of e.instrumental)o.push(i.put(l));o.push(i.put(e.geistlicheLieder)),o.push(i.put(e.russianBook)),await Promise.all(o),r.commit(),t.close()}const jr={};async function Sr(e){const t=xe(e);let r=jr[t];if(!r){const n=await _o(e);r=URL.createObjectURL(n),jr[t]=r}return r}async function _o(e){const t=xe(e),r=await yt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const i=await new Ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),o=new Blob([i]);return Eo(e,o),o}async function Eo(e,t){const n={id:xe(e),blob:t},i=await yt();await i.add("image",n),i.close()}async function On(e){const t=xe(e),r=await yt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const i=await new Ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),o=new Blob([i],{type:"audio/mpeg"});return So(e,o),o}async function So(e,t){const n={id:xe(e),name:e.name,blob:t},i=await yt();await i.add("song",n),i.close()}async function Ao(){const e=await yt(),t=await e.getAllKeys("song");return e.close(),t}function xe(e){return JSON.stringify(e.downloadId)}const It={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA",GEISTLICHE_LIEDER_URL:"https://mega.nz/folder/Dm5x2LRZ#OLhiAvvoX4qZTZGDLPn0SQ",RUSSIAN_BOOK:"https://mega.nz/folder/3zIxQbpT#pwb_r_7oq0ZRnerldK4sLA"};function or(e){var t,r;return e.german.flatMap(n=>n.musics).concat(e.russian.flatMap(n=>n.musics)).concat(e.instrumental.flatMap(n=>n.musics)).concat(((t=e.geistlicheLieder)==null?void 0:t.musics.map(n=>({...n,name:n.name.split("_",2)[1]})))??[]).concat(((r=e.russianBook)==null?void 0:r.musics.map(n=>({...n,name:n.name.split("-",2)[1].trimStart()})))??[])}async function ko(){return{german:await ar(It.GERMAN_SONGS_URL),russian:await ar(It.RUSSIAN_SONGS_URL),instrumental:await ar(It.INSTRUMENTAL_SONGS_URL),geistlicheLieder:await Nr(It.GEISTLICHE_LIEDER_URL),russianBook:await Nr(It.RUSSIAN_BOOK)}}async function ar(e){const t=Ze.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(Rn)}async function Nr(e){const t=Ze.fromURL(e);return await t.loadAttributes(),Rn(t)}function Rn(e){const t=e.children.find(r=>{var n;return(n=r.name)==null?void 0:n.endsWith(".jpg")});return{name:e.name.split("(")[0].trim(),folderName:e.name,image:t?{key:t.key,downloadId:t.downloadId,fileSize:t.size}:null,musics:e.children.filter(r=>r.name.endsWith(".mp3")||r.name.endsWith(".webm")||r.name.endsWith(".mp4")).map(r=>({name:r.name.substring(0,r.name.lastIndexOf(".")).trim(),link:{key:r.key,downloadId:r.downloadId,fileSize:r.size}}))}}async function Lt(e,t,r){try{const n=t[r];pt.update(o=>({...o,isLoading:!0}));const i=await On({name:n.name,...n.link});Qt.update(o=>{const l=xe(n.link);return o.includes(l)?o:[...o,l]}),pt.update(o=>(o.src!=null&&URL.revokeObjectURL(o.src),{...o,isLoading:!1,src:URL.createObjectURL(i),album:e,song:n,playPrevious:r>0?()=>Lt(e,t,r-1):null,playNext:r<t.length-1?()=>Lt(e,t,r+1):null,playRandom:()=>Lt(e,t,Io(t.length))}))}catch{pt.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function Io(e){return Math.floor(Math.random()*e)}const Ar="music/favorites";function Bo(){gt.set(localStorage.getItem(Ar)??"")}async function Oo(){Qt.set(await Ao())}function Ro(){let e=Ln(gt);return e==null&&(e=localStorage.getItem(Ar)??"",gt.set(e)),e}function Tn(e){const t=`;${xe(e)};`,r=Ro();let n;(r==null?void 0:r.includes(t))??!1?n=r.replace(t,""):n=r+t,localStorage.setItem(Ar,n),gt.set(n)}function To(e){let t;const r=e[2].default,n=Ut(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ct(n,r,i,i[3],t?Ft(r,i[3],o,null):Dt(i[3]),null)},i(i){t||(ae(n,i),t=!0)},o(i){ue(n,i),t=!1},d(i){n&&n.d(i)}}}function $o(e){let t,r;const n=[{name:"arrow-right"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[To]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){we(t.$$.fragment)},l(o){ve(t.$$.fragment,o)},m(o,l){_e(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(ae(t.$$.fragment,o),r=!0)},o(o){ue(t.$$.fragment,o),r=!1},d(o){Ee(t,o)}}}function Lo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M5 12l14 0"}],["path",{d:"M13 18l6 -6"}],["path",{d:"M13 6l6 6"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Mo extends Ve{constructor(t){super(),ze(this,t,Lo,$o,qe,{})}}const Po=Mo;function jo(e){let t;const r=e[2].default,n=Ut(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ct(n,r,i,i[3],t?Ft(r,i[3],o,null):Dt(i[3]),null)},i(i){t||(ae(n,i),t=!0)},o(i){ue(n,i),t=!1},d(i){n&&n.d(i)}}}function No(e){let t,r;const n=[{name:"arrows-shuffle"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[jo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){we(t.$$.fragment)},l(o){ve(t.$$.fragment,o)},m(o,l){_e(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(ae(t.$$.fragment,o),r=!0)},o(o){ue(t.$$.fragment,o),r=!1},d(o){Ee(t,o)}}}function Uo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M18 4l3 3l-3 3"}],["path",{d:"M18 20l3 -3l-3 -3"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Co extends Ve{constructor(t){super(),ze(this,t,Uo,No,qe,{})}}const Do=Co;function Fo(e){let t;const r=e[2].default,n=Ut(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ct(n,r,i,i[3],t?Ft(r,i[3],o,null):Dt(i[3]),null)},i(i){t||(ae(n,i),t=!0)},o(i){ue(n,i),t=!1},d(i){n&&n.d(i)}}}function xo(e){let t,r;const n=[{name:"download"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Fo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){we(t.$$.fragment)},l(o){ve(t.$$.fragment,o)},m(o,l){_e(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(ae(t.$$.fragment,o),r=!0)},o(o){ue(t.$$.fragment,o),r=!1},d(o){Ee(t,o)}}}function Wo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}],["path",{d:"M7 11l5 5l5 -5"}],["path",{d:"M12 4l0 12"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class qo extends Ve{constructor(t){super(),ze(this,t,Wo,xo,qe,{})}}const kr=qo;function Vo(e){let t;const r=e[2].default,n=Ut(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ct(n,r,i,i[3],t?Ft(r,i[3],o,null):Dt(i[3]),null)},i(i){t||(ae(n,i),t=!0)},o(i){ue(n,i),t=!1},d(i){n&&n.d(i)}}}function zo(e){let t,r;const n=[{name:"notes"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Vo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){we(t.$$.fragment)},l(o){ve(t.$$.fragment,o)},m(o,l){_e(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(ae(t.$$.fragment,o),r=!0)},o(o){ue(t.$$.fragment,o),r=!1},d(o){Ee(t,o)}}}function Go(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}],["path",{d:"M9 7l6 0"}],["path",{d:"M9 11l6 0"}],["path",{d:"M9 15l4 0"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Ho extends Ve{constructor(t){super(),ze(this,t,Go,zo,qe,{})}}const Ko=Ho;function Yo(e){let t;const r=e[2].default,n=Ut(r,e,e[3],null);return{c(){n&&n.c()},l(i){n&&n.l(i)},m(i,o){n&&n.m(i,o),t=!0},p(i,o){n&&n.p&&(!t||o&8)&&Ct(n,r,i,i[3],t?Ft(r,i[3],o,null):Dt(i[3]),null)},i(i){t||(ae(n,i),t=!0)},o(i){ue(n,i),t=!1},d(i){n&&n.d(i)}}}function Jo(e){let t,r;const n=[{name:"player-pause"},e[1],{iconNode:e[0]}];let i={$$slots:{default:[Yo]},$$scope:{ctx:e}};for(let o=0;o<n.length;o+=1)i=We(i,n[o]);return t=new xt({props:i}),{c(){we(t.$$.fragment)},l(o){ve(t.$$.fragment,o)},m(o,l){_e(t,o,l),r=!0},p(o,[l]){const a=l&3?Wt(n,[n[0],l&2&&qt(o[1]),l&1&&{iconNode:o[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(ae(t.$$.fragment,o),r=!0)},o(o){ue(t.$$.fragment,o),r=!1},d(o){Ee(t,o)}}}function Xo(e,t,r){let{$$slots:n={},$$scope:i}=t;const o=[["path",{d:"M6 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}],["path",{d:"M14 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}]];return e.$$set=l=>{r(1,t=We(We({},t),tt(l))),"$$scope"in l&&r(3,i=l.$$scope)},t=tt(t),[o,t,n,i]}class Qo extends Ve{constructor(t){super(),ze(this,t,Xo,Jo,qe,{})}}const Zo=Qo;function ea(e){let t,r,n,i,o,l;return r=new Un({}),{c(){t=Y("button"),we(r.$$.fragment),this.h()},l(a){t=J(a,"BUTTON",{});var f=ie(t);ve(r.$$.fragment,f),f.forEach(H),this.h()},h(){t.disabled=n=e[1].isLoading},m(a,f){ke(a,t,f),_e(r,t,null),i=!0,o||(l=$e(t,"click",e[6]),o=!0)},p(a,f){(!i||f&2&&n!==(n=a[1].isLoading))&&(t.disabled=n)},i(a){i||(ae(r.$$.fragment,a),i=!0)},o(a){ue(r.$$.fragment,a),i=!1},d(a){a&&H(t),Ee(r),o=!1,l()}}}function ta(e){let t,r,n,i,o;return r=new Zo({}),{c(){t=Y("button"),we(r.$$.fragment)},l(l){t=J(l,"BUTTON",{});var a=ie(t);ve(r.$$.fragment,a),a.forEach(H)},m(l,a){ke(l,t,a),_e(r,t,null),n=!0,i||(o=$e(t,"click",e[7]),i=!0)},p:Qe,i(l){n||(ae(r.$$.fragment,l),n=!0)},o(l){ue(r.$$.fragment,l),n=!1},d(l){l&&H(t),Ee(r),i=!1,o()}}}function ra(e){let t,r,n,i,o,l,a,f,h,p,m=Ht(e[4])+"",_,k,d,g=Ht(e[3])+"",y,S,w,A,B,P,E,$,M,C,D,j,V,z,ee,oe,de,pe,Ae,Se,ge,ce,R=!0,U=!1,q,Q,me,ye;a=new jn({}),B=new Yr({props:{isFavorite:e[1].song!=null&&e[5].includes(xe(e[1].song.link))}}),$=new Nn({});const O=[ta,ea],T=[];function x(te,b){return te[2]?1:0}D=x(e),j=T[D]=O[D](e),ee=new Po({}),Ae=new Do({});function ne(){cancelAnimationFrame(q),ge.paused||(q=zn(ne),U=!0),e[13].call(ge)}return{c(){t=Y("div"),r=Y("div"),n=Y("div"),i=Y("input"),o=Ie(),l=Y("button"),we(a.$$.fragment),f=Ie(),h=Y("div"),p=Y("p"),_=Ue(m),k=Ie(),d=Y("p"),y=Ue(g),S=Ie(),w=Y("div"),A=Y("button"),we(B.$$.fragment),P=Ie(),E=Y("button"),we($.$$.fragment),C=Ie(),j.c(),V=Ie(),z=Y("button"),we(ee.$$.fragment),de=Ie(),pe=Y("button"),we(Ae.$$.fragment),Se=Ie(),ge=Y("audio"),this.h()},l(te){t=J(te,"DIV",{class:!0});var b=ie(t);r=J(b,"DIV",{class:!0});var v=ie(r);n=J(v,"DIV",{class:!0});var W=ie(n);i=J(W,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=Be(W),l=J(W,"BUTTON",{class:!0});var Z=ie(l);ve(a.$$.fragment,Z),Z.forEach(H),W.forEach(H),v.forEach(H),f=Be(b),h=J(b,"DIV",{class:!0});var be=ie(h);p=J(be,"P",{});var he=ie(p);_=Ce(he,m),he.forEach(H),k=Be(be),d=J(be,"P",{});var N=ie(d);y=Ce(N,g),N.forEach(H),be.forEach(H),S=Be(b),w=J(b,"DIV",{class:!0});var Me=ie(w);A=J(Me,"BUTTON",{});var Je=ie(A);ve(B.$$.fragment,Je),Je.forEach(H),P=Be(Me),E=J(Me,"BUTTON",{});var De=ie(E);ve($.$$.fragment,De),De.forEach(H),C=Be(Me),j.l(Me),V=Be(Me),z=J(Me,"BUTTON",{});var nt=ie(z);ve(ee.$$.fragment,nt),nt.forEach(H),de=Be(Me),pe=J(Me,"BUTTON",{});var ct=ie(pe);ve(Ae.$$.fragment,ct),ct.forEach(H),Me.forEach(H),Se=Be(b),ge=J(b,"AUDIO",{id:!0,src:!0}),ie(ge).forEach(H),b.forEach(H),this.h()},h(){X(i,"class","range flex-1"),X(i,"type","range"),X(i,"min","0"),X(i,"max",e[3]),X(l,"class","inline btn btn-sm btn-circle ml-2 relative"),X(n,"class","flex flex-row items-center"),X(r,"class","flex-1 w-full max-w-lg relative mt-2"),X(h,"class","w-full max-w-lg flex flex-row justify-between"),E.disabled=M=e[1].playPrevious==null,z.disabled=oe=e[1].playNext==null,X(w,"class","h-8 flex justify-center gap-1"),X(ge,"id","audio"),ge.autoplay=!0,bt(ge.src,ce=e[1].src)||X(ge,"src",ce),e[3]===void 0&&Jt(()=>e[12].call(ge)),X(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(te,b){ke(te,t,b),G(t,r),G(r,n),G(n,i),Le(i,e[0]),G(n,o),G(n,l),_e(a,l,null),G(t,f),G(t,h),G(h,p),G(p,_),G(h,k),G(h,d),G(d,y),G(t,S),G(t,w),G(w,A),_e(B,A,null),G(w,P),G(w,E),_e($,E,null),G(w,C),T[D].m(w,null),G(w,V),G(w,z),_e(ee,z,null),G(w,de),G(w,pe),_e(Ae,pe,null),G(t,Se),G(t,ge),Q=!0,me||(ye=[$e(i,"change",e[10]),$e(i,"input",e[10]),$e(l,"click",e[9]),$e(A,"click",e[8]),$e(E,"click",function(){Bt(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),$e(z,"click",function(){Bt(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),$e(pe,"click",function(){Bt(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),$e(ge,"play",e[11]),$e(ge,"pause",e[11]),$e(ge,"durationchange",e[12]),$e(ge,"timeupdate",ne),$e(ge,"ended",function(){Bt(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],me=!0)},p(te,[b]){e=te,(!Q||b&8)&&X(i,"max",e[3]),b&1&&Le(i,e[0]),(!Q||b&16)&&m!==(m=Ht(e[4])+"")&&Mt(_,m),(!Q||b&8)&&g!==(g=Ht(e[3])+"")&&Mt(y,g);const v={};b&34&&(v.isFavorite=e[1].song!=null&&e[5].includes(xe(e[1].song.link))),B.$set(v),(!Q||b&2&&M!==(M=e[1].playPrevious==null))&&(E.disabled=M);let W=D;D=x(e),D===W?T[D].p(e,b):(st(),ue(T[W],1,1,()=>{T[W]=null}),lt(),j=T[D],j?j.p(e,b):(j=T[D]=O[D](e),j.c()),ae(j,1),j.m(w,V)),(!Q||b&2&&oe!==(oe=e[1].playNext==null))&&(z.disabled=oe),(!Q||b&2&&!bt(ge.src,ce=e[1].src))&&X(ge,"src",ce),b&4&&R!==(R=e[2])&&ge[R?"pause":"play"](),!U&&b&1&&!isNaN(e[0])&&(ge.currentTime=e[0]),U=!1},i(te){Q||(ae(a.$$.fragment,te),ae(B.$$.fragment,te),ae($.$$.fragment,te),ae(j),ae(ee.$$.fragment,te),ae(Ae.$$.fragment,te),Q=!0)},o(te){ue(a.$$.fragment,te),ue(B.$$.fragment,te),ue($.$$.fragment,te),ue(j),ue(ee.$$.fragment,te),ue(Ae.$$.fragment,te),Q=!1},d(te){te&&H(t),Ee(a),Ee(B),Ee($),T[D].d(),Ee(ee),Ee(Ae),me=!1,Xt(ye)}}}function Ht(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function na(e,t,r){let n,i,o;Ge(e,pt,A=>r(1,i=A)),Ge(e,gt,A=>r(5,o=A));let l=null;dr(()=>{l=document.getElementById("audio")});let a=!0,f=0,h=0;async function p(A){const B=await Sr(A);navigator.mediaSession.metadata.artwork=[{src:B}]}function m(){l.play()}function _(){l.pause()}function k(){i.song&&Tn(i.song.link)}function d(){pt.set({isLoading:!1,song:null,album:null,src:null})}function g(){h=Pn(this.value),r(0,h)}function y(){a=this.paused,r(2,a)}function S(){f=this.duration,r(3,f)}function w(){h=this.currentTime,r(0,h)}return e.$$.update=()=>{var A,B,P;e.$$.dirty&1&&r(4,n=Math.round(h)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(A=i.song)==null?void 0:A.name,album:(B=i.album)==null?void 0:B.name}),(P=i.album)!=null&&P.image&&p(i.album.image),navigator.mediaSession.setActionHandler("nexttrack",i.playNext??null),navigator.mediaSession.setActionHandler("previoustrack",i.playPrevious??null))},[h,i,a,f,n,o,m,_,k,d,g,y,S,w]}class ia extends Ve{constructor(t){super(),ze(this,t,na,ra,qe,{})}}function Ur(e){let t,r;return t=new kr({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function oa(e){let t,r,n,i=e[0].name+"",o,l,a,f=e[3].includes(xe(e[0].link)),h,p,m,_,k,d,g=f&&Ur();return m=new Yr({props:{isFavorite:e[4].includes(xe(e[0].link))}}),{c(){t=Y("li"),r=Y("button"),n=Y("p"),o=Ue(i),a=Ie(),g&&g.c(),h=Ie(),p=Y("button"),we(m.$$.fragment),this.h()},l(y){t=J(y,"LI",{class:!0});var S=ie(t);r=J(S,"BUTTON",{class:!0});var w=ie(r);n=J(w,"P",{class:!0});var A=ie(n);o=Ce(A,i),A.forEach(H),w.forEach(H),a=Be(S),g&&g.l(S),h=Be(S),p=J(S,"BUTTON",{});var B=ie(p);ve(m.$$.fragment,B),B.forEach(H),S.forEach(H),this.h()},h(){X(n,"class","flex-1 hover:underline"),X(r,"class",l=`w-full text-left ${e[0]===e[2].song?"font-bold":""}`),X(t,"class","flex")},m(y,S){ke(y,t,S),G(t,r),G(r,n),G(n,o),G(t,a),g&&g.m(t,null),G(t,h),G(t,p),_e(m,p,null),_=!0,k||(d=[$e(r,"click",function(){Bt(e[1])&&e[1].apply(this,arguments)}),$e(p,"click",e[5])],k=!0)},p(y,[S]){e=y,(!_||S&1)&&i!==(i=e[0].name+"")&&Mt(o,i),(!_||S&5&&l!==(l=`w-full text-left ${e[0]===e[2].song?"font-bold":""}`))&&X(r,"class",l),S&9&&(f=e[3].includes(xe(e[0].link))),f?g?S&9&&ae(g,1):(g=Ur(),g.c(),ae(g,1),g.m(t,h)):g&&(st(),ue(g,1,1,()=>{g=null}),lt());const w={};S&17&&(w.isFavorite=e[4].includes(xe(e[0].link))),m.$set(w)},i(y){_||(ae(g),ae(m.$$.fragment,y),_=!0)},o(y){ue(g),ue(m.$$.fragment,y),_=!1},d(y){y&&H(t),g&&g.d(),Ee(m),k=!1,Xt(d)}}}function aa(e,t,r){let n,i,o;Ge(e,pt,h=>r(2,n=h)),Ge(e,Qt,h=>r(3,i=h)),Ge(e,gt,h=>r(4,o=h));let{music:l}=t,{playMusic:a}=t;const f=()=>Tn(l.link);return e.$$set=h=>{"music"in h&&r(0,l=h.music),"playMusic"in h&&r(1,a=h.playMusic)},[l,a,n,i,o,f]}class $n extends Ve{constructor(t){super(),ze(this,t,aa,oa,qe,{music:0,playMusic:1})}}function Cr(e,t,r){const n=e.slice();return n[7]=t[r],n}function sa(e){let t,r,n,i,o;return r=new kr({}),{c(){t=Y("button"),we(r.$$.fragment)},l(l){t=J(l,"BUTTON",{});var a=ie(t);ve(r.$$.fragment,a),a.forEach(H)},m(l,a){ke(l,t,a),_e(r,t,null),n=!0,i||(o=$e(t,"click",e[3]),i=!0)},p:Qe,i(l){n||(ae(r.$$.fragment,l),n=!0)},o(l){ue(r.$$.fragment,l),n=!1},d(l){l&&H(t),Ee(r),i=!1,o()}}}function la(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Y("div"),t.innerHTML=r,this.h()},l(n){t=J(n,"DIV",{class:!0,"data-svelte-h":!0}),it(t)!=="svelte-134bier"&&(t.innerHTML=r),this.h()},h(){X(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,i){ke(n,t,i)},p:Qe,d(n){n&&H(t)}}}function ua(e){let t,r,n;return{c(){t=Y("figure"),r=Y("img"),this.h()},l(i){t=J(i,"FIGURE",{});var o=ie(t);r=J(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(H),this.h()},h(){bt(r.src,n=e[1])||X(r,"src",n),X(r,"alt","Albumbild"),X(r,"class","w-48 h-48 object-scale-down")},m(i,o){ke(i,t,o),G(t,r)},p(i,o){o&2&&!bt(r.src,n=i[1])&&X(r,"src",n)},d(i){i&&H(t)}}}function Dr(e){let t,r;function n(){return e[6](e[7])}return t=new $n({props:{music:e[7],playMusic:n}}),{c(){we(t.$$.fragment)},l(i){ve(t.$$.fragment,i)},m(i,o){_e(t,i,o),r=!0},p(i,o){e=i;const l={};o&1&&(l.music=e[7]),o&1&&(l.playMusic=n),t.$set(l)},i(i){r||(ae(t.$$.fragment,i),r=!0)},o(i){ue(t.$$.fragment,i),r=!1},d(i){Ee(t,i)}}}function fa(e){let t,r,n,i,o,l,a,f,h;r=new Jr({props:{title:e[0].name??"Lädt...",withCloseButton:!0,$$slots:{default:[sa]},$$scope:{ctx:e}}});function p(y,S){return y[1]?ua:la}let m=p(e),_=m(e),k=vt(e[0].musics??[]),d=[];for(let y=0;y<k.length;y+=1)d[y]=Dr(Cr(e,k,y));const g=y=>ue(d[y],1,1,()=>{d[y]=null});return{c(){t=Y("main"),we(r.$$.fragment),n=Ie(),i=Y("div"),o=Y("div"),l=Y("div"),_.c(),a=Ie(),f=Y("ul");for(let y=0;y<d.length;y+=1)d[y].c();this.h()},l(y){t=J(y,"MAIN",{class:!0});var S=ie(t);ve(r.$$.fragment,S),n=Be(S),i=J(S,"DIV",{class:!0});var w=ie(i);o=J(w,"DIV",{class:!0});var A=ie(o);l=J(A,"DIV",{class:!0});var B=ie(l);_.l(B),B.forEach(H),a=Be(A),f=J(A,"UL",{class:!0});var P=ie(f);for(let E=0;E<d.length;E+=1)d[E].l(P);P.forEach(H),A.forEach(H),w.forEach(H),S.forEach(H),this.h()},h(){X(l,"class","mb-2"),X(f,"class","mx-2"),X(o,"class","card w-full md:w-96 bg-base-100 shadow-xl"),X(i,"class","flex-1 flex justify-center"),X(t,"class","flex-1 flex flex-col")},m(y,S){ke(y,t,S),_e(r,t,null),G(t,n),G(t,i),G(i,o),G(o,l),_.m(l,null),G(o,a),G(o,f);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(f,null);h=!0},p(y,[S]){const w={};if(S&1&&(w.title=y[0].name??"Lädt..."),S&1024&&(w.$$scope={dirty:S,ctx:y}),r.$set(w),m===(m=p(y))&&_?_.p(y,S):(_.d(1),_=m(y),_&&(_.c(),_.m(l,null))),S&5){k=vt(y[0].musics??[]);let A;for(A=0;A<k.length;A+=1){const B=Cr(y,k,A);d[A]?(d[A].p(B,S),ae(d[A],1)):(d[A]=Dr(B),d[A].c(),ae(d[A],1),d[A].m(f,null))}for(st(),A=k.length;A<d.length;A+=1)g(A);lt()}},i(y){if(!h){ae(r.$$.fragment,y);for(let S=0;S<k.length;S+=1)ae(d[S]);h=!0}},o(y){ue(r.$$.fragment,y),d=d.filter(Boolean);for(let S=0;S<d.length;S+=1)ue(d[S]);h=!1},d(y){y&&H(t),Ee(r),_.d(),Kr(d,y)}}}function ca(e,t,r){let n,i;Ge(e,Pt,p=>r(5,i=p));let{album:o}=t,l;async function a(p){const m=n.musics.indexOf(p);Lt(n,n.musics,m)}async function f(){for(const p of n.musics)await On({name:p.name,...p.link})}const h=p=>a(p);return e.$$set=p=>{"album"in p&&r(4,o=p.album)},e.$$.update=()=>{e.$$.dirty&48&&r(0,n=i.german.concat(i.russian).concat(i.instrumental).find(p=>p.folderName===o)),e.$$.dirty&1&&n.image&&Sr(n.image).then(p=>r(1,l=p))},[n,l,a,f,o,i,h]}class ha extends Ve{constructor(t){super(),ze(this,t,ca,fa,qe,{album:4})}}function da(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Y("div"),t.innerHTML=r,this.h()},l(n){t=J(n,"DIV",{class:!0,"data-svelte-h":!0}),it(t)!=="svelte-m3w8dv"&&(t.innerHTML=r),this.h()},h(){X(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,i){ke(n,t,i)},p:Qe,d(n){n&&H(t)}}}function pa(e){let t,r,n;return{c(){t=Y("figure"),r=Y("img"),this.h()},l(i){t=J(i,"FIGURE",{});var o=ie(t);r=J(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(H),this.h()},h(){bt(r.src,n=e[1])||X(r,"src",n),X(r,"alt","Albumbild"),X(r,"class","w-48 h-48 object-scale-down")},m(i,o){ke(i,t,o),G(t,r)},p(i,o){o&2&&!bt(r.src,n=i[1])&&X(r,"src",n)},d(i){i&&H(t)}}}function ga(e){let t,r,n,i,o=e[0].name+"",l,a,f,h,p,m,_;function k(y,S){return y[1]?pa:da}let d=k(e),g=d(e);return{c(){t=Y("div"),g.c(),r=Ie(),n=Y("div"),i=Y("p"),l=Ue(o),a=Ie(),f=Y("div"),h=Y("a"),p=Ue("Öffnen"),this.h()},l(y){t=J(y,"DIV",{id:!0,class:!0});var S=ie(t);g.l(S),r=Be(S),n=J(S,"DIV",{class:!0});var w=ie(n);i=J(w,"P",{class:!0});var A=ie(i);l=Ce(A,o),A.forEach(H),w.forEach(H),a=Be(S),f=J(S,"DIV",{class:!0});var B=ie(f);h=J(B,"A",{class:!0,href:!0});var P=ie(h);p=Ce(P,"Öffnen"),P.forEach(H),B.forEach(H),S.forEach(H),this.h()},h(){X(i,"class","card-title"),X(n,"class","card-body w-full md:w-96"),X(h,"class","btn btn-primary capitalize"),X(h,"href",m=`#album/${e[0].folderName}`),X(f,"class","card-actions justify-end"),X(t,"id",_=`album_card_${e[0].name}`),X(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(y,S){ke(y,t,S),g.m(t,null),G(t,r),G(t,n),G(n,i),G(i,l),G(t,a),G(t,f),G(f,h),G(h,p)},p(y,[S]){d===(d=k(y))&&g?g.p(y,S):(g.d(1),g=d(y),g&&(g.c(),g.m(t,r))),S&1&&o!==(o=y[0].name+"")&&Mt(l,o),S&1&&m!==(m=`#album/${y[0].folderName}`)&&X(h,"href",m),S&1&&_!==(_=`album_card_${y[0].name}`)&&X(t,"id",_)},i:Qe,o:Qe,d(y){y&&H(t),g.d()}}}function ya(e,t,r){let{album:n}=t,i,o,l;return l=new IntersectionObserver(async a=>{a[0].isIntersecting&&!i&&(r(1,i=await Sr(n.image)),l.unobserve(o),l=null)}),dr(()=>{o=document.getElementById(`album_card_${n.name}`),l.observe(o)}),Mn(()=>{l==null||l.unobserve(o)}),e.$$set=a=>{"album"in a&&r(0,n=a.album)},[n,i]}class ma extends Ve{constructor(t){super(),ze(this,t,ya,ga,qe,{album:0})}}function Fr(e,t,r){const n=e.slice();return n[6]=t[r],n}function xr(e,t){let r,n,i;return n=new ma({props:{album:t[6]}}),{key:e,first:null,c(){r=Kt(),we(n.$$.fragment),this.h()},l(o){r=Kt(),ve(n.$$.fragment,o),this.h()},h(){this.first=r},m(o,l){ke(o,r,l),_e(n,o,l),i=!0},p(o,l){t=o;const a={};l&4&&(a.album=t[6]),n.$set(a)},i(o){i||(ae(n.$$.fragment,o),i=!0)},o(o){ue(n.$$.fragment,o),i=!1},d(o){o&&H(r),Ee(n,o)}}}function ba(e){let t,r,n,i,o="Alle Alben",l,a="Deutsche Alben",f,h="Russische Alben",p,m="Instrumentelle Alben",_,k,d,g,y=[],S=new Map,w,A,B,P=vt(e[2]);const E=$=>$[6].folderName;for(let $=0;$<P.length;$+=1){let M=Fr(e,P,$),C=E(M);S.set(C,y[$]=xr(C,M))}return{c(){t=Y("div"),r=Y("div"),n=Y("select"),i=Y("option"),i.textContent=o,l=Y("option"),l.textContent=a,f=Y("option"),f.textContent=h,p=Y("option"),p.textContent=m,_=Ie(),k=Y("input"),d=Ie(),g=Y("div");for(let $=0;$<y.length;$+=1)y[$].c();this.h()},l($){t=J($,"DIV",{class:!0});var M=ie(t);r=J(M,"DIV",{class:!0});var C=ie(r);n=J(C,"SELECT",{class:!0});var D=ie(n);i=J(D,"OPTION",{"data-svelte-h":!0}),it(i)!=="svelte-1i7obur"&&(i.textContent=o),l=J(D,"OPTION",{"data-svelte-h":!0}),it(l)!=="svelte-1i51hln"&&(l.textContent=a),f=J(D,"OPTION",{"data-svelte-h":!0}),it(f)!=="svelte-1opew9k"&&(f.textContent=h),p=J(D,"OPTION",{"data-svelte-h":!0}),it(p)!=="svelte-hlo9rd"&&(p.textContent=m),D.forEach(H),_=Be(C),k=J(C,"INPUT",{class:!0,placeholder:!0,type:!0}),C.forEach(H),d=Be(M),g=J(M,"DIV",{class:!0});var j=ie(g);for(let V=0;V<y.length;V+=1)y[V].l(j);j.forEach(H),M.forEach(H),this.h()},h(){i.__value="all",Le(i,i.__value),l.__value="german",Le(l,l.__value),f.__value="russian",Le(f,f.__value),p.__value="instrumental",Le(p,p.__value),X(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Jt(()=>e[4].call(n)),X(k,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),X(k,"placeholder","Suche"),X(k,"type","search"),X(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),X(g,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),X(t,"class","flex-1 flex flex-col overflow-hidden")},m($,M){ke($,t,M),G(t,r),G(r,n),G(n,i),G(n,l),G(n,f),G(n,p),wt(n,e[1],!0),G(r,_),G(r,k),Le(k,e[0]),G(t,d),G(t,g);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(g,null);w=!0,A||(B=[$e(n,"change",e[4]),$e(k,"input",e[5])],A=!0)},p($,[M]){M&2&&wt(n,$[1]),M&1&&k.value!==$[0]&&Le(k,$[0]),M&4&&(P=vt($[2]),st(),y=Cn(y,M,E,1,$,P,S,g,Dn,xr,null,Fr),lt())},i($){if(!w){for(let M=0;M<P.length;M+=1)ae(y[M]);w=!0}},o($){for(let M=0;M<y.length;M+=1)ue(y[M]);w=!1},d($){$&&H(t);for(let M=0;M<y.length;M+=1)y[M].d();A=!1,Xt(B)}}}function wa(e,t,r){let n;Ge(e,Pt,h=>r(3,n=h));let i=[],o="",l="all";function a(){l=sr(this),r(1,l)}function f(){o=this.value,r(0,o)}return e.$$.update=()=>{if(e.$$.dirty&11){let h;if(l==="all")h=n.german.concat(n.russian).concat(n.instrumental);else if(l==="german")h=n.german;else if(l==="russian")h=n.russian;else if(l==="instrumental")h=n.instrumental;else throw new Error("No album selected.");r(2,i=h.filter(p=>o.toLocaleLowerCase().split(" ").every(m=>p.name.toLocaleLowerCase().includes(m))).sort((p,m)=>p.name>m.name?1:-1))}},[o,l,i,n,a,f]}class va extends Ve{constructor(t){super(),ze(this,t,wa,ba,qe,{})}}function Wr(e,t,r){const n=e.slice();return n[23]=t[r],n}function qr(e){let t,r,n="Alle Lieder",i,o,l=vt(e[3]),a=[];for(let f=0;f<l.length;f+=1)a[f]=Vr(Wr(e,l,f));return{c(){t=Y("select"),r=Y("option"),r.textContent=n;for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){t=J(f,"SELECT",{class:!0});var h=ie(t);r=J(h,"OPTION",{"data-svelte-h":!0}),it(r)!=="svelte-1023i8w"&&(r.textContent=n);for(let p=0;p<a.length;p+=1)a[p].l(h);h.forEach(H),this.h()},h(){r.__value=null,Le(r,r.__value),X(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Jt(()=>e[17].call(t))},m(f,h){ke(f,t,h),G(t,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);wt(t,e[2],!0),i||(o=$e(t,"change",e[17]),i=!0)},p(f,h){if(h&8){l=vt(f[3]);let p;for(p=0;p<l.length;p+=1){const m=Wr(f,l,p);a[p]?a[p].p(m,h):(a[p]=Vr(m),a[p].c(),a[p].m(t,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}h&12&&wt(t,f[2])},d(f){f&&H(t),Kr(a,f),i=!1,o()}}}function Vr(e){let t,r=e[23].name+"",n,i;return{c(){t=Y("option"),n=Ue(r),this.h()},l(o){t=J(o,"OPTION",{});var l=ie(t);n=Ce(l,r),l.forEach(H),this.h()},h(){t.__value=i=e[23],Le(t,t.__value)},m(o,l){ke(o,t,l),G(t,n)},p(o,l){l&8&&r!==(r=o[23].name+"")&&Mt(n,r),l&8&&i!==(i=o[23])&&(t.__value=i,Le(t,t.__value))},d(o){o&&H(t)}}}function _a(e){let t,r;function n(){return e[19](e[22])}return t=new $n({props:{music:e[22],playMusic:n}}),{c(){we(t.$$.fragment)},l(i){ve(t.$$.fragment,i)},m(i,o){_e(t,i,o),r=!0},p(i,o){e=i;const l={};o&4194304&&(l.music=e[22]),o&4194304&&(l.playMusic=n),t.$set(l)},i(i){r||(ae(t.$$.fragment,i),r=!0)},o(i){ue(t.$$.fragment,i),r=!1},d(i){Ee(t,i)}}}function Ea(e){let t,r,n,i,o,l,a,f,h,p,m,_,k,d,g,y,S,w,A,B,P,E,$,M,C,D,j,V=e[3]&&qr(e);return M=new Fn({props:{items:e[4],height:"100%",$$slots:{default:[_a,({item:z})=>({22:z}),({item:z})=>z?4194304:0]},$$scope:{ctx:e}}}),{c(){t=Y("div"),r=Y("div"),n=Y("select"),i=Y("option"),o=Ue("Alle Lieder"),l=Y("option"),a=Ue("Favoriten"),f=Y("option"),h=Ue("Heruntergeladene Lieder"),p=Y("option"),m=Ue("Deutsche Lieder"),_=Y("option"),k=Ue("Russische Lieder"),d=Y("option"),g=Ue("Instrumentelle Lieder"),y=Y("option"),S=Ue("Geistliche Lieder"),w=Y("option"),A=Ue("Песнь Возрождения"),B=Ie(),V&&V.c(),P=Ie(),E=Y("input"),$=Ie(),we(M.$$.fragment),this.h()},l(z){t=J(z,"DIV",{class:!0});var ee=ie(t);r=J(ee,"DIV",{class:!0});var oe=ie(r);n=J(oe,"SELECT",{class:!0});var de=ie(n);i=J(de,"OPTION",{});var pe=ie(i);o=Ce(pe,"Alle Lieder"),pe.forEach(H),l=J(de,"OPTION",{});var Ae=ie(l);a=Ce(Ae,"Favoriten"),Ae.forEach(H),f=J(de,"OPTION",{});var Se=ie(f);h=Ce(Se,"Heruntergeladene Lieder"),Se.forEach(H),p=J(de,"OPTION",{});var ge=ie(p);m=Ce(ge,"Deutsche Lieder"),ge.forEach(H),_=J(de,"OPTION",{});var ce=ie(_);k=Ce(ce,"Russische Lieder"),ce.forEach(H),d=J(de,"OPTION",{});var R=ie(d);g=Ce(R,"Instrumentelle Lieder"),R.forEach(H),y=J(de,"OPTION",{});var U=ie(y);S=Ce(U,"Geistliche Lieder"),U.forEach(H),w=J(de,"OPTION",{});var q=ie(w);A=Ce(q,"Песнь Возрождения"),q.forEach(H),de.forEach(H),B=Be(oe),V&&V.l(oe),P=Be(oe),E=J(oe,"INPUT",{class:!0,placeholder:!0,type:!0}),oe.forEach(H),$=Be(ee),ve(M.$$.fragment,ee),ee.forEach(H),this.h()},h(){i.__value=e[5],Le(i,i.__value),l.__value=e[6],Le(l,l.__value),f.__value=e[7],Le(f,f.__value),p.__value=e[8],Le(p,p.__value),_.__value=e[9],Le(_,_.__value),d.__value=e[10],Le(d,d.__value),y.__value=e[11],Le(y,y.__value),w.__value=e[12],Le(w,w.__value),X(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Jt(()=>e[16].call(n)),X(E,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),X(E,"placeholder","Suche"),X(E,"type","search"),X(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),X(t,"class","flex-1 flex flex-col justify-center")},m(z,ee){ke(z,t,ee),G(t,r),G(r,n),G(n,i),G(i,o),G(n,l),G(l,a),G(n,f),G(f,h),G(n,p),G(p,m),G(n,_),G(_,k),G(n,d),G(d,g),G(n,y),G(y,S),G(n,w),G(w,A),wt(n,e[1],!0),G(r,B),V&&V.m(r,null),G(r,P),G(r,E),Le(E,e[0]),G(t,$),_e(M,t,null),C=!0,D||(j=[$e(n,"change",e[16]),$e(E,"input",e[18])],D=!0)},p(z,[ee]){ee&8162&&wt(n,z[1]),z[3]?V?V.p(z,ee):(V=qr(z),V.c(),V.m(r,P)):V&&(V.d(1),V=null),ee&1&&E.value!==z[0]&&Le(E,z[0]);const oe={};ee&16&&(oe.items=z[4]),ee&71303168&&(oe.$$scope={dirty:ee,ctx:z}),M.$set(oe)},i(z){C||(ae(M.$$.fragment,z),C=!0)},o(z){ue(M.$$.fragment,z),C=!1},d(z){z&&H(t),V&&V.d(),Ee(M),D=!1,Xt(j)}}}function Sa(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}function zr(e,t){return Sa(e.name,t.name)}function Aa(e,t,r){let n,i,o,l,a;Ge(e,Pt,C=>r(15,o=C)),Ge(e,Qt,C=>r(20,l=C)),Ge(e,gt,C=>r(21,a=C));let f="";const h={getMusics:C=>or(C)},p={getMusics:C=>or(C).filter(D=>a.includes(xe(D.link)))},m={getMusics:C=>or(C).filter(D=>l.includes(xe(D.link)))},_={getAlbums:C=>C.german,getMusics:C=>C.german.flatMap(D=>D.musics)},k={getAlbums:C=>C.russian,getMusics:C=>C.russian.flatMap(D=>D.musics)},d={getAlbums:C=>C.instrumental,getMusics:C=>C.instrumental.flatMap(D=>D.musics)},g={getMusics:C=>C.geistlicheLieder.musics.map(D=>({...D,name:D.name.replace("_"," - ")}))},y={getMusics:C=>C.russianBook.musics};let S=h,w=null,A;async function B(C){const D=A.indexOf(C);Lt(null,A,D)}function P(){S=sr(this),r(1,S),r(12,y),r(11,g),r(10,d),r(9,k),r(8,_),r(7,m),r(6,p),r(5,h)}function E(){w=sr(this),r(2,w),r(3,n),r(1,S),r(15,o),r(3,n),r(1,S),r(15,o)}function $(){f=this.value,r(0,f)}const M=C=>B(C);return e.$$.update=()=>{e.$$.dirty&32770&&r(3,n=S.getAlbums==null?null:S.getAlbums(o)),e.$$.dirty&12&&w&&(!n||!n.includes(w))&&r(2,w=null),e.$$.dirty&32774&&(w?r(14,A=w.musics.sort(zr)):r(14,A=S.getMusics(o).sort(zr))),e.$$.dirty&16385&&r(4,i=A.filter(C=>f.toLocaleLowerCase().split(" ").every(D=>C.name.toLocaleLowerCase().includes(D))))},[f,S,w,n,i,h,p,m,_,k,d,g,y,B,A,o,P,E,$,M]}class ka extends Ve{constructor(t){super(),ze(this,t,Aa,Ea,qe,{})}}function Ia(e){let t,r,n,i,o,l;return r=new Ko({}),o=new xn({}),{c(){t=Y("a"),we(r.$$.fragment),n=Ie(),i=Y("a"),we(o.$$.fragment),this.h()},l(a){t=J(a,"A",{href:!0});var f=ie(t);ve(r.$$.fragment,f),f.forEach(H),n=Be(a),i=J(a,"A",{href:!0});var h=ie(i);ve(o.$$.fragment,h),h.forEach(H),this.h()},h(){X(t,"href","/"),X(i,"href","#settings")},m(a,f){ke(a,t,f),_e(r,t,null),ke(a,n,f),ke(a,i,f),_e(o,i,null),l=!0},p:Qe,i(a){l||(ae(r.$$.fragment,a),ae(o.$$.fragment,a),l=!0)},o(a){ue(r.$$.fragment,a),ue(o.$$.fragment,a),l=!1},d(a){a&&(H(t),H(n),H(i)),Ee(r),Ee(o)}}}function Ba(e){let t,r;return t=new va({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function Oa(e){let t,r;return t=new ka({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function Ra(e){let t,r,n,i,o,l,a,f,h,p,m,_,k,d,g,y;r=new Jr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Ia]},$$scope:{ctx:e}}});const S=[Oa,Ba],w=[];function A(B,P){return B[0].url.hash===""?0:B[0].url.hash==="#alben"?1:-1}return~(d=A(e))&&(g=w[d]=S[d](e)),{c(){t=Y("div"),we(r.$$.fragment),n=Ie(),i=Y("div"),o=Y("a"),l=Ue("Lieder"),f=Ie(),h=Y("a"),p=Ue("Alben"),_=Ie(),k=Y("div"),g&&g.c(),this.h()},l(B){t=J(B,"DIV",{class:!0});var P=ie(t);ve(r.$$.fragment,P),n=Be(P),i=J(P,"DIV",{class:!0});var E=ie(i);o=J(E,"A",{class:!0,href:!0});var $=ie(o);l=Ce($,"Lieder"),$.forEach(H),f=Be(E),h=J(E,"A",{class:!0,href:!0});var M=ie(h);p=Ce(M,"Alben"),M.forEach(H),E.forEach(H),_=Be(P),k=J(P,"DIV",{class:!0});var C=ie(k);g&&g.l(C),C.forEach(H),P.forEach(H),this.h()},h(){X(o,"class",a=`tab ${e[0].url.hash===""?"tab-active":""}`),X(o,"href","/music"),X(h,"class",m=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),X(h,"href","/music#alben"),X(i,"class","tabs justify-center"),X(k,"class","flex-1 flex overflow-auto p-1"),X(t,"class","flex-1 flex flex-col overflow-hidden")},m(B,P){ke(B,t,P),_e(r,t,null),G(t,n),G(t,i),G(i,o),G(o,l),G(i,f),G(i,h),G(h,p),G(t,_),G(t,k),~d&&w[d].m(k,null),y=!0},p(B,[P]){const E={};P&2&&(E.$$scope={dirty:P,ctx:B}),r.$set(E),(!y||P&1&&a!==(a=`tab ${B[0].url.hash===""?"tab-active":""}`))&&X(o,"class",a),(!y||P&1&&m!==(m=`tab ${B[0].url.hash==="#alben"?"tab-active":""}`))&&X(h,"class",m);let $=d;d=A(B),d!==$&&(g&&(st(),ue(w[$],1,1,()=>{w[$]=null}),lt()),~d?(g=w[d],g||(g=w[d]=S[d](B),g.c()),ae(g,1),g.m(k,null)):g=null)},i(B){y||(ae(r.$$.fragment,B),ae(g),y=!0)},o(B){ue(r.$$.fragment,B),ue(g),y=!1},d(B){B&&H(t),Ee(r),~d&&w[d].d()}}}function Ta(e,t,r){let n;return Ge(e,pr,i=>r(0,n=i)),[n]}class $a extends Ve{constructor(t){super(),ze(this,t,Ta,Ra,qe,{})}}function La(e){let t,r;return t=new ha({props:{album:e[2]()}}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},p:Qe,i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function Ma(e){let t,r;return t=new $a({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},p:Qe,i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function Gr(e){let t,r,n,i,o=e[1].isLoading&&Hr();return n=new ia({}),{c(){o&&o.c(),t=Ie(),r=Y("div"),we(n.$$.fragment),this.h()},l(l){o&&o.l(l),t=Be(l),r=J(l,"DIV",{class:!0});var a=ie(r);ve(n.$$.fragment,a),a.forEach(H),this.h()},h(){X(r,"class","self-center mb-2 w-full")},m(l,a){o&&o.m(l,a),ke(l,t,a),ke(l,r,a),_e(n,r,null),i=!0},p(l,a){l[1].isLoading?o||(o=Hr(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i(l){i||(ae(n.$$.fragment,l),i=!0)},o(l){ue(n.$$.fragment,l),i=!1},d(l){l&&(H(t),H(r)),o&&o.d(l),Ee(n)}}}function Hr(e){let t;return{c(){t=Y("progress"),this.h()},l(r){t=J(r,"PROGRESS",{class:!0}),ie(t).forEach(H),this.h()},h(){X(t,"class","progress w-56 self-center mb-2")},m(r,n){ke(r,t,n)},d(r){r&&H(t)}}}function Pa(e){let t,r,n,i,o,l,a;const f=[Ma,La],h=[];function p(_,k){return k&1&&(n=null),_[0].url.hash===""||_[0].url.hash==="#alben"?0:(n==null&&(n=!!_[0].url.hash.startsWith("#album")),n?1:-1)}~(i=p(e,-1))&&(o=h[i]=f[i](e));let m=(e[1].src!=null||e[1].isLoading)&&Gr(e);return{c(){t=Y("div"),r=Y("main"),o&&o.c(),l=Ie(),m&&m.c(),this.h()},l(_){t=J(_,"DIV",{class:!0});var k=ie(t);r=J(k,"MAIN",{class:!0});var d=ie(r);o&&o.l(d),d.forEach(H),l=Be(k),m&&m.l(k),k.forEach(H),this.h()},h(){X(r,"class","overflow-auto flex-1 flex flex-col"),X(t,"class","w-full h-full flex flex-col")},m(_,k){ke(_,t,k),G(t,r),~i&&h[i].m(r,null),G(t,l),m&&m.m(t,null),a=!0},p(_,[k]){let d=i;i=p(_,k),i===d?~i&&h[i].p(_,k):(o&&(st(),ue(h[d],1,1,()=>{h[d]=null}),lt()),~i?(o=h[i],o?o.p(_,k):(o=h[i]=f[i](_),o.c()),ae(o,1),o.m(r,null)):o=null),_[1].src!=null||_[1].isLoading?m?(m.p(_,k),k&2&&ae(m,1)):(m=Gr(_),m.c(),ae(m,1),m.m(t,null)):m&&(st(),ue(m,1,1,()=>{m=null}),lt())},i(_){a||(ae(o),ae(m),a=!0)},o(_){ue(o),ue(m),a=!1},d(_){_&&H(t),~i&&h[i].d(),m&&m.d()}}}function ja(e,t,r){let n,i;Ge(e,pr,l=>r(0,n=l)),Ge(e,pt,l=>r(1,i=l)),dr(()=>{(async()=>{Wn()&&(Yt.getGlobalApi().userAgent=null),Bo(),await Oo(),wo().then(Pt.set),navigator.onLine&&await ko().then(async a=>{Pt.set(a),await vo(a)})})()});function o(){return decodeURI(n.url.hash.substring(7))}return[n,i,o]}class Na extends Ve{constructor(t){super(),ze(this,t,ja,Pa,qe,{})}}function Ua(e){let t,r="Info",n,i,o,l,a;return l=new kr({props:{class:"inline"}}),{c(){t=Y("div"),t.textContent=r,n=Ie(),i=Y("p"),o=Ue(`Nachdem Lieder einmal ausgewählt wurden, werden sie heruntergeladen und
    offline gespeichert. Danach kann dieses Lied auch ohne Internet gehört
    werden und wird selbst bei einer Internetverbindung nicht erneut
    heruntergeladen. Dass das Lied heruntergeladen wurde, erkennt man am Icon
    `),we(l.$$.fragment),this.h()},l(f){t=J(f,"DIV",{class:!0,"data-svelte-h":!0}),it(t)!=="svelte-17k6sx2"&&(t.textContent=r),n=Be(f),i=J(f,"P",{class:!0});var h=ie(i);o=Ce(h,`Nachdem Lieder einmal ausgewählt wurden, werden sie heruntergeladen und
    offline gespeichert. Danach kann dieses Lied auch ohne Internet gehört
    werden und wird selbst bei einer Internetverbindung nicht erneut
    heruntergeladen. Dass das Lied heruntergeladen wurde, erkennt man am Icon
    `),ve(l.$$.fragment,h),h.forEach(H),this.h()},h(){X(t,"class","divider"),X(i,"class","inline")},m(f,h){ke(f,t,h),ke(f,n,h),ke(f,i,h),G(i,o),_e(l,i,null),a=!0},p:Qe,i(f){a||(ae(l.$$.fragment,f),a=!0)},o(f){ue(l.$$.fragment,f),a=!1},d(f){f&&(H(t),H(n),H(i)),Ee(l)}}}function Ca(e){let t,r;return t=new qn({props:{$$slots:{default:[Ua]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},p(n,[i]){const o={};i&1&&(o.$$scope={dirty:i,ctx:n}),t.$set(o)},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}class Da extends Ve{constructor(t){super(),ze(this,t,null,Ca,qe,{})}}function Fa(e){let t,r;return t=new Na({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function xa(e){let t,r;return t=new Da({}),{c(){we(t.$$.fragment)},l(n){ve(t.$$.fragment,n)},m(n,i){_e(t,n,i),r=!0},i(n){r||(ae(t.$$.fragment,n),r=!0)},o(n){ue(t.$$.fragment,n),r=!1},d(n){Ee(t,n)}}}function Wa(e){let t,r,n,i;const o=[xa,Fa],l=[];function a(f,h){return f[0].url.hash==="#settings"?0:1}return t=a(e),r=l[t]=o[t](e),{c(){r.c(),n=Kt()},l(f){r.l(f),n=Kt()},m(f,h){l[t].m(f,h),ke(f,n,h),i=!0},p(f,[h]){let p=t;t=a(f),t!==p&&(st(),ue(l[p],1,1,()=>{l[p]=null}),lt(),r=l[t],r||(r=l[t]=o[t](f),r.c()),ae(r,1),r.m(n.parentNode,n))},i(f){i||(ae(r),i=!0)},o(f){ue(r),i=!1},d(f){f&&H(n),l[t].d(f)}}}function qa(e,t,r){let n;return Ge(e,pr,i=>r(0,n=i)),[n]}class Ya extends Ve{constructor(t){super(),ze(this,t,qa,Wa,qe,{})}}export{Ya as component};
