import{n as me,a as h,t as M,c as we}from"../chunks/CIFocBDO.js";import{i as Se}from"../chunks/tMrZPO6s.js";import{a5 as Ye,a6 as Qe,a7 as ze,H,p as q,v as re,Y as A,au as C,I as o,J as r,K as p,D as a,F as te,b as R,f as oe,y as Xe,ad as Ze,L as ea}from"../chunks/DMgpOUNq.js";import{r as pe,s as I,i as j,b as aa,c as J,a as B}from"../chunks/_b71m-da.js";import{s as ge,C as ta,F as Ve,a as ie,r as Pe,b as Fe,P as sa,c as Ae,D as Ce,T as De,e as He,i as Ee,d as Me,V as na,S as ia,p as Ie,f as la}from"../chunks/B9GXry-S.js";import{l as ra,d as Te,s as le,e as oa}from"../chunks/BDe7l82h.js";import{g as je,a as ae,t as Oe,p as qe,b as ua,c as Le}from"../chunks/UU5L8KET.js";import{d as xe,f as Be,o as Re,c as Ne}from"../chunks/DDsrNjAt.js";import{o as Ue,a as Ge}from"../chunks/9Wr19g68.js";function ca(u,t,s=t){var n,e,v=()=>{cancelAnimationFrame(n),u.paused||(n=requestAnimationFrame(v));var m=u.currentTime;e!==m&&s(e=m)};n=requestAnimationFrame(v),u.addEventListener("timeupdate",v),Qe(()=>{var m=Number(t());e!==m&&!isNaN(m)&&(u.currentTime=e=m)}),ze(()=>{cancelAnimationFrame(n),u.removeEventListener("timeupdate",v)})}function va(u,t,s=t){var n=t(),e=()=>{n!==u.paused&&s(n=u.paused)};ra(u,["play","pause","canplay"],e,n==null),Ye(()=>{(n=!!t())!==u.paused&&(n?u.pause():u.play().catch(()=>{s(n=!0)}))})}function da(u,t,s,n,e){var v=()=>{n(s[u])};s.addEventListener(t,v),v(),(s===document.body||s===window||s===document)&&ze(()=>{s.removeEventListener(t,v)})}var fa=me('<svg><path fill="currentColor" d="M11 19v-6H2v-2h9V5l11 7z"></path></svg>');function ma(u,t){const s=pe(t,["$$slots","$$events","$$legacy"]);var n=fa();let e;H(()=>e=ge(n,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s},void 0,!0)),h(u,n)}var pa=me('<svg><path fill="currentColor" d="M13 19L2 12l11-7v6h9v2h-9z"></path></svg>');function ga(u,t){const s=pe(t,["$$slots","$$events","$$legacy"]);var n=pa();let e;H(()=>e=ge(n,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s},void 0,!0)),h(u,n)}var ba=me('<svg><path fill="currentColor" d="M14 19V5h4v14zm-8 0V5h4v14z"></path></svg>');function _a(u,t){const s=pe(t,["$$slots","$$events","$$legacy"]);var n=ba();let e;H(()=>e=ge(n,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s},void 0,!0)),h(u,n)}var ha=me('<svg><path fill="currentColor" d="M14 20v-2h2.6l-3.175-3.175L14.85 13.4L18 16.55V14h2v6zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4zm3.775-9.425L4 5.4L5.4 4l5.175 5.175z"></path></svg>');function xa(u,t){const s=pe(t,["$$slots","$$events","$$legacy"]);var n=ha();let e;H(()=>e=ge(n,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s},void 0,!0)),h(u,n)}function wa(u,t){t().song&&Oe(t().song.link)}var $a=M('<progress class="progress flex-1 self-center mx-2"></progress>'),ya=M('<input class="range flex-1 mx-2" type="range" min="0">'),ka=M('<button class="btn" disabled aria-label="Lädt..."><span class="loading loading-spinner"></span></button>'),La=M('<button class="btn"><!></button>'),Aa=M('<button class="btn"><!></button>'),Ma=M('<div class="h-auto mb-2 flex flex-col items-center rounded-md border-t-2"><div class="flex-1 w-full max-w-lg relative mt-2 px-2"> </div> <div class="flex-1 w-full max-w-lg relative mt-2"><div class="flex flex-row items-center"><!> <button class="inline btn btn-sm btn-circle relative place-items-center"><!></button></div></div> <div class="w-full max-w-lg flex flex-row justify-between px-2"><p> </p> <p> </p></div> <div class="h-8 flex justify-center gap-2"><button class="btn"><!></button> <button class="btn"><!></button> <!> <button class="btn"><!></button> <button class="btn"><!></button></div> <audio id="audio" autoplay></audio></div>');function Sa(u,t){q(t,!0);const[s,n]=J(),e=()=>I(xe,"$currentSong",s),v=()=>I(Be,"$favorites",s);let m=C(null),x=C(!0),_=C(0),c=C(0);const S=te(()=>Math.round(a(c)));async function F(i){const b=await je(i);navigator.mediaSession.metadata.artwork=[{src:b}]}function P(){navigator.mediaSession.setActionHandler("nexttrack",()=>{e().playNext?e().playNext():A(c,B(a(_))),k()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{e().playPrevious?e().playPrevious():A(c,0),k()}),navigator.mediaSession.setActionHandler("play",d),navigator.mediaSession.setActionHandler("pause",w),navigator.mediaSession.setActionHandler("stop",()=>{w(),L()}),navigator.mediaSession.setActionHandler("seekforward",i=>{const b=i.seekOffset||10;a(c)+b<a(_)?A(c,a(c)+b):A(c,B(a(_))),k()}),navigator.mediaSession.setActionHandler("seekbackward",i=>{const b=i.seekOffset||10;a(c)<b?A(c,0):A(c,a(c)-b),k()}),navigator.mediaSession.setActionHandler("seekto",i=>{i.seekTime&&(i.fastSeek?a(m).fastSeek(i.seekTime):A(c,B(i.seekTime)),k())})}Ue(()=>P()),Ge(()=>L()),re(()=>{var i,b,O;"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(i=e().song)==null?void 0:i.name,album:(b=e().album)==null?void 0:b.name}),(O=e().album)!=null&&O.image&&F(e().album.image),A(c,0))});function k(){"mediaSession"in navigator&&navigator.mediaSession.setPositionState({duration:a(_),position:a(S)})}function d(){a(m).play(),k(),navigator.mediaSession.playbackState="playing"}function w(){a(m).pause(),k(),navigator.mediaSession.playbackState="paused"}function L(){xe.set({isLoading:!1,song:null,album:null,src:null}),navigator.mediaSession.playbackState="none"}function g(i){return i=Math.round(i),`${Math.floor(i/60)}`.padStart(2,"0")+":"+`${i%60}`.padStart(2,"0")}re(()=>{e().isLoading&&w()});var l=Ma(),y=o(l),T=o(y,!0);r(y);var N=p(y,2),be=o(N),_e=o(be);{var ue=i=>{var b=$a();h(i,b)},ce=i=>{var b=ya();Pe(b),b.__change=k,H(()=>ie(b,"max",a(_))),Fe(b,()=>a(c),O=>A(c,O)),h(i,b)};j(_e,i=>{e().isLoading?i(ue):i(ce,!1)})}var U=p(_e,2);U.__click=L;var ve=o(U);ta(ve,{}),r(U),r(be),r(N);var K=p(N,2),Y=o(K),de=o(Y,!0);r(Y);var se=p(Y,2),fe=o(se,!0);r(se),r(K);var Q=p(K,2),X=o(Q);X.__click=[wa,e];var he=o(X);const $e=te(()=>e().song!=null&&v().includes(ae(e().song.link)));Ve(he,{get isFavorite(){return a($e)}}),r(X);var G=p(X,2);G.__click=function(...i){var b;(b=e().playPrevious)==null||b.apply(this,i)};var ye=o(G);ga(ye,{}),r(G);var f=p(G,2);{var $=i=>{var b=ka();h(i,b)},z=i=>{var b=we(),O=oe(b);{var Je=ne=>{var V=La();V.__click=w;var ke=o(V);_a(ke,{}),r(V),h(ne,V)},Ke=ne=>{var V=Aa();V.__click=d;var ke=o(V);sa(ke,{}),r(V),H(()=>V.disabled=e().isLoading),h(ne,V)};j(O,ne=>{a(x)?ne(Ke,!1):ne(Je)},!0)}h(i,b)};j(f,i=>{e().isLoading?i($):i(z,!1)})}var D=p(f,2);D.__click=function(...i){var b;(b=e().playNext)==null||b.apply(this,i)};var Z=o(D);ma(Z,{}),r(D);var W=p(D,2);W.__click=function(...i){var b;(b=e().playRandom)==null||b.apply(this,i)};var ee=o(W);xa(ee,{}),r(W),r(Q);var E=p(Q,2);aa(E,i=>A(m,i),()=>a(m)),r(l),H((i,b)=>{var O;le(T,(O=e().song)==null?void 0:O.name),le(de,i),le(fe,b),G.disabled=e().playPrevious==null,D.disabled=e().playNext==null,ie(E,"src",e().isLoading?"":e().src)},[()=>g(a(S)),()=>e().isLoading?"":g(a(_))]),oa("ended",E,function(...i){var b;(b=e().playNext)==null||b.apply(this,i)}),va(E,()=>a(x),i=>A(x,i)),da("duration","durationchange",E,i=>A(_,i)),ca(E,()=>a(c),i=>A(c,i)),h(u,l),R(),n()}Te(["change","click"]);var Pa=M('<div class="badge"><!></div>'),Fa=(u,t)=>Oe(t.music.link),Ca=M('<li class="flex"><button><p class="flex-1 hover:underline"> </p></button> <div class="flex gap-2"><!> <button class="btn btn-sm btn-circle"><!></button></div></li>');function We(u,t){q(t,!0);const[s,n]=J(),e=()=>I(xe,"$currentSong",s),v=()=>I(Re,"$offlineMusics",s),m=()=>I(Be,"$favorites",s);var x=Ca(),_=o(x);_.__click=function(...g){var l;(l=t.playMusic)==null||l.apply(this,g)};var c=o(_),S=o(c,!0);r(c),r(_);var F=p(_,2),P=o(F);{var k=g=>{var l=Pa(),y=o(l);Ce(y,{}),r(l),h(g,l)};j(P,g=>{v().includes(ae(t.music.link))&&g(k)})}var d=p(P,2);d.__click=[Fa,t];var w=o(d);const L=te(()=>m().includes(ae(t.music.link)));Ve(w,{get isFavorite(){return a(L)}}),r(d),r(F),r(x),H(()=>{Ae(_,1,`w-full text-left ${t.music===e().song?"font-bold":""} cursor-pointer`),le(S,t.music.name)}),h(u,x),R(),n()}Te(["click"]);async function Ha(u,t){for(const s of a(t).musics)await ua({name:s.name,...s.link})}var Ia=M('<button class="btn"><!></button>'),Ta=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),ja=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),Ba=M('<main class="flex-1 flex flex-col"><!> <div class="flex-1 flex justify-center mt-2"><div class="card w-full md:w-96 bg-base-100 shadow-xl"><div class="mb-2"><!></div> <ul class="mx-2"></ul></div></div></main>');function Na(u,t){q(t,!0);const[s,n]=J(),e=()=>I(Ne,"$albums",s),v=te(()=>e().german.concat(e().russian).concat(e().instrumental).find(l=>l.folderName===t.album));let m=C(null);re(()=>{a(v).image&&je(a(v).image).then(l=>A(m,B(l)))});async function x(l){const y=a(v).musics.indexOf(l);qe(a(v),a(v).musics,y)}var _=Ba(),c=o(_);const S=te(()=>a(v).name??"Lädt...");De(c,{get title(){return a(S)},withCloseButton:!0,children:(l,y)=>{var T=Ia();T.__click=[Ha,v];var N=o(T);Ce(N,{}),r(T),h(l,T)},$$slots:{default:!0}});var F=p(c,2),P=o(F),k=o(P),d=o(k);{var w=l=>{var y=Ta(),T=o(y);r(y),H(()=>ie(T,"src",a(m))),h(l,y)},L=l=>{var y=ja();h(l,y)};j(d,l=>{a(m)?l(w):l(L,!1)})}r(k);var g=p(k,2);He(g,21,()=>a(v).musics,Ee,(l,y)=>{We(l,{get music(){return a(y)},playMusic:()=>x(a(y))})}),r(g),r(P),r(F),r(_),h(u,_),R(),n()}Te(["click"]);var za=me('<svg><path fill="currentColor" d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h10l6 6v10q0 .825-.587 1.413T19 21zm2-4h10v-2H7zm0-4h10v-2H7zm0-4h7V7H7z"></path></svg>');function Va(u,t){const s=pe(t,["$$slots","$$events","$$legacy"]);var n=za();let e;H(()=>e=ge(n,e,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s},void 0,!0)),h(u,n)}var Da=M('<figure><img alt="Albumbild" class="w-48 h-48 object-scale-down"></figure>'),Ea=M('<div class="w-48 h-48 flex self-center justify-center items-center"><progress class="progress w-56 mb-2 h-4"></progress></div>'),Oa=M('<div class="card w-full md:w-96 bg-base-100 shadow-xl h-min"><!> <div class="card-body w-full md:w-96"><p class="card-title"> </p></div> <div class="card-actions justify-end"><a class="btn capitalize">Öffnen</a></div></div>');function qa(u,t){q(t,!0);let s=C(null),n=C(null),e;e=new IntersectionObserver(async d=>{d[0].isIntersecting&&!a(s)&&(A(s,B(await je(t.album.image))),e.unobserve(a(n)),e=null)}),Ue(()=>{A(n,B(document.getElementById(`album_card_${t.album.name}`))),e.observe(a(n))}),Ge(()=>{e==null||e.unobserve(a(n))});var v=Oa(),m=o(v);{var x=d=>{var w=Da(),L=o(w);r(w),H(()=>ie(L,"src",a(s))),h(d,w)},_=d=>{var w=Ea();h(d,w)};j(m,d=>{a(s)?d(x):d(_,!1)})}var c=p(m,2),S=o(c),F=o(S,!0);r(S),r(c);var P=p(c,2),k=o(P);r(P),r(v),H(()=>{ie(v,"id",`album_card_${t.album.name}`),le(F,t.album.name),ie(k,"href",`#album/${t.album.folderName}`)}),h(u,v),R()}var Ra=M('<div class="flex-1 flex flex-col overflow-hidden"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Alben</option><option>Deutsche Alben</option><option>Russische Alben</option><option>Instrumentelle Alben</option></select> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <div class="flex-1 flex flex-wrap justify-between gap-4 overflow-auto"></div></div>');function Ua(u,t){q(t,!0);const[s,n]=J(),e=()=>I(Ne,"$albums",s);let v=C(B([])),m=C(""),x=C("all");re(()=>{let g;if(a(x)==="all")g=e().german.concat(e().russian).concat(e().instrumental);else if(a(x)==="german")g=e().german;else if(a(x)==="russian")g=e().russian;else if(a(x)==="instrumental")g=e().instrumental;else throw new Error("No album selected.");A(v,B(g.filter(l=>a(m).toLocaleLowerCase().split(" ").every(y=>l.name.toLocaleLowerCase().includes(y))).sort((l,y)=>l.name>y.name?1:-1)))});var _=Ra(),c=o(_),S=o(c),F=o(S);F.value=(F.__value="all")==null?"":"all";var P=p(F);P.value=(P.__value="german")==null?"":"german";var k=p(P);k.value=(k.__value="russian")==null?"":"russian";var d=p(k);d.value=(d.__value="instrumental")==null?"":"instrumental",r(S);var w=p(S,2);Pe(w),r(c);var L=p(c,2);He(L,21,()=>a(v),g=>g.folderName,(g,l)=>{qa(g,{get album(){return a(l)}})}),r(L),r(_),Me(S,()=>a(x),g=>A(x,g)),Fe(w,()=>a(m),g=>A(m,g)),h(u,_),R(),n()}var Ga=M("<option> </option>"),Wa=M('<select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><!></select>'),Ja=M('<div class="flex-1 flex flex-col justify-center"><div class="w-full flex justify-center md:gap-2 flex-wrap"><select class="select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"><option>Alle Lieder</option><option>Favoriten</option><option>Heruntergeladene Lieder</option><option>Deutsche Lieder</option><option>Russische Lieder</option><option>Instrumentelle Lieder</option><option>Geistliche Lieder</option><option>Песнь Возрождения</option></select> <!> <input class="input input-bordered w-full max-w-md mb-2 focus:outline-none" placeholder="Suche" type="search"></div> <!></div>');function Ka(u,t){q(t,!0);const[s,n]=J(),e=()=>I(Be,"$favorites",s),v=()=>I(Re,"$offlineMusics",s),m=()=>I(Ne,"$albums",s);let x=C("");const _={getMusics:f=>Le(f)},c={getMusics:f=>Le(f).filter($=>e().includes(ae($.link)))},S={getMusics:f=>Le(f).filter($=>v().includes(ae($.link)))},F={getAlbums:f=>f.german,getMusics:f=>f.german.flatMap($=>$.musics)},P={getAlbums:f=>f.russian,getMusics:f=>f.russian.flatMap($=>$.musics)},k={getAlbums:f=>f.instrumental,getMusics:f=>f.instrumental.flatMap($=>$.musics)},d={getMusics:f=>f.geistlicheLieder.musics.map($=>({...$,name:$.name.replace("_"," - ")}))},w={getMusics:f=>f.russianBook.musics};let L=C(B(_));const g=te(()=>a(L).getAlbums==null?null:a(L).getAlbums(m()));let l=C(null);re(()=>{a(l)&&(!a(g)||!a(g).includes(a(l)))&&A(l,null)});function y(f,$){return f.localeCompare($,void 0,{numeric:!0,sensitivity:"base"})}function T(f,$){return y(f.name,$.name)}let N=C(B([]));re(()=>{A(N,B(a(l)!=null?a(l).musics.sort(T):a(L).getMusics(m()).sort(T)))});async function be(f){const $=a(N).indexOf(f),z=[...m().german,...m().russian,...m().instrumental,m().geistlicheLieder,m().russianBook].find(D=>D.musics.some(Z=>ae(Z.link)===ae(f.link)))??null;qe(z,a(N),$)}const _e=te(()=>a(N).filter(f=>a(x).toLocaleLowerCase().split(" ").every($=>f.name.toLocaleLowerCase().includes($))));var ue=Ja(),ce=o(ue),U=o(ce),ve=o(U);ve.value=(ve.__value=_)==null?"":_;var K=p(ve);K.value=(K.__value=c)==null?"":c;var Y=p(K);Y.value=(Y.__value=S)==null?"":S;var de=p(Y);de.value=(de.__value=F)==null?"":F;var se=p(de);se.value=(se.__value=P)==null?"":P;var fe=p(se);fe.value=(fe.__value=k)==null?"":k;var Q=p(fe);Q.value=(Q.__value=d)==null?"":d;var X=p(Q);X.value=(X.__value=w)==null?"":w,r(U);var he=p(U,2);{var $e=f=>{var $=Wa(),z=o($);z.value=(z.__value=null)==null?"":null;var D=p(z);He(D,17,()=>a(g),Ee,(Z,W)=>{var ee=Ga(),E={},i=o(ee,!0);r(ee),H(()=>{E!==(E=a(W))&&(ee.value=(ee.__value=a(W))==null?"":a(W)),le(i,a(W).name)}),h(Z,ee)}),r($),Me($,()=>a(l),Z=>A(l,Z)),h(f,$)};j(he,f=>{a(g)&&f($e)})}var G=p(he,2);Pe(G),r(ce);var ye=p(ce,2);na(ye,{get items(){return a(_e)},height:"100%",children:($,z=Xe)=>{We($,{get music(){return z()},playMusic:()=>be(z())})},$$slots:{default:!0}}),r(ue),Me(U,()=>a(L),f=>A(L,f)),Fe(G,()=>a(x),f=>A(x,f)),h(u,ue),R(),n()}var Ya=M('<a class="btn" href="/"><!></a> <a class="btn" href="#settings"><!></a>',1),Qa=M('<div class="flex-1 flex flex-col overflow-hidden"><!> <div class="tabs justify-center"><a href="/music">Lieder</a> <a href="/music#alben">Alben</a></div> <div class="flex-1 flex overflow-auto p-1"><!></div></div>');function Xa(u,t){q(t,!1);const[s,n]=J(),e=()=>I(Ie,"$page",s);Se();var v=Qa(),m=o(v);De(m,{title:"Geistliche Lieder!",withCloseButton:!1,children:(d,w)=>{var L=Ya(),g=oe(L),l=o(g);Va(l,{}),r(g);var y=p(g,2),T=o(y);ia(T,{}),r(y),h(d,L)},$$slots:{default:!0}});var x=p(m,2),_=o(x),c=p(_,2);r(x);var S=p(x,2),F=o(S);{var P=d=>{Ka(d,{})},k=d=>{var w=we(),L=oe(w);{var g=l=>{Ua(l,{})};j(L,l=>{e().url.hash==="#alben"&&l(g)},!0)}h(d,w)};j(F,d=>{e().url.hash===""?d(P):d(k,!1)})}r(S),r(v),H(()=>{Ae(_,1,`tab ${e().url.hash===""?"tab-active":""}`),Ae(c,1,`tab ${e().url.hash==="#alben"?"tab-active":""}`)}),h(u,v),R(),n()}var Za=M('<div class="self-center mb-2 w-full"><!></div>'),et=M('<div class="w-full h-full flex flex-col"><main class="overflow-auto flex-1 flex flex-col"><!></main> <!></div>');function at(u,t){q(t,!1);const[s,n]=J(),e=()=>I(Ie,"$page",s),v=()=>I(xe,"$currentSong",s);function m(){return decodeURI(e().url.hash.substring(7))}Se();var x=et(),_=o(x),c=o(_);{var S=d=>{Xa(d,{})},F=d=>{var w=we(),L=oe(w);{var g=l=>{const y=Ze(m);Na(l,{get album(){return a(y)}})};j(L,l=>{e().url.hash.startsWith("#album")&&l(g)},!0)}h(d,w)};j(c,d=>{e().url.hash===""||e().url.hash==="#alben"?d(S):d(F,!1)})}r(_);var P=p(_,2);{var k=d=>{var w=Za(),L=o(w);Sa(L,{}),r(w),h(d,w)};j(P,d=>{(v().src!=null||v().isLoading)&&d(k)})}r(x),h(u,x),R(),n()}var tt=M(`<div class="divider">Info</div> <p class="inline">Nachdem Lieder einmal ausgewählt wurden, werden diese heruntergeladen und
    offline gespeichert. Danach können diese Lieder auch ohne Internet gehört
    werden und werden selbst bei einer Internetverbindung nicht erneut
    heruntergeladen. Dass ein Lied heruntergeladen wurde, erkennt man am <!>-Icon</p>`,1);function st(u){la(u,{children:(t,s)=>{var n=tt(),e=p(oe(n),2),v=p(o(e));Ce(v,{class:"inline"}),ea(),r(e),h(t,n)},$$slots:{default:!0}})}function ft(u,t){q(t,!1);const[s,n]=J(),e=()=>I(Ie,"$page",s);Se();var v=we(),m=oe(v);{var x=c=>{st(c)},_=c=>{at(c,{})};j(m,c=>{e().url.hash==="#settings"?c(x):c(_,!1)})}h(u,v),R(),n()}export{ft as component};
