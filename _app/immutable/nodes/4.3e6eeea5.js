import{n as Ze,s as ze,k as Fe,l as et,c as jt,u as Nt,g as Ut,d as Ct,m as mt,p as Yt,r as hr,e as rt,o as Jt,q as zt,v as Ln}from"../chunks/scheduler.12b6bea3.js";import{S as Ve,i as Ge,r as Ie,u as Be,v as Oe,d as ce,t as de,w as Re,g as Z,s as _e,m as Ue,h as ee,j as ae,c as Ee,y as at,f as H,n as Ce,k as Q,a as Te,x as V,z as Pe,A as Le,o as bt,p as nt,b as it,B as Pn,C as dr,D as wt,e as Ar,E as or}from"../chunks/index.0500b2c7.js";import{p as Jr}from"../chunks/stores.e8cb1ec3.js";import{I as $t,g as Dt,a as Ft,F as Mn,b as jn,c as Nn,T as Xr,e as ft,u as Un,o as Cn,i as $n}from"../chunks/TitleBar.242c0022.js";import{c as st,a as Lt}from"../chunks/store.4c11173f.js";const Dn=typeof window<"u";let Fn=Dn?e=>requestAnimationFrame(e):Ze;const xn=(e,t)=>t.some(r=>e instanceof r);let kr,Ir;function Wn(){return kr||(kr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qn(){return Ir||(Ir=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qr=new WeakMap,ar=new WeakMap,Zr=new WeakMap,Qt=new WeakMap,pr=new WeakMap;function zn(e){const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",l)},i=()=>{r(lt(e.result)),o()},l=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Qr.set(r,e)}).catch(()=>{}),pr.set(t,e),t}function Vn(e){if(ar.has(e))return;const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",l),e.removeEventListener("abort",l)},i=()=>{r(),o()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",l),e.addEventListener("abort",l)});ar.set(e,t)}let sr={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return ar.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Zr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return lt(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Gn(e){sr=e(sr)}function Hn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Zt(this),t,...r);return Zr.set(n,t.sort?t.sort():[t]),lt(n)}:qn().includes(e)?function(...t){return e.apply(Zt(this),t),lt(Qr.get(this))}:function(...t){return lt(e.apply(Zt(this),t))}}function Kn(e){return typeof e=="function"?Hn(e):(e instanceof IDBTransaction&&Vn(e),xn(e,Wn())?new Proxy(e,sr):e)}function lt(e){if(e instanceof IDBRequest)return zn(e);if(Qt.has(e))return Qt.get(e);const t=Kn(e);return t!==e&&(Qt.set(e,t),pr.set(t,e)),t}const Zt=e=>pr.get(e);function Yn(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const l=indexedDB.open(e,t),a=lt(l);return n&&l.addEventListener("upgradeneeded",f=>{n(lt(l.result),f.oldVersion,f.newVersion,lt(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),a.then(f=>{i&&f.addEventListener("close",()=>i()),o&&f.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const Jn=["get","getKey","getAll","getAllKeys","count"],Xn=["put","add","delete","clear"],er=new Map;function Br(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(er.get(t))return er.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=Xn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||Jn.includes(r)))return;const i=async function(l,...a){const f=this.transaction(l,o?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(a.shift())),(await Promise.all([d[r](...a),o&&f.done]))[0]};return er.set(t,i),i}Gn(e=>({...e,get:(t,r,n)=>Br(t,r)||e.get(t,r,n),has:(t,r)=>!!Br(t,r)||e.has(t,r)}));var Qn=Object.create,yr=Object.defineProperty,Zn=Object.getOwnPropertyDescriptor,ei=Object.getOwnPropertyNames,ti=Object.getPrototypeOf,ri=Object.prototype.hasOwnProperty,ni=e=>yr(e,"__esModule",{value:!0}),ii=(e,t)=>()=>(e&&(t=e(e=0)),t),le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),oi=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ei(t))!ri.call(e,o)&&(r||o!=="default")&&yr(e,o,{get:()=>t[o],enumerable:!(n=Zn(t,o))||n.enumerable});return e},He=(e,t)=>oi(ni(yr(e!=null?Qn(ti(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ai=le(e=>{te(),e.byteLength=f,e.toByteArray=y,e.fromByteArray=S;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,l=o.length;i<l;++i)t[i]=o[i],r[o.charCodeAt(i)]=i;var i,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(c){var p=c.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=c.indexOf("=");g===-1&&(g=p);var k=g===p?0:4-g%4;return[g,k]}function f(c){var p=a(c),g=p[0],k=p[1];return(g+k)*3/4-k}function d(c,p,g){return(p+g)*3/4-g}function y(c){var p,g=a(c),k=g[0],v=g[1],A=new n(d(c,k,v)),O=0,j=v>0?k-4:k,E;for(E=0;E<j;E+=4)p=r[c.charCodeAt(E)]<<18|r[c.charCodeAt(E+1)]<<12|r[c.charCodeAt(E+2)]<<6|r[c.charCodeAt(E+3)],A[O++]=p>>16&255,A[O++]=p>>8&255,A[O++]=p&255;return v===2&&(p=r[c.charCodeAt(E)]<<2|r[c.charCodeAt(E+1)]>>4,A[O++]=p&255),v===1&&(p=r[c.charCodeAt(E)]<<10|r[c.charCodeAt(E+1)]<<4|r[c.charCodeAt(E+2)]>>2,A[O++]=p>>8&255,A[O++]=p&255),A}function w(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function m(c,p,g){for(var k,v=[],A=p;A<g;A+=3)k=(c[A]<<16&16711680)+(c[A+1]<<8&65280)+(c[A+2]&255),v.push(w(k));return v.join("")}function S(c){for(var p,g=c.length,k=g%3,v=[],A=16383,O=0,j=g-k;O<j;O+=A)v.push(m(c,O,O+A>j?j:O+A));return k===1?(p=c[g-1],v.push(t[p>>2]+t[p<<4&63]+"==")):k===2&&(p=(c[g-2]<<8)+c[g-1],v.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),v.join("")}}),si=le(e=>{te(),e.read=function(t,r,n,o,i){var l,a,f=i*8-o-1,d=(1<<f)-1,y=d>>1,w=-7,m=n?i-1:0,S=n?-1:1,c=t[r+m];for(m+=S,l=c&(1<<-w)-1,c>>=-w,w+=f;w>0;l=l*256+t[r+m],m+=S,w-=8);for(a=l&(1<<-w)-1,l>>=-w,w+=o;w>0;a=a*256+t[r+m],m+=S,w-=8);if(l===0)l=1-y;else{if(l===d)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,o),l=l-y}return(c?-1:1)*a*Math.pow(2,l-o)},e.write=function(t,r,n,o,i,l){var a,f,d,y=l*8-i-1,w=(1<<y)-1,m=w>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=o?0:l-1,p=o?1:-1,g=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,a=w):(a=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+m>=1?r+=S/d:r+=S*Math.pow(2,1-m),r*d>=2&&(a++,d/=2),a+m>=w?(f=0,a=w):a+m>=1?(f=(r*d-1)*Math.pow(2,i),a=a+m):(f=r*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;t[n+c]=f&255,c+=p,f/=256,i-=8);for(a=a<<i|f,y+=i;y>0;t[n+c]=a&255,c+=p,a/=256,y-=8);t[n+c-p]|=g*128}}),xt=le(e=>{te();var t=ai(),r=si(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;var o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let s=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(s,u),s.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(s){if(s>o)throw new RangeError('The value "'+s+'" is invalid for option "size"');let u=new Uint8Array(s);return Object.setPrototypeOf(u,a.prototype),u}function a(s,u,h){if(typeof s=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(s)}return f(s,u,h)}a.poolSize=8192;function f(s,u,h){if(typeof s=="string")return m(s,u);if(ArrayBuffer.isView(s))return c(s);if(s==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if($e(s,ArrayBuffer)||s&&$e(s.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(s,SharedArrayBuffer)||s&&$e(s.buffer,SharedArrayBuffer)))return p(s,u,h);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=s.valueOf&&s.valueOf();if(I!=null&&I!==s)return a.from(I,u,h);let P=g(s);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return a.from(s[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}a.from=function(s,u,h){return f(s,u,h)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(s<0)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function y(s,u,h){return d(s),s<=0?l(s):u!==void 0?typeof h=="string"?l(s).fill(u,h):l(s).fill(u):l(s)}a.alloc=function(s,u,h){return y(s,u,h)};function w(s){return d(s),l(s<0?0:k(s)|0)}a.allocUnsafe=function(s){return w(s)},a.allocUnsafeSlow=function(s){return w(s)};function m(s,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=A(s,u)|0,I=l(h),P=I.write(s,u);return P!==h&&(I=I.slice(0,P)),I}function S(s){let u=s.length<0?0:k(s.length)|0,h=l(u);for(let I=0;I<u;I+=1)h[I]=s[I]&255;return h}function c(s){if($e(s,Uint8Array)){let u=new Uint8Array(s);return p(u.buffer,u.byteOffset,u.byteLength)}return S(s)}function p(s,u,h){if(u<0||s.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let I;return u===void 0&&h===void 0?I=new Uint8Array(s):h===void 0?I=new Uint8Array(s,u):I=new Uint8Array(s,u,h),Object.setPrototypeOf(I,a.prototype),I}function g(s){if(a.isBuffer(s)){let u=k(s.length)|0,h=l(u);return h.length===0||s.copy(h,0,0,u),h}if(s.length!==void 0)return typeof s.length!="number"||ot(s.length)?l(0):S(s);if(s.type==="Buffer"&&Array.isArray(s.data))return S(s.data)}function k(s){if(s>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return s|0}function v(s){return+s!=s&&(s=0),a.alloc(+s)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,u){if($e(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),$e(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(s)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let h=s.length,I=u.length;for(let P=0,F=Math.min(h,I);P<F;++P)if(s[P]!==u[P]){h=s[P],I=u[P];break}return h<I?-1:I<h?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<s.length;++h)u+=s[h].length;let I=a.allocUnsafe(u),P=0;for(h=0;h<s.length;++h){let F=s[h];if($e(F,Uint8Array))P+F.length>I.length?(a.isBuffer(F)||(F=a.from(F)),F.copy(I,P)):Uint8Array.prototype.set.call(I,F,P);else if(a.isBuffer(F))F.copy(I,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=F.length}return I};function A(s,u){if(a.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||$e(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);let h=s.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&h===0)return 0;let P=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return ve(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return xe(s).length;default:if(P)return I?-1:ve(s).length;u=(""+u).toLowerCase(),P=!0}}a.byteLength=A;function O(s,u,h){let I=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(s||(s="utf8");;)switch(s){case"hex":return be(this,u,h);case"utf8":case"utf-8":return K(this,u,h);case"ascii":return oe(this,u,h);case"latin1":case"binary":return ue(this,u,h);case"base64":return Y(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,u,h);default:if(I)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function j(s,u,h){let I=s[u];s[u]=s[h],s[h]=I}a.prototype.swap16=function(){let s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)j(this,u,u+1);return this},a.prototype.swap32=function(){let s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)j(this,u,u+3),j(this,u+1,u+2);return this},a.prototype.swap64=function(){let s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)j(this,u,u+7),j(this,u+1,u+6),j(this,u+2,u+5),j(this,u+3,u+4);return this},a.prototype.toString=function(){let s=this.length;return s===0?"":arguments.length===0?K(this,0,s):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="",u=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(s,u,h,I,P){if($e(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),h===void 0&&(h=s?s.length:0),I===void 0&&(I=0),P===void 0&&(P=this.length),u<0||h>s.length||I<0||P>this.length)throw new RangeError("out of range index");if(I>=P&&u>=h)return 0;if(I>=P)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,I>>>=0,P>>>=0,this===s)return 0;let F=P-I,G=h-u,Se=Math.min(F,G),Ne=this.slice(I,P),ke=s.slice(u,h);for(let Ae=0;Ae<Se;++Ae)if(Ne[Ae]!==ke[Ae]){F=Ne[Ae],G=ke[Ae];break}return F<G?-1:G<F?1:0};function E(s,u,h,I,P){if(s.length===0)return-1;if(typeof h=="string"?(I=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,ot(h)&&(h=P?0:s.length-1),h<0&&(h=s.length+h),h>=s.length){if(P)return-1;h=s.length-1}else if(h<0)if(P)h=0;else return-1;if(typeof u=="string"&&(u=a.from(u,I)),a.isBuffer(u))return u.length===0?-1:L(s,u,h,I,P);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(s,u,h):Uint8Array.prototype.lastIndexOf.call(s,u,h):L(s,[u],h,I,P);throw new TypeError("val must be string, number or Buffer")}function L(s,u,h,I,P){let F=1,G=s.length,Se=u.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(s.length<2||u.length<2)return-1;F=2,G/=2,Se/=2,h/=2}function Ne(Ae,Me){return F===1?Ae[Me]:Ae.readUInt16BE(Me*F)}let ke;if(P){let Ae=-1;for(ke=h;ke<G;ke++)if(Ne(s,ke)===Ne(u,Ae===-1?0:ke-Ae)){if(Ae===-1&&(Ae=ke),ke-Ae+1===Se)return Ae*F}else Ae!==-1&&(ke-=ke-Ae),Ae=-1}else for(h+Se>G&&(h=G-Se),ke=h;ke>=0;ke--){let Ae=!0;for(let Me=0;Me<Se;Me++)if(Ne(s,ke+Me)!==Ne(u,Me)){Ae=!1;break}if(Ae)return ke}return-1}a.prototype.includes=function(s,u,h){return this.indexOf(s,u,h)!==-1},a.prototype.indexOf=function(s,u,h){return E(this,s,u,h,!0)},a.prototype.lastIndexOf=function(s,u,h){return E(this,s,u,h,!1)};function M(s,u,h,I){h=Number(h)||0;let P=s.length-h;I?(I=Number(I),I>P&&(I=P)):I=P;let F=u.length;I>F/2&&(I=F/2);let G;for(G=0;G<I;++G){let Se=parseInt(u.substr(G*2,2),16);if(ot(Se))return G;s[h+G]=Se}return G}function $(s,u,h,I){return Ke(ve(u,s.length-h),s,h,I)}function D(s,u,h,I){return Ke(ge(u),s,h,I)}function N(s,u,h,I){return Ke(xe(u),s,h,I)}function z(s,u,h,I){return Ke(U(u,s.length-h),s,h,I)}a.prototype.write=function(s,u,h,I){if(u===void 0)I="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")I=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,I===void 0&&(I="utf8")):(I=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let P=this.length-u;if((h===void 0||h>P)&&(h=P),s.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let F=!1;for(;;)switch(I){case"hex":return M(this,s,u,h);case"utf8":case"utf-8":return $(this,s,u,h);case"ascii":case"latin1":case"binary":return D(this,s,u,h);case"base64":return N(this,s,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,s,u,h);default:if(F)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),F=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(s,u,h){return u===0&&h===s.length?t.fromByteArray(s):t.fromByteArray(s.slice(u,h))}function K(s,u,h){h=Math.min(s.length,h);let I=[],P=u;for(;P<h;){let F=s[P],G=null,Se=F>239?4:F>223?3:F>191?2:1;if(P+Se<=h){let Ne,ke,Ae,Me;switch(Se){case 1:F<128&&(G=F);break;case 2:Ne=s[P+1],(Ne&192)===128&&(Me=(F&31)<<6|Ne&63,Me>127&&(G=Me));break;case 3:Ne=s[P+1],ke=s[P+2],(Ne&192)===128&&(ke&192)===128&&(Me=(F&15)<<12|(Ne&63)<<6|ke&63,Me>2047&&(Me<55296||Me>57343)&&(G=Me));break;case 4:Ne=s[P+1],ke=s[P+2],Ae=s[P+3],(Ne&192)===128&&(ke&192)===128&&(Ae&192)===128&&(Me=(F&15)<<18|(Ne&63)<<12|(ke&63)<<6|Ae&63,Me>65535&&Me<1114112&&(G=Me))}}G===null?(G=65533,Se=1):G>65535&&(G-=65536,I.push(G>>>10&1023|55296),G=56320|G&1023),I.push(G),P+=Se}return ie(I)}var fe=4096;function ie(s){let u=s.length;if(u<=fe)return String.fromCharCode.apply(String,s);let h="",I=0;for(;I<u;)h+=String.fromCharCode.apply(String,s.slice(I,I+=fe));return h}function oe(s,u,h){let I="";h=Math.min(s.length,h);for(let P=u;P<h;++P)I+=String.fromCharCode(s[P]&127);return I}function ue(s,u,h){let I="";h=Math.min(s.length,h);for(let P=u;P<h;++P)I+=String.fromCharCode(s[P]);return I}function be(s,u,h){let I=s.length;(!u||u<0)&&(u=0),(!h||h<0||h>I)&&(h=I);let P="";for(let F=u;F<h;++F)P+=qt[s[F]];return P}function me(s,u,h){let I=s.slice(u,h),P="";for(let F=0;F<I.length-1;F+=2)P+=String.fromCharCode(I[F]+I[F+1]*256);return P}a.prototype.slice=function(s,u){let h=this.length;s=~~s,u=u===void 0?h:~~u,s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<s&&(u=s);let I=this.subarray(s,u);return Object.setPrototypeOf(I,a.prototype),I};function pe(s,u,h){if(s%1!==0||s<0)throw new RangeError("offset is not uint");if(s+u>h)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,u,h){s=s>>>0,u=u>>>0,h||pe(s,u,this.length);let I=this[s],P=1,F=0;for(;++F<u&&(P*=256);)I+=this[s+F]*P;return I},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,u,h){s=s>>>0,u=u>>>0,h||pe(s,u,this.length);let I=this[s+--u],P=1;for(;u>0&&(P*=256);)I+=this[s+--u]*P;return I},a.prototype.readUint8=a.prototype.readUInt8=function(s,u){return s=s>>>0,u||pe(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||pe(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||pe(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=We(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let I=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,P=this[++s]+this[++s]*2**8+this[++s]*2**16+h*2**24;return BigInt(I)+(BigInt(P)<<BigInt(32))}),a.prototype.readBigUInt64BE=We(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let I=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],P=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h;return(BigInt(I)<<BigInt(32))+BigInt(P)}),a.prototype.readIntLE=function(s,u,h){s=s>>>0,u=u>>>0,h||pe(s,u,this.length);let I=this[s],P=1,F=0;for(;++F<u&&(P*=256);)I+=this[s+F]*P;return P*=128,I>=P&&(I-=Math.pow(2,8*u)),I},a.prototype.readIntBE=function(s,u,h){s=s>>>0,u=u>>>0,h||pe(s,u,this.length);let I=u,P=1,F=this[s+--I];for(;I>0&&(P*=256);)F+=this[s+--I]*P;return P*=128,F>=P&&(F-=Math.pow(2,8*u)),F},a.prototype.readInt8=function(s,u){return s=s>>>0,u||pe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,u){s=s>>>0,u||pe(s,2,this.length);let h=this[s]|this[s+1]<<8;return h&32768?h|4294901760:h},a.prototype.readInt16BE=function(s,u){s=s>>>0,u||pe(s,2,this.length);let h=this[s+1]|this[s]<<8;return h&32768?h|4294901760:h},a.prototype.readInt32LE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=We(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let I=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(h<<24);return(BigInt(I)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=We(function(s){s=s>>>0,b(s,"offset");let u=this[s],h=this[s+7];(u===void 0||h===void 0)&&_(s,this.length-8);let I=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(I)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+h)}),a.prototype.readFloatLE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,u){return s=s>>>0,u||pe(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||pe(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||pe(s,8,this.length),r.read(this,s,!1,52,8)};function R(s,u,h,I,P,F){if(!a.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>P||u<F)throw new RangeError('"value" argument is out of bounds');if(h+I>s.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,u,h,I){if(s=+s,u=u>>>0,h=h>>>0,!I){let G=Math.pow(2,8*h)-1;R(this,s,u,h,G,0)}let P=1,F=0;for(this[u]=s&255;++F<h&&(P*=256);)this[u+F]=s/P&255;return u+h},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,u,h,I){if(s=+s,u=u>>>0,h=h>>>0,!I){let G=Math.pow(2,8*h)-1;R(this,s,u,h,G,0)}let P=h-1,F=1;for(this[u+P]=s&255;--P>=0&&(F*=256);)this[u+P]=s/F&255;return u+h},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,1,255,0),this[u]=s&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function C(s,u,h,I,P){re(u,I,P,s,h,7);let F=Number(u&BigInt(4294967295));s[h++]=F,F=F>>8,s[h++]=F,F=F>>8,s[h++]=F,F=F>>8,s[h++]=F;let G=Number(u>>BigInt(32)&BigInt(4294967295));return s[h++]=G,G=G>>8,s[h++]=G,G=G>>8,s[h++]=G,G=G>>8,s[h++]=G,h}function q(s,u,h,I,P){re(u,I,P,s,h,7);let F=Number(u&BigInt(4294967295));s[h+7]=F,F=F>>8,s[h+6]=F,F=F>>8,s[h+5]=F,F=F>>8,s[h+4]=F;let G=Number(u>>BigInt(32)&BigInt(4294967295));return s[h+3]=G,G=G>>8,s[h+2]=G,G=G>>8,s[h+1]=G,G=G>>8,s[h]=G,h+8}a.prototype.writeBigUInt64LE=We(function(s,u=0){return C(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=We(function(s,u=0){return q(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,u,h,I){if(s=+s,u=u>>>0,!I){let Se=Math.pow(2,8*h-1);R(this,s,u,h,Se-1,-Se)}let P=0,F=1,G=0;for(this[u]=s&255;++P<h&&(F*=256);)s<0&&G===0&&this[u+P-1]!==0&&(G=1),this[u+P]=(s/F>>0)-G&255;return u+h},a.prototype.writeIntBE=function(s,u,h,I){if(s=+s,u=u>>>0,!I){let Se=Math.pow(2,8*h-1);R(this,s,u,h,Se-1,-Se)}let P=h-1,F=1,G=0;for(this[u+P]=s&255;--P>=0&&(F*=256);)s<0&&G===0&&this[u+P+1]!==0&&(G=1),this[u+P]=(s/F>>0)-G&255;return u+h},a.prototype.writeInt8=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},a.prototype.writeInt16LE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeInt16BE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeInt32LE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},a.prototype.writeInt32BE=function(s,u,h){return s=+s,u=u>>>0,h||R(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},a.prototype.writeBigInt64LE=We(function(s,u=0){return C(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=We(function(s,u=0){return q(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(s,u,h,I,P,F){if(h+I>s.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function we(s,u,h,I,P){return u=+u,h=h>>>0,P||J(s,u,h,4),r.write(s,u,h,I,23,4),h+4}a.prototype.writeFloatLE=function(s,u,h){return we(this,s,u,!0,h)},a.prototype.writeFloatBE=function(s,u,h){return we(this,s,u,!1,h)};function ye(s,u,h,I,P){return u=+u,h=h>>>0,P||J(s,u,h,8),r.write(s,u,h,I,52,8),h+8}a.prototype.writeDoubleLE=function(s,u,h){return ye(this,s,u,!0,h)},a.prototype.writeDoubleBE=function(s,u,h){return ye(this,s,u,!1,h)},a.prototype.copy=function(s,u,h,I){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(h||(h=0),!I&&I!==0&&(I=this.length),u>=s.length&&(u=s.length),u||(u=0),I>0&&I<h&&(I=h),I===h||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),s.length-u<I-h&&(I=s.length-u+h);let P=I-h;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,I):Uint8Array.prototype.set.call(s,this.subarray(h,I),u),P},a.prototype.fill=function(s,u,h,I){if(typeof s=="string"){if(typeof u=="string"?(I=u,u=0,h=this.length):typeof h=="string"&&(I=h,h=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(s.length===1){let F=s.charCodeAt(0);(I==="utf8"&&F<128||I==="latin1")&&(s=F)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,s||(s=0);let P;if(typeof s=="number")for(P=u;P<h;++P)this[P]=s;else{let F=a.isBuffer(s)?s:a.from(s,I),G=F.length;if(G===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(P=0;P<h-u;++P)this[P+u]=F[P%G]}return this};var B={};function T(s,u,h){B[s]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${s}]`,this.stack,delete this.name}get code(){return s}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${s}]: ${this.message}`}}}T("ERR_BUFFER_OUT_OF_BOUNDS",function(s){return s?`${s} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),T("ERR_INVALID_ARG_TYPE",function(s,u){return`The "${s}" argument must be of type number. Received type ${typeof u}`},TypeError),T("ERR_OUT_OF_RANGE",function(s,u,h){let I=`The value of "${s}" is out of range.`,P=h;return Number.isInteger(h)&&Math.abs(h)>2**32?P=x(String(h)):typeof h=="bigint"&&(P=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(P=x(P)),P+="n"),I+=` It must be ${u}. Received ${P}`,I},RangeError);function x(s){let u="",h=s.length,I=s[0]==="-"?1:0;for(;h>=I+4;h-=3)u=`_${s.slice(h-3,h)}${u}`;return`${s.slice(0,h)}${u}`}function ne(s,u,h){b(u,"offset"),(s[u]===void 0||s[u+h]===void 0)&&_(u,s.length-(h+1))}function re(s,u,h,I,P,F){if(s>h||s<u){let G=typeof u=="bigint"?"n":"",Se;throw F>3?u===0||u===BigInt(0)?Se=`>= 0${G} and < 2${G} ** ${(F+1)*8}${G}`:Se=`>= -(2${G} ** ${(F+1)*8-1}${G}) and < 2 ** ${(F+1)*8-1}${G}`:Se=`>= ${u}${G} and <= ${h}${G}`,new B.ERR_OUT_OF_RANGE("value",Se,s)}ne(I,P,F)}function b(s,u){if(typeof s!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",s)}function _(s,u,h){throw Math.floor(s)!==s?(b(s,h),new B.ERR_OUT_OF_RANGE(h||"offset","an integer",s)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,s)}var W=/[^+/0-9A-Za-z-_]/g;function X(s){if(s=s.split("=")[0],s=s.trim().replace(W,""),s.length<2)return"";for(;s.length%4!==0;)s=s+"=";return s}function ve(s,u){u=u||1/0;let h,I=s.length,P=null,F=[];for(let G=0;G<I;++G){if(h=s.charCodeAt(G),h>55295&&h<57344){if(!P){if(h>56319){(u-=3)>-1&&F.push(239,191,189);continue}else if(G+1===I){(u-=3)>-1&&F.push(239,191,189);continue}P=h;continue}if(h<56320){(u-=3)>-1&&F.push(239,191,189),P=h;continue}h=(P-55296<<10|h-56320)+65536}else P&&(u-=3)>-1&&F.push(239,191,189);if(P=null,h<128){if((u-=1)<0)break;F.push(h)}else if(h<2048){if((u-=2)<0)break;F.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;F.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;F.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return F}function ge(s){let u=[];for(let h=0;h<s.length;++h)u.push(s.charCodeAt(h)&255);return u}function U(s,u){let h,I,P,F=[];for(let G=0;G<s.length&&!((u-=2)<0);++G)h=s.charCodeAt(G),I=h>>8,P=h%256,F.push(P),F.push(I);return F}function xe(s){return t.toByteArray(X(s))}function Ke(s,u,h,I){let P;for(P=0;P<I&&!(P+h>=u.length||P>=s.length);++P)u[P+h]=s[P];return P}function $e(s,u){return s instanceof u||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===u.name}function ot(s){return s!==s}var qt=function(){let s="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let I=h*16;for(let P=0;P<16;++P)u[I+P]=s[h]+s[P]}return u}();function We(s){return typeof BigInt>"u"?St:s}function St(){throw new Error("BigInt not supported")}}),se,he,ct,te=ii(()=>{se=He(xt(),1),he={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},ct=globalThis}),Wt=le((e,t)=>{te();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(E,L,M){return Function.prototype.apply.call(E,L,M)},o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:o=function(E){return Object.getOwnPropertyNames(E)};function i(E){console&&console.warn&&console.warn(E)}var l=Number.isNaN||function(E){return E!==E};function a(){a.init.call(this)}t.exports=a,t.exports.once=A,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var f=10;function d(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");f=E}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function y(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}a.prototype.getMaxListeners=function(){return y(this)},a.prototype.emit=function(E){for(var L=[],M=1;M<arguments.length;M++)L.push(arguments[M]);var $=E==="error",D=this._events;if(D!==void 0)$=$&&D.error===void 0;else if(!$)return!1;if($){var N;if(L.length>0&&(N=L[0]),N instanceof Error)throw N;var z=new Error("Unhandled error."+(N?" ("+N.message+")":""));throw z.context=N,z}var Y=D[E];if(Y===void 0)return!1;if(typeof Y=="function")n(Y,this,L);else for(var K=Y.length,fe=g(Y,K),M=0;M<K;++M)n(fe[M],this,L);return!0};function w(E,L,M,$){var D,N,z;if(d(M),N=E._events,N===void 0?(N=E._events=Object.create(null),E._eventsCount=0):(N.newListener!==void 0&&(E.emit("newListener",L,M.listener?M.listener:M),N=E._events),z=N[L]),z===void 0)z=N[L]=M,++E._eventsCount;else if(typeof z=="function"?z=N[L]=$?[M,z]:[z,M]:$?z.unshift(M):z.push(M),D=y(E),D>0&&z.length>D&&!z.warned){z.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=E,Y.type=L,Y.count=z.length,i(Y)}return E}a.prototype.addListener=function(E,L){return w(this,E,L,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(E,L){return w(this,E,L,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(E,L,M){var $={fired:!1,wrapFn:void 0,target:E,type:L,listener:M},D=m.bind($);return D.listener=M,$.wrapFn=D,D}a.prototype.once=function(E,L){return d(L),this.on(E,S(this,E,L)),this},a.prototype.prependOnceListener=function(E,L){return d(L),this.prependListener(E,S(this,E,L)),this},a.prototype.removeListener=function(E,L){var M,$,D,N,z;if(d(L),$=this._events,$===void 0)return this;if(M=$[E],M===void 0)return this;if(M===L||M.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete $[E],$.removeListener&&this.emit("removeListener",E,M.listener||L));else if(typeof M!="function"){for(D=-1,N=M.length-1;N>=0;N--)if(M[N]===L||M[N].listener===L){z=M[N].listener,D=N;break}if(D<0)return this;D===0?M.shift():k(M,D),M.length===1&&($[E]=M[0]),$.removeListener!==void 0&&this.emit("removeListener",E,z||L)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(E){var L,M,$;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[E]),this;if(arguments.length===0){var D=Object.keys(M),N;for($=0;$<D.length;++$)N=D[$],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=M[E],typeof L=="function")this.removeListener(E,L);else if(L!==void 0)for($=L.length-1;$>=0;$--)this.removeListener(E,L[$]);return this};function c(E,L,M){var $=E._events;if($===void 0)return[];var D=$[L];return D===void 0?[]:typeof D=="function"?M?[D.listener||D]:[D]:M?v(D):g(D,D.length)}a.prototype.listeners=function(E){return c(this,E,!0)},a.prototype.rawListeners=function(E){return c(this,E,!1)},a.listenerCount=function(E,L){return typeof E.listenerCount=="function"?E.listenerCount(L):p.call(E,L)},a.prototype.listenerCount=p;function p(E){var L=this._events;if(L!==void 0){var M=L[E];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function g(E,L){for(var M=new Array(L),$=0;$<L;++$)M[$]=E[$];return M}function k(E,L){for(;L+1<E.length;L++)E[L]=E[L+1];E.pop()}function v(E){for(var L=new Array(E.length),M=0;M<L.length;++M)L[M]=E[M].listener||E[M];return L}function A(E,L){return new Promise(function(M,$){function D(z){E.removeListener(L,N),$(z)}function N(){typeof E.removeListener=="function"&&E.removeListener("error",D),M([].slice.call(arguments))}j(E,L,N,{once:!0}),L!=="error"&&O(E,D,{once:!0})})}function O(E,L,M){typeof E.on=="function"&&j(E,"error",L,M)}function j(E,L,M,$){if(typeof E.on=="function")$.once?E.once(L,M):E.on(L,M);else if(typeof E.addEventListener=="function")E.addEventListener(L,function D(N){$.once&&E.removeEventListener(L,D),M(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}}),en=le((e,t)=>{te(),t.exports=Wt().EventEmitter}),tn=le(()=>{te()}),li=le((e,t)=>{te();function r(c,p){var g=Object.keys(c);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(c);p&&(k=k.filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable})),g.push.apply(g,k)}return g}function n(c){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?r(Object(g),!0).forEach(function(k){o(c,k,g[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(g)):r(Object(g)).forEach(function(k){Object.defineProperty(c,k,Object.getOwnPropertyDescriptor(g,k))})}return c}function o(c,p,g){return p in c?Object.defineProperty(c,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[p]=g,c}function i(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function l(c,p){for(var g=0;g<p.length;g++){var k=p[g];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(c,k.key,k)}}function a(c,p,g){return p&&l(c.prototype,p),g&&l(c,g),c}var f=xt(),d=f.Buffer,y=tn(),w=y.inspect,m=w&&w.custom||"inspect";function S(c,p,g){d.prototype.copy.call(c,p,g)}t.exports=function(){function c(){i(this,c),this.head=null,this.tail=null,this.length=0}return a(c,[{key:"push",value:function(p){var g={data:p,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(p){var g={data:p,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var g=this.head,k=""+g.data;g=g.next;)k+=p+g.data;return k}},{key:"concat",value:function(p){if(this.length===0)return d.alloc(0);for(var g=d.allocUnsafe(p>>>0),k=this.head,v=0;k;)S(k.data,g,v),v+=k.data.length,k=k.next;return g}},{key:"consume",value:function(p,g){var k;return p<this.head.data.length?(k=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?k=this.shift():k=g?this._getString(p):this._getBuffer(p),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var g=this.head,k=1,v=g.data;for(p-=v.length;g=g.next;){var A=g.data,O=p>A.length?A.length:p;if(O===A.length?v+=A:v+=A.slice(0,p),p-=O,p===0){O===A.length?(++k,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=A.slice(O));break}++k}return this.length-=k,v}},{key:"_getBuffer",value:function(p){var g=d.allocUnsafe(p),k=this.head,v=1;for(k.data.copy(g),p-=k.data.length;k=k.next;){var A=k.data,O=p>A.length?A.length:p;if(A.copy(g,g.length-p,0,O),p-=O,p===0){O===A.length?(++v,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=A.slice(O));break}++v}return this.length-=v,g}},{key:m,value:function(p,g){return w(this,n({},g,{depth:0,customInspect:!1}))}}]),c}()}),rn=le((e,t)=>{te();function r(f,d){var y=this,w=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return w||m?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,he.nextTick(l,this,f)):he.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(S){!d&&S?y._writableState?y._writableState.errorEmitted?he.nextTick(o,y):(y._writableState.errorEmitted=!0,he.nextTick(n,y,S)):he.nextTick(n,y,S):d?(he.nextTick(o,y),d(S)):he.nextTick(o,y)}),this)}function n(f,d){l(f,d),o(f)}function o(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function a(f,d){var y=f._readableState,w=f._writableState;y&&y.autoDestroy||w&&w.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:i,errorOrDestroy:a}}),_t=le((e,t)=>{te();function r(d,y){d.prototype=Object.create(y.prototype),d.prototype.constructor=d,d.__proto__=y}var n={};function o(d,y,w){w||(w=Error);function m(c,p,g){return typeof y=="string"?y:y(c,p,g)}var S=function(c){r(p,c);function p(g,k,v){return c.call(this,m(g,k,v))||this}return p}(w);S.prototype.name=w.name,S.prototype.code=d,n[d]=S}function i(d,y){if(Array.isArray(d)){var w=d.length;return d=d.map(function(m){return String(m)}),w>2?"one of ".concat(y," ").concat(d.slice(0,w-1).join(", "),", or ")+d[w-1]:w===2?"one of ".concat(y," ").concat(d[0]," or ").concat(d[1]):"of ".concat(y," ").concat(d[0])}else return"of ".concat(y," ").concat(String(d))}function l(d,y,w){return d.substr(!w||w<0?0:+w,y.length)===y}function a(d,y,w){return(w===void 0||w>d.length)&&(w=d.length),d.substring(w-y.length,w)===y}function f(d,y,w){return typeof w!="number"&&(w=0),w+y.length>d.length?!1:d.indexOf(y,w)!==-1}o("ERR_INVALID_OPT_VALUE",function(d,y){return'The value "'+y+'" is invalid for option "'+d+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(d,y,w){var m;typeof y=="string"&&l(y,"not ")?(m="must not be",y=y.replace(/^not /,"")):m="must be";var S;if(a(d," argument"))S="The ".concat(d," ").concat(m," ").concat(i(y,"type"));else{var c=f(d,".")?"property":"argument";S='The "'.concat(d,'" ').concat(c," ").concat(m," ").concat(i(y,"type"))}return S+=". Received type ".concat(typeof w),S},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),nn=le((e,t)=>{te();var r=_t().codes.ERR_INVALID_OPT_VALUE;function n(i,l,a){return i.highWaterMark!=null?i.highWaterMark:l?i[a]:null}function o(i,l,a,f){var d=n(l,f,a);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var y=f?a:"highWaterMark";throw new r(y,d)}return Math.floor(d)}return i.objectMode?16:16*1024}t.exports={getHighWaterMark:o}}),ht=le((e,t)=>{te(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var o=function(){};o.prototype=n.prototype,r.prototype=new o,r.prototype.constructor=r}}}),ui=le((e,t)=>{te(),t.exports=r;function r(o,i){if(n("noDeprecation"))return o;var l=!1;function a(){if(!l){if(n("throwDeprecation"))throw new Error(i);n("traceDeprecation")?console.trace(i):console.warn(i),l=!0}return o.apply(this,arguments)}return a}function n(o){try{if(!ct.localStorage)return!1}catch{return!1}var i=ct.localStorage[o];return i==null?!1:String(i).toLowerCase()==="true"}}),on=le((e,t)=>{te(),t.exports=D;function r(B){var T=this;this.next=null,this.entry=null,this.finish=function(){ye(T,B)}}var n;D.WritableState=M;var o={deprecate:ui()},i=en(),l=xt().Buffer,a=ct.Uint8Array||function(){};function f(B){return l.from(B)}function d(B){return l.isBuffer(B)||B instanceof a}var y=rn(),w=nn(),m=w.getHighWaterMark,S=_t().codes,c=S.ERR_INVALID_ARG_TYPE,p=S.ERR_METHOD_NOT_IMPLEMENTED,g=S.ERR_MULTIPLE_CALLBACK,k=S.ERR_STREAM_CANNOT_PIPE,v=S.ERR_STREAM_DESTROYED,A=S.ERR_STREAM_NULL_VALUES,O=S.ERR_STREAM_WRITE_AFTER_END,j=S.ERR_UNKNOWN_ENCODING,E=y.errorOrDestroy;ht()(D,i);function L(){}function M(B,T,x){n=n||vt(),B=B||{},typeof x!="boolean"&&(x=T instanceof n),this.objectMode=!!B.objectMode,x&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=m(this,B,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=B.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(re){ue(T,re)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var B=this.bufferedRequest,T=[];B;)T.push(B),B=B.next;return T},function(){try{Object.defineProperty(M.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var $;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(B){return $.call(this,B)?!0:this!==D?!1:B&&B._writableState instanceof M}})):$=function(B){return B instanceof this};function D(B){n=n||vt();var T=this instanceof n;if(!T&&!$.call(D,this))return new D(B);this._writableState=new M(B,this,T),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),i.call(this)}D.prototype.pipe=function(){E(this,new k)};function N(B,T){var x=new O;E(B,x),he.nextTick(T,x)}function z(B,T,x,ne){var re;return x===null?re=new A:typeof x!="string"&&!T.objectMode&&(re=new c("chunk",["string","Buffer"],x)),re?(E(B,re),he.nextTick(ne,re),!1):!0}D.prototype.write=function(B,T,x){var ne=this._writableState,re=!1,b=!ne.objectMode&&d(B);return b&&!l.isBuffer(B)&&(B=f(B)),typeof T=="function"&&(x=T,T=null),b?T="buffer":T||(T=ne.defaultEncoding),typeof x!="function"&&(x=L),ne.ending?N(this,x):(b||z(this,ne,B,x))&&(ne.pendingcb++,re=K(this,ne,b,B,T,x)),re},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&pe(this,B))},D.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new j(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Y(B,T,x){return!B.objectMode&&B.decodeStrings!==!1&&typeof T=="string"&&(T=l.from(T,x)),T}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function K(B,T,x,ne,re,b){if(!x){var _=Y(T,ne,re);ne!==_&&(x=!0,re="buffer",ne=_)}var W=T.objectMode?1:ne.length;T.length+=W;var X=T.length<T.highWaterMark;if(X||(T.needDrain=!0),T.writing||T.corked){var ve=T.lastBufferedRequest;T.lastBufferedRequest={chunk:ne,encoding:re,isBuf:x,callback:b,next:null},ve?ve.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else fe(B,T,!1,W,ne,re,b);return X}function fe(B,T,x,ne,re,b,_){T.writelen=ne,T.writecb=_,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new v("write")):x?B._writev(re,T.onwrite):B._write(re,b,T.onwrite),T.sync=!1}function ie(B,T,x,ne,re){--T.pendingcb,x?(he.nextTick(re,ne),he.nextTick(J,B,T),B._writableState.errorEmitted=!0,E(B,ne)):(re(ne),B._writableState.errorEmitted=!0,E(B,ne),J(B,T))}function oe(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function ue(B,T){var x=B._writableState,ne=x.sync,re=x.writecb;if(typeof re!="function")throw new g;if(oe(x),T)ie(B,x,ne,T,re);else{var b=R(x)||B.destroyed;!b&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&pe(B,x),ne?he.nextTick(be,B,x,b,re):be(B,x,b,re)}}function be(B,T,x,ne){x||me(B,T),T.pendingcb--,ne(),J(B,T)}function me(B,T){T.length===0&&T.needDrain&&(T.needDrain=!1,B.emit("drain"))}function pe(B,T){T.bufferProcessing=!0;var x=T.bufferedRequest;if(B._writev&&x&&x.next){var ne=T.bufferedRequestCount,re=new Array(ne),b=T.corkedRequestsFree;b.entry=x;for(var _=0,W=!0;x;)re[_]=x,x.isBuf||(W=!1),x=x.next,_+=1;re.allBuffers=W,fe(B,T,!0,T.length,re,"",b.finish),T.pendingcb++,T.lastBufferedRequest=null,b.next?(T.corkedRequestsFree=b.next,b.next=null):T.corkedRequestsFree=new r(T),T.bufferedRequestCount=0}else{for(;x;){var X=x.chunk,ve=x.encoding,ge=x.callback,U=T.objectMode?1:X.length;if(fe(B,T,!1,U,X,ve,ge),x=x.next,T.bufferedRequestCount--,T.writing)break}x===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=x,T.bufferProcessing=!1}D.prototype._write=function(B,T,x){x(new p("_write()"))},D.prototype._writev=null,D.prototype.end=function(B,T,x){var ne=this._writableState;return typeof B=="function"?(x=B,B=null,T=null):typeof T=="function"&&(x=T,T=null),B!=null&&this.write(B,T),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||we(this,ne,x),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function R(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function C(B,T){B._final(function(x){T.pendingcb--,x&&E(B,x),T.prefinished=!0,B.emit("prefinish"),J(B,T)})}function q(B,T){!T.prefinished&&!T.finalCalled&&(typeof B._final=="function"&&!T.destroyed?(T.pendingcb++,T.finalCalled=!0,he.nextTick(C,B,T)):(T.prefinished=!0,B.emit("prefinish")))}function J(B,T){var x=R(T);if(x&&(q(B,T),T.pendingcb===0&&(T.finished=!0,B.emit("finish"),T.autoDestroy))){var ne=B._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&B.destroy()}return x}function we(B,T,x){T.ending=!0,J(B,T),x&&(T.finished?he.nextTick(x):B.once("finish",x)),T.ended=!0,B.writable=!1}function ye(B,T,x){var ne=B.entry;for(B.entry=null;ne;){var re=ne.callback;T.pendingcb--,re(x),ne=ne.next}T.corkedRequestsFree.next=B}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){!this._writableState||(this._writableState.destroyed=B)}}),D.prototype.destroy=y.destroy,D.prototype._undestroy=y.undestroy,D.prototype._destroy=function(B,T){T(B)}}),vt=le((e,t)=>{te();var r=Object.keys||function(w){var m=[];for(var S in w)m.push(S);return m};t.exports=f;var n=an(),o=on();for(ht()(f,n),i=r(o.prototype),a=0;a<i.length;a++)l=i[a],f.prototype[l]||(f.prototype[l]=o.prototype[l]);var i,l,a;function f(w){if(!(this instanceof f))return new f(w);n.call(this,w),o.call(this,w),this.allowHalfOpen=!0,w&&(w.readable===!1&&(this.readable=!1),w.writable===!1&&(this.writable=!1),w.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||he.nextTick(y,this)}function y(w){w.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(w){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=w,this._writableState.destroyed=w)}})}),fi=le((e,t)=>{te();var r=xt(),n=r.Buffer;function o(l,a){for(var f in l)a[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=i);function i(l,a,f){return n(l,a,f)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(l,a,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,a,f)},i.alloc=function(l,a,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return a!==void 0?typeof f=="string"?d.fill(a,f):d.fill(a):d.fill(0),d},i.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},i.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),Or=le(e=>{te();var t=fi().Buffer,r=t.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(v){if(!v)return"utf8";for(var A;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(A)return;v=(""+v).toLowerCase(),A=!0}}function o(v){var A=n(v);if(typeof A!="string"&&(t.isEncoding===r||!r(v)))throw new Error("Unknown encoding: "+v);return A||v}e.StringDecoder=i;function i(v){this.encoding=o(v);var A;switch(this.encoding){case"utf16le":this.text=m,this.end=S,A=4;break;case"utf8":this.fillLast=d,A=4;break;case"base64":this.text=c,this.end=p,A=3;break;default:this.write=g,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(A)}i.prototype.write=function(v){if(v.length===0)return"";var A,O;if(this.lastNeed){if(A=this.fillLast(v),A===void 0)return"";O=this.lastNeed,this.lastNeed=0}else O=0;return O<v.length?A?A+this.text(v,O):this.text(v,O):A||""},i.prototype.end=w,i.prototype.text=y,i.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function l(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function a(v,A,O){var j=A.length-1;if(j<O)return 0;var E=l(A[j]);return E>=0?(E>0&&(v.lastNeed=E-1),E):--j<O||E===-2?0:(E=l(A[j]),E>=0?(E>0&&(v.lastNeed=E-2),E):--j<O||E===-2?0:(E=l(A[j]),E>=0?(E>0&&(E===2?E=0:v.lastNeed=E-3),E):0))}function f(v,A,O){if((A[0]&192)!==128)return v.lastNeed=0,"�";if(v.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return v.lastNeed=1,"�";if(v.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return v.lastNeed=2,"�"}}function d(v){var A=this.lastTotal-this.lastNeed,O=f(this,v);if(O!==void 0)return O;if(this.lastNeed<=v.length)return v.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,A,0,v.length),this.lastNeed-=v.length}function y(v,A){var O=a(this,v,A);if(!this.lastNeed)return v.toString("utf8",A);this.lastTotal=O;var j=v.length-(O-this.lastNeed);return v.copy(this.lastChar,0,j),v.toString("utf8",A,j)}function w(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+"�":A}function m(v,A){if((v.length-A)%2===0){var O=v.toString("utf16le",A);if(O){var j=O.charCodeAt(O.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],O.slice(0,-1)}return O}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",A,v.length-1)}function S(v){var A=v&&v.length?this.write(v):"";if(this.lastNeed){var O=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,O)}return A}function c(v,A){var O=(v.length-A)%3;return O===0?v.toString("base64",A):(this.lastNeed=3-O,this.lastTotal=3,O===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",A,v.length-O))}function p(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function g(v){return v.toString(this.encoding)}function k(v){return v&&v.length?this.write(v):""}}),gr=le((e,t)=>{te();var r=_t().codes.ERR_STREAM_PREMATURE_CLOSE;function n(a){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,y=new Array(d),w=0;w<d;w++)y[w]=arguments[w];a.apply(this,y)}}}function o(){}function i(a){return a.setHeader&&typeof a.abort=="function"}function l(a,f,d){if(typeof f=="function")return l(a,null,f);f||(f={}),d=n(d||o);var y=f.readable||f.readable!==!1&&a.readable,w=f.writable||f.writable!==!1&&a.writable,m=function(){a.writable||c()},S=a._writableState&&a._writableState.finished,c=function(){w=!1,S=!0,y||d.call(a)},p=a._readableState&&a._readableState.endEmitted,g=function(){y=!1,p=!0,w||d.call(a)},k=function(O){d.call(a,O)},v=function(){var O;if(y&&!p)return(!a._readableState||!a._readableState.ended)&&(O=new r),d.call(a,O);if(w&&!S)return(!a._writableState||!a._writableState.ended)&&(O=new r),d.call(a,O)},A=function(){a.req.on("finish",c)};return i(a)?(a.on("complete",c),a.on("abort",v),a.req?A():a.on("request",A)):w&&!a._writableState&&(a.on("end",m),a.on("close",m)),a.on("end",g),a.on("finish",c),f.error!==!1&&a.on("error",k),a.on("close",v),function(){a.removeListener("complete",c),a.removeListener("abort",v),a.removeListener("request",A),a.req&&a.req.removeListener("finish",c),a.removeListener("end",m),a.removeListener("close",m),a.removeListener("finish",c),a.removeListener("end",g),a.removeListener("error",k),a.removeListener("close",v)}}t.exports=l}),ci=le((e,t)=>{te();var r;function n(A,O,j){return O in A?Object.defineProperty(A,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):A[O]=j,A}var o=gr(),i=Symbol("lastResolve"),l=Symbol("lastReject"),a=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),y=Symbol("handlePromise"),w=Symbol("stream");function m(A,O){return{value:A,done:O}}function S(A){var O=A[i];if(O!==null){var j=A[w].read();j!==null&&(A[d]=null,A[i]=null,A[l]=null,O(m(j,!1)))}}function c(A){he.nextTick(S,A)}function p(A,O){return function(j,E){A.then(function(){if(O[f]){j(m(void 0,!0));return}O[y](j,E)},E)}}var g=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((r={get stream(){return this[w]},next:function(){var A=this,O=this[a];if(O!==null)return Promise.reject(O);if(this[f])return Promise.resolve(m(void 0,!0));if(this[w].destroyed)return new Promise(function(M,$){he.nextTick(function(){A[a]?$(A[a]):M(m(void 0,!0))})});var j=this[d],E;if(j)E=new Promise(p(j,this));else{var L=this[w].read();if(L!==null)return Promise.resolve(m(L,!1));E=new Promise(this[y])}return this[d]=E,E}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var A=this;return new Promise(function(O,j){A[w].destroy(null,function(E){if(E){j(E);return}O(m(void 0,!0))})})}),r),g),v=function(A){var O,j=Object.create(k,(O={},n(O,w,{value:A,writable:!0}),n(O,i,{value:null,writable:!0}),n(O,l,{value:null,writable:!0}),n(O,a,{value:null,writable:!0}),n(O,f,{value:A._readableState.endEmitted,writable:!0}),n(O,y,{value:function(E,L){var M=j[w].read();M?(j[d]=null,j[i]=null,j[l]=null,E(m(M,!1))):(j[i]=E,j[l]=L)},writable:!0}),O));return j[d]=null,o(A,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=j[l];L!==null&&(j[d]=null,j[i]=null,j[l]=null,L(E)),j[a]=E;return}var M=j[i];M!==null&&(j[d]=null,j[i]=null,j[l]=null,M(m(void 0,!0))),j[f]=!0}),A.on("readable",c.bind(null,j)),j};t.exports=v}),hi=le((e,t)=>{te(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),an=le((e,t)=>{te(),t.exports=N;var r;N.ReadableState=D,Wt().EventEmitter;var n=function(b,_){return b.listeners(_).length},o=en(),i=xt().Buffer,l=ct.Uint8Array||function(){};function a(b){return i.from(b)}function f(b){return i.isBuffer(b)||b instanceof l}var d=tn(),y;d&&d.debuglog?y=d.debuglog("stream"):y=function(){};var w=li(),m=rn(),S=nn(),c=S.getHighWaterMark,p=_t().codes,g=p.ERR_INVALID_ARG_TYPE,k=p.ERR_STREAM_PUSH_AFTER_EOF,v=p.ERR_METHOD_NOT_IMPLEMENTED,A=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,j,E;ht()(N,o);var L=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function $(b,_,W){if(typeof b.prependListener=="function")return b.prependListener(_,W);!b._events||!b._events[_]?b.on(_,W):Array.isArray(b._events[_])?b._events[_].unshift(W):b._events[_]=[W,b._events[_]]}function D(b,_,W){r=r||vt(),b=b||{},typeof W!="boolean"&&(W=_ instanceof r),this.objectMode=!!b.objectMode,W&&(this.objectMode=this.objectMode||!!b.readableObjectMode),this.highWaterMark=c(this,b,"readableHighWaterMark",W),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.destroyed=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(O||(O=Or().StringDecoder),this.decoder=new O(b.encoding),this.encoding=b.encoding)}function N(b){if(r=r||vt(),!(this instanceof N))return new N(b);var _=this instanceof r;this._readableState=new D(b,this,_),this.readable=!0,b&&(typeof b.read=="function"&&(this._read=b.read),typeof b.destroy=="function"&&(this._destroy=b.destroy)),o.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(b){!this._readableState||(this._readableState.destroyed=b)}}),N.prototype.destroy=m.destroy,N.prototype._undestroy=m.undestroy,N.prototype._destroy=function(b,_){_(b)},N.prototype.push=function(b,_){var W=this._readableState,X;return W.objectMode?X=!0:typeof b=="string"&&(_=_||W.defaultEncoding,_!==W.encoding&&(b=i.from(b,_),_=""),X=!0),z(this,b,_,!1,X)},N.prototype.unshift=function(b){return z(this,b,null,!0,!1)};function z(b,_,W,X,ve){y("readableAddChunk",_);var ge=b._readableState;if(_===null)ge.reading=!1,ue(b,ge);else{var U;if(ve||(U=K(ge,_)),U)L(b,U);else if(ge.objectMode||_&&_.length>0)if(typeof _!="string"&&!ge.objectMode&&Object.getPrototypeOf(_)!==i.prototype&&(_=a(_)),X)ge.endEmitted?L(b,new A):Y(b,ge,_,!0);else if(ge.ended)L(b,new k);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!W?(_=ge.decoder.write(_),ge.objectMode||_.length!==0?Y(b,ge,_,!1):pe(b,ge)):Y(b,ge,_,!1)}else X||(ge.reading=!1,pe(b,ge))}return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function Y(b,_,W,X){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,b.emit("data",W)):(_.length+=_.objectMode?1:W.length,X?_.buffer.unshift(W):_.buffer.push(W),_.needReadable&&be(b)),pe(b,_)}function K(b,_){var W;return!f(_)&&typeof _!="string"&&_!==void 0&&!b.objectMode&&(W=new g("chunk",["string","Buffer","Uint8Array"],_)),W}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(b){O||(O=Or().StringDecoder);var _=new O(b);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,X="";W!==null;)X+=_.write(W.data),W=W.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var fe=1073741824;function ie(b){return b>=fe?b=fe:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++),b}function oe(b,_){return b<=0||_.length===0&&_.ended?0:_.objectMode?1:b!==b?_.flowing&&_.length?_.buffer.head.data.length:_.length:(b>_.highWaterMark&&(_.highWaterMark=ie(b)),b<=_.length?b:_.ended?_.length:(_.needReadable=!0,0))}N.prototype.read=function(b){y("read",b),b=parseInt(b,10);var _=this._readableState,W=b;if(b!==0&&(_.emittedReadable=!1),b===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return y("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?x(this):be(this),null;if(b=oe(b,_),b===0&&_.ended)return _.length===0&&x(this),null;var X=_.needReadable;y("need readable",X),(_.length===0||_.length-b<_.highWaterMark)&&(X=!0,y("length less than watermark",X)),_.ended||_.reading?(X=!1,y("reading or ended",X)):X&&(y("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(b=oe(W,_)));var ve;return b>0?ve=T(b,_):ve=null,ve===null?(_.needReadable=_.length<=_.highWaterMark,b=0):(_.length-=b,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),W!==b&&_.ended&&x(this)),ve!==null&&this.emit("data",ve),ve};function ue(b,_){if(y("onEofChunk"),!_.ended){if(_.decoder){var W=_.decoder.end();W&&W.length&&(_.buffer.push(W),_.length+=_.objectMode?1:W.length)}_.ended=!0,_.sync?be(b):(_.needReadable=!1,_.emittedReadable||(_.emittedReadable=!0,me(b)))}}function be(b){var _=b._readableState;y("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(y("emitReadable",_.flowing),_.emittedReadable=!0,he.nextTick(me,b))}function me(b){var _=b._readableState;y("emitReadable_",_.destroyed,_.length,_.ended),!_.destroyed&&(_.length||_.ended)&&(b.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,B(b)}function pe(b,_){_.readingMore||(_.readingMore=!0,he.nextTick(R,b,_))}function R(b,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var W=_.length;if(y("maybeReadMore read 0"),b.read(0),W===_.length)break}_.readingMore=!1}N.prototype._read=function(b){L(this,new v("_read()"))},N.prototype.pipe=function(b,_){var W=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=b;break;case 1:X.pipes=[X.pipes,b];break;default:X.pipes.push(b);break}X.pipesCount+=1,y("pipe count=%d opts=%j",X.pipesCount,_);var ve=(!_||_.end!==!1)&&b!==he.stdout&&b!==he.stderr,ge=ve?xe:u;X.endEmitted?he.nextTick(ge):W.once("end",ge),b.on("unpipe",U);function U(h,I){y("onunpipe"),h===W&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,ot())}function xe(){y("onend"),b.end()}var Ke=C(W);b.on("drain",Ke);var $e=!1;function ot(){y("cleanup"),b.removeListener("close",St),b.removeListener("finish",s),b.removeListener("drain",Ke),b.removeListener("error",We),b.removeListener("unpipe",U),W.removeListener("end",xe),W.removeListener("end",u),W.removeListener("data",qt),$e=!0,X.awaitDrain&&(!b._writableState||b._writableState.needDrain)&&Ke()}W.on("data",qt);function qt(h){y("ondata");var I=b.write(h);y("dest.write",I),I===!1&&((X.pipesCount===1&&X.pipes===b||X.pipesCount>1&&re(X.pipes,b)!==-1)&&!$e&&(y("false write response, pause",X.awaitDrain),X.awaitDrain++),W.pause())}function We(h){y("onerror",h),u(),b.removeListener("error",We),n(b,"error")===0&&L(b,h)}$(b,"error",We);function St(){b.removeListener("finish",s),u()}b.once("close",St);function s(){y("onfinish"),b.removeListener("close",St),u()}b.once("finish",s);function u(){y("unpipe"),W.unpipe(b)}return b.emit("pipe",W),X.flowing||(y("pipe resume"),W.resume()),b};function C(b){return function(){var _=b._readableState;y("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n(b,"data")&&(_.flowing=!0,B(b))}}N.prototype.unpipe=function(b){var _=this._readableState,W={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return b&&b!==_.pipes?this:(b||(b=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,b&&b.emit("unpipe",this,W),this);if(!b){var X=_.pipes,ve=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var ge=0;ge<ve;ge++)X[ge].emit("unpipe",this,{hasUnpiped:!1});return this}var U=re(_.pipes,b);return U===-1?this:(_.pipes.splice(U,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),b.emit("unpipe",this,W),this)},N.prototype.on=function(b,_){var W=o.prototype.on.call(this,b,_),X=this._readableState;return b==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):b==="readable"&&!X.endEmitted&&!X.readableListening&&(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,y("on readable",X.length,X.reading),X.length?be(this):X.reading||he.nextTick(J,this)),W},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(b,_){var W=o.prototype.removeListener.call(this,b,_);return b==="readable"&&he.nextTick(q,this),W},N.prototype.removeAllListeners=function(b){var _=o.prototype.removeAllListeners.apply(this,arguments);return(b==="readable"||b===void 0)&&he.nextTick(q,this),_};function q(b){var _=b._readableState;_.readableListening=b.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:b.listenerCount("data")>0&&b.resume()}function J(b){y("readable nexttick read 0"),b.read(0)}N.prototype.resume=function(){var b=this._readableState;return b.flowing||(y("resume"),b.flowing=!b.readableListening,we(this,b)),b.paused=!1,this};function we(b,_){_.resumeScheduled||(_.resumeScheduled=!0,he.nextTick(ye,b,_))}function ye(b,_){y("resume",_.reading),_.reading||b.read(0),_.resumeScheduled=!1,b.emit("resume"),B(b),_.flowing&&!_.reading&&b.read(0)}N.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function B(b){var _=b._readableState;for(y("flow",_.flowing);_.flowing&&b.read()!==null;);}N.prototype.wrap=function(b){var _=this,W=this._readableState,X=!1;b.on("end",function(){if(y("wrapped end"),W.decoder&&!W.ended){var U=W.decoder.end();U&&U.length&&_.push(U)}_.push(null)}),b.on("data",function(U){if(y("wrapped data"),W.decoder&&(U=W.decoder.write(U)),!(W.objectMode&&U==null)&&!(!W.objectMode&&(!U||!U.length))){var xe=_.push(U);xe||(X=!0,b.pause())}});for(var ve in b)this[ve]===void 0&&typeof b[ve]=="function"&&(this[ve]=function(U){return function(){return b[U].apply(b,arguments)}}(ve));for(var ge=0;ge<M.length;ge++)b.on(M[ge],this.emit.bind(this,M[ge]));return this._read=function(U){y("wrapped _read",U),X&&(X=!1,b.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return j===void 0&&(j=ci()),j(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}}),N._fromList=T,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function T(b,_){if(_.length===0)return null;var W;return _.objectMode?W=_.buffer.shift():!b||b>=_.length?(_.decoder?W=_.buffer.join(""):_.buffer.length===1?W=_.buffer.first():W=_.buffer.concat(_.length),_.buffer.clear()):W=_.buffer.consume(b,_.decoder),W}function x(b){var _=b._readableState;y("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,he.nextTick(ne,_,b))}function ne(b,_){if(y("endReadableNT",b.endEmitted,b.length),!b.endEmitted&&b.length===0&&(b.endEmitted=!0,_.readable=!1,_.emit("end"),b.autoDestroy)){var W=_._writableState;(!W||W.autoDestroy&&W.finished)&&_.destroy()}}typeof Symbol=="function"&&(N.from=function(b,_){return E===void 0&&(E=hi()),E(N,b,_)});function re(b,_){for(var W=0,X=b.length;W<X;W++)if(b[W]===_)return W;return-1}}),sn=le((e,t)=>{te(),t.exports=d;var r=_t().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,a=vt();ht()(d,a);function f(m,S){var c=this._transformState;c.transforming=!1;var p=c.writecb;if(p===null)return this.emit("error",new o);c.writechunk=null,c.writecb=null,S!=null&&this.push(S),p(m);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function d(m){if(!(this instanceof d))return new d(m);a.call(this,m),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",y)}function y(){var m=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,c){w(m,S,c)}):w(this,null,null)}d.prototype.push=function(m,S){return this._transformState.needTransform=!1,a.prototype.push.call(this,m,S)},d.prototype._transform=function(m,S,c){c(new n("_transform()"))},d.prototype._write=function(m,S,c){var p=this._transformState;if(p.writecb=c,p.writechunk=m,p.writeencoding=S,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},d.prototype._read=function(m){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},d.prototype._destroy=function(m,S){a.prototype._destroy.call(this,m,function(c){S(c)})};function w(m,S,c){if(S)return m.emit("error",S);if(c!=null&&m.push(c),m._writableState.length)throw new l;if(m._transformState.transforming)throw new i;return m.push(null)}}),di=le((e,t)=>{te(),t.exports=n;var r=sn();ht()(n,r);function n(o){if(!(this instanceof n))return new n(o);r.call(this,o)}n.prototype._transform=function(o,i,l){l(null,o)}}),pi=le((e,t)=>{te();var r;function n(c){var p=!1;return function(){p||(p=!0,c.apply(void 0,arguments))}}var o=_t().codes,i=o.ERR_MISSING_ARGS,l=o.ERR_STREAM_DESTROYED;function a(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,p,g,k){k=n(k);var v=!1;c.on("close",function(){v=!0}),r===void 0&&(r=gr()),r(c,{readable:p,writable:g},function(O){if(O)return k(O);v=!0,k()});var A=!1;return function(O){if(!v&&!A){if(A=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();k(O||new l("pipe"))}}}function y(c){c()}function w(c,p){return c.pipe(p)}function m(c){return!c.length||typeof c[c.length-1]!="function"?a:c.pop()}function S(){for(var c=arguments.length,p=new Array(c),g=0;g<c;g++)p[g]=arguments[g];var k=m(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new i("streams");var v,A=p.map(function(O,j){var E=j<p.length-1,L=j>0;return d(O,E,L,function(M){v||(v=M),M&&A.forEach(y),!E&&(A.forEach(y),k(v))})});return p.reduce(w)}t.exports=S}),Et=le((e,t)=>{te(),e=t.exports=an(),e.Stream=e,e.Readable=e,e.Writable=on(),e.Duplex=vt(),e.Transform=sn(),e.PassThrough=di(),e.finished=gr(),e.pipeline=pi()}),yi=le((e,t)=>{te(),t.exports=r;function r(n,o){if(n&&o)return r(n)(o);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){i[l]=n[l]}),i;function i(){for(var l=new Array(arguments.length),a=0;a<l.length;a++)l[a]=arguments[a];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(y){f[y]=d[y]}),f}}}),ln=le((e,t)=>{te();var r=yi();t.exports=r(n),t.exports.strict=r(o),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})});function n(i){var l=function(){return l.called?l.value:(l.called=!0,l.value=i.apply(this,arguments))};return l.called=!1,l}function o(i){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=i.apply(this,arguments)},a=i.name||"Function wrapped with `once`";return l.onceError=a+" shouldn't be called more than once",l.called=!1,l}}),un=le((e,t)=>{te();var r=ln(),n=function(){},o=function(a){return a.setHeader&&typeof a.abort=="function"},i=function(a){return a.stdio&&Array.isArray(a.stdio)&&a.stdio.length===3},l=function(a,f,d){if(typeof f=="function")return l(a,null,f);f||(f={}),d=r(d||n);var y=a._writableState,w=a._readableState,m=f.readable||f.readable!==!1&&a.readable,S=f.writable||f.writable!==!1&&a.writable,c=!1,p=function(){a.writable||g()},g=function(){S=!1,m||d.call(a)},k=function(){m=!1,S||d.call(a)},v=function(L){d.call(a,L?new Error("exited with error code: "+L):null)},A=function(L){d.call(a,L)},O=function(){he.nextTick(j)},j=function(){if(!c){if(m&&!(w&&w.ended&&!w.destroyed))return d.call(a,new Error("premature close"));if(S&&!(y&&y.ended&&!y.destroyed))return d.call(a,new Error("premature close"))}},E=function(){a.req.on("finish",g)};return o(a)?(a.on("complete",g),a.on("abort",O),a.req?E():a.on("request",E)):S&&!y&&(a.on("end",p),a.on("close",p)),i(a)&&a.on("exit",v),a.on("end",k),a.on("finish",g),f.error!==!1&&a.on("error",A),a.on("close",O),function(){c=!0,a.removeListener("complete",g),a.removeListener("abort",O),a.removeListener("request",E),a.req&&a.req.removeListener("finish",g),a.removeListener("end",p),a.removeListener("close",p),a.removeListener("finish",g),a.removeListener("exit",v),a.removeListener("end",k),a.removeListener("error",A),a.removeListener("close",O)}};t.exports=l}),gi=le(()=>{te()}),mi=le((e,t)=>{te();var r=ln(),n=un(),o=gi(),i=function(){},l=/^v?\.0/.test(he.version),a=function(c){return typeof c=="function"},f=function(c){return!l||!o?!1:(c instanceof(o.ReadStream||i)||c instanceof(o.WriteStream||i))&&a(c.close)},d=function(c){return c.setHeader&&a(c.abort)},y=function(c,p,g,k){k=r(k);var v=!1;c.on("close",function(){v=!0}),n(c,{readable:p,writable:g},function(O){if(O)return k(O);v=!0,k()});var A=!1;return function(O){if(!v&&!A){if(A=!0,f(c))return c.close(i);if(d(c))return c.abort();if(a(c.destroy))return c.destroy();k(O||new Error("stream was destroyed"))}}},w=function(c){c()},m=function(c,p){return c.pipe(p)},S=function(){var c=Array.prototype.slice.call(arguments),p=a(c[c.length-1]||i)&&c.pop()||i;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var g,k=c.map(function(v,A){var O=A<c.length-1,j=A>0;return y(v,O,j,function(E){g||(g=E),E&&k.forEach(w),!O&&(k.forEach(w),p(g))})});return c.reduce(m)};t.exports=S}),bi=le((e,t)=>{te(),t.exports=r;function r(o){var i=o._readableState;return i?i.objectMode||typeof o._duplexState=="number"?o.read():o.read(n(i)):null}function n(o){return o.buffer.length?o.buffer.head?o.buffer.head.data.length:o.buffer[0].length:o.length}}),wi=le((e,t)=>{te();var r=Et(),n=un(),o=ht(),i=bi(),l=se.Buffer.from&&se.Buffer.from!==Uint8Array.from?se.Buffer.from([0]):new se.Buffer([0]),a=function(c,p){c._corked?c.once("uncork",p):p()},f=function(c,p){c._autoDestroy&&c.destroy(p)},d=function(c,p){return function(g){g?f(c,g.message==="premature close"?null:g):p&&!c._ended&&c.end()}},y=function(c,p){if(!c||c._writableState&&c._writableState.finished)return p();if(c._writableState)return c.end(p);c.end(),p()},w=function(){},m=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},S=function(c,p,g){if(!(this instanceof S))return new S(c,p,g);r.Duplex.call(this,g),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!g||g.autoDestroy!==!1,this._forwardDestroy=!g||g.destroy!==!1,this._forwardEnd=!g||g.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),p&&this.setReadable(p)};o(S,r.Duplex),S.obj=function(c,p,g){return g||(g={}),g.objectMode=!0,g.highWaterMark=16,new S(c,p,g)},S.prototype.cork=function(){++this._corked===1&&this.emit("cork")},S.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},S.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var p=this,g=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),k=function(){var A=p._ondrain;p._ondrain=null,A&&A()},v=function(){p._writable.removeListener("drain",k),g()};this._unwrite&&he.nextTick(k),this._writable=c,this._writable.on("drain",k),this._unwrite=v,this.uncork()},S.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var p=this,g=n(c,{writable:!1,readable:!0},d(this)),k=function(){p._forward()},v=function(){p.push(null)},A=function(){p._readable2.removeListener("readable",k),p._readable2.removeListener("end",v),g()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:m(c),this._readable2.on("readable",k),this._readable2.on("end",v),this._unread=A,this._forward()},S.prototype._read=function(){this._drained=!0,this._forward()},S.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=i(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},S.prototype.destroy=function(c,p){if(p||(p=w),this.destroyed)return p(null);this.destroyed=!0;var g=this;he.nextTick(function(){g._destroy(c),p(null)})},S.prototype._destroy=function(c){if(c){var p=this._ondrain;this._ondrain=null,p?p(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},S.prototype._write=function(c,p,g){if(!this.destroyed){if(this._corked)return a(this,this._write.bind(this,c,p,g));if(c===l)return this._finish(g);if(!this._writable)return g();this._writable.write(c)===!1?this._ondrain=g:this.destroyed||g()}},S.prototype._finish=function(c){var p=this;this.emit("preend"),a(this,function(){y(p._forwardEnd&&p._writable,function(){p._writableState.prefinished===!1&&(p._writableState.prefinished=!0),p.emit("prefinish"),a(p,c)})})},S.prototype.end=function(c,p,g){return typeof c=="function"?this.end(null,null,c):typeof p=="function"?this.end(c,null,p):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,g))},t.exports=S}),vi=le((e,t)=>{te();var r=mi(),n=ht(),o=wi(),i=function(a){return a.length?Array.isArray(a[0])?a[0]:Array.prototype.slice.call(a):[]},l=function(a){var f=function(){var d=i(arguments);if(!(this instanceof f))return new f(d);o.call(this,null,null,a),d.length&&this.setPipeline(d)};return n(f,o),f.prototype.setPipeline=function(){var d=i(arguments),y=this,w=!1,m=d[0],S=d[d.length-1];S=S.readable?S:null,m=m.writable?m:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){w||y.cork()}),r(d,function(p){if(y.removeListener("close",c),p)return y.destroy(p.message==="premature close"?null:p);w=!0,y._autoDestroy===!1&&(y._autoDestroy=!0),y.uncork()}),this.destroyed)return c();this.setWritable(m),this.setReadable(S)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),_i=le(()=>{te()}),fn=le((e,t)=>{te(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,a){if(a=a||{type:"Array"},typeof he<"u"&&typeof he.pid=="number"&&he.versions&&he.versions.node)return o(l,a);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return i(l,a)}function o(l,a){var f=_i(),d=f.randomBytes(l);switch(a.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var y=new Uint8Array(l),w=0;w<l;++w)y[w]=d.readUInt8(w);return y;default:throw new Error(a.type+" is unsupported.")}}function i(l,a){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),a.type){case"Array":return[].slice.call(f);case"Buffer":try{var y=new se.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new se.Buffer(f);case"Uint8Array":return f;default:throw new Error(a.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),cn=le((e,t)=>{te(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),o=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var i=42;r[n]=i;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(r,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0}}),Xt=le((e,t)=>{te();var r=cn();t.exports=function(){return r()&&!!Symbol.toStringTag}}),Ei=le((e,t)=>{te();var r=typeof Symbol<"u"&&Symbol,n=cn();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),Si=le((e,t)=>{te();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";t.exports=function(l){var a=this;if(typeof a!="function"||o.call(a)!==i)throw new TypeError(r+a);for(var f=n.call(arguments,1),d,y=function(){if(this instanceof d){var p=a.apply(this,f.concat(n.call(arguments)));return Object(p)===p?p:this}else return a.apply(l,f.concat(n.call(arguments)))},w=Math.max(0,a.length-f.length),m=[],S=0;S<w;S++)m.push("$"+S);if(d=Function("binder","return function ("+m.join(",")+"){ return binder.apply(this,arguments); }")(y),a.prototype){var c=function(){};c.prototype=a.prototype,d.prototype=new c,c.prototype=null}return d}}),mr=le((e,t)=>{te();var r=Si();t.exports=Function.prototype.bind||r}),Ai=le((e,t)=>{te();var r=mr();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),br=le((e,t)=>{te();var r,n=SyntaxError,o=Function,i=TypeError,l=function(N){try{return o('"use strict"; return ('+N+").constructor;")()}catch{}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var f=function(){throw new i},d=a?function(){try{return arguments.callee,f}catch{try{return a(arguments,"callee").get}catch{return f}}}():f,y=Ei()(),w=Object.getPrototypeOf||function(N){return N.__proto__},m={},S=typeof Uint8Array>"u"?r:w(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":y?w([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":m,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?w(w([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y?r:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y?r:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?w(""[Symbol.iterator]()):r,"%Symbol%":y?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":S,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},p=function N(z){var Y;if(z==="%AsyncFunction%")Y=l("async function () {}");else if(z==="%GeneratorFunction%")Y=l("function* () {}");else if(z==="%AsyncGeneratorFunction%")Y=l("async function* () {}");else if(z==="%AsyncGenerator%"){var K=N("%AsyncGeneratorFunction%");K&&(Y=K.prototype)}else if(z==="%AsyncIteratorPrototype%"){var fe=N("%AsyncGenerator%");fe&&(Y=w(fe.prototype))}return c[z]=Y,Y},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=mr(),v=Ai(),A=k.call(Function.call,Array.prototype.concat),O=k.call(Function.apply,Array.prototype.splice),j=k.call(Function.call,String.prototype.replace),E=k.call(Function.call,String.prototype.slice),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,$=function(N){var z=E(N,0,1),Y=E(N,-1);if(z==="%"&&Y!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(Y==="%"&&z!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var K=[];return j(N,L,function(fe,ie,oe,ue){K[K.length]=oe?j(ue,M,"$1"):ie||fe}),K},D=function(N,z){var Y=N,K;if(v(g,Y)&&(K=g[Y],Y="%"+K[0]+"%"),v(c,Y)){var fe=c[Y];if(fe===m&&(fe=p(Y)),typeof fe>"u"&&!z)throw new i("intrinsic "+N+" exists, but is not available. Please file an issue!");return{alias:K,name:Y,value:fe}}throw new n("intrinsic "+N+" does not exist!")};t.exports=function(N,z){if(typeof N!="string"||N.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new i('"allowMissing" argument must be a boolean');var Y=$(N),K=Y.length>0?Y[0]:"",fe=D("%"+K+"%",z),ie=fe.name,oe=fe.value,ue=!1,be=fe.alias;be&&(K=be[0],O(Y,A([0,1],be)));for(var me=1,pe=!0;me<Y.length;me+=1){var R=Y[me],C=E(R,0,1),q=E(R,-1);if((C==='"'||C==="'"||C==="`"||q==='"'||q==="'"||q==="`")&&C!==q)throw new n("property names with quotes must have matching quotes");if((R==="constructor"||!pe)&&(ue=!0),K+="."+R,ie="%"+K+"%",v(c,ie))oe=c[ie];else if(oe!=null){if(!(R in oe)){if(!z)throw new i("base intrinsic for "+N+" exists, but the property is not available.");return}if(a&&me+1>=Y.length){var J=a(oe,R);pe=!!J,pe&&"get"in J&&!("originalValue"in J.get)?oe=J.get:oe=oe[R]}else pe=v(oe,R),oe=oe[R];pe&&!ue&&(c[ie]=oe)}}return oe}}),ki=le((e,t)=>{te();var r=mr(),n=br(),o=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(i,o),a=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(w){var m=l(r,i,arguments);if(a&&f){var S=a(m,"length");S.configurable&&f(m,"length",{value:1+d(0,w.length-(arguments.length-1))})}return m};var y=function(){return l(r,o,arguments)};f?f(t.exports,"apply",{value:y}):t.exports.apply=y}),wr=le((e,t)=>{te();var r=br(),n=ki(),o=n(r("String.prototype.indexOf"));t.exports=function(i,l){var a=r(i,!!l);return typeof a=="function"&&o(i,".prototype.")>-1?n(a):a}}),Ii=le((e,t)=>{te();var r=Xt()(),n=wr(),o=n("Object.prototype.toString"),i=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:o(f)==="[object Arguments]"},l=function(f){return i(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&o(f)!=="[object Array]"&&o(f.callee)==="[object Function]"},a=function(){return i(arguments)}();i.isLegacyArguments=l,t.exports=a?i:l}),Bi=le((e,t)=>{te();var r=Object.prototype.toString,n=Function.prototype.toString,o=/^\s*(?:function)?\*/,i=Xt()(),l=Object.getPrototypeOf,a=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(o.test(n.call(d)))return!0;if(!i){var y=r.call(d);return y==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var w=a();f=w?l(w):!1}return l(d)===f}}),hn=le((e,t)=>{te();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(o,i,l){if(n.call(i)!=="[object Function]")throw new TypeError("iterator must be a function");var a=o.length;if(a===+a)for(var f=0;f<a;f++)i.call(l,o[f],f,o);else for(var d in o)r.call(o,d)&&i.call(l,o[d],d,o)}}),dn=le((e,t)=>{te();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?ct:globalThis;t.exports=function(){for(var o=[],i=0;i<r.length;i++)typeof n[r[i]]=="function"&&(o[o.length]=r[i]);return o}}),pn=le((e,t)=>{te();var r=br(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),yn=le((e,t)=>{te();var r=hn(),n=dn(),o=wr(),i=o("Object.prototype.toString"),l=Xt()(),a=typeof globalThis>"u"?ct:globalThis,f=n(),d=o("Array.prototype.indexOf",!0)||function(p,g){for(var k=0;k<p.length;k+=1)if(p[k]===g)return k;return-1},y=o("String.prototype.slice"),w={},m=pn(),S=Object.getPrototypeOf;l&&m&&S&&r(f,function(p){var g=new a[p];if(Symbol.toStringTag in g){var k=S(g),v=m(k,Symbol.toStringTag);if(!v){var A=S(k);v=m(A,Symbol.toStringTag)}w[p]=v.get}});var c=function(p){var g=!1;return r(w,function(k,v){if(!g)try{g=k.call(p)===v}catch{}}),g};t.exports=function(p){if(!p||typeof p!="object")return!1;if(!l||!(Symbol.toStringTag in p)){var g=y(i(p),8,-1);return d(f,g)>-1}return m?c(p):!1}}),Oi=le((e,t)=>{te();var r=hn(),n=dn(),o=wr(),i=o("Object.prototype.toString"),l=Xt()(),a=typeof globalThis>"u"?ct:globalThis,f=n(),d=o("String.prototype.slice"),y={},w=pn(),m=Object.getPrototypeOf;l&&w&&m&&r(f,function(p){if(typeof a[p]=="function"){var g=new a[p];if(Symbol.toStringTag in g){var k=m(g),v=w(k,Symbol.toStringTag);if(!v){var A=m(k);v=w(A,Symbol.toStringTag)}y[p]=v.get}}});var S=function(p){var g=!1;return r(y,function(k,v){if(!g)try{var A=k.call(p);A===v&&(g=A)}catch{}}),g},c=yn();t.exports=function(p){return c(p)?!l||!(Symbol.toStringTag in p)?d(i(p),8,-1):S(p):!1}}),Ri=le(e=>{te();var t=Ii(),r=Bi(),n=Oi(),o=yn();function i(U){return U.call.bind(U)}var l=typeof BigInt<"u",a=typeof Symbol<"u",f=i(Object.prototype.toString),d=i(Number.prototype.valueOf),y=i(String.prototype.valueOf),w=i(Boolean.prototype.valueOf);l&&(m=i(BigInt.prototype.valueOf));var m;a&&(S=i(Symbol.prototype.valueOf));var S;function c(U,xe){if(typeof U!="object")return!1;try{return xe(U),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=o;function p(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"}e.isPromise=p;function g(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):o(U)||C(U)}e.isArrayBufferView=g;function k(U){return n(U)==="Uint8Array"}e.isUint8Array=k;function v(U){return n(U)==="Uint8ClampedArray"}e.isUint8ClampedArray=v;function A(U){return n(U)==="Uint16Array"}e.isUint16Array=A;function O(U){return n(U)==="Uint32Array"}e.isUint32Array=O;function j(U){return n(U)==="Int8Array"}e.isInt8Array=j;function E(U){return n(U)==="Int16Array"}e.isInt16Array=E;function L(U){return n(U)==="Int32Array"}e.isInt32Array=L;function M(U){return n(U)==="Float32Array"}e.isFloat32Array=M;function $(U){return n(U)==="Float64Array"}e.isFloat64Array=$;function D(U){return n(U)==="BigInt64Array"}e.isBigInt64Array=D;function N(U){return n(U)==="BigUint64Array"}e.isBigUint64Array=N;function z(U){return f(U)==="[object Map]"}z.working=typeof Map<"u"&&z(new Map);function Y(U){return typeof Map>"u"?!1:z.working?z(U):U instanceof Map}e.isMap=Y;function K(U){return f(U)==="[object Set]"}K.working=typeof Set<"u"&&K(new Set);function fe(U){return typeof Set>"u"?!1:K.working?K(U):U instanceof Set}e.isSet=fe;function ie(U){return f(U)==="[object WeakMap]"}ie.working=typeof WeakMap<"u"&&ie(new WeakMap);function oe(U){return typeof WeakMap>"u"?!1:ie.working?ie(U):U instanceof WeakMap}e.isWeakMap=oe;function ue(U){return f(U)==="[object WeakSet]"}ue.working=typeof WeakSet<"u"&&ue(new WeakSet);function be(U){return ue(U)}e.isWeakSet=be;function me(U){return f(U)==="[object ArrayBuffer]"}me.working=typeof ArrayBuffer<"u"&&me(new ArrayBuffer);function pe(U){return typeof ArrayBuffer>"u"?!1:me.working?me(U):U instanceof ArrayBuffer}e.isArrayBuffer=pe;function R(U){return f(U)==="[object DataView]"}R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1));function C(U){return typeof DataView>"u"?!1:R.working?R(U):U instanceof DataView}e.isDataView=C;var q=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function J(U){return f(U)==="[object SharedArrayBuffer]"}function we(U){return typeof q>"u"?!1:(typeof J.working>"u"&&(J.working=J(new q)),J.working?J(U):U instanceof q)}e.isSharedArrayBuffer=we;function ye(U){return f(U)==="[object AsyncFunction]"}e.isAsyncFunction=ye;function B(U){return f(U)==="[object Map Iterator]"}e.isMapIterator=B;function T(U){return f(U)==="[object Set Iterator]"}e.isSetIterator=T;function x(U){return f(U)==="[object Generator]"}e.isGeneratorObject=x;function ne(U){return f(U)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=ne;function re(U){return c(U,d)}e.isNumberObject=re;function b(U){return c(U,y)}e.isStringObject=b;function _(U){return c(U,w)}e.isBooleanObject=_;function W(U){return l&&c(U,m)}e.isBigIntObject=W;function X(U){return a&&c(U,S)}e.isSymbolObject=X;function ve(U){return re(U)||b(U)||_(U)||W(U)||X(U)}e.isBoxedPrimitive=ve;function ge(U){return typeof Uint8Array<"u"&&(pe(U)||we(U))}e.isAnyArrayBuffer=ge,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(e,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})}),Ti=le((e,t)=>{te(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),Li=le(e=>{te();var t=Object.getOwnPropertyDescriptors||function(R){for(var C=Object.keys(R),q={},J=0;J<C.length;J++)q[C[J]]=Object.getOwnPropertyDescriptor(R,C[J]);return q},r=/%[sdj%]/g;e.format=function(R){if(!j(R)){for(var C=[],q=0;q<arguments.length;q++)C.push(l(arguments[q]));return C.join(" ")}for(var q=1,J=arguments,we=J.length,ye=String(R).replace(r,function(x){if(x==="%%")return"%";if(q>=we)return x;switch(x){case"%s":return String(J[q++]);case"%d":return Number(J[q++]);case"%j":try{return JSON.stringify(J[q++])}catch{return"[Circular]"}default:return x}}),B=J[q];q<we;B=J[++q])v(B)||!$(B)?ye+=" "+B:ye+=" "+l(B);return ye},e.deprecate=function(R,C){if(typeof he<"u"&&he.noDeprecation===!0)return R;if(typeof he>"u")return function(){return e.deprecate(R,C).apply(this,arguments)};var q=!1;function J(){if(!q){if(he.throwDeprecation)throw new Error(C);he.traceDeprecation?console.trace(C):console.error(C),q=!0}return R.apply(this,arguments)}return J};var n={},o=/^$/;he.env.NODE_DEBUG&&(i=he.env.NODE_DEBUG,i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+i+"$","i"));var i;e.debuglog=function(R){if(R=R.toUpperCase(),!n[R])if(o.test(R)){var C=he.pid;n[R]=function(){var q=e.format.apply(e,arguments);console.error("%s %d: %s",R,C,q)}}else n[R]=function(){};return n[R]};function l(R,C){var q={seen:[],stylize:f};return arguments.length>=3&&(q.depth=arguments[2]),arguments.length>=4&&(q.colors=arguments[3]),k(C)?q.showHidden=C:C&&e._extend(q,C),L(q.showHidden)&&(q.showHidden=!1),L(q.depth)&&(q.depth=2),L(q.colors)&&(q.colors=!1),L(q.customInspect)&&(q.customInspect=!0),q.colors&&(q.stylize=a),y(q,R,q.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(R,C){var q=l.styles[C];return q?"\x1B["+l.colors[q][0]+"m"+R+"\x1B["+l.colors[q][1]+"m":R}function f(R,C){return R}function d(R){var C={};return R.forEach(function(q,J){C[q]=!0}),C}function y(R,C,q){if(R.customInspect&&C&&z(C.inspect)&&C.inspect!==e.inspect&&!(C.constructor&&C.constructor.prototype===C)){var J=C.inspect(q,R);return j(J)||(J=y(R,J,q)),J}var we=w(R,C);if(we)return we;var ye=Object.keys(C),B=d(ye);if(R.showHidden&&(ye=Object.getOwnPropertyNames(C)),N(C)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return m(C);if(ye.length===0){if(z(C)){var T=C.name?": "+C.name:"";return R.stylize("[Function"+T+"]","special")}if(M(C))return R.stylize(RegExp.prototype.toString.call(C),"regexp");if(D(C))return R.stylize(Date.prototype.toString.call(C),"date");if(N(C))return m(C)}var x="",ne=!1,re=["{","}"];if(g(C)&&(ne=!0,re=["[","]"]),z(C)){var b=C.name?": "+C.name:"";x=" [Function"+b+"]"}if(M(C)&&(x=" "+RegExp.prototype.toString.call(C)),D(C)&&(x=" "+Date.prototype.toUTCString.call(C)),N(C)&&(x=" "+m(C)),ye.length===0&&(!ne||C.length==0))return re[0]+x+re[1];if(q<0)return M(C)?R.stylize(RegExp.prototype.toString.call(C),"regexp"):R.stylize("[Object]","special");R.seen.push(C);var _;return ne?_=S(R,C,q,B,ye):_=ye.map(function(W){return c(R,C,q,B,W,ne)}),R.seen.pop(),p(_,x,re)}function w(R,C){if(L(C))return R.stylize("undefined","undefined");if(j(C)){var q="'"+JSON.stringify(C).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(q,"string")}if(O(C))return R.stylize(""+C,"number");if(k(C))return R.stylize(""+C,"boolean");if(v(C))return R.stylize("null","null")}function m(R){return"["+Error.prototype.toString.call(R)+"]"}function S(R,C,q,J,we){for(var ye=[],B=0,T=C.length;B<T;++B)ue(C,String(B))?ye.push(c(R,C,q,J,String(B),!0)):ye.push("");return we.forEach(function(x){x.match(/^\d+$/)||ye.push(c(R,C,q,J,x,!0))}),ye}function c(R,C,q,J,we,ye){var B,T,x;if(x=Object.getOwnPropertyDescriptor(C,we)||{value:C[we]},x.get?x.set?T=R.stylize("[Getter/Setter]","special"):T=R.stylize("[Getter]","special"):x.set&&(T=R.stylize("[Setter]","special")),ue(J,we)||(B="["+we+"]"),T||(R.seen.indexOf(x.value)<0?(v(q)?T=y(R,x.value,null):T=y(R,x.value,q-1),T.indexOf(`
`)>-1&&(ye?T=T.split(`
`).map(function(ne){return"  "+ne}).join(`
`).substr(2):T=`
`+T.split(`
`).map(function(ne){return"   "+ne}).join(`
`))):T=R.stylize("[Circular]","special")),L(B)){if(ye&&we.match(/^\d+$/))return T;B=JSON.stringify(""+we),B.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.substr(1,B.length-2),B=R.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=R.stylize(B,"string"))}return B+": "+T}function p(R,C,q){var J=0,we=R.reduce(function(ye,B){return J++,B.indexOf(`
`)>=0&&J++,ye+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return we>60?q[0]+(C===""?"":C+`
 `)+" "+R.join(`,
  `)+" "+q[1]:q[0]+C+" "+R.join(", ")+" "+q[1]}e.types=Ri();function g(R){return Array.isArray(R)}e.isArray=g;function k(R){return typeof R=="boolean"}e.isBoolean=k;function v(R){return R===null}e.isNull=v;function A(R){return R==null}e.isNullOrUndefined=A;function O(R){return typeof R=="number"}e.isNumber=O;function j(R){return typeof R=="string"}e.isString=j;function E(R){return typeof R=="symbol"}e.isSymbol=E;function L(R){return R===void 0}e.isUndefined=L;function M(R){return $(R)&&K(R)==="[object RegExp]"}e.isRegExp=M,e.types.isRegExp=M;function $(R){return typeof R=="object"&&R!==null}e.isObject=$;function D(R){return $(R)&&K(R)==="[object Date]"}e.isDate=D,e.types.isDate=D;function N(R){return $(R)&&(K(R)==="[object Error]"||R instanceof Error)}e.isError=N,e.types.isNativeError=N;function z(R){return typeof R=="function"}e.isFunction=z;function Y(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}e.isPrimitive=Y,e.isBuffer=Ti();function K(R){return Object.prototype.toString.call(R)}function fe(R){return R<10?"0"+R.toString(10):R.toString(10)}var ie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function oe(){var R=new Date,C=[fe(R.getHours()),fe(R.getMinutes()),fe(R.getSeconds())].join(":");return[R.getDate(),ie[R.getMonth()],C].join(" ")}e.log=function(){console.log("%s - %s",oe(),e.format.apply(e,arguments))},e.inherits=ht(),e._extend=function(R,C){if(!C||!$(C))return R;for(var q=Object.keys(C),J=q.length;J--;)R[q[J]]=C[q[J]];return R};function ue(R,C){return Object.prototype.hasOwnProperty.call(R,C)}var be=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');if(be&&R[be]){var C=R[be];if(typeof C!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(C,be,{value:C,enumerable:!1,writable:!1,configurable:!0}),C}function C(){for(var q,J,we=new Promise(function(T,x){q=T,J=x}),ye=[],B=0;B<arguments.length;B++)ye.push(arguments[B]);ye.push(function(T,x){T?J(T):q(x)});try{R.apply(this,ye)}catch(T){J(T)}return we}return Object.setPrototypeOf(C,Object.getPrototypeOf(R)),be&&Object.defineProperty(C,be,{value:C,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(C,t(R))},e.promisify.custom=be;function me(R,C){if(!R){var q=new Error("Promise was rejected with a falsy value");q.reason=R,R=q}return C(R)}function pe(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function C(){for(var q=[],J=0;J<arguments.length;J++)q.push(arguments[J]);var we=q.pop();if(typeof we!="function")throw new TypeError("The last argument must be of type Function");var ye=this,B=function(){return we.apply(ye,arguments)};R.apply(this,q).then(function(T){he.nextTick(B.bind(null,null,T))},function(T){he.nextTick(me.bind(null,T,B))})}return Object.setPrototypeOf(C,Object.getPrototypeOf(R)),Object.defineProperties(C,t(R)),C}e.callbackify=pe}),Pi=le((e,t)=>{te();var r=Et(),n=Li(),o=r.Transform;function i(l){if(!(this instanceof i))return new i(l);this._toSkip=l.skip,o.call(this,l)}n.inherits(i,o),i.prototype._transform=function(l,a,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=i});te();te();var gn=He(Et(),1),mn=He(vi(),1);te();var bn=He(Et(),1);function wn(e,t){let r=[],n;e.on("data",o=>r.push(o)),e.on("end",()=>{n||(n=!0,t(null,se.Buffer.concat(r)))}),e.on("error",o=>{n||(n=!0,t(o))})}function vn(e){let t;return new bn.Transform({transform(r,n,o){t&&(r=se.Buffer.concat([t,r]));let i=Math.floor(r.length/e)*e;i?r.length>i?(t=r.slice(i),this.push(r.slice(0,i))):(t=void 0,this.push(r)):t=t?se.Buffer.concat([t,r]):r,o()},flush(r){t&&this.push(t),r()}})}function Mi(e,t){let r=[],n=0;return new bn.Transform({transform(o,i,l){r.push(o),n+=o.length,l()},flush(o){t(n);function i(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",i);e.end(),o()}i()}})}function De(e){let t,r=new Promise((n,o)=>{t=(i,l)=>{i?o(i):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var ji=He(fn(),1);te();te();var vr=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,o,i,l=this._tables[0][4],a=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[o=e.slice(0),i=[]],t=f;t<4*f+28;t++)n=o[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),o[t]=o[t-f]^n;for(r=0;t;r++,t--)n=o[r&3?t:t-4],t<=4||r<4?i[r]=n:i[r]=a[0][l[n>>>24]]^a[1][l[n>>16&255]]^a[2][l[n>>8&255]]^a[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],o,i,l,a=[],f=[],d,y,w,m,S,c;for(o=0;o<256;o++)f[(a[o]=o<<1^(o>>7)*283)^o]=o;for(i=l=0;!r[i];i^=d||1,l=f[l]||1)for(m=l^l<<1^l<<2^l<<3^l<<4,m=m>>8^m&255^99,r[i]=m,n[m]=i,w=a[y=a[d=a[i]]],c=w*16843009^y*65537^d*257^i*16843008,S=a[m]*257^m*16843008,o=0;o<4;o++)e[o][i]=S=S<<24^S>>>8,t[o][m]=c=c<<24^c>>>8;for(o=0;o<5;o++)e[o]=e[o].slice(0),t[o]=t[o].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],o=e[t?3:1]^r[1],i=e[2]^r[2],l=e[t?1:3]^r[3],a,f,d,y=r.length/4-2,w,m=4,S=[0,0,0,0],c=this._tables[t],p=c[0],g=c[1],k=c[2],v=c[3],A=c[4];for(w=0;w<y;w++)a=p[n>>>24]^g[o>>16&255]^k[i>>8&255]^v[l&255]^r[m],f=p[o>>>24]^g[i>>16&255]^k[l>>8&255]^v[n&255]^r[m+1],d=p[i>>>24]^g[l>>16&255]^k[n>>8&255]^v[o&255]^r[m+2],l=p[l>>>24]^g[n>>16&255]^k[o>>8&255]^v[i&255]^r[m+3],m+=4,n=a,o=f,i=d;for(w=0;w<4;w++)S[t?3&-w:w]=A[n>>>24]<<24^A[o>>16&255]<<16^A[i>>8&255]<<8^A[l&255]^r[m++],a=n,n=o,o=i,i=l,l=a;return S}};vr.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function Ni(e){let t,r,n,o=[2479122403,2108737444,3518906241,22203222],i=se.Buffer.alloc(Math.ceil(e.length/4)*4);for(i.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let a=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(a[t/4]=i.readInt32BE(t+r));o=new vr(a).encrypt(o)}let l=se.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(o[t],t*4);return l}function Ui(e,t,r){let n=se.Buffer.from(t.s,"base64"),o=1e5,i="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:o,hash:{name:i}},l,256)).then(l=>{r(null,se.Buffer.from(l))}).catch(r)}var Qe=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new vr(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,o;for(n=0;n<e.length;n+=16){for(o=0;o<4;o++)r[o]=e.readUInt32BE(n+o*4)^t[o];for(t=this.aes.encrypt(r),o=0;o<4;o++)e.writeInt32BE(t[o],n+o*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),o,i;for(o=0;o<e.length;o+=16){for(i=0;i<4;i++)r[i]=e.readUInt32BE(o+i*4);for(n=r,r=this.aes.decrypt(r),i=0;i<4;i++)e.writeInt32BE(r[i]^t[i],o+i*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let o=e.length-n;t[n/4&3]^=e.readIntBE(n,o)<<(4-o)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=se.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},_n=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=se.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(se.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(se.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},En=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=se.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=se.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=se.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(se.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function Ye(e){return typeof e=="string"?_r(e):e}function je(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function _r(e){return se.Buffer.from(e,"base64")}function yt(e){return new Qe(Sn(e).slice(0,16))}function Ci(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=Ye(e),e||(e=(0,ji.default)(24)),e instanceof se.Buffer||(e=se.Buffer.from(e));let n=new gn.Transform({transform(a,f,d){l.update(a);let y=i.encrypt(a);d(null,se.Buffer.from(y))},flush(a){n.mac=l.condense(),n.key=Di(e,n.mac),a()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let o=new Qe(e.slice(0,16)),i=new _n(o,e.slice(16),r),l=new En(o,e.slice(16));return n=(0,mn.default)(vn(16),n),n}function $i(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=Ye(e),e instanceof se.Buffer||(e=se.Buffer.from(e));let n=yt(e),o=new _n(n,e.slice(16),r),i=!t.disableVerification&&new En(n,e.slice(16)),l=new gn.Transform({transform(a,f,d){let y=o.decrypt(a);i&&i.update(y),d(null,se.Buffer.from(y))},flush(a){if(i&&(l.mac=i.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){a(Error("MAC verification failed"));return}a()}});return l=(0,mn.default)(vn(16),l),l}function Sn(e){let t=se.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function Di(e,t){let r=se.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function Fi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let o=0;o<r;o++)n|=e[o]^t[o];return n===0}te();te();var tt={},xi=Math.log(2);function Pt(e){let t=[];for(;e-- >0;)t[e]=0;return t}function Mt(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function Wi(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function An(e,t){let r=e.length,n=t.length;if(r<n)return An(t,e);let o=[],i=0,l=0;for(;l<n;l++)i+=e[l]+t[l],o[l]=i&268435455,i>>>=28;for(;l<r;l++)i+=e[l],o[l]=i&268435455,i>>>=28;return i&&(o[l]=i),o}function qe(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let o=[],i=0,l;for(l=0;l<n;l++)i+=e[l]-t[l],o[l]=i&268435455,i>>=28;for(;l<r;l++)i+=e[l],o[l]=i&268435455,i>>=28;return i?[]:Mt(o)}function lr(e,t,r,n,o){let i=r&16383,l=r>>14,a=n&16383,f=n>>14,d=l*a+f*i,y=i*a+((d&16383)<<14)+e[t]+o;return e[t]=y&268435455,o=l*f+(d>>14)+(y>>28),o}function qi(e){let t=e.length,r=2*t,n=Pt(r),o=0,i,l;for(i=0;i<t;i++){for(o=lr(n,2*i,e[i],e[i],0),l=i+1;l<t;l++)o=lr(n,i+l,2*e[l],e[i],o);n[i+t]=o}return Mt(n)}function ut(e,t){let r=e.length,n=t.length,o=Pt(r+n-1),i,l,a;for(l=0;l<n;l++){for(i=0,a=0;a<r;a++)i=lr(o,l+a,e[a],t[l],i);o[l+r]=i}return Mt(o)}function At(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function kn(e,t){let r=e.length-1,n=t.length-1,o=r-n,i,l,a,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return tt.q=[0],tt.mod=e,tt;if(r===n&&At(e,n,2)/At(t,n,2)<4){for(i=e.concat(),l=0;a=qe(i,t),a.length!==0;)i=a,l++;return tt.q=[l],tt.mod=i,tt}let d=Math.floor(Math.log(t[n])/xi)+1,y=28-d;i=e.concat();let w=t.concat();if(y){for(f=n;f>0;f--)w[f]=w[f]<<y&268435455|w[f-1]>>d;for(w[0]=w[0]<<y&268435455,i[r]&(268435455<<d&268435455)&&(i[++r]=0,o++),f=r;f>0;f--)i[f]=i[f]<<y&268435455|i[f-1]>>d;i[0]=i[0]<<y&268435455}let m,S=Pt(o+1),c=Pt(o).concat(w);for(;m=qe(i,c),m.length!==0;)S[o]++,i=m;let p=w[n],g=At(w,n,2),k;for(f=r;f>n;f--){k=f-n-1,f>=i.length?S[k]=1:i[f]===p?S[k]=268435455:S[k]=Math.floor(At(i,f,2)/p);let v=At(i,f,3);for(;S[k]*g>v;)S[k]--;c=c.slice(1),m=qe(i,ut([S[k]],c)),m.length===0&&(S[k]--,m=qe(i,ut([S[k]],c))),i=m}if(y){for(f=0;f<i.length-1;f++)i[f]=i[f]>>y|i[f+1]<<d&268435455;i[i.length-1]>>=y}return tt.q=Mt(S),tt.mod=Mt(i),tt}function zi(e,t){let r=0,n;for(let o=e.length-1;o>=0;o--)n=e[o],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function gt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[zi(e,t[0])]}return kn(e,t).mod}function Ot(e,t,r){let n=e.length-(t.length<<1);if(n>0)return Ot(e.slice(0,n).concat(Ot(e.slice(n),t,r)),t,r);let o=t.length+1,i=t.length-1,l,a=ut(e.slice(i),r).slice(o),f=e.slice(0,o),d=ut(a,t).slice(0,o),y=qe(f,d);y.length===0&&(f[o]=1,y=qe(f,d));for(let w=0;l=qe(y,t),l.length!==0;w++)if(y=l,w>=3)return Ot(y,t,r);return y}function Rr(e,t,r){let n=e.concat(),o=t.length-1,i=r.length*2,l=Pt(i+1);for(l[i]=1,l=kn(l,r).q,i=Wi(t[o])-2;o>=0;o--){for(;i>=0;i-=1)n=Ot(qi(n),r,l),t[o]&1<<i&&(n=Ot(ut(n,e),r,l));i=28-1}return n}function Vi(e,t,r,n,o){let i=Rr(gt(e,r),gt(t,qe(r,[1])),r),l=Rr(gt(e,n),gt(t,qe(n,[1])),n),a=qe(l,i);return a.length===0?(a=qe(i,l),a=gt(ut(a,o),n),a=qe(n,a)):a=gt(ut(a,o),n),An(ut(a,r),i)}function In(e){let t=1,r=[0],n=0,o=256,i=e.length,l;if(i<2)return 0;let a=(i-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>a||f<a-8)return 0;for(let d=0;d<a;d++)(o<<=1)>255&&(o=1,l=e.charCodeAt(--i)),t>268435455&&(t=1,r[++n]=0),l&o&&(r[n]|=t),t<<=1;return r}function Gi(e){let t=1,r=0,n=[0],o=1,i=0,l=e.length*28,a="",f;for(f=0;f<l;f++)e[r]&t&&(n[i]|=o),(o<<=1)>255&&(o=1,n[++i]=0),(t<<=1)>268435455&&(t=1,r++);for(;i>=0&&n[i]===0;)i--;for(f=0;f<=i;f++)a=String.fromCharCode(n[f])+a;return a}function Hi(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=In(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Ki(e,t){let r=In(e.toString("binary")),n=Gi(Vi(r,t[2],t[0],t[1],t[3]));return se.Buffer.from(n,"binary")}te();var Yi=He(Wt(),1);te();var Ji=null;te();var Xi=globalThis.fetch,Qi=Xi;te();var Zi=globalThis.AbortController||Ji,ur=Zi,fr=4,Tr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+fr+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later",19:"ETOOMANYCONNECTIONS (-19)",24:"EGOINGOVERQUOTA (-24)",25:"EROLLEDBACK (-25)",26:"EMFAREQUIRED (-26): Multi-Factor Authentication Required",27:"EMASTERONLY (-27)",28:"EBUSINESSPASTDUE (-28)",29:"EPAYWALL (-29): ODQ paywall state",400:"ETOOERR (-400)",401:"ESHAREROVERQUOTA (-401)"},eo="https://g.api.mega.co.nz/",to=null,ro=null,It=class extends Yi.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||eo;let r="1.1.2";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||to,this.httpsAgent=t.httpsAgent||ro,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),Qi(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[o,i]=De(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(Lr).then(a=>{if(this.closed&&!n)return;if(!a)return o(Error("Empty response"));a.length&&(a=a[0]);let f;if(typeof a=="number"&&a<0){if(a===-3&&r<fr)return setTimeout(()=>{this.request(e,o,r+1)},Math.pow(2,r+1)*1e3);f=Error(Tr[-a])}else this.keepalive&&a&&a.sn&&this.pull(a.sn);o(f,a)}).catch(a=>{o(a)}),i}pull(e,t=0){let r=new ur;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(Lr).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<fr)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(Tr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(no).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new ur;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return It.globalApi||(It.globalApi=new It),It.globalApi}};function Lr(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function no(e){if(e.name!=="AbortError")throw e}var Kt=It,io=He(Wt(),1);te();te();var oo=He(Wt(),1),ao=He(Et(),1),so=He(Pi(),1),pt=class extends oo.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?Ye(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Kt.getGlobalApi(),!(this.api instanceof Kt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=Ye(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=_r(e),yt(this.key).decryptCBC(e);let t=pt.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=Bn[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=De(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(o,i)=>{if(o)return t(o);if(this.directory){let l=Object.create(null),a=i.f,f=a.find(y=>y.k&&y.h===y.k.split(":")[0]),d=this.key?new Qe(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let y of a){if(y===f)continue;let w=new pt(y,this.storage);w.loadMetadata(d,y),w.downloadId=[this.downloadId,y.h],l[y.h]=w}for(let y of a){let w=l[y.p];if(w){let m=l[y.h];w.children||(w.children=[]),w.children.push(m),m.parent=w}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let y=l[this.loadedFile];typeof y>"u"?t(Error("Node (file or folder) not found in folder")):t(null,y)}else t(null,this)}else{if(this.size=i.s,this.decryptAttributes(i.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,o=e.end||null,i=e.maxConnections||4,l=e.initialChunkSize||128*1024,a=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=e.forceHttps??!0?2:0,y={a:"g",g:1,ssl:d};if(this.nodeId?y.n=this.nodeId:Array.isArray(this.downloadId)?(y._querystring={n:this.downloadId[0]},y.n=this.downloadId[1]):y.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let w=this.key&&!e.returnCiphertext?$i(this.key,{start:n,disableVerification:n!==0||o!==null}):new ao.PassThrough,m=n===r?w:w.pipe(new so.default({skip:r-n})),S=e.handleRetries||pt.defaultHandleRetries;return this.api.request(y,(c,p)=>{if(c)return m.emit("error",c);if(typeof p.g!="string"||p.g.substr(0,4)!=="http")return m.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(p.s===0)return m.end();if(o||(o=p.s-1),r>o)return m.emit("error",Error("You can't download past the end of the file."));function g(N){if(N.status!==200){if(N.status===509){let z=N.headers.get("x-mega-time-left"),Y=Error("Bandwidth limit reached: "+z+" seconds until it resets");Y.timeLimit=z,m.emit("error",Y);return}m.emit("error",Error("MEGA returned a "+N.status+" status code"))}}function k(N){m.emit("error",N)}let v=0;if(m.on("data",N=>{v+=N.length,m.emit("progress",{bytesLoaded:v,bytesTotal:p.s})}),i===1){let N=new ur;m.on("close",()=>{N.abort()}),this.api.fetch(p.g+"/"+n+"-"+o,{signal:N.signal}).then(z=>{g(z);let Y=z.body;if(Y)if(Y.pipe)z.body.pipe(w);else if(Y.getReader){let K=Y.getReader(),fe=({done:ie,value:oe})=>{if(ie)w.end();else return w.write(oe),K.read().then(fe)};K.read().then(fe)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(k);return}let A={},O=0,j=0,E=!1,L=n,M=l;m.on("error",()=>{E=!0}),m.on("close",()=>{E=!0});let $=()=>{if(L>o){E=!0,O===j&&w.end();return}let N=L,z=Math.min(o,N+M-1),Y=O++,K=0,fe=()=>{K++,this.api.fetch(p.g+"/"+N+"-"+z).then(ie=>(g(ie),ie.arrayBuffer())).then(ie=>{let oe=se.Buffer.from(ie);A[Y]=oe,j===Y&&D()},ie=>{S(K,ie,oe=>{oe?k(oe):fe()})})};fe(),L=z+1,M<f&&(M=M+a)},D=()=>{let N;for(;;){let z=A[j];if(!z||(N=!w.write(z),delete A[j],j++,N))break}E&&O===j&&w.end(),N?w.once("drain",D):$()};for(let N=0;N<i;N++)$()}),t&&wn(m,t),m}downloadBuffer(e,t){let[r,n]=De(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=De(t);typeof e=="boolean"&&(e={noKey:e});let o=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(o+=`#${je(this.key)}`),!e.noKey&&this.loadedFile&&(o+=`/file/${this.loadedFile}`),r(null,o),n}static fromURL(e,t={}){if(typeof e=="object")return new pt(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),o=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),i=n[0];if(o&&!i||!o&&i)throw Error("Invalid URL: too few arguments");return new pt({downloadId:o,key:i,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new pt({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},Bn=["","red","orange","yellow","green","blue","purple","grey"],Xe=pt,tr=He(fn(),1),Pr=He(Et(),1),Mr={},Bt=class extends Xe{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let o of r){let i=o.split(":")[0];if(i===t.user){e.k=o;break}let l=t.shareKeys[i];if(l){e.k=o,n=Mr[i],n||(n=Mr[i]=new Qe(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=De(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=se.Buffer.from((0,tr.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let o=e.key,i=Bt.packAttributes(e.attributes);yt(o).encryptCBC(i);let l=se.Buffer.from(o);this.storage.aes.encryptECB(l);let a={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:je(i),k:je(l)}]},f=Rt(this.storage.shareKeys,this);return f.length>0&&(a.cr=Vt(this.storage,[{nodeId:"xxxxxxxx",key:o}],f)),this.api.request(a,(d,y)=>{if(d)return r(d);let w=this.storage._importFile(y.f[0]);this.storage.emit("add",w),r(null,w)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,o]=De(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let i,l=Ye(e.key);l||(l=(0,tr.default)(24)),l instanceof se.Buffer||(l=se.Buffer.from(l));let a=e.uploadCiphertext?32:24;if(l.length!==a)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(i=l,l=Sn(l).slice(0,24)),e.key=l;let f=[],d=(m,S,c,p)=>{if(m)return w(m);if(!c||c.length===0){w(Error("Server returned a invalid response while uploading"));return}let g=Number(c.toString());if(g<0){w(Error("Server returned error "+g+" while uploading"));return}if(f[S]=c,S===0&&!i&&(i=p.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let k=Bt.packAttributes(e.attributes);yt(i).encryptCBC(k);let v=se.Buffer.from(i);this.storage.aes.encryptECB(v);let A={h:je(f[0]),t:0,a:je(k),k:je(v)};f.length!==1&&(A.fa=f.slice(1).map((E,L)=>L+"*"+je(E)).filter(E=>E).join("/"));let O={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[A]},j=Rt(this.storage.shareKeys,this);j.length>0&&(O.cr=Vt(this.storage,[{nodeId:A.h,key:i}],j)),this.api.request(O,(E,L)=>{if(E)return w(E);let M=this.storage._importFile(L.f[0]);this.storage.emit("add",M),y.emit("complete",M),n&&n(null,M)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let y=this._upload(e,t,0,d);function w(m){y.listenerCount("error")?y.emit("error",m):n(m)}return y.complete=o,y}_upload(e,t,r,n){let o=e.uploadCiphertext?new Pr.PassThrough:Ci(e.key),i=o,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,i.end(t)),l!=null?(l===0&&o.end(),this._uploadWithSize(i,l,o,r,e,n)):i=Mi(i,a=>{this._uploadWithSize(i,a,o,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(i),i}_uploadAttribute(e,t,r,n){let o=(i,l)=>{if(i)return n(i);let a=l.length,f=Math.ceil(a/16)*16-a;f!==0&&(l=se.Buffer.concat([l,se.Buffer.alloc(f)])),(e.handle?yt(e.key):new Qe(e.key.slice(0,16))).encryptCBC(l);let d=new Pr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof se.Buffer){o(null,t);return}wn(t,o)}_uploadWithSize(e,t,r,n,o,i){let l=o.forceHttps??!0?2:0,a=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};o.handle&&(a.h=o.handle);let f=n===0?o.initialChunkSize||128*1024:t,d=o.chunkSizeIncrement||128*1024,y=o.maxChunkSize||1024*1024,w=o.maxConnections||4,m=o.handleRetries||Xe.defaultHandleRetries,S=f,c=0,p=!1,g=0,k,v,A,O,j,E=()=>{O=Math.min(S,t-g),v=se.Buffer.alloc(O),c++,S<y&&(S+=d),j=0,k&&(k.copy(v),j=Math.min(k.length,O),k=k.length>O?k.slice(O):null),j===O?L():(p=!0,$())},L=()=>{let D=g,N=v,z=0,Y=()=>{z++,this.api.fetch(A+"/"+(n===0?D:n-1),{method:"POST",body:N,headers:{"content-length":N.length}}).then(K=>{if(K.status!==200)throw Error("MEGA returned a "+K.status+" status code");return K.arrayBuffer()}).then(K=>{let fe=se.Buffer.from(K);fe.length>0?(r.end(),he.nextTick(()=>{i(null,n,fe,r)})):g<t&&!p&&E()},K=>{m(z,K,fe=>{fe?e.emit("error",fe):Y()})})};Y(),v=null,g+=O,g<t&&!p&&c<w&&E()},M=0,$=()=>{for(;;){let D=r.read();if(D===null){r.once("readable",$);break}if(M+=D.length,e.emit("progress",{bytesLoaded:M,bytesTotal:t}),D.copy(v,j),j+=D.length,j>=O){p=!1,k=D.slice(D.length-(j-O)),L();break}}};r.on("end",()=>{t&&M!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+M))}),this.api.request(a,(D,N)=>{if(D)return i(D);A=N.p,E()})}uploadAttribute(e,t,r){let[n,o]=De(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(i,l,a,f)=>{if(i)return n(i);let d={a:"pfa",n:this.nodeId,fa:e+"*"+je(a)};this.api.request(d,(y,w)=>{if(y)return n(y);n(null,this)})}),o}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof Xe))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=Rt(this.storage.shareKeys,e);return n.length>0&&(r.cr=Vt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=De(t);Object.assign(this.attributes,e);let o=Bt.packAttributes(this.attributes);return yt(this.key).encryptCBC(o),this.api.request({a:"a",n:this.nodeId,at:je(o)},i=>{this.parseAttributes(this.attributes),r(i)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=Bn.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,o]=De(t);return this.api.request({a:"l",n:this.nodeId},(i,l)=>{if(i)return n(i);let a=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(a+=`#${je(r||this.key)}`),n(null,a)}),o}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let o=Ye(e.key);o||(o=(0,tr.default)(16)),o instanceof se.Buffer||(o=se.Buffer.from(o));let[i,l]=De(t);if(o.length!==16)return i(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=o;let a=se.Buffer.from(r+r);this.storage.aes.encryptECB(a);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:je(this.storage.aes.encryptECB(se.Buffer.from(o))),ha:je(a),cr:Vt(this.storage,this)};return this.api.request(f,d=>{if(d)return i(d);this.link(Object.assign({__folderKey:o},e),i)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=De(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=Xe.fromURL(e)),!(e instanceof Xe))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let o=(i,l)=>{if(i)return r(i);let a=Bt.packAttributes(l.attributes);yt(l.key).encryptCBC(a);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:je(a),k:je(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(y,w)=>{if(y)return r(y);let m=this.storage._importFile(w.f[0]);this.storage.emit("add",m),r(null,m)})};return e.attributes?o(null,e):e.loadAttributes(o),n}static packAttributes(e){let t=JSON.stringify(e);t=se.Buffer.from(`MEGA${t}`);let r=se.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Vt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=On(t)),r||(r=t.map(i=>Rt(n,i)).reduce((i,l)=>i.concat(l)).filter((i,l,a)=>l===a.indexOf(i)));let o=[r,t.map(i=>i.nodeId),[]];for(let i=r.length;i--;){let l=new Qe(n[r[i]]);for(let a=t.length;a--;){let f=se.Buffer.from(t[a].key);f&&(f.length===32||f.length===16)&&o[2].push(i,a,je(l.encryptECB(f)))}}return o}function On(e){return[e].concat((e.children||[]).map(On).reduce((t,r)=>t.concat(r),[]))}function Rt(e,t){let r=t.nodeId,n=t.parent,o=[];return e[r]&&o.push(r),n?o.concat(Rt(e,n)):o}var lo=Bt,uo=class extends io.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=De(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Kt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):he.nextTick(()=>{r(null,this)})}login(e){let[t,r]=De(e);if(typeof this.options.email!="string")return he.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},o=f=>{this.api.request({a:"ug"},(d,y)=>{if(d)return f(d);this.name=y.name,this.user=y.u,this.options.autoload?this.reload(!0,w=>{if(w)return f(w);n()}):n()})};this.email=this.options.email.toLowerCase();let i=f=>{let d=Ni(se.Buffer.from(this.options.password)),y=new Qe(d),w=je(y.stringhash(se.Buffer.from(this.email))),m={a:"us",user:this.email,uh:w};a(m,y,f)},l=(f,d)=>{Ui(se.Buffer.from(this.options.password),f,(y,w)=>{if(y)return d(y);let m=new Qe(w.slice(0,16)),S=je(w.slice(16)),c={a:"us",user:this.email,uh:S};a(c,m,d)})},a=(f,d,y)=>{delete this.options.password,this.options.secondFactorCode&&(f.mfa=this.options.secondFactorCode.toString()),this.api.request(f,(w,m)=>{if(w)return y(w);this.key=Ye(m.k),d.decryptECB(this.key),this.aes=new Qe(this.key);let S=Ye(m.csid),c=this.aes.decryptECB(Ye(m.privk)),p=Hi(c);if(!p)throw Error("invalid credentials");let g=je(Ki(S,p).slice(0,43));this.api.sid=this.sid=g,this.RSAPrivateKey=p,o(y)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return i(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=De(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(o,i)=>{var l;if(o)return r(o);this.shareKeys=i.ok.reduce((a,f)=>{let d=f.h,y=this.aes.encryptECB(se.Buffer.from(d+d));return Fi(Ye(f.ha),y)&&(a[d]=this.aes.decryptECB(Ye(f.k))),a},{});for(let a of i.f)if(a=this._importFile(a),i.ph!==void 0&&(a.shareId=(l=i.ph.find(f=>f.h===a.nodeId))==null?void 0:l.ph,a.shared=!!a.shareId,a.shared)){a.shareURL=`https://mega.nz/${a.directory?"folder":"file"}/${a.shareId}`;let f=a.directory?this.shareKeys[a.nodeId]:a.key;f&&(a.shareURL+="#"+je(f))}r(null,this.mounts)}),this.api.on("sc",o=>{let i={};o.forEach(l=>{if(l.a==="u"){let a=this.files[l.n];a&&(a.timestamp=l.ts,a.decryptAttributes(l.at),a.emit("update"),this.emit("update",a))}else l.a==="d"?i[l.n]=!0:l.a==="t"&&l.t.f.forEach(a=>{let f=this.files[a.h];if(f){delete i[a.h];let d=f.parent;if(d.nodeId===a.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[a.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(a))})}),Object.keys(i).forEach(l=>{let a=this.files[l],f=a.parent;f.children.splice(f.children.indexOf(a),1),this.emit("delete",a),a.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new lo(e,this);if(e.t===fo&&(this.root=t,t.name="Cloud Drive"),e.t===ho&&(this.trash=t,t.name="Rubbish Bin"),e.t===co&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=De(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,o)=>{n&&t(n);let i={};i.type=o.utype,i.spaceUsed=o.cstrg,i.spaceTotal=o.mstrg,i.downloadBandwidthTotal=o.mxfer||Math.pow(1024,5)*10,i.downloadBandwidthUsed=o.caxfer||0,i.sharedBandwidthUsed=o.csxfer||0,i.sharedBandwidthLimit=o.srvratio,t(null,i)}),r}toJSON(){return{key:je(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new uo(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=_r(e.key),t.aes=new Qe(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},fo=2,co=3,ho=4;Xe.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let rr=null;async function dt(){const e=await Yn("music",3,{upgrade(t,r,n,o,i){rr=r,r<1&&(t.createObjectStore("album",{keyPath:"folderName"}),t.createObjectStore("image",{keyPath:"id"}),t.createObjectStore("song",{keyPath:"id"})),r<2&&t.createObjectStore("albumFolder")}});return rr&&rr<3&&await e.clear("song"),e}async function po(){const e=await dt(),t=await e.getAll("album"),r=await e.get("albumFolder","german")??[],n=await e.get("albumFolder","russian")??[],o=await e.get("albumFolder","instrumental")??[],i=await e.get("albumFolder","geistlicheLieder")??[],l=await e.get("albumFolder","russianBook")??[];return e.close(),{german:t.filter(a=>r.includes(a.folderName)),russian:t.filter(a=>n.includes(a.folderName)),instrumental:t.filter(a=>o.includes(a.folderName)),geistlicheLieder:t.find(a=>i.includes(a.folderName)),russianBook:t.find(a=>l.includes(a.folderName))}}async function yo(e){const t=await dt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian"),n.put(e.instrumental.map(l=>l.folderName),"instrumental"),n.put([e.geistlicheLieder.folderName],"geistlicheLieder"),n.put([e.russianBook.folderName],"russianBook");const o=r.objectStore("album");o.clear();const i=[];for(const l of e.german)i.push(o.put(l));for(const l of e.russian)i.push(o.put(l));for(const l of e.instrumental)i.push(o.put(l));i.push(o.put(e.geistlicheLieder)),i.push(o.put(e.russianBook)),await Promise.all(i),r.commit(),t.close()}const jr={};async function Er(e){const t=Je(e);let r=jr[t];if(!r){const n=await go(e);r=URL.createObjectURL(n),jr[t]=r}return r}async function go(e){const t=Je(e),r=await dt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const o=await new Xe({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),i=new Blob([o]);return mo(e,i),i}async function mo(e,t){const n={id:Je(e),blob:t},o=await dt();await o.add("image",n),o.close()}async function Rn(e){const t=Je(e),r=await dt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const o=await new Xe({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),i=new Blob([o],{type:"audio/mpeg"});return bo(e,i),i}async function bo(e,t){const n={id:Je(e),name:e.name,blob:t},o=await dt();await o.add("song",n),o.close()}async function wo(e){const t=await dt(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(Je(n)))}async function vo(){const e=await dt(),t=await e.getAllKeys("song");return e.close(),t}function Je(e){return JSON.stringify(e.downloadId)}const kt={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA",GEISTLICHE_LIEDER_URL:"https://mega.nz/folder/Dm5x2LRZ#OLhiAvvoX4qZTZGDLPn0SQ",RUSSIAN_BOOK:"https://mega.nz/folder/3zIxQbpT#pwb_r_7oq0ZRnerldK4sLA"};function nr(e){var t,r;return e.german.flatMap(n=>n.songs).concat(e.russian.flatMap(n=>n.songs)).concat(e.instrumental.flatMap(n=>n.songs)).concat(((t=e.geistlicheLieder)==null?void 0:t.songs.map(n=>({...n,name:n.name.split("_",2)[1]})))??[]).concat(((r=e.russianBook)==null?void 0:r.songs.map(n=>({...n,name:n.name.split("-",2)[1].trimStart()})))??[])}async function _o(){return{german:await ir(kt.GERMAN_SONGS_URL),russian:await ir(kt.RUSSIAN_SONGS_URL),instrumental:await ir(kt.INSTRUMENTAL_SONGS_URL),geistlicheLieder:await Nr(kt.GEISTLICHE_LIEDER_URL),russianBook:await Nr(kt.RUSSIAN_BOOK)}}async function ir(e){const t=Xe.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(Tn)}async function Nr(e){const t=Xe.fromURL(e);return await t.loadAttributes(),Tn(t)}function Tn(e){const t=e.children.find(r=>{var n;return(n=r.name)==null?void 0:n.endsWith(".jpg")});return{name:e.name.split("(")[0].trim(),folderName:e.name,image:t?{key:t.key,downloadId:t.downloadId,fileSize:t.size}:null,songs:e.children.filter(r=>r.name.endsWith(".mp3")||r.name.endsWith(".webm")||r.name.endsWith(".mp4")).map(r=>({name:r.name.substring(0,r.name.lastIndexOf(".")).trim(),link:{key:r.key,downloadId:r.downloadId,fileSize:r.size}}))}}async function Tt(e,t,r){try{const n=t[r];st.update(i=>({...i,isLoading:!0}));const o=await Rn({name:n.name,...n.link});st.update(i=>(i.src!=null&&URL.revokeObjectURL(i.src),{...i,isLoading:!1,src:URL.createObjectURL(o),album:e,song:n,playPrevious:r>0?()=>Tt(e,t,r-1):null,playNext:r<t.length-1?()=>Tt(e,t,r+1):null,playRandom:()=>Tt(e,t,Eo(t.length))}))}catch{st.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function Eo(e){return Math.floor(Math.random()*e)}const Ht="music/favorites";function cr(e){var r;const t=Je(e);return((r=localStorage.getItem(Ht))==null?void 0:r.includes(t))??!1}function So(e){const t=`;${Je(e)};`,r=localStorage.getItem(Ht);(r==null?void 0:r.includes(t))??!1?localStorage.setItem(Ht,r.replace(t,"")):localStorage.setItem(Ht,r+t)}function Ao(e){let t;const r=e[2].default,n=jt(r,e,e[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8)&&Nt(n,r,o,o[3],t?Ct(r,o[3],i,null):Ut(o[3]),null)},i(o){t||(ce(n,o),t=!0)},o(o){de(n,o),t=!1},d(o){n&&n.d(o)}}}function ko(e){let t,r;const n=[{name:"arrow-right"},e[1],{iconNode:e[0]}];let o={$$slots:{default:[Ao]},$$scope:{ctx:e}};for(let i=0;i<n.length;i+=1)o=Fe(o,n[i]);return t=new $t({props:o}),{c(){Ie(t.$$.fragment)},l(i){Be(t.$$.fragment,i)},m(i,l){Oe(t,i,l),r=!0},p(i,[l]){const a=l&3?Dt(n,[n[0],l&2&&Ft(i[1]),l&1&&{iconNode:i[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:i}),t.$set(a)},i(i){r||(ce(t.$$.fragment,i),r=!0)},o(i){de(t.$$.fragment,i),r=!1},d(i){Re(t,i)}}}function Io(e,t,r){let{$$slots:n={},$$scope:o}=t;const i=[["path",{d:"M5 12l14 0"}],["path",{d:"M13 18l6 -6"}],["path",{d:"M13 6l6 6"}]];return e.$$set=l=>{r(1,t=Fe(Fe({},t),et(l))),"$$scope"in l&&r(3,o=l.$$scope)},t=et(t),[i,t,n,o]}class Bo extends Ve{constructor(t){super(),Ge(this,t,Io,ko,ze,{})}}const Oo=Bo;function Ro(e){let t;const r=e[2].default,n=jt(r,e,e[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8)&&Nt(n,r,o,o[3],t?Ct(r,o[3],i,null):Ut(o[3]),null)},i(o){t||(ce(n,o),t=!0)},o(o){de(n,o),t=!1},d(o){n&&n.d(o)}}}function To(e){let t,r;const n=[{name:"arrows-shuffle"},e[1],{iconNode:e[0]}];let o={$$slots:{default:[Ro]},$$scope:{ctx:e}};for(let i=0;i<n.length;i+=1)o=Fe(o,n[i]);return t=new $t({props:o}),{c(){Ie(t.$$.fragment)},l(i){Be(t.$$.fragment,i)},m(i,l){Oe(t,i,l),r=!0},p(i,[l]){const a=l&3?Dt(n,[n[0],l&2&&Ft(i[1]),l&1&&{iconNode:i[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:i}),t.$set(a)},i(i){r||(ce(t.$$.fragment,i),r=!0)},o(i){de(t.$$.fragment,i),r=!1},d(i){Re(t,i)}}}function Lo(e,t,r){let{$$slots:n={},$$scope:o}=t;const i=[["path",{d:"M18 4l3 3l-3 3"}],["path",{d:"M18 20l3 -3l-3 -3"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3"}]];return e.$$set=l=>{r(1,t=Fe(Fe({},t),et(l))),"$$scope"in l&&r(3,o=l.$$scope)},t=et(t),[i,t,n,o]}class Po extends Ve{constructor(t){super(),Ge(this,t,Lo,To,ze,{})}}const Mo=Po;function jo(e){let t;const r=e[2].default,n=jt(r,e,e[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8)&&Nt(n,r,o,o[3],t?Ct(r,o[3],i,null):Ut(o[3]),null)},i(o){t||(ce(n,o),t=!0)},o(o){de(n,o),t=!1},d(o){n&&n.d(o)}}}function No(e){let t,r;const n=[{name:"download"},e[1],{iconNode:e[0]}];let o={$$slots:{default:[jo]},$$scope:{ctx:e}};for(let i=0;i<n.length;i+=1)o=Fe(o,n[i]);return t=new $t({props:o}),{c(){Ie(t.$$.fragment)},l(i){Be(t.$$.fragment,i)},m(i,l){Oe(t,i,l),r=!0},p(i,[l]){const a=l&3?Dt(n,[n[0],l&2&&Ft(i[1]),l&1&&{iconNode:i[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:i}),t.$set(a)},i(i){r||(ce(t.$$.fragment,i),r=!0)},o(i){de(t.$$.fragment,i),r=!1},d(i){Re(t,i)}}}function Uo(e,t,r){let{$$slots:n={},$$scope:o}=t;const i=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}],["path",{d:"M7 11l5 5l5 -5"}],["path",{d:"M12 4l0 12"}]];return e.$$set=l=>{r(1,t=Fe(Fe({},t),et(l))),"$$scope"in l&&r(3,o=l.$$scope)},t=et(t),[i,t,n,o]}class Co extends Ve{constructor(t){super(),Ge(this,t,Uo,No,ze,{})}}const Sr=Co;function $o(e){let t;const r=e[2].default,n=jt(r,e,e[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8)&&Nt(n,r,o,o[3],t?Ct(r,o[3],i,null):Ut(o[3]),null)},i(o){t||(ce(n,o),t=!0)},o(o){de(n,o),t=!1},d(o){n&&n.d(o)}}}function Do(e){let t,r;const n=[{name:"notes"},e[1],{iconNode:e[0]}];let o={$$slots:{default:[$o]},$$scope:{ctx:e}};for(let i=0;i<n.length;i+=1)o=Fe(o,n[i]);return t=new $t({props:o}),{c(){Ie(t.$$.fragment)},l(i){Be(t.$$.fragment,i)},m(i,l){Oe(t,i,l),r=!0},p(i,[l]){const a=l&3?Dt(n,[n[0],l&2&&Ft(i[1]),l&1&&{iconNode:i[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:i}),t.$set(a)},i(i){r||(ce(t.$$.fragment,i),r=!0)},o(i){de(t.$$.fragment,i),r=!1},d(i){Re(t,i)}}}function Fo(e,t,r){let{$$slots:n={},$$scope:o}=t;const i=[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}],["path",{d:"M9 7l6 0"}],["path",{d:"M9 11l6 0"}],["path",{d:"M9 15l4 0"}]];return e.$$set=l=>{r(1,t=Fe(Fe({},t),et(l))),"$$scope"in l&&r(3,o=l.$$scope)},t=et(t),[i,t,n,o]}class xo extends Ve{constructor(t){super(),Ge(this,t,Fo,Do,ze,{})}}const Wo=xo;function qo(e){let t;const r=e[2].default,n=jt(r,e,e[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8)&&Nt(n,r,o,o[3],t?Ct(r,o[3],i,null):Ut(o[3]),null)},i(o){t||(ce(n,o),t=!0)},o(o){de(n,o),t=!1},d(o){n&&n.d(o)}}}function zo(e){let t,r;const n=[{name:"player-pause"},e[1],{iconNode:e[0]}];let o={$$slots:{default:[qo]},$$scope:{ctx:e}};for(let i=0;i<n.length;i+=1)o=Fe(o,n[i]);return t=new $t({props:o}),{c(){Ie(t.$$.fragment)},l(i){Be(t.$$.fragment,i)},m(i,l){Oe(t,i,l),r=!0},p(i,[l]){const a=l&3?Dt(n,[n[0],l&2&&Ft(i[1]),l&1&&{iconNode:i[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:i}),t.$set(a)},i(i){r||(ce(t.$$.fragment,i),r=!0)},o(i){de(t.$$.fragment,i),r=!1},d(i){Re(t,i)}}}function Vo(e,t,r){let{$$slots:n={},$$scope:o}=t;const i=[["path",{d:"M6 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}],["path",{d:"M14 5m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}]];return e.$$set=l=>{r(1,t=Fe(Fe({},t),et(l))),"$$scope"in l&&r(3,o=l.$$scope)},t=et(t),[i,t,n,o]}class Go extends Ve{constructor(t){super(),Ge(this,t,Vo,zo,ze,{})}}const Ho=Go;function Ko(e){let t,r,n,o,i,l;return r=new Nn({}),{c(){t=Z("button"),Ie(r.$$.fragment),this.h()},l(a){t=ee(a,"BUTTON",{});var f=ae(t);Be(r.$$.fragment,f),f.forEach(H),this.h()},h(){t.disabled=n=e[1].isLoading},m(a,f){Te(a,t,f),Oe(r,t,null),o=!0,i||(l=Le(t,"click",e[6]),i=!0)},p(a,f){(!o||f&2&&n!==(n=a[1].isLoading))&&(t.disabled=n)},i(a){o||(ce(r.$$.fragment,a),o=!0)},o(a){de(r.$$.fragment,a),o=!1},d(a){a&&H(t),Re(r),i=!1,l()}}}function Yo(e){let t,r,n,o,i;return r=new Ho({}),{c(){t=Z("button"),Ie(r.$$.fragment)},l(l){t=ee(l,"BUTTON",{});var a=ae(t);Be(r.$$.fragment,a),a.forEach(H)},m(l,a){Te(l,t,a),Oe(r,t,null),n=!0,o||(i=Le(t,"click",e[7]),o=!0)},p:Ze,i(l){n||(ce(r.$$.fragment,l),n=!0)},o(l){de(r.$$.fragment,l),n=!1},d(l){l&&H(t),Re(r),o=!1,i()}}}function Jo(e){let t,r,n,o,i,l,a="X",f,d,y,w=Gt(e[5])+"",m,S,c,p=Gt(e[3])+"",g,k,v,A,O,j,E,L,M,$,D,N,z,Y,K,fe,ie,oe,ue,be,me,pe,R=!0,C=!1,q,J,we,ye;O=new Mn({props:{isFavorite:e[4]}}),L=new jn({});const B=[Yo,Ko],T=[];function x(re,b){return re[2]?1:0}D=x(e),N=T[D]=B[D](e),K=new Oo({}),ue=new Mo({});function ne(){cancelAnimationFrame(q),me.paused||(q=Fn(ne),C=!0),e[13].call(me)}return{c(){t=Z("div"),r=Z("div"),n=Z("div"),o=Z("input"),i=_e(),l=Z("button"),l.textContent=a,f=_e(),d=Z("div"),y=Z("p"),m=Ue(w),S=_e(),c=Z("p"),g=Ue(p),k=_e(),v=Z("div"),A=Z("button"),Ie(O.$$.fragment),j=_e(),E=Z("button"),Ie(L.$$.fragment),$=_e(),N.c(),z=_e(),Y=Z("button"),Ie(K.$$.fragment),ie=_e(),oe=Z("button"),Ie(ue.$$.fragment),be=_e(),me=Z("audio"),this.h()},l(re){t=ee(re,"DIV",{class:!0});var b=ae(t);r=ee(b,"DIV",{class:!0});var _=ae(r);n=ee(_,"DIV",{class:!0});var W=ae(n);o=ee(W,"INPUT",{class:!0,type:!0,min:!0,max:!0}),i=Ee(W),l=ee(W,"BUTTON",{class:!0,"data-svelte-h":!0}),at(l)!=="svelte-1crfd7b"&&(l.textContent=a),W.forEach(H),_.forEach(H),f=Ee(b),d=ee(b,"DIV",{class:!0});var X=ae(d);y=ee(X,"P",{});var ve=ae(y);m=Ce(ve,w),ve.forEach(H),S=Ee(X),c=ee(X,"P",{});var ge=ae(c);g=Ce(ge,p),ge.forEach(H),X.forEach(H),k=Ee(b),v=ee(b,"DIV",{class:!0});var U=ae(v);A=ee(U,"BUTTON",{});var xe=ae(A);Be(O.$$.fragment,xe),xe.forEach(H),j=Ee(U),E=ee(U,"BUTTON",{});var Ke=ae(E);Be(L.$$.fragment,Ke),Ke.forEach(H),$=Ee(U),N.l(U),z=Ee(U),Y=ee(U,"BUTTON",{});var $e=ae(Y);Be(K.$$.fragment,$e),$e.forEach(H),ie=Ee(U),oe=ee(U,"BUTTON",{});var ot=ae(oe);Be(ue.$$.fragment,ot),ot.forEach(H),U.forEach(H),be=Ee(b),me=ee(b,"AUDIO",{id:!0,src:!0}),ae(me).forEach(H),b.forEach(H),this.h()},h(){Q(o,"class","range flex-1"),Q(o,"type","range"),Q(o,"min","0"),Q(o,"max",e[3]),Q(l,"class","inline btn btn-sm btn-circle ml-2 relative bottom-2"),Q(n,"class","flex"),Q(r,"class","flex-1 w-full max-w-lg relative mt-2"),Q(d,"class","w-full max-w-lg flex flex-row justify-between"),E.disabled=M=e[1].playPrevious==null,Y.disabled=fe=e[1].playNext==null,Q(v,"class","h-8 flex justify-center gap-1"),Q(me,"id","audio"),me.autoplay=!0,mt(me.src,pe=e[1].src)||Q(me,"src",pe),e[3]===void 0&&Yt(()=>e[12].call(me)),Q(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(re,b){Te(re,t,b),V(t,r),V(r,n),V(n,o),Pe(o,e[0]),V(n,i),V(n,l),V(t,f),V(t,d),V(d,y),V(y,m),V(d,S),V(d,c),V(c,g),V(t,k),V(t,v),V(v,A),Oe(O,A,null),V(v,j),V(v,E),Oe(L,E,null),V(v,$),T[D].m(v,null),V(v,z),V(v,Y),Oe(K,Y,null),V(v,ie),V(v,oe),Oe(ue,oe,null),V(t,be),V(t,me),J=!0,we||(ye=[Le(o,"change",e[10]),Le(o,"input",e[10]),Le(l,"click",e[9]),Le(A,"click",e[8]),Le(E,"click",function(){zt(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),Le(Y,"click",function(){zt(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),Le(oe,"click",function(){zt(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),Le(me,"play",e[11]),Le(me,"pause",e[11]),Le(me,"durationchange",e[12]),Le(me,"timeupdate",ne),Le(me,"ended",function(){zt(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],we=!0)},p(re,[b]){e=re,(!J||b&8)&&Q(o,"max",e[3]),b&1&&Pe(o,e[0]),(!J||b&32)&&w!==(w=Gt(e[5])+"")&&bt(m,w),(!J||b&8)&&p!==(p=Gt(e[3])+"")&&bt(g,p);const _={};b&16&&(_.isFavorite=e[4]),O.$set(_),(!J||b&2&&M!==(M=e[1].playPrevious==null))&&(E.disabled=M);let W=D;D=x(e),D===W?T[D].p(e,b):(nt(),de(T[W],1,1,()=>{T[W]=null}),it(),N=T[D],N?N.p(e,b):(N=T[D]=B[D](e),N.c()),ce(N,1),N.m(v,z)),(!J||b&2&&fe!==(fe=e[1].playNext==null))&&(Y.disabled=fe),(!J||b&2&&!mt(me.src,pe=e[1].src))&&Q(me,"src",pe),b&4&&R!==(R=e[2])&&me[R?"pause":"play"](),!C&&b&1&&!isNaN(e[0])&&(me.currentTime=e[0]),C=!1},i(re){J||(ce(O.$$.fragment,re),ce(L.$$.fragment,re),ce(N),ce(K.$$.fragment,re),ce(ue.$$.fragment,re),J=!0)},o(re){de(O.$$.fragment,re),de(L.$$.fragment,re),de(N),de(K.$$.fragment,re),de(ue.$$.fragment,re),J=!1},d(re){re&&H(t),Re(O),Re(L),T[D].d(),Re(K),Re(ue),we=!1,hr(ye)}}}function Gt(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function Xo(e,t,r){let n,o,i;rt(e,st,A=>r(1,i=A));let l=null;Jt(()=>{l=document.getElementById("audio")});let a=!0,f=0,d=0;async function y(A){const O=await Er(A);navigator.mediaSession.metadata.artwork=[{src:O}]}function w(){l.play()}function m(){l.pause()}function S(){i.song&&(So(i.song.link),r(4,o=cr(i.song.link)))}function c(){st.set({isLoading:!1,song:null,album:null,src:null})}function p(){d=Pn(this.value),r(0,d)}function g(){a=this.paused,r(2,a)}function k(){f=this.duration,r(3,f)}function v(){d=this.currentTime,r(0,d)}return e.$$.update=()=>{var A,O,j;e.$$.dirty&1&&r(5,n=Math.round(d)),e.$$.dirty&2&&r(4,o=i.song!=null&&cr(i.song.link)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(A=i.song)==null?void 0:A.name,album:(O=i.album)==null?void 0:O.name}),(j=i.album)!=null&&j.image&&y(i.album.image),navigator.mediaSession.setActionHandler("nexttrack",i.playNext??null),navigator.mediaSession.setActionHandler("previoustrack",i.playPrevious??null))},[d,i,a,f,o,n,w,m,S,c,p,g,k,v]}class Qo extends Ve{constructor(t){super(),Ge(this,t,Xo,Jo,ze,{})}}function Ur(e,t,r){const n=e.slice();return n[10]=t[r],n}function Zo(e){let t,r,n,o,i;return r=new Sr({}),{c(){t=Z("button"),Ie(r.$$.fragment)},l(l){t=ee(l,"BUTTON",{});var a=ae(t);Be(r.$$.fragment,a),a.forEach(H)},m(l,a){Te(l,t,a),Oe(r,t,null),n=!0,o||(i=Le(t,"click",e[5]),o=!0)},p:Ze,i(l){n||(ce(r.$$.fragment,l),n=!0)},o(l){de(r.$$.fragment,l),n=!1},d(l){l&&H(t),Re(r),o=!1,i()}}}function ea(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Z("div"),t.innerHTML=r,this.h()},l(n){t=ee(n,"DIV",{class:!0,"data-svelte-h":!0}),at(t)!=="svelte-134bier"&&(t.innerHTML=r),this.h()},h(){Q(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,o){Te(n,t,o)},p:Ze,d(n){n&&H(t)}}}function ta(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(o){t=ee(o,"FIGURE",{});var i=ae(t);r=ee(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(H),this.h()},h(){mt(r.src,n=e[2])||Q(r,"src",n),Q(r,"alt","Albumbild"),Q(r,"class","w-48 h-48 object-scale-down")},m(o,i){Te(o,t,i),V(t,r)},p(o,i){i&4&&!mt(r.src,n=o[2])&&Q(r,"src",n)},d(o){o&&H(t)}}}function Cr(e){let t,r;return t=new Sr({}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function $r(e){let t,r,n=e[10].name+"",o,i,l=e[1].includes(e[10].link),a,f,d,y,w,m=l&&Cr();function S(){return e[8](e[10])}return{c(){t=Z("li"),r=Z("p"),o=Ue(n),i=_e(),m&&m.c(),a=_e(),this.h()},l(c){t=ee(c,"LI",{class:!0});var p=ae(t);r=ee(p,"P",{class:!0});var g=ae(r);o=Ce(g,n),g.forEach(H),i=Ee(p),m&&m.l(p),a=Ee(p),p.forEach(H),this.h()},h(){Q(r,"class","flex-1 hover:underline"),Q(t,"class",f=`cursor-pointer flex ${e[10]===e[3].song?"font-bold":""}`)},m(c,p){Te(c,t,p),V(t,r),V(r,o),V(t,i),m&&m.m(t,null),V(t,a),d=!0,y||(w=Le(t,"click",S),y=!0)},p(c,p){e=c,(!d||p&1)&&n!==(n=e[10].name+"")&&bt(o,n),p&3&&(l=e[1].includes(e[10].link)),l?m?p&3&&ce(m,1):(m=Cr(),m.c(),ce(m,1),m.m(t,a)):m&&(nt(),de(m,1,1,()=>{m=null}),it()),(!d||p&9&&f!==(f=`cursor-pointer flex ${e[10]===e[3].song?"font-bold":""}`))&&Q(t,"class",f)},i(c){d||(ce(m),d=!0)},o(c){de(m),d=!1},d(c){c&&H(t),m&&m.d(),y=!1,w()}}}function ra(e){let t,r,n,o,i,l,a,f,d;r=new Xr({props:{title:e[0].name??"Lädt...",withCloseButton:!0,$$slots:{default:[Zo]},$$scope:{ctx:e}}});function y(g,k){return g[2]?ta:ea}let w=y(e),m=w(e),S=ft(e[0].songs??[]),c=[];for(let g=0;g<S.length;g+=1)c[g]=$r(Ur(e,S,g));const p=g=>de(c[g],1,1,()=>{c[g]=null});return{c(){t=Z("main"),Ie(r.$$.fragment),n=_e(),o=Z("div"),i=Z("div"),l=Z("div"),m.c(),a=_e(),f=Z("ul");for(let g=0;g<c.length;g+=1)c[g].c();this.h()},l(g){t=ee(g,"MAIN",{class:!0});var k=ae(t);Be(r.$$.fragment,k),n=Ee(k),o=ee(k,"DIV",{class:!0});var v=ae(o);i=ee(v,"DIV",{class:!0});var A=ae(i);l=ee(A,"DIV",{class:!0});var O=ae(l);m.l(O),O.forEach(H),a=Ee(A),f=ee(A,"UL",{class:!0});var j=ae(f);for(let E=0;E<c.length;E+=1)c[E].l(j);j.forEach(H),A.forEach(H),v.forEach(H),k.forEach(H),this.h()},h(){Q(l,"class","mb-2"),Q(f,"class","mx-2"),Q(i,"class","card w-full md:w-96 bg-base-100 shadow-xl"),Q(o,"class","flex-1 flex justify-center"),Q(t,"class","flex-1 flex flex-col")},m(g,k){Te(g,t,k),Oe(r,t,null),V(t,n),V(t,o),V(o,i),V(i,l),m.m(l,null),V(i,a),V(i,f);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(f,null);d=!0},p(g,[k]){const v={};if(k&1&&(v.title=g[0].name??"Lädt..."),k&8192&&(v.$$scope={dirty:k,ctx:g}),r.$set(v),w===(w=y(g))&&m?m.p(g,k):(m.d(1),m=w(g),m&&(m.c(),m.m(l,null))),k&27){S=ft(g[0].songs??[]);let A;for(A=0;A<S.length;A+=1){const O=Ur(g,S,A);c[A]?(c[A].p(O,k),ce(c[A],1)):(c[A]=$r(O),c[A].c(),ce(c[A],1),c[A].m(f,null))}for(nt(),A=S.length;A<c.length;A+=1)p(A);it()}},i(g){if(!d){ce(r.$$.fragment,g);for(let k=0;k<S.length;k+=1)ce(c[k]);d=!0}},o(g){de(r.$$.fragment,g),c=c.filter(Boolean);for(let k=0;k<c.length;k+=1)de(c[k]);d=!1},d(g){g&&H(t),Re(r),m.d(),dr(c,g)}}}function na(e,t,r){let n,o,i;rt(e,Lt,S=>r(7,o=S)),rt(e,st,S=>r(3,i=S));let{album:l}=t,a=[],f;async function d(S){const c=n.songs.indexOf(S);Tt(n,n.songs,c),y()}async function y(){r(1,a=await wo(n.songs.map(S=>S.link)))}async function w(){for(const S of n.songs)await Rn({name:S.name,...S.link}),y()}Jt(()=>{y()});const m=S=>d(S);return e.$$set=S=>{"album"in S&&r(6,l=S.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=o.german.concat(o.russian).concat(o.instrumental).find(S=>S.folderName===l)),e.$$.dirty&1&&n.image&&Er(n.image).then(S=>r(2,f=S))},[n,a,f,i,d,w,l,o,m]}class ia extends Ve{constructor(t){super(),Ge(this,t,na,ra,ze,{album:6})}}function oa(e){let t,r='<progress class="progress w-56 mb-2 h-4"></progress>';return{c(){t=Z("div"),t.innerHTML=r,this.h()},l(n){t=ee(n,"DIV",{class:!0,"data-svelte-h":!0}),at(t)!=="svelte-m3w8dv"&&(t.innerHTML=r),this.h()},h(){Q(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,o){Te(n,t,o)},p:Ze,d(n){n&&H(t)}}}function aa(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(o){t=ee(o,"FIGURE",{});var i=ae(t);r=ee(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(H),this.h()},h(){mt(r.src,n=e[1])||Q(r,"src",n),Q(r,"alt","Albumbild"),Q(r,"class","w-48 h-48 object-scale-down")},m(o,i){Te(o,t,i),V(t,r)},p(o,i){i&2&&!mt(r.src,n=o[1])&&Q(r,"src",n)},d(o){o&&H(t)}}}function sa(e){let t,r,n,o,i=e[0].name+"",l,a,f,d,y,w,m;function S(g,k){return g[1]?aa:oa}let c=S(e),p=c(e);return{c(){t=Z("div"),p.c(),r=_e(),n=Z("div"),o=Z("p"),l=Ue(i),a=_e(),f=Z("div"),d=Z("a"),y=Ue("Öffnen"),this.h()},l(g){t=ee(g,"DIV",{id:!0,class:!0});var k=ae(t);p.l(k),r=Ee(k),n=ee(k,"DIV",{class:!0});var v=ae(n);o=ee(v,"P",{class:!0});var A=ae(o);l=Ce(A,i),A.forEach(H),v.forEach(H),a=Ee(k),f=ee(k,"DIV",{class:!0});var O=ae(f);d=ee(O,"A",{class:!0,href:!0});var j=ae(d);y=Ce(j,"Öffnen"),j.forEach(H),O.forEach(H),k.forEach(H),this.h()},h(){Q(o,"class","card-title"),Q(n,"class","card-body w-full md:w-96"),Q(d,"class","btn btn-primary capitalize"),Q(d,"href",w=`#album/${e[0].folderName}`),Q(f,"class","card-actions justify-end"),Q(t,"id",m=`album_card_${e[0].name}`),Q(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(g,k){Te(g,t,k),p.m(t,null),V(t,r),V(t,n),V(n,o),V(o,l),V(t,a),V(t,f),V(f,d),V(d,y)},p(g,[k]){c===(c=S(g))&&p?p.p(g,k):(p.d(1),p=c(g),p&&(p.c(),p.m(t,r))),k&1&&i!==(i=g[0].name+"")&&bt(l,i),k&1&&w!==(w=`#album/${g[0].folderName}`)&&Q(d,"href",w),k&1&&m!==(m=`album_card_${g[0].name}`)&&Q(t,"id",m)},i:Ze,o:Ze,d(g){g&&H(t),p.d()}}}function la(e,t,r){let{album:n}=t,o,i,l;return l=new IntersectionObserver(async a=>{a[0].isIntersecting&&!o&&(r(1,o=await Er(n.image)),l.unobserve(i),l=null)}),Jt(()=>{i=document.getElementById(`album_card_${n.name}`),l.observe(i)}),Ln(()=>{l==null||l.unobserve(i)}),e.$$set=a=>{"album"in a&&r(0,n=a.album)},[n,o]}class ua extends Ve{constructor(t){super(),Ge(this,t,la,sa,ze,{album:0})}}function Dr(e,t,r){const n=e.slice();return n[6]=t[r],n}function Fr(e,t){let r,n,o;return n=new ua({props:{album:t[6]}}),{key:e,first:null,c(){r=Ar(),Ie(n.$$.fragment),this.h()},l(i){r=Ar(),Be(n.$$.fragment,i),this.h()},h(){this.first=r},m(i,l){Te(i,r,l),Oe(n,i,l),o=!0},p(i,l){t=i;const a={};l&4&&(a.album=t[6]),n.$set(a)},i(i){o||(ce(n.$$.fragment,i),o=!0)},o(i){de(n.$$.fragment,i),o=!1},d(i){i&&H(r),Re(n,i)}}}function fa(e){let t,r,n,o,i="Alle Alben",l,a="Deutsche Alben",f,d="Russische Alben",y,w="Instrumentelle Alben",m,S,c,p,g=[],k=new Map,v,A,O,j=ft(e[2]);const E=L=>L[6].folderName;for(let L=0;L<j.length;L+=1){let M=Dr(e,j,L),$=E(M);k.set($,g[L]=Fr($,M))}return{c(){t=Z("div"),r=Z("div"),n=Z("select"),o=Z("option"),o.textContent=i,l=Z("option"),l.textContent=a,f=Z("option"),f.textContent=d,y=Z("option"),y.textContent=w,m=_e(),S=Z("input"),c=_e(),p=Z("div");for(let L=0;L<g.length;L+=1)g[L].c();this.h()},l(L){t=ee(L,"DIV",{class:!0});var M=ae(t);r=ee(M,"DIV",{class:!0});var $=ae(r);n=ee($,"SELECT",{class:!0});var D=ae(n);o=ee(D,"OPTION",{"data-svelte-h":!0}),at(o)!=="svelte-1i7obur"&&(o.textContent=i),l=ee(D,"OPTION",{"data-svelte-h":!0}),at(l)!=="svelte-1i51hln"&&(l.textContent=a),f=ee(D,"OPTION",{"data-svelte-h":!0}),at(f)!=="svelte-1opew9k"&&(f.textContent=d),y=ee(D,"OPTION",{"data-svelte-h":!0}),at(y)!=="svelte-hlo9rd"&&(y.textContent=w),D.forEach(H),m=Ee($),S=ee($,"INPUT",{class:!0,placeholder:!0,type:!0}),$.forEach(H),c=Ee(M),p=ee(M,"DIV",{class:!0});var N=ae(p);for(let z=0;z<g.length;z+=1)g[z].l(N);N.forEach(H),M.forEach(H),this.h()},h(){o.__value="all",Pe(o,o.__value),l.__value="german",Pe(l,l.__value),f.__value="russian",Pe(f,f.__value),y.__value="instrumental",Pe(y,y.__value),Q(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Yt(()=>e[4].call(n)),Q(S,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),Q(S,"placeholder","Suche"),Q(S,"type","search"),Q(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),Q(p,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),Q(t,"class","flex-1 flex flex-col overflow-hidden")},m(L,M){Te(L,t,M),V(t,r),V(r,n),V(n,o),V(n,l),V(n,f),V(n,y),wt(n,e[1],!0),V(r,m),V(r,S),Pe(S,e[0]),V(t,c),V(t,p);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(p,null);v=!0,A||(O=[Le(n,"change",e[4]),Le(S,"input",e[5])],A=!0)},p(L,[M]){M&2&&wt(n,L[1]),M&1&&S.value!==L[0]&&Pe(S,L[0]),M&4&&(j=ft(L[2]),nt(),g=Un(g,M,E,1,L,j,k,p,Cn,Fr,null,Dr),it())},i(L){if(!v){for(let M=0;M<j.length;M+=1)ce(g[M]);v=!0}},o(L){for(let M=0;M<g.length;M+=1)de(g[M]);v=!1},d(L){L&&H(t);for(let M=0;M<g.length;M+=1)g[M].d();A=!1,hr(O)}}}function ca(e,t,r){let n;rt(e,Lt,d=>r(3,n=d));let o=[],i="",l="all";function a(){l=or(this),r(1,l)}function f(){i=this.value,r(0,i)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian).concat(n.instrumental);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else if(l==="instrumental")d=n.instrumental;else throw new Error("No album selected.");r(2,o=d.filter(y=>i.toLocaleLowerCase().split(" ").every(w=>y.name.toLocaleLowerCase().includes(w))).sort((y,w)=>y.name>w.name?1:-1))}},[i,l,o,n,a,f]}class ha extends Ve{constructor(t){super(),Ge(this,t,ca,fa,ze,{})}}function xr(e,t,r){const n=e.slice();return n[22]=t[r],n}function Wr(e,t,r){const n=e.slice();return n[25]=t[r],n}function qr(e){let t,r,n="Alle Lieder",o,i,l=ft(e[3]),a=[];for(let f=0;f<l.length;f+=1)a[f]=zr(Wr(e,l,f));return{c(){t=Z("select"),r=Z("option"),r.textContent=n;for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){t=ee(f,"SELECT",{class:!0});var d=ae(t);r=ee(d,"OPTION",{"data-svelte-h":!0}),at(r)!=="svelte-1023i8w"&&(r.textContent=n);for(let y=0;y<a.length;y+=1)a[y].l(d);d.forEach(H),this.h()},h(){r.__value=null,Pe(r,r.__value),Q(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Yt(()=>e[19].call(t))},m(f,d){Te(f,t,d),V(t,r);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(t,null);wt(t,e[2],!0),o||(i=Le(t,"change",e[19]),o=!0)},p(f,d){if(d&8){l=ft(f[3]);let y;for(y=0;y<l.length;y+=1){const w=Wr(f,l,y);a[y]?a[y].p(w,d):(a[y]=zr(w),a[y].c(),a[y].m(t,null))}for(;y<a.length;y+=1)a[y].d(1);a.length=l.length}d&12&&wt(t,f[2])},d(f){f&&H(t),dr(a,f),o=!1,i()}}}function zr(e){let t,r=e[25].name+"",n,o;return{c(){t=Z("option"),n=Ue(r),this.h()},l(i){t=ee(i,"OPTION",{});var l=ae(t);n=Ce(l,r),l.forEach(H),this.h()},h(){t.__value=o=e[25],Pe(t,t.__value)},m(i,l){Te(i,t,l),V(t,n)},p(i,l){l&8&&r!==(r=i[25].name+"")&&bt(n,r),l&8&&o!==(o=i[25])&&(t.__value=o,Pe(t,t.__value))},d(i){i&&H(t)}}}function Vr(e){let t,r;return t=new Sr({}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function Gr(e){var c;let t,r,n=e[22].name+"",o,i,l=(c=e[4])==null?void 0:c.includes(Je(e[22].link)),a,f,d,y,w,m=l&&Vr();function S(){return e[21](e[22])}return{c(){t=Z("li"),r=Z("p"),o=Ue(n),i=_e(),m&&m.c(),a=_e(),this.h()},l(p){t=ee(p,"LI",{class:!0});var g=ae(t);r=ee(g,"P",{class:!0});var k=ae(r);o=Ce(k,n),k.forEach(H),i=Ee(g),m&&m.l(g),a=Ee(g),g.forEach(H),this.h()},h(){Q(r,"class","flex-1 hover:underline"),Q(t,"class",f=`cursor-pointer flex ${e[22]===e[6].song?"font-bold":""}`)},m(p,g){Te(p,t,g),V(t,r),V(r,o),V(t,i),m&&m.m(t,null),V(t,a),d=!0,y||(w=Le(t,"click",S),y=!0)},p(p,g){var k;e=p,(!d||g&32)&&n!==(n=e[22].name+"")&&bt(o,n),g&48&&(l=(k=e[4])==null?void 0:k.includes(Je(e[22].link))),l?m?g&48&&ce(m,1):(m=Vr(),m.c(),ce(m,1),m.m(t,a)):m&&(nt(),de(m,1,1,()=>{m=null}),it()),(!d||g&96&&f!==(f=`cursor-pointer flex ${e[22]===e[6].song?"font-bold":""}`))&&Q(t,"class",f)},i(p){d||(ce(m),d=!0)},o(p){de(m),d=!1},d(p){p&&H(t),m&&m.d(),y=!1,w()}}}function da(e){let t,r,n,o,i,l,a,f,d,y,w,m,S,c,p,g,k,v,A,O,j,E,L,M,$,D,N,z=e[3]&&qr(e),Y=ft(e[5]),K=[];for(let ie=0;ie<Y.length;ie+=1)K[ie]=Gr(xr(e,Y,ie));const fe=ie=>de(K[ie],1,1,()=>{K[ie]=null});return{c(){t=Z("div"),r=Z("div"),n=Z("select"),o=Z("option"),i=Ue("Alle Lieder"),l=Z("option"),a=Ue("Favoriten"),f=Z("option"),d=Ue("Heruntergeladene Lieder"),y=Z("option"),w=Ue("Deutsche Lieder"),m=Z("option"),S=Ue("Russische Lieder"),c=Z("option"),p=Ue("Instrumentelle Lieder"),g=Z("option"),k=Ue("Geistliche Lieder"),v=Z("option"),A=Ue("Песнь Возрождения"),O=_e(),z&&z.c(),j=_e(),E=Z("input"),L=_e(),M=Z("ul");for(let ie=0;ie<K.length;ie+=1)K[ie].c();this.h()},l(ie){t=ee(ie,"DIV",{class:!0});var oe=ae(t);r=ee(oe,"DIV",{class:!0});var ue=ae(r);n=ee(ue,"SELECT",{class:!0});var be=ae(n);o=ee(be,"OPTION",{});var me=ae(o);i=Ce(me,"Alle Lieder"),me.forEach(H),l=ee(be,"OPTION",{});var pe=ae(l);a=Ce(pe,"Favoriten"),pe.forEach(H),f=ee(be,"OPTION",{});var R=ae(f);d=Ce(R,"Heruntergeladene Lieder"),R.forEach(H),y=ee(be,"OPTION",{});var C=ae(y);w=Ce(C,"Deutsche Lieder"),C.forEach(H),m=ee(be,"OPTION",{});var q=ae(m);S=Ce(q,"Russische Lieder"),q.forEach(H),c=ee(be,"OPTION",{});var J=ae(c);p=Ce(J,"Instrumentelle Lieder"),J.forEach(H),g=ee(be,"OPTION",{});var we=ae(g);k=Ce(we,"Geistliche Lieder"),we.forEach(H),v=ee(be,"OPTION",{});var ye=ae(v);A=Ce(ye,"Песнь Возрождения"),ye.forEach(H),be.forEach(H),O=Ee(ue),z&&z.l(ue),j=Ee(ue),E=ee(ue,"INPUT",{class:!0,placeholder:!0,type:!0}),ue.forEach(H),L=Ee(oe),M=ee(oe,"UL",{class:!0});var B=ae(M);for(let T=0;T<K.length;T+=1)K[T].l(B);B.forEach(H),oe.forEach(H),this.h()},h(){o.__value=e[7],Pe(o,o.__value),l.__value=e[8],Pe(l,l.__value),f.__value=e[9],Pe(f,f.__value),y.__value=e[10],Pe(y,y.__value),m.__value=e[11],Pe(m,m.__value),c.__value=e[12],Pe(c,c.__value),g.__value=e[13],Pe(g,g.__value),v.__value=e[14],Pe(v,v.__value),Q(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Yt(()=>e[18].call(n)),Q(E,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),Q(E,"placeholder","Suche"),Q(E,"type","search"),Q(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),Q(M,"class","flex-1 overflow-auto mx-2"),Q(t,"class","flex-1 flex flex-col justify-center")},m(ie,oe){Te(ie,t,oe),V(t,r),V(r,n),V(n,o),V(o,i),V(n,l),V(l,a),V(n,f),V(f,d),V(n,y),V(y,w),V(n,m),V(m,S),V(n,c),V(c,p),V(n,g),V(g,k),V(n,v),V(v,A),wt(n,e[1],!0),V(r,O),z&&z.m(r,null),V(r,j),V(r,E),Pe(E,e[0]),V(t,L),V(t,M);for(let ue=0;ue<K.length;ue+=1)K[ue]&&K[ue].m(M,null);$=!0,D||(N=[Le(n,"change",e[18]),Le(E,"input",e[20])],D=!0)},p(ie,[oe]){if(oe&32642&&wt(n,ie[1]),ie[3]?z?z.p(ie,oe):(z=qr(ie),z.c(),z.m(r,j)):z&&(z.d(1),z=null),oe&1&&E.value!==ie[0]&&Pe(E,ie[0]),oe&32880){Y=ft(ie[5]);let ue;for(ue=0;ue<Y.length;ue+=1){const be=xr(ie,Y,ue);K[ue]?(K[ue].p(be,oe),ce(K[ue],1)):(K[ue]=Gr(be),K[ue].c(),ce(K[ue],1),K[ue].m(M,null))}for(nt(),ue=Y.length;ue<K.length;ue+=1)fe(ue);it()}},i(ie){if(!$){for(let oe=0;oe<Y.length;oe+=1)ce(K[oe]);$=!0}},o(ie){K=K.filter(Boolean);for(let oe=0;oe<K.length;oe+=1)de(K[oe]);$=!1},d(ie){ie&&H(t),z&&z.d(),dr(K,ie),D=!1,hr(N)}}}function pa(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}function Hr(e,t){return pa(e.name,t.name)}function ya(e,t,r){let n,o,i,l;rt(e,Lt,$=>r(17,i=$)),rt(e,st,$=>r(6,l=$));let a="";const f={getSongs:$=>nr($)},d={getSongs:$=>nr($).filter(D=>cr(D.link))},y={getSongs:$=>nr($).filter(D=>k.includes(Je(D.link)))},w={getAlbums:$=>$.german,getSongs:$=>$.german.flatMap(D=>D.songs)},m={getAlbums:$=>$.russian,getSongs:$=>$.russian.flatMap(D=>D.songs)},S={getAlbums:$=>$.instrumental,getSongs:$=>$.instrumental.flatMap(D=>D.songs)},c={getSongs:$=>$.geistlicheLieder.songs.map(D=>({...D,name:D.name.replace("_"," - ")}))},p={getSongs:$=>$.russianBook.songs};let g=f,k,v=null,A;async function O($){const D=A.indexOf($);Tt(null,A,D)}function j(){g=or(this),r(1,g),r(14,p),r(13,c),r(12,S),r(11,m),r(10,w),r(9,y),r(8,d),r(7,f)}function E(){v=or(this),r(2,v),r(3,n),r(1,g),r(17,i),r(3,n),r(1,g),r(17,i)}function L(){a=this.value,r(0,a)}const M=$=>O($);e.$$.update=()=>{e.$$.dirty&131074&&r(3,n=g.getAlbums==null?null:g.getAlbums(i)),e.$$.dirty&12&&v&&(!n||!n.includes(v))&&r(2,v=null),e.$$.dirty&131078&&(v?r(16,A=v.songs.sort(Hr)):r(16,A=g.getSongs(i).sort(Hr))),e.$$.dirty&65537&&r(5,o=A.filter($=>a.toLocaleLowerCase().split(" ").every(D=>$.name.toLocaleLowerCase().includes(D))))};{async function $(){r(4,k=await vo())}$()}return[a,g,v,n,k,o,l,f,d,y,w,m,S,c,p,O,A,i,j,E,L,M]}class ga extends Ve{constructor(t){super(),Ge(this,t,ya,da,ze,{})}}function ma(e){let t,r,n;return r=new Wo({}),{c(){t=Z("a"),Ie(r.$$.fragment),this.h()},l(o){t=ee(o,"A",{href:!0});var i=ae(t);Be(r.$$.fragment,i),i.forEach(H),this.h()},h(){Q(t,"href","/")},m(o,i){Te(o,t,i),Oe(r,t,null),n=!0},p:Ze,i(o){n||(ce(r.$$.fragment,o),n=!0)},o(o){de(r.$$.fragment,o),n=!1},d(o){o&&H(t),Re(r)}}}function ba(e){let t,r;return t=new ha({}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function wa(e){let t,r;return t=new ga({}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function va(e){let t,r,n,o,i,l,a,f,d,y,w,m,S,c,p,g;r=new Xr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[ma]},$$scope:{ctx:e}}});const k=[wa,ba],v=[];function A(O,j){return O[0].url.hash===""?0:O[0].url.hash==="#alben"?1:-1}return~(c=A(e))&&(p=v[c]=k[c](e)),{c(){t=Z("div"),Ie(r.$$.fragment),n=_e(),o=Z("div"),i=Z("a"),l=Ue("Lieder"),f=_e(),d=Z("a"),y=Ue("Alben"),m=_e(),S=Z("div"),p&&p.c(),this.h()},l(O){t=ee(O,"DIV",{class:!0});var j=ae(t);Be(r.$$.fragment,j),n=Ee(j),o=ee(j,"DIV",{class:!0});var E=ae(o);i=ee(E,"A",{class:!0,href:!0});var L=ae(i);l=Ce(L,"Lieder"),L.forEach(H),f=Ee(E),d=ee(E,"A",{class:!0,href:!0});var M=ae(d);y=Ce(M,"Alben"),M.forEach(H),E.forEach(H),m=Ee(j),S=ee(j,"DIV",{class:!0});var $=ae(S);p&&p.l($),$.forEach(H),j.forEach(H),this.h()},h(){Q(i,"class",a=`tab ${e[0].url.hash===""?"tab-active":""}`),Q(i,"href","/music"),Q(d,"class",w=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),Q(d,"href","/music#alben"),Q(o,"class","tabs justify-center"),Q(S,"class","flex-1 flex overflow-auto p-1"),Q(t,"class","flex-1 flex flex-col overflow-hidden")},m(O,j){Te(O,t,j),Oe(r,t,null),V(t,n),V(t,o),V(o,i),V(i,l),V(o,f),V(o,d),V(d,y),V(t,m),V(t,S),~c&&v[c].m(S,null),g=!0},p(O,[j]){const E={};j&2&&(E.$$scope={dirty:j,ctx:O}),r.$set(E),(!g||j&1&&a!==(a=`tab ${O[0].url.hash===""?"tab-active":""}`))&&Q(i,"class",a),(!g||j&1&&w!==(w=`tab ${O[0].url.hash==="#alben"?"tab-active":""}`))&&Q(d,"class",w);let L=c;c=A(O),c!==L&&(p&&(nt(),de(v[L],1,1,()=>{v[L]=null}),it()),~c?(p=v[c],p||(p=v[c]=k[c](O),p.c()),ce(p,1),p.m(S,null)):p=null)},i(O){g||(ce(r.$$.fragment,O),ce(p),g=!0)},o(O){de(r.$$.fragment,O),de(p),g=!1},d(O){O&&H(t),Re(r),~c&&v[c].d()}}}function _a(e,t,r){let n;return rt(e,Jr,o=>r(0,n=o)),[n]}class Ea extends Ve{constructor(t){super(),Ge(this,t,_a,va,ze,{})}}function Sa(e){let t,r;return t=new ia({props:{album:e[2]()}}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},p:Ze,i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function Aa(e){let t,r;return t=new Ea({}),{c(){Ie(t.$$.fragment)},l(n){Be(t.$$.fragment,n)},m(n,o){Oe(t,n,o),r=!0},p:Ze,i(n){r||(ce(t.$$.fragment,n),r=!0)},o(n){de(t.$$.fragment,n),r=!1},d(n){Re(t,n)}}}function Kr(e){let t,r,n,o,i=e[1].isLoading&&Yr();return n=new Qo({}),{c(){i&&i.c(),t=_e(),r=Z("div"),Ie(n.$$.fragment),this.h()},l(l){i&&i.l(l),t=Ee(l),r=ee(l,"DIV",{class:!0});var a=ae(r);Be(n.$$.fragment,a),a.forEach(H),this.h()},h(){Q(r,"class","self-center mb-2 w-full")},m(l,a){i&&i.m(l,a),Te(l,t,a),Te(l,r,a),Oe(n,r,null),o=!0},p(l,a){l[1].isLoading?i||(i=Yr(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i(l){o||(ce(n.$$.fragment,l),o=!0)},o(l){de(n.$$.fragment,l),o=!1},d(l){l&&(H(t),H(r)),i&&i.d(l),Re(n)}}}function Yr(e){let t;return{c(){t=Z("progress"),this.h()},l(r){t=ee(r,"PROGRESS",{class:!0}),ae(t).forEach(H),this.h()},h(){Q(t,"class","progress w-56 self-center mb-2")},m(r,n){Te(r,t,n)},d(r){r&&H(t)}}}function ka(e){let t,r,n,o,i,l,a;const f=[Aa,Sa],d=[];function y(m,S){return S&1&&(n=null),m[0].url.hash===""||m[0].url.hash==="#alben"?0:(n==null&&(n=!!m[0].url.hash.startsWith("#album")),n?1:-1)}~(o=y(e,-1))&&(i=d[o]=f[o](e));let w=(e[1].src!=null||e[1].isLoading)&&Kr(e);return{c(){t=Z("div"),r=Z("main"),i&&i.c(),l=_e(),w&&w.c(),this.h()},l(m){t=ee(m,"DIV",{class:!0});var S=ae(t);r=ee(S,"MAIN",{class:!0});var c=ae(r);i&&i.l(c),c.forEach(H),l=Ee(S),w&&w.l(S),S.forEach(H),this.h()},h(){Q(r,"class","overflow-auto flex-1 flex flex-col"),Q(t,"class","w-full h-full flex flex-col")},m(m,S){Te(m,t,S),V(t,r),~o&&d[o].m(r,null),V(t,l),w&&w.m(t,null),a=!0},p(m,[S]){let c=o;o=y(m,S),o===c?~o&&d[o].p(m,S):(i&&(nt(),de(d[c],1,1,()=>{d[c]=null}),it()),~o?(i=d[o],i?i.p(m,S):(i=d[o]=f[o](m),i.c()),ce(i,1),i.m(r,null)):i=null),m[1].src!=null||m[1].isLoading?w?(w.p(m,S),S&2&&ce(w,1)):(w=Kr(m),w.c(),ce(w,1),w.m(t,null)):w&&(nt(),de(w,1,1,()=>{w=null}),it())},i(m){a||(ce(i),ce(w),a=!0)},o(m){de(i),de(w),a=!1},d(m){m&&H(t),~o&&d[o].d(),w&&w.d()}}}function Ia(e,t,r){let n,o;rt(e,Jr,l=>r(0,n=l)),rt(e,st,l=>r(1,o=l)),Jt(()=>{(async()=>{$n()&&(Kt.getGlobalApi().userAgent=null),po().then(Lt.set),navigator.onLine&&await _o().then(async a=>{Lt.set(a),await yo(a)})})()});function i(){return decodeURI(n.url.hash.substring(7))}return[n,o,i]}class Pa extends Ve{constructor(t){super(),Ge(this,t,Ia,ka,ze,{})}}export{Pa as component};
