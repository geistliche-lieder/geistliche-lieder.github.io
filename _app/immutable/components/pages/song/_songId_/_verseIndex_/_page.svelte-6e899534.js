import{S as $,i as x,s as ee,a as O,k as b,q as C,c as A,l as w,m as k,r as q,h as u,n as _,b as M,D as d,K as X,E as F,U as te,V as le,J as G,o as se,Y as ne,e as J}from"../../../../../chunks/index-37370bd0.js";import{c as I}from"../../../../../chunks/singletons-4044544d.js";import{p as ae}from"../../../../../chunks/stores-1899a0d9.js";import{A as oe,e as re,f as ie,h as fe,m as Y,a as ce}from"../../../../../chunks/song-28870bc2.js";I.disable_scroll_handling;const j=I.goto;I.invalidate;I.invalidateAll;I.prefetch;I.prefetch_routes;I.before_navigate;const ue=I.after_navigate,{document:he}=ne;function z(n,l,t){const e=n.slice();return e[14]=l[t],e[16]=t,e}function Q(n){let l,t,e;return{c(){l=b("a"),t=C("arrow_back"),this.h()},l(s){l=w(s,"A",{class:!0,href:!0});var i=k(l);t=q(i,"arrow_back"),i.forEach(u),this.h()},h(){_(l,"class","material-symbols-outlined btn btn-sm btn-circle"),_(l,"href",e=`${n[0]-2}`)},m(s,i){M(s,l,i),d(l,t)},p(s,i){i&1&&e!==(e=`${s[0]-2}`)&&_(l,"href",e)},d(s){s&&u(l)}}}function R(n){let l,t=Y(n[14],n[6])+"",e;return{c(){l=b("p"),this.h()},l(s){l=w(s,"P",{class:!0});var i=k(l);i.forEach(u),this.h()},h(){_(l,"class",e=`w-full ${n[7](n[2],n[16])} text-3xl`)},m(s,i){M(s,l,i),l.innerHTML=t},p(s,i){i&4&&t!==(t=Y(s[14],s[6])+"")&&(l.innerHTML=t),i&4&&e!==(e=`w-full ${s[7](s[2],s[16])} text-3xl`)&&_(l,"class",e)},d(s){s&&u(l)}}}function W(n){let l,t=(!n[3].song.M||n[16]===n[2].L.length-1&&n[5]||n[16]%2===0||n[16]!==n[2].L.length-1&&n[4])&&R(n);return{c(){t&&t.c(),l=J()},l(e){t&&t.l(e),l=J()},m(e,s){t&&t.m(e,s),M(e,l,s)},p(e,s){!e[3].song.M||e[16]===e[2].L.length-1&&e[5]||e[16]%2===0||e[16]!==e[2].L.length-1&&e[4]?t?t.p(e,s):(t=R(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&u(l)}}}function Z(n){let l,t;return{c(){l=b("p"),t=C("-----"),this.h()},l(e){l=w(e,"P",{class:!0});var s=k(l);t=q(s,"-----"),s.forEach(u),this.h()},h(){_(l,"class","w-full text-3xl")},m(e,s){M(e,l,s),d(l,t)},d(e){e&&u(l)}}}function de(n){let l,t,e,s,i,g=n[3].song.T+"",N,L,E,v,y,T,m,S,V,B,a=n[0]>0&&Q(n),h=n[2].L,f=[];for(let o=0;o<h.length;o+=1)f[o]=W(z(n,h,o));let c=n[1]-1===n[0]&&Z();return{c(){l=O(),t=b("div"),e=b("div"),s=b("div"),i=b("p"),N=C(g),L=O(),a&&a.c(),E=O(),v=b("button"),y=C("X"),T=O(),m=b("div");for(let o=0;o<f.length;o+=1)f[o].c();S=O(),c&&c.c(),this.h()},l(o){l=A(o),t=w(o,"DIV",{id:!0,class:!0});var p=k(t);e=w(p,"DIV",{class:!0});var r=k(e);s=w(r,"DIV",{class:!0});var D=k(s);i=w(D,"P",{class:!0});var K=k(i);N=q(K,g),K.forEach(u),D.forEach(u),L=A(r),a&&a.l(r),E=A(r),v=w(r,"BUTTON",{class:!0});var U=k(v);y=q(U,"X"),U.forEach(u),r.forEach(u),T=A(p),m=w(p,"DIV",{class:!0});var P=k(m);for(let H=0;H<f.length;H+=1)f[H].l(P);S=A(P),c&&c.l(P),P.forEach(u),p.forEach(u),this.h()},h(){_(i,"class","whitespace-nowrap md:ml-8 text-left md:text-center text-ellipsis text-md md:text-1xl font-bold self-center"),_(s,"class","flex-1 flex overflow-hidden ml-2"),_(v,"class","btn btn-sm btn-circle"),_(e,"class","w-full flex mt-2 mr-2 gap-1"),_(m,"class","overflow-auto flex flex-col items-center w-full h-full"),_(t,"id","song"),_(t,"class","flex-1 flex flex-col items-center overflow-hidden w-full")},m(o,p){M(o,l,p),M(o,t,p),d(t,e),d(e,s),d(s,i),d(i,N),d(e,L),a&&a.m(e,null),d(e,E),d(e,v),d(v,y),d(t,T),d(t,m);for(let r=0;r<f.length;r+=1)f[r].m(m,null);d(m,S),c&&c.m(m,null),V||(B=[X(he.body,"click",n[8]),X(v,"click",n[9])],V=!0)},p(o,[p]){if(o[0]>0?a?a.p(o,p):(a=Q(o),a.c(),a.m(e,E)):a&&(a.d(1),a=null),p&252){h=o[2].L;let r;for(r=0;r<h.length;r+=1){const D=z(o,h,r);f[r]?f[r].p(D,p):(f[r]=W(D),f[r].c(),f[r].m(m,S))}for(;r<f.length;r+=1)f[r].d(1);f.length=h.length}o[1]-1===o[0]?c||(c=Z(),c.c(),c.m(m,null)):c&&(c.d(1),c=null)},i:F,o:F,d(o){o&&u(l),o&&u(t),a&&a.d(),te(f,o),c&&c.d(),V=!1,le(B)}}}function _e(n,l,t){let e,s;G(n,ae,a=>t(10,e=a)),G(n,ce,a=>t(11,s=a));const i=e.params.songId;let g=0,N;const L=s[oe].find(a=>a.song.I===i);function E(){const a=e.params.verseIndex;t(0,g=Number.parseInt(a)),g===Number.NaN&&window.history.back();const h=L.song.O.flatMap(f=>L.song.V.filter(c=>c.I===f));return t(1,N=h.length),h.length<=g?(j(`${window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/"))}`,{replaceState:!0}),h[g-1]):h[g]}let v=E();ue(()=>{t(2,v=E())});const y=re(),T=ie(),m=fe();function S(a,h){return L.song.M?h===a.L.length-1?"text-green-600":h%2===1?"text-yellow-600":"":""}function V(){j(`${g+1}`,{replaceState:!0})}return se(()=>{const a=document.getElementById("song");a==null||a.requestFullscreen(),screen.orientation.lock("landscape")}),[g,N,v,L,y,T,m,S,V,a=>{a.preventDefault(),a.stopPropagation(),window.history.back()}]}class be extends ${constructor(l){super(),x(this,l,_e,de,ee,{})}}export{be as default};
