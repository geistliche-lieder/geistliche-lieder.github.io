import{S as $,i as x,s as ee,a as V,k as b,q as C,c as A,l as w,m as k,r as q,h as u,n as m,b as P,D as d,K as X,E as j,U as te,V as le,J as F,o as se,Y as ne,e as G}from"../../../../../chunks/index-37370bd0.js";import{c as I}from"../../../../../chunks/singletons-23ab2d60.js";import{p as oe}from"../../../../../chunks/stores-e1391083.js";import{A as ae,f as re,h as ie,j as fe,n as J,a as ce}from"../../../../../chunks/song-8524cbf7.js";I.disable_scroll_handling;const Y=I.goto;I.invalidate;I.invalidateAll;I.prefetch;I.prefetch_routes;I.before_navigate;const ue=I.after_navigate,{document:he}=ne;function z(n,l,t){const e=n.slice();return e[14]=l[t],e[16]=t,e}function Q(n){let l,t,e;return{c(){l=b("a"),t=C("arrow_back"),this.h()},l(s){l=w(s,"A",{class:!0,href:!0});var i=k(l);t=q(i,"arrow_back"),i.forEach(u),this.h()},h(){m(l,"class","material-symbols-outlined btn btn-sm btn-circle"),m(l,"href",e=`${n[0]-2}`)},m(s,i){P(s,l,i),d(l,t)},p(s,i){i&1&&e!==(e=`${s[0]-2}`)&&m(l,"href",e)},d(s){s&&u(l)}}}function R(n){let l,t=J(n[14],n[6])+"",e;return{c(){l=b("p"),this.h()},l(s){l=w(s,"P",{class:!0});var i=k(l);i.forEach(u),this.h()},h(){m(l,"class",e=`w-full ${n[7](n[2],n[16])} text-3xl`)},m(s,i){P(s,l,i),l.innerHTML=t},p(s,i){i&4&&t!==(t=J(s[14],s[6])+"")&&(l.innerHTML=t),i&4&&e!==(e=`w-full ${s[7](s[2],s[16])} text-3xl`)&&m(l,"class",e)},d(s){s&&u(l)}}}function W(n){let l,t=(!n[3].song.M||n[16]===n[2].L.length-1&&n[5]||n[16]%2===0||n[16]!==n[2].L.length-1&&n[4])&&R(n);return{c(){t&&t.c(),l=G()},l(e){t&&t.l(e),l=G()},m(e,s){t&&t.m(e,s),P(e,l,s)},p(e,s){!e[3].song.M||e[16]===e[2].L.length-1&&e[5]||e[16]%2===0||e[16]!==e[2].L.length-1&&e[4]?t?t.p(e,s):(t=R(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&u(l)}}}function Z(n){let l,t;return{c(){l=b("p"),t=C("-----"),this.h()},l(e){l=w(e,"P",{class:!0});var s=k(l);t=q(s,"-----"),s.forEach(u),this.h()},h(){m(l,"class","w-full text-3xl")},m(e,s){P(e,l,s),d(l,t)},d(e){e&&u(l)}}}function de(n){let l,t,e,s,i,g=n[3].song.T+"",E,L,S,v,M,y,_,N,O,B,o=n[0]>0&&Q(n),h=n[2].L,f=[];for(let a=0;a<h.length;a+=1)f[a]=W(z(n,h,a));let c=n[1]-1===n[0]&&Z();return{c(){l=V(),t=b("div"),e=b("div"),s=b("div"),i=b("p"),E=C(g),L=V(),o&&o.c(),S=V(),v=b("button"),M=C("X"),y=V(),_=b("div");for(let a=0;a<f.length;a+=1)f[a].c();N=V(),c&&c.c(),this.h()},l(a){l=A(a),t=w(a,"DIV",{id:!0,class:!0});var p=k(t);e=w(p,"DIV",{class:!0});var r=k(e);s=w(r,"DIV",{class:!0});var T=k(s);i=w(T,"P",{class:!0});var K=k(i);E=q(K,g),K.forEach(u),T.forEach(u),L=A(r),o&&o.l(r),S=A(r),v=w(r,"BUTTON",{class:!0});var U=k(v);M=q(U,"X"),U.forEach(u),r.forEach(u),y=A(p),_=w(p,"DIV",{class:!0});var D=k(_);for(let H=0;H<f.length;H+=1)f[H].l(D);N=A(D),c&&c.l(D),D.forEach(u),p.forEach(u),this.h()},h(){m(i,"class","whitespace-nowrap md:ml-8 text-left md:text-center text-ellipsis text-md md:text-1xl font-bold self-center"),m(s,"class","flex-1 flex overflow-hidden ml-2"),m(v,"class","btn btn-sm btn-circle"),m(e,"class","w-full flex mt-2 mr-2 gap-1"),m(_,"class","overflow-auto flex flex-col items-center w-full h-full"),m(t,"id","song"),m(t,"class","flex-1 flex flex-col items-center overflow-hidden w-full")},m(a,p){P(a,l,p),P(a,t,p),d(t,e),d(e,s),d(s,i),d(i,E),d(e,L),o&&o.m(e,null),d(e,S),d(e,v),d(v,M),d(t,y),d(t,_);for(let r=0;r<f.length;r+=1)f[r].m(_,null);d(_,N),c&&c.m(_,null),O||(B=[X(he.body,"click",n[8]),X(v,"click",n[9])],O=!0)},p(a,[p]){if(a[0]>0?o?o.p(a,p):(o=Q(a),o.c(),o.m(e,S)):o&&(o.d(1),o=null),p&252){h=a[2].L;let r;for(r=0;r<h.length;r+=1){const T=z(a,h,r);f[r]?f[r].p(T,p):(f[r]=W(T),f[r].c(),f[r].m(_,N))}for(;r<f.length;r+=1)f[r].d(1);f.length=h.length}a[1]-1===a[0]?c||(c=Z(),c.c(),c.m(_,null)):c&&(c.d(1),c=null)},i:j,o:j,d(a){a&&u(l),a&&u(t),o&&o.d(),te(f,a),c&&c.d(),O=!1,le(B)}}}function me(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function _e(n,l,t){let e,s;F(n,oe,o=>t(10,e=o)),F(n,ce,o=>t(11,s=o));const i=e.params.songId;let g=0,E;const L=s[ae].find(o=>o.song.I===i);function S(){const o=e.params.verseIndex;t(0,g=Number.parseInt(o)),g===Number.NaN&&window.history.back();const h=L.song.O.flatMap(f=>L.song.V.filter(c=>c.I===f));return t(1,E=h.length),h.length<=g?(Y(`${window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/"))}`,{replaceState:!0}),h[g-1]):h[g]}let v=S();ue(()=>{t(2,v=S())});const M=re(),y=ie(),_=fe();function N(o,h){return L.song.M?h===o.L.length-1?"text-green-600":h%2===1?"text-yellow-600":"":""}function O(){Y(`${g+1}`,{replaceState:!0})}return se(()=>{if(me())return;const o=document.getElementById("song");o==null||o.requestFullscreen(),screen.orientation.lock("landscape")}),[g,E,v,L,M,y,_,N,O,o=>{o.preventDefault(),o.stopPropagation(),window.history.back()}]}class we extends ${constructor(l){super(),x(this,l,_e,de,ee,{})}}export{we as default};
