import{S as ot,i as at,s as st,k as Z,a as Se,q as be,l as Q,m as te,c as Ae,r as we,h as G,n as K,J as ut,K as Ut,b as Ee,F as V,L as ft,M as Ie,A as Ue,N as Xt,G as ze,o as Ct,O as Rt,P as dn,Q as pn,v as Xe,w as Ze,x as Qe,f as Le,t as je,y as et,R as Zt,u as Nt,T as yn,U as ct,g as Pt,V as gn,d as jt,e as lr,W as mn,X as Vt}from"../../../../chunks/index-c9ad3d2c.js";import{p as jr}from"../../../../chunks/stores-52904201.js";import{T as Mr,i as bn}from"../../../../chunks/TitleBar-17d224f1.js";import{c as He,d as St}from"../../../../chunks/store-17e28e4d.js";const wn=(e,t)=>t.some(r=>e instanceof r);let ur,fr;function vn(){return ur||(ur=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _n(){return fr||(fr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ur=new WeakMap,zt=new WeakMap,Cr=new WeakMap,Dt=new WeakMap,Qt=new WeakMap;function En(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",l)},s=()=>{r(Ke(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Ur.set(r,e)}).catch(()=>{}),Qt.set(t,e),t}function Sn(e){if(zt.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",l),e.removeEventListener("abort",l)},s=()=>{r(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",l),e.addEventListener("abort",l)});zt.set(e,t)}let Gt={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return zt.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Cr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ke(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function An(e){Gt=e(Gt)}function kn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Ft(this),t,...r);return Cr.set(n,t.sort?t.sort():[t]),Ke(n)}:_n().includes(e)?function(...t){return e.apply(Ft(this),t),Ke(Ur.get(this))}:function(...t){return Ke(e.apply(Ft(this),t))}}function In(e){return typeof e=="function"?kn(e):(e instanceof IDBTransaction&&Sn(e),wn(e,vn())?new Proxy(e,Gt):e)}function Ke(e){if(e instanceof IDBRequest)return En(e);if(Dt.has(e))return Dt.get(e);const t=In(e);return t!==e&&(Dt.set(e,t),Qt.set(t,e)),t}const Ft=e=>Qt.get(e);function Bn(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const l=indexedDB.open(e,t),o=Ke(l);return n&&l.addEventListener("upgradeneeded",f=>{n(Ke(l.result),f.oldVersion,f.newVersion,Ke(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const On=["get","getKey","getAll","getAllKeys","count"],Rn=["put","add","delete","clear"],$t=new Map;function cr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($t.get(t))return $t.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Rn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||On.includes(r)))return;const s=async function(l,...o){const f=this.transaction(l,a?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&f.done]))[0]};return $t.set(t,s),s}An(e=>({...e,get:(t,r,n)=>cr(t,r)||e.get(t,r,n),has:(t,r)=>!!cr(t,r)||e.has(t,r)}));var Tn=Object.create,er=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,Pn=Object.getOwnPropertyNames,jn=Object.getPrototypeOf,Mn=Object.prototype.hasOwnProperty,Un=e=>er(e,"__esModule",{value:!0}),Cn=(e,t)=>()=>(e&&(t=e(e=0)),t),oe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Nn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Pn(t))!Mn.call(e,a)&&(r||a!=="default")&&er(e,a,{get:()=>t[a],enumerable:!(n=Ln(t,a))||n.enumerable});return e},xe=(e,t)=>Nn(Un(er(e!=null?Tn(jn(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),xn=oe(e=>{X(),e.byteLength=f,e.toByteArray=p,e.fromByteArray=S;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=a.length;s<l;++s)t[s]=a[s],r[a.charCodeAt(s)]=s;var s,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(c){var y=c.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=c.indexOf("=");b===-1&&(b=y);var A=b===y?0:4-b%4;return[b,A]}function f(c){var y=o(c),b=y[0],A=y[1];return(b+A)*3/4-A}function d(c,y,b){return(y+b)*3/4-b}function p(c){var y,b=o(c),A=b[0],E=b[1],k=new n(d(c,A,E)),T=0,L=E>0?A-4:A,g;for(g=0;g<L;g+=4)y=r[c.charCodeAt(g)]<<18|r[c.charCodeAt(g+1)]<<12|r[c.charCodeAt(g+2)]<<6|r[c.charCodeAt(g+3)],k[T++]=y>>16&255,k[T++]=y>>8&255,k[T++]=y&255;return E===2&&(y=r[c.charCodeAt(g)]<<2|r[c.charCodeAt(g+1)]>>4,k[T++]=y&255),E===1&&(y=r[c.charCodeAt(g)]<<10|r[c.charCodeAt(g+1)]<<4|r[c.charCodeAt(g+2)]>>2,k[T++]=y>>8&255,k[T++]=y&255),k}function m(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function w(c,y,b){for(var A,E=[],k=y;k<b;k+=3)A=(c[k]<<16&16711680)+(c[k+1]<<8&65280)+(c[k+2]&255),E.push(m(A));return E.join("")}function S(c){for(var y,b=c.length,A=b%3,E=[],k=16383,T=0,L=b-A;T<L;T+=k)E.push(w(c,T,T+k>L?L:T+k));return A===1?(y=c[b-1],E.push(t[y>>2]+t[y<<4&63]+"==")):A===2&&(y=(c[b-2]<<8)+c[b-1],E.push(t[y>>10]+t[y>>4&63]+t[y<<2&63]+"=")),E.join("")}}),Dn=oe(e=>{X(),e.read=function(t,r,n,a,s){var l,o,f=s*8-a-1,d=(1<<f)-1,p=d>>1,m=-7,w=n?s-1:0,S=n?-1:1,c=t[r+w];for(w+=S,l=c&(1<<-m)-1,c>>=-m,m+=f;m>0;l=l*256+t[r+w],w+=S,m-=8);for(o=l&(1<<-m)-1,l>>=-m,m+=a;m>0;o=o*256+t[r+w],w+=S,m-=8);if(l===0)l=1-p;else{if(l===d)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-p}return(c?-1:1)*o*Math.pow(2,l-a)},e.write=function(t,r,n,a,s,l){var o,f,d,p=l*8-s-1,m=(1<<p)-1,w=m>>1,S=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=a?0:l-1,y=a?1:-1,b=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=m):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+w>=1?r+=S/d:r+=S*Math.pow(2,1-w),r*d>=2&&(o++,d/=2),o+w>=m?(f=0,o=m):o+w>=1?(f=(r*d-1)*Math.pow(2,s),o=o+w):(f=r*Math.pow(2,w-1)*Math.pow(2,s),o=0));s>=8;t[n+c]=f&255,c+=y,f/=256,s-=8);for(o=o<<s|f,p+=s;p>0;t[n+c]=o&255,c+=y,o/=256,p-=8);t[n+c-y]|=b*128}}),It=oe(e=>{X();var t=xn(),r=Dn(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;var a=2147483647;e.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,h){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(i)}return f(i,u,h)}o.poolSize=8192;function f(i,u,h){if(typeof i=="string")return w(i,u);if(ArrayBuffer.isView(i))return c(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Me(i,ArrayBuffer)||i&&Me(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Me(i,SharedArrayBuffer)||i&&Me(i.buffer,SharedArrayBuffer)))return y(i,u,h);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=i.valueOf&&i.valueOf();if(I!=null&&I!==i)return o.from(I,u,h);let j=b(i);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,h){return f(i,u,h)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function p(i,u,h){return d(i),i<=0?l(i):u!==void 0?typeof h=="string"?l(i).fill(u,h):l(i).fill(u):l(i)}o.alloc=function(i,u,h){return p(i,u,h)};function m(i){return d(i),l(i<0?0:A(i)|0)}o.allocUnsafe=function(i){return m(i)},o.allocUnsafeSlow=function(i){return m(i)};function w(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=k(i,u)|0,I=l(h),j=I.write(i,u);return j!==h&&(I=I.slice(0,j)),I}function S(i){let u=i.length<0?0:A(i.length)|0,h=l(u);for(let I=0;I<u;I+=1)h[I]=i[I]&255;return h}function c(i){if(Me(i,Uint8Array)){let u=new Uint8Array(i);return y(u.buffer,u.byteOffset,u.byteLength)}return S(i)}function y(i,u,h){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let I;return u===void 0&&h===void 0?I=new Uint8Array(i):h===void 0?I=new Uint8Array(i,u):I=new Uint8Array(i,u,h),Object.setPrototypeOf(I,o.prototype),I}function b(i){if(o.isBuffer(i)){let u=A(i.length)|0,h=l(u);return h.length===0||i.copy(h,0,0,u),h}if(i.length!==void 0)return typeof i.length!="number"||yt(i.length)?l(0):S(i);if(i.type==="Buffer"&&Array.isArray(i.data))return S(i.data)}function A(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return i|0}function E(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Me(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Me(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let h=i.length,I=u.length;for(let j=0,D=Math.min(h,I);j<D;++j)if(i[j]!==u[j]){h=i[j],I=u[j];break}return h<I?-1:I<h?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<i.length;++h)u+=i[h].length;let I=o.allocUnsafe(u),j=0;for(h=0;h<i.length;++h){let D=i[h];if(Me(D,Uint8Array))j+D.length>I.length?(o.isBuffer(D)||(D=o.from(D)),D.copy(I,j)):Uint8Array.prototype.set.call(I,D,j);else if(o.isBuffer(D))D.copy(I,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=D.length}return I};function k(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Me(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let h=i.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&h===0)return 0;let j=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return me(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return We(i).length;default:if(j)return I?-1:me(i).length;u=(""+u).toLowerCase(),j=!0}}o.byteLength=k;function T(i,u,h){let I=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return ye(this,u,h);case"utf8":case"utf-8":return ne(this,u,h);case"ascii":return ce(this,u,h);case"latin1":case"binary":return ge(this,u,h);case"base64":return Y(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,u,h);default:if(I)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),I=!0}}o.prototype._isBuffer=!0;function L(i,u,h){let I=i[u];i[u]=i[h],i[h]=I}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)L(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)L(this,u,u+3),L(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)L(this,u,u+7),L(this,u+1,u+6),L(this,u+2,u+5),L(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?ne(this,0,i):T.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,h,I,j){if(Me(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),h===void 0&&(h=i?i.length:0),I===void 0&&(I=0),j===void 0&&(j=this.length),u<0||h>i.length||I<0||j>this.length)throw new RangeError("out of range index");if(I>=j&&u>=h)return 0;if(I>=j)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,I>>>=0,j>>>=0,this===i)return 0;let D=j-I,H=h-u,ve=Math.min(D,H),Te=this.slice(I,j),ke=i.slice(u,h);for(let _e=0;_e<ve;++_e)if(Te[_e]!==ke[_e]){D=Te[_e],H=ke[_e];break}return D<H?-1:H<D?1:0};function g(i,u,h,I,j){if(i.length===0)return-1;if(typeof h=="string"?(I=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,yt(h)&&(h=j?0:i.length-1),h<0&&(h=i.length+h),h>=i.length){if(j)return-1;h=i.length-1}else if(h<0)if(j)h=0;else return-1;if(typeof u=="string"&&(u=o.from(u,I)),o.isBuffer(u))return u.length===0?-1:R(i,u,h,I,j);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(i,u,h):Uint8Array.prototype.lastIndexOf.call(i,u,h):R(i,[u],h,I,j);throw new TypeError("val must be string, number or Buffer")}function R(i,u,h,I,j){let D=1,H=i.length,ve=u.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(i.length<2||u.length<2)return-1;D=2,H/=2,ve/=2,h/=2}function Te(_e,Oe){return D===1?_e[Oe]:_e.readUInt16BE(Oe*D)}let ke;if(j){let _e=-1;for(ke=h;ke<H;ke++)if(Te(i,ke)===Te(u,_e===-1?0:ke-_e)){if(_e===-1&&(_e=ke),ke-_e+1===ve)return _e*D}else _e!==-1&&(ke-=ke-_e),_e=-1}else for(h+ve>H&&(h=H-ve),ke=h;ke>=0;ke--){let _e=!0;for(let Oe=0;Oe<ve;Oe++)if(Te(i,ke+Oe)!==Te(u,Oe)){_e=!1;break}if(_e)return ke}return-1}o.prototype.includes=function(i,u,h){return this.indexOf(i,u,h)!==-1},o.prototype.indexOf=function(i,u,h){return g(this,i,u,h,!0)},o.prototype.lastIndexOf=function(i,u,h){return g(this,i,u,h,!1)};function M(i,u,h,I){h=Number(h)||0;let j=i.length-h;I?(I=Number(I),I>j&&(I=j)):I=j;let D=u.length;I>D/2&&(I=D/2);let H;for(H=0;H<I;++H){let ve=parseInt(u.substr(H*2,2),16);if(yt(ve))return H;i[h+H]=ve}return H}function q(i,u,h,I){return Ge(me(u,i.length-h),i,h,I)}function x(i,u,h,I){return Ge(de(u),i,h,I)}function C(i,u,h,I){return Ge(We(u),i,h,I)}function z(i,u,h,I){return Ge(U(u,i.length-h),i,h,I)}o.prototype.write=function(i,u,h,I){if(u===void 0)I="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")I=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,I===void 0&&(I="utf8")):(I=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let j=this.length-u;if((h===void 0||h>j)&&(h=j),i.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let D=!1;for(;;)switch(I){case"hex":return M(this,i,u,h);case"utf8":case"utf-8":return q(this,i,u,h);case"ascii":case"latin1":case"binary":return x(this,i,u,h);case"base64":return C(this,i,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,i,u,h);default:if(D)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),D=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(i,u,h){return u===0&&h===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(u,h))}function ne(i,u,h){h=Math.min(i.length,h);let I=[],j=u;for(;j<h;){let D=i[j],H=null,ve=D>239?4:D>223?3:D>191?2:1;if(j+ve<=h){let Te,ke,_e,Oe;switch(ve){case 1:D<128&&(H=D);break;case 2:Te=i[j+1],(Te&192)===128&&(Oe=(D&31)<<6|Te&63,Oe>127&&(H=Oe));break;case 3:Te=i[j+1],ke=i[j+2],(Te&192)===128&&(ke&192)===128&&(Oe=(D&15)<<12|(Te&63)<<6|ke&63,Oe>2047&&(Oe<55296||Oe>57343)&&(H=Oe));break;case 4:Te=i[j+1],ke=i[j+2],_e=i[j+3],(Te&192)===128&&(ke&192)===128&&(_e&192)===128&&(Oe=(D&15)<<18|(Te&63)<<12|(ke&63)<<6|_e&63,Oe>65535&&Oe<1114112&&(H=Oe))}}H===null?(H=65533,ve=1):H>65535&&(H-=65536,I.push(H>>>10&1023|55296),H=56320|H&1023),I.push(H),j+=ve}return pe(I)}var ae=4096;function pe(i){let u=i.length;if(u<=ae)return String.fromCharCode.apply(String,i);let h="",I=0;for(;I<u;)h+=String.fromCharCode.apply(String,i.slice(I,I+=ae));return h}function ce(i,u,h){let I="";h=Math.min(i.length,h);for(let j=u;j<h;++j)I+=String.fromCharCode(i[j]&127);return I}function ge(i,u,h){let I="";h=Math.min(i.length,h);for(let j=u;j<h;++j)I+=String.fromCharCode(i[j]);return I}function ye(i,u,h){let I=i.length;(!u||u<0)&&(u=0),(!h||h<0||h>I)&&(h=I);let j="";for(let D=u;D<h;++D)j+=Ot[i[D]];return j}function Be(i,u,h){let I=i.slice(u,h),j="";for(let D=0;D<I.length-1;D+=2)j+=String.fromCharCode(I[D]+I[D+1]*256);return j}o.prototype.slice=function(i,u){let h=this.length;i=~~i,u=u===void 0?h:~~u,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<i&&(u=i);let I=this.subarray(i,u);return Object.setPrototypeOf(I,o.prototype),I};function le(i,u,h){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>h)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||le(i,u,this.length);let I=this[i],j=1,D=0;for(;++D<u&&(j*=256);)I+=this[i+D]*j;return I},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||le(i,u,this.length);let I=this[i+--u],j=1;for(;u>0&&(j*=256);)I+=this[i+--u]*j;return I},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||le(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||le(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||le(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||le(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||le(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=Ce(function(i){i=i>>>0,v(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&_(i,this.length-8);let I=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,j=this[++i]+this[++i]*2**8+this[++i]*2**16+h*2**24;return BigInt(I)+(BigInt(j)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ce(function(i){i=i>>>0,v(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&_(i,this.length-8);let I=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],j=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h;return(BigInt(I)<<BigInt(32))+BigInt(j)}),o.prototype.readIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||le(i,u,this.length);let I=this[i],j=1,D=0;for(;++D<u&&(j*=256);)I+=this[i+D]*j;return j*=128,I>=j&&(I-=Math.pow(2,8*u)),I},o.prototype.readIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||le(i,u,this.length);let I=u,j=1,D=this[i+--I];for(;I>0&&(j*=256);)D+=this[i+--I]*j;return j*=128,D>=j&&(D-=Math.pow(2,8*u)),D},o.prototype.readInt8=function(i,u){return i=i>>>0,u||le(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||le(i,2,this.length);let h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||le(i,2,this.length);let h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||le(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||le(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=Ce(function(i){i=i>>>0,v(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&_(i,this.length-8);let I=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(h<<24);return(BigInt(I)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=Ce(function(i){i=i>>>0,v(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&_(i,this.length-8);let I=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(I)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||le(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||le(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||le(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||le(i,8,this.length),r.read(this,i,!1,52,8)};function O(i,u,h,I,j,D){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>j||u<D)throw new RangeError('"value" argument is out of bounds');if(h+I>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,h,I){if(i=+i,u=u>>>0,h=h>>>0,!I){let H=Math.pow(2,8*h)-1;O(this,i,u,h,H,0)}let j=1,D=0;for(this[u]=i&255;++D<h&&(j*=256);)this[u+D]=i/j&255;return u+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,h,I){if(i=+i,u=u>>>0,h=h>>>0,!I){let H=Math.pow(2,8*h)-1;O(this,i,u,h,H,0)}let j=h-1,D=1;for(this[u+j]=i&255;--j>=0&&(D*=256);)this[u+j]=i/D&255;return u+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function N(i,u,h,I,j){ue(u,I,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,h}function $(i,u,h,I,j){ue(u,I,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h+7]=D,D=D>>8,i[h+6]=D,D=D>>8,i[h+5]=D,D=D>>8,i[h+4]=D;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h+3]=H,H=H>>8,i[h+2]=H,H=H>>8,i[h+1]=H,H=H>>8,i[h]=H,h+8}o.prototype.writeBigUInt64LE=Ce(function(i,u=0){return N(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ce(function(i,u=0){return $(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,h,I){if(i=+i,u=u>>>0,!I){let ve=Math.pow(2,8*h-1);O(this,i,u,h,ve-1,-ve)}let j=0,D=1,H=0;for(this[u]=i&255;++j<h&&(D*=256);)i<0&&H===0&&this[u+j-1]!==0&&(H=1),this[u+j]=(i/D>>0)-H&255;return u+h},o.prototype.writeIntBE=function(i,u,h,I){if(i=+i,u=u>>>0,!I){let ve=Math.pow(2,8*h-1);O(this,i,u,h,ve-1,-ve)}let j=h-1,D=1,H=0;for(this[u+j]=i&255;--j>=0&&(D*=256);)i<0&&H===0&&this[u+j+1]!==0&&(H=1),this[u+j]=(i/D>>0)-H&255;return u+h},o.prototype.writeInt8=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||O(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=Ce(function(i,u=0){return N(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ce(function(i,u=0){return $(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(i,u,h,I,j,D){if(h+I>i.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function fe(i,u,h,I,j){return u=+u,h=h>>>0,j||ee(i,u,h,4),r.write(i,u,h,I,23,4),h+4}o.prototype.writeFloatLE=function(i,u,h){return fe(this,i,u,!0,h)},o.prototype.writeFloatBE=function(i,u,h){return fe(this,i,u,!1,h)};function he(i,u,h,I,j){return u=+u,h=h>>>0,j||ee(i,u,h,8),r.write(i,u,h,I,52,8),h+8}o.prototype.writeDoubleLE=function(i,u,h){return he(this,i,u,!0,h)},o.prototype.writeDoubleBE=function(i,u,h){return he(this,i,u,!1,h)},o.prototype.copy=function(i,u,h,I){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!I&&I!==0&&(I=this.length),u>=i.length&&(u=i.length),u||(u=0),I>0&&I<h&&(I=h),I===h||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),i.length-u<I-h&&(I=i.length-u+h);let j=I-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,I):Uint8Array.prototype.set.call(i,this.subarray(h,I),u),j},o.prototype.fill=function(i,u,h,I){if(typeof i=="string"){if(typeof u=="string"?(I=u,u=0,h=this.length):typeof h=="string"&&(I=h,h=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!o.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(i.length===1){let D=i.charCodeAt(0);(I==="utf8"&&D<128||I==="latin1")&&(i=D)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let j;if(typeof i=="number")for(j=u;j<h;++j)this[j]=i;else{let D=o.isBuffer(i)?i:o.from(i,I),H=D.length;if(H===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(j=0;j<h-u;++j)this[j+u]=D[j%H]}return this};var B={};function P(i,u,h){B[i]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}P("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),P("ERR_OUT_OF_RANGE",function(i,u,h){let I=`The value of "${i}" is out of range.`,j=h;return Number.isInteger(h)&&Math.abs(h)>2**32?j=F(String(h)):typeof h=="bigint"&&(j=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(j=F(j)),j+="n"),I+=` It must be ${u}. Received ${j}`,I},RangeError);function F(i){let u="",h=i.length,I=i[0]==="-"?1:0;for(;h>=I+4;h-=3)u=`_${i.slice(h-3,h)}${u}`;return`${i.slice(0,h)}${u}`}function re(i,u,h){v(u,"offset"),(i[u]===void 0||i[u+h]===void 0)&&_(u,i.length-(h+1))}function ue(i,u,h,I,j,D){if(i>h||i<u){let H=typeof u=="bigint"?"n":"",ve;throw D>3?u===0||u===BigInt(0)?ve=`>= 0${H} and < 2${H} ** ${(D+1)*8}${H}`:ve=`>= -(2${H} ** ${(D+1)*8-1}${H}) and < 2 ** ${(D+1)*8-1}${H}`:ve=`>= ${u}${H} and <= ${h}${H}`,new B.ERR_OUT_OF_RANGE("value",ve,i)}re(I,j,D)}function v(i,u){if(typeof i!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",i)}function _(i,u,h){throw Math.floor(i)!==i?(v(i,h),new B.ERR_OUT_OF_RANGE(h||"offset","an integer",i)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,i)}var W=/[^+/0-9A-Za-z-_]/g;function J(i){if(i=i.split("=")[0],i=i.trim().replace(W,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function me(i,u){u=u||1/0;let h,I=i.length,j=null,D=[];for(let H=0;H<I;++H){if(h=i.charCodeAt(H),h>55295&&h<57344){if(!j){if(h>56319){(u-=3)>-1&&D.push(239,191,189);continue}else if(H+1===I){(u-=3)>-1&&D.push(239,191,189);continue}j=h;continue}if(h<56320){(u-=3)>-1&&D.push(239,191,189),j=h;continue}h=(j-55296<<10|h-56320)+65536}else j&&(u-=3)>-1&&D.push(239,191,189);if(j=null,h<128){if((u-=1)<0)break;D.push(h)}else if(h<2048){if((u-=2)<0)break;D.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;D.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return D}function de(i){let u=[];for(let h=0;h<i.length;++h)u.push(i.charCodeAt(h)&255);return u}function U(i,u){let h,I,j,D=[];for(let H=0;H<i.length&&!((u-=2)<0);++H)h=i.charCodeAt(H),I=h>>8,j=h%256,D.push(j),D.push(I);return D}function We(i){return t.toByteArray(J(i))}function Ge(i,u,h,I){let j;for(j=0;j<I&&!(j+h>=u.length||j>=i.length);++j)u[j+h]=i[j];return j}function Me(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function yt(i){return i!==i}var Ot=function(){let i="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let I=h*16;for(let j=0;j<16;++j)u[I+j]=i[h]+i[j]}return u}();function Ce(i){return typeof BigInt>"u"?gt:i}function gt(){throw new Error("BigInt not supported")}}),ie,se,Je,X=Cn(()=>{ie=xe(It(),1),se={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},Je=globalThis}),Bt=oe((e,t)=>{X();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(g,R,M){return Function.prototype.apply.call(g,R,M)},a;r&&typeof r.ownKeys=="function"?a=r.ownKeys:Object.getOwnPropertySymbols?a=function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:a=function(g){return Object.getOwnPropertyNames(g)};function s(g){console&&console.warn&&console.warn(g)}var l=Number.isNaN||function(g){return g!==g};function o(){o.init.call(this)}t.exports=o,t.exports.once=k,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(g){if(typeof g!="number"||g<0||l(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");f=g}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||l(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this};function p(g){return g._maxListeners===void 0?o.defaultMaxListeners:g._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(g){for(var R=[],M=1;M<arguments.length;M++)R.push(arguments[M]);var q=g==="error",x=this._events;if(x!==void 0)q=q&&x.error===void 0;else if(!q)return!1;if(q){var C;if(R.length>0&&(C=R[0]),C instanceof Error)throw C;var z=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw z.context=C,z}var Y=x[g];if(Y===void 0)return!1;if(typeof Y=="function")n(Y,this,R);else for(var ne=Y.length,ae=b(Y,ne),M=0;M<ne;++M)n(ae[M],this,R);return!0};function m(g,R,M,q){var x,C,z;if(d(M),C=g._events,C===void 0?(C=g._events=Object.create(null),g._eventsCount=0):(C.newListener!==void 0&&(g.emit("newListener",R,M.listener?M.listener:M),C=g._events),z=C[R]),z===void 0)z=C[R]=M,++g._eventsCount;else if(typeof z=="function"?z=C[R]=q?[M,z]:[z,M]:q?z.unshift(M):z.push(M),x=p(g),x>0&&z.length>x&&!z.warned){z.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=g,Y.type=R,Y.count=z.length,s(Y)}return g}o.prototype.addListener=function(g,R){return m(this,g,R,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(g,R){return m(this,g,R,!0)};function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(g,R,M){var q={fired:!1,wrapFn:void 0,target:g,type:R,listener:M},x=w.bind(q);return x.listener=M,q.wrapFn=x,x}o.prototype.once=function(g,R){return d(R),this.on(g,S(this,g,R)),this},o.prototype.prependOnceListener=function(g,R){return d(R),this.prependListener(g,S(this,g,R)),this},o.prototype.removeListener=function(g,R){var M,q,x,C,z;if(d(R),q=this._events,q===void 0)return this;if(M=q[g],M===void 0)return this;if(M===R||M.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete q[g],q.removeListener&&this.emit("removeListener",g,M.listener||R));else if(typeof M!="function"){for(x=-1,C=M.length-1;C>=0;C--)if(M[C]===R||M[C].listener===R){z=M[C].listener,x=C;break}if(x<0)return this;x===0?M.shift():A(M,x),M.length===1&&(q[g]=M[0]),q.removeListener!==void 0&&this.emit("removeListener",g,z||R)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(g){var R,M,q;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[g]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[g]),this;if(arguments.length===0){var x=Object.keys(M),C;for(q=0;q<x.length;++q)C=x[q],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=M[g],typeof R=="function")this.removeListener(g,R);else if(R!==void 0)for(q=R.length-1;q>=0;q--)this.removeListener(g,R[q]);return this};function c(g,R,M){var q=g._events;if(q===void 0)return[];var x=q[R];return x===void 0?[]:typeof x=="function"?M?[x.listener||x]:[x]:M?E(x):b(x,x.length)}o.prototype.listeners=function(g){return c(this,g,!0)},o.prototype.rawListeners=function(g){return c(this,g,!1)},o.listenerCount=function(g,R){return typeof g.listenerCount=="function"?g.listenerCount(R):y.call(g,R)},o.prototype.listenerCount=y;function y(g){var R=this._events;if(R!==void 0){var M=R[g];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]};function b(g,R){for(var M=new Array(R),q=0;q<R;++q)M[q]=g[q];return M}function A(g,R){for(;R+1<g.length;R++)g[R]=g[R+1];g.pop()}function E(g){for(var R=new Array(g.length),M=0;M<R.length;++M)R[M]=g[M].listener||g[M];return R}function k(g,R){return new Promise(function(M,q){function x(z){g.removeListener(R,C),q(z)}function C(){typeof g.removeListener=="function"&&g.removeListener("error",x),M([].slice.call(arguments))}L(g,R,C,{once:!0}),R!=="error"&&T(g,x,{once:!0})})}function T(g,R,M){typeof g.on=="function"&&L(g,"error",R,M)}function L(g,R,M,q){if(typeof g.on=="function")q.once?g.once(R,M):g.on(R,M);else if(typeof g.addEventListener=="function")g.addEventListener(R,function x(C){q.once&&g.removeEventListener(R,x),M(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g)}}),Nr=oe((e,t)=>{X(),t.exports=Bt().EventEmitter}),xr=oe(()=>{X()}),Fn=oe((e,t)=>{X();function r(c,y){var b=Object.keys(c);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(c);y&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(c,E).enumerable})),b.push.apply(b,A)}return b}function n(c){for(var y=1;y<arguments.length;y++){var b=arguments[y]!=null?arguments[y]:{};y%2?r(Object(b),!0).forEach(function(A){a(c,A,b[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):r(Object(b)).forEach(function(A){Object.defineProperty(c,A,Object.getOwnPropertyDescriptor(b,A))})}return c}function a(c,y,b){return y in c?Object.defineProperty(c,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[y]=b,c}function s(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function l(c,y){for(var b=0;b<y.length;b++){var A=y[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(c,A.key,A)}}function o(c,y,b){return y&&l(c.prototype,y),b&&l(c,b),c}var f=It(),d=f.Buffer,p=xr(),m=p.inspect,w=m&&m.custom||"inspect";function S(c,y,b){d.prototype.copy.call(c,y,b)}t.exports=function(){function c(){s(this,c),this.head=null,this.tail=null,this.length=0}return o(c,[{key:"push",value:function(y){var b={data:y,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(y){var b={data:y,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var b=this.head,A=""+b.data;b=b.next;)A+=y+b.data;return A}},{key:"concat",value:function(y){if(this.length===0)return d.alloc(0);for(var b=d.allocUnsafe(y>>>0),A=this.head,E=0;A;)S(A.data,b,E),E+=A.data.length,A=A.next;return b}},{key:"consume",value:function(y,b){var A;return y<this.head.data.length?(A=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?A=this.shift():A=b?this._getString(y):this._getBuffer(y),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var b=this.head,A=1,E=b.data;for(y-=E.length;b=b.next;){var k=b.data,T=y>k.length?k.length:y;if(T===k.length?E+=k:E+=k.slice(0,y),y-=T,y===0){T===k.length?(++A,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=k.slice(T));break}++A}return this.length-=A,E}},{key:"_getBuffer",value:function(y){var b=d.allocUnsafe(y),A=this.head,E=1;for(A.data.copy(b),y-=A.data.length;A=A.next;){var k=A.data,T=y>k.length?k.length:y;if(k.copy(b,b.length-y,0,T),y-=T,y===0){T===k.length?(++E,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=k.slice(T));break}++E}return this.length-=E,b}},{key:w,value:function(y,b){return m(this,n({},b,{depth:0,customInspect:!1}))}}]),c}()}),Dr=oe((e,t)=>{X();function r(f,d){var p=this,m=this._readableState&&this._readableState.destroyed,w=this._writableState&&this._writableState.destroyed;return m||w?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,se.nextTick(l,this,f)):se.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(S){!d&&S?p._writableState?p._writableState.errorEmitted?se.nextTick(a,p):(p._writableState.errorEmitted=!0,se.nextTick(n,p,S)):se.nextTick(n,p,S):d?(se.nextTick(a,p),d(S)):se.nextTick(a,p)}),this)}function n(f,d){l(f,d),a(f)}function a(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var p=f._readableState,m=f._writableState;p&&p.autoDestroy||m&&m.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:s,errorOrDestroy:o}}),dt=oe((e,t)=>{X();function r(d,p){d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p}var n={};function a(d,p,m){m||(m=Error);function w(c,y,b){return typeof p=="string"?p:p(c,y,b)}var S=function(c){r(y,c);function y(b,A,E){return c.call(this,w(b,A,E))||this}return y}(m);S.prototype.name=m.name,S.prototype.code=d,n[d]=S}function s(d,p){if(Array.isArray(d)){var m=d.length;return d=d.map(function(w){return String(w)}),m>2?"one of ".concat(p," ").concat(d.slice(0,m-1).join(", "),", or ")+d[m-1]:m===2?"one of ".concat(p," ").concat(d[0]," or ").concat(d[1]):"of ".concat(p," ").concat(d[0])}else return"of ".concat(p," ").concat(String(d))}function l(d,p,m){return d.substr(!m||m<0?0:+m,p.length)===p}function o(d,p,m){return(m===void 0||m>d.length)&&(m=d.length),d.substring(m-p.length,m)===p}function f(d,p,m){return typeof m!="number"&&(m=0),m+p.length>d.length?!1:d.indexOf(p,m)!==-1}a("ERR_INVALID_OPT_VALUE",function(d,p){return'The value "'+p+'" is invalid for option "'+d+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(d,p,m){var w;typeof p=="string"&&l(p,"not ")?(w="must not be",p=p.replace(/^not /,"")):w="must be";var S;if(o(d," argument"))S="The ".concat(d," ").concat(w," ").concat(s(p,"type"));else{var c=f(d,".")?"property":"argument";S='The "'.concat(d,'" ').concat(c," ").concat(w," ").concat(s(p,"type"))}return S+=". Received type ".concat(typeof m),S},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),Fr=oe((e,t)=>{X();var r=dt().codes.ERR_INVALID_OPT_VALUE;function n(s,l,o){return s.highWaterMark!=null?s.highWaterMark:l?s[o]:null}function a(s,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var p=f?o:"highWaterMark";throw new r(p,d)}return Math.floor(d)}return s.objectMode?16:16*1024}t.exports={getHighWaterMark:a}}),tt=oe((e,t)=>{X(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}}}),$n=oe((e,t)=>{X(),t.exports=r;function r(a,s){if(n("noDeprecation"))return a;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(s);n("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return a.apply(this,arguments)}return o}function n(a){try{if(!Je.localStorage)return!1}catch{return!1}var s=Je.localStorage[a];return s==null?!1:String(s).toLowerCase()==="true"}}),$r=oe((e,t)=>{X(),t.exports=x;function r(B){var P=this;this.next=null,this.entry=null,this.finish=function(){he(P,B)}}var n;x.WritableState=M;var a={deprecate:$n()},s=Nr(),l=It().Buffer,o=Je.Uint8Array||function(){};function f(B){return l.from(B)}function d(B){return l.isBuffer(B)||B instanceof o}var p=Dr(),m=Fr(),w=m.getHighWaterMark,S=dt().codes,c=S.ERR_INVALID_ARG_TYPE,y=S.ERR_METHOD_NOT_IMPLEMENTED,b=S.ERR_MULTIPLE_CALLBACK,A=S.ERR_STREAM_CANNOT_PIPE,E=S.ERR_STREAM_DESTROYED,k=S.ERR_STREAM_NULL_VALUES,T=S.ERR_STREAM_WRITE_AFTER_END,L=S.ERR_UNKNOWN_ENCODING,g=p.errorOrDestroy;tt()(x,s);function R(){}function M(B,P,F){n=n||ht(),B=B||{},typeof F!="boolean"&&(F=P instanceof n),this.objectMode=!!B.objectMode,F&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=w(this,B,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=B.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ue){ge(P,ue)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var B=this.bufferedRequest,P=[];B;)P.push(B),B=B.next;return P},function(){try{Object.defineProperty(M.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(B){return q.call(this,B)?!0:this!==x?!1:B&&B._writableState instanceof M}})):q=function(B){return B instanceof this};function x(B){n=n||ht();var P=this instanceof n;if(!P&&!q.call(x,this))return new x(B);this._writableState=new M(B,this,P),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),s.call(this)}x.prototype.pipe=function(){g(this,new A)};function C(B,P){var F=new T;g(B,F),se.nextTick(P,F)}function z(B,P,F,re){var ue;return F===null?ue=new k:typeof F!="string"&&!P.objectMode&&(ue=new c("chunk",["string","Buffer"],F)),ue?(g(B,ue),se.nextTick(re,ue),!1):!0}x.prototype.write=function(B,P,F){var re=this._writableState,ue=!1,v=!re.objectMode&&d(B);return v&&!l.isBuffer(B)&&(B=f(B)),typeof P=="function"&&(F=P,P=null),v?P="buffer":P||(P=re.defaultEncoding),typeof F!="function"&&(F=R),re.ending?C(this,F):(v||z(this,re,B,F))&&(re.pendingcb++,ue=ne(this,re,v,B,P,F)),ue},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&le(this,B))},x.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new L(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Y(B,P,F){return!B.objectMode&&B.decodeStrings!==!1&&typeof P=="string"&&(P=l.from(P,F)),P}Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ne(B,P,F,re,ue,v){if(!F){var _=Y(P,re,ue);re!==_&&(F=!0,ue="buffer",re=_)}var W=P.objectMode?1:re.length;P.length+=W;var J=P.length<P.highWaterMark;if(J||(P.needDrain=!0),P.writing||P.corked){var me=P.lastBufferedRequest;P.lastBufferedRequest={chunk:re,encoding:ue,isBuf:F,callback:v,next:null},me?me.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else ae(B,P,!1,W,re,ue,v);return J}function ae(B,P,F,re,ue,v,_){P.writelen=re,P.writecb=_,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new E("write")):F?B._writev(ue,P.onwrite):B._write(ue,v,P.onwrite),P.sync=!1}function pe(B,P,F,re,ue){--P.pendingcb,F?(se.nextTick(ue,re),se.nextTick(ee,B,P),B._writableState.errorEmitted=!0,g(B,re)):(ue(re),B._writableState.errorEmitted=!0,g(B,re),ee(B,P))}function ce(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function ge(B,P){var F=B._writableState,re=F.sync,ue=F.writecb;if(typeof ue!="function")throw new b;if(ce(F),P)pe(B,F,re,P,ue);else{var v=O(F)||B.destroyed;!v&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&le(B,F),re?se.nextTick(ye,B,F,v,ue):ye(B,F,v,ue)}}function ye(B,P,F,re){F||Be(B,P),P.pendingcb--,re(),ee(B,P)}function Be(B,P){P.length===0&&P.needDrain&&(P.needDrain=!1,B.emit("drain"))}function le(B,P){P.bufferProcessing=!0;var F=P.bufferedRequest;if(B._writev&&F&&F.next){var re=P.bufferedRequestCount,ue=new Array(re),v=P.corkedRequestsFree;v.entry=F;for(var _=0,W=!0;F;)ue[_]=F,F.isBuf||(W=!1),F=F.next,_+=1;ue.allBuffers=W,ae(B,P,!0,P.length,ue,"",v.finish),P.pendingcb++,P.lastBufferedRequest=null,v.next?(P.corkedRequestsFree=v.next,v.next=null):P.corkedRequestsFree=new r(P),P.bufferedRequestCount=0}else{for(;F;){var J=F.chunk,me=F.encoding,de=F.callback,U=P.objectMode?1:J.length;if(ae(B,P,!1,U,J,me,de),F=F.next,P.bufferedRequestCount--,P.writing)break}F===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=F,P.bufferProcessing=!1}x.prototype._write=function(B,P,F){F(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(B,P,F){var re=this._writableState;return typeof B=="function"?(F=B,B=null,P=null):typeof P=="function"&&(F=P,P=null),B!=null&&this.write(B,P),re.corked&&(re.corked=1,this.uncork()),re.ending||fe(this,re,F),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function O(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function N(B,P){B._final(function(F){P.pendingcb--,F&&g(B,F),P.prefinished=!0,B.emit("prefinish"),ee(B,P)})}function $(B,P){!P.prefinished&&!P.finalCalled&&(typeof B._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,se.nextTick(N,B,P)):(P.prefinished=!0,B.emit("prefinish")))}function ee(B,P){var F=O(P);if(F&&($(B,P),P.pendingcb===0&&(P.finished=!0,B.emit("finish"),P.autoDestroy))){var re=B._readableState;(!re||re.autoDestroy&&re.endEmitted)&&B.destroy()}return F}function fe(B,P,F){P.ending=!0,ee(B,P),F&&(P.finished?se.nextTick(F):B.once("finish",F)),P.ended=!0,B.writable=!1}function he(B,P,F){var re=B.entry;for(B.entry=null;re;){var ue=re.callback;P.pendingcb--,ue(F),re=re.next}P.corkedRequestsFree.next=B}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){!this._writableState||(this._writableState.destroyed=B)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(B,P){P(B)}}),ht=oe((e,t)=>{X();var r=Object.keys||function(m){var w=[];for(var S in m)w.push(S);return w};t.exports=f;var n=Wr(),a=$r();for(tt()(f,n),s=r(a.prototype),o=0;o<s.length;o++)l=s[o],f.prototype[l]||(f.prototype[l]=a.prototype[l]);var s,l,o;function f(m){if(!(this instanceof f))return new f(m);n.call(this,m),a.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||se.nextTick(p,this)}function p(m){m.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}),Wn=oe((e,t)=>{X();var r=It(),n=r.Buffer;function a(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(l,o,f){return n(l,o,f)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},s.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),hr=oe(e=>{X();var t=Wn().Buffer,r=t.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(E){if(!E)return"utf8";for(var k;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(k)return;E=(""+E).toLowerCase(),k=!0}}function a(E){var k=n(E);if(typeof k!="string"&&(t.isEncoding===r||!r(E)))throw new Error("Unknown encoding: "+E);return k||E}e.StringDecoder=s;function s(E){this.encoding=a(E);var k;switch(this.encoding){case"utf16le":this.text=w,this.end=S,k=4;break;case"utf8":this.fillLast=d,k=4;break;case"base64":this.text=c,this.end=y,k=3;break;default:this.write=b,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(k)}s.prototype.write=function(E){if(E.length===0)return"";var k,T;if(this.lastNeed){if(k=this.fillLast(E),k===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<E.length?k?k+this.text(E,T):this.text(E,T):k||""},s.prototype.end=m,s.prototype.text=p,s.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function l(E){return E<=127?0:E>>5===6?2:E>>4===14?3:E>>3===30?4:E>>6===2?-1:-2}function o(E,k,T){var L=k.length-1;if(L<T)return 0;var g=l(k[L]);return g>=0?(g>0&&(E.lastNeed=g-1),g):--L<T||g===-2?0:(g=l(k[L]),g>=0?(g>0&&(E.lastNeed=g-2),g):--L<T||g===-2?0:(g=l(k[L]),g>=0?(g>0&&(g===2?g=0:E.lastNeed=g-3),g):0))}function f(E,k,T){if((k[0]&192)!==128)return E.lastNeed=0,"\uFFFD";if(E.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return E.lastNeed=1,"\uFFFD";if(E.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return E.lastNeed=2,"\uFFFD"}}function d(E){var k=this.lastTotal-this.lastNeed,T=f(this,E);if(T!==void 0)return T;if(this.lastNeed<=E.length)return E.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,k,0,E.length),this.lastNeed-=E.length}function p(E,k){var T=o(this,E,k);if(!this.lastNeed)return E.toString("utf8",k);this.lastTotal=T;var L=E.length-(T-this.lastNeed);return E.copy(this.lastChar,0,L),E.toString("utf8",k,L)}function m(E){var k=E&&E.length?this.write(E):"";return this.lastNeed?k+"\uFFFD":k}function w(E,k){if((E.length-k)%2===0){var T=E.toString("utf16le",k);if(T){var L=T.charCodeAt(T.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",k,E.length-1)}function S(E){var k=E&&E.length?this.write(E):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,T)}return k}function c(E,k){var T=(E.length-k)%3;return T===0?E.toString("base64",k):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",k,E.length-T))}function y(E){var k=E&&E.length?this.write(E):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function b(E){return E.toString(this.encoding)}function A(E){return E&&E.length?this.write(E):""}}),tr=oe((e,t)=>{X();var r=dt().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,p=new Array(d),m=0;m<d;m++)p[m]=arguments[m];o.apply(this,p)}}}function a(){}function s(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||a);var p=f.readable||f.readable!==!1&&o.readable,m=f.writable||f.writable!==!1&&o.writable,w=function(){o.writable||c()},S=o._writableState&&o._writableState.finished,c=function(){m=!1,S=!0,p||d.call(o)},y=o._readableState&&o._readableState.endEmitted,b=function(){p=!1,y=!0,m||d.call(o)},A=function(T){d.call(o,T)},E=function(){var T;if(p&&!y)return(!o._readableState||!o._readableState.ended)&&(T=new r),d.call(o,T);if(m&&!S)return(!o._writableState||!o._writableState.ended)&&(T=new r),d.call(o,T)},k=function(){o.req.on("finish",c)};return s(o)?(o.on("complete",c),o.on("abort",E),o.req?k():o.on("request",k)):m&&!o._writableState&&(o.on("end",w),o.on("close",w)),o.on("end",b),o.on("finish",c),f.error!==!1&&o.on("error",A),o.on("close",E),function(){o.removeListener("complete",c),o.removeListener("abort",E),o.removeListener("request",k),o.req&&o.req.removeListener("finish",c),o.removeListener("end",w),o.removeListener("close",w),o.removeListener("finish",c),o.removeListener("end",b),o.removeListener("error",A),o.removeListener("close",E)}}t.exports=l}),qn=oe((e,t)=>{X();var r;function n(k,T,L){return T in k?Object.defineProperty(k,T,{value:L,enumerable:!0,configurable:!0,writable:!0}):k[T]=L,k}var a=tr(),s=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),m=Symbol("stream");function w(k,T){return{value:k,done:T}}function S(k){var T=k[s];if(T!==null){var L=k[m].read();L!==null&&(k[d]=null,k[s]=null,k[l]=null,T(w(L,!1)))}}function c(k){se.nextTick(S,k)}function y(k,T){return function(L,g){k.then(function(){if(T[f]){L(w(void 0,!0));return}T[p](L,g)},g)}}var b=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((r={get stream(){return this[m]},next:function(){var k=this,T=this[o];if(T!==null)return Promise.reject(T);if(this[f])return Promise.resolve(w(void 0,!0));if(this[m].destroyed)return new Promise(function(M,q){se.nextTick(function(){k[o]?q(k[o]):M(w(void 0,!0))})});var L=this[d],g;if(L)g=new Promise(y(L,this));else{var R=this[m].read();if(R!==null)return Promise.resolve(w(R,!1));g=new Promise(this[p])}return this[d]=g,g}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var k=this;return new Promise(function(T,L){k[m].destroy(null,function(g){if(g){L(g);return}T(w(void 0,!0))})})}),r),b),E=function(k){var T,L=Object.create(A,(T={},n(T,m,{value:k,writable:!0}),n(T,s,{value:null,writable:!0}),n(T,l,{value:null,writable:!0}),n(T,o,{value:null,writable:!0}),n(T,f,{value:k._readableState.endEmitted,writable:!0}),n(T,p,{value:function(g,R){var M=L[m].read();M?(L[d]=null,L[s]=null,L[l]=null,g(w(M,!1))):(L[s]=g,L[l]=R)},writable:!0}),T));return L[d]=null,a(k,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var R=L[l];R!==null&&(L[d]=null,L[s]=null,L[l]=null,R(g)),L[o]=g;return}var M=L[s];M!==null&&(L[d]=null,L[s]=null,L[l]=null,M(w(void 0,!0))),L[f]=!0}),k.on("readable",c.bind(null,L)),L};t.exports=E}),Vn=oe((e,t)=>{X(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Wr=oe((e,t)=>{X(),t.exports=C;var r;C.ReadableState=x,Bt().EventEmitter;var n=function(v,_){return v.listeners(_).length},a=Nr(),s=It().Buffer,l=Je.Uint8Array||function(){};function o(v){return s.from(v)}function f(v){return s.isBuffer(v)||v instanceof l}var d=xr(),p;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var m=Fn(),w=Dr(),S=Fr(),c=S.getHighWaterMark,y=dt().codes,b=y.ERR_INVALID_ARG_TYPE,A=y.ERR_STREAM_PUSH_AFTER_EOF,E=y.ERR_METHOD_NOT_IMPLEMENTED,k=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,T,L,g;tt()(C,a);var R=w.errorOrDestroy,M=["error","close","destroy","pause","resume"];function q(v,_,W){if(typeof v.prependListener=="function")return v.prependListener(_,W);!v._events||!v._events[_]?v.on(_,W):Array.isArray(v._events[_])?v._events[_].unshift(W):v._events[_]=[W,v._events[_]]}function x(v,_,W){r=r||ht(),v=v||{},typeof W!="boolean"&&(W=_ instanceof r),this.objectMode=!!v.objectMode,W&&(this.objectMode=this.objectMode||!!v.readableObjectMode),this.highWaterMark=c(this,v,"readableHighWaterMark",W),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=v.emitClose!==!1,this.autoDestroy=!!v.autoDestroy,this.destroyed=!1,this.defaultEncoding=v.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,v.encoding&&(T||(T=hr().StringDecoder),this.decoder=new T(v.encoding),this.encoding=v.encoding)}function C(v){if(r=r||ht(),!(this instanceof C))return new C(v);var _=this instanceof r;this._readableState=new x(v,this,_),this.readable=!0,v&&(typeof v.read=="function"&&(this._read=v.read),typeof v.destroy=="function"&&(this._destroy=v.destroy)),a.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(v){!this._readableState||(this._readableState.destroyed=v)}}),C.prototype.destroy=w.destroy,C.prototype._undestroy=w.undestroy,C.prototype._destroy=function(v,_){_(v)},C.prototype.push=function(v,_){var W=this._readableState,J;return W.objectMode?J=!0:typeof v=="string"&&(_=_||W.defaultEncoding,_!==W.encoding&&(v=s.from(v,_),_=""),J=!0),z(this,v,_,!1,J)},C.prototype.unshift=function(v){return z(this,v,null,!0,!1)};function z(v,_,W,J,me){p("readableAddChunk",_);var de=v._readableState;if(_===null)de.reading=!1,ge(v,de);else{var U;if(me||(U=ne(de,_)),U)R(v,U);else if(de.objectMode||_&&_.length>0)if(typeof _!="string"&&!de.objectMode&&Object.getPrototypeOf(_)!==s.prototype&&(_=o(_)),J)de.endEmitted?R(v,new k):Y(v,de,_,!0);else if(de.ended)R(v,new A);else{if(de.destroyed)return!1;de.reading=!1,de.decoder&&!W?(_=de.decoder.write(_),de.objectMode||_.length!==0?Y(v,de,_,!1):le(v,de)):Y(v,de,_,!1)}else J||(de.reading=!1,le(v,de))}return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function Y(v,_,W,J){_.flowing&&_.length===0&&!_.sync?(_.awaitDrain=0,v.emit("data",W)):(_.length+=_.objectMode?1:W.length,J?_.buffer.unshift(W):_.buffer.push(W),_.needReadable&&ye(v)),le(v,_)}function ne(v,_){var W;return!f(_)&&typeof _!="string"&&_!==void 0&&!v.objectMode&&(W=new b("chunk",["string","Buffer","Uint8Array"],_)),W}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(v){T||(T=hr().StringDecoder);var _=new T(v);this._readableState.decoder=_,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,J="";W!==null;)J+=_.write(W.data),W=W.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var ae=1073741824;function pe(v){return v>=ae?v=ae:(v--,v|=v>>>1,v|=v>>>2,v|=v>>>4,v|=v>>>8,v|=v>>>16,v++),v}function ce(v,_){return v<=0||_.length===0&&_.ended?0:_.objectMode?1:v!==v?_.flowing&&_.length?_.buffer.head.data.length:_.length:(v>_.highWaterMark&&(_.highWaterMark=pe(v)),v<=_.length?v:_.ended?_.length:(_.needReadable=!0,0))}C.prototype.read=function(v){p("read",v),v=parseInt(v,10);var _=this._readableState,W=v;if(v!==0&&(_.emittedReadable=!1),v===0&&_.needReadable&&((_.highWaterMark!==0?_.length>=_.highWaterMark:_.length>0)||_.ended))return p("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?F(this):ye(this),null;if(v=ce(v,_),v===0&&_.ended)return _.length===0&&F(this),null;var J=_.needReadable;p("need readable",J),(_.length===0||_.length-v<_.highWaterMark)&&(J=!0,p("length less than watermark",J)),_.ended||_.reading?(J=!1,p("reading or ended",J)):J&&(p("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(v=ce(W,_)));var me;return v>0?me=P(v,_):me=null,me===null?(_.needReadable=_.length<=_.highWaterMark,v=0):(_.length-=v,_.awaitDrain=0),_.length===0&&(_.ended||(_.needReadable=!0),W!==v&&_.ended&&F(this)),me!==null&&this.emit("data",me),me};function ge(v,_){if(p("onEofChunk"),!_.ended){if(_.decoder){var W=_.decoder.end();W&&W.length&&(_.buffer.push(W),_.length+=_.objectMode?1:W.length)}_.ended=!0,_.sync?ye(v):(_.needReadable=!1,_.emittedReadable||(_.emittedReadable=!0,Be(v)))}}function ye(v){var _=v._readableState;p("emitReadable",_.needReadable,_.emittedReadable),_.needReadable=!1,_.emittedReadable||(p("emitReadable",_.flowing),_.emittedReadable=!0,se.nextTick(Be,v))}function Be(v){var _=v._readableState;p("emitReadable_",_.destroyed,_.length,_.ended),!_.destroyed&&(_.length||_.ended)&&(v.emit("readable"),_.emittedReadable=!1),_.needReadable=!_.flowing&&!_.ended&&_.length<=_.highWaterMark,B(v)}function le(v,_){_.readingMore||(_.readingMore=!0,se.nextTick(O,v,_))}function O(v,_){for(;!_.reading&&!_.ended&&(_.length<_.highWaterMark||_.flowing&&_.length===0);){var W=_.length;if(p("maybeReadMore read 0"),v.read(0),W===_.length)break}_.readingMore=!1}C.prototype._read=function(v){R(this,new E("_read()"))},C.prototype.pipe=function(v,_){var W=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=v;break;case 1:J.pipes=[J.pipes,v];break;default:J.pipes.push(v);break}J.pipesCount+=1,p("pipe count=%d opts=%j",J.pipesCount,_);var me=(!_||_.end!==!1)&&v!==se.stdout&&v!==se.stderr,de=me?We:u;J.endEmitted?se.nextTick(de):W.once("end",de),v.on("unpipe",U);function U(h,I){p("onunpipe"),h===W&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,yt())}function We(){p("onend"),v.end()}var Ge=N(W);v.on("drain",Ge);var Me=!1;function yt(){p("cleanup"),v.removeListener("close",gt),v.removeListener("finish",i),v.removeListener("drain",Ge),v.removeListener("error",Ce),v.removeListener("unpipe",U),W.removeListener("end",We),W.removeListener("end",u),W.removeListener("data",Ot),Me=!0,J.awaitDrain&&(!v._writableState||v._writableState.needDrain)&&Ge()}W.on("data",Ot);function Ot(h){p("ondata");var I=v.write(h);p("dest.write",I),I===!1&&((J.pipesCount===1&&J.pipes===v||J.pipesCount>1&&ue(J.pipes,v)!==-1)&&!Me&&(p("false write response, pause",J.awaitDrain),J.awaitDrain++),W.pause())}function Ce(h){p("onerror",h),u(),v.removeListener("error",Ce),n(v,"error")===0&&R(v,h)}q(v,"error",Ce);function gt(){v.removeListener("finish",i),u()}v.once("close",gt);function i(){p("onfinish"),v.removeListener("close",gt),u()}v.once("finish",i);function u(){p("unpipe"),W.unpipe(v)}return v.emit("pipe",W),J.flowing||(p("pipe resume"),W.resume()),v};function N(v){return function(){var _=v._readableState;p("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n(v,"data")&&(_.flowing=!0,B(v))}}C.prototype.unpipe=function(v){var _=this._readableState,W={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return v&&v!==_.pipes?this:(v||(v=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,v&&v.emit("unpipe",this,W),this);if(!v){var J=_.pipes,me=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var de=0;de<me;de++)J[de].emit("unpipe",this,{hasUnpiped:!1});return this}var U=ue(_.pipes,v);return U===-1?this:(_.pipes.splice(U,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),v.emit("unpipe",this,W),this)},C.prototype.on=function(v,_){var W=a.prototype.on.call(this,v,_),J=this._readableState;return v==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):v==="readable"&&!J.endEmitted&&!J.readableListening&&(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,p("on readable",J.length,J.reading),J.length?ye(this):J.reading||se.nextTick(ee,this)),W},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(v,_){var W=a.prototype.removeListener.call(this,v,_);return v==="readable"&&se.nextTick($,this),W},C.prototype.removeAllListeners=function(v){var _=a.prototype.removeAllListeners.apply(this,arguments);return(v==="readable"||v===void 0)&&se.nextTick($,this),_};function $(v){var _=v._readableState;_.readableListening=v.listenerCount("readable")>0,_.resumeScheduled&&!_.paused?_.flowing=!0:v.listenerCount("data")>0&&v.resume()}function ee(v){p("readable nexttick read 0"),v.read(0)}C.prototype.resume=function(){var v=this._readableState;return v.flowing||(p("resume"),v.flowing=!v.readableListening,fe(this,v)),v.paused=!1,this};function fe(v,_){_.resumeScheduled||(_.resumeScheduled=!0,se.nextTick(he,v,_))}function he(v,_){p("resume",_.reading),_.reading||v.read(0),_.resumeScheduled=!1,v.emit("resume"),B(v),_.flowing&&!_.reading&&v.read(0)}C.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function B(v){var _=v._readableState;for(p("flow",_.flowing);_.flowing&&v.read()!==null;);}C.prototype.wrap=function(v){var _=this,W=this._readableState,J=!1;v.on("end",function(){if(p("wrapped end"),W.decoder&&!W.ended){var U=W.decoder.end();U&&U.length&&_.push(U)}_.push(null)}),v.on("data",function(U){if(p("wrapped data"),W.decoder&&(U=W.decoder.write(U)),!(W.objectMode&&U==null)&&!(!W.objectMode&&(!U||!U.length))){var We=_.push(U);We||(J=!0,v.pause())}});for(var me in v)this[me]===void 0&&typeof v[me]=="function"&&(this[me]=function(U){return function(){return v[U].apply(v,arguments)}}(me));for(var de=0;de<M.length;de++)v.on(M[de],this.emit.bind(this,M[de]));return this._read=function(U){p("wrapped _read",U),J&&(J=!1,v.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return L===void 0&&(L=qn()),L(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}}),C._fromList=P,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(v,_){if(_.length===0)return null;var W;return _.objectMode?W=_.buffer.shift():!v||v>=_.length?(_.decoder?W=_.buffer.join(""):_.buffer.length===1?W=_.buffer.first():W=_.buffer.concat(_.length),_.buffer.clear()):W=_.buffer.consume(v,_.decoder),W}function F(v){var _=v._readableState;p("endReadable",_.endEmitted),_.endEmitted||(_.ended=!0,se.nextTick(re,_,v))}function re(v,_){if(p("endReadableNT",v.endEmitted,v.length),!v.endEmitted&&v.length===0&&(v.endEmitted=!0,_.readable=!1,_.emit("end"),v.autoDestroy)){var W=_._writableState;(!W||W.autoDestroy&&W.finished)&&_.destroy()}}typeof Symbol=="function"&&(C.from=function(v,_){return g===void 0&&(g=Vn()),g(C,v,_)});function ue(v,_){for(var W=0,J=v.length;W<J;W++)if(v[W]===_)return W;return-1}}),qr=oe((e,t)=>{X(),t.exports=d;var r=dt().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=ht();tt()(d,o);function f(w,S){var c=this._transformState;c.transforming=!1;var y=c.writecb;if(y===null)return this.emit("error",new a);c.writechunk=null,c.writecb=null,S!=null&&this.push(S),y(w);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function d(w){if(!(this instanceof d))return new d(w);o.call(this,w),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,w&&(typeof w.transform=="function"&&(this._transform=w.transform),typeof w.flush=="function"&&(this._flush=w.flush)),this.on("prefinish",p)}function p(){var w=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,c){m(w,S,c)}):m(this,null,null)}d.prototype.push=function(w,S){return this._transformState.needTransform=!1,o.prototype.push.call(this,w,S)},d.prototype._transform=function(w,S,c){c(new n("_transform()"))},d.prototype._write=function(w,S,c){var y=this._transformState;if(y.writecb=c,y.writechunk=w,y.writeencoding=S,!y.transforming){var b=this._readableState;(y.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},d.prototype._read=function(w){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},d.prototype._destroy=function(w,S){o.prototype._destroy.call(this,w,function(c){S(c)})};function m(w,S,c){if(S)return w.emit("error",S);if(c!=null&&w.push(c),w._writableState.length)throw new l;if(w._transformState.transforming)throw new s;return w.push(null)}}),zn=oe((e,t)=>{X(),t.exports=n;var r=qr();tt()(n,r);function n(a){if(!(this instanceof n))return new n(a);r.call(this,a)}n.prototype._transform=function(a,s,l){l(null,a)}}),Gn=oe((e,t)=>{X();var r;function n(c){var y=!1;return function(){y||(y=!0,c.apply(void 0,arguments))}}var a=dt().codes,s=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function o(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,y,b,A){A=n(A);var E=!1;c.on("close",function(){E=!0}),r===void 0&&(r=tr()),r(c,{readable:y,writable:b},function(T){if(T)return A(T);E=!0,A()});var k=!1;return function(T){if(!E&&!k){if(k=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();A(T||new l("pipe"))}}}function p(c){c()}function m(c,y){return c.pipe(y)}function w(c){return!c.length||typeof c[c.length-1]!="function"?o:c.pop()}function S(){for(var c=arguments.length,y=new Array(c),b=0;b<c;b++)y[b]=arguments[b];var A=w(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new s("streams");var E,k=y.map(function(T,L){var g=L<y.length-1,R=L>0;return d(T,g,R,function(M){E||(E=M),M&&k.forEach(p),!g&&(k.forEach(p),A(E))})});return y.reduce(m)}t.exports=S}),pt=oe((e,t)=>{X(),e=t.exports=Wr(),e.Stream=e,e.Readable=e,e.Writable=$r(),e.Duplex=ht(),e.Transform=qr(),e.PassThrough=zn(),e.finished=tr(),e.pipeline=Gn()}),Hn=oe((e,t)=>{X(),t.exports=r;function r(n,a){if(n&&a)return r(n)(a);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){s[l]=n[l]}),s;function s(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(p){f[p]=d[p]}),f}}}),Vr=oe((e,t)=>{X();var r=Hn();t.exports=r(n),t.exports.strict=r(a),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})});function n(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function a(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},o=s.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),zr=oe((e,t)=>{X();var r=Vr(),n=function(){},a=function(o){return o.setHeader&&typeof o.abort=="function"},s=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var p=o._writableState,m=o._readableState,w=f.readable||f.readable!==!1&&o.readable,S=f.writable||f.writable!==!1&&o.writable,c=!1,y=function(){o.writable||b()},b=function(){S=!1,w||d.call(o)},A=function(){w=!1,S||d.call(o)},E=function(R){d.call(o,R?new Error("exited with error code: "+R):null)},k=function(R){d.call(o,R)},T=function(){se.nextTick(L)},L=function(){if(!c){if(w&&!(m&&m.ended&&!m.destroyed))return d.call(o,new Error("premature close"));if(S&&!(p&&p.ended&&!p.destroyed))return d.call(o,new Error("premature close"))}},g=function(){o.req.on("finish",b)};return a(o)?(o.on("complete",b),o.on("abort",T),o.req?g():o.on("request",g)):S&&!p&&(o.on("end",y),o.on("close",y)),s(o)&&o.on("exit",E),o.on("end",A),o.on("finish",b),f.error!==!1&&o.on("error",k),o.on("close",T),function(){c=!0,o.removeListener("complete",b),o.removeListener("abort",T),o.removeListener("request",g),o.req&&o.req.removeListener("finish",b),o.removeListener("end",y),o.removeListener("close",y),o.removeListener("finish",b),o.removeListener("exit",E),o.removeListener("end",A),o.removeListener("error",k),o.removeListener("close",T)}};t.exports=l}),Kn=oe(()=>{X()}),Yn=oe((e,t)=>{X();var r=Vr(),n=zr(),a=Kn(),s=function(){},l=/^v?\.0/.test(se.version),o=function(c){return typeof c=="function"},f=function(c){return!l||!a?!1:(c instanceof(a.ReadStream||s)||c instanceof(a.WriteStream||s))&&o(c.close)},d=function(c){return c.setHeader&&o(c.abort)},p=function(c,y,b,A){A=r(A);var E=!1;c.on("close",function(){E=!0}),n(c,{readable:y,writable:b},function(T){if(T)return A(T);E=!0,A()});var k=!1;return function(T){if(!E&&!k){if(k=!0,f(c))return c.close(s);if(d(c))return c.abort();if(o(c.destroy))return c.destroy();A(T||new Error("stream was destroyed"))}}},m=function(c){c()},w=function(c,y){return c.pipe(y)},S=function(){var c=Array.prototype.slice.call(arguments),y=o(c[c.length-1]||s)&&c.pop()||s;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var b,A=c.map(function(E,k){var T=k<c.length-1,L=k>0;return p(E,T,L,function(g){b||(b=g),g&&A.forEach(m),!T&&(A.forEach(m),y(b))})});return c.reduce(w)};t.exports=S}),Jn=oe((e,t)=>{X(),t.exports=r;function r(a){var s=a._readableState;return s?s.objectMode||typeof a._duplexState=="number"?a.read():a.read(n(s)):null}function n(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}}),Xn=oe((e,t)=>{X();var r=pt(),n=zr(),a=tt(),s=Jn(),l=ie.Buffer.from&&ie.Buffer.from!==Uint8Array.from?ie.Buffer.from([0]):new ie.Buffer([0]),o=function(c,y){c._corked?c.once("uncork",y):y()},f=function(c,y){c._autoDestroy&&c.destroy(y)},d=function(c,y){return function(b){b?f(c,b.message==="premature close"?null:b):y&&!c._ended&&c.end()}},p=function(c,y){if(!c||c._writableState&&c._writableState.finished)return y();if(c._writableState)return c.end(y);c.end(),y()},m=function(){},w=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},S=function(c,y,b){if(!(this instanceof S))return new S(c,y,b);r.Duplex.call(this,b),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!b||b.autoDestroy!==!1,this._forwardDestroy=!b||b.destroy!==!1,this._forwardEnd=!b||b.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),y&&this.setReadable(y)};a(S,r.Duplex),S.obj=function(c,y,b){return b||(b={}),b.objectMode=!0,b.highWaterMark=16,new S(c,y,b)},S.prototype.cork=function(){++this._corked===1&&this.emit("cork")},S.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},S.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var y=this,b=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),A=function(){var k=y._ondrain;y._ondrain=null,k&&k()},E=function(){y._writable.removeListener("drain",A),b()};this._unwrite&&se.nextTick(A),this._writable=c,this._writable.on("drain",A),this._unwrite=E,this.uncork()},S.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var y=this,b=n(c,{writable:!1,readable:!0},d(this)),A=function(){y._forward()},E=function(){y.push(null)},k=function(){y._readable2.removeListener("readable",A),y._readable2.removeListener("end",E),b()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:w(c),this._readable2.on("readable",A),this._readable2.on("end",E),this._unread=k,this._forward()},S.prototype._read=function(){this._drained=!0,this._forward()},S.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},S.prototype.destroy=function(c,y){if(y||(y=m),this.destroyed)return y(null);this.destroyed=!0;var b=this;se.nextTick(function(){b._destroy(c),y(null)})},S.prototype._destroy=function(c){if(c){var y=this._ondrain;this._ondrain=null,y?y(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},S.prototype._write=function(c,y,b){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,c,y,b));if(c===l)return this._finish(b);if(!this._writable)return b();this._writable.write(c)===!1?this._ondrain=b:this.destroyed||b()}},S.prototype._finish=function(c){var y=this;this.emit("preend"),o(this,function(){p(y._forwardEnd&&y._writable,function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),o(y,c)})})},S.prototype.end=function(c,y,b){return typeof c=="function"?this.end(null,null,c):typeof y=="function"?this.end(c,null,y):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,b))},t.exports=S}),Zn=oe((e,t)=>{X();var r=Yn(),n=tt(),a=Xn(),s=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=s(arguments);if(!(this instanceof f))return new f(d);a.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,a),f.prototype.setPipeline=function(){var d=s(arguments),p=this,m=!1,w=d[0],S=d[d.length-1];S=S.readable?S:null,w=w.writable?w:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){m||p.cork()}),r(d,function(y){if(p.removeListener("close",c),y)return p.destroy(y.message==="premature close"?null:y);m=!0,p._autoDestroy===!1&&(p._autoDestroy=!0),p.uncork()}),this.destroyed)return c();this.setWritable(w),this.setReadable(S)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),Qn=oe(()=>{X()}),Gr=oe((e,t)=>{X(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof se<"u"&&typeof se.pid=="number"&&se.versions&&se.versions.node)return a(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return s(l,o)}function a(l,o){var f=Qn(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var p=new Uint8Array(l),m=0;m<l;++m)p[m]=d.readUInt8(m);return p;default:throw new Error(o.type+" is unsupported.")}}function s(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var p=new ie.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new ie.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),Hr=oe((e,t)=>{X(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[n]=s;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==s||o.enumerable!==!0)return!1}return!0}}),xt=oe((e,t)=>{X();var r=Hr();t.exports=function(){return r()&&!!Symbol.toStringTag}}),ei=oe((e,t)=>{X();var r=typeof Symbol<"u"&&Symbol,n=Hr();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),ti=oe((e,t)=>{X();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";t.exports=function(l){var o=this;if(typeof o!="function"||a.call(o)!==s)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,p=function(){if(this instanceof d){var y=o.apply(this,f.concat(n.call(arguments)));return Object(y)===y?y:this}else return o.apply(l,f.concat(n.call(arguments)))},m=Math.max(0,o.length-f.length),w=[],S=0;S<m;S++)w.push("$"+S);if(d=Function("binder","return function ("+w.join(",")+"){ return binder.apply(this,arguments); }")(p),o.prototype){var c=function(){};c.prototype=o.prototype,d.prototype=new c,c.prototype=null}return d}}),rr=oe((e,t)=>{X();var r=ti();t.exports=Function.prototype.bind||r}),ri=oe((e,t)=>{X();var r=rr();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),nr=oe((e,t)=>{X();var r,n=SyntaxError,a=Function,s=TypeError,l=function(C){try{return a('"use strict"; return ('+C+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new s},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,p=ei()(),m=Object.getPrototypeOf||function(C){return C.__proto__},w={},S=typeof Uint8Array>"u"?r:m(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":p?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?m(m([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?r:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?r:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?m(""[Symbol.iterator]()):r,"%Symbol%":p?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":S,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},y=function C(z){var Y;if(z==="%AsyncFunction%")Y=l("async function () {}");else if(z==="%GeneratorFunction%")Y=l("function* () {}");else if(z==="%AsyncGeneratorFunction%")Y=l("async function* () {}");else if(z==="%AsyncGenerator%"){var ne=C("%AsyncGeneratorFunction%");ne&&(Y=ne.prototype)}else if(z==="%AsyncIteratorPrototype%"){var ae=C("%AsyncGenerator%");ae&&(Y=m(ae.prototype))}return c[z]=Y,Y},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=rr(),E=ri(),k=A.call(Function.call,Array.prototype.concat),T=A.call(Function.apply,Array.prototype.splice),L=A.call(Function.call,String.prototype.replace),g=A.call(Function.call,String.prototype.slice),R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,q=function(C){var z=g(C,0,1),Y=g(C,-1);if(z==="%"&&Y!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(Y==="%"&&z!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ne=[];return L(C,R,function(ae,pe,ce,ge){ne[ne.length]=ce?L(ge,M,"$1"):pe||ae}),ne},x=function(C,z){var Y=C,ne;if(E(b,Y)&&(ne=b[Y],Y="%"+ne[0]+"%"),E(c,Y)){var ae=c[Y];if(ae===w&&(ae=y(Y)),typeof ae>"u"&&!z)throw new s("intrinsic "+C+" exists, but is not available. Please file an issue!");return{alias:ne,name:Y,value:ae}}throw new n("intrinsic "+C+" does not exist!")};t.exports=function(C,z){if(typeof C!="string"||C.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new s('"allowMissing" argument must be a boolean');var Y=q(C),ne=Y.length>0?Y[0]:"",ae=x("%"+ne+"%",z),pe=ae.name,ce=ae.value,ge=!1,ye=ae.alias;ye&&(ne=ye[0],T(Y,k([0,1],ye)));for(var Be=1,le=!0;Be<Y.length;Be+=1){var O=Y[Be],N=g(O,0,1),$=g(O,-1);if((N==='"'||N==="'"||N==="`"||$==='"'||$==="'"||$==="`")&&N!==$)throw new n("property names with quotes must have matching quotes");if((O==="constructor"||!le)&&(ge=!0),ne+="."+O,pe="%"+ne+"%",E(c,pe))ce=c[pe];else if(ce!=null){if(!(O in ce)){if(!z)throw new s("base intrinsic for "+C+" exists, but the property is not available.");return}if(o&&Be+1>=Y.length){var ee=o(ce,O);le=!!ee,le&&"get"in ee&&!("originalValue"in ee.get)?ce=ee.get:ce=ce[O]}else le=E(ce,O),ce=ce[O];le&&!ge&&(c[pe]=ce)}}return ce}}),ni=oe((e,t)=>{X();var r=rr(),n=nr(),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(s,a),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(m){var w=l(r,s,arguments);if(o&&f){var S=o(w,"length");S.configurable&&f(w,"length",{value:1+d(0,m.length-(arguments.length-1))})}return w};var p=function(){return l(r,a,arguments)};f?f(t.exports,"apply",{value:p}):t.exports.apply=p}),ir=oe((e,t)=>{X();var r=nr(),n=ni(),a=n(r("String.prototype.indexOf"));t.exports=function(s,l){var o=r(s,!!l);return typeof o=="function"&&a(s,".prototype.")>-1?n(o):o}}),ii=oe((e,t)=>{X();var r=xt()(),n=ir(),a=n("Object.prototype.toString"),s=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:a(f)==="[object Arguments]"},l=function(f){return s(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&a(f)!=="[object Array]"&&a(f.callee)==="[object Function]"},o=function(){return s(arguments)}();s.isLegacyArguments=l,t.exports=o?s:l}),oi=oe((e,t)=>{X();var r=Object.prototype.toString,n=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=xt()(),l=Object.getPrototypeOf,o=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(a.test(n.call(d)))return!0;if(!s){var p=r.call(d);return p==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var m=o();f=m?l(m):!1}return l(d)===f}}),Kr=oe((e,t)=>{X();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(a,s,l){if(n.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var o=a.length;if(o===+o)for(var f=0;f<o;f++)s.call(l,a[f],f,a);else for(var d in a)r.call(a,d)&&s.call(l,a[d],d,a)}}),Yr=oe((e,t)=>{X();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Je:globalThis;t.exports=function(){for(var a=[],s=0;s<r.length;s++)typeof n[r[s]]=="function"&&(a[a.length]=r[s]);return a}}),Jr=oe((e,t)=>{X();var r=nr(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),Xr=oe((e,t)=>{X();var r=Kr(),n=Yr(),a=ir(),s=a("Object.prototype.toString"),l=xt()(),o=typeof globalThis>"u"?Je:globalThis,f=n(),d=a("Array.prototype.indexOf",!0)||function(y,b){for(var A=0;A<y.length;A+=1)if(y[A]===b)return A;return-1},p=a("String.prototype.slice"),m={},w=Jr(),S=Object.getPrototypeOf;l&&w&&S&&r(f,function(y){var b=new o[y];if(Symbol.toStringTag in b){var A=S(b),E=w(A,Symbol.toStringTag);if(!E){var k=S(A);E=w(k,Symbol.toStringTag)}m[y]=E.get}});var c=function(y){var b=!1;return r(m,function(A,E){if(!b)try{b=A.call(y)===E}catch{}}),b};t.exports=function(y){if(!y||typeof y!="object")return!1;if(!l||!(Symbol.toStringTag in y)){var b=p(s(y),8,-1);return d(f,b)>-1}return w?c(y):!1}}),ai=oe((e,t)=>{X();var r=Kr(),n=Yr(),a=ir(),s=a("Object.prototype.toString"),l=xt()(),o=typeof globalThis>"u"?Je:globalThis,f=n(),d=a("String.prototype.slice"),p={},m=Jr(),w=Object.getPrototypeOf;l&&m&&w&&r(f,function(y){if(typeof o[y]=="function"){var b=new o[y];if(Symbol.toStringTag in b){var A=w(b),E=m(A,Symbol.toStringTag);if(!E){var k=w(A);E=m(k,Symbol.toStringTag)}p[y]=E.get}}});var S=function(y){var b=!1;return r(p,function(A,E){if(!b)try{var k=A.call(y);k===E&&(b=k)}catch{}}),b},c=Xr();t.exports=function(y){return c(y)?!l||!(Symbol.toStringTag in y)?d(s(y),8,-1):S(y):!1}}),si=oe(e=>{X();var t=ii(),r=oi(),n=ai(),a=Xr();function s(U){return U.call.bind(U)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=s(Object.prototype.toString),d=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),m=s(Boolean.prototype.valueOf);l&&(w=s(BigInt.prototype.valueOf));var w;o&&(S=s(Symbol.prototype.valueOf));var S;function c(U,We){if(typeof U!="object")return!1;try{return We(U),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=a;function y(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"}e.isPromise=y;function b(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):a(U)||N(U)}e.isArrayBufferView=b;function A(U){return n(U)==="Uint8Array"}e.isUint8Array=A;function E(U){return n(U)==="Uint8ClampedArray"}e.isUint8ClampedArray=E;function k(U){return n(U)==="Uint16Array"}e.isUint16Array=k;function T(U){return n(U)==="Uint32Array"}e.isUint32Array=T;function L(U){return n(U)==="Int8Array"}e.isInt8Array=L;function g(U){return n(U)==="Int16Array"}e.isInt16Array=g;function R(U){return n(U)==="Int32Array"}e.isInt32Array=R;function M(U){return n(U)==="Float32Array"}e.isFloat32Array=M;function q(U){return n(U)==="Float64Array"}e.isFloat64Array=q;function x(U){return n(U)==="BigInt64Array"}e.isBigInt64Array=x;function C(U){return n(U)==="BigUint64Array"}e.isBigUint64Array=C;function z(U){return f(U)==="[object Map]"}z.working=typeof Map<"u"&&z(new Map);function Y(U){return typeof Map>"u"?!1:z.working?z(U):U instanceof Map}e.isMap=Y;function ne(U){return f(U)==="[object Set]"}ne.working=typeof Set<"u"&&ne(new Set);function ae(U){return typeof Set>"u"?!1:ne.working?ne(U):U instanceof Set}e.isSet=ae;function pe(U){return f(U)==="[object WeakMap]"}pe.working=typeof WeakMap<"u"&&pe(new WeakMap);function ce(U){return typeof WeakMap>"u"?!1:pe.working?pe(U):U instanceof WeakMap}e.isWeakMap=ce;function ge(U){return f(U)==="[object WeakSet]"}ge.working=typeof WeakSet<"u"&&ge(new WeakSet);function ye(U){return ge(U)}e.isWeakSet=ye;function Be(U){return f(U)==="[object ArrayBuffer]"}Be.working=typeof ArrayBuffer<"u"&&Be(new ArrayBuffer);function le(U){return typeof ArrayBuffer>"u"?!1:Be.working?Be(U):U instanceof ArrayBuffer}e.isArrayBuffer=le;function O(U){return f(U)==="[object DataView]"}O.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&O(new DataView(new ArrayBuffer(1),0,1));function N(U){return typeof DataView>"u"?!1:O.working?O(U):U instanceof DataView}e.isDataView=N;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ee(U){return f(U)==="[object SharedArrayBuffer]"}function fe(U){return typeof $>"u"?!1:(typeof ee.working>"u"&&(ee.working=ee(new $)),ee.working?ee(U):U instanceof $)}e.isSharedArrayBuffer=fe;function he(U){return f(U)==="[object AsyncFunction]"}e.isAsyncFunction=he;function B(U){return f(U)==="[object Map Iterator]"}e.isMapIterator=B;function P(U){return f(U)==="[object Set Iterator]"}e.isSetIterator=P;function F(U){return f(U)==="[object Generator]"}e.isGeneratorObject=F;function re(U){return f(U)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=re;function ue(U){return c(U,d)}e.isNumberObject=ue;function v(U){return c(U,p)}e.isStringObject=v;function _(U){return c(U,m)}e.isBooleanObject=_;function W(U){return l&&c(U,w)}e.isBigIntObject=W;function J(U){return o&&c(U,S)}e.isSymbolObject=J;function me(U){return ue(U)||v(U)||_(U)||W(U)||J(U)}e.isBoxedPrimitive=me;function de(U){return typeof Uint8Array<"u"&&(le(U)||fe(U))}e.isAnyArrayBuffer=de,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(e,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})}),li=oe((e,t)=>{X(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),ui=oe(e=>{X();var t=Object.getOwnPropertyDescriptors||function(O){for(var N=Object.keys(O),$={},ee=0;ee<N.length;ee++)$[N[ee]]=Object.getOwnPropertyDescriptor(O,N[ee]);return $},r=/%[sdj%]/g;e.format=function(O){if(!L(O)){for(var N=[],$=0;$<arguments.length;$++)N.push(l(arguments[$]));return N.join(" ")}for(var $=1,ee=arguments,fe=ee.length,he=String(O).replace(r,function(F){if(F==="%%")return"%";if($>=fe)return F;switch(F){case"%s":return String(ee[$++]);case"%d":return Number(ee[$++]);case"%j":try{return JSON.stringify(ee[$++])}catch{return"[Circular]"}default:return F}}),B=ee[$];$<fe;B=ee[++$])E(B)||!q(B)?he+=" "+B:he+=" "+l(B);return he},e.deprecate=function(O,N){if(typeof se<"u"&&se.noDeprecation===!0)return O;if(typeof se>"u")return function(){return e.deprecate(O,N).apply(this,arguments)};var $=!1;function ee(){if(!$){if(se.throwDeprecation)throw new Error(N);se.traceDeprecation?console.trace(N):console.error(N),$=!0}return O.apply(this,arguments)}return ee};var n={},a=/^$/;se.env.NODE_DEBUG&&(s=se.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i"));var s;e.debuglog=function(O){if(O=O.toUpperCase(),!n[O])if(a.test(O)){var N=se.pid;n[O]=function(){var $=e.format.apply(e,arguments);console.error("%s %d: %s",O,N,$)}}else n[O]=function(){};return n[O]};function l(O,N){var $={seen:[],stylize:f};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),A(N)?$.showHidden=N:N&&e._extend($,N),R($.showHidden)&&($.showHidden=!1),R($.depth)&&($.depth=2),R($.colors)&&($.colors=!1),R($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=o),p($,O,$.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(O,N){var $=l.styles[N];return $?"\x1B["+l.colors[$][0]+"m"+O+"\x1B["+l.colors[$][1]+"m":O}function f(O,N){return O}function d(O){var N={};return O.forEach(function($,ee){N[$]=!0}),N}function p(O,N,$){if(O.customInspect&&N&&z(N.inspect)&&N.inspect!==e.inspect&&!(N.constructor&&N.constructor.prototype===N)){var ee=N.inspect($,O);return L(ee)||(ee=p(O,ee,$)),ee}var fe=m(O,N);if(fe)return fe;var he=Object.keys(N),B=d(he);if(O.showHidden&&(he=Object.getOwnPropertyNames(N)),C(N)&&(he.indexOf("message")>=0||he.indexOf("description")>=0))return w(N);if(he.length===0){if(z(N)){var P=N.name?": "+N.name:"";return O.stylize("[Function"+P+"]","special")}if(M(N))return O.stylize(RegExp.prototype.toString.call(N),"regexp");if(x(N))return O.stylize(Date.prototype.toString.call(N),"date");if(C(N))return w(N)}var F="",re=!1,ue=["{","}"];if(b(N)&&(re=!0,ue=["[","]"]),z(N)){var v=N.name?": "+N.name:"";F=" [Function"+v+"]"}if(M(N)&&(F=" "+RegExp.prototype.toString.call(N)),x(N)&&(F=" "+Date.prototype.toUTCString.call(N)),C(N)&&(F=" "+w(N)),he.length===0&&(!re||N.length==0))return ue[0]+F+ue[1];if($<0)return M(N)?O.stylize(RegExp.prototype.toString.call(N),"regexp"):O.stylize("[Object]","special");O.seen.push(N);var _;return re?_=S(O,N,$,B,he):_=he.map(function(W){return c(O,N,$,B,W,re)}),O.seen.pop(),y(_,F,ue)}function m(O,N){if(R(N))return O.stylize("undefined","undefined");if(L(N)){var $="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize($,"string")}if(T(N))return O.stylize(""+N,"number");if(A(N))return O.stylize(""+N,"boolean");if(E(N))return O.stylize("null","null")}function w(O){return"["+Error.prototype.toString.call(O)+"]"}function S(O,N,$,ee,fe){for(var he=[],B=0,P=N.length;B<P;++B)ge(N,String(B))?he.push(c(O,N,$,ee,String(B),!0)):he.push("");return fe.forEach(function(F){F.match(/^\d+$/)||he.push(c(O,N,$,ee,F,!0))}),he}function c(O,N,$,ee,fe,he){var B,P,F;if(F=Object.getOwnPropertyDescriptor(N,fe)||{value:N[fe]},F.get?F.set?P=O.stylize("[Getter/Setter]","special"):P=O.stylize("[Getter]","special"):F.set&&(P=O.stylize("[Setter]","special")),ge(ee,fe)||(B="["+fe+"]"),P||(O.seen.indexOf(F.value)<0?(E($)?P=p(O,F.value,null):P=p(O,F.value,$-1),P.indexOf(`
`)>-1&&(he?P=P.split(`
`).map(function(re){return"  "+re}).join(`
`).substr(2):P=`
`+P.split(`
`).map(function(re){return"   "+re}).join(`
`))):P=O.stylize("[Circular]","special")),R(B)){if(he&&fe.match(/^\d+$/))return P;B=JSON.stringify(""+fe),B.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.substr(1,B.length-2),B=O.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=O.stylize(B,"string"))}return B+": "+P}function y(O,N,$){var ee=0,fe=O.reduce(function(he,B){return ee++,B.indexOf(`
`)>=0&&ee++,he+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return fe>60?$[0]+(N===""?"":N+`
 `)+" "+O.join(`,
  `)+" "+$[1]:$[0]+N+" "+O.join(", ")+" "+$[1]}e.types=si();function b(O){return Array.isArray(O)}e.isArray=b;function A(O){return typeof O=="boolean"}e.isBoolean=A;function E(O){return O===null}e.isNull=E;function k(O){return O==null}e.isNullOrUndefined=k;function T(O){return typeof O=="number"}e.isNumber=T;function L(O){return typeof O=="string"}e.isString=L;function g(O){return typeof O=="symbol"}e.isSymbol=g;function R(O){return O===void 0}e.isUndefined=R;function M(O){return q(O)&&ne(O)==="[object RegExp]"}e.isRegExp=M,e.types.isRegExp=M;function q(O){return typeof O=="object"&&O!==null}e.isObject=q;function x(O){return q(O)&&ne(O)==="[object Date]"}e.isDate=x,e.types.isDate=x;function C(O){return q(O)&&(ne(O)==="[object Error]"||O instanceof Error)}e.isError=C,e.types.isNativeError=C;function z(O){return typeof O=="function"}e.isFunction=z;function Y(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||typeof O>"u"}e.isPrimitive=Y,e.isBuffer=li();function ne(O){return Object.prototype.toString.call(O)}function ae(O){return O<10?"0"+O.toString(10):O.toString(10)}var pe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var O=new Date,N=[ae(O.getHours()),ae(O.getMinutes()),ae(O.getSeconds())].join(":");return[O.getDate(),pe[O.getMonth()],N].join(" ")}e.log=function(){console.log("%s - %s",ce(),e.format.apply(e,arguments))},e.inherits=tt(),e._extend=function(O,N){if(!N||!q(N))return O;for(var $=Object.keys(N),ee=$.length;ee--;)O[$[ee]]=N[$[ee]];return O};function ge(O,N){return Object.prototype.hasOwnProperty.call(O,N)}var ye=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(ye&&O[ye]){var N=O[ye];if(typeof N!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(N,ye,{value:N,enumerable:!1,writable:!1,configurable:!0}),N}function N(){for(var $,ee,fe=new Promise(function(P,F){$=P,ee=F}),he=[],B=0;B<arguments.length;B++)he.push(arguments[B]);he.push(function(P,F){P?ee(P):$(F)});try{O.apply(this,he)}catch(P){ee(P)}return fe}return Object.setPrototypeOf(N,Object.getPrototypeOf(O)),ye&&Object.defineProperty(N,ye,{value:N,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(N,t(O))},e.promisify.custom=ye;function Be(O,N){if(!O){var $=new Error("Promise was rejected with a falsy value");$.reason=O,O=$}return N(O)}function le(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var $=[],ee=0;ee<arguments.length;ee++)$.push(arguments[ee]);var fe=$.pop();if(typeof fe!="function")throw new TypeError("The last argument must be of type Function");var he=this,B=function(){return fe.apply(he,arguments)};O.apply(this,$).then(function(P){se.nextTick(B.bind(null,null,P))},function(P){se.nextTick(Be.bind(null,P,B))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(O)),Object.defineProperties(N,t(O)),N}e.callbackify=le}),fi=oe((e,t)=>{X();var r=pt(),n=ui(),a=r.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,a.call(this,l)}n.inherits(s,a),s.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=s});X();X();var Zr=xe(pt(),1),Qr=xe(Zn(),1);X();var en=xe(pt(),1);function tn(e,t){let r=[],n;e.on("data",a=>r.push(a)),e.on("end",()=>{n||(n=!0,t(null,ie.Buffer.concat(r)))}),e.on("error",a=>{n||(n=!0,t(a))})}function rn(e){let t;return new en.Transform({transform(r,n,a){t&&(r=ie.Buffer.concat([t,r]));let s=Math.floor(r.length/e)*e;s?r.length>s?(t=r.slice(s),this.push(r.slice(0,s))):(t=void 0,this.push(r)):t=t?ie.Buffer.concat([t,r]):r,a()},flush(r){t&&this.push(t),r()}})}function ci(e,t){let r=[],n=0;return new en.Transform({transform(a,s,l){r.push(a),n+=a.length,l()},flush(a){t(n);function s(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",s);e.end(),a()}s()}})}function Pe(e){let t,r=new Promise((n,a)=>{t=(s,l)=>{s?a(s):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var hi=xe(Gr(),1);X();X();var or=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,a,s,l=this._tables[0][4],o=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[a=e.slice(0),s=[]],t=f;t<4*f+28;t++)n=a[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),a[t]=a[t-f]^n;for(r=0;t;r++,t--)n=a[r&3?t:t-4],t<=4||r<4?s[r]=n:s[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],a,s,l,o=[],f=[],d,p,m,w,S,c;for(a=0;a<256;a++)f[(o[a]=a<<1^(a>>7)*283)^a]=a;for(s=l=0;!r[s];s^=d||1,l=f[l]||1)for(w=l^l<<1^l<<2^l<<3^l<<4,w=w>>8^w&255^99,r[s]=w,n[w]=s,m=o[p=o[d=o[s]]],c=m*16843009^p*65537^d*257^s*16843008,S=o[w]*257^w*16843008,a=0;a<4;a++)e[a][s]=S=S<<24^S>>>8,t[a][w]=c=c<<24^c>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),t[a]=t[a].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],a=e[t?3:1]^r[1],s=e[2]^r[2],l=e[t?1:3]^r[3],o,f,d,p=r.length/4-2,m,w=4,S=[0,0,0,0],c=this._tables[t],y=c[0],b=c[1],A=c[2],E=c[3],k=c[4];for(m=0;m<p;m++)o=y[n>>>24]^b[a>>16&255]^A[s>>8&255]^E[l&255]^r[w],f=y[a>>>24]^b[s>>16&255]^A[l>>8&255]^E[n&255]^r[w+1],d=y[s>>>24]^b[l>>16&255]^A[n>>8&255]^E[a&255]^r[w+2],l=y[l>>>24]^b[n>>16&255]^A[a>>8&255]^E[s&255]^r[w+3],w+=4,n=o,a=f,s=d;for(m=0;m<4;m++)S[t?3&-m:m]=k[n>>>24]<<24^k[a>>16&255]<<16^k[s>>8&255]<<8^k[l&255]^r[w++],o=n,n=a,a=s,s=l,l=o;return S}};or.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function di(e){let t,r,n,a=[2479122403,2108737444,3518906241,22203222],s=ie.Buffer.alloc(Math.ceil(e.length/4)*4);for(s.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let o=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(o[t/4]=s.readInt32BE(t+r));a=new or(o).encrypt(a)}let l=ie.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(a[t],t*4);return l}function pi(e,t,r){let n=ie.Buffer.from(t.s,"base64"),a=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:a,hash:{name:s}},l,256)).then(l=>{r(null,ie.Buffer.from(l))}).catch(r)}var $e=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new or(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,a;for(n=0;n<e.length;n+=16){for(a=0;a<4;a++)r[a]=e.readUInt32BE(n+a*4)^t[a];for(t=this.aes.encrypt(r),a=0;a<4;a++)e.writeInt32BE(t[a],n+a*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),a,s;for(a=0;a<e.length;a+=16){for(s=0;s<4;s++)r[s]=e.readUInt32BE(a+s*4);for(n=r,r=this.aes.decrypt(r),s=0;s<4;s++)e.writeInt32BE(r[s]^t[s],a+s*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let a=e.length-n;t[n/4&3]^=e.readIntBE(n,a)<<(4-a)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=ie.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},nn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=ie.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ie.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ie.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},on=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=ie.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=ie.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=ie.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(ie.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function De(e){return typeof e=="string"?ar(e):e}function Re(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ar(e){return ie.Buffer.from(e,"base64")}function it(e){return new $e(an(e).slice(0,16))}function yi(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=De(e),e||(e=(0,hi.default)(24)),e instanceof ie.Buffer||(e=ie.Buffer.from(e));let n=new Zr.Transform({transform(o,f,d){l.update(o);let p=s.encrypt(o);d(null,ie.Buffer.from(p))},flush(o){n.mac=l.condense(),n.key=mi(e,n.mac),o()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let a=new $e(e.slice(0,16)),s=new nn(a,e.slice(16),r),l=new on(a,e.slice(16));return n=(0,Qr.default)(rn(16),n),n}function gi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=De(e),e instanceof ie.Buffer||(e=ie.Buffer.from(e));let n=it(e),a=new nn(n,e.slice(16),r),s=!t.disableVerification&&new on(n,e.slice(16)),l=new Zr.Transform({transform(o,f,d){let p=a.decrypt(o);s&&s.update(p),d(null,ie.Buffer.from(p))},flush(o){if(s&&(l.mac=s.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,Qr.default)(rn(16),l),l}function an(e){let t=ie.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function mi(e,t){let r=ie.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function bi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let a=0;a<r;a++)n|=e[a]^t[a];return n===0}X();X();var qe={},wi=Math.log(2);function At(e){let t=[];for(;e-- >0;)t[e]=0;return t}function kt(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function vi(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function sn(e,t){let r=e.length,n=t.length;if(r<n)return sn(t,e);let a=[],s=0,l=0;for(;l<n;l++)s+=e[l]+t[l],a[l]=s&268435455,s>>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>>=28;return s&&(a[l]=s),a}function Ne(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let a=[],s=0,l;for(l=0;l<n;l++)s+=e[l]-t[l],a[l]=s&268435455,s>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>=28;return s?[]:kt(a)}function Ht(e,t,r,n,a){let s=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*s,p=s*o+((d&16383)<<14)+e[t]+a;return e[t]=p&268435455,a=l*f+(d>>14)+(p>>28),a}function _i(e){let t=e.length,r=2*t,n=At(r),a=0,s,l;for(s=0;s<t;s++){for(a=Ht(n,2*s,e[s],e[s],0),l=s+1;l<t;l++)a=Ht(n,s+l,2*e[l],e[s],a);n[s+t]=a}return kt(n)}function Ye(e,t){let r=e.length,n=t.length,a=At(r+n-1),s,l,o;for(l=0;l<n;l++){for(s=0,o=0;o<r;o++)s=Ht(a,l+o,e[o],t[l],s);a[l+r]=s}return kt(a)}function mt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function ln(e,t){let r=e.length-1,n=t.length-1,a=r-n,s,l,o,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return qe.q=[0],qe.mod=e,qe;if(r===n&&mt(e,n,2)/mt(t,n,2)<4){for(s=e.concat(),l=0;o=Ne(s,t),o.length!==0;)s=o,l++;return qe.q=[l],qe.mod=s,qe}let d=Math.floor(Math.log(t[n])/wi)+1,p=28-d;s=e.concat();let m=t.concat();if(p){for(f=n;f>0;f--)m[f]=m[f]<<p&268435455|m[f-1]>>d;for(m[0]=m[0]<<p&268435455,s[r]&(268435455<<d&268435455)&&(s[++r]=0,a++),f=r;f>0;f--)s[f]=s[f]<<p&268435455|s[f-1]>>d;s[0]=s[0]<<p&268435455}let w,S=At(a+1),c=At(a).concat(m);for(;w=Ne(s,c),w.length!==0;)S[a]++,s=w;let y=m[n],b=mt(m,n,2),A;for(f=r;f>n;f--){A=f-n-1,f>=s.length?S[A]=1:s[f]===y?S[A]=268435455:S[A]=Math.floor(mt(s,f,2)/y);let E=mt(s,f,3);for(;S[A]*b>E;)S[A]--;c=c.slice(1),w=Ne(s,Ye([S[A]],c)),w.length===0&&(S[A]--,w=Ne(s,Ye([S[A]],c))),s=w}if(p){for(f=0;f<s.length-1;f++)s[f]=s[f]>>p|s[f+1]<<d&268435455;s[s.length-1]>>=p}return qe.q=kt(S),qe.mod=kt(s),qe}function Ei(e,t){let r=0,n;for(let a=e.length-1;a>=0;a--)n=e[a],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function lt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Ei(e,t[0])]}return ln(e,t).mod}function vt(e,t,r){let n=e.length-(t.length<<1);if(n>0)return vt(e.slice(0,n).concat(vt(e.slice(n),t,r)),t,r);let a=t.length+1,s=t.length-1,l,o=Ye(e.slice(s),r).slice(a),f=e.slice(0,a),d=Ye(o,t).slice(0,a),p=Ne(f,d);p.length===0&&(f[a]=1,p=Ne(f,d));for(let m=0;l=Ne(p,t),l.length!==0;m++)if(p=l,m>=3)return vt(p,t,r);return p}function dr(e,t,r){let n=e.concat(),a=t.length-1,s=r.length*2,l=At(s+1);for(l[s]=1,l=ln(l,r).q,s=vi(t[a])-2;a>=0;a--){for(;s>=0;s-=1)n=vt(_i(n),r,l),t[a]&1<<s&&(n=vt(Ye(n,e),r,l));s=28-1}return n}function Si(e,t,r,n,a){let s=dr(lt(e,r),lt(t,Ne(r,[1])),r),l=dr(lt(e,n),lt(t,Ne(n,[1])),n),o=Ne(l,s);return o.length===0?(o=Ne(s,l),o=lt(Ye(o,a),n),o=Ne(n,o)):o=lt(Ye(o,a),n),sn(Ye(o,r),s)}function un(e){let t=1,r=[0],n=0,a=256,s=e.length,l;if(s<2)return 0;let o=(s-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(a<<=1)>255&&(a=1,l=e.charCodeAt(--s)),t>268435455&&(t=1,r[++n]=0),l&a&&(r[n]|=t),t<<=1;return r}function Ai(e){let t=1,r=0,n=[0],a=1,s=0,l=e.length*28,o="",f;for(f=0;f<l;f++)e[r]&t&&(n[s]|=a),(a<<=1)>255&&(a=1,n[++s]=0),(t<<=1)>268435455&&(t=1,r++);for(;s>=0&&n[s]===0;)s--;for(f=0;f<=s;f++)o=String.fromCharCode(n[f])+o;return o}function ki(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=un(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Ii(e,t){let r=un(e.toString("binary")),n=Ai(Si(r,t[2],t[0],t[1],t[3]));return ie.Buffer.from(n,"binary")}X();var Bi=xe(Bt(),1);X();var Oi=null;X();var Ri=globalThis.fetch,Ti=Ri;X();var Li=globalThis.AbortController||Oi,Kt=Li,Yt=4,pr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+Yt+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},Pi="https://g.api.mega.co.nz/",ji=null,Mi=null,bt=class extends Bi.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||Pi;let r="1.0.6";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||ji,this.httpsAgent=t.httpsAgent||Mi,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),Ti(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[a,s]=Pe(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(yr).then(o=>{if(this.closed&&!n)return;if(!o)return a(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<Yt)return setTimeout(()=>{this.request(e,a,r+1)},Math.pow(2,r+1)*1e3);f=Error(pr[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);a(f,o)}).catch(o=>{a(o)}),s}pull(e,t=0){let r=new Kt;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(yr).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<Yt)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(pr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(Ui).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new Kt;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return bt.globalApi||(bt.globalApi=new bt),bt.globalApi}};function yr(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function Ui(e){if(e.name!=="AbortError")throw e}var Mt=bt,Ci=xe(Bt(),1);X();X();var Ni=xe(Bt(),1),xi=xe(pt(),1),Di=xe(fi(),1),nt=class extends Ni.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?De(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Mt.getGlobalApi(),!(this.api instanceof Mt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=De(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=ar(e),it(this.key).decryptCBC(e);let t=nt.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=fn[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=Pe(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(a,s)=>{if(a)return t(a);if(this.directory){let l=Object.create(null),o=s.f,f=o.find(p=>p.k&&p.h===p.k.split(":")[0]),d=this.key?new $e(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let p of o){if(p===f)continue;let m=new nt(p,this.storage);m.loadMetadata(d,p),m.downloadId=[this.downloadId,p.h],l[p.h]=m}for(let p of o){let m=l[p.p];if(m){let w=l[p.h];m.children||(m.children=[]),m.children.push(w),w.parent=m}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let p=l[this.loadedFile];typeof p>"u"?t(Error("Node (file or folder) not found in folder")):t(null,p)}else t(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){var c;typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,a=e.end||null,s=e.maxConnections||4,l=e.initialChunkSize||128*1024,o=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=(c=e.forceHttps)==null||c?2:0,p={a:"g",g:1,ssl:d};if(this.nodeId?p.n=this.nodeId:Array.isArray(this.downloadId)?(p._querystring={n:this.downloadId[0]},p.n=this.downloadId[1]):p.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let m=this.key&&!e.returnCiphertext?gi(this.key,{start:n,disableVerification:n!==0||a!==null}):new xi.PassThrough,w=n===r?m:m.pipe(new Di.default({skip:r-n})),S=e.handleRetries||nt.defaultHandleRetries;return this.api.request(p,(y,b)=>{if(y)return w.emit("error",y);if(typeof b.g!="string"||b.g.substr(0,4)!=="http")return w.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(b.s===0)return w.end();if(a||(a=b.s-1),r>a)return w.emit("error",Error("You can't download past the end of the file."));function A(z){if(z.status!==200){if(z.status===509){let Y=z.headers.get("x-mega-time-left"),ne=Error("Bandwidth limit reached: "+Y+" seconds until it resets");ne.timeLimit=Y,w.emit("error",ne);return}w.emit("error",Error("MEGA returned a "+z.status+" status code"))}}function E(z){w.emit("error",z)}let k=0;if(w.on("data",z=>{k+=z.length,w.emit("progress",{bytesLoaded:k,bytesTotal:b.s})}),s===1){let z=new Kt;w.on("close",()=>{z.abort()}),this.api.fetch(b.g+"/"+n+"-"+a,{signal:z.signal}).then(Y=>{A(Y);let ne=Y.body;if(ne)if(ne.pipe)Y.body.pipe(m);else if(ne.getReader){let ae=ne.getReader(),pe=({done:ce,value:ge})=>{if(ce)m.end();else return m.write(ge),ae.read().then(pe)};ae.read().then(pe)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(E);return}let T={},L=0,g=0,R=!1,M=n,q=l;w.on("error",()=>{R=!0}),w.on("close",()=>{R=!0});let x=()=>{if(M>a){R=!0,L===g&&m.end();return}let z=M,Y=Math.min(a,z+q-1),ne=L++,ae=0,pe=()=>{ae++,this.api.fetch(b.g+"/"+z+"-"+Y).then(ce=>(A(ce),ce.arrayBuffer())).then(ce=>{let ge=ie.Buffer.from(ce);T[ne]=ge,g===ne&&C()},ce=>{S(ae,ce,ge=>{ge?E(ge):pe()})})};pe(),M=Y+1,q<f&&(q=q+o)},C=()=>{let z;for(;;){let Y=T[g];if(!Y||(z=!m.write(Y),delete T[g],g++,z))break}R&&L===g&&m.end(),z?m.once("drain",C):x()};for(let z=0;z<s;z++)x()}),t&&tn(w,t),w}downloadBuffer(e,t){let[r,n]=Pe(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=Pe(t);typeof e=="boolean"&&(e={noKey:e});let a=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(a+=`#${Re(this.key)}`),!e.noKey&&this.loadedFile&&(a+=`/file/${this.loadedFile}`),r(null,a),n}static fromURL(e,t={}){if(typeof e=="object")return new nt(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),a=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),s=n[0];if(a&&!s||!a&&s)throw Error("Invalid URL: too few arguments");return new nt({downloadId:a,key:s,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new nt({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},fn=["","red","orange","yellow","green","blue","purple","grey"],Ve=nt,Wt=xe(Gr(),1),gr=xe(pt(),1),mr={},wt=class extends Ve{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let a of r){let s=a.split(":")[0];if(s===t.user){e.k=a;break}let l=t.shareKeys[s];if(l){e.k=a,n=mr[s],n||(n=mr[s]=new $e(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=Pe(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=ie.Buffer.from((0,Wt.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let a=e.key,s=wt.packAttributes(e.attributes);it(a).encryptCBC(s);let l=ie.Buffer.from(a);this.storage.aes.encryptECB(l);let o={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:Re(s),k:Re(l)}]},f=_t(this.storage.shareKeys,this);return f.length>0&&(o.cr=Tt(this.storage,[{nodeId:"xxxxxxxx",key:a}],f)),this.api.request(o,(d,p)=>{if(d)return r(d);let m=this.storage._importFile(p.f[0]);this.storage.emit("add",m),r(null,m)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,a]=Pe(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let s,l=De(e.key);l||(l=(0,Wt.default)(24)),l instanceof ie.Buffer||(l=ie.Buffer.from(l));let o=e.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(s=l,l=an(l).slice(0,24)),e.key=l;let f=[],d=(w,S,c,y)=>{if(w)return m(w);if(!c||c.length===0){m(Error("Server returned a invalid response while uploading"));return}let b=Number(c.toString());if(b<0){m(Error("Server returned error "+b+" while uploading"));return}if(f[S]=c,S===0&&!s&&(s=y.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let A=wt.packAttributes(e.attributes);it(s).encryptCBC(A);let E=ie.Buffer.from(s);this.storage.aes.encryptECB(E);let k={h:Re(f[0]),t:0,a:Re(A),k:Re(E)};f.length!==1&&(k.fa=f.slice(1).map((g,R)=>R+"*"+Re(g)).filter(g=>g).join("/"));let T={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[k]},L=_t(this.storage.shareKeys,this);L.length>0&&(T.cr=Tt(this.storage,[{nodeId:k.h,key:s}],L)),this.api.request(T,(g,R)=>{if(g)return m(g);let M=this.storage._importFile(R.f[0]);this.storage.emit("add",M),p.emit("complete",M),n&&n(null,M)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let p=this._upload(e,t,0,d);function m(w){p.listenerCount("error")?p.emit("error",w):n(w)}return p.complete=a,p}_upload(e,t,r,n){let a=e.uploadCiphertext?new gr.PassThrough:yi(e.key),s=a,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,s.end(t)),l!=null?(l===0&&a.end(),this._uploadWithSize(s,l,a,r,e,n)):s=ci(s,o=>{this._uploadWithSize(s,o,a,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(s),s}_uploadAttribute(e,t,r,n){let a=(s,l)=>{if(s)return n(s);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=ie.Buffer.concat([l,ie.Buffer.alloc(f)])),(e.handle?it(e.key):new $e(e.key.slice(0,16))).encryptCBC(l);let d=new gr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof ie.Buffer){a(null,t);return}tn(t,a)}_uploadWithSize(e,t,r,n,a,s){var x;let l=(x=a.forceHttps)==null||x?2:0,o=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};a.handle&&(o.h=a.handle);let f=n===0?a.initialChunkSize||128*1024:t,d=a.chunkSizeIncrement||128*1024,p=a.maxChunkSize||1024*1024,m=a.maxConnections||4,w=a.handleRetries||Ve.defaultHandleRetries,S=f,c=0,y=!1,b=0,A,E,k,T,L,g=()=>{T=Math.min(S,t-b),E=ie.Buffer.alloc(T),c++,S<p&&(S+=d),L=0,A&&(A.copy(E),L=Math.min(A.length,T),A=A.length>T?A.slice(T):null),L===T?R():(y=!0,q())},R=()=>{let C=b,z=E,Y=0,ne=()=>{Y++,this.api.fetch(k+"/"+(n===0?C:n-1),{method:"POST",body:z,headers:{"content-length":z.length}}).then(ae=>{if(ae.status!==200)throw Error("MEGA returned a "+ae.status+" status code");return ae.arrayBuffer()}).then(ae=>{let pe=ie.Buffer.from(ae);pe.length>0?(r.end(),se.nextTick(()=>{s(null,n,pe,r)})):b<t&&!y&&g()},ae=>{w(Y,ae,pe=>{pe?e.emit("error",pe):ne()})})};ne(),E=null,b+=T,b<t&&!y&&c<m&&g()},M=0,q=()=>{for(;;){let C=r.read();if(C===null){r.once("readable",q);break}if(M+=C.length,e.emit("progress",{bytesLoaded:M,bytesTotal:t}),C.copy(E,L),L+=C.length,L>=T){y=!1,A=C.slice(C.length-(L-T)),R();break}}};r.on("end",()=>{t&&M!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+M))}),this.api.request(o,(C,z)=>{if(C)return s(C);k=z.p,g()})}uploadAttribute(e,t,r){let[n,a]=Pe(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(s,l,o,f)=>{if(s)return n(s);let d={a:"pfa",n:this.nodeId,fa:e+"*"+Re(o)};this.api.request(d,(p,m)=>{if(p)return n(p);n(null,this)})}),a}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof Ve))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=_t(this.storage.shareKeys,e);return n.length>0&&(r.cr=Tt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=Pe(t);Object.assign(this.attributes,e);let a=wt.packAttributes(this.attributes);return it(this.key).encryptCBC(a),this.api.request({a:"a",n:this.nodeId,at:Re(a)},s=>{this.parseAttributes(this.attributes),r(s)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=fn.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,a]=Pe(t);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return n(s);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(o+=`#${Re(r||this.key)}`),n(null,o)}),a}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let a=De(e.key);a||(a=(0,Wt.default)(16)),a instanceof ie.Buffer||(a=ie.Buffer.from(a));let[s,l]=Pe(t);if(a.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=a;let o=ie.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:Re(this.storage.aes.encryptECB(ie.Buffer.from(a))),ha:Re(o),cr:Tt(this.storage,this)};return this.api.request(f,d=>{if(d)return s(d);this.link(Object.assign({__folderKey:a},e),s)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=Pe(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=Ve.fromURL(e)),!(e instanceof Ve))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let a=(s,l)=>{if(s)return r(s);let o=wt.packAttributes(l.attributes);it(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:Re(o),k:Re(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(p,m)=>{if(p)return r(p);let w=this.storage._importFile(m.f[0]);this.storage.emit("add",w),r(null,w)})};return e.attributes?a(null,e):e.loadAttributes(a),n}static packAttributes(e){let t=JSON.stringify(e);t=ie.Buffer.from(`MEGA${t}`);let r=ie.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Tt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=cn(t)),r||(r=t.map(s=>_t(n,s)).reduce((s,l)=>s.concat(l)).filter((s,l,o)=>l===o.indexOf(s)));let a=[r,t.map(s=>s.nodeId),[]];for(let s=r.length;s--;){let l=new $e(n[r[s]]);for(let o=t.length;o--;){let f=ie.Buffer.from(t[o].key);f&&(f.length===32||f.length===16)&&a[2].push(s,o,Re(l.encryptECB(f)))}}return a}function cn(e){return[e].concat((e.children||[]).map(cn).reduce((t,r)=>t.concat(r),[]))}function _t(e,t){let r=t.nodeId,n=t.parent,a=[];return e[r]&&a.push(r),n?a.concat(_t(e,n)):a}var Fi=wt,$i=class extends Ci.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=Pe(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Mt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):se.nextTick(()=>{r(null,this)})}login(e){let[t,r]=Pe(e);if(typeof this.options.email!="string")return se.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},a=f=>{this.api.request({a:"ug"},(d,p)=>{if(d)return f(d);this.name=p.name,this.user=p.u,this.options.autoload?this.reload(!0,m=>{if(m)return f(m);n()}):n()})};this.email=this.options.email.toLowerCase();let s=f=>{let d=di(ie.Buffer.from(this.options.password));delete this.options.password;let p=new $e(d),m=Re(p.stringhash(ie.Buffer.from(this.email))),w={a:"us",user:this.email,uh:m};o(w,p,f)},l=(f,d)=>{pi(ie.Buffer.from(this.options.password),f,(p,m)=>{if(p)return d(p);delete this.options.password;let w=new $e(m.slice(0,16)),S=Re(m.slice(16)),c={a:"us",user:this.email,uh:S};o(c,w,d)})},o=(f,d,p)=>{this.api.request(f,(m,w)=>{if(m)return p(m);this.key=De(w.k),d.decryptECB(this.key),this.aes=new $e(this.key);let S=De(w.csid),c=this.aes.decryptECB(De(w.privk)),y=ki(c);if(!y)throw Error("invalid credentials");let b=Re(Ii(S,y).slice(0,43));this.api.sid=this.sid=b,this.RSAPrivateKey=y,a(p)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return s(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=Pe(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(a,s)=>{if(a)return r(a);this.shareKeys=s.ok.reduce((l,o)=>{let f=o.h,d=this.aes.encryptECB(ie.Buffer.from(f+f));return bi(De(o.ha),d)&&(l[f]=this.aes.decryptECB(De(o.k))),l},{}),s.f.forEach(l=>{var o;l=this._importFile(l),s.ph!==void 0&&(l.shareId=(o=s.ph.find(f=>f.h===l.nodeId))==null?void 0:o.ph,l.shared=!!l.shareId,l.shared&&(l.shareURL=`https://mega.nz/${l.directory?"folder":"file"}/${l.shareId}`,l.key&&(l.shareURL+=`#${Re(l.directory?this.shareKeys[l.nodeId]:l.key)}`)))}),r(null,this.mounts)}),this.api.on("sc",a=>{let s={};a.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete s[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(s).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new Fi(e,this);if(e.t===Wi&&(this.root=t,t.name="Cloud Drive"),e.t===Vi&&(this.trash=t,t.name="Rubbish Bin"),e.t===qi&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=Pe(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,a)=>{n&&t(n);let s={};s.type=a.utype,s.spaceUsed=a.cstrg,s.spaceTotal=a.mstrg,s.downloadBandwidthTotal=a.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=a.caxfer||0,s.sharedBandwidthUsed=a.csxfer||0,s.sharedBandwidthLimit=a.srvratio,t(null,s)}),r}toJSON(){return{key:Re(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new $i(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=ar(e.key),t.aes=new $e(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},Wi=2,qi=3,Vi=4;Ve.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function rt(){return await Bn("music",2,{upgrade(e,t,r,n,a){t<1&&(e.createObjectStore("album",{keyPath:"folderName"}),e.createObjectStore("image",{keyPath:"id"}),e.createObjectStore("song",{keyPath:"id"})),e.createObjectStore("albumFolder")}})}async function zi(){var a,s;const e=await rt(),t=await e.getAll("album"),r=(a=await e.get("albumFolder","german"))!=null?a:[],n=(s=await e.get("albumFolder","russian"))!=null?s:[];return e.close(),{german:t.filter(l=>r.includes(l.folderName)),russian:t.filter(l=>n.includes(l.folderName))}}async function Gi(e){const t=await rt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian");const a=r.objectStore("album");a.clear();const s=[];for(const l of e.german)s.push(a.put(l));for(const l of e.russian)s.push(a.put(l));await Promise.all(s),r.commit(),t.close()}const br={};async function sr(e){const t=Fe(e);let r=br[t];if(!r){const n=await Hi(e);r=URL.createObjectURL(n),br[t]=r}return r}async function Hi(e){const t=Fe(e),r=await rt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const a=await new Ve({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a]);return Ki(e,s),s}async function Ki(e,t){const n={id:Fe(e),blob:t},a=await rt();await a.add("image",n),a.close()}async function hn(e){const t=Fe(e),r=await rt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const a=await new Ve({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a],{type:"audio/mpeg"});return Yi(e,s),s}async function Yi(e,t){const n={id:Fe(e),name:e.name,blob:t},a=await rt();await a.add("song",n),a.close()}async function Ji(e){const t=await rt(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(Fe(n)))}async function Xi(){const e=await rt(),t=await e.getAllKeys("song");return e.close(),t}function Fe(e){return JSON.stringify({key:e.key,downloadId:e.downloadId})}const wr={GERMAN_SONGS_URL:"https://mega.nz/folder/HrY2VQ4B#bHcKtZGU3gvx0yq1K2YvoQ",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ"};function qt(e){return e.german.flatMap(t=>t.songs).concat(e.russian.flatMap(t=>t.songs))}async function Zi(){return{german:await vr(wr.GERMAN_SONGS_URL),russian:await vr(wr.RUSSIAN_SONGS_URL)}}async function vr(e){const t=Ve.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(r=>{const n=r.children.find(a=>{var s;return(s=a.name)==null?void 0:s.endsWith(".jpg")});return{name:r.name.split("(")[0].trim(),folderName:r.name,image:n?{key:n.key,downloadId:n.downloadId,fileSize:n.size}:null,songs:r.children.filter(a=>a.name.endsWith(".mp3")).map(a=>({name:a.name.substring(0,a.name.length-4).trim(),link:{key:a.key,downloadId:a.downloadId,fileSize:a.size}}))}})}async function Et(e,t,r){try{const n=t[r];He.update(s=>({...s,isLoading:!0}));const a=await hn({name:n.name,...n.link});He.update(s=>(s.src!=null&&URL.revokeObjectURL(s.src),{...s,isLoading:!1,src:URL.createObjectURL(a),album:e,song:n,playPrevious:r>0?()=>Et(e,t,r-1):null,playNext:r<t.length-1?()=>Et(e,t,r+1):null,playRandom:()=>Et(e,t,Qi(t.length))}))}catch{He.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function Qi(e){return Math.floor(Math.random()*e)}const Lt="music/favorites";function Jt(e){var r,n;const t=Fe(e);return(n=(r=localStorage.getItem(Lt))==null?void 0:r.includes(t))!=null?n:!1}function eo(e){var n;const t=`;${Fe(e)};`,r=localStorage.getItem(Lt);(n=r==null?void 0:r.includes(t))!=null&&n?localStorage.setItem(Lt,r.replace(t,"")):localStorage.setItem(Lt,r+t)}function to(e){let t,r,n,a,s;return{c(){t=Z("button"),r=be("play_arrow"),this.h()},l(l){t=Q(l,"BUTTON",{class:!0});var o=te(t);r=we(o,"play_arrow"),o.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle"),t.disabled=n=e[0].isLoading},m(l,o){Ee(l,t,o),V(t,r),a||(s=Ie(t,"click",e[5]),a=!0)},p(l,o){o&1&&n!==(n=l[0].isLoading)&&(t.disabled=n)},d(l){l&&G(t),a=!1,s()}}}function ro(e){let t,r,n,a;return{c(){t=Z("button"),r=be("pause"),this.h()},l(s){t=Q(s,"BUTTON",{class:!0});var l=te(t);r=we(l,"pause"),l.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){Ee(s,t,l),V(t,r),n||(a=Ie(t,"click",e[6]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function no(e){let t,r,n,a,s,l,o,f,d,p,m,w,S,c,y,b,A,E,k,T,L,g,R,M,q,x,C,z=!0,Y=!1,ne,ae,pe;function ce(le,O){return le[1]?to:ro}let ge=ce(e),ye=ge(e);function Be(){cancelAnimationFrame(ne),x.paused||(ne=pn(Be),Y=!0),e[12].call(x)}return{c(){t=Z("div"),r=Z("div"),n=Z("div"),a=Z("input"),s=Se(),l=Z("button"),o=be("X"),f=Se(),d=Z("div"),p=Z("button"),m=be("favorite"),S=Se(),c=Z("button"),y=be("skip_previous"),A=Se(),ye.c(),E=Se(),k=Z("button"),T=be("skip_next"),g=Se(),R=Z("button"),M=be("shuffle"),q=Se(),x=Z("audio"),this.h()},l(le){t=Q(le,"DIV",{class:!0});var O=te(t);r=Q(O,"DIV",{class:!0});var N=te(r);n=Q(N,"DIV",{class:!0});var $=te(n);a=Q($,"INPUT",{class:!0,type:!0,min:!0,max:!0}),s=Ae($),l=Q($,"BUTTON",{class:!0});var ee=te(l);o=we(ee,"X"),ee.forEach(G),$.forEach(G),N.forEach(G),f=Ae(O),d=Q(O,"DIV",{class:!0});var fe=te(d);p=Q(fe,"BUTTON",{class:!0});var he=te(p);m=we(he,"favorite"),he.forEach(G),S=Ae(fe),c=Q(fe,"BUTTON",{class:!0});var B=te(c);y=we(B,"skip_previous"),B.forEach(G),A=Ae(fe),ye.l(fe),E=Ae(fe),k=Q(fe,"BUTTON",{class:!0});var P=te(k);T=we(P,"skip_next"),P.forEach(G),g=Ae(fe),R=Q(fe,"BUTTON",{class:!0});var F=te(R);M=we(F,"shuffle"),F.forEach(G),fe.forEach(G),q=Ae(O),x=Q(O,"AUDIO",{id:!0,src:!0}),te(x).forEach(G),O.forEach(G),this.h()},h(){K(a,"class","range flex-1"),K(a,"type","range"),K(a,"min","0"),K(a,"max",e[2]),K(l,"class","inline btn btn-sm btn-circle ml-2 relative bottom-2"),K(n,"class","flex"),K(r,"class","flex-1 w-full max-w-lg relative"),K(p,"class",w=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`),K(c,"class","material-symbols-outlined btn btn-sm btn-circle"),c.disabled=b=e[0].playPrevious==null,K(k,"class","material-symbols-outlined btn btn-sm btn-circle"),k.disabled=L=e[0].playNext==null,K(R,"class","material-symbols-outlined btn btn-sm btn-circle"),K(d,"class","h-8 flex justify-center gap-1"),K(x,"id","audio"),x.autoplay=!0,ut(x.src,C=e[0].src)||K(x,"src",C),e[2]===void 0&&Ut(()=>e[11].call(x)),K(t,"class","h-16 flex flex-col items-center")},m(le,O){Ee(le,t,O),V(t,r),V(r,n),V(n,a),ft(a,e[3]),V(n,s),V(n,l),V(l,o),V(t,f),V(t,d),V(d,p),V(p,m),V(d,S),V(d,c),V(c,y),V(d,A),ye.m(d,null),V(d,E),V(d,k),V(k,T),V(d,g),V(d,R),V(R,M),V(t,q),V(t,x),ae||(pe=[Ie(a,"change",e[9]),Ie(a,"input",e[9]),Ie(l,"click",e[8]),Ie(p,"click",e[7]),Ie(c,"click",function(){Rt(e[0].playPrevious)&&e[0].playPrevious.apply(this,arguments)}),Ie(k,"click",function(){Rt(e[0].playNext)&&e[0].playNext.apply(this,arguments)}),Ie(R,"click",function(){Rt(e[0].playRandom)&&e[0].playRandom.apply(this,arguments)}),Ie(x,"play",e[10]),Ie(x,"pause",e[10]),Ie(x,"durationchange",e[11]),Ie(x,"timeupdate",Be),Ie(x,"ended",function(){Rt(e[0].playNext)&&e[0].playNext.apply(this,arguments)})],ae=!0)},p(le,[O]){e=le,O&4&&K(a,"max",e[2]),O&8&&ft(a,e[3]),O&16&&w!==(w=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`)&&K(p,"class",w),O&1&&b!==(b=e[0].playPrevious==null)&&(c.disabled=b),ge===(ge=ce(e))&&ye?ye.p(e,O):(ye.d(1),ye=ge(e),ye&&(ye.c(),ye.m(d,E))),O&1&&L!==(L=e[0].playNext==null)&&(k.disabled=L),O&1&&!ut(x.src,C=e[0].src)&&K(x,"src",C),O&2&&z!==(z=e[1])&&x[z?"pause":"play"](),!Y&&O&8&&!isNaN(e[3])&&(x.currentTime=e[3]),Y=!1},i:Ue,o:Ue,d(le){le&&G(t),ye.d(),ae=!1,Xt(pe)}}}function io(e,t,r){let n,a;ze(e,He,E=>r(0,a=E));let s=null;Ct(()=>{s=document.getElementById("audio")});let l=!0,o=0,f=0;async function d(E){const k=await sr(E);navigator.mediaSession.metadata.artwork=[{src:k}]}function p(){s.play()}function m(){s.pause()}function w(){!a.song||(eo(a.song.link),r(4,n=Jt(a.song.link)))}function S(){He.set({isLoading:!1,song:null,album:null,src:null})}function c(){f=dn(this.value),r(3,f)}function y(){l=this.paused,r(1,l)}function b(){o=this.duration,r(2,o)}function A(){f=this.currentTime,r(3,f)}return e.$$.update=()=>{var E,k,T,L,g;e.$$.dirty&1&&r(4,n=a.song!=null&&Jt(a.song.link)),e.$$.dirty&1&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(E=a.song)==null?void 0:E.name,album:(k=a.album)==null?void 0:k.name}),(T=a.album)!=null&&T.image&&d(a.album.image),navigator.mediaSession.setActionHandler("nexttrack",(L=a.playNext)!=null?L:null),navigator.mediaSession.setActionHandler("previoustrack",(g=a.playPrevious)!=null?g:null))},[a,l,o,f,n,p,m,w,S,c,y,b,A]}class oo extends ot{constructor(t){super(),at(this,t,io,no,st,{})}}function _r(e,t,r){const n=e.slice();return n[11]=t[r],n}function ao(e){let t,r,n,a;return{c(){t=Z("button"),r=be("download"),this.h()},l(s){t=Q(s,"BUTTON",{class:!0});var l=te(t);r=we(l,"download"),l.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){Ee(s,t,l),V(t,r),n||(a=Ie(t,"click",e[5]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function so(e){let t,r;return{c(){t=Z("div"),r=Z("progress"),this.h()},l(n){t=Q(n,"DIV",{class:!0});var a=te(t);r=Q(a,"PROGRESS",{class:!0}),te(r).forEach(G),a.forEach(G),this.h()},h(){K(r,"class","progress w-56 mb-2 h-4"),K(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){Ee(n,t,a),V(t,r)},p:Ue,d(n){n&&G(t)}}}function lo(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(a){t=Q(a,"FIGURE",{});var s=te(t);r=Q(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[2])||K(r,"src",n),K(r,"alt","Albumbild"),K(r,"class","w-48 h-48 object-scale-down")},m(a,s){Ee(a,t,s),V(t,r)},p(a,s){s&4&&!ut(r.src,n=a[2])&&K(r,"src",n)},d(a){a&&G(t)}}}function Er(e){let t;return{c(){t=be("(Offline)")},l(r){t=we(r,"(Offline)")},m(r,n){Ee(r,t,n)},d(r){r&&G(t)}}}function Sr(e){let t,r=e[11].name+"",n,a,s=e[1].includes(e[11].link),l,o,f,d,p=s&&Er();function m(){return e[8](e[11])}return{c(){t=Z("li"),n=be(r),a=Se(),p&&p.c(),l=Se(),this.h()},l(w){t=Q(w,"LI",{class:!0});var S=te(t);n=we(S,r),a=Ae(S),p&&p.l(S),l=Ae(S),S.forEach(G),this.h()},h(){K(t,"class",o=`cursor-pointer hover:underline ${e[11]===e[3].song?"font-bold":""}`)},m(w,S){Ee(w,t,S),V(t,n),V(t,a),p&&p.m(t,null),V(t,l),f||(d=Ie(t,"click",m),f=!0)},p(w,S){e=w,S&1&&r!==(r=e[11].name+"")&&Nt(n,r),S&3&&(s=e[1].includes(e[11].link)),s?p||(p=Er(),p.c(),p.m(t,l)):p&&(p.d(1),p=null),S&9&&o!==(o=`cursor-pointer hover:underline ${e[11]===e[3].song?"font-bold":""}`)&&K(t,"class",o)},d(w){w&&G(t),p&&p.d(),f=!1,d()}}}function uo(e){var y,b;let t,r,n,a,s,l,o,f,d;r=new Mr({props:{title:(y=e[0].name)!=null?y:"L\xE4dt...",withCloseButton:!0,$$slots:{default:[ao]},$$scope:{ctx:e}}});function p(A,E){return A[2]?lo:so}let m=p(e),w=m(e),S=(b=e[0].songs)!=null?b:[],c=[];for(let A=0;A<S.length;A+=1)c[A]=Sr(_r(e,S,A));return{c(){t=Z("main"),Xe(r.$$.fragment),n=Se(),a=Z("div"),s=Z("div"),l=Z("div"),w.c(),o=Se(),f=Z("ul");for(let A=0;A<c.length;A+=1)c[A].c();this.h()},l(A){t=Q(A,"MAIN",{class:!0});var E=te(t);Ze(r.$$.fragment,E),n=Ae(E),a=Q(E,"DIV",{class:!0});var k=te(a);s=Q(k,"DIV",{class:!0});var T=te(s);l=Q(T,"DIV",{class:!0});var L=te(l);w.l(L),L.forEach(G),o=Ae(T),f=Q(T,"UL",{class:!0});var g=te(f);for(let R=0;R<c.length;R+=1)c[R].l(g);g.forEach(G),T.forEach(G),k.forEach(G),E.forEach(G),this.h()},h(){K(l,"class","mb-2"),K(f,"class","mx-2"),K(s,"class","card w-full md:w-96 bg-base-100 shadow-xl"),K(a,"class","flex-1 flex justify-center"),K(t,"class","flex-1 flex flex-col")},m(A,E){Ee(A,t,E),Qe(r,t,null),V(t,n),V(t,a),V(a,s),V(s,l),w.m(l,null),V(s,o),V(s,f);for(let k=0;k<c.length;k+=1)c[k].m(f,null);d=!0},p(A,[E]){var T,L;const k={};if(E&1&&(k.title=(T=A[0].name)!=null?T:"L\xE4dt..."),E&16384&&(k.$$scope={dirty:E,ctx:A}),r.$set(k),m===(m=p(A))&&w?w.p(A,E):(w.d(1),w=m(A),w&&(w.c(),w.m(l,null))),E&27){S=(L=A[0].songs)!=null?L:[];let g;for(g=0;g<S.length;g+=1){const R=_r(A,S,g);c[g]?c[g].p(R,E):(c[g]=Sr(R),c[g].c(),c[g].m(f,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=S.length}},i(A){d||(Le(r.$$.fragment,A),d=!0)},o(A){je(r.$$.fragment,A),d=!1},d(A){A&&G(t),et(r),w.d(),Zt(c,A)}}}function fo(e,t,r){let n,a,s;ze(e,St,c=>r(7,a=c)),ze(e,He,c=>r(3,s=c));let{album:l}=t,o=[],f,d;async function p(c){const y=n.songs.indexOf(c);Et(n,n.songs,y),m()}async function m(){r(1,o=await Ji(n.songs.map(c=>c.link)))}async function w(){try{d=!0;for(const c of n.songs)await hn({name:c.name,...c.link}),m()}finally{d=!1}}Ct(()=>{m()});const S=c=>p(c);return e.$$set=c=>{"album"in c&&r(6,l=c.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=a.german.concat(a.russian).find(c=>c.folderName===l)),e.$$.dirty&1&&n.image&&sr(n.image).then(c=>r(2,f=c))},[n,o,f,s,p,w,l,a,S]}class co extends ot{constructor(t){super(),at(this,t,fo,uo,st,{album:6})}}function ho(e){let t,r;return{c(){t=Z("div"),r=Z("progress"),this.h()},l(n){t=Q(n,"DIV",{class:!0});var a=te(t);r=Q(a,"PROGRESS",{class:!0}),te(r).forEach(G),a.forEach(G),this.h()},h(){K(r,"class","progress w-56 mb-2 h-4"),K(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){Ee(n,t,a),V(t,r)},p:Ue,d(n){n&&G(t)}}}function po(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(a){t=Q(a,"FIGURE",{});var s=te(t);r=Q(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[1])||K(r,"src",n),K(r,"alt","Albumbild"),K(r,"class","w-48 h-48 object-scale-down")},m(a,s){Ee(a,t,s),V(t,r)},p(a,s){s&2&&!ut(r.src,n=a[1])&&K(r,"src",n)},d(a){a&&G(t)}}}function yo(e){let t,r,n,a,s=e[0].name+"",l,o,f,d,p,m,w;function S(b,A){return b[1]?po:ho}let c=S(e),y=c(e);return{c(){t=Z("div"),y.c(),r=Se(),n=Z("div"),a=Z("p"),l=be(s),o=Se(),f=Z("div"),d=Z("a"),p=be("\xD6ffnen"),this.h()},l(b){t=Q(b,"DIV",{id:!0,class:!0});var A=te(t);y.l(A),r=Ae(A),n=Q(A,"DIV",{class:!0});var E=te(n);a=Q(E,"P",{class:!0});var k=te(a);l=we(k,s),k.forEach(G),E.forEach(G),o=Ae(A),f=Q(A,"DIV",{class:!0});var T=te(f);d=Q(T,"A",{class:!0,href:!0});var L=te(d);p=we(L,"\xD6ffnen"),L.forEach(G),T.forEach(G),A.forEach(G),this.h()},h(){K(a,"class","card-title"),K(n,"class","card-body w-full md:w-96"),K(d,"class","btn btn-primary capitalize"),K(d,"href",m=`#album/${e[0].folderName}`),K(f,"class","card-actions justify-end"),K(t,"id",w=`album_card_${e[0].name}`),K(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(b,A){Ee(b,t,A),y.m(t,null),V(t,r),V(t,n),V(n,a),V(a,l),V(t,o),V(t,f),V(f,d),V(d,p)},p(b,[A]){c===(c=S(b))&&y?y.p(b,A):(y.d(1),y=c(b),y&&(y.c(),y.m(t,r))),A&1&&s!==(s=b[0].name+"")&&Nt(l,s),A&1&&m!==(m=`#album/${b[0].folderName}`)&&K(d,"href",m),A&1&&w!==(w=`album_card_${b[0].name}`)&&K(t,"id",w)},i:Ue,o:Ue,d(b){b&&G(t),y.d()}}}function go(e,t,r){let{album:n}=t,a,s,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!a&&(r(1,a=await sr(n.image)),l.unobserve(s),l=null)}),Ct(()=>{s=document.getElementById(`album_card_${n.name}`),l.observe(s)}),yn(()=>{l==null||l.unobserve(s)}),e.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,a]}class mo extends ot{constructor(t){super(),at(this,t,go,yo,st,{album:0})}}function Ar(e,t,r){const n=e.slice();return n[6]=t[r],n}function kr(e,t){let r,n,a;return n=new mo({props:{album:t[6]}}),{key:e,first:null,c(){r=lr(),Xe(n.$$.fragment),this.h()},l(s){r=lr(),Ze(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,l){Ee(s,r,l),Qe(n,s,l),a=!0},p(s,l){t=s;const o={};l&4&&(o.album=t[6]),n.$set(o)},i(s){a||(Le(n.$$.fragment,s),a=!0)},o(s){je(n.$$.fragment,s),a=!1},d(s){s&&G(r),et(n,s)}}}function bo(e){let t,r,n,a,s,l,o,f,d,p,m,w,S,c=[],y=new Map,b,A,E,k=e[2];const T=L=>L[6].folderName;for(let L=0;L<k.length;L+=1){let g=Ar(e,k,L),R=T(g);y.set(R,c[L]=kr(R,g))}return{c(){t=Z("div"),r=Z("div"),n=Z("select"),a=Z("option"),s=be("Alle Alben"),l=Z("option"),o=be("Deutsche Alben"),f=Z("option"),d=be("Russische Alben"),p=Se(),m=Z("input"),w=Se(),S=Z("div");for(let L=0;L<c.length;L+=1)c[L].c();this.h()},l(L){t=Q(L,"DIV",{class:!0});var g=te(t);r=Q(g,"DIV",{class:!0});var R=te(r);n=Q(R,"SELECT",{class:!0});var M=te(n);a=Q(M,"OPTION",{});var q=te(a);s=we(q,"Alle Alben"),q.forEach(G),l=Q(M,"OPTION",{});var x=te(l);o=we(x,"Deutsche Alben"),x.forEach(G),f=Q(M,"OPTION",{});var C=te(f);d=we(C,"Russische Alben"),C.forEach(G),M.forEach(G),p=Ae(R),m=Q(R,"INPUT",{class:!0,placeholder:!0,type:!0}),R.forEach(G),w=Ae(g),S=Q(g,"DIV",{class:!0});var z=te(S);for(let Y=0;Y<c.length;Y+=1)c[Y].l(z);z.forEach(G),g.forEach(G),this.h()},h(){a.__value="all",a.value=a.__value,l.__value="german",l.value=l.__value,f.__value="russian",f.value=f.__value,K(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ut(()=>e[4].call(n)),K(m,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),K(m,"placeholder","Suche"),K(m,"type","search"),K(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),K(S,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),K(t,"class","flex-1 flex flex-col overflow-hidden")},m(L,g){Ee(L,t,g),V(t,r),V(r,n),V(n,a),V(a,s),V(n,l),V(l,o),V(n,f),V(f,d),ct(n,e[1]),V(r,p),V(r,m),ft(m,e[0]),V(t,w),V(t,S);for(let R=0;R<c.length;R+=1)c[R].m(S,null);b=!0,A||(E=[Ie(n,"change",e[4]),Ie(m,"input",e[5])],A=!0)},p(L,[g]){g&2&&ct(n,L[1]),g&1&&ft(m,L[0]),g&4&&(k=L[2],Pt(),c=gn(c,g,T,1,L,k,y,S,mn,kr,null,Ar),jt())},i(L){if(!b){for(let g=0;g<k.length;g+=1)Le(c[g]);b=!0}},o(L){for(let g=0;g<c.length;g+=1)je(c[g]);b=!1},d(L){L&&G(t);for(let g=0;g<c.length;g+=1)c[g].d();A=!1,Xt(E)}}}function wo(e,t,r){let n;ze(e,St,d=>r(3,n=d));let a=[],s="",l="all";function o(){l=Vt(this),r(1,l)}function f(){s=this.value,r(0,s)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else throw new Error("No album selected.");r(2,a=d.filter(p=>s.toLocaleLowerCase().split(" ").every(m=>p.name.toLocaleLowerCase().includes(m))).sort((p,m)=>p.name>m.name?1:-1))}},[s,l,a,n,o,f]}class vo extends ot{constructor(t){super(),at(this,t,wo,bo,st,{})}}function Ir(e,t,r){const n=e.slice();return n[19]=t[r],n}function Br(e,t,r){const n=e.slice();return n[22]=t[r],n}function Or(e){let t,r,n,a,s,l=e[3],o=[];for(let f=0;f<l.length;f+=1)o[f]=Rr(Br(e,l,f));return{c(){t=Z("select"),r=Z("option"),n=be("Alle Lieder");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){t=Q(f,"SELECT",{class:!0});var d=te(t);r=Q(d,"OPTION",{});var p=te(r);n=we(p,"Alle Lieder"),p.forEach(G);for(let m=0;m<o.length;m+=1)o[m].l(d);d.forEach(G),this.h()},h(){r.__value=null,r.value=r.__value,K(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Ut(()=>e[16].call(t))},m(f,d){Ee(f,t,d),V(t,r),V(r,n);for(let p=0;p<o.length;p+=1)o[p].m(t,null);ct(t,e[2]),a||(s=Ie(t,"change",e[16]),a=!0)},p(f,d){if(d&8){l=f[3];let p;for(p=0;p<l.length;p+=1){const m=Br(f,l,p);o[p]?o[p].p(m,d):(o[p]=Rr(m),o[p].c(),o[p].m(t,null))}for(;p<o.length;p+=1)o[p].d(1);o.length=l.length}d&12&&ct(t,f[2])},d(f){f&&G(t),Zt(o,f),a=!1,s()}}}function Rr(e){let t,r=e[22].name+"",n,a;return{c(){t=Z("option"),n=be(r),this.h()},l(s){t=Q(s,"OPTION",{});var l=te(t);n=we(l,r),l.forEach(G),this.h()},h(){t.__value=a=e[22],t.value=t.__value},m(s,l){Ee(s,t,l),V(t,n)},p(s,l){l&8&&r!==(r=s[22].name+"")&&Nt(n,r),l&8&&a!==(a=s[22])&&(t.__value=a,t.value=t.__value)},d(s){s&&G(t)}}}function Tr(e){let t;return{c(){t=be("(Offline)")},l(r){t=we(r,"(Offline)")},m(r,n){Ee(r,t,n)},d(r){r&&G(t)}}}function Lr(e){var w;let t,r=e[19].name+"",n,a,s=(w=e[4])==null?void 0:w.includes(Fe(e[19].link)),l,o,f,d,p=s&&Tr();function m(){return e[18](e[19])}return{c(){t=Z("li"),n=be(r),a=Se(),p&&p.c(),l=Se(),this.h()},l(S){t=Q(S,"LI",{class:!0});var c=te(t);n=we(c,r),a=Ae(c),p&&p.l(c),l=Ae(c),c.forEach(G),this.h()},h(){K(t,"class",o=`cursor-pointer ${e[19]===e[6].song?"font-bold":""}`)},m(S,c){Ee(S,t,c),V(t,n),V(t,a),p&&p.m(t,null),V(t,l),f||(d=Ie(t,"click",m),f=!0)},p(S,c){var y;e=S,c&32&&r!==(r=e[19].name+"")&&Nt(n,r),c&48&&(s=(y=e[4])==null?void 0:y.includes(Fe(e[19].link))),s?p||(p=Tr(),p.c(),p.m(t,l)):p&&(p.d(1),p=null),c&96&&o!==(o=`cursor-pointer ${e[19]===e[6].song?"font-bold":""}`)&&K(t,"class",o)},d(S){S&&G(t),p&&p.d(),f=!1,d()}}}function _o(e){let t,r,n,a,s,l,o,f,d,p,m,w,S,c,y,b,A,E,k,T,L=e[3]&&Or(e),g=e[5],R=[];for(let M=0;M<g.length;M+=1)R[M]=Lr(Ir(e,g,M));return{c(){t=Z("div"),r=Z("div"),n=Z("select"),a=Z("option"),s=be("Alle Lieder"),l=Z("option"),o=be("Favoriten"),f=Z("option"),d=be("Heruntergeladene Lieder"),p=Z("option"),m=be("Deutsche Lieder"),w=Z("option"),S=be("Russische Lieder"),c=Se(),L&&L.c(),y=Se(),b=Z("input"),A=Se(),E=Z("ul");for(let M=0;M<R.length;M+=1)R[M].c();this.h()},l(M){t=Q(M,"DIV",{class:!0});var q=te(t);r=Q(q,"DIV",{class:!0});var x=te(r);n=Q(x,"SELECT",{class:!0});var C=te(n);a=Q(C,"OPTION",{});var z=te(a);s=we(z,"Alle Lieder"),z.forEach(G),l=Q(C,"OPTION",{});var Y=te(l);o=we(Y,"Favoriten"),Y.forEach(G),f=Q(C,"OPTION",{});var ne=te(f);d=we(ne,"Heruntergeladene Lieder"),ne.forEach(G),p=Q(C,"OPTION",{});var ae=te(p);m=we(ae,"Deutsche Lieder"),ae.forEach(G),w=Q(C,"OPTION",{});var pe=te(w);S=we(pe,"Russische Lieder"),pe.forEach(G),C.forEach(G),c=Ae(x),L&&L.l(x),y=Ae(x),b=Q(x,"INPUT",{class:!0,placeholder:!0,type:!0}),x.forEach(G),A=Ae(q),E=Q(q,"UL",{class:!0});var ce=te(E);for(let ge=0;ge<R.length;ge+=1)R[ge].l(ce);ce.forEach(G),q.forEach(G),this.h()},h(){a.__value=e[7],a.value=a.__value,l.__value=e[8],l.value=l.__value,f.__value=e[9],f.value=f.__value,p.__value=e[10],p.value=p.__value,w.__value=e[11],w.value=w.__value,K(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ut(()=>e[15].call(n)),K(b,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),K(b,"placeholder","Suche"),K(b,"type","search"),K(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),K(E,"class","flex-1 overflow-auto mx-2"),K(t,"class","flex-1 flex flex-col justify-center")},m(M,q){Ee(M,t,q),V(t,r),V(r,n),V(n,a),V(a,s),V(n,l),V(l,o),V(n,f),V(f,d),V(n,p),V(p,m),V(n,w),V(w,S),ct(n,e[1]),V(r,c),L&&L.m(r,null),V(r,y),V(r,b),ft(b,e[0]),V(t,A),V(t,E);for(let x=0;x<R.length;x+=1)R[x].m(E,null);k||(T=[Ie(n,"change",e[15]),Ie(b,"input",e[17])],k=!0)},p(M,[q]){if(q&3970&&ct(n,M[1]),M[3]?L?L.p(M,q):(L=Or(M),L.c(),L.m(r,y)):L&&(L.d(1),L=null),q&1&&ft(b,M[0]),q&4208){g=M[5];let x;for(x=0;x<g.length;x+=1){const C=Ir(M,g,x);R[x]?R[x].p(C,q):(R[x]=Lr(C),R[x].c(),R[x].m(E,null))}for(;x<R.length;x+=1)R[x].d(1);R.length=g.length}},i:Ue,o:Ue,d(M){M&&G(t),L&&L.d(),Zt(R,M),k=!1,Xt(T)}}}function Eo(e,t,r){let n,a,s,l;ze(e,St,g=>r(14,s=g)),ze(e,He,g=>r(6,l=g));let o="";const f={getSongs:g=>qt(g)},d={getSongs:g=>qt(g).filter(R=>Jt(R.link))},p={getSongs:g=>qt(g).filter(R=>c.includes(Fe(R.link)))},m={getAlbums:g=>g.german,getSongs:g=>g.german.flatMap(R=>R.songs)},w={getAlbums:g=>g.russian,getSongs:g=>g.russian.flatMap(R=>R.songs)};let S=f,c,y=null,b;async function A(g){const R=b.indexOf(g);Et(null,b,R)}function E(){S=Vt(this),r(1,S),r(11,w),r(10,m),r(9,p),r(8,d),r(7,f)}function k(){y=Vt(this),r(2,y),r(3,n),r(1,S),r(14,s),r(3,n),r(1,S),r(14,s)}function T(){o=this.value,r(0,o)}const L=g=>A(g);e.$$.update=()=>{e.$$.dirty&16386&&r(3,n=S.getAlbums==null?null:S.getAlbums(s)),e.$$.dirty&12&&y&&(!n||!n.includes(y))&&r(2,y=null),e.$$.dirty&16390&&(y?r(13,b=y.songs.sort((g,R)=>g.name>R.name?1:-1)):r(13,b=S.getSongs(s).sort((g,R)=>g.name>R.name?1:-1))),e.$$.dirty&8193&&r(5,a=b.filter(g=>o.toLocaleLowerCase().split(" ").every(R=>g.name.toLocaleLowerCase().includes(R))))};{async function g(){r(4,c=await Xi())}g()}return[o,S,y,n,c,a,l,f,d,p,m,w,A,b,s,E,k,T,L]}class So extends ot{constructor(t){super(),at(this,t,Eo,_o,st,{})}}function Ao(e){let t,r;return{c(){t=Z("a"),r=be("lyrics"),this.h()},l(n){t=Q(n,"A",{class:!0,href:!0});var a=te(t);r=we(a,"lyrics"),a.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle"),K(t,"href","/")},m(n,a){Ee(n,t,a),V(t,r)},p:Ue,d(n){n&&G(t)}}}function ko(e){let t,r;return t=new vo({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Io(e){let t,r;return t=new So({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Bo(e){let t,r,n,a,s,l,o,f,d,p,m,w,S,c,y,b;r=new Mr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Ao]},$$scope:{ctx:e}}});const A=[Io,ko],E=[];function k(T,L){return T[0].url.hash===""?0:T[0].url.hash==="#alben"?1:-1}return~(c=k(e))&&(y=E[c]=A[c](e)),{c(){t=Z("div"),Xe(r.$$.fragment),n=Se(),a=Z("div"),s=Z("a"),l=be("Lieder"),f=Se(),d=Z("a"),p=be("Alben"),w=Se(),S=Z("div"),y&&y.c(),this.h()},l(T){t=Q(T,"DIV",{class:!0});var L=te(t);Ze(r.$$.fragment,L),n=Ae(L),a=Q(L,"DIV",{class:!0});var g=te(a);s=Q(g,"A",{class:!0,href:!0});var R=te(s);l=we(R,"Lieder"),R.forEach(G),f=Ae(g),d=Q(g,"A",{class:!0,href:!0});var M=te(d);p=we(M,"Alben"),M.forEach(G),g.forEach(G),w=Ae(L),S=Q(L,"DIV",{class:!0});var q=te(S);y&&y.l(q),q.forEach(G),L.forEach(G),this.h()},h(){K(s,"class",o=`tab ${e[0].url.hash===""?"tab-active":""}`),K(s,"href","/music"),K(d,"class",m=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),K(d,"href","/music#alben"),K(a,"class","tabs justify-center"),K(S,"class","flex-1 flex overflow-auto p-1"),K(t,"class","flex-1 flex flex-col overflow-hidden")},m(T,L){Ee(T,t,L),Qe(r,t,null),V(t,n),V(t,a),V(a,s),V(s,l),V(a,f),V(a,d),V(d,p),V(t,w),V(t,S),~c&&E[c].m(S,null),b=!0},p(T,[L]){const g={};L&2&&(g.$$scope={dirty:L,ctx:T}),r.$set(g),(!b||L&1&&o!==(o=`tab ${T[0].url.hash===""?"tab-active":""}`))&&K(s,"class",o),(!b||L&1&&m!==(m=`tab ${T[0].url.hash==="#alben"?"tab-active":""}`))&&K(d,"class",m);let R=c;c=k(T),c!==R&&(y&&(Pt(),je(E[R],1,1,()=>{E[R]=null}),jt()),~c?(y=E[c],y||(y=E[c]=A[c](T),y.c()),Le(y,1),y.m(S,null)):y=null)},i(T){b||(Le(r.$$.fragment,T),Le(y),b=!0)},o(T){je(r.$$.fragment,T),je(y),b=!1},d(T){T&&G(t),et(r),~c&&E[c].d()}}}function Oo(e,t,r){let n;return ze(e,jr,a=>r(0,n=a)),[n]}class Ro extends ot{constructor(t){super(),at(this,t,Oo,Bo,st,{})}}function To(e){let t,r;return t=new co({props:{album:e[2]()}}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Lo(e){let t,r;return t=new Ro({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){je(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Pr(e){let t,r,n,a;function s(f,d){return f[1].isLoading?jo:Po}let l=s(e),o=l(e);return n=new oo({}),{c(){o.c(),t=Se(),r=Z("div"),Xe(n.$$.fragment),this.h()},l(f){o.l(f),t=Ae(f),r=Q(f,"DIV",{class:!0});var d=te(r);Ze(n.$$.fragment,d),d.forEach(G),this.h()},h(){K(r,"class","self-center mb-2 w-full")},m(f,d){o.m(f,d),Ee(f,t,d),Ee(f,r,d),Qe(n,r,null),a=!0},p(f,d){l!==(l=s(f))&&(o.d(1),o=l(f),o&&(o.c(),o.m(t.parentNode,t)))},i(f){a||(Le(n.$$.fragment,f),a=!0)},o(f){je(n.$$.fragment,f),a=!1},d(f){o.d(f),f&&G(t),f&&G(r),et(n)}}}function Po(e){let t;return{c(){t=Z("div"),this.h()},l(r){t=Q(r,"DIV",{class:!0}),te(t).forEach(G),this.h()},h(){K(t,"class","h-2 mb-2")},m(r,n){Ee(r,t,n)},d(r){r&&G(t)}}}function jo(e){let t;return{c(){t=Z("progress"),this.h()},l(r){t=Q(r,"PROGRESS",{class:!0}),te(t).forEach(G),this.h()},h(){K(t,"class","progress w-56 self-center mb-2")},m(r,n){Ee(r,t,n)},d(r){r&&G(t)}}}function Mo(e){let t,r,n,a,s,l,o;const f=[Lo,To],d=[];function p(w,S){return S&1&&(n=null),w[0].url.hash===""||w[0].url.hash==="#alben"?0:(n==null&&(n=!!w[0].url.hash.startsWith("#album")),n?1:-1)}~(a=p(e,-1))&&(s=d[a]=f[a](e));let m=(e[1].src!=null||e[1].isLoading)&&Pr(e);return{c(){t=Z("div"),r=Z("main"),s&&s.c(),l=Se(),m&&m.c(),this.h()},l(w){t=Q(w,"DIV",{class:!0});var S=te(t);r=Q(S,"MAIN",{class:!0});var c=te(r);s&&s.l(c),c.forEach(G),l=Ae(S),m&&m.l(S),S.forEach(G),this.h()},h(){K(r,"class","overflow-auto flex-1 flex flex-col"),K(t,"class","w-full h-full flex flex-col")},m(w,S){Ee(w,t,S),V(t,r),~a&&d[a].m(r,null),V(t,l),m&&m.m(t,null),o=!0},p(w,[S]){let c=a;a=p(w,S),a===c?~a&&d[a].p(w,S):(s&&(Pt(),je(d[c],1,1,()=>{d[c]=null}),jt()),~a?(s=d[a],s?s.p(w,S):(s=d[a]=f[a](w),s.c()),Le(s,1),s.m(r,null)):s=null),w[1].src!=null||w[1].isLoading?m?(m.p(w,S),S&2&&Le(m,1)):(m=Pr(w),m.c(),Le(m,1),m.m(t,null)):m&&(Pt(),je(m,1,1,()=>{m=null}),jt())},i(w){o||(Le(s),Le(m),o=!0)},o(w){je(s),je(m),o=!1},d(w){w&&G(t),~a&&d[a].d(),m&&m.d()}}}function Uo(e,t,r){let n,a;ze(e,jr,l=>r(0,n=l)),ze(e,He,l=>r(1,a=l)),Ct(async()=>{bn()&&(Mt.getGlobalApi().userAgent=null);let l;return"wakeLock"in navigator&&(l=await navigator.wakeLock.request("screen")),zi().then(St.set),navigator.onLine&&await Zi().then(async o=>{St.set(o),await Gi(o)}),()=>{l.release()}});function s(){return decodeURI(n.url.hash.substring(7))}return[n,a,s]}class Fo extends ot{constructor(t){super(),at(this,t,Uo,Mo,st,{})}}export{Fo as default};
