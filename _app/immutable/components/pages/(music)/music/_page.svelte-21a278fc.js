import{S as ot,i as at,s as st,k as Z,a as ve,q as be,l as Q,m as ee,c as _e,r as we,h as G,n as H,J as ut,K as Nt,b as Ae,F as $,L as ft,M as Be,u as ct,A as Ue,N as Zt,G as Ge,o as xt,O as Tt,P as yn,Q as gn,v as Xe,w as Ze,x as Qe,f as Le,t as Me,y as et,R as Qt,T as mn,U as ht,g as Mt,V as bn,d as Ut,e as ur,W as wn,X as zt}from"../../../../chunks/index-c9ad3d2c.js";import{p as Ur}from"../../../../chunks/stores-e903f64e.js";import{T as Cr,i as vn}from"../../../../chunks/TitleBar-17d224f1.js";import{c as He,d as At}from"../../../../chunks/store-17e28e4d.js";const _n=(e,t)=>t.some(r=>e instanceof r);let fr,cr;function En(){return fr||(fr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sn(){return cr||(cr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nr=new WeakMap,Gt=new WeakMap,xr=new WeakMap,Ft=new WeakMap,er=new WeakMap;function An(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",l)},s=()=>{r(Ke(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Nr.set(r,e)}).catch(()=>{}),er.set(t,e),t}function kn(e){if(Gt.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",l),e.removeEventListener("abort",l)},s=()=>{r(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",l),e.addEventListener("abort",l)});Gt.set(e,t)}let Ht={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Gt.get(e);if(t==="objectStoreNames")return e.objectStoreNames||xr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ke(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function In(e){Ht=e(Ht)}function Bn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call($t(this),t,...r);return xr.set(n,t.sort?t.sort():[t]),Ke(n)}:Sn().includes(e)?function(...t){return e.apply($t(this),t),Ke(Nr.get(this))}:function(...t){return Ke(e.apply($t(this),t))}}function On(e){return typeof e=="function"?Bn(e):(e instanceof IDBTransaction&&kn(e),_n(e,En())?new Proxy(e,Ht):e)}function Ke(e){if(e instanceof IDBRequest)return An(e);if(Ft.has(e))return Ft.get(e);const t=On(e);return t!==e&&(Ft.set(e,t),er.set(t,e)),t}const $t=e=>er.get(e);function Rn(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const l=indexedDB.open(e,t),o=Ke(l);return n&&l.addEventListener("upgradeneeded",f=>{n(Ke(l.result),f.oldVersion,f.newVersion,Ke(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Tn=["get","getKey","getAll","getAllKeys","count"],Pn=["put","add","delete","clear"],Wt=new Map;function hr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Wt.get(t))return Wt.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Pn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Tn.includes(r)))return;const s=async function(l,...o){const f=this.transaction(l,a?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&f.done]))[0]};return Wt.set(t,s),s}In(e=>({...e,get:(t,r,n)=>hr(t,r)||e.get(t,r,n),has:(t,r)=>!!hr(t,r)||e.has(t,r)}));var Ln=Object.create,tr=Object.defineProperty,jn=Object.getOwnPropertyDescriptor,Mn=Object.getOwnPropertyNames,Un=Object.getPrototypeOf,Cn=Object.prototype.hasOwnProperty,Nn=e=>tr(e,"__esModule",{value:!0}),xn=(e,t)=>()=>(e&&(t=e(e=0)),t),oe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Mn(t))!Cn.call(e,a)&&(r||a!=="default")&&tr(e,a,{get:()=>t[a],enumerable:!(n=jn(t,a))||n.enumerable});return e},De=(e,t)=>Dn(Nn(tr(e!=null?Ln(Un(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Fn=oe(e=>{te(),e.byteLength=f,e.toByteArray=g,e.fromByteArray=S;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=a.length;s<l;++s)t[s]=a[s],r[a.charCodeAt(s)]=s;var s,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(c){var p=c.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=c.indexOf("=");b===-1&&(b=p);var A=b===p?0:4-b%4;return[b,A]}function f(c){var p=o(c),b=p[0],A=p[1];return(b+A)*3/4-A}function d(c,p,b){return(p+b)*3/4-b}function g(c){var p,b=o(c),A=b[0],_=b[1],k=new n(d(c,A,_)),R=0,P=_>0?A-4:A,m;for(m=0;m<P;m+=4)p=r[c.charCodeAt(m)]<<18|r[c.charCodeAt(m+1)]<<12|r[c.charCodeAt(m+2)]<<6|r[c.charCodeAt(m+3)],k[R++]=p>>16&255,k[R++]=p>>8&255,k[R++]=p&255;return _===2&&(p=r[c.charCodeAt(m)]<<2|r[c.charCodeAt(m+1)]>>4,k[R++]=p&255),_===1&&(p=r[c.charCodeAt(m)]<<10|r[c.charCodeAt(m+1)]<<4|r[c.charCodeAt(m+2)]>>2,k[R++]=p>>8&255,k[R++]=p&255),k}function y(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function E(c,p,b){for(var A,_=[],k=p;k<b;k+=3)A=(c[k]<<16&16711680)+(c[k+1]<<8&65280)+(c[k+2]&255),_.push(y(A));return _.join("")}function S(c){for(var p,b=c.length,A=b%3,_=[],k=16383,R=0,P=b-A;R<P;R+=k)_.push(E(c,R,R+k>P?P:R+k));return A===1?(p=c[b-1],_.push(t[p>>2]+t[p<<4&63]+"==")):A===2&&(p=(c[b-2]<<8)+c[b-1],_.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),_.join("")}}),$n=oe(e=>{te(),e.read=function(t,r,n,a,s){var l,o,f=s*8-a-1,d=(1<<f)-1,g=d>>1,y=-7,E=n?s-1:0,S=n?-1:1,c=t[r+E];for(E+=S,l=c&(1<<-y)-1,c>>=-y,y+=f;y>0;l=l*256+t[r+E],E+=S,y-=8);for(o=l&(1<<-y)-1,l>>=-y,y+=a;y>0;o=o*256+t[r+E],E+=S,y-=8);if(l===0)l=1-g;else{if(l===d)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-g}return(c?-1:1)*o*Math.pow(2,l-a)},e.write=function(t,r,n,a,s,l){var o,f,d,g=l*8-s-1,y=(1<<g)-1,E=y>>1,S=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=a?0:l-1,p=a?1:-1,b=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=y):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+E>=1?r+=S/d:r+=S*Math.pow(2,1-E),r*d>=2&&(o++,d/=2),o+E>=y?(f=0,o=y):o+E>=1?(f=(r*d-1)*Math.pow(2,s),o=o+E):(f=r*Math.pow(2,E-1)*Math.pow(2,s),o=0));s>=8;t[n+c]=f&255,c+=p,f/=256,s-=8);for(o=o<<s|f,g+=s;g>0;t[n+c]=o&255,c+=p,o/=256,g-=8);t[n+c-p]|=b*128}}),Bt=oe(e=>{te();var t=Fn(),r=$n(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;var a=2147483647;e.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,h){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(i)}return f(i,u,h)}o.poolSize=8192;function f(i,u,h){if(typeof i=="string")return E(i,u);if(ArrayBuffer.isView(i))return c(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Pe(i,ArrayBuffer)||i&&Pe(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pe(i,SharedArrayBuffer)||i&&Pe(i.buffer,SharedArrayBuffer)))return p(i,u,h);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=i.valueOf&&i.valueOf();if(I!=null&&I!==i)return o.from(I,u,h);let j=b(i);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,h){return f(i,u,h)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function g(i,u,h){return d(i),i<=0?l(i):u!==void 0?typeof h=="string"?l(i).fill(u,h):l(i).fill(u):l(i)}o.alloc=function(i,u,h){return g(i,u,h)};function y(i){return d(i),l(i<0?0:A(i)|0)}o.allocUnsafe=function(i){return y(i)},o.allocUnsafeSlow=function(i){return y(i)};function E(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=k(i,u)|0,I=l(h),j=I.write(i,u);return j!==h&&(I=I.slice(0,j)),I}function S(i){let u=i.length<0?0:A(i.length)|0,h=l(u);for(let I=0;I<u;I+=1)h[I]=i[I]&255;return h}function c(i){if(Pe(i,Uint8Array)){let u=new Uint8Array(i);return p(u.buffer,u.byteOffset,u.byteLength)}return S(i)}function p(i,u,h){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let I;return u===void 0&&h===void 0?I=new Uint8Array(i):h===void 0?I=new Uint8Array(i,u):I=new Uint8Array(i,u,h),Object.setPrototypeOf(I,o.prototype),I}function b(i){if(o.isBuffer(i)){let u=A(i.length)|0,h=l(u);return h.length===0||i.copy(h,0,0,u),h}if(i.length!==void 0)return typeof i.length!="number"||gt(i.length)?l(0):S(i);if(i.type==="Buffer"&&Array.isArray(i.data))return S(i.data)}function A(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return i|0}function _(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Pe(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Pe(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let h=i.length,I=u.length;for(let j=0,D=Math.min(h,I);j<D;++j)if(i[j]!==u[j]){h=i[j],I=u[j];break}return h<I?-1:I<h?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<i.length;++h)u+=i[h].length;let I=o.allocUnsafe(u),j=0;for(h=0;h<i.length;++h){let D=i[h];if(Pe(D,Uint8Array))j+D.length>I.length?(o.isBuffer(D)||(D=o.from(D)),D.copy(I,j)):Uint8Array.prototype.set.call(I,D,j);else if(o.isBuffer(D))D.copy(I,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=D.length}return I};function k(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Pe(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let h=i.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&h===0)return 0;let j=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return me(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ce(i).length;default:if(j)return I?-1:me(i).length;u=(""+u).toLowerCase(),j=!0}}o.byteLength=k;function R(i,u,h){let I=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return fe(this,u,h);case"utf8":case"utf-8":return ne(this,u,h);case"ascii":return de(this,u,h);case"latin1":case"binary":return ge(this,u,h);case"base64":return J(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,u,h);default:if(I)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),I=!0}}o.prototype._isBuffer=!0;function P(i,u,h){let I=i[u];i[u]=i[h],i[h]=I}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)P(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)P(this,u,u+3),P(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)P(this,u,u+7),P(this,u+1,u+6),P(this,u+2,u+5),P(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?ne(this,0,i):R.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,h,I,j){if(Pe(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),h===void 0&&(h=i?i.length:0),I===void 0&&(I=0),j===void 0&&(j=this.length),u<0||h>i.length||I<0||j>this.length)throw new RangeError("out of range index");if(I>=j&&u>=h)return 0;if(I>=j)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,I>>>=0,j>>>=0,this===i)return 0;let D=j-I,K=h-u,Ee=Math.min(D,K),Te=this.slice(I,j),ke=i.slice(u,h);for(let Se=0;Se<Ee;++Se)if(Te[Se]!==ke[Se]){D=Te[Se],K=ke[Se];break}return D<K?-1:K<D?1:0};function m(i,u,h,I,j){if(i.length===0)return-1;if(typeof h=="string"?(I=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,gt(h)&&(h=j?0:i.length-1),h<0&&(h=i.length+h),h>=i.length){if(j)return-1;h=i.length-1}else if(h<0)if(j)h=0;else return-1;if(typeof u=="string"&&(u=o.from(u,I)),o.isBuffer(u))return u.length===0?-1:O(i,u,h,I,j);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(i,u,h):Uint8Array.prototype.lastIndexOf.call(i,u,h):O(i,[u],h,I,j);throw new TypeError("val must be string, number or Buffer")}function O(i,u,h,I,j){let D=1,K=i.length,Ee=u.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(i.length<2||u.length<2)return-1;D=2,K/=2,Ee/=2,h/=2}function Te(Se,Oe){return D===1?Se[Oe]:Se.readUInt16BE(Oe*D)}let ke;if(j){let Se=-1;for(ke=h;ke<K;ke++)if(Te(i,ke)===Te(u,Se===-1?0:ke-Se)){if(Se===-1&&(Se=ke),ke-Se+1===Ee)return Se*D}else Se!==-1&&(ke-=ke-Se),Se=-1}else for(h+Ee>K&&(h=K-Ee),ke=h;ke>=0;ke--){let Se=!0;for(let Oe=0;Oe<Ee;Oe++)if(Te(i,ke+Oe)!==Te(u,Oe)){Se=!1;break}if(Se)return ke}return-1}o.prototype.includes=function(i,u,h){return this.indexOf(i,u,h)!==-1},o.prototype.indexOf=function(i,u,h){return m(this,i,u,h,!0)},o.prototype.lastIndexOf=function(i,u,h){return m(this,i,u,h,!1)};function M(i,u,h,I){h=Number(h)||0;let j=i.length-h;I?(I=Number(I),I>j&&(I=j)):I=j;let D=u.length;I>D/2&&(I=D/2);let K;for(K=0;K<I;++K){let Ee=parseInt(u.substr(K*2,2),16);if(gt(Ee))return K;i[h+K]=Ee}return K}function z(i,u,h,I){return Fe(me(u,i.length-h),i,h,I)}function F(i,u,h,I){return Fe(se(u),i,h,I)}function C(i,u,h,I){return Fe(Ce(u),i,h,I)}function q(i,u,h,I){return Fe(U(u,i.length-h),i,h,I)}o.prototype.write=function(i,u,h,I){if(u===void 0)I="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")I=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,I===void 0&&(I="utf8")):(I=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let j=this.length-u;if((h===void 0||h>j)&&(h=j),i.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let D=!1;for(;;)switch(I){case"hex":return M(this,i,u,h);case"utf8":case"utf-8":return z(this,i,u,h);case"ascii":case"latin1":case"binary":return F(this,i,u,h);case"base64":return C(this,i,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,i,u,h);default:if(D)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),D=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(i,u,h){return u===0&&h===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(u,h))}function ne(i,u,h){h=Math.min(i.length,h);let I=[],j=u;for(;j<h;){let D=i[j],K=null,Ee=D>239?4:D>223?3:D>191?2:1;if(j+Ee<=h){let Te,ke,Se,Oe;switch(Ee){case 1:D<128&&(K=D);break;case 2:Te=i[j+1],(Te&192)===128&&(Oe=(D&31)<<6|Te&63,Oe>127&&(K=Oe));break;case 3:Te=i[j+1],ke=i[j+2],(Te&192)===128&&(ke&192)===128&&(Oe=(D&15)<<12|(Te&63)<<6|ke&63,Oe>2047&&(Oe<55296||Oe>57343)&&(K=Oe));break;case 4:Te=i[j+1],ke=i[j+2],Se=i[j+3],(Te&192)===128&&(ke&192)===128&&(Se&192)===128&&(Oe=(D&15)<<18|(Te&63)<<12|(ke&63)<<6|Se&63,Oe>65535&&Oe<1114112&&(K=Oe))}}K===null?(K=65533,Ee=1):K>65535&&(K-=65536,I.push(K>>>10&1023|55296),K=56320|K&1023),I.push(K),j+=Ee}return ce(I)}var ae=4096;function ce(i){let u=i.length;if(u<=ae)return String.fromCharCode.apply(String,i);let h="",I=0;for(;I<u;)h+=String.fromCharCode.apply(String,i.slice(I,I+=ae));return h}function de(i,u,h){let I="";h=Math.min(i.length,h);for(let j=u;j<h;++j)I+=String.fromCharCode(i[j]&127);return I}function ge(i,u,h){let I="";h=Math.min(i.length,h);for(let j=u;j<h;++j)I+=String.fromCharCode(i[j]);return I}function fe(i,u,h){let I=i.length;(!u||u<0)&&(u=0),(!h||h<0||h>I)&&(h=I);let j="";for(let D=u;D<h;++D)j+=Rt[i[D]];return j}function Ie(i,u,h){let I=i.slice(u,h),j="";for(let D=0;D<I.length-1;D+=2)j+=String.fromCharCode(I[D]+I[D+1]*256);return j}o.prototype.slice=function(i,u){let h=this.length;i=~~i,u=u===void 0?h:~~u,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<i&&(u=i);let I=this.subarray(i,u);return Object.setPrototypeOf(I,o.prototype),I};function pe(i,u,h){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>h)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||pe(i,u,this.length);let I=this[i],j=1,D=0;for(;++D<u&&(j*=256);)I+=this[i+D]*j;return I},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||pe(i,u,this.length);let I=this[i+--u],j=1;for(;u>0&&(j*=256);)I+=this[i+--u]*j;return I},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||pe(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||pe(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||pe(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=Ne(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let I=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,j=this[++i]+this[++i]*2**8+this[++i]*2**16+h*2**24;return BigInt(I)+(BigInt(j)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ne(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let I=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],j=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h;return(BigInt(I)<<BigInt(32))+BigInt(j)}),o.prototype.readIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||pe(i,u,this.length);let I=this[i],j=1,D=0;for(;++D<u&&(j*=256);)I+=this[i+D]*j;return j*=128,I>=j&&(I-=Math.pow(2,8*u)),I},o.prototype.readIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||pe(i,u,this.length);let I=u,j=1,D=this[i+--I];for(;I>0&&(j*=256);)D+=this[i+--I]*j;return j*=128,D>=j&&(D-=Math.pow(2,8*u)),D},o.prototype.readInt8=function(i,u){return i=i>>>0,u||pe(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||pe(i,2,this.length);let h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||pe(i,2,this.length);let h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=Ne(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let I=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(h<<24);return(BigInt(I)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=Ne(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let I=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(I)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||pe(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||pe(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||pe(i,8,this.length),r.read(this,i,!1,52,8)};function T(i,u,h,I,j,D){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>j||u<D)throw new RangeError('"value" argument is out of bounds');if(h+I>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,h,I){if(i=+i,u=u>>>0,h=h>>>0,!I){let K=Math.pow(2,8*h)-1;T(this,i,u,h,K,0)}let j=1,D=0;for(this[u]=i&255;++D<h&&(j*=256);)this[u+D]=i/j&255;return u+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,h,I){if(i=+i,u=u>>>0,h=h>>>0,!I){let K=Math.pow(2,8*h)-1;T(this,i,u,h,K,0)}let j=h-1,D=1;for(this[u+j]=i&255;--j>=0&&(D*=256);)this[u+j]=i/D&255;return u+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function N(i,u,h,I,j){le(u,I,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D;let K=Number(u>>BigInt(32)&BigInt(4294967295));return i[h++]=K,K=K>>8,i[h++]=K,K=K>>8,i[h++]=K,K=K>>8,i[h++]=K,h}function V(i,u,h,I,j){le(u,I,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h+7]=D,D=D>>8,i[h+6]=D,D=D>>8,i[h+5]=D,D=D>>8,i[h+4]=D;let K=Number(u>>BigInt(32)&BigInt(4294967295));return i[h+3]=K,K=K>>8,i[h+2]=K,K=K>>8,i[h+1]=K,K=K>>8,i[h]=K,h+8}o.prototype.writeBigUInt64LE=Ne(function(i,u=0){return N(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ne(function(i,u=0){return V(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,h,I){if(i=+i,u=u>>>0,!I){let Ee=Math.pow(2,8*h-1);T(this,i,u,h,Ee-1,-Ee)}let j=0,D=1,K=0;for(this[u]=i&255;++j<h&&(D*=256);)i<0&&K===0&&this[u+j-1]!==0&&(K=1),this[u+j]=(i/D>>0)-K&255;return u+h},o.prototype.writeIntBE=function(i,u,h,I){if(i=+i,u=u>>>0,!I){let Ee=Math.pow(2,8*h-1);T(this,i,u,h,Ee-1,-Ee)}let j=h-1,D=1,K=0;for(this[u+j]=i&255;--j>=0&&(D*=256);)i<0&&K===0&&this[u+j+1]!==0&&(K=1),this[u+j]=(i/D>>0)-K&255;return u+h},o.prototype.writeInt8=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=Ne(function(i,u=0){return N(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ne(function(i,u=0){return V(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function re(i,u,h,I,j,D){if(h+I>i.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function ye(i,u,h,I,j){return u=+u,h=h>>>0,j||re(i,u,h,4),r.write(i,u,h,I,23,4),h+4}o.prototype.writeFloatLE=function(i,u,h){return ye(this,i,u,!0,h)},o.prototype.writeFloatBE=function(i,u,h){return ye(this,i,u,!1,h)};function he(i,u,h,I,j){return u=+u,h=h>>>0,j||re(i,u,h,8),r.write(i,u,h,I,52,8),h+8}o.prototype.writeDoubleLE=function(i,u,h){return he(this,i,u,!0,h)},o.prototype.writeDoubleBE=function(i,u,h){return he(this,i,u,!1,h)},o.prototype.copy=function(i,u,h,I){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!I&&I!==0&&(I=this.length),u>=i.length&&(u=i.length),u||(u=0),I>0&&I<h&&(I=h),I===h||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),i.length-u<I-h&&(I=i.length-u+h);let j=I-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,I):Uint8Array.prototype.set.call(i,this.subarray(h,I),u),j},o.prototype.fill=function(i,u,h,I){if(typeof i=="string"){if(typeof u=="string"?(I=u,u=0,h=this.length):typeof h=="string"&&(I=h,h=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!o.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(i.length===1){let D=i.charCodeAt(0);(I==="utf8"&&D<128||I==="latin1")&&(i=D)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let j;if(typeof i=="number")for(j=u;j<h;++j)this[j]=i;else{let D=o.isBuffer(i)?i:o.from(i,I),K=D.length;if(K===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(j=0;j<h-u;++j)this[j+u]=D[j%K]}return this};var B={};function L(i,u,h){B[i]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(i,u,h){let I=`The value of "${i}" is out of range.`,j=h;return Number.isInteger(h)&&Math.abs(h)>2**32?j=x(String(h)):typeof h=="bigint"&&(j=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(j=x(j)),j+="n"),I+=` It must be ${u}. Received ${j}`,I},RangeError);function x(i){let u="",h=i.length,I=i[0]==="-"?1:0;for(;h>=I+4;h-=3)u=`_${i.slice(h-3,h)}${u}`;return`${i.slice(0,h)}${u}`}function Y(i,u,h){w(u,"offset"),(i[u]===void 0||i[u+h]===void 0)&&v(u,i.length-(h+1))}function le(i,u,h,I,j,D){if(i>h||i<u){let K=typeof u=="bigint"?"n":"",Ee;throw D>3?u===0||u===BigInt(0)?Ee=`>= 0${K} and < 2${K} ** ${(D+1)*8}${K}`:Ee=`>= -(2${K} ** ${(D+1)*8-1}${K}) and < 2 ** ${(D+1)*8-1}${K}`:Ee=`>= ${u}${K} and <= ${h}${K}`,new B.ERR_OUT_OF_RANGE("value",Ee,i)}Y(I,j,D)}function w(i,u){if(typeof i!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",i)}function v(i,u,h){throw Math.floor(i)!==i?(w(i,h),new B.ERR_OUT_OF_RANGE(h||"offset","an integer",i)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,i)}var W=/[^+/0-9A-Za-z-_]/g;function X(i){if(i=i.split("=")[0],i=i.trim().replace(W,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function me(i,u){u=u||1/0;let h,I=i.length,j=null,D=[];for(let K=0;K<I;++K){if(h=i.charCodeAt(K),h>55295&&h<57344){if(!j){if(h>56319){(u-=3)>-1&&D.push(239,191,189);continue}else if(K+1===I){(u-=3)>-1&&D.push(239,191,189);continue}j=h;continue}if(h<56320){(u-=3)>-1&&D.push(239,191,189),j=h;continue}h=(j-55296<<10|h-56320)+65536}else j&&(u-=3)>-1&&D.push(239,191,189);if(j=null,h<128){if((u-=1)<0)break;D.push(h)}else if(h<2048){if((u-=2)<0)break;D.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;D.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return D}function se(i){let u=[];for(let h=0;h<i.length;++h)u.push(i.charCodeAt(h)&255);return u}function U(i,u){let h,I,j,D=[];for(let K=0;K<i.length&&!((u-=2)<0);++K)h=i.charCodeAt(K),I=h>>8,j=h%256,D.push(j),D.push(I);return D}function Ce(i){return t.toByteArray(X(i))}function Fe(i,u,h,I){let j;for(j=0;j<I&&!(j+h>=u.length||j>=i.length);++j)u[j+h]=i[j];return j}function Pe(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function gt(i){return i!==i}var Rt=function(){let i="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let I=h*16;for(let j=0;j<16;++j)u[I+j]=i[h]+i[j]}return u}();function Ne(i){return typeof BigInt>"u"?mt:i}function mt(){throw new Error("BigInt not supported")}}),ie,ue,Je,te=xn(()=>{ie=De(Bt(),1),ue={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},Je=globalThis}),Ot=oe((e,t)=>{te();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(m,O,M){return Function.prototype.apply.call(m,O,M)},a;r&&typeof r.ownKeys=="function"?a=r.ownKeys:Object.getOwnPropertySymbols?a=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:a=function(m){return Object.getOwnPropertyNames(m)};function s(m){console&&console.warn&&console.warn(m)}var l=Number.isNaN||function(m){return m!==m};function o(){o.init.call(this)}t.exports=o,t.exports.once=k,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(m){if(typeof m!="number"||m<0||l(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");f=m}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||l(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function g(m){return m._maxListeners===void 0?o.defaultMaxListeners:m._maxListeners}o.prototype.getMaxListeners=function(){return g(this)},o.prototype.emit=function(m){for(var O=[],M=1;M<arguments.length;M++)O.push(arguments[M]);var z=m==="error",F=this._events;if(F!==void 0)z=z&&F.error===void 0;else if(!z)return!1;if(z){var C;if(O.length>0&&(C=O[0]),C instanceof Error)throw C;var q=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw q.context=C,q}var J=F[m];if(J===void 0)return!1;if(typeof J=="function")n(J,this,O);else for(var ne=J.length,ae=b(J,ne),M=0;M<ne;++M)n(ae[M],this,O);return!0};function y(m,O,M,z){var F,C,q;if(d(M),C=m._events,C===void 0?(C=m._events=Object.create(null),m._eventsCount=0):(C.newListener!==void 0&&(m.emit("newListener",O,M.listener?M.listener:M),C=m._events),q=C[O]),q===void 0)q=C[O]=M,++m._eventsCount;else if(typeof q=="function"?q=C[O]=z?[M,q]:[q,M]:z?q.unshift(M):q.push(M),F=g(m),F>0&&q.length>F&&!q.warned){q.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=m,J.type=O,J.count=q.length,s(J)}return m}o.prototype.addListener=function(m,O){return y(this,m,O,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(m,O){return y(this,m,O,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(m,O,M){var z={fired:!1,wrapFn:void 0,target:m,type:O,listener:M},F=E.bind(z);return F.listener=M,z.wrapFn=F,F}o.prototype.once=function(m,O){return d(O),this.on(m,S(this,m,O)),this},o.prototype.prependOnceListener=function(m,O){return d(O),this.prependListener(m,S(this,m,O)),this},o.prototype.removeListener=function(m,O){var M,z,F,C,q;if(d(O),z=this._events,z===void 0)return this;if(M=z[m],M===void 0)return this;if(M===O||M.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete z[m],z.removeListener&&this.emit("removeListener",m,M.listener||O));else if(typeof M!="function"){for(F=-1,C=M.length-1;C>=0;C--)if(M[C]===O||M[C].listener===O){q=M[C].listener,F=C;break}if(F<0)return this;F===0?M.shift():A(M,F),M.length===1&&(z[m]=M[0]),z.removeListener!==void 0&&this.emit("removeListener",m,q||O)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(m){var O,M,z;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[m]),this;if(arguments.length===0){var F=Object.keys(M),C;for(z=0;z<F.length;++z)C=F[z],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=M[m],typeof O=="function")this.removeListener(m,O);else if(O!==void 0)for(z=O.length-1;z>=0;z--)this.removeListener(m,O[z]);return this};function c(m,O,M){var z=m._events;if(z===void 0)return[];var F=z[O];return F===void 0?[]:typeof F=="function"?M?[F.listener||F]:[F]:M?_(F):b(F,F.length)}o.prototype.listeners=function(m){return c(this,m,!0)},o.prototype.rawListeners=function(m){return c(this,m,!1)},o.listenerCount=function(m,O){return typeof m.listenerCount=="function"?m.listenerCount(O):p.call(m,O)},o.prototype.listenerCount=p;function p(m){var O=this._events;if(O!==void 0){var M=O[m];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]};function b(m,O){for(var M=new Array(O),z=0;z<O;++z)M[z]=m[z];return M}function A(m,O){for(;O+1<m.length;O++)m[O]=m[O+1];m.pop()}function _(m){for(var O=new Array(m.length),M=0;M<O.length;++M)O[M]=m[M].listener||m[M];return O}function k(m,O){return new Promise(function(M,z){function F(q){m.removeListener(O,C),z(q)}function C(){typeof m.removeListener=="function"&&m.removeListener("error",F),M([].slice.call(arguments))}P(m,O,C,{once:!0}),O!=="error"&&R(m,F,{once:!0})})}function R(m,O,M){typeof m.on=="function"&&P(m,"error",O,M)}function P(m,O,M,z){if(typeof m.on=="function")z.once?m.once(O,M):m.on(O,M);else if(typeof m.addEventListener=="function")m.addEventListener(O,function F(C){z.once&&m.removeEventListener(O,F),M(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}}),Dr=oe((e,t)=>{te(),t.exports=Ot().EventEmitter}),Fr=oe(()=>{te()}),Wn=oe((e,t)=>{te();function r(c,p){var b=Object.keys(c);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(c);p&&(A=A.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),b.push.apply(b,A)}return b}function n(c){for(var p=1;p<arguments.length;p++){var b=arguments[p]!=null?arguments[p]:{};p%2?r(Object(b),!0).forEach(function(A){a(c,A,b[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):r(Object(b)).forEach(function(A){Object.defineProperty(c,A,Object.getOwnPropertyDescriptor(b,A))})}return c}function a(c,p,b){return p in c?Object.defineProperty(c,p,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[p]=b,c}function s(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function l(c,p){for(var b=0;b<p.length;b++){var A=p[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(c,A.key,A)}}function o(c,p,b){return p&&l(c.prototype,p),b&&l(c,b),c}var f=Bt(),d=f.Buffer,g=Fr(),y=g.inspect,E=y&&y.custom||"inspect";function S(c,p,b){d.prototype.copy.call(c,p,b)}t.exports=function(){function c(){s(this,c),this.head=null,this.tail=null,this.length=0}return o(c,[{key:"push",value:function(p){var b={data:p,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(p){var b={data:p,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var b=this.head,A=""+b.data;b=b.next;)A+=p+b.data;return A}},{key:"concat",value:function(p){if(this.length===0)return d.alloc(0);for(var b=d.allocUnsafe(p>>>0),A=this.head,_=0;A;)S(A.data,b,_),_+=A.data.length,A=A.next;return b}},{key:"consume",value:function(p,b){var A;return p<this.head.data.length?(A=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?A=this.shift():A=b?this._getString(p):this._getBuffer(p),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var b=this.head,A=1,_=b.data;for(p-=_.length;b=b.next;){var k=b.data,R=p>k.length?k.length:p;if(R===k.length?_+=k:_+=k.slice(0,p),p-=R,p===0){R===k.length?(++A,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=k.slice(R));break}++A}return this.length-=A,_}},{key:"_getBuffer",value:function(p){var b=d.allocUnsafe(p),A=this.head,_=1;for(A.data.copy(b),p-=A.data.length;A=A.next;){var k=A.data,R=p>k.length?k.length:p;if(k.copy(b,b.length-p,0,R),p-=R,p===0){R===k.length?(++_,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=k.slice(R));break}++_}return this.length-=_,b}},{key:E,value:function(p,b){return y(this,n({},b,{depth:0,customInspect:!1}))}}]),c}()}),$r=oe((e,t)=>{te();function r(f,d){var g=this,y=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return y||E?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ue.nextTick(l,this,f)):ue.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(S){!d&&S?g._writableState?g._writableState.errorEmitted?ue.nextTick(a,g):(g._writableState.errorEmitted=!0,ue.nextTick(n,g,S)):ue.nextTick(n,g,S):d?(ue.nextTick(a,g),d(S)):ue.nextTick(a,g)}),this)}function n(f,d){l(f,d),a(f)}function a(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var g=f._readableState,y=f._writableState;g&&g.autoDestroy||y&&y.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:s,errorOrDestroy:o}}),pt=oe((e,t)=>{te();function r(d,g){d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.__proto__=g}var n={};function a(d,g,y){y||(y=Error);function E(c,p,b){return typeof g=="string"?g:g(c,p,b)}var S=function(c){r(p,c);function p(b,A,_){return c.call(this,E(b,A,_))||this}return p}(y);S.prototype.name=y.name,S.prototype.code=d,n[d]=S}function s(d,g){if(Array.isArray(d)){var y=d.length;return d=d.map(function(E){return String(E)}),y>2?"one of ".concat(g," ").concat(d.slice(0,y-1).join(", "),", or ")+d[y-1]:y===2?"one of ".concat(g," ").concat(d[0]," or ").concat(d[1]):"of ".concat(g," ").concat(d[0])}else return"of ".concat(g," ").concat(String(d))}function l(d,g,y){return d.substr(!y||y<0?0:+y,g.length)===g}function o(d,g,y){return(y===void 0||y>d.length)&&(y=d.length),d.substring(y-g.length,y)===g}function f(d,g,y){return typeof y!="number"&&(y=0),y+g.length>d.length?!1:d.indexOf(g,y)!==-1}a("ERR_INVALID_OPT_VALUE",function(d,g){return'The value "'+g+'" is invalid for option "'+d+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(d,g,y){var E;typeof g=="string"&&l(g,"not ")?(E="must not be",g=g.replace(/^not /,"")):E="must be";var S;if(o(d," argument"))S="The ".concat(d," ").concat(E," ").concat(s(g,"type"));else{var c=f(d,".")?"property":"argument";S='The "'.concat(d,'" ').concat(c," ").concat(E," ").concat(s(g,"type"))}return S+=". Received type ".concat(typeof y),S},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),Wr=oe((e,t)=>{te();var r=pt().codes.ERR_INVALID_OPT_VALUE;function n(s,l,o){return s.highWaterMark!=null?s.highWaterMark:l?s[o]:null}function a(s,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var g=f?o:"highWaterMark";throw new r(g,d)}return Math.floor(d)}return s.objectMode?16:16*1024}t.exports={getHighWaterMark:a}}),tt=oe((e,t)=>{te(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}}}),qn=oe((e,t)=>{te(),t.exports=r;function r(a,s){if(n("noDeprecation"))return a;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(s);n("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return a.apply(this,arguments)}return o}function n(a){try{if(!Je.localStorage)return!1}catch{return!1}var s=Je.localStorage[a];return s==null?!1:String(s).toLowerCase()==="true"}}),qr=oe((e,t)=>{te(),t.exports=F;function r(B){var L=this;this.next=null,this.entry=null,this.finish=function(){he(L,B)}}var n;F.WritableState=M;var a={deprecate:qn()},s=Dr(),l=Bt().Buffer,o=Je.Uint8Array||function(){};function f(B){return l.from(B)}function d(B){return l.isBuffer(B)||B instanceof o}var g=$r(),y=Wr(),E=y.getHighWaterMark,S=pt().codes,c=S.ERR_INVALID_ARG_TYPE,p=S.ERR_METHOD_NOT_IMPLEMENTED,b=S.ERR_MULTIPLE_CALLBACK,A=S.ERR_STREAM_CANNOT_PIPE,_=S.ERR_STREAM_DESTROYED,k=S.ERR_STREAM_NULL_VALUES,R=S.ERR_STREAM_WRITE_AFTER_END,P=S.ERR_UNKNOWN_ENCODING,m=g.errorOrDestroy;tt()(F,s);function O(){}function M(B,L,x){n=n||dt(),B=B||{},typeof x!="boolean"&&(x=L instanceof n),this.objectMode=!!B.objectMode,x&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=E(this,B,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=B.decodeStrings===!1;this.decodeStrings=!Y,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){ge(L,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var B=this.bufferedRequest,L=[];B;)L.push(B),B=B.next;return L},function(){try{Object.defineProperty(M.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(B){return z.call(this,B)?!0:this!==F?!1:B&&B._writableState instanceof M}})):z=function(B){return B instanceof this};function F(B){n=n||dt();var L=this instanceof n;if(!L&&!z.call(F,this))return new F(B);this._writableState=new M(B,this,L),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),s.call(this)}F.prototype.pipe=function(){m(this,new A)};function C(B,L){var x=new R;m(B,x),ue.nextTick(L,x)}function q(B,L,x,Y){var le;return x===null?le=new k:typeof x!="string"&&!L.objectMode&&(le=new c("chunk",["string","Buffer"],x)),le?(m(B,le),ue.nextTick(Y,le),!1):!0}F.prototype.write=function(B,L,x){var Y=this._writableState,le=!1,w=!Y.objectMode&&d(B);return w&&!l.isBuffer(B)&&(B=f(B)),typeof L=="function"&&(x=L,L=null),w?L="buffer":L||(L=Y.defaultEncoding),typeof x!="function"&&(x=O),Y.ending?C(this,x):(w||q(this,Y,B,x))&&(Y.pendingcb++,le=ne(this,Y,w,B,L,x)),le},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&pe(this,B))},F.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new P(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function J(B,L,x){return!B.objectMode&&B.decodeStrings!==!1&&typeof L=="string"&&(L=l.from(L,x)),L}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ne(B,L,x,Y,le,w){if(!x){var v=J(L,Y,le);Y!==v&&(x=!0,le="buffer",Y=v)}var W=L.objectMode?1:Y.length;L.length+=W;var X=L.length<L.highWaterMark;if(X||(L.needDrain=!0),L.writing||L.corked){var me=L.lastBufferedRequest;L.lastBufferedRequest={chunk:Y,encoding:le,isBuf:x,callback:w,next:null},me?me.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else ae(B,L,!1,W,Y,le,w);return X}function ae(B,L,x,Y,le,w,v){L.writelen=Y,L.writecb=v,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new _("write")):x?B._writev(le,L.onwrite):B._write(le,w,L.onwrite),L.sync=!1}function ce(B,L,x,Y,le){--L.pendingcb,x?(ue.nextTick(le,Y),ue.nextTick(re,B,L),B._writableState.errorEmitted=!0,m(B,Y)):(le(Y),B._writableState.errorEmitted=!0,m(B,Y),re(B,L))}function de(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function ge(B,L){var x=B._writableState,Y=x.sync,le=x.writecb;if(typeof le!="function")throw new b;if(de(x),L)ce(B,x,Y,L,le);else{var w=T(x)||B.destroyed;!w&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&pe(B,x),Y?ue.nextTick(fe,B,x,w,le):fe(B,x,w,le)}}function fe(B,L,x,Y){x||Ie(B,L),L.pendingcb--,Y(),re(B,L)}function Ie(B,L){L.length===0&&L.needDrain&&(L.needDrain=!1,B.emit("drain"))}function pe(B,L){L.bufferProcessing=!0;var x=L.bufferedRequest;if(B._writev&&x&&x.next){var Y=L.bufferedRequestCount,le=new Array(Y),w=L.corkedRequestsFree;w.entry=x;for(var v=0,W=!0;x;)le[v]=x,x.isBuf||(W=!1),x=x.next,v+=1;le.allBuffers=W,ae(B,L,!0,L.length,le,"",w.finish),L.pendingcb++,L.lastBufferedRequest=null,w.next?(L.corkedRequestsFree=w.next,w.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;x;){var X=x.chunk,me=x.encoding,se=x.callback,U=L.objectMode?1:X.length;if(ae(B,L,!1,U,X,me,se),x=x.next,L.bufferedRequestCount--,L.writing)break}x===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=x,L.bufferProcessing=!1}F.prototype._write=function(B,L,x){x(new p("_write()"))},F.prototype._writev=null,F.prototype.end=function(B,L,x){var Y=this._writableState;return typeof B=="function"?(x=B,B=null,L=null):typeof L=="function"&&(x=L,L=null),B!=null&&this.write(B,L),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||ye(this,Y,x),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function N(B,L){B._final(function(x){L.pendingcb--,x&&m(B,x),L.prefinished=!0,B.emit("prefinish"),re(B,L)})}function V(B,L){!L.prefinished&&!L.finalCalled&&(typeof B._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,ue.nextTick(N,B,L)):(L.prefinished=!0,B.emit("prefinish")))}function re(B,L){var x=T(L);if(x&&(V(B,L),L.pendingcb===0&&(L.finished=!0,B.emit("finish"),L.autoDestroy))){var Y=B._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&B.destroy()}return x}function ye(B,L,x){L.ending=!0,re(B,L),x&&(L.finished?ue.nextTick(x):B.once("finish",x)),L.ended=!0,B.writable=!1}function he(B,L,x){var Y=B.entry;for(B.entry=null;Y;){var le=Y.callback;L.pendingcb--,le(x),Y=Y.next}L.corkedRequestsFree.next=B}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){!this._writableState||(this._writableState.destroyed=B)}}),F.prototype.destroy=g.destroy,F.prototype._undestroy=g.undestroy,F.prototype._destroy=function(B,L){L(B)}}),dt=oe((e,t)=>{te();var r=Object.keys||function(y){var E=[];for(var S in y)E.push(S);return E};t.exports=f;var n=Vr(),a=qr();for(tt()(f,n),s=r(a.prototype),o=0;o<s.length;o++)l=s[o],f.prototype[l]||(f.prototype[l]=a.prototype[l]);var s,l,o;function f(y){if(!(this instanceof f))return new f(y);n.call(this,y),a.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||ue.nextTick(g,this)}function g(y){y.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}),Vn=oe((e,t)=>{te();var r=Bt(),n=r.Buffer;function a(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(l,o,f){return n(l,o,f)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},s.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),dr=oe(e=>{te();var t=Vn().Buffer,r=t.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(_){if(!_)return"utf8";for(var k;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(k)return;_=(""+_).toLowerCase(),k=!0}}function a(_){var k=n(_);if(typeof k!="string"&&(t.isEncoding===r||!r(_)))throw new Error("Unknown encoding: "+_);return k||_}e.StringDecoder=s;function s(_){this.encoding=a(_);var k;switch(this.encoding){case"utf16le":this.text=E,this.end=S,k=4;break;case"utf8":this.fillLast=d,k=4;break;case"base64":this.text=c,this.end=p,k=3;break;default:this.write=b,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(k)}s.prototype.write=function(_){if(_.length===0)return"";var k,R;if(this.lastNeed){if(k=this.fillLast(_),k===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<_.length?k?k+this.text(_,R):this.text(_,R):k||""},s.prototype.end=y,s.prototype.text=g,s.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function l(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function o(_,k,R){var P=k.length-1;if(P<R)return 0;var m=l(k[P]);return m>=0?(m>0&&(_.lastNeed=m-1),m):--P<R||m===-2?0:(m=l(k[P]),m>=0?(m>0&&(_.lastNeed=m-2),m):--P<R||m===-2?0:(m=l(k[P]),m>=0?(m>0&&(m===2?m=0:_.lastNeed=m-3),m):0))}function f(_,k,R){if((k[0]&192)!==128)return _.lastNeed=0,"\uFFFD";if(_.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return _.lastNeed=1,"\uFFFD";if(_.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return _.lastNeed=2,"\uFFFD"}}function d(_){var k=this.lastTotal-this.lastNeed,R=f(this,_);if(R!==void 0)return R;if(this.lastNeed<=_.length)return _.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,k,0,_.length),this.lastNeed-=_.length}function g(_,k){var R=o(this,_,k);if(!this.lastNeed)return _.toString("utf8",k);this.lastTotal=R;var P=_.length-(R-this.lastNeed);return _.copy(this.lastChar,0,P),_.toString("utf8",k,P)}function y(_){var k=_&&_.length?this.write(_):"";return this.lastNeed?k+"\uFFFD":k}function E(_,k){if((_.length-k)%2===0){var R=_.toString("utf16le",k);if(R){var P=R.charCodeAt(R.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",k,_.length-1)}function S(_){var k=_&&_.length?this.write(_):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,R)}return k}function c(_,k){var R=(_.length-k)%3;return R===0?_.toString("base64",k):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",k,_.length-R))}function p(_){var k=_&&_.length?this.write(_):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function b(_){return _.toString(this.encoding)}function A(_){return _&&_.length?this.write(_):""}}),rr=oe((e,t)=>{te();var r=pt().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,g=new Array(d),y=0;y<d;y++)g[y]=arguments[y];o.apply(this,g)}}}function a(){}function s(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||a);var g=f.readable||f.readable!==!1&&o.readable,y=f.writable||f.writable!==!1&&o.writable,E=function(){o.writable||c()},S=o._writableState&&o._writableState.finished,c=function(){y=!1,S=!0,g||d.call(o)},p=o._readableState&&o._readableState.endEmitted,b=function(){g=!1,p=!0,y||d.call(o)},A=function(R){d.call(o,R)},_=function(){var R;if(g&&!p)return(!o._readableState||!o._readableState.ended)&&(R=new r),d.call(o,R);if(y&&!S)return(!o._writableState||!o._writableState.ended)&&(R=new r),d.call(o,R)},k=function(){o.req.on("finish",c)};return s(o)?(o.on("complete",c),o.on("abort",_),o.req?k():o.on("request",k)):y&&!o._writableState&&(o.on("end",E),o.on("close",E)),o.on("end",b),o.on("finish",c),f.error!==!1&&o.on("error",A),o.on("close",_),function(){o.removeListener("complete",c),o.removeListener("abort",_),o.removeListener("request",k),o.req&&o.req.removeListener("finish",c),o.removeListener("end",E),o.removeListener("close",E),o.removeListener("finish",c),o.removeListener("end",b),o.removeListener("error",A),o.removeListener("close",_)}}t.exports=l}),zn=oe((e,t)=>{te();var r;function n(k,R,P){return R in k?Object.defineProperty(k,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):k[R]=P,k}var a=rr(),s=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),g=Symbol("handlePromise"),y=Symbol("stream");function E(k,R){return{value:k,done:R}}function S(k){var R=k[s];if(R!==null){var P=k[y].read();P!==null&&(k[d]=null,k[s]=null,k[l]=null,R(E(P,!1)))}}function c(k){ue.nextTick(S,k)}function p(k,R){return function(P,m){k.then(function(){if(R[f]){P(E(void 0,!0));return}R[g](P,m)},m)}}var b=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((r={get stream(){return this[y]},next:function(){var k=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[f])return Promise.resolve(E(void 0,!0));if(this[y].destroyed)return new Promise(function(M,z){ue.nextTick(function(){k[o]?z(k[o]):M(E(void 0,!0))})});var P=this[d],m;if(P)m=new Promise(p(P,this));else{var O=this[y].read();if(O!==null)return Promise.resolve(E(O,!1));m=new Promise(this[g])}return this[d]=m,m}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var k=this;return new Promise(function(R,P){k[y].destroy(null,function(m){if(m){P(m);return}R(E(void 0,!0))})})}),r),b),_=function(k){var R,P=Object.create(A,(R={},n(R,y,{value:k,writable:!0}),n(R,s,{value:null,writable:!0}),n(R,l,{value:null,writable:!0}),n(R,o,{value:null,writable:!0}),n(R,f,{value:k._readableState.endEmitted,writable:!0}),n(R,g,{value:function(m,O){var M=P[y].read();M?(P[d]=null,P[s]=null,P[l]=null,m(E(M,!1))):(P[s]=m,P[l]=O)},writable:!0}),R));return P[d]=null,a(k,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=P[l];O!==null&&(P[d]=null,P[s]=null,P[l]=null,O(m)),P[o]=m;return}var M=P[s];M!==null&&(P[d]=null,P[s]=null,P[l]=null,M(E(void 0,!0))),P[f]=!0}),k.on("readable",c.bind(null,P)),P};t.exports=_}),Gn=oe((e,t)=>{te(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Vr=oe((e,t)=>{te(),t.exports=C;var r;C.ReadableState=F,Ot().EventEmitter;var n=function(w,v){return w.listeners(v).length},a=Dr(),s=Bt().Buffer,l=Je.Uint8Array||function(){};function o(w){return s.from(w)}function f(w){return s.isBuffer(w)||w instanceof l}var d=Fr(),g;d&&d.debuglog?g=d.debuglog("stream"):g=function(){};var y=Wn(),E=$r(),S=Wr(),c=S.getHighWaterMark,p=pt().codes,b=p.ERR_INVALID_ARG_TYPE,A=p.ERR_STREAM_PUSH_AFTER_EOF,_=p.ERR_METHOD_NOT_IMPLEMENTED,k=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,P,m;tt()(C,a);var O=E.errorOrDestroy,M=["error","close","destroy","pause","resume"];function z(w,v,W){if(typeof w.prependListener=="function")return w.prependListener(v,W);!w._events||!w._events[v]?w.on(v,W):Array.isArray(w._events[v])?w._events[v].unshift(W):w._events[v]=[W,w._events[v]]}function F(w,v,W){r=r||dt(),w=w||{},typeof W!="boolean"&&(W=v instanceof r),this.objectMode=!!w.objectMode,W&&(this.objectMode=this.objectMode||!!w.readableObjectMode),this.highWaterMark=c(this,w,"readableHighWaterMark",W),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=w.emitClose!==!1,this.autoDestroy=!!w.autoDestroy,this.destroyed=!1,this.defaultEncoding=w.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,w.encoding&&(R||(R=dr().StringDecoder),this.decoder=new R(w.encoding),this.encoding=w.encoding)}function C(w){if(r=r||dt(),!(this instanceof C))return new C(w);var v=this instanceof r;this._readableState=new F(w,this,v),this.readable=!0,w&&(typeof w.read=="function"&&(this._read=w.read),typeof w.destroy=="function"&&(this._destroy=w.destroy)),a.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(w){!this._readableState||(this._readableState.destroyed=w)}}),C.prototype.destroy=E.destroy,C.prototype._undestroy=E.undestroy,C.prototype._destroy=function(w,v){v(w)},C.prototype.push=function(w,v){var W=this._readableState,X;return W.objectMode?X=!0:typeof w=="string"&&(v=v||W.defaultEncoding,v!==W.encoding&&(w=s.from(w,v),v=""),X=!0),q(this,w,v,!1,X)},C.prototype.unshift=function(w){return q(this,w,null,!0,!1)};function q(w,v,W,X,me){g("readableAddChunk",v);var se=w._readableState;if(v===null)se.reading=!1,ge(w,se);else{var U;if(me||(U=ne(se,v)),U)O(w,U);else if(se.objectMode||v&&v.length>0)if(typeof v!="string"&&!se.objectMode&&Object.getPrototypeOf(v)!==s.prototype&&(v=o(v)),X)se.endEmitted?O(w,new k):J(w,se,v,!0);else if(se.ended)O(w,new A);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!W?(v=se.decoder.write(v),se.objectMode||v.length!==0?J(w,se,v,!1):pe(w,se)):J(w,se,v,!1)}else X||(se.reading=!1,pe(w,se))}return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function J(w,v,W,X){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,w.emit("data",W)):(v.length+=v.objectMode?1:W.length,X?v.buffer.unshift(W):v.buffer.push(W),v.needReadable&&fe(w)),pe(w,v)}function ne(w,v){var W;return!f(v)&&typeof v!="string"&&v!==void 0&&!w.objectMode&&(W=new b("chunk",["string","Buffer","Uint8Array"],v)),W}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(w){R||(R=dr().StringDecoder);var v=new R(w);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,X="";W!==null;)X+=v.write(W.data),W=W.next;return this._readableState.buffer.clear(),X!==""&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var ae=1073741824;function ce(w){return w>=ae?w=ae:(w--,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w++),w}function de(w,v){return w<=0||v.length===0&&v.ended?0:v.objectMode?1:w!==w?v.flowing&&v.length?v.buffer.head.data.length:v.length:(w>v.highWaterMark&&(v.highWaterMark=ce(w)),w<=v.length?w:v.ended?v.length:(v.needReadable=!0,0))}C.prototype.read=function(w){g("read",w),w=parseInt(w,10);var v=this._readableState,W=w;if(w!==0&&(v.emittedReadable=!1),w===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return g("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?x(this):fe(this),null;if(w=de(w,v),w===0&&v.ended)return v.length===0&&x(this),null;var X=v.needReadable;g("need readable",X),(v.length===0||v.length-w<v.highWaterMark)&&(X=!0,g("length less than watermark",X)),v.ended||v.reading?(X=!1,g("reading or ended",X)):X&&(g("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(w=de(W,v)));var me;return w>0?me=L(w,v):me=null,me===null?(v.needReadable=v.length<=v.highWaterMark,w=0):(v.length-=w,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),W!==w&&v.ended&&x(this)),me!==null&&this.emit("data",me),me};function ge(w,v){if(g("onEofChunk"),!v.ended){if(v.decoder){var W=v.decoder.end();W&&W.length&&(v.buffer.push(W),v.length+=v.objectMode?1:W.length)}v.ended=!0,v.sync?fe(w):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,Ie(w)))}}function fe(w){var v=w._readableState;g("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(g("emitReadable",v.flowing),v.emittedReadable=!0,ue.nextTick(Ie,w))}function Ie(w){var v=w._readableState;g("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(w.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,B(w)}function pe(w,v){v.readingMore||(v.readingMore=!0,ue.nextTick(T,w,v))}function T(w,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var W=v.length;if(g("maybeReadMore read 0"),w.read(0),W===v.length)break}v.readingMore=!1}C.prototype._read=function(w){O(this,new _("_read()"))},C.prototype.pipe=function(w,v){var W=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=w;break;case 1:X.pipes=[X.pipes,w];break;default:X.pipes.push(w);break}X.pipesCount+=1,g("pipe count=%d opts=%j",X.pipesCount,v);var me=(!v||v.end!==!1)&&w!==ue.stdout&&w!==ue.stderr,se=me?Ce:u;X.endEmitted?ue.nextTick(se):W.once("end",se),w.on("unpipe",U);function U(h,I){g("onunpipe"),h===W&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,gt())}function Ce(){g("onend"),w.end()}var Fe=N(W);w.on("drain",Fe);var Pe=!1;function gt(){g("cleanup"),w.removeListener("close",mt),w.removeListener("finish",i),w.removeListener("drain",Fe),w.removeListener("error",Ne),w.removeListener("unpipe",U),W.removeListener("end",Ce),W.removeListener("end",u),W.removeListener("data",Rt),Pe=!0,X.awaitDrain&&(!w._writableState||w._writableState.needDrain)&&Fe()}W.on("data",Rt);function Rt(h){g("ondata");var I=w.write(h);g("dest.write",I),I===!1&&((X.pipesCount===1&&X.pipes===w||X.pipesCount>1&&le(X.pipes,w)!==-1)&&!Pe&&(g("false write response, pause",X.awaitDrain),X.awaitDrain++),W.pause())}function Ne(h){g("onerror",h),u(),w.removeListener("error",Ne),n(w,"error")===0&&O(w,h)}z(w,"error",Ne);function mt(){w.removeListener("finish",i),u()}w.once("close",mt);function i(){g("onfinish"),w.removeListener("close",mt),u()}w.once("finish",i);function u(){g("unpipe"),W.unpipe(w)}return w.emit("pipe",W),X.flowing||(g("pipe resume"),W.resume()),w};function N(w){return function(){var v=w._readableState;g("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&n(w,"data")&&(v.flowing=!0,B(w))}}C.prototype.unpipe=function(w){var v=this._readableState,W={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return w&&w!==v.pipes?this:(w||(w=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,w&&w.emit("unpipe",this,W),this);if(!w){var X=v.pipes,me=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var se=0;se<me;se++)X[se].emit("unpipe",this,{hasUnpiped:!1});return this}var U=le(v.pipes,w);return U===-1?this:(v.pipes.splice(U,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),w.emit("unpipe",this,W),this)},C.prototype.on=function(w,v){var W=a.prototype.on.call(this,w,v),X=this._readableState;return w==="data"?(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1&&this.resume()):w==="readable"&&!X.endEmitted&&!X.readableListening&&(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,g("on readable",X.length,X.reading),X.length?fe(this):X.reading||ue.nextTick(re,this)),W},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(w,v){var W=a.prototype.removeListener.call(this,w,v);return w==="readable"&&ue.nextTick(V,this),W},C.prototype.removeAllListeners=function(w){var v=a.prototype.removeAllListeners.apply(this,arguments);return(w==="readable"||w===void 0)&&ue.nextTick(V,this),v};function V(w){var v=w._readableState;v.readableListening=w.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:w.listenerCount("data")>0&&w.resume()}function re(w){g("readable nexttick read 0"),w.read(0)}C.prototype.resume=function(){var w=this._readableState;return w.flowing||(g("resume"),w.flowing=!w.readableListening,ye(this,w)),w.paused=!1,this};function ye(w,v){v.resumeScheduled||(v.resumeScheduled=!0,ue.nextTick(he,w,v))}function he(w,v){g("resume",v.reading),v.reading||w.read(0),v.resumeScheduled=!1,w.emit("resume"),B(w),v.flowing&&!v.reading&&w.read(0)}C.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function B(w){var v=w._readableState;for(g("flow",v.flowing);v.flowing&&w.read()!==null;);}C.prototype.wrap=function(w){var v=this,W=this._readableState,X=!1;w.on("end",function(){if(g("wrapped end"),W.decoder&&!W.ended){var U=W.decoder.end();U&&U.length&&v.push(U)}v.push(null)}),w.on("data",function(U){if(g("wrapped data"),W.decoder&&(U=W.decoder.write(U)),!(W.objectMode&&U==null)&&!(!W.objectMode&&(!U||!U.length))){var Ce=v.push(U);Ce||(X=!0,w.pause())}});for(var me in w)this[me]===void 0&&typeof w[me]=="function"&&(this[me]=function(U){return function(){return w[U].apply(w,arguments)}}(me));for(var se=0;se<M.length;se++)w.on(M[se],this.emit.bind(this,M[se]));return this._read=function(U){g("wrapped _read",U),X&&(X=!1,w.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return P===void 0&&(P=zn()),P(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(w){this._readableState&&(this._readableState.flowing=w)}}),C._fromList=L,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(w,v){if(v.length===0)return null;var W;return v.objectMode?W=v.buffer.shift():!w||w>=v.length?(v.decoder?W=v.buffer.join(""):v.buffer.length===1?W=v.buffer.first():W=v.buffer.concat(v.length),v.buffer.clear()):W=v.buffer.consume(w,v.decoder),W}function x(w){var v=w._readableState;g("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,ue.nextTick(Y,v,w))}function Y(w,v){if(g("endReadableNT",w.endEmitted,w.length),!w.endEmitted&&w.length===0&&(w.endEmitted=!0,v.readable=!1,v.emit("end"),w.autoDestroy)){var W=v._writableState;(!W||W.autoDestroy&&W.finished)&&v.destroy()}}typeof Symbol=="function"&&(C.from=function(w,v){return m===void 0&&(m=Gn()),m(C,w,v)});function le(w,v){for(var W=0,X=w.length;W<X;W++)if(w[W]===v)return W;return-1}}),zr=oe((e,t)=>{te(),t.exports=d;var r=pt().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=dt();tt()(d,o);function f(E,S){var c=this._transformState;c.transforming=!1;var p=c.writecb;if(p===null)return this.emit("error",new a);c.writechunk=null,c.writecb=null,S!=null&&this.push(S),p(E);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function d(E){if(!(this instanceof d))return new d(E);o.call(this,E),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),this.on("prefinish",g)}function g(){var E=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,c){y(E,S,c)}):y(this,null,null)}d.prototype.push=function(E,S){return this._transformState.needTransform=!1,o.prototype.push.call(this,E,S)},d.prototype._transform=function(E,S,c){c(new n("_transform()"))},d.prototype._write=function(E,S,c){var p=this._transformState;if(p.writecb=c,p.writechunk=E,p.writeencoding=S,!p.transforming){var b=this._readableState;(p.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},d.prototype._read=function(E){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},d.prototype._destroy=function(E,S){o.prototype._destroy.call(this,E,function(c){S(c)})};function y(E,S,c){if(S)return E.emit("error",S);if(c!=null&&E.push(c),E._writableState.length)throw new l;if(E._transformState.transforming)throw new s;return E.push(null)}}),Hn=oe((e,t)=>{te(),t.exports=n;var r=zr();tt()(n,r);function n(a){if(!(this instanceof n))return new n(a);r.call(this,a)}n.prototype._transform=function(a,s,l){l(null,a)}}),Kn=oe((e,t)=>{te();var r;function n(c){var p=!1;return function(){p||(p=!0,c.apply(void 0,arguments))}}var a=pt().codes,s=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function o(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,p,b,A){A=n(A);var _=!1;c.on("close",function(){_=!0}),r===void 0&&(r=rr()),r(c,{readable:p,writable:b},function(R){if(R)return A(R);_=!0,A()});var k=!1;return function(R){if(!_&&!k){if(k=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();A(R||new l("pipe"))}}}function g(c){c()}function y(c,p){return c.pipe(p)}function E(c){return!c.length||typeof c[c.length-1]!="function"?o:c.pop()}function S(){for(var c=arguments.length,p=new Array(c),b=0;b<c;b++)p[b]=arguments[b];var A=E(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new s("streams");var _,k=p.map(function(R,P){var m=P<p.length-1,O=P>0;return d(R,m,O,function(M){_||(_=M),M&&k.forEach(g),!m&&(k.forEach(g),A(_))})});return p.reduce(y)}t.exports=S}),yt=oe((e,t)=>{te(),e=t.exports=Vr(),e.Stream=e,e.Readable=e,e.Writable=qr(),e.Duplex=dt(),e.Transform=zr(),e.PassThrough=Hn(),e.finished=rr(),e.pipeline=Kn()}),Yn=oe((e,t)=>{te(),t.exports=r;function r(n,a){if(n&&a)return r(n)(a);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){s[l]=n[l]}),s;function s(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(g){f[g]=d[g]}),f}}}),Gr=oe((e,t)=>{te();var r=Yn();t.exports=r(n),t.exports.strict=r(a),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})});function n(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function a(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},o=s.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),Hr=oe((e,t)=>{te();var r=Gr(),n=function(){},a=function(o){return o.setHeader&&typeof o.abort=="function"},s=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var g=o._writableState,y=o._readableState,E=f.readable||f.readable!==!1&&o.readable,S=f.writable||f.writable!==!1&&o.writable,c=!1,p=function(){o.writable||b()},b=function(){S=!1,E||d.call(o)},A=function(){E=!1,S||d.call(o)},_=function(O){d.call(o,O?new Error("exited with error code: "+O):null)},k=function(O){d.call(o,O)},R=function(){ue.nextTick(P)},P=function(){if(!c){if(E&&!(y&&y.ended&&!y.destroyed))return d.call(o,new Error("premature close"));if(S&&!(g&&g.ended&&!g.destroyed))return d.call(o,new Error("premature close"))}},m=function(){o.req.on("finish",b)};return a(o)?(o.on("complete",b),o.on("abort",R),o.req?m():o.on("request",m)):S&&!g&&(o.on("end",p),o.on("close",p)),s(o)&&o.on("exit",_),o.on("end",A),o.on("finish",b),f.error!==!1&&o.on("error",k),o.on("close",R),function(){c=!0,o.removeListener("complete",b),o.removeListener("abort",R),o.removeListener("request",m),o.req&&o.req.removeListener("finish",b),o.removeListener("end",p),o.removeListener("close",p),o.removeListener("finish",b),o.removeListener("exit",_),o.removeListener("end",A),o.removeListener("error",k),o.removeListener("close",R)}};t.exports=l}),Jn=oe(()=>{te()}),Xn=oe((e,t)=>{te();var r=Gr(),n=Hr(),a=Jn(),s=function(){},l=/^v?\.0/.test(ue.version),o=function(c){return typeof c=="function"},f=function(c){return!l||!a?!1:(c instanceof(a.ReadStream||s)||c instanceof(a.WriteStream||s))&&o(c.close)},d=function(c){return c.setHeader&&o(c.abort)},g=function(c,p,b,A){A=r(A);var _=!1;c.on("close",function(){_=!0}),n(c,{readable:p,writable:b},function(R){if(R)return A(R);_=!0,A()});var k=!1;return function(R){if(!_&&!k){if(k=!0,f(c))return c.close(s);if(d(c))return c.abort();if(o(c.destroy))return c.destroy();A(R||new Error("stream was destroyed"))}}},y=function(c){c()},E=function(c,p){return c.pipe(p)},S=function(){var c=Array.prototype.slice.call(arguments),p=o(c[c.length-1]||s)&&c.pop()||s;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var b,A=c.map(function(_,k){var R=k<c.length-1,P=k>0;return g(_,R,P,function(m){b||(b=m),m&&A.forEach(y),!R&&(A.forEach(y),p(b))})});return c.reduce(E)};t.exports=S}),Zn=oe((e,t)=>{te(),t.exports=r;function r(a){var s=a._readableState;return s?s.objectMode||typeof a._duplexState=="number"?a.read():a.read(n(s)):null}function n(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}}),Qn=oe((e,t)=>{te();var r=yt(),n=Hr(),a=tt(),s=Zn(),l=ie.Buffer.from&&ie.Buffer.from!==Uint8Array.from?ie.Buffer.from([0]):new ie.Buffer([0]),o=function(c,p){c._corked?c.once("uncork",p):p()},f=function(c,p){c._autoDestroy&&c.destroy(p)},d=function(c,p){return function(b){b?f(c,b.message==="premature close"?null:b):p&&!c._ended&&c.end()}},g=function(c,p){if(!c||c._writableState&&c._writableState.finished)return p();if(c._writableState)return c.end(p);c.end(),p()},y=function(){},E=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},S=function(c,p,b){if(!(this instanceof S))return new S(c,p,b);r.Duplex.call(this,b),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!b||b.autoDestroy!==!1,this._forwardDestroy=!b||b.destroy!==!1,this._forwardEnd=!b||b.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),p&&this.setReadable(p)};a(S,r.Duplex),S.obj=function(c,p,b){return b||(b={}),b.objectMode=!0,b.highWaterMark=16,new S(c,p,b)},S.prototype.cork=function(){++this._corked===1&&this.emit("cork")},S.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},S.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var p=this,b=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),A=function(){var k=p._ondrain;p._ondrain=null,k&&k()},_=function(){p._writable.removeListener("drain",A),b()};this._unwrite&&ue.nextTick(A),this._writable=c,this._writable.on("drain",A),this._unwrite=_,this.uncork()},S.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var p=this,b=n(c,{writable:!1,readable:!0},d(this)),A=function(){p._forward()},_=function(){p.push(null)},k=function(){p._readable2.removeListener("readable",A),p._readable2.removeListener("end",_),b()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:E(c),this._readable2.on("readable",A),this._readable2.on("end",_),this._unread=k,this._forward()},S.prototype._read=function(){this._drained=!0,this._forward()},S.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},S.prototype.destroy=function(c,p){if(p||(p=y),this.destroyed)return p(null);this.destroyed=!0;var b=this;ue.nextTick(function(){b._destroy(c),p(null)})},S.prototype._destroy=function(c){if(c){var p=this._ondrain;this._ondrain=null,p?p(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},S.prototype._write=function(c,p,b){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,c,p,b));if(c===l)return this._finish(b);if(!this._writable)return b();this._writable.write(c)===!1?this._ondrain=b:this.destroyed||b()}},S.prototype._finish=function(c){var p=this;this.emit("preend"),o(this,function(){g(p._forwardEnd&&p._writable,function(){p._writableState.prefinished===!1&&(p._writableState.prefinished=!0),p.emit("prefinish"),o(p,c)})})},S.prototype.end=function(c,p,b){return typeof c=="function"?this.end(null,null,c):typeof p=="function"?this.end(c,null,p):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,b))},t.exports=S}),ei=oe((e,t)=>{te();var r=Xn(),n=tt(),a=Qn(),s=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=s(arguments);if(!(this instanceof f))return new f(d);a.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,a),f.prototype.setPipeline=function(){var d=s(arguments),g=this,y=!1,E=d[0],S=d[d.length-1];S=S.readable?S:null,E=E.writable?E:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){y||g.cork()}),r(d,function(p){if(g.removeListener("close",c),p)return g.destroy(p.message==="premature close"?null:p);y=!0,g._autoDestroy===!1&&(g._autoDestroy=!0),g.uncork()}),this.destroyed)return c();this.setWritable(E),this.setReadable(S)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),ti=oe(()=>{te()}),Kr=oe((e,t)=>{te(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof ue<"u"&&typeof ue.pid=="number"&&ue.versions&&ue.versions.node)return a(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return s(l,o)}function a(l,o){var f=ti(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var g=new Uint8Array(l),y=0;y<l;++y)g[y]=d.readUInt8(y);return g;default:throw new Error(o.type+" is unsupported.")}}function s(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var g=new ie.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new ie.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),Yr=oe((e,t)=>{te(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[n]=s;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==s||o.enumerable!==!0)return!1}return!0}}),Dt=oe((e,t)=>{te();var r=Yr();t.exports=function(){return r()&&!!Symbol.toStringTag}}),ri=oe((e,t)=>{te();var r=typeof Symbol<"u"&&Symbol,n=Yr();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),ni=oe((e,t)=>{te();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";t.exports=function(l){var o=this;if(typeof o!="function"||a.call(o)!==s)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,g=function(){if(this instanceof d){var p=o.apply(this,f.concat(n.call(arguments)));return Object(p)===p?p:this}else return o.apply(l,f.concat(n.call(arguments)))},y=Math.max(0,o.length-f.length),E=[],S=0;S<y;S++)E.push("$"+S);if(d=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this,arguments); }")(g),o.prototype){var c=function(){};c.prototype=o.prototype,d.prototype=new c,c.prototype=null}return d}}),nr=oe((e,t)=>{te();var r=ni();t.exports=Function.prototype.bind||r}),ii=oe((e,t)=>{te();var r=nr();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),ir=oe((e,t)=>{te();var r,n=SyntaxError,a=Function,s=TypeError,l=function(C){try{return a('"use strict"; return ('+C+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new s},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,g=ri()(),y=Object.getPrototypeOf||function(C){return C.__proto__},E={},S=typeof Uint8Array>"u"?r:y(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":g?y([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":E,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g?y(y([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g?r:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g?r:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g?y(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":S,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},p=function C(q){var J;if(q==="%AsyncFunction%")J=l("async function () {}");else if(q==="%GeneratorFunction%")J=l("function* () {}");else if(q==="%AsyncGeneratorFunction%")J=l("async function* () {}");else if(q==="%AsyncGenerator%"){var ne=C("%AsyncGeneratorFunction%");ne&&(J=ne.prototype)}else if(q==="%AsyncIteratorPrototype%"){var ae=C("%AsyncGenerator%");ae&&(J=y(ae.prototype))}return c[q]=J,J},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=nr(),_=ii(),k=A.call(Function.call,Array.prototype.concat),R=A.call(Function.apply,Array.prototype.splice),P=A.call(Function.call,String.prototype.replace),m=A.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,z=function(C){var q=m(C,0,1),J=m(C,-1);if(q==="%"&&J!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&q!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ne=[];return P(C,O,function(ae,ce,de,ge){ne[ne.length]=de?P(ge,M,"$1"):ce||ae}),ne},F=function(C,q){var J=C,ne;if(_(b,J)&&(ne=b[J],J="%"+ne[0]+"%"),_(c,J)){var ae=c[J];if(ae===E&&(ae=p(J)),typeof ae>"u"&&!q)throw new s("intrinsic "+C+" exists, but is not available. Please file an issue!");return{alias:ne,name:J,value:ae}}throw new n("intrinsic "+C+" does not exist!")};t.exports=function(C,q){if(typeof C!="string"||C.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new s('"allowMissing" argument must be a boolean');var J=z(C),ne=J.length>0?J[0]:"",ae=F("%"+ne+"%",q),ce=ae.name,de=ae.value,ge=!1,fe=ae.alias;fe&&(ne=fe[0],R(J,k([0,1],fe)));for(var Ie=1,pe=!0;Ie<J.length;Ie+=1){var T=J[Ie],N=m(T,0,1),V=m(T,-1);if((N==='"'||N==="'"||N==="`"||V==='"'||V==="'"||V==="`")&&N!==V)throw new n("property names with quotes must have matching quotes");if((T==="constructor"||!pe)&&(ge=!0),ne+="."+T,ce="%"+ne+"%",_(c,ce))de=c[ce];else if(de!=null){if(!(T in de)){if(!q)throw new s("base intrinsic for "+C+" exists, but the property is not available.");return}if(o&&Ie+1>=J.length){var re=o(de,T);pe=!!re,pe&&"get"in re&&!("originalValue"in re.get)?de=re.get:de=de[T]}else pe=_(de,T),de=de[T];pe&&!ge&&(c[ce]=de)}}return de}}),oi=oe((e,t)=>{te();var r=nr(),n=ir(),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(s,a),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(y){var E=l(r,s,arguments);if(o&&f){var S=o(E,"length");S.configurable&&f(E,"length",{value:1+d(0,y.length-(arguments.length-1))})}return E};var g=function(){return l(r,a,arguments)};f?f(t.exports,"apply",{value:g}):t.exports.apply=g}),or=oe((e,t)=>{te();var r=ir(),n=oi(),a=n(r("String.prototype.indexOf"));t.exports=function(s,l){var o=r(s,!!l);return typeof o=="function"&&a(s,".prototype.")>-1?n(o):o}}),ai=oe((e,t)=>{te();var r=Dt()(),n=or(),a=n("Object.prototype.toString"),s=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:a(f)==="[object Arguments]"},l=function(f){return s(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&a(f)!=="[object Array]"&&a(f.callee)==="[object Function]"},o=function(){return s(arguments)}();s.isLegacyArguments=l,t.exports=o?s:l}),si=oe((e,t)=>{te();var r=Object.prototype.toString,n=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=Dt()(),l=Object.getPrototypeOf,o=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(a.test(n.call(d)))return!0;if(!s){var g=r.call(d);return g==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var y=o();f=y?l(y):!1}return l(d)===f}}),Jr=oe((e,t)=>{te();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(a,s,l){if(n.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var o=a.length;if(o===+o)for(var f=0;f<o;f++)s.call(l,a[f],f,a);else for(var d in a)r.call(a,d)&&s.call(l,a[d],d,a)}}),Xr=oe((e,t)=>{te();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Je:globalThis;t.exports=function(){for(var a=[],s=0;s<r.length;s++)typeof n[r[s]]=="function"&&(a[a.length]=r[s]);return a}}),Zr=oe((e,t)=>{te();var r=ir(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),Qr=oe((e,t)=>{te();var r=Jr(),n=Xr(),a=or(),s=a("Object.prototype.toString"),l=Dt()(),o=typeof globalThis>"u"?Je:globalThis,f=n(),d=a("Array.prototype.indexOf",!0)||function(p,b){for(var A=0;A<p.length;A+=1)if(p[A]===b)return A;return-1},g=a("String.prototype.slice"),y={},E=Zr(),S=Object.getPrototypeOf;l&&E&&S&&r(f,function(p){var b=new o[p];if(Symbol.toStringTag in b){var A=S(b),_=E(A,Symbol.toStringTag);if(!_){var k=S(A);_=E(k,Symbol.toStringTag)}y[p]=_.get}});var c=function(p){var b=!1;return r(y,function(A,_){if(!b)try{b=A.call(p)===_}catch{}}),b};t.exports=function(p){if(!p||typeof p!="object")return!1;if(!l||!(Symbol.toStringTag in p)){var b=g(s(p),8,-1);return d(f,b)>-1}return E?c(p):!1}}),li=oe((e,t)=>{te();var r=Jr(),n=Xr(),a=or(),s=a("Object.prototype.toString"),l=Dt()(),o=typeof globalThis>"u"?Je:globalThis,f=n(),d=a("String.prototype.slice"),g={},y=Zr(),E=Object.getPrototypeOf;l&&y&&E&&r(f,function(p){if(typeof o[p]=="function"){var b=new o[p];if(Symbol.toStringTag in b){var A=E(b),_=y(A,Symbol.toStringTag);if(!_){var k=E(A);_=y(k,Symbol.toStringTag)}g[p]=_.get}}});var S=function(p){var b=!1;return r(g,function(A,_){if(!b)try{var k=A.call(p);k===_&&(b=k)}catch{}}),b},c=Qr();t.exports=function(p){return c(p)?!l||!(Symbol.toStringTag in p)?d(s(p),8,-1):S(p):!1}}),ui=oe(e=>{te();var t=ai(),r=si(),n=li(),a=Qr();function s(U){return U.call.bind(U)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=s(Object.prototype.toString),d=s(Number.prototype.valueOf),g=s(String.prototype.valueOf),y=s(Boolean.prototype.valueOf);l&&(E=s(BigInt.prototype.valueOf));var E;o&&(S=s(Symbol.prototype.valueOf));var S;function c(U,Ce){if(typeof U!="object")return!1;try{return Ce(U),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=a;function p(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"}e.isPromise=p;function b(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):a(U)||N(U)}e.isArrayBufferView=b;function A(U){return n(U)==="Uint8Array"}e.isUint8Array=A;function _(U){return n(U)==="Uint8ClampedArray"}e.isUint8ClampedArray=_;function k(U){return n(U)==="Uint16Array"}e.isUint16Array=k;function R(U){return n(U)==="Uint32Array"}e.isUint32Array=R;function P(U){return n(U)==="Int8Array"}e.isInt8Array=P;function m(U){return n(U)==="Int16Array"}e.isInt16Array=m;function O(U){return n(U)==="Int32Array"}e.isInt32Array=O;function M(U){return n(U)==="Float32Array"}e.isFloat32Array=M;function z(U){return n(U)==="Float64Array"}e.isFloat64Array=z;function F(U){return n(U)==="BigInt64Array"}e.isBigInt64Array=F;function C(U){return n(U)==="BigUint64Array"}e.isBigUint64Array=C;function q(U){return f(U)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function J(U){return typeof Map>"u"?!1:q.working?q(U):U instanceof Map}e.isMap=J;function ne(U){return f(U)==="[object Set]"}ne.working=typeof Set<"u"&&ne(new Set);function ae(U){return typeof Set>"u"?!1:ne.working?ne(U):U instanceof Set}e.isSet=ae;function ce(U){return f(U)==="[object WeakMap]"}ce.working=typeof WeakMap<"u"&&ce(new WeakMap);function de(U){return typeof WeakMap>"u"?!1:ce.working?ce(U):U instanceof WeakMap}e.isWeakMap=de;function ge(U){return f(U)==="[object WeakSet]"}ge.working=typeof WeakSet<"u"&&ge(new WeakSet);function fe(U){return ge(U)}e.isWeakSet=fe;function Ie(U){return f(U)==="[object ArrayBuffer]"}Ie.working=typeof ArrayBuffer<"u"&&Ie(new ArrayBuffer);function pe(U){return typeof ArrayBuffer>"u"?!1:Ie.working?Ie(U):U instanceof ArrayBuffer}e.isArrayBuffer=pe;function T(U){return f(U)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function N(U){return typeof DataView>"u"?!1:T.working?T(U):U instanceof DataView}e.isDataView=N;var V=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function re(U){return f(U)==="[object SharedArrayBuffer]"}function ye(U){return typeof V>"u"?!1:(typeof re.working>"u"&&(re.working=re(new V)),re.working?re(U):U instanceof V)}e.isSharedArrayBuffer=ye;function he(U){return f(U)==="[object AsyncFunction]"}e.isAsyncFunction=he;function B(U){return f(U)==="[object Map Iterator]"}e.isMapIterator=B;function L(U){return f(U)==="[object Set Iterator]"}e.isSetIterator=L;function x(U){return f(U)==="[object Generator]"}e.isGeneratorObject=x;function Y(U){return f(U)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=Y;function le(U){return c(U,d)}e.isNumberObject=le;function w(U){return c(U,g)}e.isStringObject=w;function v(U){return c(U,y)}e.isBooleanObject=v;function W(U){return l&&c(U,E)}e.isBigIntObject=W;function X(U){return o&&c(U,S)}e.isSymbolObject=X;function me(U){return le(U)||w(U)||v(U)||W(U)||X(U)}e.isBoxedPrimitive=me;function se(U){return typeof Uint8Array<"u"&&(pe(U)||ye(U))}e.isAnyArrayBuffer=se,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(e,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})}),fi=oe((e,t)=>{te(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),ci=oe(e=>{te();var t=Object.getOwnPropertyDescriptors||function(T){for(var N=Object.keys(T),V={},re=0;re<N.length;re++)V[N[re]]=Object.getOwnPropertyDescriptor(T,N[re]);return V},r=/%[sdj%]/g;e.format=function(T){if(!P(T)){for(var N=[],V=0;V<arguments.length;V++)N.push(l(arguments[V]));return N.join(" ")}for(var V=1,re=arguments,ye=re.length,he=String(T).replace(r,function(x){if(x==="%%")return"%";if(V>=ye)return x;switch(x){case"%s":return String(re[V++]);case"%d":return Number(re[V++]);case"%j":try{return JSON.stringify(re[V++])}catch{return"[Circular]"}default:return x}}),B=re[V];V<ye;B=re[++V])_(B)||!z(B)?he+=" "+B:he+=" "+l(B);return he},e.deprecate=function(T,N){if(typeof ue<"u"&&ue.noDeprecation===!0)return T;if(typeof ue>"u")return function(){return e.deprecate(T,N).apply(this,arguments)};var V=!1;function re(){if(!V){if(ue.throwDeprecation)throw new Error(N);ue.traceDeprecation?console.trace(N):console.error(N),V=!0}return T.apply(this,arguments)}return re};var n={},a=/^$/;ue.env.NODE_DEBUG&&(s=ue.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i"));var s;e.debuglog=function(T){if(T=T.toUpperCase(),!n[T])if(a.test(T)){var N=ue.pid;n[T]=function(){var V=e.format.apply(e,arguments);console.error("%s %d: %s",T,N,V)}}else n[T]=function(){};return n[T]};function l(T,N){var V={seen:[],stylize:f};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),A(N)?V.showHidden=N:N&&e._extend(V,N),O(V.showHidden)&&(V.showHidden=!1),O(V.depth)&&(V.depth=2),O(V.colors)&&(V.colors=!1),O(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=o),g(V,T,V.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(T,N){var V=l.styles[N];return V?"\x1B["+l.colors[V][0]+"m"+T+"\x1B["+l.colors[V][1]+"m":T}function f(T,N){return T}function d(T){var N={};return T.forEach(function(V,re){N[V]=!0}),N}function g(T,N,V){if(T.customInspect&&N&&q(N.inspect)&&N.inspect!==e.inspect&&!(N.constructor&&N.constructor.prototype===N)){var re=N.inspect(V,T);return P(re)||(re=g(T,re,V)),re}var ye=y(T,N);if(ye)return ye;var he=Object.keys(N),B=d(he);if(T.showHidden&&(he=Object.getOwnPropertyNames(N)),C(N)&&(he.indexOf("message")>=0||he.indexOf("description")>=0))return E(N);if(he.length===0){if(q(N)){var L=N.name?": "+N.name:"";return T.stylize("[Function"+L+"]","special")}if(M(N))return T.stylize(RegExp.prototype.toString.call(N),"regexp");if(F(N))return T.stylize(Date.prototype.toString.call(N),"date");if(C(N))return E(N)}var x="",Y=!1,le=["{","}"];if(b(N)&&(Y=!0,le=["[","]"]),q(N)){var w=N.name?": "+N.name:"";x=" [Function"+w+"]"}if(M(N)&&(x=" "+RegExp.prototype.toString.call(N)),F(N)&&(x=" "+Date.prototype.toUTCString.call(N)),C(N)&&(x=" "+E(N)),he.length===0&&(!Y||N.length==0))return le[0]+x+le[1];if(V<0)return M(N)?T.stylize(RegExp.prototype.toString.call(N),"regexp"):T.stylize("[Object]","special");T.seen.push(N);var v;return Y?v=S(T,N,V,B,he):v=he.map(function(W){return c(T,N,V,B,W,Y)}),T.seen.pop(),p(v,x,le)}function y(T,N){if(O(N))return T.stylize("undefined","undefined");if(P(N)){var V="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return T.stylize(V,"string")}if(R(N))return T.stylize(""+N,"number");if(A(N))return T.stylize(""+N,"boolean");if(_(N))return T.stylize("null","null")}function E(T){return"["+Error.prototype.toString.call(T)+"]"}function S(T,N,V,re,ye){for(var he=[],B=0,L=N.length;B<L;++B)ge(N,String(B))?he.push(c(T,N,V,re,String(B),!0)):he.push("");return ye.forEach(function(x){x.match(/^\d+$/)||he.push(c(T,N,V,re,x,!0))}),he}function c(T,N,V,re,ye,he){var B,L,x;if(x=Object.getOwnPropertyDescriptor(N,ye)||{value:N[ye]},x.get?x.set?L=T.stylize("[Getter/Setter]","special"):L=T.stylize("[Getter]","special"):x.set&&(L=T.stylize("[Setter]","special")),ge(re,ye)||(B="["+ye+"]"),L||(T.seen.indexOf(x.value)<0?(_(V)?L=g(T,x.value,null):L=g(T,x.value,V-1),L.indexOf(`
`)>-1&&(he?L=L.split(`
`).map(function(Y){return"  "+Y}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(Y){return"   "+Y}).join(`
`))):L=T.stylize("[Circular]","special")),O(B)){if(he&&ye.match(/^\d+$/))return L;B=JSON.stringify(""+ye),B.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.substr(1,B.length-2),B=T.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=T.stylize(B,"string"))}return B+": "+L}function p(T,N,V){var re=0,ye=T.reduce(function(he,B){return re++,B.indexOf(`
`)>=0&&re++,he+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ye>60?V[0]+(N===""?"":N+`
 `)+" "+T.join(`,
  `)+" "+V[1]:V[0]+N+" "+T.join(", ")+" "+V[1]}e.types=ui();function b(T){return Array.isArray(T)}e.isArray=b;function A(T){return typeof T=="boolean"}e.isBoolean=A;function _(T){return T===null}e.isNull=_;function k(T){return T==null}e.isNullOrUndefined=k;function R(T){return typeof T=="number"}e.isNumber=R;function P(T){return typeof T=="string"}e.isString=P;function m(T){return typeof T=="symbol"}e.isSymbol=m;function O(T){return T===void 0}e.isUndefined=O;function M(T){return z(T)&&ne(T)==="[object RegExp]"}e.isRegExp=M,e.types.isRegExp=M;function z(T){return typeof T=="object"&&T!==null}e.isObject=z;function F(T){return z(T)&&ne(T)==="[object Date]"}e.isDate=F,e.types.isDate=F;function C(T){return z(T)&&(ne(T)==="[object Error]"||T instanceof Error)}e.isError=C,e.types.isNativeError=C;function q(T){return typeof T=="function"}e.isFunction=q;function J(T){return T===null||typeof T=="boolean"||typeof T=="number"||typeof T=="string"||typeof T=="symbol"||typeof T>"u"}e.isPrimitive=J,e.isBuffer=fi();function ne(T){return Object.prototype.toString.call(T)}function ae(T){return T<10?"0"+T.toString(10):T.toString(10)}var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function de(){var T=new Date,N=[ae(T.getHours()),ae(T.getMinutes()),ae(T.getSeconds())].join(":");return[T.getDate(),ce[T.getMonth()],N].join(" ")}e.log=function(){console.log("%s - %s",de(),e.format.apply(e,arguments))},e.inherits=tt(),e._extend=function(T,N){if(!N||!z(N))return T;for(var V=Object.keys(N),re=V.length;re--;)T[V[re]]=N[V[re]];return T};function ge(T,N){return Object.prototype.hasOwnProperty.call(T,N)}var fe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');if(fe&&T[fe]){var N=T[fe];if(typeof N!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(N,fe,{value:N,enumerable:!1,writable:!1,configurable:!0}),N}function N(){for(var V,re,ye=new Promise(function(L,x){V=L,re=x}),he=[],B=0;B<arguments.length;B++)he.push(arguments[B]);he.push(function(L,x){L?re(L):V(x)});try{T.apply(this,he)}catch(L){re(L)}return ye}return Object.setPrototypeOf(N,Object.getPrototypeOf(T)),fe&&Object.defineProperty(N,fe,{value:N,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(N,t(T))},e.promisify.custom=fe;function Ie(T,N){if(!T){var V=new Error("Promise was rejected with a falsy value");V.reason=T,T=V}return N(T)}function pe(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var V=[],re=0;re<arguments.length;re++)V.push(arguments[re]);var ye=V.pop();if(typeof ye!="function")throw new TypeError("The last argument must be of type Function");var he=this,B=function(){return ye.apply(he,arguments)};T.apply(this,V).then(function(L){ue.nextTick(B.bind(null,null,L))},function(L){ue.nextTick(Ie.bind(null,L,B))})}return Object.setPrototypeOf(N,Object.getPrototypeOf(T)),Object.defineProperties(N,t(T)),N}e.callbackify=pe}),hi=oe((e,t)=>{te();var r=yt(),n=ci(),a=r.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,a.call(this,l)}n.inherits(s,a),s.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=s});te();te();var en=De(yt(),1),tn=De(ei(),1);te();var rn=De(yt(),1);function nn(e,t){let r=[],n;e.on("data",a=>r.push(a)),e.on("end",()=>{n||(n=!0,t(null,ie.Buffer.concat(r)))}),e.on("error",a=>{n||(n=!0,t(a))})}function on(e){let t;return new rn.Transform({transform(r,n,a){t&&(r=ie.Buffer.concat([t,r]));let s=Math.floor(r.length/e)*e;s?r.length>s?(t=r.slice(s),this.push(r.slice(0,s))):(t=void 0,this.push(r)):t=t?ie.Buffer.concat([t,r]):r,a()},flush(r){t&&this.push(t),r()}})}function di(e,t){let r=[],n=0;return new rn.Transform({transform(a,s,l){r.push(a),n+=a.length,l()},flush(a){t(n);function s(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",s);e.end(),a()}s()}})}function je(e){let t,r=new Promise((n,a)=>{t=(s,l)=>{s?a(s):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var pi=De(Kr(),1);te();te();var ar=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,a,s,l=this._tables[0][4],o=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[a=e.slice(0),s=[]],t=f;t<4*f+28;t++)n=a[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),a[t]=a[t-f]^n;for(r=0;t;r++,t--)n=a[r&3?t:t-4],t<=4||r<4?s[r]=n:s[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],a,s,l,o=[],f=[],d,g,y,E,S,c;for(a=0;a<256;a++)f[(o[a]=a<<1^(a>>7)*283)^a]=a;for(s=l=0;!r[s];s^=d||1,l=f[l]||1)for(E=l^l<<1^l<<2^l<<3^l<<4,E=E>>8^E&255^99,r[s]=E,n[E]=s,y=o[g=o[d=o[s]]],c=y*16843009^g*65537^d*257^s*16843008,S=o[E]*257^E*16843008,a=0;a<4;a++)e[a][s]=S=S<<24^S>>>8,t[a][E]=c=c<<24^c>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),t[a]=t[a].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],a=e[t?3:1]^r[1],s=e[2]^r[2],l=e[t?1:3]^r[3],o,f,d,g=r.length/4-2,y,E=4,S=[0,0,0,0],c=this._tables[t],p=c[0],b=c[1],A=c[2],_=c[3],k=c[4];for(y=0;y<g;y++)o=p[n>>>24]^b[a>>16&255]^A[s>>8&255]^_[l&255]^r[E],f=p[a>>>24]^b[s>>16&255]^A[l>>8&255]^_[n&255]^r[E+1],d=p[s>>>24]^b[l>>16&255]^A[n>>8&255]^_[a&255]^r[E+2],l=p[l>>>24]^b[n>>16&255]^A[a>>8&255]^_[s&255]^r[E+3],E+=4,n=o,a=f,s=d;for(y=0;y<4;y++)S[t?3&-y:y]=k[n>>>24]<<24^k[a>>16&255]<<16^k[s>>8&255]<<8^k[l&255]^r[E++],o=n,n=a,a=s,s=l,l=o;return S}};ar.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function yi(e){let t,r,n,a=[2479122403,2108737444,3518906241,22203222],s=ie.Buffer.alloc(Math.ceil(e.length/4)*4);for(s.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let o=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(o[t/4]=s.readInt32BE(t+r));a=new ar(o).encrypt(a)}let l=ie.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(a[t],t*4);return l}function gi(e,t,r){let n=ie.Buffer.from(t.s,"base64"),a=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:a,hash:{name:s}},l,256)).then(l=>{r(null,ie.Buffer.from(l))}).catch(r)}var qe=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new ar(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,a;for(n=0;n<e.length;n+=16){for(a=0;a<4;a++)r[a]=e.readUInt32BE(n+a*4)^t[a];for(t=this.aes.encrypt(r),a=0;a<4;a++)e.writeInt32BE(t[a],n+a*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),a,s;for(a=0;a<e.length;a+=16){for(s=0;s<4;s++)r[s]=e.readUInt32BE(a+s*4);for(n=r,r=this.aes.decrypt(r),s=0;s<4;s++)e.writeInt32BE(r[s]^t[s],a+s*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let a=e.length-n;t[n/4&3]^=e.readIntBE(n,a)<<(4-a)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=ie.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},an=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=ie.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ie.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(ie.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},sn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=ie.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=ie.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=ie.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(ie.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function $e(e){return typeof e=="string"?sr(e):e}function Re(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function sr(e){return ie.Buffer.from(e,"base64")}function it(e){return new qe(ln(e).slice(0,16))}function mi(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=$e(e),e||(e=(0,pi.default)(24)),e instanceof ie.Buffer||(e=ie.Buffer.from(e));let n=new en.Transform({transform(o,f,d){l.update(o);let g=s.encrypt(o);d(null,ie.Buffer.from(g))},flush(o){n.mac=l.condense(),n.key=wi(e,n.mac),o()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let a=new qe(e.slice(0,16)),s=new an(a,e.slice(16),r),l=new sn(a,e.slice(16));return n=(0,tn.default)(on(16),n),n}function bi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=$e(e),e instanceof ie.Buffer||(e=ie.Buffer.from(e));let n=it(e),a=new an(n,e.slice(16),r),s=!t.disableVerification&&new sn(n,e.slice(16)),l=new en.Transform({transform(o,f,d){let g=a.decrypt(o);s&&s.update(g),d(null,ie.Buffer.from(g))},flush(o){if(s&&(l.mac=s.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,tn.default)(on(16),l),l}function ln(e){let t=ie.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function wi(e,t){let r=ie.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function vi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let a=0;a<r;a++)n|=e[a]^t[a];return n===0}te();te();var Ve={},_i=Math.log(2);function kt(e){let t=[];for(;e-- >0;)t[e]=0;return t}function It(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function Ei(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function un(e,t){let r=e.length,n=t.length;if(r<n)return un(t,e);let a=[],s=0,l=0;for(;l<n;l++)s+=e[l]+t[l],a[l]=s&268435455,s>>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>>=28;return s&&(a[l]=s),a}function xe(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let a=[],s=0,l;for(l=0;l<n;l++)s+=e[l]-t[l],a[l]=s&268435455,s>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>=28;return s?[]:It(a)}function Kt(e,t,r,n,a){let s=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*s,g=s*o+((d&16383)<<14)+e[t]+a;return e[t]=g&268435455,a=l*f+(d>>14)+(g>>28),a}function Si(e){let t=e.length,r=2*t,n=kt(r),a=0,s,l;for(s=0;s<t;s++){for(a=Kt(n,2*s,e[s],e[s],0),l=s+1;l<t;l++)a=Kt(n,s+l,2*e[l],e[s],a);n[s+t]=a}return It(n)}function Ye(e,t){let r=e.length,n=t.length,a=kt(r+n-1),s,l,o;for(l=0;l<n;l++){for(s=0,o=0;o<r;o++)s=Kt(a,l+o,e[o],t[l],s);a[l+r]=s}return It(a)}function bt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function fn(e,t){let r=e.length-1,n=t.length-1,a=r-n,s,l,o,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return Ve.q=[0],Ve.mod=e,Ve;if(r===n&&bt(e,n,2)/bt(t,n,2)<4){for(s=e.concat(),l=0;o=xe(s,t),o.length!==0;)s=o,l++;return Ve.q=[l],Ve.mod=s,Ve}let d=Math.floor(Math.log(t[n])/_i)+1,g=28-d;s=e.concat();let y=t.concat();if(g){for(f=n;f>0;f--)y[f]=y[f]<<g&268435455|y[f-1]>>d;for(y[0]=y[0]<<g&268435455,s[r]&(268435455<<d&268435455)&&(s[++r]=0,a++),f=r;f>0;f--)s[f]=s[f]<<g&268435455|s[f-1]>>d;s[0]=s[0]<<g&268435455}let E,S=kt(a+1),c=kt(a).concat(y);for(;E=xe(s,c),E.length!==0;)S[a]++,s=E;let p=y[n],b=bt(y,n,2),A;for(f=r;f>n;f--){A=f-n-1,f>=s.length?S[A]=1:s[f]===p?S[A]=268435455:S[A]=Math.floor(bt(s,f,2)/p);let _=bt(s,f,3);for(;S[A]*b>_;)S[A]--;c=c.slice(1),E=xe(s,Ye([S[A]],c)),E.length===0&&(S[A]--,E=xe(s,Ye([S[A]],c))),s=E}if(g){for(f=0;f<s.length-1;f++)s[f]=s[f]>>g|s[f+1]<<d&268435455;s[s.length-1]>>=g}return Ve.q=It(S),Ve.mod=It(s),Ve}function Ai(e,t){let r=0,n;for(let a=e.length-1;a>=0;a--)n=e[a],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function lt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Ai(e,t[0])]}return fn(e,t).mod}function _t(e,t,r){let n=e.length-(t.length<<1);if(n>0)return _t(e.slice(0,n).concat(_t(e.slice(n),t,r)),t,r);let a=t.length+1,s=t.length-1,l,o=Ye(e.slice(s),r).slice(a),f=e.slice(0,a),d=Ye(o,t).slice(0,a),g=xe(f,d);g.length===0&&(f[a]=1,g=xe(f,d));for(let y=0;l=xe(g,t),l.length!==0;y++)if(g=l,y>=3)return _t(g,t,r);return g}function pr(e,t,r){let n=e.concat(),a=t.length-1,s=r.length*2,l=kt(s+1);for(l[s]=1,l=fn(l,r).q,s=Ei(t[a])-2;a>=0;a--){for(;s>=0;s-=1)n=_t(Si(n),r,l),t[a]&1<<s&&(n=_t(Ye(n,e),r,l));s=28-1}return n}function ki(e,t,r,n,a){let s=pr(lt(e,r),lt(t,xe(r,[1])),r),l=pr(lt(e,n),lt(t,xe(n,[1])),n),o=xe(l,s);return o.length===0?(o=xe(s,l),o=lt(Ye(o,a),n),o=xe(n,o)):o=lt(Ye(o,a),n),un(Ye(o,r),s)}function cn(e){let t=1,r=[0],n=0,a=256,s=e.length,l;if(s<2)return 0;let o=(s-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(a<<=1)>255&&(a=1,l=e.charCodeAt(--s)),t>268435455&&(t=1,r[++n]=0),l&a&&(r[n]|=t),t<<=1;return r}function Ii(e){let t=1,r=0,n=[0],a=1,s=0,l=e.length*28,o="",f;for(f=0;f<l;f++)e[r]&t&&(n[s]|=a),(a<<=1)>255&&(a=1,n[++s]=0),(t<<=1)>268435455&&(t=1,r++);for(;s>=0&&n[s]===0;)s--;for(f=0;f<=s;f++)o=String.fromCharCode(n[f])+o;return o}function Bi(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=cn(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Oi(e,t){let r=cn(e.toString("binary")),n=Ii(ki(r,t[2],t[0],t[1],t[3]));return ie.Buffer.from(n,"binary")}te();var Ri=De(Ot(),1);te();var Ti=null;te();var Pi=globalThis.fetch,Li=Pi;te();var ji=globalThis.AbortController||Ti,Yt=ji,Jt=4,yr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+Jt+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},Mi="https://g.api.mega.co.nz/",Ui=null,Ci=null,wt=class extends Ri.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||Mi;let r="1.0.6";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||Ui,this.httpsAgent=t.httpsAgent||Ci,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),Li(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[a,s]=je(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(gr).then(o=>{if(this.closed&&!n)return;if(!o)return a(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<Jt)return setTimeout(()=>{this.request(e,a,r+1)},Math.pow(2,r+1)*1e3);f=Error(yr[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);a(f,o)}).catch(o=>{a(o)}),s}pull(e,t=0){let r=new Yt;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(gr).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<Jt)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(yr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(Ni).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new Yt;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return wt.globalApi||(wt.globalApi=new wt),wt.globalApi}};function gr(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function Ni(e){if(e.name!=="AbortError")throw e}var Ct=wt,xi=De(Ot(),1);te();te();var Di=De(Ot(),1),Fi=De(yt(),1),$i=De(hi(),1),nt=class extends Di.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?$e(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Ct.getGlobalApi(),!(this.api instanceof Ct))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=$e(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=sr(e),it(this.key).decryptCBC(e);let t=nt.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=hn[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=je(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(a,s)=>{if(a)return t(a);if(this.directory){let l=Object.create(null),o=s.f,f=o.find(g=>g.k&&g.h===g.k.split(":")[0]),d=this.key?new qe(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let g of o){if(g===f)continue;let y=new nt(g,this.storage);y.loadMetadata(d,g),y.downloadId=[this.downloadId,g.h],l[g.h]=y}for(let g of o){let y=l[g.p];if(y){let E=l[g.h];y.children||(y.children=[]),y.children.push(E),E.parent=y}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let g=l[this.loadedFile];typeof g>"u"?t(Error("Node (file or folder) not found in folder")):t(null,g)}else t(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){var c;typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,a=e.end||null,s=e.maxConnections||4,l=e.initialChunkSize||128*1024,o=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=(c=e.forceHttps)==null||c?2:0,g={a:"g",g:1,ssl:d};if(this.nodeId?g.n=this.nodeId:Array.isArray(this.downloadId)?(g._querystring={n:this.downloadId[0]},g.n=this.downloadId[1]):g.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let y=this.key&&!e.returnCiphertext?bi(this.key,{start:n,disableVerification:n!==0||a!==null}):new Fi.PassThrough,E=n===r?y:y.pipe(new $i.default({skip:r-n})),S=e.handleRetries||nt.defaultHandleRetries;return this.api.request(g,(p,b)=>{if(p)return E.emit("error",p);if(typeof b.g!="string"||b.g.substr(0,4)!=="http")return E.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(b.s===0)return E.end();if(a||(a=b.s-1),r>a)return E.emit("error",Error("You can't download past the end of the file."));function A(q){if(q.status!==200){if(q.status===509){let J=q.headers.get("x-mega-time-left"),ne=Error("Bandwidth limit reached: "+J+" seconds until it resets");ne.timeLimit=J,E.emit("error",ne);return}E.emit("error",Error("MEGA returned a "+q.status+" status code"))}}function _(q){E.emit("error",q)}let k=0;if(E.on("data",q=>{k+=q.length,E.emit("progress",{bytesLoaded:k,bytesTotal:b.s})}),s===1){let q=new Yt;E.on("close",()=>{q.abort()}),this.api.fetch(b.g+"/"+n+"-"+a,{signal:q.signal}).then(J=>{A(J);let ne=J.body;if(ne)if(ne.pipe)J.body.pipe(y);else if(ne.getReader){let ae=ne.getReader(),ce=({done:de,value:ge})=>{if(de)y.end();else return y.write(ge),ae.read().then(ce)};ae.read().then(ce)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(_);return}let R={},P=0,m=0,O=!1,M=n,z=l;E.on("error",()=>{O=!0}),E.on("close",()=>{O=!0});let F=()=>{if(M>a){O=!0,P===m&&y.end();return}let q=M,J=Math.min(a,q+z-1),ne=P++,ae=0,ce=()=>{ae++,this.api.fetch(b.g+"/"+q+"-"+J).then(de=>(A(de),de.arrayBuffer())).then(de=>{let ge=ie.Buffer.from(de);R[ne]=ge,m===ne&&C()},de=>{S(ae,de,ge=>{ge?_(ge):ce()})})};ce(),M=J+1,z<f&&(z=z+o)},C=()=>{let q;for(;;){let J=R[m];if(!J||(q=!y.write(J),delete R[m],m++,q))break}O&&P===m&&y.end(),q?y.once("drain",C):F()};for(let q=0;q<s;q++)F()}),t&&nn(E,t),E}downloadBuffer(e,t){let[r,n]=je(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=je(t);typeof e=="boolean"&&(e={noKey:e});let a=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(a+=`#${Re(this.key)}`),!e.noKey&&this.loadedFile&&(a+=`/file/${this.loadedFile}`),r(null,a),n}static fromURL(e,t={}){if(typeof e=="object")return new nt(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),a=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),s=n[0];if(a&&!s||!a&&s)throw Error("Invalid URL: too few arguments");return new nt({downloadId:a,key:s,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new nt({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},hn=["","red","orange","yellow","green","blue","purple","grey"],ze=nt,qt=De(Kr(),1),mr=De(yt(),1),br={},vt=class extends ze{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let a of r){let s=a.split(":")[0];if(s===t.user){e.k=a;break}let l=t.shareKeys[s];if(l){e.k=a,n=br[s],n||(n=br[s]=new qe(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=je(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=ie.Buffer.from((0,qt.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let a=e.key,s=vt.packAttributes(e.attributes);it(a).encryptCBC(s);let l=ie.Buffer.from(a);this.storage.aes.encryptECB(l);let o={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:Re(s),k:Re(l)}]},f=Et(this.storage.shareKeys,this);return f.length>0&&(o.cr=Pt(this.storage,[{nodeId:"xxxxxxxx",key:a}],f)),this.api.request(o,(d,g)=>{if(d)return r(d);let y=this.storage._importFile(g.f[0]);this.storage.emit("add",y),r(null,y)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,a]=je(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let s,l=$e(e.key);l||(l=(0,qt.default)(24)),l instanceof ie.Buffer||(l=ie.Buffer.from(l));let o=e.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(s=l,l=ln(l).slice(0,24)),e.key=l;let f=[],d=(E,S,c,p)=>{if(E)return y(E);if(!c||c.length===0){y(Error("Server returned a invalid response while uploading"));return}let b=Number(c.toString());if(b<0){y(Error("Server returned error "+b+" while uploading"));return}if(f[S]=c,S===0&&!s&&(s=p.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let A=vt.packAttributes(e.attributes);it(s).encryptCBC(A);let _=ie.Buffer.from(s);this.storage.aes.encryptECB(_);let k={h:Re(f[0]),t:0,a:Re(A),k:Re(_)};f.length!==1&&(k.fa=f.slice(1).map((m,O)=>O+"*"+Re(m)).filter(m=>m).join("/"));let R={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[k]},P=Et(this.storage.shareKeys,this);P.length>0&&(R.cr=Pt(this.storage,[{nodeId:k.h,key:s}],P)),this.api.request(R,(m,O)=>{if(m)return y(m);let M=this.storage._importFile(O.f[0]);this.storage.emit("add",M),g.emit("complete",M),n&&n(null,M)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let g=this._upload(e,t,0,d);function y(E){g.listenerCount("error")?g.emit("error",E):n(E)}return g.complete=a,g}_upload(e,t,r,n){let a=e.uploadCiphertext?new mr.PassThrough:mi(e.key),s=a,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,s.end(t)),l!=null?(l===0&&a.end(),this._uploadWithSize(s,l,a,r,e,n)):s=di(s,o=>{this._uploadWithSize(s,o,a,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(s),s}_uploadAttribute(e,t,r,n){let a=(s,l)=>{if(s)return n(s);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=ie.Buffer.concat([l,ie.Buffer.alloc(f)])),(e.handle?it(e.key):new qe(e.key.slice(0,16))).encryptCBC(l);let d=new mr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof ie.Buffer){a(null,t);return}nn(t,a)}_uploadWithSize(e,t,r,n,a,s){var F;let l=(F=a.forceHttps)==null||F?2:0,o=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};a.handle&&(o.h=a.handle);let f=n===0?a.initialChunkSize||128*1024:t,d=a.chunkSizeIncrement||128*1024,g=a.maxChunkSize||1024*1024,y=a.maxConnections||4,E=a.handleRetries||ze.defaultHandleRetries,S=f,c=0,p=!1,b=0,A,_,k,R,P,m=()=>{R=Math.min(S,t-b),_=ie.Buffer.alloc(R),c++,S<g&&(S+=d),P=0,A&&(A.copy(_),P=Math.min(A.length,R),A=A.length>R?A.slice(R):null),P===R?O():(p=!0,z())},O=()=>{let C=b,q=_,J=0,ne=()=>{J++,this.api.fetch(k+"/"+(n===0?C:n-1),{method:"POST",body:q,headers:{"content-length":q.length}}).then(ae=>{if(ae.status!==200)throw Error("MEGA returned a "+ae.status+" status code");return ae.arrayBuffer()}).then(ae=>{let ce=ie.Buffer.from(ae);ce.length>0?(r.end(),ue.nextTick(()=>{s(null,n,ce,r)})):b<t&&!p&&m()},ae=>{E(J,ae,ce=>{ce?e.emit("error",ce):ne()})})};ne(),_=null,b+=R,b<t&&!p&&c<y&&m()},M=0,z=()=>{for(;;){let C=r.read();if(C===null){r.once("readable",z);break}if(M+=C.length,e.emit("progress",{bytesLoaded:M,bytesTotal:t}),C.copy(_,P),P+=C.length,P>=R){p=!1,A=C.slice(C.length-(P-R)),O();break}}};r.on("end",()=>{t&&M!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+M))}),this.api.request(o,(C,q)=>{if(C)return s(C);k=q.p,m()})}uploadAttribute(e,t,r){let[n,a]=je(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(s,l,o,f)=>{if(s)return n(s);let d={a:"pfa",n:this.nodeId,fa:e+"*"+Re(o)};this.api.request(d,(g,y)=>{if(g)return n(g);n(null,this)})}),a}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof ze))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=Et(this.storage.shareKeys,e);return n.length>0&&(r.cr=Pt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=je(t);Object.assign(this.attributes,e);let a=vt.packAttributes(this.attributes);return it(this.key).encryptCBC(a),this.api.request({a:"a",n:this.nodeId,at:Re(a)},s=>{this.parseAttributes(this.attributes),r(s)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=hn.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,a]=je(t);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return n(s);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(o+=`#${Re(r||this.key)}`),n(null,o)}),a}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let a=$e(e.key);a||(a=(0,qt.default)(16)),a instanceof ie.Buffer||(a=ie.Buffer.from(a));let[s,l]=je(t);if(a.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=a;let o=ie.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:Re(this.storage.aes.encryptECB(ie.Buffer.from(a))),ha:Re(o),cr:Pt(this.storage,this)};return this.api.request(f,d=>{if(d)return s(d);this.link(Object.assign({__folderKey:a},e),s)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=je(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=ze.fromURL(e)),!(e instanceof ze))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let a=(s,l)=>{if(s)return r(s);let o=vt.packAttributes(l.attributes);it(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:Re(o),k:Re(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(g,y)=>{if(g)return r(g);let E=this.storage._importFile(y.f[0]);this.storage.emit("add",E),r(null,E)})};return e.attributes?a(null,e):e.loadAttributes(a),n}static packAttributes(e){let t=JSON.stringify(e);t=ie.Buffer.from(`MEGA${t}`);let r=ie.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Pt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=dn(t)),r||(r=t.map(s=>Et(n,s)).reduce((s,l)=>s.concat(l)).filter((s,l,o)=>l===o.indexOf(s)));let a=[r,t.map(s=>s.nodeId),[]];for(let s=r.length;s--;){let l=new qe(n[r[s]]);for(let o=t.length;o--;){let f=ie.Buffer.from(t[o].key);f&&(f.length===32||f.length===16)&&a[2].push(s,o,Re(l.encryptECB(f)))}}return a}function dn(e){return[e].concat((e.children||[]).map(dn).reduce((t,r)=>t.concat(r),[]))}function Et(e,t){let r=t.nodeId,n=t.parent,a=[];return e[r]&&a.push(r),n?a.concat(Et(e,n)):a}var Wi=vt,qi=class extends xi.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=je(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Ct(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):ue.nextTick(()=>{r(null,this)})}login(e){let[t,r]=je(e);if(typeof this.options.email!="string")return ue.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},a=f=>{this.api.request({a:"ug"},(d,g)=>{if(d)return f(d);this.name=g.name,this.user=g.u,this.options.autoload?this.reload(!0,y=>{if(y)return f(y);n()}):n()})};this.email=this.options.email.toLowerCase();let s=f=>{let d=yi(ie.Buffer.from(this.options.password));delete this.options.password;let g=new qe(d),y=Re(g.stringhash(ie.Buffer.from(this.email))),E={a:"us",user:this.email,uh:y};o(E,g,f)},l=(f,d)=>{gi(ie.Buffer.from(this.options.password),f,(g,y)=>{if(g)return d(g);delete this.options.password;let E=new qe(y.slice(0,16)),S=Re(y.slice(16)),c={a:"us",user:this.email,uh:S};o(c,E,d)})},o=(f,d,g)=>{this.api.request(f,(y,E)=>{if(y)return g(y);this.key=$e(E.k),d.decryptECB(this.key),this.aes=new qe(this.key);let S=$e(E.csid),c=this.aes.decryptECB($e(E.privk)),p=Bi(c);if(!p)throw Error("invalid credentials");let b=Re(Oi(S,p).slice(0,43));this.api.sid=this.sid=b,this.RSAPrivateKey=p,a(g)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return s(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=je(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(a,s)=>{if(a)return r(a);this.shareKeys=s.ok.reduce((l,o)=>{let f=o.h,d=this.aes.encryptECB(ie.Buffer.from(f+f));return vi($e(o.ha),d)&&(l[f]=this.aes.decryptECB($e(o.k))),l},{}),s.f.forEach(l=>{var o;l=this._importFile(l),s.ph!==void 0&&(l.shareId=(o=s.ph.find(f=>f.h===l.nodeId))==null?void 0:o.ph,l.shared=!!l.shareId,l.shared&&(l.shareURL=`https://mega.nz/${l.directory?"folder":"file"}/${l.shareId}`,l.key&&(l.shareURL+=`#${Re(l.directory?this.shareKeys[l.nodeId]:l.key)}`)))}),r(null,this.mounts)}),this.api.on("sc",a=>{let s={};a.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete s[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(s).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new Wi(e,this);if(e.t===Vi&&(this.root=t,t.name="Cloud Drive"),e.t===Gi&&(this.trash=t,t.name="Rubbish Bin"),e.t===zi&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=je(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,a)=>{n&&t(n);let s={};s.type=a.utype,s.spaceUsed=a.cstrg,s.spaceTotal=a.mstrg,s.downloadBandwidthTotal=a.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=a.caxfer||0,s.sharedBandwidthUsed=a.csxfer||0,s.sharedBandwidthLimit=a.srvratio,t(null,s)}),r}toJSON(){return{key:Re(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new qi(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=sr(e.key),t.aes=new qe(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},Vi=2,zi=3,Gi=4;ze.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function rt(){return await Rn("music",2,{upgrade(e,t,r,n,a){t<1&&(e.createObjectStore("album",{keyPath:"folderName"}),e.createObjectStore("image",{keyPath:"id"}),e.createObjectStore("song",{keyPath:"id"})),e.createObjectStore("albumFolder")}})}async function Hi(){var a,s;const e=await rt(),t=await e.getAll("album"),r=(a=await e.get("albumFolder","german"))!=null?a:[],n=(s=await e.get("albumFolder","russian"))!=null?s:[];return e.close(),{german:t.filter(l=>r.includes(l.folderName)),russian:t.filter(l=>n.includes(l.folderName))}}async function Ki(e){const t=await rt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian");const a=r.objectStore("album");a.clear();const s=[];for(const l of e.german)s.push(a.put(l));for(const l of e.russian)s.push(a.put(l));await Promise.all(s),r.commit(),t.close()}const wr={};async function lr(e){const t=We(e);let r=wr[t];if(!r){const n=await Yi(e);r=URL.createObjectURL(n),wr[t]=r}return r}async function Yi(e){const t=We(e),r=await rt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const a=await new ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a]);return Ji(e,s),s}async function Ji(e,t){const n={id:We(e),blob:t},a=await rt();await a.add("image",n),a.close()}async function pn(e){const t=We(e),r=await rt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const a=await new ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a],{type:"audio/mpeg"});return Xi(e,s),s}async function Xi(e,t){const n={id:We(e),name:e.name,blob:t},a=await rt();await a.add("song",n),a.close()}async function Zi(e){const t=await rt(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(We(n)))}async function Qi(){const e=await rt(),t=await e.getAllKeys("song");return e.close(),t}function We(e){return JSON.stringify({key:e.key,downloadId:e.downloadId})}const vr={GERMAN_SONGS_URL:"https://mega.nz/folder/HrY2VQ4B#bHcKtZGU3gvx0yq1K2YvoQ",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ"};function Vt(e){return e.german.flatMap(t=>t.songs).concat(e.russian.flatMap(t=>t.songs))}async function eo(){return{german:await _r(vr.GERMAN_SONGS_URL),russian:await _r(vr.RUSSIAN_SONGS_URL)}}async function _r(e){const t=ze.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(r=>{const n=r.children.find(a=>{var s;return(s=a.name)==null?void 0:s.endsWith(".jpg")});return{name:r.name.split("(")[0].trim(),folderName:r.name,image:n?{key:n.key,downloadId:n.downloadId,fileSize:n.size}:null,songs:r.children.filter(a=>a.name.endsWith(".mp3")).map(a=>({name:a.name.substring(0,a.name.length-4).trim(),link:{key:a.key,downloadId:a.downloadId,fileSize:a.size}}))}})}async function St(e,t,r){try{const n=t[r];He.update(s=>({...s,isLoading:!0}));const a=await pn({name:n.name,...n.link});He.update(s=>(s.src!=null&&URL.revokeObjectURL(s.src),{...s,isLoading:!1,src:URL.createObjectURL(a),album:e,song:n,playPrevious:r>0?()=>St(e,t,r-1):null,playNext:r<t.length-1?()=>St(e,t,r+1):null,playRandom:()=>St(e,t,to(t.length))}))}catch{He.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function to(e){return Math.floor(Math.random()*e)}const jt="music/favorites";function Xt(e){var r,n;const t=We(e);return(n=(r=localStorage.getItem(jt))==null?void 0:r.includes(t))!=null?n:!1}function ro(e){var n;const t=`;${We(e)};`,r=localStorage.getItem(jt);(n=r==null?void 0:r.includes(t))!=null&&n?localStorage.setItem(jt,r.replace(t,"")):localStorage.setItem(jt,r+t)}function no(e){let t,r,n,a,s;return{c(){t=Z("button"),r=be("play_arrow"),this.h()},l(l){t=Q(l,"BUTTON",{class:!0});var o=ee(t);r=we(o,"play_arrow"),o.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined btn btn-sm btn-circle"),t.disabled=n=e[1].isLoading},m(l,o){Ae(l,t,o),$(t,r),a||(s=Be(t,"click",e[6]),a=!0)},p(l,o){o&2&&n!==(n=l[1].isLoading)&&(t.disabled=n)},d(l){l&&G(t),a=!1,s()}}}function io(e){let t,r,n,a;return{c(){t=Z("button"),r=be("pause"),this.h()},l(s){t=Q(s,"BUTTON",{class:!0});var l=ee(t);r=we(l,"pause"),l.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){Ae(s,t,l),$(t,r),n||(a=Be(t,"click",e[7]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function oo(e){let t,r,n,a,s,l,o,f,d,g,y=Lt(e[5])+"",E,S,c,p=Lt(e[3])+"",b,A,_,k,R,P,m,O,M,z,F,C,q,J,ne,ae,ce,de,ge,fe,Ie,pe=!0,T=!1,N,V,re;function ye(x,Y){return x[2]?no:io}let he=ye(e),B=he(e);function L(){cancelAnimationFrame(N),fe.paused||(N=gn(L),T=!0),e[13].call(fe)}return{c(){t=Z("div"),r=Z("div"),n=Z("div"),a=Z("input"),s=ve(),l=Z("button"),o=be("X"),f=ve(),d=Z("div"),g=Z("p"),E=be(y),S=ve(),c=Z("p"),b=be(p),A=ve(),_=Z("div"),k=Z("button"),R=be("favorite"),m=ve(),O=Z("button"),M=be("skip_previous"),F=ve(),B.c(),C=ve(),q=Z("button"),J=be("skip_next"),ae=ve(),ce=Z("button"),de=be("shuffle"),ge=ve(),fe=Z("audio"),this.h()},l(x){t=Q(x,"DIV",{class:!0});var Y=ee(t);r=Q(Y,"DIV",{class:!0});var le=ee(r);n=Q(le,"DIV",{class:!0});var w=ee(n);a=Q(w,"INPUT",{class:!0,type:!0,min:!0,max:!0}),s=_e(w),l=Q(w,"BUTTON",{class:!0});var v=ee(l);o=we(v,"X"),v.forEach(G),w.forEach(G),le.forEach(G),f=_e(Y),d=Q(Y,"DIV",{class:!0});var W=ee(d);g=Q(W,"P",{});var X=ee(g);E=we(X,y),X.forEach(G),S=_e(W),c=Q(W,"P",{});var me=ee(c);b=we(me,p),me.forEach(G),W.forEach(G),A=_e(Y),_=Q(Y,"DIV",{class:!0});var se=ee(_);k=Q(se,"BUTTON",{class:!0});var U=ee(k);R=we(U,"favorite"),U.forEach(G),m=_e(se),O=Q(se,"BUTTON",{class:!0});var Ce=ee(O);M=we(Ce,"skip_previous"),Ce.forEach(G),F=_e(se),B.l(se),C=_e(se),q=Q(se,"BUTTON",{class:!0});var Fe=ee(q);J=we(Fe,"skip_next"),Fe.forEach(G),ae=_e(se),ce=Q(se,"BUTTON",{class:!0});var Pe=ee(ce);de=we(Pe,"shuffle"),Pe.forEach(G),se.forEach(G),ge=_e(Y),fe=Q(Y,"AUDIO",{id:!0,src:!0}),ee(fe).forEach(G),Y.forEach(G),this.h()},h(){H(a,"class","range flex-1"),H(a,"type","range"),H(a,"min","0"),H(a,"max",e[3]),H(l,"class","inline btn btn-sm btn-circle ml-2 relative bottom-2"),H(n,"class","flex"),H(r,"class","flex-1 w-full max-w-lg relative mt-2"),H(d,"class","w-full max-w-lg flex flex-row justify-between"),H(k,"class",P=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`),H(O,"class","material-symbols-outlined btn btn-sm btn-circle"),O.disabled=z=e[1].playPrevious==null,H(q,"class","material-symbols-outlined btn btn-sm btn-circle"),q.disabled=ne=e[1].playNext==null,H(ce,"class","material-symbols-outlined btn btn-sm btn-circle"),H(_,"class","h-8 flex justify-center gap-1"),H(fe,"id","audio"),fe.autoplay=!0,ut(fe.src,Ie=e[1].src)||H(fe,"src",Ie),e[3]===void 0&&Nt(()=>e[12].call(fe)),H(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(x,Y){Ae(x,t,Y),$(t,r),$(r,n),$(n,a),ft(a,e[0]),$(n,s),$(n,l),$(l,o),$(t,f),$(t,d),$(d,g),$(g,E),$(d,S),$(d,c),$(c,b),$(t,A),$(t,_),$(_,k),$(k,R),$(_,m),$(_,O),$(O,M),$(_,F),B.m(_,null),$(_,C),$(_,q),$(q,J),$(_,ae),$(_,ce),$(ce,de),$(t,ge),$(t,fe),V||(re=[Be(a,"change",e[10]),Be(a,"input",e[10]),Be(l,"click",e[9]),Be(k,"click",e[8]),Be(O,"click",function(){Tt(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),Be(q,"click",function(){Tt(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),Be(ce,"click",function(){Tt(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),Be(fe,"play",e[11]),Be(fe,"pause",e[11]),Be(fe,"durationchange",e[12]),Be(fe,"timeupdate",L),Be(fe,"ended",function(){Tt(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],V=!0)},p(x,[Y]){e=x,Y&8&&H(a,"max",e[3]),Y&1&&ft(a,e[0]),Y&32&&y!==(y=Lt(e[5])+"")&&ct(E,y),Y&8&&p!==(p=Lt(e[3])+"")&&ct(b,p),Y&16&&P!==(P=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`)&&H(k,"class",P),Y&2&&z!==(z=e[1].playPrevious==null)&&(O.disabled=z),he===(he=ye(e))&&B?B.p(e,Y):(B.d(1),B=he(e),B&&(B.c(),B.m(_,C))),Y&2&&ne!==(ne=e[1].playNext==null)&&(q.disabled=ne),Y&2&&!ut(fe.src,Ie=e[1].src)&&H(fe,"src",Ie),Y&4&&pe!==(pe=e[2])&&fe[pe?"pause":"play"](),!T&&Y&1&&!isNaN(e[0])&&(fe.currentTime=e[0]),T=!1},i:Ue,o:Ue,d(x){x&&G(t),B.d(),V=!1,Zt(re)}}}function Lt(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function ao(e,t,r){let n,a,s;Ge(e,He,k=>r(1,s=k));let l=null;xt(()=>{l=document.getElementById("audio")});let o=!0,f=0,d=0;async function g(k){const R=await lr(k);navigator.mediaSession.metadata.artwork=[{src:R}]}function y(){l.play()}function E(){l.pause()}function S(){!s.song||(ro(s.song.link),r(4,a=Xt(s.song.link)))}function c(){He.set({isLoading:!1,song:null,album:null,src:null})}function p(){d=yn(this.value),r(0,d)}function b(){o=this.paused,r(2,o)}function A(){f=this.duration,r(3,f)}function _(){d=this.currentTime,r(0,d)}return e.$$.update=()=>{var k,R,P,m,O;e.$$.dirty&1&&r(5,n=Math.round(d)),e.$$.dirty&2&&r(4,a=s.song!=null&&Xt(s.song.link)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(k=s.song)==null?void 0:k.name,album:(R=s.album)==null?void 0:R.name}),(P=s.album)!=null&&P.image&&g(s.album.image),navigator.mediaSession.setActionHandler("nexttrack",(m=s.playNext)!=null?m:null),navigator.mediaSession.setActionHandler("previoustrack",(O=s.playPrevious)!=null?O:null))},[d,s,o,f,a,n,y,E,S,c,p,b,A,_]}class so extends ot{constructor(t){super(),at(this,t,ao,oo,st,{})}}function Er(e,t,r){const n=e.slice();return n[11]=t[r],n}function lo(e){let t,r,n,a;return{c(){t=Z("button"),r=be("download"),this.h()},l(s){t=Q(s,"BUTTON",{class:!0});var l=ee(t);r=we(l,"download"),l.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){Ae(s,t,l),$(t,r),n||(a=Be(t,"click",e[5]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function uo(e){let t,r;return{c(){t=Z("div"),r=Z("progress"),this.h()},l(n){t=Q(n,"DIV",{class:!0});var a=ee(t);r=Q(a,"PROGRESS",{class:!0}),ee(r).forEach(G),a.forEach(G),this.h()},h(){H(r,"class","progress w-56 mb-2 h-4"),H(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){Ae(n,t,a),$(t,r)},p:Ue,d(n){n&&G(t)}}}function fo(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(a){t=Q(a,"FIGURE",{});var s=ee(t);r=Q(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[2])||H(r,"src",n),H(r,"alt","Albumbild"),H(r,"class","w-48 h-48 object-scale-down")},m(a,s){Ae(a,t,s),$(t,r)},p(a,s){s&4&&!ut(r.src,n=a[2])&&H(r,"src",n)},d(a){a&&G(t)}}}function Sr(e){let t,r;return{c(){t=Z("span"),r=be("download"),this.h()},l(n){t=Q(n,"SPAN",{class:!0});var a=ee(t);r=we(a,"download"),a.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined")},m(n,a){Ae(n,t,a),$(t,r)},d(n){n&&G(t)}}}function Ar(e){let t,r,n=e[11].name+"",a,s,l=e[1].includes(e[11].link),o,f,d,g,y=l&&Sr();function E(){return e[8](e[11])}return{c(){t=Z("li"),r=Z("p"),a=be(n),s=ve(),y&&y.c(),o=ve(),this.h()},l(S){t=Q(S,"LI",{class:!0});var c=ee(t);r=Q(c,"P",{class:!0});var p=ee(r);a=we(p,n),p.forEach(G),s=_e(c),y&&y.l(c),o=_e(c),c.forEach(G),this.h()},h(){H(r,"class","flex-1 hover:underline"),H(t,"class",f=`cursor-pointer flex ${e[11]===e[3].song?"font-bold":""}`)},m(S,c){Ae(S,t,c),$(t,r),$(r,a),$(t,s),y&&y.m(t,null),$(t,o),d||(g=Be(t,"click",E),d=!0)},p(S,c){e=S,c&1&&n!==(n=e[11].name+"")&&ct(a,n),c&3&&(l=e[1].includes(e[11].link)),l?y||(y=Sr(),y.c(),y.m(t,o)):y&&(y.d(1),y=null),c&9&&f!==(f=`cursor-pointer flex ${e[11]===e[3].song?"font-bold":""}`)&&H(t,"class",f)},d(S){S&&G(t),y&&y.d(),d=!1,g()}}}function co(e){var p,b;let t,r,n,a,s,l,o,f,d;r=new Cr({props:{title:(p=e[0].name)!=null?p:"L\xE4dt...",withCloseButton:!0,$$slots:{default:[lo]},$$scope:{ctx:e}}});function g(A,_){return A[2]?fo:uo}let y=g(e),E=y(e),S=(b=e[0].songs)!=null?b:[],c=[];for(let A=0;A<S.length;A+=1)c[A]=Ar(Er(e,S,A));return{c(){t=Z("main"),Xe(r.$$.fragment),n=ve(),a=Z("div"),s=Z("div"),l=Z("div"),E.c(),o=ve(),f=Z("ul");for(let A=0;A<c.length;A+=1)c[A].c();this.h()},l(A){t=Q(A,"MAIN",{class:!0});var _=ee(t);Ze(r.$$.fragment,_),n=_e(_),a=Q(_,"DIV",{class:!0});var k=ee(a);s=Q(k,"DIV",{class:!0});var R=ee(s);l=Q(R,"DIV",{class:!0});var P=ee(l);E.l(P),P.forEach(G),o=_e(R),f=Q(R,"UL",{class:!0});var m=ee(f);for(let O=0;O<c.length;O+=1)c[O].l(m);m.forEach(G),R.forEach(G),k.forEach(G),_.forEach(G),this.h()},h(){H(l,"class","mb-2"),H(f,"class","mx-2"),H(s,"class","card w-full md:w-96 bg-base-100 shadow-xl"),H(a,"class","flex-1 flex justify-center"),H(t,"class","flex-1 flex flex-col")},m(A,_){Ae(A,t,_),Qe(r,t,null),$(t,n),$(t,a),$(a,s),$(s,l),E.m(l,null),$(s,o),$(s,f);for(let k=0;k<c.length;k+=1)c[k].m(f,null);d=!0},p(A,[_]){var R,P;const k={};if(_&1&&(k.title=(R=A[0].name)!=null?R:"L\xE4dt..."),_&16384&&(k.$$scope={dirty:_,ctx:A}),r.$set(k),y===(y=g(A))&&E?E.p(A,_):(E.d(1),E=y(A),E&&(E.c(),E.m(l,null))),_&27){S=(P=A[0].songs)!=null?P:[];let m;for(m=0;m<S.length;m+=1){const O=Er(A,S,m);c[m]?c[m].p(O,_):(c[m]=Ar(O),c[m].c(),c[m].m(f,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=S.length}},i(A){d||(Le(r.$$.fragment,A),d=!0)},o(A){Me(r.$$.fragment,A),d=!1},d(A){A&&G(t),et(r),E.d(),Qt(c,A)}}}function ho(e,t,r){let n,a,s;Ge(e,At,c=>r(7,a=c)),Ge(e,He,c=>r(3,s=c));let{album:l}=t,o=[],f,d;async function g(c){const p=n.songs.indexOf(c);St(n,n.songs,p),y()}async function y(){r(1,o=await Zi(n.songs.map(c=>c.link)))}async function E(){try{d=!0;for(const c of n.songs)await pn({name:c.name,...c.link}),y()}finally{d=!1}}xt(()=>{y()});const S=c=>g(c);return e.$$set=c=>{"album"in c&&r(6,l=c.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=a.german.concat(a.russian).find(c=>c.folderName===l)),e.$$.dirty&1&&n.image&&lr(n.image).then(c=>r(2,f=c))},[n,o,f,s,g,E,l,a,S]}class po extends ot{constructor(t){super(),at(this,t,ho,co,st,{album:6})}}function yo(e){let t,r;return{c(){t=Z("div"),r=Z("progress"),this.h()},l(n){t=Q(n,"DIV",{class:!0});var a=ee(t);r=Q(a,"PROGRESS",{class:!0}),ee(r).forEach(G),a.forEach(G),this.h()},h(){H(r,"class","progress w-56 mb-2 h-4"),H(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){Ae(n,t,a),$(t,r)},p:Ue,d(n){n&&G(t)}}}function go(e){let t,r,n;return{c(){t=Z("figure"),r=Z("img"),this.h()},l(a){t=Q(a,"FIGURE",{});var s=ee(t);r=Q(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[1])||H(r,"src",n),H(r,"alt","Albumbild"),H(r,"class","w-48 h-48 object-scale-down")},m(a,s){Ae(a,t,s),$(t,r)},p(a,s){s&2&&!ut(r.src,n=a[1])&&H(r,"src",n)},d(a){a&&G(t)}}}function mo(e){let t,r,n,a,s=e[0].name+"",l,o,f,d,g,y,E;function S(b,A){return b[1]?go:yo}let c=S(e),p=c(e);return{c(){t=Z("div"),p.c(),r=ve(),n=Z("div"),a=Z("p"),l=be(s),o=ve(),f=Z("div"),d=Z("a"),g=be("\xD6ffnen"),this.h()},l(b){t=Q(b,"DIV",{id:!0,class:!0});var A=ee(t);p.l(A),r=_e(A),n=Q(A,"DIV",{class:!0});var _=ee(n);a=Q(_,"P",{class:!0});var k=ee(a);l=we(k,s),k.forEach(G),_.forEach(G),o=_e(A),f=Q(A,"DIV",{class:!0});var R=ee(f);d=Q(R,"A",{class:!0,href:!0});var P=ee(d);g=we(P,"\xD6ffnen"),P.forEach(G),R.forEach(G),A.forEach(G),this.h()},h(){H(a,"class","card-title"),H(n,"class","card-body w-full md:w-96"),H(d,"class","btn btn-primary capitalize"),H(d,"href",y=`#album/${e[0].folderName}`),H(f,"class","card-actions justify-end"),H(t,"id",E=`album_card_${e[0].name}`),H(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(b,A){Ae(b,t,A),p.m(t,null),$(t,r),$(t,n),$(n,a),$(a,l),$(t,o),$(t,f),$(f,d),$(d,g)},p(b,[A]){c===(c=S(b))&&p?p.p(b,A):(p.d(1),p=c(b),p&&(p.c(),p.m(t,r))),A&1&&s!==(s=b[0].name+"")&&ct(l,s),A&1&&y!==(y=`#album/${b[0].folderName}`)&&H(d,"href",y),A&1&&E!==(E=`album_card_${b[0].name}`)&&H(t,"id",E)},i:Ue,o:Ue,d(b){b&&G(t),p.d()}}}function bo(e,t,r){let{album:n}=t,a,s,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!a&&(r(1,a=await lr(n.image)),l.unobserve(s),l=null)}),xt(()=>{s=document.getElementById(`album_card_${n.name}`),l.observe(s)}),mn(()=>{l==null||l.unobserve(s)}),e.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,a]}class wo extends ot{constructor(t){super(),at(this,t,bo,mo,st,{album:0})}}function kr(e,t,r){const n=e.slice();return n[6]=t[r],n}function Ir(e,t){let r,n,a;return n=new wo({props:{album:t[6]}}),{key:e,first:null,c(){r=ur(),Xe(n.$$.fragment),this.h()},l(s){r=ur(),Ze(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,l){Ae(s,r,l),Qe(n,s,l),a=!0},p(s,l){t=s;const o={};l&4&&(o.album=t[6]),n.$set(o)},i(s){a||(Le(n.$$.fragment,s),a=!0)},o(s){Me(n.$$.fragment,s),a=!1},d(s){s&&G(r),et(n,s)}}}function vo(e){let t,r,n,a,s,l,o,f,d,g,y,E,S,c=[],p=new Map,b,A,_,k=e[2];const R=P=>P[6].folderName;for(let P=0;P<k.length;P+=1){let m=kr(e,k,P),O=R(m);p.set(O,c[P]=Ir(O,m))}return{c(){t=Z("div"),r=Z("div"),n=Z("select"),a=Z("option"),s=be("Alle Alben"),l=Z("option"),o=be("Deutsche Alben"),f=Z("option"),d=be("Russische Alben"),g=ve(),y=Z("input"),E=ve(),S=Z("div");for(let P=0;P<c.length;P+=1)c[P].c();this.h()},l(P){t=Q(P,"DIV",{class:!0});var m=ee(t);r=Q(m,"DIV",{class:!0});var O=ee(r);n=Q(O,"SELECT",{class:!0});var M=ee(n);a=Q(M,"OPTION",{});var z=ee(a);s=we(z,"Alle Alben"),z.forEach(G),l=Q(M,"OPTION",{});var F=ee(l);o=we(F,"Deutsche Alben"),F.forEach(G),f=Q(M,"OPTION",{});var C=ee(f);d=we(C,"Russische Alben"),C.forEach(G),M.forEach(G),g=_e(O),y=Q(O,"INPUT",{class:!0,placeholder:!0,type:!0}),O.forEach(G),E=_e(m),S=Q(m,"DIV",{class:!0});var q=ee(S);for(let J=0;J<c.length;J+=1)c[J].l(q);q.forEach(G),m.forEach(G),this.h()},h(){a.__value="all",a.value=a.__value,l.__value="german",l.value=l.__value,f.__value="russian",f.value=f.__value,H(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Nt(()=>e[4].call(n)),H(y,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),H(y,"placeholder","Suche"),H(y,"type","search"),H(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),H(S,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),H(t,"class","flex-1 flex flex-col overflow-hidden")},m(P,m){Ae(P,t,m),$(t,r),$(r,n),$(n,a),$(a,s),$(n,l),$(l,o),$(n,f),$(f,d),ht(n,e[1]),$(r,g),$(r,y),ft(y,e[0]),$(t,E),$(t,S);for(let O=0;O<c.length;O+=1)c[O].m(S,null);b=!0,A||(_=[Be(n,"change",e[4]),Be(y,"input",e[5])],A=!0)},p(P,[m]){m&2&&ht(n,P[1]),m&1&&ft(y,P[0]),m&4&&(k=P[2],Mt(),c=bn(c,m,R,1,P,k,p,S,wn,Ir,null,kr),Ut())},i(P){if(!b){for(let m=0;m<k.length;m+=1)Le(c[m]);b=!0}},o(P){for(let m=0;m<c.length;m+=1)Me(c[m]);b=!1},d(P){P&&G(t);for(let m=0;m<c.length;m+=1)c[m].d();A=!1,Zt(_)}}}function _o(e,t,r){let n;Ge(e,At,d=>r(3,n=d));let a=[],s="",l="all";function o(){l=zt(this),r(1,l)}function f(){s=this.value,r(0,s)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else throw new Error("No album selected.");r(2,a=d.filter(g=>s.toLocaleLowerCase().split(" ").every(y=>g.name.toLocaleLowerCase().includes(y))).sort((g,y)=>g.name>y.name?1:-1))}},[s,l,a,n,o,f]}class Eo extends ot{constructor(t){super(),at(this,t,_o,vo,st,{})}}function Br(e,t,r){const n=e.slice();return n[19]=t[r],n}function Or(e,t,r){const n=e.slice();return n[22]=t[r],n}function Rr(e){let t,r,n,a,s,l=e[3],o=[];for(let f=0;f<l.length;f+=1)o[f]=Tr(Or(e,l,f));return{c(){t=Z("select"),r=Z("option"),n=be("Alle Lieder");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){t=Q(f,"SELECT",{class:!0});var d=ee(t);r=Q(d,"OPTION",{});var g=ee(r);n=we(g,"Alle Lieder"),g.forEach(G);for(let y=0;y<o.length;y+=1)o[y].l(d);d.forEach(G),this.h()},h(){r.__value=null,r.value=r.__value,H(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Nt(()=>e[16].call(t))},m(f,d){Ae(f,t,d),$(t,r),$(r,n);for(let g=0;g<o.length;g+=1)o[g].m(t,null);ht(t,e[2]),a||(s=Be(t,"change",e[16]),a=!0)},p(f,d){if(d&8){l=f[3];let g;for(g=0;g<l.length;g+=1){const y=Or(f,l,g);o[g]?o[g].p(y,d):(o[g]=Tr(y),o[g].c(),o[g].m(t,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=l.length}d&12&&ht(t,f[2])},d(f){f&&G(t),Qt(o,f),a=!1,s()}}}function Tr(e){let t,r=e[22].name+"",n,a;return{c(){t=Z("option"),n=be(r),this.h()},l(s){t=Q(s,"OPTION",{});var l=ee(t);n=we(l,r),l.forEach(G),this.h()},h(){t.__value=a=e[22],t.value=t.__value},m(s,l){Ae(s,t,l),$(t,n)},p(s,l){l&8&&r!==(r=s[22].name+"")&&ct(n,r),l&8&&a!==(a=s[22])&&(t.__value=a,t.value=t.__value)},d(s){s&&G(t)}}}function Pr(e){let t,r;return{c(){t=Z("span"),r=be("download"),this.h()},l(n){t=Q(n,"SPAN",{class:!0});var a=ee(t);r=we(a,"download"),a.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined")},m(n,a){Ae(n,t,a),$(t,r)},d(n){n&&G(t)}}}function Lr(e){var S;let t,r,n=e[19].name+"",a,s,l=(S=e[4])==null?void 0:S.includes(We(e[19].link)),o,f,d,g,y=l&&Pr();function E(){return e[18](e[19])}return{c(){t=Z("li"),r=Z("p"),a=be(n),s=ve(),y&&y.c(),o=ve(),this.h()},l(c){t=Q(c,"LI",{class:!0});var p=ee(t);r=Q(p,"P",{class:!0});var b=ee(r);a=we(b,n),b.forEach(G),s=_e(p),y&&y.l(p),o=_e(p),p.forEach(G),this.h()},h(){H(r,"class","flex-1 hover:underline"),H(t,"class",f=`cursor-pointer flex ${e[19]===e[6].song?"font-bold":""}`)},m(c,p){Ae(c,t,p),$(t,r),$(r,a),$(t,s),y&&y.m(t,null),$(t,o),d||(g=Be(t,"click",E),d=!0)},p(c,p){var b;e=c,p&32&&n!==(n=e[19].name+"")&&ct(a,n),p&48&&(l=(b=e[4])==null?void 0:b.includes(We(e[19].link))),l?y||(y=Pr(),y.c(),y.m(t,o)):y&&(y.d(1),y=null),p&96&&f!==(f=`cursor-pointer flex ${e[19]===e[6].song?"font-bold":""}`)&&H(t,"class",f)},d(c){c&&G(t),y&&y.d(),d=!1,g()}}}function So(e){let t,r,n,a,s,l,o,f,d,g,y,E,S,c,p,b,A,_,k,R,P=e[3]&&Rr(e),m=e[5],O=[];for(let M=0;M<m.length;M+=1)O[M]=Lr(Br(e,m,M));return{c(){t=Z("div"),r=Z("div"),n=Z("select"),a=Z("option"),s=be("Alle Lieder"),l=Z("option"),o=be("Favoriten"),f=Z("option"),d=be("Heruntergeladene Lieder"),g=Z("option"),y=be("Deutsche Lieder"),E=Z("option"),S=be("Russische Lieder"),c=ve(),P&&P.c(),p=ve(),b=Z("input"),A=ve(),_=Z("ul");for(let M=0;M<O.length;M+=1)O[M].c();this.h()},l(M){t=Q(M,"DIV",{class:!0});var z=ee(t);r=Q(z,"DIV",{class:!0});var F=ee(r);n=Q(F,"SELECT",{class:!0});var C=ee(n);a=Q(C,"OPTION",{});var q=ee(a);s=we(q,"Alle Lieder"),q.forEach(G),l=Q(C,"OPTION",{});var J=ee(l);o=we(J,"Favoriten"),J.forEach(G),f=Q(C,"OPTION",{});var ne=ee(f);d=we(ne,"Heruntergeladene Lieder"),ne.forEach(G),g=Q(C,"OPTION",{});var ae=ee(g);y=we(ae,"Deutsche Lieder"),ae.forEach(G),E=Q(C,"OPTION",{});var ce=ee(E);S=we(ce,"Russische Lieder"),ce.forEach(G),C.forEach(G),c=_e(F),P&&P.l(F),p=_e(F),b=Q(F,"INPUT",{class:!0,placeholder:!0,type:!0}),F.forEach(G),A=_e(z),_=Q(z,"UL",{class:!0});var de=ee(_);for(let ge=0;ge<O.length;ge+=1)O[ge].l(de);de.forEach(G),z.forEach(G),this.h()},h(){a.__value=e[7],a.value=a.__value,l.__value=e[8],l.value=l.__value,f.__value=e[9],f.value=f.__value,g.__value=e[10],g.value=g.__value,E.__value=e[11],E.value=E.__value,H(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Nt(()=>e[15].call(n)),H(b,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),H(b,"placeholder","Suche"),H(b,"type","search"),H(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),H(_,"class","flex-1 overflow-auto mx-2"),H(t,"class","flex-1 flex flex-col justify-center")},m(M,z){Ae(M,t,z),$(t,r),$(r,n),$(n,a),$(a,s),$(n,l),$(l,o),$(n,f),$(f,d),$(n,g),$(g,y),$(n,E),$(E,S),ht(n,e[1]),$(r,c),P&&P.m(r,null),$(r,p),$(r,b),ft(b,e[0]),$(t,A),$(t,_);for(let F=0;F<O.length;F+=1)O[F].m(_,null);k||(R=[Be(n,"change",e[15]),Be(b,"input",e[17])],k=!0)},p(M,[z]){if(z&3970&&ht(n,M[1]),M[3]?P?P.p(M,z):(P=Rr(M),P.c(),P.m(r,p)):P&&(P.d(1),P=null),z&1&&ft(b,M[0]),z&4208){m=M[5];let F;for(F=0;F<m.length;F+=1){const C=Br(M,m,F);O[F]?O[F].p(C,z):(O[F]=Lr(C),O[F].c(),O[F].m(_,null))}for(;F<O.length;F+=1)O[F].d(1);O.length=m.length}},i:Ue,o:Ue,d(M){M&&G(t),P&&P.d(),Qt(O,M),k=!1,Zt(R)}}}function Ao(e,t,r){let n,a,s,l;Ge(e,At,m=>r(14,s=m)),Ge(e,He,m=>r(6,l=m));let o="";const f={getSongs:m=>Vt(m)},d={getSongs:m=>Vt(m).filter(O=>Xt(O.link))},g={getSongs:m=>Vt(m).filter(O=>c.includes(We(O.link)))},y={getAlbums:m=>m.german,getSongs:m=>m.german.flatMap(O=>O.songs)},E={getAlbums:m=>m.russian,getSongs:m=>m.russian.flatMap(O=>O.songs)};let S=f,c,p=null,b;async function A(m){const O=b.indexOf(m);St(null,b,O)}function _(){S=zt(this),r(1,S),r(11,E),r(10,y),r(9,g),r(8,d),r(7,f)}function k(){p=zt(this),r(2,p),r(3,n),r(1,S),r(14,s),r(3,n),r(1,S),r(14,s)}function R(){o=this.value,r(0,o)}const P=m=>A(m);e.$$.update=()=>{e.$$.dirty&16386&&r(3,n=S.getAlbums==null?null:S.getAlbums(s)),e.$$.dirty&12&&p&&(!n||!n.includes(p))&&r(2,p=null),e.$$.dirty&16390&&(p?r(13,b=p.songs.sort((m,O)=>m.name>O.name?1:-1)):r(13,b=S.getSongs(s).sort((m,O)=>m.name>O.name?1:-1))),e.$$.dirty&8193&&r(5,a=b.filter(m=>o.toLocaleLowerCase().split(" ").every(O=>m.name.toLocaleLowerCase().includes(O))))};{async function m(){r(4,c=await Qi())}m()}return[o,S,p,n,c,a,l,f,d,g,y,E,A,b,s,_,k,R,P]}class ko extends ot{constructor(t){super(),at(this,t,Ao,So,st,{})}}function Io(e){let t,r;return{c(){t=Z("a"),r=be("lyrics"),this.h()},l(n){t=Q(n,"A",{class:!0,href:!0});var a=ee(t);r=we(a,"lyrics"),a.forEach(G),this.h()},h(){H(t,"class","material-symbols-outlined btn btn-sm btn-circle"),H(t,"href","/")},m(n,a){Ae(n,t,a),$(t,r)},p:Ue,d(n){n&&G(t)}}}function Bo(e){let t,r;return t=new Eo({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Oo(e){let t,r;return t=new ko({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Ro(e){let t,r,n,a,s,l,o,f,d,g,y,E,S,c,p,b;r=new Cr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Io]},$$scope:{ctx:e}}});const A=[Oo,Bo],_=[];function k(R,P){return R[0].url.hash===""?0:R[0].url.hash==="#alben"?1:-1}return~(c=k(e))&&(p=_[c]=A[c](e)),{c(){t=Z("div"),Xe(r.$$.fragment),n=ve(),a=Z("div"),s=Z("a"),l=be("Lieder"),f=ve(),d=Z("a"),g=be("Alben"),E=ve(),S=Z("div"),p&&p.c(),this.h()},l(R){t=Q(R,"DIV",{class:!0});var P=ee(t);Ze(r.$$.fragment,P),n=_e(P),a=Q(P,"DIV",{class:!0});var m=ee(a);s=Q(m,"A",{class:!0,href:!0});var O=ee(s);l=we(O,"Lieder"),O.forEach(G),f=_e(m),d=Q(m,"A",{class:!0,href:!0});var M=ee(d);g=we(M,"Alben"),M.forEach(G),m.forEach(G),E=_e(P),S=Q(P,"DIV",{class:!0});var z=ee(S);p&&p.l(z),z.forEach(G),P.forEach(G),this.h()},h(){H(s,"class",o=`tab ${e[0].url.hash===""?"tab-active":""}`),H(s,"href","/music"),H(d,"class",y=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),H(d,"href","/music#alben"),H(a,"class","tabs justify-center"),H(S,"class","flex-1 flex overflow-auto p-1"),H(t,"class","flex-1 flex flex-col overflow-hidden")},m(R,P){Ae(R,t,P),Qe(r,t,null),$(t,n),$(t,a),$(a,s),$(s,l),$(a,f),$(a,d),$(d,g),$(t,E),$(t,S),~c&&_[c].m(S,null),b=!0},p(R,[P]){const m={};P&2&&(m.$$scope={dirty:P,ctx:R}),r.$set(m),(!b||P&1&&o!==(o=`tab ${R[0].url.hash===""?"tab-active":""}`))&&H(s,"class",o),(!b||P&1&&y!==(y=`tab ${R[0].url.hash==="#alben"?"tab-active":""}`))&&H(d,"class",y);let O=c;c=k(R),c!==O&&(p&&(Mt(),Me(_[O],1,1,()=>{_[O]=null}),Ut()),~c?(p=_[c],p||(p=_[c]=A[c](R),p.c()),Le(p,1),p.m(S,null)):p=null)},i(R){b||(Le(r.$$.fragment,R),Le(p),b=!0)},o(R){Me(r.$$.fragment,R),Me(p),b=!1},d(R){R&&G(t),et(r),~c&&_[c].d()}}}function To(e,t,r){let n;return Ge(e,Ur,a=>r(0,n=a)),[n]}class Po extends ot{constructor(t){super(),at(this,t,To,Ro,st,{})}}function Lo(e){let t,r;return t=new po({props:{album:e[2]()}}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function jo(e){let t,r;return t=new Po({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Le(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function jr(e){let t,r,n,a,s=e[1].isLoading&&Mr();return n=new so({}),{c(){s&&s.c(),t=ve(),r=Z("div"),Xe(n.$$.fragment),this.h()},l(l){s&&s.l(l),t=_e(l),r=Q(l,"DIV",{class:!0});var o=ee(r);Ze(n.$$.fragment,o),o.forEach(G),this.h()},h(){H(r,"class","self-center mb-2 w-full")},m(l,o){s&&s.m(l,o),Ae(l,t,o),Ae(l,r,o),Qe(n,r,null),a=!0},p(l,o){l[1].isLoading?s||(s=Mr(),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(l){a||(Le(n.$$.fragment,l),a=!0)},o(l){Me(n.$$.fragment,l),a=!1},d(l){s&&s.d(l),l&&G(t),l&&G(r),et(n)}}}function Mr(e){let t;return{c(){t=Z("progress"),this.h()},l(r){t=Q(r,"PROGRESS",{class:!0}),ee(t).forEach(G),this.h()},h(){H(t,"class","progress w-56 self-center mb-2")},m(r,n){Ae(r,t,n)},d(r){r&&G(t)}}}function Mo(e){let t,r,n,a,s,l,o;const f=[jo,Lo],d=[];function g(E,S){return S&1&&(n=null),E[0].url.hash===""||E[0].url.hash==="#alben"?0:(n==null&&(n=!!E[0].url.hash.startsWith("#album")),n?1:-1)}~(a=g(e,-1))&&(s=d[a]=f[a](e));let y=(e[1].src!=null||e[1].isLoading)&&jr(e);return{c(){t=Z("div"),r=Z("main"),s&&s.c(),l=ve(),y&&y.c(),this.h()},l(E){t=Q(E,"DIV",{class:!0});var S=ee(t);r=Q(S,"MAIN",{class:!0});var c=ee(r);s&&s.l(c),c.forEach(G),l=_e(S),y&&y.l(S),S.forEach(G),this.h()},h(){H(r,"class","overflow-auto flex-1 flex flex-col"),H(t,"class","w-full h-full flex flex-col")},m(E,S){Ae(E,t,S),$(t,r),~a&&d[a].m(r,null),$(t,l),y&&y.m(t,null),o=!0},p(E,[S]){let c=a;a=g(E,S),a===c?~a&&d[a].p(E,S):(s&&(Mt(),Me(d[c],1,1,()=>{d[c]=null}),Ut()),~a?(s=d[a],s?s.p(E,S):(s=d[a]=f[a](E),s.c()),Le(s,1),s.m(r,null)):s=null),E[1].src!=null||E[1].isLoading?y?(y.p(E,S),S&2&&Le(y,1)):(y=jr(E),y.c(),Le(y,1),y.m(t,null)):y&&(Mt(),Me(y,1,1,()=>{y=null}),Ut())},i(E){o||(Le(s),Le(y),o=!0)},o(E){Me(s),Me(y),o=!1},d(E){E&&G(t),~a&&d[a].d(),y&&y.d()}}}function Uo(e,t,r){let n,a;Ge(e,Ur,l=>r(0,n=l)),Ge(e,He,l=>r(1,a=l)),xt(async()=>{vn()&&(Ct.getGlobalApi().userAgent=null);let l;return"wakeLock"in navigator&&(l=await navigator.wakeLock.request("screen")),Hi().then(At.set),navigator.onLine&&await eo().then(async o=>{At.set(o),await Ki(o)}),()=>{l.release()}});function s(){return decodeURI(n.url.hash.substring(7))}return[n,a,s]}class Fo extends ot{constructor(t){super(),at(this,t,Uo,Mo,st,{})}}export{Fo as default};
