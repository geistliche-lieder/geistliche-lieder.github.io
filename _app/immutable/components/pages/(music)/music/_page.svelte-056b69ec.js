import{S as lt,i as ut,s as ft,k as se,v as Ze,a as Ie,l as le,m as ce,w as Qe,c as Be,h as Z,n as J,b as _e,x as et,F as oe,f as Pe,t as Me,y as tt,J as wr,G as Te,o as Wt,q as Ce,r as De,K as rt,A as qe,u as Lt,L as at,M as rn,N as Ot,g as qt,O as nn,d as Vt,e as Qt,P as on,Q as an}from"../../../../chunks/index-ff889d6b.js";import{p as vr}from"../../../../chunks/stores-02419a59.js";import{T as _r,i as sn}from"../../../../chunks/TitleBar-cb32f0f0.js";import{c as ot,d as _t,e as Rt,i as mt}from"../../../../chunks/store-75269b13.js";const ln=(e,t)=>t.some(r=>e instanceof r);let er,tr;function un(){return er||(er=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fn(){return tr||(tr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Er=new WeakMap,Ct=new WeakMap,Sr=new WeakMap,Pt=new WeakMap,zt=new WeakMap;function cn(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",l)},s=()=>{r(ze(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Er.set(r,e)}).catch(()=>{}),zt.set(t,e),t}function hn(e){if(Ct.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",l),e.removeEventListener("abort",l)},s=()=>{r(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",l),e.addEventListener("abort",l)});Ct.set(e,t)}let Dt={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Ct.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Sr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ze(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function dn(e){Dt=e(Dt)}function pn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Mt(this),t,...r);return Sr.set(n,t.sort?t.sort():[t]),ze(n)}:fn().includes(e)?function(...t){return e.apply(Mt(this),t),ze(Er.get(this))}:function(...t){return ze(e.apply(Mt(this),t))}}function yn(e){return typeof e=="function"?pn(e):(e instanceof IDBTransaction&&hn(e),ln(e,un())?new Proxy(e,Dt):e)}function ze(e){if(e instanceof IDBRequest)return cn(e);if(Pt.has(e))return Pt.get(e);const t=yn(e);return t!==e&&(Pt.set(e,t),zt.set(t,e)),t}const Mt=e=>zt.get(e);function gn(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const l=indexedDB.open(e,t),o=ze(l);return n&&l.addEventListener("upgradeneeded",f=>{n(ze(l.result),f.oldVersion,f.newVersion,ze(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const bn=["get","getKey","getAll","getAllKeys","count"],mn=["put","add","delete","clear"],Ut=new Map;function rr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ut.get(t))return Ut.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=mn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||bn.includes(r)))return;const s=async function(l,...o){const f=this.transaction(l,a?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&f.done]))[0]};return Ut.set(t,s),s}dn(e=>({...e,get:(t,r,n)=>rr(t,r)||e.get(t,r,n),has:(t,r)=>!!rr(t,r)||e.has(t,r)}));var wn=Object.create,Gt=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,_n=Object.getOwnPropertyNames,En=Object.getPrototypeOf,Sn=Object.prototype.hasOwnProperty,An=e=>Gt(e,"__esModule",{value:!0}),kn=(e,t)=>()=>(e&&(t=e(e=0)),t),ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),In=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of _n(t))!Sn.call(e,a)&&(r||a!=="default")&&Gt(e,a,{get:()=>t[a],enumerable:!(n=vn(t,a))||n.enumerable});return e},Ue=(e,t)=>In(An(Gt(e!=null?wn(En(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Bn=ee(e=>{K(),e.byteLength=f,e.toByteArray=p,e.fromByteArray=v;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=a.length;s<l;++s)t[s]=a[s],r[a.charCodeAt(s)]=s;var s,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(h){var y=h.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=h.indexOf("=");_===-1&&(_=y);var A=_===y?0:4-_%4;return[_,A]}function f(h){var y=o(h),_=y[0],A=y[1];return(_+A)*3/4-A}function d(h,y,_){return(y+_)*3/4-_}function p(h){var y,_=o(h),A=_[0],E=_[1],B=new n(d(h,A,E)),R=0,M=E>0?A-4:A,S;for(S=0;S<M;S+=4)y=r[h.charCodeAt(S)]<<18|r[h.charCodeAt(S+1)]<<12|r[h.charCodeAt(S+2)]<<6|r[h.charCodeAt(S+3)],B[R++]=y>>16&255,B[R++]=y>>8&255,B[R++]=y&255;return E===2&&(y=r[h.charCodeAt(S)]<<2|r[h.charCodeAt(S+1)]>>4,B[R++]=y&255),E===1&&(y=r[h.charCodeAt(S)]<<10|r[h.charCodeAt(S+1)]<<4|r[h.charCodeAt(S+2)]>>2,B[R++]=y>>8&255,B[R++]=y&255),B}function g(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function b(h,y,_){for(var A,E=[],B=y;B<_;B+=3)A=(h[B]<<16&16711680)+(h[B+1]<<8&65280)+(h[B+2]&255),E.push(g(A));return E.join("")}function v(h){for(var y,_=h.length,A=_%3,E=[],B=16383,R=0,M=_-A;R<M;R+=B)E.push(b(h,R,R+B>M?M:R+B));return A===1?(y=h[_-1],E.push(t[y>>2]+t[y<<4&63]+"==")):A===2&&(y=(h[_-2]<<8)+h[_-1],E.push(t[y>>10]+t[y>>4&63]+t[y<<2&63]+"=")),E.join("")}}),On=ee(e=>{K(),e.read=function(t,r,n,a,s){var l,o,f=s*8-a-1,d=(1<<f)-1,p=d>>1,g=-7,b=n?s-1:0,v=n?-1:1,h=t[r+b];for(b+=v,l=h&(1<<-g)-1,h>>=-g,g+=f;g>0;l=l*256+t[r+b],b+=v,g-=8);for(o=l&(1<<-g)-1,l>>=-g,g+=a;g>0;o=o*256+t[r+b],b+=v,g-=8);if(l===0)l=1-p;else{if(l===d)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-p}return(h?-1:1)*o*Math.pow(2,l-a)},e.write=function(t,r,n,a,s,l){var o,f,d,p=l*8-s-1,g=(1<<p)-1,b=g>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:l-1,y=a?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=g):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+b>=1?r+=v/d:r+=v*Math.pow(2,1-b),r*d>=2&&(o++,d/=2),o+b>=g?(f=0,o=g):o+b>=1?(f=(r*d-1)*Math.pow(2,s),o=o+b):(f=r*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=f&255,h+=y,f/=256,s-=8);for(o=o<<s|f,p+=s;p>0;t[n+h]=o&255,h+=y,o/=256,p-=8);t[n+h-y]|=_*128}}),At=ee(e=>{K();var t=Bn(),r=On(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;var a=2147483647;e.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,c){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(i)}return f(i,u,c)}o.poolSize=8192;function f(i,u,c){if(typeof i=="string")return b(i,u);if(ArrayBuffer.isView(i))return h(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Re(i,ArrayBuffer)||i&&Re(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Re(i,SharedArrayBuffer)||i&&Re(i.buffer,SharedArrayBuffer)))return y(i,u,c);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let k=i.valueOf&&i.valueOf();if(k!=null&&k!==i)return o.from(k,u,c);let T=_(i);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,c){return f(i,u,c)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function p(i,u,c){return d(i),i<=0?l(i):u!==void 0?typeof c=="string"?l(i).fill(u,c):l(i).fill(u):l(i)}o.alloc=function(i,u,c){return p(i,u,c)};function g(i){return d(i),l(i<0?0:A(i)|0)}o.allocUnsafe=function(i){return g(i)},o.allocUnsafeSlow=function(i){return g(i)};function b(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let c=B(i,u)|0,k=l(c),T=k.write(i,u);return T!==c&&(k=k.slice(0,T)),k}function v(i){let u=i.length<0?0:A(i.length)|0,c=l(u);for(let k=0;k<u;k+=1)c[k]=i[k]&255;return c}function h(i){if(Re(i,Uint8Array)){let u=new Uint8Array(i);return y(u.buffer,u.byteOffset,u.byteLength)}return v(i)}function y(i,u,c){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let k;return u===void 0&&c===void 0?k=new Uint8Array(i):c===void 0?k=new Uint8Array(i,u):k=new Uint8Array(i,u,c),Object.setPrototypeOf(k,o.prototype),k}function _(i){if(o.isBuffer(i)){let u=A(i.length)|0,c=l(u);return c.length===0||i.copy(c,0,0,u),c}if(i.length!==void 0)return typeof i.length!="number"||dt(i.length)?l(0):v(i);if(i.type==="Buffer"&&Array.isArray(i.data))return v(i.data)}function A(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return i|0}function E(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Re(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Re(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let c=i.length,k=u.length;for(let T=0,x=Math.min(c,k);T<x;++T)if(i[T]!==u[T]){c=i[T],k=u[T];break}return c<k?-1:k<c?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let c;if(u===void 0)for(u=0,c=0;c<i.length;++c)u+=i[c].length;let k=o.allocUnsafe(u),T=0;for(c=0;c<i.length;++c){let x=i[c];if(Re(x,Uint8Array))T+x.length>k.length?(o.isBuffer(x)||(x=o.from(x)),x.copy(k,T)):Uint8Array.prototype.set.call(k,x,T);else if(o.isBuffer(x))x.copy(k,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=x.length}return k};function B(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Re(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let c=i.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&c===0)return 0;let T=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return ye(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Fe(i).length;default:if(T)return k?-1:ye(i).length;u=(""+u).toLowerCase(),T=!0}}o.byteLength=B;function R(i,u,c){let k=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return ve(this,u,c);case"utf8":case"utf-8":return re(this,u,c);case"ascii":return he(this,u,c);case"latin1":case"binary":return me(this,u,c);case"base64":return H(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,u,c);default:if(k)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),k=!0}}o.prototype._isBuffer=!0;function M(i,u,c){let k=i[u];i[u]=i[c],i[c]=k}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)M(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)M(this,u,u+3),M(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)M(this,u,u+7),M(this,u+1,u+6),M(this,u+2,u+5),M(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?re(this,0,i):R.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,c,k,T){if(Re(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),c===void 0&&(c=i?i.length:0),k===void 0&&(k=0),T===void 0&&(T=this.length),u<0||c>i.length||k<0||T>this.length)throw new RangeError("out of range index");if(k>=T&&u>=c)return 0;if(k>=T)return-1;if(u>=c)return 1;if(u>>>=0,c>>>=0,k>>>=0,T>>>=0,this===i)return 0;let x=T-k,W=c-u,ge=Math.min(x,W),ke=this.slice(k,T),we=i.slice(u,c);for(let be=0;be<ge;++be)if(ke[be]!==we[be]){x=ke[be],W=we[be];break}return x<W?-1:W<x?1:0};function S(i,u,c,k,T){if(i.length===0)return-1;if(typeof c=="string"?(k=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,dt(c)&&(c=T?0:i.length-1),c<0&&(c=i.length+c),c>=i.length){if(T)return-1;c=i.length-1}else if(c<0)if(T)c=0;else return-1;if(typeof u=="string"&&(u=o.from(u,k)),o.isBuffer(u))return u.length===0?-1:j(i,u,c,k,T);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(i,u,c):Uint8Array.prototype.lastIndexOf.call(i,u,c):j(i,[u],c,k,T);throw new TypeError("val must be string, number or Buffer")}function j(i,u,c,k,T){let x=1,W=i.length,ge=u.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(i.length<2||u.length<2)return-1;x=2,W/=2,ge/=2,c/=2}function ke(be,Ee){return x===1?be[Ee]:be.readUInt16BE(Ee*x)}let we;if(T){let be=-1;for(we=c;we<W;we++)if(ke(i,we)===ke(u,be===-1?0:we-be)){if(be===-1&&(be=we),we-be+1===ge)return be*x}else be!==-1&&(we-=we-be),be=-1}else for(c+ge>W&&(c=W-ge),we=c;we>=0;we--){let be=!0;for(let Ee=0;Ee<ge;Ee++)if(ke(i,we+Ee)!==ke(u,Ee)){be=!1;break}if(be)return we}return-1}o.prototype.includes=function(i,u,c){return this.indexOf(i,u,c)!==-1},o.prototype.indexOf=function(i,u,c){return S(this,i,u,c,!0)},o.prototype.lastIndexOf=function(i,u,c){return S(this,i,u,c,!1)};function C(i,u,c,k){c=Number(c)||0;let T=i.length-c;k?(k=Number(k),k>T&&(k=T)):k=T;let x=u.length;k>x/2&&(k=x/2);let W;for(W=0;W<k;++W){let ge=parseInt(u.substr(W*2,2),16);if(dt(ge))return W;i[c+W]=ge}return W}function z(i,u,c,k){return Ve(ye(u,i.length-c),i,c,k)}function V(i,u,c,k){return Ve(ae(u),i,c,k)}function D(i,u,c,k){return Ve(Fe(u),i,c,k)}function q(i,u,c,k){return Ve(P(u,i.length-c),i,c,k)}o.prototype.write=function(i,u,c,k){if(u===void 0)k="utf8",c=this.length,u=0;else if(c===void 0&&typeof u=="string")k=u,c=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(c)?(c=c>>>0,k===void 0&&(k="utf8")):(k=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let T=this.length-u;if((c===void 0||c>T)&&(c=T),i.length>0&&(c<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let x=!1;for(;;)switch(k){case"hex":return C(this,i,u,c);case"utf8":case"utf-8":return z(this,i,u,c);case"ascii":case"latin1":case"binary":return V(this,i,u,c);case"base64":return D(this,i,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,i,u,c);default:if(x)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),x=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(i,u,c){return u===0&&c===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(u,c))}function re(i,u,c){c=Math.min(i.length,c);let k=[],T=u;for(;T<c;){let x=i[T],W=null,ge=x>239?4:x>223?3:x>191?2:1;if(T+ge<=c){let ke,we,be,Ee;switch(ge){case 1:x<128&&(W=x);break;case 2:ke=i[T+1],(ke&192)===128&&(Ee=(x&31)<<6|ke&63,Ee>127&&(W=Ee));break;case 3:ke=i[T+1],we=i[T+2],(ke&192)===128&&(we&192)===128&&(Ee=(x&15)<<12|(ke&63)<<6|we&63,Ee>2047&&(Ee<55296||Ee>57343)&&(W=Ee));break;case 4:ke=i[T+1],we=i[T+2],be=i[T+3],(ke&192)===128&&(we&192)===128&&(be&192)===128&&(Ee=(x&15)<<18|(ke&63)<<12|(we&63)<<6|be&63,Ee>65535&&Ee<1114112&&(W=Ee))}}W===null?(W=65533,ge=1):W>65535&&(W-=65536,k.push(W>>>10&1023|55296),W=56320|W&1023),k.push(W),T+=ge}return de(k)}var ie=4096;function de(i){let u=i.length;if(u<=ie)return String.fromCharCode.apply(String,i);let c="",k=0;for(;k<u;)c+=String.fromCharCode.apply(String,i.slice(k,k+=ie));return c}function he(i,u,c){let k="";c=Math.min(i.length,c);for(let T=u;T<c;++T)k+=String.fromCharCode(i[T]&127);return k}function me(i,u,c){let k="";c=Math.min(i.length,c);for(let T=u;T<c;++T)k+=String.fromCharCode(i[T]);return k}function ve(i,u,c){let k=i.length;(!u||u<0)&&(u=0),(!c||c<0||c>k)&&(c=k);let T="";for(let x=u;x<c;++x)T+=It[i[x]];return T}function Ae(i,u,c){let k=i.slice(u,c),T="";for(let x=0;x<k.length-1;x+=2)T+=String.fromCharCode(k[x]+k[x+1]*256);return T}o.prototype.slice=function(i,u){let c=this.length;i=~~i,u=u===void 0?c:~~u,i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),u<0?(u+=c,u<0&&(u=0)):u>c&&(u=c),u<i&&(u=i);let k=this.subarray(i,u);return Object.setPrototypeOf(k,o.prototype),k};function fe(i,u,c){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>c)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,c){i=i>>>0,u=u>>>0,c||fe(i,u,this.length);let k=this[i],T=1,x=0;for(;++x<u&&(T*=256);)k+=this[i+x]*T;return k},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,c){i=i>>>0,u=u>>>0,c||fe(i,u,this.length);let k=this[i+--u],T=1;for(;u>0&&(T*=256);)k+=this[i+--u]*T;return k},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||fe(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||fe(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||fe(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=Le(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let k=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,T=this[++i]+this[++i]*2**8+this[++i]*2**16+c*2**24;return BigInt(k)+(BigInt(T)<<BigInt(32))}),o.prototype.readBigUInt64BE=Le(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let k=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],T=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c;return(BigInt(k)<<BigInt(32))+BigInt(T)}),o.prototype.readIntLE=function(i,u,c){i=i>>>0,u=u>>>0,c||fe(i,u,this.length);let k=this[i],T=1,x=0;for(;++x<u&&(T*=256);)k+=this[i+x]*T;return T*=128,k>=T&&(k-=Math.pow(2,8*u)),k},o.prototype.readIntBE=function(i,u,c){i=i>>>0,u=u>>>0,c||fe(i,u,this.length);let k=u,T=1,x=this[i+--k];for(;k>0&&(T*=256);)x+=this[i+--k]*T;return T*=128,x>=T&&(x-=Math.pow(2,8*u)),x},o.prototype.readInt8=function(i,u){return i=i>>>0,u||fe(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||fe(i,2,this.length);let c=this[i]|this[i+1]<<8;return c&32768?c|4294901760:c},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||fe(i,2,this.length);let c=this[i+1]|this[i]<<8;return c&32768?c|4294901760:c},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=Le(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let k=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(c<<24);return(BigInt(k)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=Le(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let k=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(k)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||fe(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||fe(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||fe(i,8,this.length),r.read(this,i,!1,52,8)};function O(i,u,c,k,T,x){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>T||u<x)throw new RangeError('"value" argument is out of bounds');if(c+k>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,c,k){if(i=+i,u=u>>>0,c=c>>>0,!k){let W=Math.pow(2,8*c)-1;O(this,i,u,c,W,0)}let T=1,x=0;for(this[u]=i&255;++x<c&&(T*=256);)this[u+x]=i/T&255;return u+c},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,c,k){if(i=+i,u=u>>>0,c=c>>>0,!k){let W=Math.pow(2,8*c)-1;O(this,i,u,c,W,0)}let T=c-1,x=1;for(this[u+T]=i&255;--T>=0&&(x*=256);)this[u+T]=i/x&255;return u+c},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function U(i,u,c,k,T){ne(u,k,T,i,c,7);let x=Number(u&BigInt(4294967295));i[c++]=x,x=x>>8,i[c++]=x,x=x>>8,i[c++]=x,x=x>>8,i[c++]=x;let W=Number(u>>BigInt(32)&BigInt(4294967295));return i[c++]=W,W=W>>8,i[c++]=W,W=W>>8,i[c++]=W,W=W>>8,i[c++]=W,c}function $(i,u,c,k,T){ne(u,k,T,i,c,7);let x=Number(u&BigInt(4294967295));i[c+7]=x,x=x>>8,i[c+6]=x,x=x>>8,i[c+5]=x,x=x>>8,i[c+4]=x;let W=Number(u>>BigInt(32)&BigInt(4294967295));return i[c+3]=W,W=W>>8,i[c+2]=W,W=W>>8,i[c+1]=W,W=W>>8,i[c]=W,c+8}o.prototype.writeBigUInt64LE=Le(function(i,u=0){return U(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Le(function(i,u=0){return $(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,c,k){if(i=+i,u=u>>>0,!k){let ge=Math.pow(2,8*c-1);O(this,i,u,c,ge-1,-ge)}let T=0,x=1,W=0;for(this[u]=i&255;++T<c&&(x*=256);)i<0&&W===0&&this[u+T-1]!==0&&(W=1),this[u+T]=(i/x>>0)-W&255;return u+c},o.prototype.writeIntBE=function(i,u,c,k){if(i=+i,u=u>>>0,!k){let ge=Math.pow(2,8*c-1);O(this,i,u,c,ge-1,-ge)}let T=c-1,x=1,W=0;for(this[u+T]=i&255;--T>=0&&(x*=256);)i<0&&W===0&&this[u+T+1]!==0&&(W=1),this[u+T]=(i/x>>0)-W&255;return u+c},o.prototype.writeInt8=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=Le(function(i,u=0){return U(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Le(function(i,u=0){return $(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(i,u,c,k,T,x){if(c+k>i.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function pe(i,u,c,k,T){return u=+u,c=c>>>0,T||Y(i,u,c,4),r.write(i,u,c,k,23,4),c+4}o.prototype.writeFloatLE=function(i,u,c){return pe(this,i,u,!0,c)},o.prototype.writeFloatBE=function(i,u,c){return pe(this,i,u,!1,c)};function ue(i,u,c,k,T){return u=+u,c=c>>>0,T||Y(i,u,c,8),r.write(i,u,c,k,52,8),c+8}o.prototype.writeDoubleLE=function(i,u,c){return ue(this,i,u,!0,c)},o.prototype.writeDoubleBE=function(i,u,c){return ue(this,i,u,!1,c)},o.prototype.copy=function(i,u,c,k){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(c||(c=0),!k&&k!==0&&(k=this.length),u>=i.length&&(u=i.length),u||(u=0),k>0&&k<c&&(k=c),k===c||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),i.length-u<k-c&&(k=i.length-u+c);let T=k-c;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,c,k):Uint8Array.prototype.set.call(i,this.subarray(c,k),u),T},o.prototype.fill=function(i,u,c,k){if(typeof i=="string"){if(typeof u=="string"?(k=u,u=0,c=this.length):typeof c=="string"&&(k=c,c=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!o.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(i.length===1){let x=i.charCodeAt(0);(k==="utf8"&&x<128||k==="latin1")&&(i=x)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<c)throw new RangeError("Out of range index");if(c<=u)return this;u=u>>>0,c=c===void 0?this.length:c>>>0,i||(i=0);let T;if(typeof i=="number")for(T=u;T<c;++T)this[T]=i;else{let x=o.isBuffer(i)?i:o.from(i,k),W=x.length;if(W===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(T=0;T<c-u;++T)this[T+u]=x[T%W]}return this};var I={};function L(i,u,c){I[i]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(i,u,c){let k=`The value of "${i}" is out of range.`,T=c;return Number.isInteger(c)&&Math.abs(c)>2**32?T=N(String(c)):typeof c=="bigint"&&(T=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(T=N(T)),T+="n"),k+=` It must be ${u}. Received ${T}`,k},RangeError);function N(i){let u="",c=i.length,k=i[0]==="-"?1:0;for(;c>=k+4;c-=3)u=`_${i.slice(c-3,c)}${u}`;return`${i.slice(0,c)}${u}`}function X(i,u,c){m(u,"offset"),(i[u]===void 0||i[u+c]===void 0)&&w(u,i.length-(c+1))}function ne(i,u,c,k,T,x){if(i>c||i<u){let W=typeof u=="bigint"?"n":"",ge;throw x>3?u===0||u===BigInt(0)?ge=`>= 0${W} and < 2${W} ** ${(x+1)*8}${W}`:ge=`>= -(2${W} ** ${(x+1)*8-1}${W}) and < 2 ** ${(x+1)*8-1}${W}`:ge=`>= ${u}${W} and <= ${c}${W}`,new I.ERR_OUT_OF_RANGE("value",ge,i)}X(k,T,x)}function m(i,u){if(typeof i!="number")throw new I.ERR_INVALID_ARG_TYPE(u,"number",i)}function w(i,u,c){throw Math.floor(i)!==i?(m(i,c),new I.ERR_OUT_OF_RANGE(c||"offset","an integer",i)):u<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${u}`,i)}var F=/[^+/0-9A-Za-z-_]/g;function G(i){if(i=i.split("=")[0],i=i.trim().replace(F,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function ye(i,u){u=u||1/0;let c,k=i.length,T=null,x=[];for(let W=0;W<k;++W){if(c=i.charCodeAt(W),c>55295&&c<57344){if(!T){if(c>56319){(u-=3)>-1&&x.push(239,191,189);continue}else if(W+1===k){(u-=3)>-1&&x.push(239,191,189);continue}T=c;continue}if(c<56320){(u-=3)>-1&&x.push(239,191,189),T=c;continue}c=(T-55296<<10|c-56320)+65536}else T&&(u-=3)>-1&&x.push(239,191,189);if(T=null,c<128){if((u-=1)<0)break;x.push(c)}else if(c<2048){if((u-=2)<0)break;x.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;x.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;x.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return x}function ae(i){let u=[];for(let c=0;c<i.length;++c)u.push(i.charCodeAt(c)&255);return u}function P(i,u){let c,k,T,x=[];for(let W=0;W<i.length&&!((u-=2)<0);++W)c=i.charCodeAt(W),k=c>>8,T=c%256,x.push(T),x.push(k);return x}function Fe(i){return t.toByteArray(G(i))}function Ve(i,u,c,k){let T;for(T=0;T<k&&!(T+c>=u.length||T>=i.length);++T)u[T+c]=i[T];return T}function Re(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function dt(i){return i!==i}var It=function(){let i="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){let k=c*16;for(let T=0;T<16;++T)u[k+T]=i[c]+i[T]}return u}();function Le(i){return typeof BigInt>"u"?pt:i}function pt(){throw new Error("BigInt not supported")}}),Q,te,Ke,K=kn(()=>{Q=Ue(At(),1),te={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},Ke=globalThis}),kt=ee((e,t)=>{K();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(S,j,C){return Function.prototype.apply.call(S,j,C)},a;r&&typeof r.ownKeys=="function"?a=r.ownKeys:Object.getOwnPropertySymbols?a=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:a=function(S){return Object.getOwnPropertyNames(S)};function s(S){console&&console.warn&&console.warn(S)}var l=Number.isNaN||function(S){return S!==S};function o(){o.init.call(this)}t.exports=o,t.exports.once=B,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");f=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function p(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(S){for(var j=[],C=1;C<arguments.length;C++)j.push(arguments[C]);var z=S==="error",V=this._events;if(V!==void 0)z=z&&V.error===void 0;else if(!z)return!1;if(z){var D;if(j.length>0&&(D=j[0]),D instanceof Error)throw D;var q=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw q.context=D,q}var H=V[S];if(H===void 0)return!1;if(typeof H=="function")n(H,this,j);else for(var re=H.length,ie=_(H,re),C=0;C<re;++C)n(ie[C],this,j);return!0};function g(S,j,C,z){var V,D,q;if(d(C),D=S._events,D===void 0?(D=S._events=Object.create(null),S._eventsCount=0):(D.newListener!==void 0&&(S.emit("newListener",j,C.listener?C.listener:C),D=S._events),q=D[j]),q===void 0)q=D[j]=C,++S._eventsCount;else if(typeof q=="function"?q=D[j]=z?[C,q]:[q,C]:z?q.unshift(C):q.push(C),V=p(S),V>0&&q.length>V&&!q.warned){q.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=S,H.type=j,H.count=q.length,s(H)}return S}o.prototype.addListener=function(S,j){return g(this,S,j,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,j){return g(this,S,j,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(S,j,C){var z={fired:!1,wrapFn:void 0,target:S,type:j,listener:C},V=b.bind(z);return V.listener=C,z.wrapFn=V,V}o.prototype.once=function(S,j){return d(j),this.on(S,v(this,S,j)),this},o.prototype.prependOnceListener=function(S,j){return d(j),this.prependListener(S,v(this,S,j)),this},o.prototype.removeListener=function(S,j){var C,z,V,D,q;if(d(j),z=this._events,z===void 0)return this;if(C=z[S],C===void 0)return this;if(C===j||C.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete z[S],z.removeListener&&this.emit("removeListener",S,C.listener||j));else if(typeof C!="function"){for(V=-1,D=C.length-1;D>=0;D--)if(C[D]===j||C[D].listener===j){q=C[D].listener,V=D;break}if(V<0)return this;V===0?C.shift():A(C,V),C.length===1&&(z[S]=C[0]),z.removeListener!==void 0&&this.emit("removeListener",S,q||j)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var j,C,z;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[S]),this;if(arguments.length===0){var V=Object.keys(C),D;for(z=0;z<V.length;++z)D=V[z],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=C[S],typeof j=="function")this.removeListener(S,j);else if(j!==void 0)for(z=j.length-1;z>=0;z--)this.removeListener(S,j[z]);return this};function h(S,j,C){var z=S._events;if(z===void 0)return[];var V=z[j];return V===void 0?[]:typeof V=="function"?C?[V.listener||V]:[V]:C?E(V):_(V,V.length)}o.prototype.listeners=function(S){return h(this,S,!0)},o.prototype.rawListeners=function(S){return h(this,S,!1)},o.listenerCount=function(S,j){return typeof S.listenerCount=="function"?S.listenerCount(j):y.call(S,j)},o.prototype.listenerCount=y;function y(S){var j=this._events;if(j!==void 0){var C=j[S];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]};function _(S,j){for(var C=new Array(j),z=0;z<j;++z)C[z]=S[z];return C}function A(S,j){for(;j+1<S.length;j++)S[j]=S[j+1];S.pop()}function E(S){for(var j=new Array(S.length),C=0;C<j.length;++C)j[C]=S[C].listener||S[C];return j}function B(S,j){return new Promise(function(C,z){function V(q){S.removeListener(j,D),z(q)}function D(){typeof S.removeListener=="function"&&S.removeListener("error",V),C([].slice.call(arguments))}M(S,j,D,{once:!0}),j!=="error"&&R(S,V,{once:!0})})}function R(S,j,C){typeof S.on=="function"&&M(S,"error",j,C)}function M(S,j,C,z){if(typeof S.on=="function")z.once?S.once(j,C):S.on(j,C);else if(typeof S.addEventListener=="function")S.addEventListener(j,function V(D){z.once&&S.removeEventListener(j,V),C(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}}),Ar=ee((e,t)=>{K(),t.exports=kt().EventEmitter}),kr=ee(()=>{K()}),Rn=ee((e,t)=>{K();function r(h,y){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(h);y&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(h,E).enumerable})),_.push.apply(_,A)}return _}function n(h){for(var y=1;y<arguments.length;y++){var _=arguments[y]!=null?arguments[y]:{};y%2?r(Object(_),!0).forEach(function(A){a(h,A,_[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):r(Object(_)).forEach(function(A){Object.defineProperty(h,A,Object.getOwnPropertyDescriptor(_,A))})}return h}function a(h,y,_){return y in h?Object.defineProperty(h,y,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[y]=_,h}function s(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}function l(h,y){for(var _=0;_<y.length;_++){var A=y[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}function o(h,y,_){return y&&l(h.prototype,y),_&&l(h,_),h}var f=At(),d=f.Buffer,p=kr(),g=p.inspect,b=g&&g.custom||"inspect";function v(h,y,_){d.prototype.copy.call(h,y,_)}t.exports=function(){function h(){s(this,h),this.head=null,this.tail=null,this.length=0}return o(h,[{key:"push",value:function(y){var _={data:y,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(y){var _={data:y,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var _=this.head,A=""+_.data;_=_.next;)A+=y+_.data;return A}},{key:"concat",value:function(y){if(this.length===0)return d.alloc(0);for(var _=d.allocUnsafe(y>>>0),A=this.head,E=0;A;)v(A.data,_,E),E+=A.data.length,A=A.next;return _}},{key:"consume",value:function(y,_){var A;return y<this.head.data.length?(A=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?A=this.shift():A=_?this._getString(y):this._getBuffer(y),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var _=this.head,A=1,E=_.data;for(y-=E.length;_=_.next;){var B=_.data,R=y>B.length?B.length:y;if(R===B.length?E+=B:E+=B.slice(0,y),y-=R,y===0){R===B.length?(++A,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=B.slice(R));break}++A}return this.length-=A,E}},{key:"_getBuffer",value:function(y){var _=d.allocUnsafe(y),A=this.head,E=1;for(A.data.copy(_),y-=A.data.length;A=A.next;){var B=A.data,R=y>B.length?B.length:y;if(B.copy(_,_.length-y,0,R),y-=R,y===0){R===B.length?(++E,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=B.slice(R));break}++E}return this.length-=E,_}},{key:b,value:function(y,_){return g(this,n({},_,{depth:0,customInspect:!1}))}}]),h}()}),Ir=ee((e,t)=>{K();function r(f,d){var p=this,g=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return g||b?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,te.nextTick(l,this,f)):te.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(v){!d&&v?p._writableState?p._writableState.errorEmitted?te.nextTick(a,p):(p._writableState.errorEmitted=!0,te.nextTick(n,p,v)):te.nextTick(n,p,v):d?(te.nextTick(a,p),d(v)):te.nextTick(a,p)}),this)}function n(f,d){l(f,d),a(f)}function a(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var p=f._readableState,g=f._writableState;p&&p.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:s,errorOrDestroy:o}}),ct=ee((e,t)=>{K();function r(d,p){d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p}var n={};function a(d,p,g){g||(g=Error);function b(h,y,_){return typeof p=="string"?p:p(h,y,_)}var v=function(h){r(y,h);function y(_,A,E){return h.call(this,b(_,A,E))||this}return y}(g);v.prototype.name=g.name,v.prototype.code=d,n[d]=v}function s(d,p){if(Array.isArray(d)){var g=d.length;return d=d.map(function(b){return String(b)}),g>2?"one of ".concat(p," ").concat(d.slice(0,g-1).join(", "),", or ")+d[g-1]:g===2?"one of ".concat(p," ").concat(d[0]," or ").concat(d[1]):"of ".concat(p," ").concat(d[0])}else return"of ".concat(p," ").concat(String(d))}function l(d,p,g){return d.substr(!g||g<0?0:+g,p.length)===p}function o(d,p,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-p.length,g)===p}function f(d,p,g){return typeof g!="number"&&(g=0),g+p.length>d.length?!1:d.indexOf(p,g)!==-1}a("ERR_INVALID_OPT_VALUE",function(d,p){return'The value "'+p+'" is invalid for option "'+d+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(d,p,g){var b;typeof p=="string"&&l(p,"not ")?(b="must not be",p=p.replace(/^not /,"")):b="must be";var v;if(o(d," argument"))v="The ".concat(d," ").concat(b," ").concat(s(p,"type"));else{var h=f(d,".")?"property":"argument";v='The "'.concat(d,'" ').concat(h," ").concat(b," ").concat(s(p,"type"))}return v+=". Received type ".concat(typeof g),v},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),Br=ee((e,t)=>{K();var r=ct().codes.ERR_INVALID_OPT_VALUE;function n(s,l,o){return s.highWaterMark!=null?s.highWaterMark:l?s[o]:null}function a(s,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var p=f?o:"highWaterMark";throw new r(p,d)}return Math.floor(d)}return s.objectMode?16:16*1024}t.exports={getHighWaterMark:a}}),He=ee((e,t)=>{K(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}}}),Tn=ee((e,t)=>{K(),t.exports=r;function r(a,s){if(n("noDeprecation"))return a;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(s);n("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return a.apply(this,arguments)}return o}function n(a){try{if(!Ke.localStorage)return!1}catch{return!1}var s=Ke.localStorage[a];return s==null?!1:String(s).toLowerCase()==="true"}}),Or=ee((e,t)=>{K(),t.exports=V;function r(I){var L=this;this.next=null,this.entry=null,this.finish=function(){ue(L,I)}}var n;V.WritableState=C;var a={deprecate:Tn()},s=Ar(),l=At().Buffer,o=Ke.Uint8Array||function(){};function f(I){return l.from(I)}function d(I){return l.isBuffer(I)||I instanceof o}var p=Ir(),g=Br(),b=g.getHighWaterMark,v=ct().codes,h=v.ERR_INVALID_ARG_TYPE,y=v.ERR_METHOD_NOT_IMPLEMENTED,_=v.ERR_MULTIPLE_CALLBACK,A=v.ERR_STREAM_CANNOT_PIPE,E=v.ERR_STREAM_DESTROYED,B=v.ERR_STREAM_NULL_VALUES,R=v.ERR_STREAM_WRITE_AFTER_END,M=v.ERR_UNKNOWN_ENCODING,S=p.errorOrDestroy;He()(V,s);function j(){}function C(I,L,N){n=n||st(),I=I||{},typeof N!="boolean"&&(N=L instanceof n),this.objectMode=!!I.objectMode,N&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=b(this,I,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var X=I.decodeStrings===!1;this.decodeStrings=!X,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){me(L,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}C.prototype.getBuffer=function(){for(var I=this.bufferedRequest,L=[];I;)L.push(I),I=I.next;return L},function(){try{Object.defineProperty(C.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(I){return z.call(this,I)?!0:this!==V?!1:I&&I._writableState instanceof C}})):z=function(I){return I instanceof this};function V(I){n=n||st();var L=this instanceof n;if(!L&&!z.call(V,this))return new V(I);this._writableState=new C(I,this,L),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),s.call(this)}V.prototype.pipe=function(){S(this,new A)};function D(I,L){var N=new R;S(I,N),te.nextTick(L,N)}function q(I,L,N,X){var ne;return N===null?ne=new B:typeof N!="string"&&!L.objectMode&&(ne=new h("chunk",["string","Buffer"],N)),ne?(S(I,ne),te.nextTick(X,ne),!1):!0}V.prototype.write=function(I,L,N){var X=this._writableState,ne=!1,m=!X.objectMode&&d(I);return m&&!l.isBuffer(I)&&(I=f(I)),typeof L=="function"&&(N=L,L=null),m?L="buffer":L||(L=X.defaultEncoding),typeof N!="function"&&(N=j),X.ending?D(this,N):(m||q(this,X,I,N))&&(X.pendingcb++,ne=re(this,X,m,I,L,N)),ne},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&fe(this,I))},V.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new M(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function H(I,L,N){return!I.objectMode&&I.decodeStrings!==!1&&typeof L=="string"&&(L=l.from(L,N)),L}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function re(I,L,N,X,ne,m){if(!N){var w=H(L,X,ne);X!==w&&(N=!0,ne="buffer",X=w)}var F=L.objectMode?1:X.length;L.length+=F;var G=L.length<L.highWaterMark;if(G||(L.needDrain=!0),L.writing||L.corked){var ye=L.lastBufferedRequest;L.lastBufferedRequest={chunk:X,encoding:ne,isBuf:N,callback:m,next:null},ye?ye.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else ie(I,L,!1,F,X,ne,m);return G}function ie(I,L,N,X,ne,m,w){L.writelen=X,L.writecb=w,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new E("write")):N?I._writev(ne,L.onwrite):I._write(ne,m,L.onwrite),L.sync=!1}function de(I,L,N,X,ne){--L.pendingcb,N?(te.nextTick(ne,X),te.nextTick(Y,I,L),I._writableState.errorEmitted=!0,S(I,X)):(ne(X),I._writableState.errorEmitted=!0,S(I,X),Y(I,L))}function he(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}function me(I,L){var N=I._writableState,X=N.sync,ne=N.writecb;if(typeof ne!="function")throw new _;if(he(N),L)de(I,N,X,L,ne);else{var m=O(N)||I.destroyed;!m&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&fe(I,N),X?te.nextTick(ve,I,N,m,ne):ve(I,N,m,ne)}}function ve(I,L,N,X){N||Ae(I,L),L.pendingcb--,X(),Y(I,L)}function Ae(I,L){L.length===0&&L.needDrain&&(L.needDrain=!1,I.emit("drain"))}function fe(I,L){L.bufferProcessing=!0;var N=L.bufferedRequest;if(I._writev&&N&&N.next){var X=L.bufferedRequestCount,ne=new Array(X),m=L.corkedRequestsFree;m.entry=N;for(var w=0,F=!0;N;)ne[w]=N,N.isBuf||(F=!1),N=N.next,w+=1;ne.allBuffers=F,ie(I,L,!0,L.length,ne,"",m.finish),L.pendingcb++,L.lastBufferedRequest=null,m.next?(L.corkedRequestsFree=m.next,m.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;N;){var G=N.chunk,ye=N.encoding,ae=N.callback,P=L.objectMode?1:G.length;if(ie(I,L,!1,P,G,ye,ae),N=N.next,L.bufferedRequestCount--,L.writing)break}N===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=N,L.bufferProcessing=!1}V.prototype._write=function(I,L,N){N(new y("_write()"))},V.prototype._writev=null,V.prototype.end=function(I,L,N){var X=this._writableState;return typeof I=="function"?(N=I,I=null,L=null):typeof L=="function"&&(N=L,L=null),I!=null&&this.write(I,L),X.corked&&(X.corked=1,this.uncork()),X.ending||pe(this,X,N),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function O(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function U(I,L){I._final(function(N){L.pendingcb--,N&&S(I,N),L.prefinished=!0,I.emit("prefinish"),Y(I,L)})}function $(I,L){!L.prefinished&&!L.finalCalled&&(typeof I._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,te.nextTick(U,I,L)):(L.prefinished=!0,I.emit("prefinish")))}function Y(I,L){var N=O(L);if(N&&($(I,L),L.pendingcb===0&&(L.finished=!0,I.emit("finish"),L.autoDestroy))){var X=I._readableState;(!X||X.autoDestroy&&X.endEmitted)&&I.destroy()}return N}function pe(I,L,N){L.ending=!0,Y(I,L),N&&(L.finished?te.nextTick(N):I.once("finish",N)),L.ended=!0,I.writable=!1}function ue(I,L,N){var X=I.entry;for(I.entry=null;X;){var ne=X.callback;L.pendingcb--,ne(N),X=X.next}L.corkedRequestsFree.next=I}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(I){!this._writableState||(this._writableState.destroyed=I)}}),V.prototype.destroy=p.destroy,V.prototype._undestroy=p.undestroy,V.prototype._destroy=function(I,L){L(I)}}),st=ee((e,t)=>{K();var r=Object.keys||function(g){var b=[];for(var v in g)b.push(v);return b};t.exports=f;var n=Rr(),a=Or();for(He()(f,n),s=r(a.prototype),o=0;o<s.length;o++)l=s[o],f.prototype[l]||(f.prototype[l]=a.prototype[l]);var s,l,o;function f(g){if(!(this instanceof f))return new f(g);n.call(this,g),a.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||te.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}),Ln=ee((e,t)=>{K();var r=At(),n=r.Buffer;function a(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(l,o,f){return n(l,o,f)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},s.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),nr=ee(e=>{K();var t=Ln().Buffer,r=t.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(E){if(!E)return"utf8";for(var B;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(B)return;E=(""+E).toLowerCase(),B=!0}}function a(E){var B=n(E);if(typeof B!="string"&&(t.isEncoding===r||!r(E)))throw new Error("Unknown encoding: "+E);return B||E}e.StringDecoder=s;function s(E){this.encoding=a(E);var B;switch(this.encoding){case"utf16le":this.text=b,this.end=v,B=4;break;case"utf8":this.fillLast=d,B=4;break;case"base64":this.text=h,this.end=y,B=3;break;default:this.write=_,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(B)}s.prototype.write=function(E){if(E.length===0)return"";var B,R;if(this.lastNeed){if(B=this.fillLast(E),B===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<E.length?B?B+this.text(E,R):this.text(E,R):B||""},s.prototype.end=g,s.prototype.text=p,s.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function l(E){return E<=127?0:E>>5===6?2:E>>4===14?3:E>>3===30?4:E>>6===2?-1:-2}function o(E,B,R){var M=B.length-1;if(M<R)return 0;var S=l(B[M]);return S>=0?(S>0&&(E.lastNeed=S-1),S):--M<R||S===-2?0:(S=l(B[M]),S>=0?(S>0&&(E.lastNeed=S-2),S):--M<R||S===-2?0:(S=l(B[M]),S>=0?(S>0&&(S===2?S=0:E.lastNeed=S-3),S):0))}function f(E,B,R){if((B[0]&192)!==128)return E.lastNeed=0,"\uFFFD";if(E.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return E.lastNeed=1,"\uFFFD";if(E.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return E.lastNeed=2,"\uFFFD"}}function d(E){var B=this.lastTotal-this.lastNeed,R=f(this,E);if(R!==void 0)return R;if(this.lastNeed<=E.length)return E.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,B,0,E.length),this.lastNeed-=E.length}function p(E,B){var R=o(this,E,B);if(!this.lastNeed)return E.toString("utf8",B);this.lastTotal=R;var M=E.length-(R-this.lastNeed);return E.copy(this.lastChar,0,M),E.toString("utf8",B,M)}function g(E){var B=E&&E.length?this.write(E):"";return this.lastNeed?B+"\uFFFD":B}function b(E,B){if((E.length-B)%2===0){var R=E.toString("utf16le",B);if(R){var M=R.charCodeAt(R.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",B,E.length-1)}function v(E){var B=E&&E.length?this.write(E):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,R)}return B}function h(E,B){var R=(E.length-B)%3;return R===0?E.toString("base64",B):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",B,E.length-R))}function y(E){var B=E&&E.length?this.write(E):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function _(E){return E.toString(this.encoding)}function A(E){return E&&E.length?this.write(E):""}}),Kt=ee((e,t)=>{K();var r=ct().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,p=new Array(d),g=0;g<d;g++)p[g]=arguments[g];o.apply(this,p)}}}function a(){}function s(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||a);var p=f.readable||f.readable!==!1&&o.readable,g=f.writable||f.writable!==!1&&o.writable,b=function(){o.writable||h()},v=o._writableState&&o._writableState.finished,h=function(){g=!1,v=!0,p||d.call(o)},y=o._readableState&&o._readableState.endEmitted,_=function(){p=!1,y=!0,g||d.call(o)},A=function(R){d.call(o,R)},E=function(){var R;if(p&&!y)return(!o._readableState||!o._readableState.ended)&&(R=new r),d.call(o,R);if(g&&!v)return(!o._writableState||!o._writableState.ended)&&(R=new r),d.call(o,R)},B=function(){o.req.on("finish",h)};return s(o)?(o.on("complete",h),o.on("abort",E),o.req?B():o.on("request",B)):g&&!o._writableState&&(o.on("end",b),o.on("close",b)),o.on("end",_),o.on("finish",h),f.error!==!1&&o.on("error",A),o.on("close",E),function(){o.removeListener("complete",h),o.removeListener("abort",E),o.removeListener("request",B),o.req&&o.req.removeListener("finish",h),o.removeListener("end",b),o.removeListener("close",b),o.removeListener("finish",h),o.removeListener("end",_),o.removeListener("error",A),o.removeListener("close",E)}}t.exports=l}),jn=ee((e,t)=>{K();var r;function n(B,R,M){return R in B?Object.defineProperty(B,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):B[R]=M,B}var a=Kt(),s=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function b(B,R){return{value:B,done:R}}function v(B){var R=B[s];if(R!==null){var M=B[g].read();M!==null&&(B[d]=null,B[s]=null,B[l]=null,R(b(M,!1)))}}function h(B){te.nextTick(v,B)}function y(B,R){return function(M,S){B.then(function(){if(R[f]){M(b(void 0,!0));return}R[p](M,S)},S)}}var _=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((r={get stream(){return this[g]},next:function(){var B=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[f])return Promise.resolve(b(void 0,!0));if(this[g].destroyed)return new Promise(function(C,z){te.nextTick(function(){B[o]?z(B[o]):C(b(void 0,!0))})});var M=this[d],S;if(M)S=new Promise(y(M,this));else{var j=this[g].read();if(j!==null)return Promise.resolve(b(j,!1));S=new Promise(this[p])}return this[d]=S,S}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var B=this;return new Promise(function(R,M){B[g].destroy(null,function(S){if(S){M(S);return}R(b(void 0,!0))})})}),r),_),E=function(B){var R,M=Object.create(A,(R={},n(R,g,{value:B,writable:!0}),n(R,s,{value:null,writable:!0}),n(R,l,{value:null,writable:!0}),n(R,o,{value:null,writable:!0}),n(R,f,{value:B._readableState.endEmitted,writable:!0}),n(R,p,{value:function(S,j){var C=M[g].read();C?(M[d]=null,M[s]=null,M[l]=null,S(b(C,!1))):(M[s]=S,M[l]=j)},writable:!0}),R));return M[d]=null,a(B,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=M[l];j!==null&&(M[d]=null,M[s]=null,M[l]=null,j(S)),M[o]=S;return}var C=M[s];C!==null&&(M[d]=null,M[s]=null,M[l]=null,C(b(void 0,!0))),M[f]=!0}),B.on("readable",h.bind(null,M)),M};t.exports=E}),Pn=ee((e,t)=>{K(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Rr=ee((e,t)=>{K(),t.exports=D;var r;D.ReadableState=V,kt().EventEmitter;var n=function(m,w){return m.listeners(w).length},a=Ar(),s=At().Buffer,l=Ke.Uint8Array||function(){};function o(m){return s.from(m)}function f(m){return s.isBuffer(m)||m instanceof l}var d=kr(),p;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var g=Rn(),b=Ir(),v=Br(),h=v.getHighWaterMark,y=ct().codes,_=y.ERR_INVALID_ARG_TYPE,A=y.ERR_STREAM_PUSH_AFTER_EOF,E=y.ERR_METHOD_NOT_IMPLEMENTED,B=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,M,S;He()(D,a);var j=b.errorOrDestroy,C=["error","close","destroy","pause","resume"];function z(m,w,F){if(typeof m.prependListener=="function")return m.prependListener(w,F);!m._events||!m._events[w]?m.on(w,F):Array.isArray(m._events[w])?m._events[w].unshift(F):m._events[w]=[F,m._events[w]]}function V(m,w,F){r=r||st(),m=m||{},typeof F!="boolean"&&(F=w instanceof r),this.objectMode=!!m.objectMode,F&&(this.objectMode=this.objectMode||!!m.readableObjectMode),this.highWaterMark=h(this,m,"readableHighWaterMark",F),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=m.emitClose!==!1,this.autoDestroy=!!m.autoDestroy,this.destroyed=!1,this.defaultEncoding=m.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,m.encoding&&(R||(R=nr().StringDecoder),this.decoder=new R(m.encoding),this.encoding=m.encoding)}function D(m){if(r=r||st(),!(this instanceof D))return new D(m);var w=this instanceof r;this._readableState=new V(m,this,w),this.readable=!0,m&&(typeof m.read=="function"&&(this._read=m.read),typeof m.destroy=="function"&&(this._destroy=m.destroy)),a.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){!this._readableState||(this._readableState.destroyed=m)}}),D.prototype.destroy=b.destroy,D.prototype._undestroy=b.undestroy,D.prototype._destroy=function(m,w){w(m)},D.prototype.push=function(m,w){var F=this._readableState,G;return F.objectMode?G=!0:typeof m=="string"&&(w=w||F.defaultEncoding,w!==F.encoding&&(m=s.from(m,w),w=""),G=!0),q(this,m,w,!1,G)},D.prototype.unshift=function(m){return q(this,m,null,!0,!1)};function q(m,w,F,G,ye){p("readableAddChunk",w);var ae=m._readableState;if(w===null)ae.reading=!1,me(m,ae);else{var P;if(ye||(P=re(ae,w)),P)j(m,P);else if(ae.objectMode||w&&w.length>0)if(typeof w!="string"&&!ae.objectMode&&Object.getPrototypeOf(w)!==s.prototype&&(w=o(w)),G)ae.endEmitted?j(m,new B):H(m,ae,w,!0);else if(ae.ended)j(m,new A);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!F?(w=ae.decoder.write(w),ae.objectMode||w.length!==0?H(m,ae,w,!1):fe(m,ae)):H(m,ae,w,!1)}else G||(ae.reading=!1,fe(m,ae))}return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function H(m,w,F,G){w.flowing&&w.length===0&&!w.sync?(w.awaitDrain=0,m.emit("data",F)):(w.length+=w.objectMode?1:F.length,G?w.buffer.unshift(F):w.buffer.push(F),w.needReadable&&ve(m)),fe(m,w)}function re(m,w){var F;return!f(w)&&typeof w!="string"&&w!==void 0&&!m.objectMode&&(F=new _("chunk",["string","Buffer","Uint8Array"],w)),F}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(m){R||(R=nr().StringDecoder);var w=new R(m);this._readableState.decoder=w,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,G="";F!==null;)G+=w.write(F.data),F=F.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var ie=1073741824;function de(m){return m>=ie?m=ie:(m--,m|=m>>>1,m|=m>>>2,m|=m>>>4,m|=m>>>8,m|=m>>>16,m++),m}function he(m,w){return m<=0||w.length===0&&w.ended?0:w.objectMode?1:m!==m?w.flowing&&w.length?w.buffer.head.data.length:w.length:(m>w.highWaterMark&&(w.highWaterMark=de(m)),m<=w.length?m:w.ended?w.length:(w.needReadable=!0,0))}D.prototype.read=function(m){p("read",m),m=parseInt(m,10);var w=this._readableState,F=m;if(m!==0&&(w.emittedReadable=!1),m===0&&w.needReadable&&((w.highWaterMark!==0?w.length>=w.highWaterMark:w.length>0)||w.ended))return p("read: emitReadable",w.length,w.ended),w.length===0&&w.ended?N(this):ve(this),null;if(m=he(m,w),m===0&&w.ended)return w.length===0&&N(this),null;var G=w.needReadable;p("need readable",G),(w.length===0||w.length-m<w.highWaterMark)&&(G=!0,p("length less than watermark",G)),w.ended||w.reading?(G=!1,p("reading or ended",G)):G&&(p("do read"),w.reading=!0,w.sync=!0,w.length===0&&(w.needReadable=!0),this._read(w.highWaterMark),w.sync=!1,w.reading||(m=he(F,w)));var ye;return m>0?ye=L(m,w):ye=null,ye===null?(w.needReadable=w.length<=w.highWaterMark,m=0):(w.length-=m,w.awaitDrain=0),w.length===0&&(w.ended||(w.needReadable=!0),F!==m&&w.ended&&N(this)),ye!==null&&this.emit("data",ye),ye};function me(m,w){if(p("onEofChunk"),!w.ended){if(w.decoder){var F=w.decoder.end();F&&F.length&&(w.buffer.push(F),w.length+=w.objectMode?1:F.length)}w.ended=!0,w.sync?ve(m):(w.needReadable=!1,w.emittedReadable||(w.emittedReadable=!0,Ae(m)))}}function ve(m){var w=m._readableState;p("emitReadable",w.needReadable,w.emittedReadable),w.needReadable=!1,w.emittedReadable||(p("emitReadable",w.flowing),w.emittedReadable=!0,te.nextTick(Ae,m))}function Ae(m){var w=m._readableState;p("emitReadable_",w.destroyed,w.length,w.ended),!w.destroyed&&(w.length||w.ended)&&(m.emit("readable"),w.emittedReadable=!1),w.needReadable=!w.flowing&&!w.ended&&w.length<=w.highWaterMark,I(m)}function fe(m,w){w.readingMore||(w.readingMore=!0,te.nextTick(O,m,w))}function O(m,w){for(;!w.reading&&!w.ended&&(w.length<w.highWaterMark||w.flowing&&w.length===0);){var F=w.length;if(p("maybeReadMore read 0"),m.read(0),F===w.length)break}w.readingMore=!1}D.prototype._read=function(m){j(this,new E("_read()"))},D.prototype.pipe=function(m,w){var F=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=m;break;case 1:G.pipes=[G.pipes,m];break;default:G.pipes.push(m);break}G.pipesCount+=1,p("pipe count=%d opts=%j",G.pipesCount,w);var ye=(!w||w.end!==!1)&&m!==te.stdout&&m!==te.stderr,ae=ye?Fe:u;G.endEmitted?te.nextTick(ae):F.once("end",ae),m.on("unpipe",P);function P(c,k){p("onunpipe"),c===F&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,dt())}function Fe(){p("onend"),m.end()}var Ve=U(F);m.on("drain",Ve);var Re=!1;function dt(){p("cleanup"),m.removeListener("close",pt),m.removeListener("finish",i),m.removeListener("drain",Ve),m.removeListener("error",Le),m.removeListener("unpipe",P),F.removeListener("end",Fe),F.removeListener("end",u),F.removeListener("data",It),Re=!0,G.awaitDrain&&(!m._writableState||m._writableState.needDrain)&&Ve()}F.on("data",It);function It(c){p("ondata");var k=m.write(c);p("dest.write",k),k===!1&&((G.pipesCount===1&&G.pipes===m||G.pipesCount>1&&ne(G.pipes,m)!==-1)&&!Re&&(p("false write response, pause",G.awaitDrain),G.awaitDrain++),F.pause())}function Le(c){p("onerror",c),u(),m.removeListener("error",Le),n(m,"error")===0&&j(m,c)}z(m,"error",Le);function pt(){m.removeListener("finish",i),u()}m.once("close",pt);function i(){p("onfinish"),m.removeListener("close",pt),u()}m.once("finish",i);function u(){p("unpipe"),F.unpipe(m)}return m.emit("pipe",F),G.flowing||(p("pipe resume"),F.resume()),m};function U(m){return function(){var w=m._readableState;p("pipeOnDrain",w.awaitDrain),w.awaitDrain&&w.awaitDrain--,w.awaitDrain===0&&n(m,"data")&&(w.flowing=!0,I(m))}}D.prototype.unpipe=function(m){var w=this._readableState,F={hasUnpiped:!1};if(w.pipesCount===0)return this;if(w.pipesCount===1)return m&&m!==w.pipes?this:(m||(m=w.pipes),w.pipes=null,w.pipesCount=0,w.flowing=!1,m&&m.emit("unpipe",this,F),this);if(!m){var G=w.pipes,ye=w.pipesCount;w.pipes=null,w.pipesCount=0,w.flowing=!1;for(var ae=0;ae<ye;ae++)G[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var P=ne(w.pipes,m);return P===-1?this:(w.pipes.splice(P,1),w.pipesCount-=1,w.pipesCount===1&&(w.pipes=w.pipes[0]),m.emit("unpipe",this,F),this)},D.prototype.on=function(m,w){var F=a.prototype.on.call(this,m,w),G=this._readableState;return m==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):m==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,p("on readable",G.length,G.reading),G.length?ve(this):G.reading||te.nextTick(Y,this)),F},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(m,w){var F=a.prototype.removeListener.call(this,m,w);return m==="readable"&&te.nextTick($,this),F},D.prototype.removeAllListeners=function(m){var w=a.prototype.removeAllListeners.apply(this,arguments);return(m==="readable"||m===void 0)&&te.nextTick($,this),w};function $(m){var w=m._readableState;w.readableListening=m.listenerCount("readable")>0,w.resumeScheduled&&!w.paused?w.flowing=!0:m.listenerCount("data")>0&&m.resume()}function Y(m){p("readable nexttick read 0"),m.read(0)}D.prototype.resume=function(){var m=this._readableState;return m.flowing||(p("resume"),m.flowing=!m.readableListening,pe(this,m)),m.paused=!1,this};function pe(m,w){w.resumeScheduled||(w.resumeScheduled=!0,te.nextTick(ue,m,w))}function ue(m,w){p("resume",w.reading),w.reading||m.read(0),w.resumeScheduled=!1,m.emit("resume"),I(m),w.flowing&&!w.reading&&m.read(0)}D.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function I(m){var w=m._readableState;for(p("flow",w.flowing);w.flowing&&m.read()!==null;);}D.prototype.wrap=function(m){var w=this,F=this._readableState,G=!1;m.on("end",function(){if(p("wrapped end"),F.decoder&&!F.ended){var P=F.decoder.end();P&&P.length&&w.push(P)}w.push(null)}),m.on("data",function(P){if(p("wrapped data"),F.decoder&&(P=F.decoder.write(P)),!(F.objectMode&&P==null)&&!(!F.objectMode&&(!P||!P.length))){var Fe=w.push(P);Fe||(G=!0,m.pause())}});for(var ye in m)this[ye]===void 0&&typeof m[ye]=="function"&&(this[ye]=function(P){return function(){return m[P].apply(m,arguments)}}(ye));for(var ae=0;ae<C.length;ae++)m.on(C[ae],this.emit.bind(this,C[ae]));return this._read=function(P){p("wrapped _read",P),G&&(G=!1,m.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=jn()),M(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(m){this._readableState&&(this._readableState.flowing=m)}}),D._fromList=L,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(m,w){if(w.length===0)return null;var F;return w.objectMode?F=w.buffer.shift():!m||m>=w.length?(w.decoder?F=w.buffer.join(""):w.buffer.length===1?F=w.buffer.first():F=w.buffer.concat(w.length),w.buffer.clear()):F=w.buffer.consume(m,w.decoder),F}function N(m){var w=m._readableState;p("endReadable",w.endEmitted),w.endEmitted||(w.ended=!0,te.nextTick(X,w,m))}function X(m,w){if(p("endReadableNT",m.endEmitted,m.length),!m.endEmitted&&m.length===0&&(m.endEmitted=!0,w.readable=!1,w.emit("end"),m.autoDestroy)){var F=w._writableState;(!F||F.autoDestroy&&F.finished)&&w.destroy()}}typeof Symbol=="function"&&(D.from=function(m,w){return S===void 0&&(S=Pn()),S(D,m,w)});function ne(m,w){for(var F=0,G=m.length;F<G;F++)if(m[F]===w)return F;return-1}}),Tr=ee((e,t)=>{K(),t.exports=d;var r=ct().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=st();He()(d,o);function f(b,v){var h=this._transformState;h.transforming=!1;var y=h.writecb;if(y===null)return this.emit("error",new a);h.writechunk=null,h.writecb=null,v!=null&&this.push(v),y(b);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);o.call(this,b),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",p)}function p(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(v,h){g(b,v,h)}):g(this,null,null)}d.prototype.push=function(b,v){return this._transformState.needTransform=!1,o.prototype.push.call(this,b,v)},d.prototype._transform=function(b,v,h){h(new n("_transform()"))},d.prototype._write=function(b,v,h){var y=this._transformState;if(y.writecb=h,y.writechunk=b,y.writeencoding=v,!y.transforming){var _=this._readableState;(y.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},d.prototype._read=function(b){var v=this._transformState;v.writechunk!==null&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0},d.prototype._destroy=function(b,v){o.prototype._destroy.call(this,b,function(h){v(h)})};function g(b,v,h){if(v)return b.emit("error",v);if(h!=null&&b.push(h),b._writableState.length)throw new l;if(b._transformState.transforming)throw new s;return b.push(null)}}),Mn=ee((e,t)=>{K(),t.exports=n;var r=Tr();He()(n,r);function n(a){if(!(this instanceof n))return new n(a);r.call(this,a)}n.prototype._transform=function(a,s,l){l(null,a)}}),Un=ee((e,t)=>{K();var r;function n(h){var y=!1;return function(){y||(y=!0,h.apply(void 0,arguments))}}var a=ct().codes,s=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function o(h){if(h)throw h}function f(h){return h.setHeader&&typeof h.abort=="function"}function d(h,y,_,A){A=n(A);var E=!1;h.on("close",function(){E=!0}),r===void 0&&(r=Kt()),r(h,{readable:y,writable:_},function(R){if(R)return A(R);E=!0,A()});var B=!1;return function(R){if(!E&&!B){if(B=!0,f(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();A(R||new l("pipe"))}}}function p(h){h()}function g(h,y){return h.pipe(y)}function b(h){return!h.length||typeof h[h.length-1]!="function"?o:h.pop()}function v(){for(var h=arguments.length,y=new Array(h),_=0;_<h;_++)y[_]=arguments[_];var A=b(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new s("streams");var E,B=y.map(function(R,M){var S=M<y.length-1,j=M>0;return d(R,S,j,function(C){E||(E=C),C&&B.forEach(p),!S&&(B.forEach(p),A(E))})});return y.reduce(g)}t.exports=v}),ht=ee((e,t)=>{K(),e=t.exports=Rr(),e.Stream=e,e.Readable=e,e.Writable=Or(),e.Duplex=st(),e.Transform=Tr(),e.PassThrough=Mn(),e.finished=Kt(),e.pipeline=Un()}),xn=ee((e,t)=>{K(),t.exports=r;function r(n,a){if(n&&a)return r(n)(a);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){s[l]=n[l]}),s;function s(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(p){f[p]=d[p]}),f}}}),Lr=ee((e,t)=>{K();var r=xn();t.exports=r(n),t.exports.strict=r(a),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})});function n(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function a(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},o=s.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),jr=ee((e,t)=>{K();var r=Lr(),n=function(){},a=function(o){return o.setHeader&&typeof o.abort=="function"},s=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var p=o._writableState,g=o._readableState,b=f.readable||f.readable!==!1&&o.readable,v=f.writable||f.writable!==!1&&o.writable,h=!1,y=function(){o.writable||_()},_=function(){v=!1,b||d.call(o)},A=function(){b=!1,v||d.call(o)},E=function(j){d.call(o,j?new Error("exited with error code: "+j):null)},B=function(j){d.call(o,j)},R=function(){te.nextTick(M)},M=function(){if(!h){if(b&&!(g&&g.ended&&!g.destroyed))return d.call(o,new Error("premature close"));if(v&&!(p&&p.ended&&!p.destroyed))return d.call(o,new Error("premature close"))}},S=function(){o.req.on("finish",_)};return a(o)?(o.on("complete",_),o.on("abort",R),o.req?S():o.on("request",S)):v&&!p&&(o.on("end",y),o.on("close",y)),s(o)&&o.on("exit",E),o.on("end",A),o.on("finish",_),f.error!==!1&&o.on("error",B),o.on("close",R),function(){h=!0,o.removeListener("complete",_),o.removeListener("abort",R),o.removeListener("request",S),o.req&&o.req.removeListener("finish",_),o.removeListener("end",y),o.removeListener("close",y),o.removeListener("finish",_),o.removeListener("exit",E),o.removeListener("end",A),o.removeListener("error",B),o.removeListener("close",R)}};t.exports=l}),Cn=ee(()=>{K()}),Dn=ee((e,t)=>{K();var r=Lr(),n=jr(),a=Cn(),s=function(){},l=/^v?\.0/.test(te.version),o=function(h){return typeof h=="function"},f=function(h){return!l||!a?!1:(h instanceof(a.ReadStream||s)||h instanceof(a.WriteStream||s))&&o(h.close)},d=function(h){return h.setHeader&&o(h.abort)},p=function(h,y,_,A){A=r(A);var E=!1;h.on("close",function(){E=!0}),n(h,{readable:y,writable:_},function(R){if(R)return A(R);E=!0,A()});var B=!1;return function(R){if(!E&&!B){if(B=!0,f(h))return h.close(s);if(d(h))return h.abort();if(o(h.destroy))return h.destroy();A(R||new Error("stream was destroyed"))}}},g=function(h){h()},b=function(h,y){return h.pipe(y)},v=function(){var h=Array.prototype.slice.call(arguments),y=o(h[h.length-1]||s)&&h.pop()||s;if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new Error("pump requires two streams per minimum");var _,A=h.map(function(E,B){var R=B<h.length-1,M=B>0;return p(E,R,M,function(S){_||(_=S),S&&A.forEach(g),!R&&(A.forEach(g),y(_))})});return h.reduce(b)};t.exports=v}),Nn=ee((e,t)=>{K(),t.exports=r;function r(a){var s=a._readableState;return s?s.objectMode||typeof a._duplexState=="number"?a.read():a.read(n(s)):null}function n(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}}),Fn=ee((e,t)=>{K();var r=ht(),n=jr(),a=He(),s=Nn(),l=Q.Buffer.from&&Q.Buffer.from!==Uint8Array.from?Q.Buffer.from([0]):new Q.Buffer([0]),o=function(h,y){h._corked?h.once("uncork",y):y()},f=function(h,y){h._autoDestroy&&h.destroy(y)},d=function(h,y){return function(_){_?f(h,_.message==="premature close"?null:_):y&&!h._ended&&h.end()}},p=function(h,y){if(!h||h._writableState&&h._writableState.finished)return y();if(h._writableState)return h.end(y);h.end(),y()},g=function(){},b=function(h){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(h)},v=function(h,y,_){if(!(this instanceof v))return new v(h,y,_);r.Duplex.call(this,_),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!_||_.autoDestroy!==!1,this._forwardDestroy=!_||_.destroy!==!1,this._forwardEnd=!_||_.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,h&&this.setWritable(h),y&&this.setReadable(y)};a(v,r.Duplex),v.obj=function(h,y,_){return _||(_={}),_.objectMode=!0,_.highWaterMark=16,new v(h,y,_)},v.prototype.cork=function(){++this._corked===1&&this.emit("cork")},v.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},v.prototype.setWritable=function(h){if(this._unwrite&&this._unwrite(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.end();return}var y=this,_=n(h,{writable:!0,readable:!1},d(this,this._forwardEnd)),A=function(){var B=y._ondrain;y._ondrain=null,B&&B()},E=function(){y._writable.removeListener("drain",A),_()};this._unwrite&&te.nextTick(A),this._writable=h,this._writable.on("drain",A),this._unwrite=E,this.uncork()},v.prototype.setReadable=function(h){if(this._unread&&this._unread(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.push(null),this.resume();return}var y=this,_=n(h,{writable:!1,readable:!0},d(this)),A=function(){y._forward()},E=function(){y.push(null)},B=function(){y._readable2.removeListener("readable",A),y._readable2.removeListener("end",E),_()};this._drained=!0,this._readable=h,this._readable2=h._readableState?h:b(h),this._readable2.on("readable",A),this._readable2.on("end",E),this._unread=B,this._forward()},v.prototype._read=function(){this._drained=!0,this._forward()},v.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var h;this._drained&&(h=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(h));this._forwarding=!1}},v.prototype.destroy=function(h,y){if(y||(y=g),this.destroyed)return y(null);this.destroyed=!0;var _=this;te.nextTick(function(){_._destroy(h),y(null)})},v.prototype._destroy=function(h){if(h){var y=this._ondrain;this._ondrain=null,y?y(h):this.emit("error",h)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},v.prototype._write=function(h,y,_){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,h,y,_));if(h===l)return this._finish(_);if(!this._writable)return _();this._writable.write(h)===!1?this._ondrain=_:this.destroyed||_()}},v.prototype._finish=function(h){var y=this;this.emit("preend"),o(this,function(){p(y._forwardEnd&&y._writable,function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),o(y,h)})})},v.prototype.end=function(h,y,_){return typeof h=="function"?this.end(null,null,h):typeof y=="function"?this.end(h,null,y):(this._ended=!0,h&&this.write(h),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,_))},t.exports=v}),$n=ee((e,t)=>{K();var r=Dn(),n=He(),a=Fn(),s=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=s(arguments);if(!(this instanceof f))return new f(d);a.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,a),f.prototype.setPipeline=function(){var d=s(arguments),p=this,g=!1,b=d[0],v=d[d.length-1];v=v.readable?v:null,b=b.writable?b:null;var h=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",h),this.on("prefinish",function(){g||p.cork()}),r(d,function(y){if(p.removeListener("close",h),y)return p.destroy(y.message==="premature close"?null:y);g=!0,p._autoDestroy===!1&&(p._autoDestroy=!0),p.uncork()}),this.destroyed)return h();this.setWritable(b),this.setReadable(v)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),Wn=ee(()=>{K()}),Pr=ee((e,t)=>{K(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof te<"u"&&typeof te.pid=="number"&&te.versions&&te.versions.node)return a(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return s(l,o)}function a(l,o){var f=Wn(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var p=new Uint8Array(l),g=0;g<l;++g)p[g]=d.readUInt8(g);return p;default:throw new Error(o.type+" is unsupported.")}}function s(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var p=new Q.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new Q.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),Mr=ee((e,t)=>{K(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[n]=s;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==s||o.enumerable!==!0)return!1}return!0}}),jt=ee((e,t)=>{K();var r=Mr();t.exports=function(){return r()&&!!Symbol.toStringTag}}),qn=ee((e,t)=>{K();var r=typeof Symbol<"u"&&Symbol,n=Mr();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),Vn=ee((e,t)=>{K();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";t.exports=function(l){var o=this;if(typeof o!="function"||a.call(o)!==s)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,p=function(){if(this instanceof d){var y=o.apply(this,f.concat(n.call(arguments)));return Object(y)===y?y:this}else return o.apply(l,f.concat(n.call(arguments)))},g=Math.max(0,o.length-f.length),b=[],v=0;v<g;v++)b.push("$"+v);if(d=Function("binder","return function ("+b.join(",")+"){ return binder.apply(this,arguments); }")(p),o.prototype){var h=function(){};h.prototype=o.prototype,d.prototype=new h,h.prototype=null}return d}}),Ht=ee((e,t)=>{K();var r=Vn();t.exports=Function.prototype.bind||r}),zn=ee((e,t)=>{K();var r=Ht();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),Yt=ee((e,t)=>{K();var r,n=SyntaxError,a=Function,s=TypeError,l=function(D){try{return a('"use strict"; return ('+D+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new s},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,p=qn()(),g=Object.getPrototypeOf||function(D){return D.__proto__},b={},v=typeof Uint8Array>"u"?r:g(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":p?g([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?g(g([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?r:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?r:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?g(""[Symbol.iterator]()):r,"%Symbol%":p?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":v,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},y=function D(q){var H;if(q==="%AsyncFunction%")H=l("async function () {}");else if(q==="%GeneratorFunction%")H=l("function* () {}");else if(q==="%AsyncGeneratorFunction%")H=l("async function* () {}");else if(q==="%AsyncGenerator%"){var re=D("%AsyncGeneratorFunction%");re&&(H=re.prototype)}else if(q==="%AsyncIteratorPrototype%"){var ie=D("%AsyncGenerator%");ie&&(H=g(ie.prototype))}return h[q]=H,H},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=Ht(),E=zn(),B=A.call(Function.call,Array.prototype.concat),R=A.call(Function.apply,Array.prototype.splice),M=A.call(Function.call,String.prototype.replace),S=A.call(Function.call,String.prototype.slice),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,z=function(D){var q=S(D,0,1),H=S(D,-1);if(q==="%"&&H!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&q!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var re=[];return M(D,j,function(ie,de,he,me){re[re.length]=he?M(me,C,"$1"):de||ie}),re},V=function(D,q){var H=D,re;if(E(_,H)&&(re=_[H],H="%"+re[0]+"%"),E(h,H)){var ie=h[H];if(ie===b&&(ie=y(H)),typeof ie>"u"&&!q)throw new s("intrinsic "+D+" exists, but is not available. Please file an issue!");return{alias:re,name:H,value:ie}}throw new n("intrinsic "+D+" does not exist!")};t.exports=function(D,q){if(typeof D!="string"||D.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new s('"allowMissing" argument must be a boolean');var H=z(D),re=H.length>0?H[0]:"",ie=V("%"+re+"%",q),de=ie.name,he=ie.value,me=!1,ve=ie.alias;ve&&(re=ve[0],R(H,B([0,1],ve)));for(var Ae=1,fe=!0;Ae<H.length;Ae+=1){var O=H[Ae],U=S(O,0,1),$=S(O,-1);if((U==='"'||U==="'"||U==="`"||$==='"'||$==="'"||$==="`")&&U!==$)throw new n("property names with quotes must have matching quotes");if((O==="constructor"||!fe)&&(me=!0),re+="."+O,de="%"+re+"%",E(h,de))he=h[de];else if(he!=null){if(!(O in he)){if(!q)throw new s("base intrinsic for "+D+" exists, but the property is not available.");return}if(o&&Ae+1>=H.length){var Y=o(he,O);fe=!!Y,fe&&"get"in Y&&!("originalValue"in Y.get)?he=Y.get:he=he[O]}else fe=E(he,O),he=he[O];fe&&!me&&(h[de]=he)}}return he}}),Gn=ee((e,t)=>{K();var r=Ht(),n=Yt(),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(s,a),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(g){var b=l(r,s,arguments);if(o&&f){var v=o(b,"length");v.configurable&&f(b,"length",{value:1+d(0,g.length-(arguments.length-1))})}return b};var p=function(){return l(r,a,arguments)};f?f(t.exports,"apply",{value:p}):t.exports.apply=p}),Jt=ee((e,t)=>{K();var r=Yt(),n=Gn(),a=n(r("String.prototype.indexOf"));t.exports=function(s,l){var o=r(s,!!l);return typeof o=="function"&&a(s,".prototype.")>-1?n(o):o}}),Kn=ee((e,t)=>{K();var r=jt()(),n=Jt(),a=n("Object.prototype.toString"),s=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:a(f)==="[object Arguments]"},l=function(f){return s(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&a(f)!=="[object Array]"&&a(f.callee)==="[object Function]"},o=function(){return s(arguments)}();s.isLegacyArguments=l,t.exports=o?s:l}),Hn=ee((e,t)=>{K();var r=Object.prototype.toString,n=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=jt()(),l=Object.getPrototypeOf,o=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(a.test(n.call(d)))return!0;if(!s){var p=r.call(d);return p==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var g=o();f=g?l(g):!1}return l(d)===f}}),Ur=ee((e,t)=>{K();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(a,s,l){if(n.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var o=a.length;if(o===+o)for(var f=0;f<o;f++)s.call(l,a[f],f,a);else for(var d in a)r.call(a,d)&&s.call(l,a[d],d,a)}}),xr=ee((e,t)=>{K();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Ke:globalThis;t.exports=function(){for(var a=[],s=0;s<r.length;s++)typeof n[r[s]]=="function"&&(a[a.length]=r[s]);return a}}),Cr=ee((e,t)=>{K();var r=Yt(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),Dr=ee((e,t)=>{K();var r=Ur(),n=xr(),a=Jt(),s=a("Object.prototype.toString"),l=jt()(),o=typeof globalThis>"u"?Ke:globalThis,f=n(),d=a("Array.prototype.indexOf",!0)||function(y,_){for(var A=0;A<y.length;A+=1)if(y[A]===_)return A;return-1},p=a("String.prototype.slice"),g={},b=Cr(),v=Object.getPrototypeOf;l&&b&&v&&r(f,function(y){var _=new o[y];if(Symbol.toStringTag in _){var A=v(_),E=b(A,Symbol.toStringTag);if(!E){var B=v(A);E=b(B,Symbol.toStringTag)}g[y]=E.get}});var h=function(y){var _=!1;return r(g,function(A,E){if(!_)try{_=A.call(y)===E}catch{}}),_};t.exports=function(y){if(!y||typeof y!="object")return!1;if(!l||!(Symbol.toStringTag in y)){var _=p(s(y),8,-1);return d(f,_)>-1}return b?h(y):!1}}),Yn=ee((e,t)=>{K();var r=Ur(),n=xr(),a=Jt(),s=a("Object.prototype.toString"),l=jt()(),o=typeof globalThis>"u"?Ke:globalThis,f=n(),d=a("String.prototype.slice"),p={},g=Cr(),b=Object.getPrototypeOf;l&&g&&b&&r(f,function(y){if(typeof o[y]=="function"){var _=new o[y];if(Symbol.toStringTag in _){var A=b(_),E=g(A,Symbol.toStringTag);if(!E){var B=b(A);E=g(B,Symbol.toStringTag)}p[y]=E.get}}});var v=function(y){var _=!1;return r(p,function(A,E){if(!_)try{var B=A.call(y);B===E&&(_=B)}catch{}}),_},h=Dr();t.exports=function(y){return h(y)?!l||!(Symbol.toStringTag in y)?d(s(y),8,-1):v(y):!1}}),Jn=ee(e=>{K();var t=Kn(),r=Hn(),n=Yn(),a=Dr();function s(P){return P.call.bind(P)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=s(Object.prototype.toString),d=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);l&&(b=s(BigInt.prototype.valueOf));var b;o&&(v=s(Symbol.prototype.valueOf));var v;function h(P,Fe){if(typeof P!="object")return!1;try{return Fe(P),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=a;function y(P){return typeof Promise<"u"&&P instanceof Promise||P!==null&&typeof P=="object"&&typeof P.then=="function"&&typeof P.catch=="function"}e.isPromise=y;function _(P){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(P):a(P)||U(P)}e.isArrayBufferView=_;function A(P){return n(P)==="Uint8Array"}e.isUint8Array=A;function E(P){return n(P)==="Uint8ClampedArray"}e.isUint8ClampedArray=E;function B(P){return n(P)==="Uint16Array"}e.isUint16Array=B;function R(P){return n(P)==="Uint32Array"}e.isUint32Array=R;function M(P){return n(P)==="Int8Array"}e.isInt8Array=M;function S(P){return n(P)==="Int16Array"}e.isInt16Array=S;function j(P){return n(P)==="Int32Array"}e.isInt32Array=j;function C(P){return n(P)==="Float32Array"}e.isFloat32Array=C;function z(P){return n(P)==="Float64Array"}e.isFloat64Array=z;function V(P){return n(P)==="BigInt64Array"}e.isBigInt64Array=V;function D(P){return n(P)==="BigUint64Array"}e.isBigUint64Array=D;function q(P){return f(P)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function H(P){return typeof Map>"u"?!1:q.working?q(P):P instanceof Map}e.isMap=H;function re(P){return f(P)==="[object Set]"}re.working=typeof Set<"u"&&re(new Set);function ie(P){return typeof Set>"u"?!1:re.working?re(P):P instanceof Set}e.isSet=ie;function de(P){return f(P)==="[object WeakMap]"}de.working=typeof WeakMap<"u"&&de(new WeakMap);function he(P){return typeof WeakMap>"u"?!1:de.working?de(P):P instanceof WeakMap}e.isWeakMap=he;function me(P){return f(P)==="[object WeakSet]"}me.working=typeof WeakSet<"u"&&me(new WeakSet);function ve(P){return me(P)}e.isWeakSet=ve;function Ae(P){return f(P)==="[object ArrayBuffer]"}Ae.working=typeof ArrayBuffer<"u"&&Ae(new ArrayBuffer);function fe(P){return typeof ArrayBuffer>"u"?!1:Ae.working?Ae(P):P instanceof ArrayBuffer}e.isArrayBuffer=fe;function O(P){return f(P)==="[object DataView]"}O.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&O(new DataView(new ArrayBuffer(1),0,1));function U(P){return typeof DataView>"u"?!1:O.working?O(P):P instanceof DataView}e.isDataView=U;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Y(P){return f(P)==="[object SharedArrayBuffer]"}function pe(P){return typeof $>"u"?!1:(typeof Y.working>"u"&&(Y.working=Y(new $)),Y.working?Y(P):P instanceof $)}e.isSharedArrayBuffer=pe;function ue(P){return f(P)==="[object AsyncFunction]"}e.isAsyncFunction=ue;function I(P){return f(P)==="[object Map Iterator]"}e.isMapIterator=I;function L(P){return f(P)==="[object Set Iterator]"}e.isSetIterator=L;function N(P){return f(P)==="[object Generator]"}e.isGeneratorObject=N;function X(P){return f(P)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=X;function ne(P){return h(P,d)}e.isNumberObject=ne;function m(P){return h(P,p)}e.isStringObject=m;function w(P){return h(P,g)}e.isBooleanObject=w;function F(P){return l&&h(P,b)}e.isBigIntObject=F;function G(P){return o&&h(P,v)}e.isSymbolObject=G;function ye(P){return ne(P)||m(P)||w(P)||F(P)||G(P)}e.isBoxedPrimitive=ye;function ae(P){return typeof Uint8Array<"u"&&(fe(P)||pe(P))}e.isAnyArrayBuffer=ae,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(P){Object.defineProperty(e,P,{enumerable:!1,value:function(){throw new Error(P+" is not supported in userland")}})})}),Xn=ee((e,t)=>{K(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),Zn=ee(e=>{K();var t=Object.getOwnPropertyDescriptors||function(O){for(var U=Object.keys(O),$={},Y=0;Y<U.length;Y++)$[U[Y]]=Object.getOwnPropertyDescriptor(O,U[Y]);return $},r=/%[sdj%]/g;e.format=function(O){if(!M(O)){for(var U=[],$=0;$<arguments.length;$++)U.push(l(arguments[$]));return U.join(" ")}for(var $=1,Y=arguments,pe=Y.length,ue=String(O).replace(r,function(N){if(N==="%%")return"%";if($>=pe)return N;switch(N){case"%s":return String(Y[$++]);case"%d":return Number(Y[$++]);case"%j":try{return JSON.stringify(Y[$++])}catch{return"[Circular]"}default:return N}}),I=Y[$];$<pe;I=Y[++$])E(I)||!z(I)?ue+=" "+I:ue+=" "+l(I);return ue},e.deprecate=function(O,U){if(typeof te<"u"&&te.noDeprecation===!0)return O;if(typeof te>"u")return function(){return e.deprecate(O,U).apply(this,arguments)};var $=!1;function Y(){if(!$){if(te.throwDeprecation)throw new Error(U);te.traceDeprecation?console.trace(U):console.error(U),$=!0}return O.apply(this,arguments)}return Y};var n={},a=/^$/;te.env.NODE_DEBUG&&(s=te.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i"));var s;e.debuglog=function(O){if(O=O.toUpperCase(),!n[O])if(a.test(O)){var U=te.pid;n[O]=function(){var $=e.format.apply(e,arguments);console.error("%s %d: %s",O,U,$)}}else n[O]=function(){};return n[O]};function l(O,U){var $={seen:[],stylize:f};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),A(U)?$.showHidden=U:U&&e._extend($,U),j($.showHidden)&&($.showHidden=!1),j($.depth)&&($.depth=2),j($.colors)&&($.colors=!1),j($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=o),p($,O,$.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(O,U){var $=l.styles[U];return $?"\x1B["+l.colors[$][0]+"m"+O+"\x1B["+l.colors[$][1]+"m":O}function f(O,U){return O}function d(O){var U={};return O.forEach(function($,Y){U[$]=!0}),U}function p(O,U,$){if(O.customInspect&&U&&q(U.inspect)&&U.inspect!==e.inspect&&!(U.constructor&&U.constructor.prototype===U)){var Y=U.inspect($,O);return M(Y)||(Y=p(O,Y,$)),Y}var pe=g(O,U);if(pe)return pe;var ue=Object.keys(U),I=d(ue);if(O.showHidden&&(ue=Object.getOwnPropertyNames(U)),D(U)&&(ue.indexOf("message")>=0||ue.indexOf("description")>=0))return b(U);if(ue.length===0){if(q(U)){var L=U.name?": "+U.name:"";return O.stylize("[Function"+L+"]","special")}if(C(U))return O.stylize(RegExp.prototype.toString.call(U),"regexp");if(V(U))return O.stylize(Date.prototype.toString.call(U),"date");if(D(U))return b(U)}var N="",X=!1,ne=["{","}"];if(_(U)&&(X=!0,ne=["[","]"]),q(U)){var m=U.name?": "+U.name:"";N=" [Function"+m+"]"}if(C(U)&&(N=" "+RegExp.prototype.toString.call(U)),V(U)&&(N=" "+Date.prototype.toUTCString.call(U)),D(U)&&(N=" "+b(U)),ue.length===0&&(!X||U.length==0))return ne[0]+N+ne[1];if($<0)return C(U)?O.stylize(RegExp.prototype.toString.call(U),"regexp"):O.stylize("[Object]","special");O.seen.push(U);var w;return X?w=v(O,U,$,I,ue):w=ue.map(function(F){return h(O,U,$,I,F,X)}),O.seen.pop(),y(w,N,ne)}function g(O,U){if(j(U))return O.stylize("undefined","undefined");if(M(U)){var $="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize($,"string")}if(R(U))return O.stylize(""+U,"number");if(A(U))return O.stylize(""+U,"boolean");if(E(U))return O.stylize("null","null")}function b(O){return"["+Error.prototype.toString.call(O)+"]"}function v(O,U,$,Y,pe){for(var ue=[],I=0,L=U.length;I<L;++I)me(U,String(I))?ue.push(h(O,U,$,Y,String(I),!0)):ue.push("");return pe.forEach(function(N){N.match(/^\d+$/)||ue.push(h(O,U,$,Y,N,!0))}),ue}function h(O,U,$,Y,pe,ue){var I,L,N;if(N=Object.getOwnPropertyDescriptor(U,pe)||{value:U[pe]},N.get?N.set?L=O.stylize("[Getter/Setter]","special"):L=O.stylize("[Getter]","special"):N.set&&(L=O.stylize("[Setter]","special")),me(Y,pe)||(I="["+pe+"]"),L||(O.seen.indexOf(N.value)<0?(E($)?L=p(O,N.value,null):L=p(O,N.value,$-1),L.indexOf(`
`)>-1&&(ue?L=L.split(`
`).map(function(X){return"  "+X}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(X){return"   "+X}).join(`
`))):L=O.stylize("[Circular]","special")),j(I)){if(ue&&pe.match(/^\d+$/))return L;I=JSON.stringify(""+pe),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.substr(1,I.length-2),I=O.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=O.stylize(I,"string"))}return I+": "+L}function y(O,U,$){var Y=0,pe=O.reduce(function(ue,I){return Y++,I.indexOf(`
`)>=0&&Y++,ue+I.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pe>60?$[0]+(U===""?"":U+`
 `)+" "+O.join(`,
  `)+" "+$[1]:$[0]+U+" "+O.join(", ")+" "+$[1]}e.types=Jn();function _(O){return Array.isArray(O)}e.isArray=_;function A(O){return typeof O=="boolean"}e.isBoolean=A;function E(O){return O===null}e.isNull=E;function B(O){return O==null}e.isNullOrUndefined=B;function R(O){return typeof O=="number"}e.isNumber=R;function M(O){return typeof O=="string"}e.isString=M;function S(O){return typeof O=="symbol"}e.isSymbol=S;function j(O){return O===void 0}e.isUndefined=j;function C(O){return z(O)&&re(O)==="[object RegExp]"}e.isRegExp=C,e.types.isRegExp=C;function z(O){return typeof O=="object"&&O!==null}e.isObject=z;function V(O){return z(O)&&re(O)==="[object Date]"}e.isDate=V,e.types.isDate=V;function D(O){return z(O)&&(re(O)==="[object Error]"||O instanceof Error)}e.isError=D,e.types.isNativeError=D;function q(O){return typeof O=="function"}e.isFunction=q;function H(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||typeof O>"u"}e.isPrimitive=H,e.isBuffer=Xn();function re(O){return Object.prototype.toString.call(O)}function ie(O){return O<10?"0"+O.toString(10):O.toString(10)}var de=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function he(){var O=new Date,U=[ie(O.getHours()),ie(O.getMinutes()),ie(O.getSeconds())].join(":");return[O.getDate(),de[O.getMonth()],U].join(" ")}e.log=function(){console.log("%s - %s",he(),e.format.apply(e,arguments))},e.inherits=He(),e._extend=function(O,U){if(!U||!z(U))return O;for(var $=Object.keys(U),Y=$.length;Y--;)O[$[Y]]=U[$[Y]];return O};function me(O,U){return Object.prototype.hasOwnProperty.call(O,U)}var ve=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(ve&&O[ve]){var U=O[ve];if(typeof U!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,ve,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var $,Y,pe=new Promise(function(L,N){$=L,Y=N}),ue=[],I=0;I<arguments.length;I++)ue.push(arguments[I]);ue.push(function(L,N){L?Y(L):$(N)});try{O.apply(this,ue)}catch(L){Y(L)}return pe}return Object.setPrototypeOf(U,Object.getPrototypeOf(O)),ve&&Object.defineProperty(U,ve,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,t(O))},e.promisify.custom=ve;function Ae(O,U){if(!O){var $=new Error("Promise was rejected with a falsy value");$.reason=O,O=$}return U(O)}function fe(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var $=[],Y=0;Y<arguments.length;Y++)$.push(arguments[Y]);var pe=$.pop();if(typeof pe!="function")throw new TypeError("The last argument must be of type Function");var ue=this,I=function(){return pe.apply(ue,arguments)};O.apply(this,$).then(function(L){te.nextTick(I.bind(null,null,L))},function(L){te.nextTick(Ae.bind(null,L,I))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(O)),Object.defineProperties(U,t(O)),U}e.callbackify=fe}),Qn=ee((e,t)=>{K();var r=ht(),n=Zn(),a=r.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,a.call(this,l)}n.inherits(s,a),s.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=s});K();K();var Nr=Ue(ht(),1),Fr=Ue($n(),1);K();var $r=Ue(ht(),1);function Wr(e,t){let r=[],n;e.on("data",a=>r.push(a)),e.on("end",()=>{n||(n=!0,t(null,Q.Buffer.concat(r)))}),e.on("error",a=>{n||(n=!0,t(a))})}function qr(e){let t;return new $r.Transform({transform(r,n,a){t&&(r=Q.Buffer.concat([t,r]));let s=Math.floor(r.length/e)*e;s?r.length>s?(t=r.slice(s),this.push(r.slice(0,s))):(t=void 0,this.push(r)):t=t?Q.Buffer.concat([t,r]):r,a()},flush(r){t&&this.push(t),r()}})}function ei(e,t){let r=[],n=0;return new $r.Transform({transform(a,s,l){r.push(a),n+=a.length,l()},flush(a){t(n);function s(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",s);e.end(),a()}s()}})}function Oe(e){let t,r=new Promise((n,a)=>{t=(s,l)=>{s?a(s):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var ti=Ue(Pr(),1);K();K();var Xt=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,a,s,l=this._tables[0][4],o=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[a=e.slice(0),s=[]],t=f;t<4*f+28;t++)n=a[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),a[t]=a[t-f]^n;for(r=0;t;r++,t--)n=a[r&3?t:t-4],t<=4||r<4?s[r]=n:s[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],a,s,l,o=[],f=[],d,p,g,b,v,h;for(a=0;a<256;a++)f[(o[a]=a<<1^(a>>7)*283)^a]=a;for(s=l=0;!r[s];s^=d||1,l=f[l]||1)for(b=l^l<<1^l<<2^l<<3^l<<4,b=b>>8^b&255^99,r[s]=b,n[b]=s,g=o[p=o[d=o[s]]],h=g*16843009^p*65537^d*257^s*16843008,v=o[b]*257^b*16843008,a=0;a<4;a++)e[a][s]=v=v<<24^v>>>8,t[a][b]=h=h<<24^h>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),t[a]=t[a].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],a=e[t?3:1]^r[1],s=e[2]^r[2],l=e[t?1:3]^r[3],o,f,d,p=r.length/4-2,g,b=4,v=[0,0,0,0],h=this._tables[t],y=h[0],_=h[1],A=h[2],E=h[3],B=h[4];for(g=0;g<p;g++)o=y[n>>>24]^_[a>>16&255]^A[s>>8&255]^E[l&255]^r[b],f=y[a>>>24]^_[s>>16&255]^A[l>>8&255]^E[n&255]^r[b+1],d=y[s>>>24]^_[l>>16&255]^A[n>>8&255]^E[a&255]^r[b+2],l=y[l>>>24]^_[n>>16&255]^A[a>>8&255]^E[s&255]^r[b+3],b+=4,n=o,a=f,s=d;for(g=0;g<4;g++)v[t?3&-g:g]=B[n>>>24]<<24^B[a>>16&255]<<16^B[s>>8&255]<<8^B[l&255]^r[b++],o=n,n=a,a=s,s=l,l=o;return v}};Xt.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function ri(e){let t,r,n,a=[2479122403,2108737444,3518906241,22203222],s=Q.Buffer.alloc(Math.ceil(e.length/4)*4);for(s.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let o=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(o[t/4]=s.readInt32BE(t+r));a=new Xt(o).encrypt(a)}let l=Q.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(a[t],t*4);return l}function ni(e,t,r){let n=Q.Buffer.from(t.s,"base64"),a=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:a,hash:{name:s}},l,256)).then(l=>{r(null,Q.Buffer.from(l))}).catch(r)}var Ne=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new Xt(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,a;for(n=0;n<e.length;n+=16){for(a=0;a<4;a++)r[a]=e.readUInt32BE(n+a*4)^t[a];for(t=this.aes.encrypt(r),a=0;a<4;a++)e.writeInt32BE(t[a],n+a*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),a,s;for(a=0;a<e.length;a+=16){for(s=0;s<4;s++)r[s]=e.readUInt32BE(a+s*4);for(n=r,r=this.aes.decrypt(r),s=0;s<4;s++)e.writeInt32BE(r[s]^t[s],a+s*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let a=e.length-n;t[n/4&3]^=e.readIntBE(n,a)<<(4-a)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=Q.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},Vr=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=Q.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},zr=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=Q.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=Q.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=Q.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(Q.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function xe(e){return typeof e=="string"?Zt(e):e}function Se(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Zt(e){return Q.Buffer.from(e,"base64")}function Xe(e){return new Ne(Gr(e).slice(0,16))}function ii(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=xe(e),e||(e=(0,ti.default)(24)),e instanceof Q.Buffer||(e=Q.Buffer.from(e));let n=new Nr.Transform({transform(o,f,d){l.update(o);let p=s.encrypt(o);d(null,Q.Buffer.from(p))},flush(o){n.mac=l.condense(),n.key=ai(e,n.mac),o()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let a=new Ne(e.slice(0,16)),s=new Vr(a,e.slice(16),r),l=new zr(a,e.slice(16));return n=(0,Fr.default)(qr(16),n),n}function oi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=xe(e),e instanceof Q.Buffer||(e=Q.Buffer.from(e));let n=Xe(e),a=new Vr(n,e.slice(16),r),s=!t.disableVerification&&new zr(n,e.slice(16)),l=new Nr.Transform({transform(o,f,d){let p=a.decrypt(o);s&&s.update(p),d(null,Q.Buffer.from(p))},flush(o){if(s&&(l.mac=s.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,Fr.default)(qr(16),l),l}function Gr(e){let t=Q.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function ai(e,t){let r=Q.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function si(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let a=0;a<r;a++)n|=e[a]^t[a];return n===0}K();K();var $e={},li=Math.log(2);function Et(e){let t=[];for(;e-- >0;)t[e]=0;return t}function St(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function ui(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function Kr(e,t){let r=e.length,n=t.length;if(r<n)return Kr(t,e);let a=[],s=0,l=0;for(;l<n;l++)s+=e[l]+t[l],a[l]=s&268435455,s>>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>>=28;return s&&(a[l]=s),a}function je(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let a=[],s=0,l;for(l=0;l<n;l++)s+=e[l]-t[l],a[l]=s&268435455,s>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>=28;return s?[]:St(a)}function Nt(e,t,r,n,a){let s=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*s,p=s*o+((d&16383)<<14)+e[t]+a;return e[t]=p&268435455,a=l*f+(d>>14)+(p>>28),a}function fi(e){let t=e.length,r=2*t,n=Et(r),a=0,s,l;for(s=0;s<t;s++){for(a=Nt(n,2*s,e[s],e[s],0),l=s+1;l<t;l++)a=Nt(n,s+l,2*e[l],e[s],a);n[s+t]=a}return St(n)}function Ge(e,t){let r=e.length,n=t.length,a=Et(r+n-1),s,l,o;for(l=0;l<n;l++){for(s=0,o=0;o<r;o++)s=Nt(a,l+o,e[o],t[l],s);a[l+r]=s}return St(a)}function yt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function Hr(e,t){let r=e.length-1,n=t.length-1,a=r-n,s,l,o,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return $e.q=[0],$e.mod=e,$e;if(r===n&&yt(e,n,2)/yt(t,n,2)<4){for(s=e.concat(),l=0;o=je(s,t),o.length!==0;)s=o,l++;return $e.q=[l],$e.mod=s,$e}let d=Math.floor(Math.log(t[n])/li)+1,p=28-d;s=e.concat();let g=t.concat();if(p){for(f=n;f>0;f--)g[f]=g[f]<<p&268435455|g[f-1]>>d;for(g[0]=g[0]<<p&268435455,s[r]&(268435455<<d&268435455)&&(s[++r]=0,a++),f=r;f>0;f--)s[f]=s[f]<<p&268435455|s[f-1]>>d;s[0]=s[0]<<p&268435455}let b,v=Et(a+1),h=Et(a).concat(g);for(;b=je(s,h),b.length!==0;)v[a]++,s=b;let y=g[n],_=yt(g,n,2),A;for(f=r;f>n;f--){A=f-n-1,f>=s.length?v[A]=1:s[f]===y?v[A]=268435455:v[A]=Math.floor(yt(s,f,2)/y);let E=yt(s,f,3);for(;v[A]*_>E;)v[A]--;h=h.slice(1),b=je(s,Ge([v[A]],h)),b.length===0&&(v[A]--,b=je(s,Ge([v[A]],h))),s=b}if(p){for(f=0;f<s.length-1;f++)s[f]=s[f]>>p|s[f+1]<<d&268435455;s[s.length-1]>>=p}return $e.q=St(v),$e.mod=St(s),$e}function ci(e,t){let r=0,n;for(let a=e.length-1;a>=0;a--)n=e[a],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function it(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[ci(e,t[0])]}return Hr(e,t).mod}function wt(e,t,r){let n=e.length-(t.length<<1);if(n>0)return wt(e.slice(0,n).concat(wt(e.slice(n),t,r)),t,r);let a=t.length+1,s=t.length-1,l,o=Ge(e.slice(s),r).slice(a),f=e.slice(0,a),d=Ge(o,t).slice(0,a),p=je(f,d);p.length===0&&(f[a]=1,p=je(f,d));for(let g=0;l=je(p,t),l.length!==0;g++)if(p=l,g>=3)return wt(p,t,r);return p}function ir(e,t,r){let n=e.concat(),a=t.length-1,s=r.length*2,l=Et(s+1);for(l[s]=1,l=Hr(l,r).q,s=ui(t[a])-2;a>=0;a--){for(;s>=0;s-=1)n=wt(fi(n),r,l),t[a]&1<<s&&(n=wt(Ge(n,e),r,l));s=28-1}return n}function hi(e,t,r,n,a){let s=ir(it(e,r),it(t,je(r,[1])),r),l=ir(it(e,n),it(t,je(n,[1])),n),o=je(l,s);return o.length===0?(o=je(s,l),o=it(Ge(o,a),n),o=je(n,o)):o=it(Ge(o,a),n),Kr(Ge(o,r),s)}function Yr(e){let t=1,r=[0],n=0,a=256,s=e.length,l;if(s<2)return 0;let o=(s-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(a<<=1)>255&&(a=1,l=e.charCodeAt(--s)),t>268435455&&(t=1,r[++n]=0),l&a&&(r[n]|=t),t<<=1;return r}function di(e){let t=1,r=0,n=[0],a=1,s=0,l=e.length*28,o="",f;for(f=0;f<l;f++)e[r]&t&&(n[s]|=a),(a<<=1)>255&&(a=1,n[++s]=0),(t<<=1)>268435455&&(t=1,r++);for(;s>=0&&n[s]===0;)s--;for(f=0;f<=s;f++)o=String.fromCharCode(n[f])+o;return o}function pi(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=Yr(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function yi(e,t){let r=Yr(e.toString("binary")),n=di(hi(r,t[2],t[0],t[1],t[3]));return Q.Buffer.from(n,"binary")}K();var gi=Ue(kt(),1);K();var bi=null;K();var mi=globalThis.fetch,wi=mi;K();var vi=globalThis.AbortController||bi,Ft=vi,$t=4,or={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+$t+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},_i="https://g.api.mega.co.nz/",Ei=null,Si=null,gt=class extends gi.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||_i;let r="1.0.6";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||Ei,this.httpsAgent=t.httpsAgent||Si,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),wi(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[a,s]=Oe(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(ar).then(o=>{if(this.closed&&!n)return;if(!o)return a(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<$t)return setTimeout(()=>{this.request(e,a,r+1)},Math.pow(2,r+1)*1e3);f=Error(or[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);a(f,o)}).catch(o=>{a(o)}),s}pull(e,t=0){let r=new Ft;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(ar).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<$t)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(or[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(Ai).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new Ft;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return gt.globalApi||(gt.globalApi=new gt),gt.globalApi}};function ar(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function Ai(e){if(e.name!=="AbortError")throw e}var Tt=gt,ki=Ue(kt(),1);K();K();var Ii=Ue(kt(),1),Bi=Ue(ht(),1),Oi=Ue(Qn(),1),Je=class extends Ii.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?xe(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Tt.getGlobalApi(),!(this.api instanceof Tt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=xe(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=Zt(e),Xe(this.key).decryptCBC(e);let t=Je.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=Jr[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=Oe(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(a,s)=>{if(a)return t(a);if(this.directory){let l=Object.create(null),o=s.f,f=o.find(p=>p.k&&p.h===p.k.split(":")[0]),d=this.key?new Ne(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let p of o){if(p===f)continue;let g=new Je(p,this.storage);g.loadMetadata(d,p),g.downloadId=[this.downloadId,p.h],l[p.h]=g}for(let p of o){let g=l[p.p];if(g){let b=l[p.h];g.children||(g.children=[]),g.children.push(b),b.parent=g}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let p=l[this.loadedFile];typeof p>"u"?t(Error("Node (file or folder) not found in folder")):t(null,p)}else t(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){var h;typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,a=e.end||null,s=e.maxConnections||4,l=e.initialChunkSize||128*1024,o=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=(h=e.forceHttps)==null||h?2:0,p={a:"g",g:1,ssl:d};if(this.nodeId?p.n=this.nodeId:Array.isArray(this.downloadId)?(p._querystring={n:this.downloadId[0]},p.n=this.downloadId[1]):p.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let g=this.key&&!e.returnCiphertext?oi(this.key,{start:n,disableVerification:n!==0||a!==null}):new Bi.PassThrough,b=n===r?g:g.pipe(new Oi.default({skip:r-n})),v=e.handleRetries||Je.defaultHandleRetries;return this.api.request(p,(y,_)=>{if(y)return b.emit("error",y);if(typeof _.g!="string"||_.g.substr(0,4)!=="http")return b.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(_.s===0)return b.end();if(a||(a=_.s-1),r>a)return b.emit("error",Error("You can't download past the end of the file."));function A(q){if(q.status!==200){if(q.status===509){let H=q.headers.get("x-mega-time-left"),re=Error("Bandwidth limit reached: "+H+" seconds until it resets");re.timeLimit=H,b.emit("error",re);return}b.emit("error",Error("MEGA returned a "+q.status+" status code"))}}function E(q){b.emit("error",q)}let B=0;if(b.on("data",q=>{B+=q.length,b.emit("progress",{bytesLoaded:B,bytesTotal:_.s})}),s===1){let q=new Ft;b.on("close",()=>{q.abort()}),this.api.fetch(_.g+"/"+n+"-"+a,{signal:q.signal}).then(H=>{A(H);let re=H.body;if(re)if(re.pipe)H.body.pipe(g);else if(re.getReader){let ie=re.getReader(),de=({done:he,value:me})=>{if(he)g.end();else return g.write(me),ie.read().then(de)};ie.read().then(de)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(E);return}let R={},M=0,S=0,j=!1,C=n,z=l;b.on("error",()=>{j=!0}),b.on("close",()=>{j=!0});let V=()=>{if(C>a){j=!0,M===S&&g.end();return}let q=C,H=Math.min(a,q+z-1),re=M++,ie=0,de=()=>{ie++,this.api.fetch(_.g+"/"+q+"-"+H).then(he=>(A(he),he.arrayBuffer())).then(he=>{let me=Q.Buffer.from(he);R[re]=me,S===re&&D()},he=>{v(ie,he,me=>{me?E(me):de()})})};de(),C=H+1,z<f&&(z=z+o)},D=()=>{let q;for(;;){let H=R[S];if(!H||(q=!g.write(H),delete R[S],S++,q))break}j&&M===S&&g.end(),q?g.once("drain",D):V()};for(let q=0;q<s;q++)V()}),t&&Wr(b,t),b}downloadBuffer(e,t){let[r,n]=Oe(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=Oe(t);typeof e=="boolean"&&(e={noKey:e});let a=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(a+=`#${Se(this.key)}`),!e.noKey&&this.loadedFile&&(a+=`/file/${this.loadedFile}`),r(null,a),n}static fromURL(e,t={}){if(typeof e=="object")return new Je(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),a=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),s=n[0];if(a&&!s||!a&&s)throw Error("Invalid URL: too few arguments");return new Je({downloadId:a,key:s,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new Je({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},Jr=["","red","orange","yellow","green","blue","purple","grey"],We=Je,xt=Ue(Pr(),1),sr=Ue(ht(),1),lr={},bt=class extends We{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let a of r){let s=a.split(":")[0];if(s===t.user){e.k=a;break}let l=t.shareKeys[s];if(l){e.k=a,n=lr[s],n||(n=lr[s]=new Ne(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=Oe(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=Q.Buffer.from((0,xt.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let a=e.key,s=bt.packAttributes(e.attributes);Xe(a).encryptCBC(s);let l=Q.Buffer.from(a);this.storage.aes.encryptECB(l);let o={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:Se(s),k:Se(l)}]},f=vt(this.storage.shareKeys,this);return f.length>0&&(o.cr=Bt(this.storage,[{nodeId:"xxxxxxxx",key:a}],f)),this.api.request(o,(d,p)=>{if(d)return r(d);let g=this.storage._importFile(p.f[0]);this.storage.emit("add",g),r(null,g)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,a]=Oe(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let s,l=xe(e.key);l||(l=(0,xt.default)(24)),l instanceof Q.Buffer||(l=Q.Buffer.from(l));let o=e.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(s=l,l=Gr(l).slice(0,24)),e.key=l;let f=[],d=(b,v,h,y)=>{if(b)return g(b);if(!h||h.length===0){g(Error("Server returned a invalid response while uploading"));return}let _=Number(h.toString());if(_<0){g(Error("Server returned error "+_+" while uploading"));return}if(f[v]=h,v===0&&!s&&(s=y.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let A=bt.packAttributes(e.attributes);Xe(s).encryptCBC(A);let E=Q.Buffer.from(s);this.storage.aes.encryptECB(E);let B={h:Se(f[0]),t:0,a:Se(A),k:Se(E)};f.length!==1&&(B.fa=f.slice(1).map((S,j)=>j+"*"+Se(S)).filter(S=>S).join("/"));let R={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[B]},M=vt(this.storage.shareKeys,this);M.length>0&&(R.cr=Bt(this.storage,[{nodeId:B.h,key:s}],M)),this.api.request(R,(S,j)=>{if(S)return g(S);let C=this.storage._importFile(j.f[0]);this.storage.emit("add",C),p.emit("complete",C),n&&n(null,C)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let p=this._upload(e,t,0,d);function g(b){p.listenerCount("error")?p.emit("error",b):n(b)}return p.complete=a,p}_upload(e,t,r,n){let a=e.uploadCiphertext?new sr.PassThrough:ii(e.key),s=a,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,s.end(t)),l!=null?(l===0&&a.end(),this._uploadWithSize(s,l,a,r,e,n)):s=ei(s,o=>{this._uploadWithSize(s,o,a,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(s),s}_uploadAttribute(e,t,r,n){let a=(s,l)=>{if(s)return n(s);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=Q.Buffer.concat([l,Q.Buffer.alloc(f)])),(e.handle?Xe(e.key):new Ne(e.key.slice(0,16))).encryptCBC(l);let d=new sr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof Q.Buffer){a(null,t);return}Wr(t,a)}_uploadWithSize(e,t,r,n,a,s){var V;let l=(V=a.forceHttps)==null||V?2:0,o=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};a.handle&&(o.h=a.handle);let f=n===0?a.initialChunkSize||128*1024:t,d=a.chunkSizeIncrement||128*1024,p=a.maxChunkSize||1024*1024,g=a.maxConnections||4,b=a.handleRetries||We.defaultHandleRetries,v=f,h=0,y=!1,_=0,A,E,B,R,M,S=()=>{R=Math.min(v,t-_),E=Q.Buffer.alloc(R),h++,v<p&&(v+=d),M=0,A&&(A.copy(E),M=Math.min(A.length,R),A=A.length>R?A.slice(R):null),M===R?j():(y=!0,z())},j=()=>{let D=_,q=E,H=0,re=()=>{H++,this.api.fetch(B+"/"+(n===0?D:n-1),{method:"POST",body:q,headers:{"content-length":q.length}}).then(ie=>{if(ie.status!==200)throw Error("MEGA returned a "+ie.status+" status code");return ie.arrayBuffer()}).then(ie=>{let de=Q.Buffer.from(ie);de.length>0?(r.end(),te.nextTick(()=>{s(null,n,de,r)})):_<t&&!y&&S()},ie=>{b(H,ie,de=>{de?e.emit("error",de):re()})})};re(),E=null,_+=R,_<t&&!y&&h<g&&S()},C=0,z=()=>{for(;;){let D=r.read();if(D===null){r.once("readable",z);break}if(C+=D.length,e.emit("progress",{bytesLoaded:C,bytesTotal:t}),D.copy(E,M),M+=D.length,M>=R){y=!1,A=D.slice(D.length-(M-R)),j();break}}};r.on("end",()=>{t&&C!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+C))}),this.api.request(o,(D,q)=>{if(D)return s(D);B=q.p,S()})}uploadAttribute(e,t,r){let[n,a]=Oe(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(s,l,o,f)=>{if(s)return n(s);let d={a:"pfa",n:this.nodeId,fa:e+"*"+Se(o)};this.api.request(d,(p,g)=>{if(p)return n(p);n(null,this)})}),a}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof We))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=vt(this.storage.shareKeys,e);return n.length>0&&(r.cr=Bt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=Oe(t);Object.assign(this.attributes,e);let a=bt.packAttributes(this.attributes);return Xe(this.key).encryptCBC(a),this.api.request({a:"a",n:this.nodeId,at:Se(a)},s=>{this.parseAttributes(this.attributes),r(s)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=Jr.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,a]=Oe(t);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return n(s);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(o+=`#${Se(r||this.key)}`),n(null,o)}),a}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let a=xe(e.key);a||(a=(0,xt.default)(16)),a instanceof Q.Buffer||(a=Q.Buffer.from(a));let[s,l]=Oe(t);if(a.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=a;let o=Q.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:Se(this.storage.aes.encryptECB(Q.Buffer.from(a))),ha:Se(o),cr:Bt(this.storage,this)};return this.api.request(f,d=>{if(d)return s(d);this.link(Object.assign({__folderKey:a},e),s)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=Oe(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=We.fromURL(e)),!(e instanceof We))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let a=(s,l)=>{if(s)return r(s);let o=bt.packAttributes(l.attributes);Xe(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:Se(o),k:Se(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(p,g)=>{if(p)return r(p);let b=this.storage._importFile(g.f[0]);this.storage.emit("add",b),r(null,b)})};return e.attributes?a(null,e):e.loadAttributes(a),n}static packAttributes(e){let t=JSON.stringify(e);t=Q.Buffer.from(`MEGA${t}`);let r=Q.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Bt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=Xr(t)),r||(r=t.map(s=>vt(n,s)).reduce((s,l)=>s.concat(l)).filter((s,l,o)=>l===o.indexOf(s)));let a=[r,t.map(s=>s.nodeId),[]];for(let s=r.length;s--;){let l=new Ne(n[r[s]]);for(let o=t.length;o--;){let f=Q.Buffer.from(t[o].key);f&&(f.length===32||f.length===16)&&a[2].push(s,o,Se(l.encryptECB(f)))}}return a}function Xr(e){return[e].concat((e.children||[]).map(Xr).reduce((t,r)=>t.concat(r),[]))}function vt(e,t){let r=t.nodeId,n=t.parent,a=[];return e[r]&&a.push(r),n?a.concat(vt(e,n)):a}var Ri=bt,Ti=class extends ki.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=Oe(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Tt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):te.nextTick(()=>{r(null,this)})}login(e){let[t,r]=Oe(e);if(typeof this.options.email!="string")return te.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},a=f=>{this.api.request({a:"ug"},(d,p)=>{if(d)return f(d);this.name=p.name,this.user=p.u,this.options.autoload?this.reload(!0,g=>{if(g)return f(g);n()}):n()})};this.email=this.options.email.toLowerCase();let s=f=>{let d=ri(Q.Buffer.from(this.options.password));delete this.options.password;let p=new Ne(d),g=Se(p.stringhash(Q.Buffer.from(this.email))),b={a:"us",user:this.email,uh:g};o(b,p,f)},l=(f,d)=>{ni(Q.Buffer.from(this.options.password),f,(p,g)=>{if(p)return d(p);delete this.options.password;let b=new Ne(g.slice(0,16)),v=Se(g.slice(16)),h={a:"us",user:this.email,uh:v};o(h,b,d)})},o=(f,d,p)=>{this.api.request(f,(g,b)=>{if(g)return p(g);this.key=xe(b.k),d.decryptECB(this.key),this.aes=new Ne(this.key);let v=xe(b.csid),h=this.aes.decryptECB(xe(b.privk)),y=pi(h);if(!y)throw Error("invalid credentials");let _=Se(yi(v,y).slice(0,43));this.api.sid=this.sid=_,this.RSAPrivateKey=y,a(p)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return s(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=Oe(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(a,s)=>{if(a)return r(a);this.shareKeys=s.ok.reduce((l,o)=>{let f=o.h,d=this.aes.encryptECB(Q.Buffer.from(f+f));return si(xe(o.ha),d)&&(l[f]=this.aes.decryptECB(xe(o.k))),l},{}),s.f.forEach(l=>{var o;l=this._importFile(l),s.ph!==void 0&&(l.shareId=(o=s.ph.find(f=>f.h===l.nodeId))==null?void 0:o.ph,l.shared=!!l.shareId,l.shared&&(l.shareURL=`https://mega.nz/${l.directory?"folder":"file"}/${l.shareId}`,l.key&&(l.shareURL+=`#${Se(l.directory?this.shareKeys[l.nodeId]:l.key)}`)))}),r(null,this.mounts)}),this.api.on("sc",a=>{let s={};a.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete s[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(s).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new Ri(e,this);if(e.t===Li&&(this.root=t,t.name="Cloud Drive"),e.t===Pi&&(this.trash=t,t.name="Rubbish Bin"),e.t===ji&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=Oe(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,a)=>{n&&t(n);let s={};s.type=a.utype,s.spaceUsed=a.cstrg,s.spaceTotal=a.mstrg,s.downloadBandwidthTotal=a.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=a.caxfer||0,s.sharedBandwidthUsed=a.csxfer||0,s.sharedBandwidthLimit=a.srvratio,t(null,s)}),r}toJSON(){return{key:Se(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new Ti(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=Zt(e.key),t.aes=new Ne(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},Li=2,ji=3,Pi=4;We.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function Ye(){return await gn("music",void 0,{upgrade(e,t,r,n,a){e.createObjectStore("album",{keyPath:"folderName"}),e.createObjectStore("image",{keyPath:"id"}),e.createObjectStore("song",{keyPath:"id"})}})}async function Mi(){const e=await Ye(),t=e.getAll("album");return e.close(),t}async function Ui(e){const t=await Ye(),r=t.transaction("album","readwrite"),n=r.objectStore("album"),a=[];for(const s of e)a.push(n.put(s));await Promise.all(a),r.commit(),t.close()}const ur={};async function Zr(e){const t=nt(e);let r=ur[t];if(!r){const n=await xi(e);r=URL.createObjectURL(n),ur[t]=r}return r}async function xi(e){const t=nt(e),r=await Ye(),n=await r.get("image",t);if(r.close(),n)return n.blob;const a=await new We({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a]);return Ci(e,s),s}async function Ci(e,t){const n={id:nt(e),blob:t},a=await Ye();await a.add("image",n),a.close()}async function Qr(e){const t=nt(e),r=await Ye(),n=await r.get("song",t);if(r.close(),n)return n.blob;const a=await new We({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a],{type:"audio/mpeg"});return Di(e,s),s}async function Di(e,t){const n={id:nt(e),name:e.name,blob:t},a=await Ye();await a.add("song",n),a.close()}async function en(e){const t=await Ye(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(nt(n)))}async function Ni(){const e=await Ye(),t=await e.getAllKeys("song");return e.close(),t}function nt(e){return JSON.stringify({key:e.key,downloadId:e.downloadId})}const Fi={ROOT_URL:"https://mega.nz/folder/HrY2VQ4B#bHcKtZGU3gvx0yq1K2YvoQ"};async function $i(){const e=We.fromURL(Fi.ROOT_URL);return await e.loadAttributes(),e.children.map(t=>{const r=t.children.find(n=>n.name.endsWith(".jpg"));return{name:t.name.split("(")[0].trim(),folderName:t.name,image:r?{key:r.key,downloadId:r.downloadId,fileSize:r.size}:null,songs:t.children.filter(n=>n.name.endsWith(".mp3")).map(n=>({name:n.name.substring(0,n.name.length-4).trim(),link:{key:n.key,downloadId:n.downloadId,fileSize:n.size}}))}})}async function tn(e,t){try{ot.update(n=>({...n,isLoading:!0}));const r=await Qr({name:e.name,...e.link});ot.update(n=>(n.src!=null&&URL.revokeObjectURL(n.src),{...n,isLoading:!1,src:URL.createObjectURL(r),song:e.link,onFinish:t}))}catch{ot.update(r=>({...r,isLoading:!1,fileLink:null,src:null}))}}function fr(e,t,r){const n=e.slice();return n[11]=t[r],n}function Wi(e){let t,r,n,a;return{c(){t=se("button"),r=Ce("download"),this.h()},l(s){t=le(s,"BUTTON",{class:!0});var l=ce(t);r=De(l,"download"),l.forEach(Z),this.h()},h(){J(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){_e(s,t,l),oe(t,r),n||(a=rt(t,"click",e[5]),n=!0)},p:qe,d(s){s&&Z(t),n=!1,a()}}}function qi(e){let t,r;return{c(){t=se("div"),r=se("progress"),this.h()},l(n){t=le(n,"DIV",{class:!0});var a=ce(t);r=le(a,"PROGRESS",{class:!0}),ce(r).forEach(Z),a.forEach(Z),this.h()},h(){J(r,"class","progress w-56 mb-2 h-4"),J(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){_e(n,t,a),oe(t,r)},p:qe,d(n){n&&Z(t)}}}function Vi(e){let t,r,n;return{c(){t=se("figure"),r=se("img"),this.h()},l(a){t=le(a,"FIGURE",{});var s=ce(t);r=le(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Z),this.h()},h(){at(r.src,n=e[2])||J(r,"src",n),J(r,"alt","Albumbild"),J(r,"class","w-48 h-48 object-scale-down")},m(a,s){_e(a,t,s),oe(t,r)},p(a,s){s&4&&!at(r.src,n=a[2])&&J(r,"src",n)},d(a){a&&Z(t)}}}function cr(e){let t;return{c(){t=Ce("(Offline)")},l(r){t=De(r,"(Offline)")},m(r,n){_e(r,t,n)},d(r){r&&Z(t)}}}function hr(e){let t,r=e[11].name+"",n,a,s=e[1].includes(e[11].link),l,o,f,d,p=s&&cr();function g(){return e[8](e[11])}return{c(){t=se("li"),n=Ce(r),a=Ie(),p&&p.c(),l=Ie(),this.h()},l(b){t=le(b,"LI",{class:!0});var v=ce(t);n=De(v,r),a=Be(v),p&&p.l(v),l=Be(v),v.forEach(Z),this.h()},h(){J(t,"class",o=`cursor-pointer hover:underline ${e[11].link===e[3].song?"font-bold":""}`)},m(b,v){_e(b,t,v),oe(t,n),oe(t,a),p&&p.m(t,null),oe(t,l),f||(d=rt(t,"click",g),f=!0)},p(b,v){e=b,v&1&&r!==(r=e[11].name+"")&&Lt(n,r),v&3&&(s=e[1].includes(e[11].link)),s?p||(p=cr(),p.c(),p.m(t,l)):p&&(p.d(1),p=null),v&9&&o!==(o=`cursor-pointer hover:underline ${e[11].link===e[3].song?"font-bold":""}`)&&J(t,"class",o)},d(b){b&&Z(t),p&&p.d(),f=!1,d()}}}function zi(e){var y,_;let t,r,n,a,s,l,o,f,d;r=new _r({props:{title:(y=e[0].name)!=null?y:"L\xE4dt...",withCloseButton:!0,$$slots:{default:[Wi]},$$scope:{ctx:e}}});function p(A,E){return A[2]?Vi:qi}let g=p(e),b=g(e),v=(_=e[0].songs)!=null?_:[],h=[];for(let A=0;A<v.length;A+=1)h[A]=hr(fr(e,v,A));return{c(){t=se("main"),Ze(r.$$.fragment),n=Ie(),a=se("div"),s=se("div"),l=se("div"),b.c(),o=Ie(),f=se("ul");for(let A=0;A<h.length;A+=1)h[A].c();this.h()},l(A){t=le(A,"MAIN",{class:!0});var E=ce(t);Qe(r.$$.fragment,E),n=Be(E),a=le(E,"DIV",{class:!0});var B=ce(a);s=le(B,"DIV",{class:!0});var R=ce(s);l=le(R,"DIV",{class:!0});var M=ce(l);b.l(M),M.forEach(Z),o=Be(R),f=le(R,"UL",{class:!0});var S=ce(f);for(let j=0;j<h.length;j+=1)h[j].l(S);S.forEach(Z),R.forEach(Z),B.forEach(Z),E.forEach(Z),this.h()},h(){J(l,"class","mb-2"),J(f,"class","mx-2"),J(s,"class","card w-full md:w-96 bg-base-100 shadow-xl"),J(a,"class","flex-1 flex justify-center"),J(t,"class","flex-1 flex flex-col")},m(A,E){_e(A,t,E),et(r,t,null),oe(t,n),oe(t,a),oe(a,s),oe(s,l),b.m(l,null),oe(s,o),oe(s,f);for(let B=0;B<h.length;B+=1)h[B].m(f,null);d=!0},p(A,[E]){var R,M;const B={};if(E&1&&(B.title=(R=A[0].name)!=null?R:"L\xE4dt..."),E&16384&&(B.$$scope={dirty:E,ctx:A}),r.$set(B),g===(g=p(A))&&b?b.p(A,E):(b.d(1),b=g(A),b&&(b.c(),b.m(l,null))),E&27){v=(M=A[0].songs)!=null?M:[];let S;for(S=0;S<v.length;S+=1){const j=fr(A,v,S);h[S]?h[S].p(j,E):(h[S]=hr(j),h[S].c(),h[S].m(f,null))}for(;S<h.length;S+=1)h[S].d(1);h.length=v.length}},i(A){d||(Pe(r.$$.fragment,A),d=!0)},o(A){Me(r.$$.fragment,A),d=!1},d(A){A&&Z(t),tt(r),b.d(),wr(h,A)}}}function Gi(e,t,r){let n,a,s;Te(e,_t,h=>r(7,a=h)),Te(e,ot,h=>r(3,s=h));let{album:l}=t,o=[],f,d;async function p(h){await tn(h,()=>{const y=n.songs.indexOf(h)+1;p(n.songs.length<=y?n.songs[0]:n.songs[y])}),g()}async function g(){r(1,o=await en(n.songs.map(h=>h.link)))}async function b(){try{d=!0;for(const h of n.songs)await Qr({name:h.name,...h.link}),g()}finally{d=!1}}Wt(()=>{g()});const v=h=>p(h);return e.$$set=h=>{"album"in h&&r(6,l=h.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=a.find(h=>h.folderName===l)),e.$$.dirty&1&&n.image&&Zr(n.image).then(h=>r(2,f=h))},[n,o,f,s,p,b,l,a,v]}class Ki extends lt{constructor(t){super(),ut(this,t,Gi,zi,ft,{album:6})}}function Hi(e){let t,r;return{c(){t=se("div"),r=se("progress"),this.h()},l(n){t=le(n,"DIV",{class:!0});var a=ce(t);r=le(a,"PROGRESS",{class:!0}),ce(r).forEach(Z),a.forEach(Z),this.h()},h(){J(r,"class","progress w-56 mb-2 h-4"),J(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){_e(n,t,a),oe(t,r)},p:qe,d(n){n&&Z(t)}}}function Yi(e){let t,r,n;return{c(){t=se("figure"),r=se("img"),this.h()},l(a){t=le(a,"FIGURE",{});var s=ce(t);r=le(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Z),this.h()},h(){at(r.src,n=e[1])||J(r,"src",n),J(r,"alt","Albumbild"),J(r,"class","w-48 h-48 object-scale-down")},m(a,s){_e(a,t,s),oe(t,r)},p(a,s){s&2&&!at(r.src,n=a[1])&&J(r,"src",n)},d(a){a&&Z(t)}}}function Ji(e){let t,r,n,a,s=e[0].name+"",l,o,f,d,p,g,b;function v(_,A){return _[1]?Yi:Hi}let h=v(e),y=h(e);return{c(){t=se("div"),y.c(),r=Ie(),n=se("div"),a=se("p"),l=Ce(s),o=Ie(),f=se("div"),d=se("a"),p=Ce("\xD6ffnen"),this.h()},l(_){t=le(_,"DIV",{id:!0,class:!0});var A=ce(t);y.l(A),r=Be(A),n=le(A,"DIV",{class:!0});var E=ce(n);a=le(E,"P",{class:!0});var B=ce(a);l=De(B,s),B.forEach(Z),E.forEach(Z),o=Be(A),f=le(A,"DIV",{class:!0});var R=ce(f);d=le(R,"A",{class:!0,href:!0});var M=ce(d);p=De(M,"\xD6ffnen"),M.forEach(Z),R.forEach(Z),A.forEach(Z),this.h()},h(){J(a,"class","card-title"),J(n,"class","card-body w-full md:w-96"),J(d,"class","btn btn-primary capitalize"),J(d,"href",g=`#album/${e[0].folderName}`),J(f,"class","card-actions justify-end"),J(t,"id",b=`album_card_${e[0].name}`),J(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(_,A){_e(_,t,A),y.m(t,null),oe(t,r),oe(t,n),oe(n,a),oe(a,l),oe(t,o),oe(t,f),oe(f,d),oe(d,p)},p(_,[A]){h===(h=v(_))&&y?y.p(_,A):(y.d(1),y=h(_),y&&(y.c(),y.m(t,r))),A&1&&s!==(s=_[0].name+"")&&Lt(l,s),A&1&&g!==(g=`#album/${_[0].folderName}`)&&J(d,"href",g),A&1&&b!==(b=`album_card_${_[0].name}`)&&J(t,"id",b)},i:qe,o:qe,d(_){_&&Z(t),y.d()}}}function Xi(e,t,r){let{album:n}=t,a,s,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!a&&(r(1,a=await Zr(n.image)),l.unobserve(s),l=null)}),Wt(()=>{s=document.getElementById(`album_card_${n.name}`),l.observe(s)}),rn(()=>{l==null||l.unobserve(s)}),e.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,a]}class Zi extends lt{constructor(t){super(),ut(this,t,Xi,Ji,ft,{album:0})}}function dr(e,t,r){const n=e.slice();return n[8]=t[r],n}function pr(e,t){let r,n,a;return n=new Zi({props:{album:t[8]}}),{key:e,first:null,c(){r=Qt(),Ze(n.$$.fragment),this.h()},l(s){r=Qt(),Qe(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,l){_e(s,r,l),et(n,s,l),a=!0},p(s,l){t=s;const o={};l&2&&(o.album=t[8]),n.$set(o)},i(s){a||(Pe(n.$$.fragment,s),a=!0)},o(s){Me(n.$$.fragment,s),a=!1},d(s){s&&Z(r),tt(n,s)}}}function Qi(e){let t,r,n,a,s=[],l=new Map,o,f,d,p=e[1];const g=b=>b[8].folderName;for(let b=0;b<p.length;b+=1){let v=dr(e,p,b),h=g(v);l.set(h,s[b]=pr(h,v))}return{c(){t=se("div"),r=se("input"),n=Ie(),a=se("div");for(let b=0;b<s.length;b+=1)s[b].c();this.h()},l(b){t=le(b,"DIV",{class:!0});var v=ce(t);r=le(v,"INPUT",{class:!0,placeholder:!0,type:!0}),n=Be(v),a=le(v,"DIV",{class:!0});var h=ce(a);for(let y=0;y<s.length;y+=1)s[y].l(h);h.forEach(Z),v.forEach(Z),this.h()},h(){J(r,"class","input input-bordered w-full max-w-md mb-2 self-center"),J(r,"placeholder","Suche"),J(r,"type","search"),J(a,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),J(t,"class","flex-1 flex flex-col overflow-hidden")},m(b,v){_e(b,t,v),oe(t,r),Ot(r,e[0]),oe(t,n),oe(t,a);for(let h=0;h<s.length;h+=1)s[h].m(a,null);o=!0,f||(d=rt(r,"input",e[6]),f=!0)},p(b,[v]){v&1&&Ot(r,b[0]),v&2&&(p=b[1],qt(),s=nn(s,v,g,1,b,p,l,a,on,pr,null,dr),Vt())},i(b){if(!o){for(let v=0;v<p.length;v+=1)Pe(s[v]);o=!0}},o(b){for(let v=0;v<s.length;v+=1)Me(s[v]);o=!1},d(b){b&&Z(t);for(let v=0;v<s.length;v+=1)s[v].d();f=!1,d()}}}function eo(e,t,r){let n,a,s,l;Te(e,_t,g=>r(3,a=g)),Te(e,Rt,g=>r(4,s=g)),Te(e,mt,g=>r(5,l=g));let o=navigator.onLine?a:[],f="";async function d(g,b){if(!g){const v=await Ni();r(2,o=o.filter(h=>h.songs.some(y=>v.includes(nt(y.link)))))}r(2,o=o.sort((v,h)=>v.name>h.name?1:-1))}function p(){f=this.value,r(0,f)}return e.$$.update=()=>{e.$$.dirty&56&&d(l&&!s),e.$$.dirty&5&&r(1,n=o.filter(g=>f.toLocaleLowerCase().split(" ").every(b=>g.name.toLocaleLowerCase().includes(b))))},[f,n,o,a,s,l,p]}class to extends lt{constructor(t){super(),ut(this,t,eo,Qi,ft,{})}}function yr(e,t,r){const n=e.slice();return n[12]=t[r],n}function gr(e){let t;return{c(){t=Ce("(Offline)")},l(r){t=De(r,"(Offline)")},m(r,n){_e(r,t,n)},d(r){r&&Z(t)}}}function br(e){let t,r=e[12].name+"",n,a,s=e[1].includes(e[12].link),l,o,f,d,p=s&&gr();function g(){return e[11](e[12])}return{c(){t=se("li"),n=Ce(r),a=Ie(),p&&p.c(),l=Ie(),this.h()},l(b){t=le(b,"LI",{class:!0});var v=ce(t);n=De(v,r),a=Be(v),p&&p.l(v),l=Be(v),v.forEach(Z),this.h()},h(){J(t,"class",o=`cursor-pointer ${e[12].link===e[3].song?"font-bold":""}`)},m(b,v){_e(b,t,v),oe(t,n),oe(t,a),p&&p.m(t,null),oe(t,l),f||(d=rt(t,"click",g),f=!0)},p(b,v){e=b,v&4&&r!==(r=e[12].name+"")&&Lt(n,r),v&6&&(s=e[1].includes(e[12].link)),s?p||(p=gr(),p.c(),p.m(t,l)):p&&(p.d(1),p=null),v&12&&o!==(o=`cursor-pointer ${e[12].link===e[3].song?"font-bold":""}`)&&J(t,"class",o)},d(b){b&&Z(t),p&&p.d(),f=!1,d()}}}function ro(e){let t,r,n,a,s,l,o=e[2],f=[];for(let d=0;d<o.length;d+=1)f[d]=br(yr(e,o,d));return{c(){t=se("div"),r=se("input"),n=Ie(),a=se("ul");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){t=le(d,"DIV",{class:!0});var p=ce(t);r=le(p,"INPUT",{class:!0,placeholder:!0,type:!0}),n=Be(p),a=le(p,"UL",{class:!0});var g=ce(a);for(let b=0;b<f.length;b+=1)f[b].l(g);g.forEach(Z),p.forEach(Z),this.h()},h(){J(r,"class","input input-bordered w-full max-w-md mb-2 self-center"),J(r,"placeholder","Suche"),J(r,"type","search"),J(a,"class","flex-1 overflow-auto mx-2"),J(t,"class","flex-1 flex flex-col justify-center")},m(d,p){_e(d,t,p),oe(t,r),Ot(r,e[0]),oe(t,n),oe(t,a);for(let g=0;g<f.length;g+=1)f[g].m(a,null);s||(l=rt(r,"input",e[10]),s=!0)},p(d,[p]){if(p&1&&Ot(r,d[0]),p&30){o=d[2];let g;for(g=0;g<o.length;g+=1){const b=yr(d,o,g);f[g]?f[g].p(b,p):(f[g]=br(b),f[g].c(),f[g].m(a,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=o.length}},i:qe,o:qe,d(d){d&&Z(t),wr(f,d),s=!1,l()}}}function no(e,t,r){let n,a,s,l,o,f,d;Te(e,Rt,y=>r(7,l=y)),Te(e,mt,y=>r(8,o=y)),Te(e,_t,y=>r(9,f=y)),Te(e,ot,y=>r(3,d=y));let p="",g=[];async function b(y){tn(y,()=>{const _=a.indexOf(y)+1;b(a.length<=_?a[0]:a[_])})}function v(){p=this.value,r(0,p)}const h=y=>b(y);return e.$$.update=()=>{e.$$.dirty&512&&r(6,n=f.flatMap(y=>y.songs).sort((y,_)=>y.name>_.name?1:-1)),e.$$.dirty&64&&en(n.map(y=>y.link)).then(y=>r(1,g=y)),e.$$.dirty&450&&r(5,a=n.filter(y=>o&&!l||g.includes(y.link))),e.$$.dirty&33&&r(2,s=a.filter(y=>p.toLocaleLowerCase().split(" ").every(_=>y.name.toLocaleLowerCase().includes(_))))},[p,g,s,d,b,a,n,l,o,f,v,h]}class io extends lt{constructor(t){super(),ut(this,t,no,ro,ft,{})}}function oo(e){let t,r=e[0]?"wifi_off":"wifi",n,a,s,l,o,f;return{c(){t=se("button"),n=Ce(r),a=Ie(),s=se("a"),l=Ce("lyrics"),this.h()},l(d){t=le(d,"BUTTON",{class:!0});var p=ce(t);n=De(p,r),p.forEach(Z),a=Be(d),s=le(d,"A",{class:!0,href:!0});var g=ce(s);l=De(g,"lyrics"),g.forEach(Z),this.h()},h(){J(t,"class","material-symbols-outlined btn btn-sm btn-circle"),J(s,"class","material-symbols-outlined btn btn-sm btn-circle"),J(s,"href","/")},m(d,p){_e(d,t,p),oe(t,n),_e(d,a,p),_e(d,s,p),oe(s,l),o||(f=rt(t,"click",e[2]),o=!0)},p(d,p){p&1&&r!==(r=d[0]?"wifi_off":"wifi")&&Lt(n,r)},d(d){d&&Z(t),d&&Z(a),d&&Z(s),o=!1,f()}}}function ao(e){let t,r;return t=new to({}),{c(){Ze(t.$$.fragment)},l(n){Qe(t.$$.fragment,n)},m(n,a){et(t,n,a),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){tt(t,n)}}}function so(e){let t,r;return t=new io({}),{c(){Ze(t.$$.fragment)},l(n){Qe(t.$$.fragment,n)},m(n,a){et(t,n,a),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){tt(t,n)}}}function lo(e){let t,r,n,a,s,l,o,f,d,p,g,b,v,h,y,_;r=new _r({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[oo]},$$scope:{ctx:e}}});const A=[so,ao],E=[];function B(R,M){return R[1].url.hash===""?0:R[1].url.hash==="#alben"?1:-1}return~(h=B(e))&&(y=E[h]=A[h](e)),{c(){t=se("div"),Ze(r.$$.fragment),n=Ie(),a=se("div"),s=se("a"),l=Ce("Lieder"),f=Ie(),d=se("a"),p=Ce("Alben"),b=Ie(),v=se("div"),y&&y.c(),this.h()},l(R){t=le(R,"DIV",{class:!0});var M=ce(t);Qe(r.$$.fragment,M),n=Be(M),a=le(M,"DIV",{class:!0});var S=ce(a);s=le(S,"A",{class:!0,href:!0});var j=ce(s);l=De(j,"Lieder"),j.forEach(Z),f=Be(S),d=le(S,"A",{class:!0,href:!0});var C=ce(d);p=De(C,"Alben"),C.forEach(Z),S.forEach(Z),b=Be(M),v=le(M,"DIV",{class:!0});var z=ce(v);y&&y.l(z),z.forEach(Z),M.forEach(Z),this.h()},h(){J(s,"class",o=`tab ${e[1].url.hash===""?"tab-active":""}`),J(s,"href","/music"),J(d,"class",g=`tab ${e[1].url.hash==="#alben"?"tab-active":""}`),J(d,"href","/music#alben"),J(a,"class","tabs justify-center"),J(v,"class","flex-1 flex overflow-auto"),J(t,"class","flex-1 flex flex-col overflow-hidden")},m(R,M){_e(R,t,M),et(r,t,null),oe(t,n),oe(t,a),oe(a,s),oe(s,l),oe(a,f),oe(a,d),oe(d,p),oe(t,b),oe(t,v),~h&&E[h].m(v,null),_=!0},p(R,[M]){const S={};M&9&&(S.$$scope={dirty:M,ctx:R}),r.$set(S),(!_||M&2&&o!==(o=`tab ${R[1].url.hash===""?"tab-active":""}`))&&J(s,"class",o),(!_||M&2&&g!==(g=`tab ${R[1].url.hash==="#alben"?"tab-active":""}`))&&J(d,"class",g);let j=h;h=B(R),h!==j&&(y&&(qt(),Me(E[j],1,1,()=>{E[j]=null}),Vt()),~h?(y=E[h],y||(y=E[h]=A[h](R),y.c()),Pe(y,1),y.m(v,null)):y=null)},i(R){_||(Pe(r.$$.fragment,R),Pe(y),_=!0)},o(R){Me(r.$$.fragment,R),Me(y),_=!1},d(R){R&&Z(t),tt(r),~h&&E[h].d()}}}function uo(e,t,r){let n,a;Te(e,Rt,l=>r(0,n=l)),Te(e,vr,l=>r(1,a=l));function s(){Rt.update(l=>!l)}return[n,a,s]}class fo extends lt{constructor(t){super(),ut(this,t,uo,lo,ft,{})}}function co(e){let t,r;return t=new Ki({props:{album:e[2]()}}),{c(){Ze(t.$$.fragment)},l(n){Qe(t.$$.fragment,n)},m(n,a){et(t,n,a),r=!0},p:qe,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){tt(t,n)}}}function ho(e){let t,r;return t=new fo({}),{c(){Ze(t.$$.fragment)},l(n){Qe(t.$$.fragment,n)},m(n,a){et(t,n,a),r=!0},p:qe,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){tt(t,n)}}}function mr(e){let t,r,n,a,s,l;function o(p,g){return p[1].isLoading?yo:po}let f=o(e),d=f(e);return{c(){d.c(),t=Ie(),r=se("div"),n=se("audio"),this.h()},l(p){d.l(p),t=Be(p),r=le(p,"DIV",{class:!0});var g=ce(r);n=le(g,"AUDIO",{class:!0,src:!0}),ce(n).forEach(Z),g.forEach(Z),this.h()},h(){J(n,"class","self-center mb-2"),n.controls=!0,n.autoplay=!0,at(n.src,a=e[1].src)||J(n,"src",a),J(r,"class","self-center")},m(p,g){d.m(p,g),_e(p,t,g),_e(p,r,g),oe(r,n),s||(l=rt(n,"ended",function(){an(e[1].onFinish)&&e[1].onFinish.apply(this,arguments)}),s=!0)},p(p,g){e=p,f!==(f=o(e))&&(d.d(1),d=f(e),d&&(d.c(),d.m(t.parentNode,t))),g&2&&!at(n.src,a=e[1].src)&&J(n,"src",a)},d(p){d.d(p),p&&Z(t),p&&Z(r),s=!1,l()}}}function po(e){let t;return{c(){t=se("div"),this.h()},l(r){t=le(r,"DIV",{class:!0}),ce(t).forEach(Z),this.h()},h(){J(t,"class","h-2 mb-2")},m(r,n){_e(r,t,n)},d(r){r&&Z(t)}}}function yo(e){let t;return{c(){t=se("progress"),this.h()},l(r){t=le(r,"PROGRESS",{class:!0}),ce(t).forEach(Z),this.h()},h(){J(t,"class","progress w-56 self-center mb-2")},m(r,n){_e(r,t,n)},d(r){r&&Z(t)}}}function go(e){let t,r,n,a,s,l,o;const f=[ho,co],d=[];function p(b,v){return v&1&&(n=null),b[0].url.hash===""||b[0].url.hash==="#alben"?0:(n==null&&(n=!!b[0].url.hash.startsWith("#album")),n?1:-1)}~(a=p(e,-1))&&(s=d[a]=f[a](e));let g=(e[1].src!=null||e[1].isLoading)&&mr(e);return{c(){t=se("div"),r=se("main"),s&&s.c(),l=Ie(),g&&g.c(),this.h()},l(b){t=le(b,"DIV",{class:!0});var v=ce(t);r=le(v,"MAIN",{class:!0});var h=ce(r);s&&s.l(h),h.forEach(Z),l=Be(v),g&&g.l(v),v.forEach(Z),this.h()},h(){J(r,"class","overflow-auto flex-1 flex flex-col"),J(t,"class","w-full h-full flex flex-col")},m(b,v){_e(b,t,v),oe(t,r),~a&&d[a].m(r,null),oe(t,l),g&&g.m(t,null),o=!0},p(b,[v]){let h=a;a=p(b,v),a===h?~a&&d[a].p(b,v):(s&&(qt(),Me(d[h],1,1,()=>{d[h]=null}),Vt()),~a?(s=d[a],s?s.p(b,v):(s=d[a]=f[a](b),s.c()),Pe(s,1),s.m(r,null)):s=null),b[1].src!=null||b[1].isLoading?g?g.p(b,v):(g=mr(b),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(b){o||(Pe(s),o=!0)},o(b){Me(s),o=!1},d(b){b&&Z(t),~a&&d[a].d(),g&&g.d()}}}function bo(e,t,r){let n,a;Te(e,vr,f=>r(0,n=f)),Te(e,ot,f=>r(1,a=f)),mt.set(navigator.onLine);const s=()=>mt.set(!0),l=()=>mt.set(!1);Wt(async()=>{sn()&&(Tt.getGlobalApi().userAgent=null);let f;return"wakeLock"in navigator&&(f=await navigator.wakeLock.request("screen")),Mi().then(_t.set),navigator.onLine&&await $i().then(async d=>{_t.set(d),await Ui(d)}),document.addEventListener("offline",l),document.addEventListener("online",s),()=>{document.removeEventListener("offline",l),document.removeEventListener("online",s),f.release()}});function o(){return decodeURI(n.url.hash.substring(7))}return[n,a,o]}class Eo extends lt{constructor(t){super(),ut(this,t,bo,go,ft,{})}}export{Eo as default};
