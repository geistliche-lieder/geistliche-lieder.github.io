import{S as se,i as le,s as ue,k as st,v as Xt,a as It,l as lt,m as ct,w as Zt,c as Bt,h as Z,n as Y,b as _t,x as Qt,F as ot,f as Pt,t as Mt,y as te,J as wr,G as Tt,o as We,q as Ct,r as Nt,K as ee,A as qt,u as Te,L as oe,M as en,N as Be,g as qe,O as rn,d as Ve,e as Qe,P as nn}from"../../../../chunks/index-9dd2fa00.js";import{p as vr}from"../../../../chunks/stores-f182b5e4.js";import{c as ie,d as ve,e as Oe,i as be}from"../../../../chunks/store-b2dce52a.js";import{T as _r}from"../../../../chunks/TitleBar-bab06775.js";const on=(t,e)=>e.some(r=>t instanceof r);let tr,er;function an(){return tr||(tr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sn(){return er||(er=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Er=new WeakMap,xe=new WeakMap,Sr=new WeakMap,je=new WeakMap,ze=new WeakMap;function ln(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",l)},s=()=>{r(zt(t.result)),a()},l=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",l)});return e.then(r=>{r instanceof IDBCursor&&Er.set(r,t)}).catch(()=>{}),ze.set(e,t),e}function un(t){if(xe.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",l),t.removeEventListener("abort",l)},s=()=>{r(),a()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",l),t.addEventListener("abort",l)});xe.set(t,e)}let Ce={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return xe.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sr.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return zt(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fn(t){Ce=t(Ce)}function cn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Pe(this),e,...r);return Sr.set(n,e.sort?e.sort():[e]),zt(n)}:sn().includes(t)?function(...e){return t.apply(Pe(this),e),zt(Er.get(this))}:function(...e){return zt(t.apply(Pe(this),e))}}function hn(t){return typeof t=="function"?cn(t):(t instanceof IDBTransaction&&un(t),on(t,an())?new Proxy(t,Ce):t)}function zt(t){if(t instanceof IDBRequest)return ln(t);if(je.has(t))return je.get(t);const e=hn(t);return e!==t&&(je.set(t,e),ze.set(e,t)),e}const Pe=t=>ze.get(t);function dn(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const l=indexedDB.open(t,e),o=zt(l);return n&&l.addEventListener("upgradeneeded",f=>{n(zt(l.result),f.oldVersion,f.newVersion,zt(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const pn=["get","getKey","getAll","getAllKeys","count"],yn=["put","add","delete","clear"],Me=new Map;function rr(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Me.get(e))return Me.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=yn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||pn.includes(r)))return;const s=async function(l,...o){const f=this.transaction(l,a?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&f.done]))[0]};return Me.set(e,s),s}fn(t=>({...t,get:(e,r,n)=>rr(e,r)||t.get(e,r,n),has:(e,r)=>!!rr(e,r)||t.has(e,r)}));var gn=Object.create,Ge=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,mn=Object.getOwnPropertyNames,wn=Object.getPrototypeOf,vn=Object.prototype.hasOwnProperty,_n=t=>Ge(t,"__esModule",{value:!0}),En=(t,e)=>()=>(t&&(e=t(t=0)),e),tt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of mn(e))!vn.call(t,a)&&(r||a!=="default")&&Ge(t,a,{get:()=>e[a],enumerable:!(n=bn(e,a))||n.enumerable});return t},Ut=(t,e)=>Sn(_n(Ge(t!=null?gn(wn(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),kn=tt(t=>{K(),t.byteLength=f,t.toByteArray=p,t.fromByteArray=_;var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=a.length;s<l;++s)e[s]=a[s],r[a.charCodeAt(s)]=s;var s,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(h){var y=h.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=h.indexOf("=");v===-1&&(v=y);var k=v===y?0:4-v%4;return[v,k]}function f(h){var y=o(h),v=y[0],k=y[1];return(v+k)*3/4-k}function d(h,y,v){return(y+v)*3/4-v}function p(h){var y,v=o(h),k=v[0],E=v[1],B=new n(d(h,k,E)),R=0,M=E>0?k-4:k,S;for(S=0;S<M;S+=4)y=r[h.charCodeAt(S)]<<18|r[h.charCodeAt(S+1)]<<12|r[h.charCodeAt(S+2)]<<6|r[h.charCodeAt(S+3)],B[R++]=y>>16&255,B[R++]=y>>8&255,B[R++]=y&255;return E===2&&(y=r[h.charCodeAt(S)]<<2|r[h.charCodeAt(S+1)]>>4,B[R++]=y&255),E===1&&(y=r[h.charCodeAt(S)]<<10|r[h.charCodeAt(S+1)]<<4|r[h.charCodeAt(S+2)]>>2,B[R++]=y>>8&255,B[R++]=y&255),B}function g(h){return e[h>>18&63]+e[h>>12&63]+e[h>>6&63]+e[h&63]}function b(h,y,v){for(var k,E=[],B=y;B<v;B+=3)k=(h[B]<<16&16711680)+(h[B+1]<<8&65280)+(h[B+2]&255),E.push(g(k));return E.join("")}function _(h){for(var y,v=h.length,k=v%3,E=[],B=16383,R=0,M=v-k;R<M;R+=B)E.push(b(h,R,R+B>M?M:R+B));return k===1?(y=h[v-1],E.push(e[y>>2]+e[y<<4&63]+"==")):k===2&&(y=(h[v-2]<<8)+h[v-1],E.push(e[y>>10]+e[y>>4&63]+e[y<<2&63]+"=")),E.join("")}}),An=tt(t=>{K(),t.read=function(e,r,n,a,s){var l,o,f=s*8-a-1,d=(1<<f)-1,p=d>>1,g=-7,b=n?s-1:0,_=n?-1:1,h=e[r+b];for(b+=_,l=h&(1<<-g)-1,h>>=-g,g+=f;g>0;l=l*256+e[r+b],b+=_,g-=8);for(o=l&(1<<-g)-1,l>>=-g,g+=a;g>0;o=o*256+e[r+b],b+=_,g-=8);if(l===0)l=1-p;else{if(l===d)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-p}return(h?-1:1)*o*Math.pow(2,l-a)},t.write=function(e,r,n,a,s,l){var o,f,d,p=l*8-s-1,g=(1<<p)-1,b=g>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:l-1,y=a?1:-1,v=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=g):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+b>=1?r+=_/d:r+=_*Math.pow(2,1-b),r*d>=2&&(o++,d/=2),o+b>=g?(f=0,o=g):o+b>=1?(f=(r*d-1)*Math.pow(2,s),o=o+b):(f=r*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;e[n+h]=f&255,h+=y,f/=256,s-=8);for(o=o<<s|f,p+=s;p>0;e[n+h]=o&255,h+=y,o/=256,p-=8);e[n+h-y]|=v*128}}),Se=tt(t=>{K();var e=kn(),r=An(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;var a=2147483647;t.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,c){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(i)}return f(i,u,c)}o.poolSize=8192;function f(i,u,c){if(typeof i=="string")return b(i,u);if(ArrayBuffer.isView(i))return h(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Rt(i,ArrayBuffer)||i&&Rt(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rt(i,SharedArrayBuffer)||i&&Rt(i.buffer,SharedArrayBuffer)))return y(i,u,c);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let A=i.valueOf&&i.valueOf();if(A!=null&&A!==i)return o.from(A,u,c);let T=v(i);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,c){return f(i,u,c)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function p(i,u,c){return d(i),i<=0?l(i):u!==void 0?typeof c=="string"?l(i).fill(u,c):l(i).fill(u):l(i)}o.alloc=function(i,u,c){return p(i,u,c)};function g(i){return d(i),l(i<0?0:k(i)|0)}o.allocUnsafe=function(i){return g(i)},o.allocUnsafeSlow=function(i){return g(i)};function b(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let c=B(i,u)|0,A=l(c),T=A.write(i,u);return T!==c&&(A=A.slice(0,T)),A}function _(i){let u=i.length<0?0:k(i.length)|0,c=l(u);for(let A=0;A<u;A+=1)c[A]=i[A]&255;return c}function h(i){if(Rt(i,Uint8Array)){let u=new Uint8Array(i);return y(u.buffer,u.byteOffset,u.byteLength)}return _(i)}function y(i,u,c){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(c||0))throw new RangeError('"length" is outside of buffer bounds');let A;return u===void 0&&c===void 0?A=new Uint8Array(i):c===void 0?A=new Uint8Array(i,u):A=new Uint8Array(i,u,c),Object.setPrototypeOf(A,o.prototype),A}function v(i){if(o.isBuffer(i)){let u=k(i.length)|0,c=l(u);return c.length===0||i.copy(c,0,0,u),c}if(i.length!==void 0)return typeof i.length!="number"||he(i.length)?l(0):_(i);if(i.type==="Buffer"&&Array.isArray(i.data))return _(i.data)}function k(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return i|0}function E(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Rt(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Rt(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let c=i.length,A=u.length;for(let T=0,x=Math.min(c,A);T<x;++T)if(i[T]!==u[T]){c=i[T],A=u[T];break}return c<A?-1:A<c?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let c;if(u===void 0)for(u=0,c=0;c<i.length;++c)u+=i[c].length;let A=o.allocUnsafe(u),T=0;for(c=0;c<i.length;++c){let x=i[c];if(Rt(x,Uint8Array))T+x.length>A.length?(o.isBuffer(x)||(x=o.from(x)),x.copy(A,T)):Uint8Array.prototype.set.call(A,x,T);else if(o.isBuffer(x))x.copy(A,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=x.length}return A};function B(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Rt(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let c=i.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&c===0)return 0;let T=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return yt(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Ft(i).length;default:if(T)return A?-1:yt(i).length;u=(""+u).toLowerCase(),T=!0}}o.byteLength=B;function R(i,u,c){let A=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,u>>>=0,c<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return vt(this,u,c);case"utf8":case"utf-8":return rt(this,u,c);case"ascii":return ht(this,u,c);case"latin1":case"binary":return mt(this,u,c);case"base64":return H(this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,u,c);default:if(A)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),A=!0}}o.prototype._isBuffer=!0;function M(i,u,c){let A=i[u];i[u]=i[c],i[c]=A}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)M(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)M(this,u,u+3),M(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)M(this,u,u+7),M(this,u+1,u+6),M(this,u+2,u+5),M(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?rt(this,0,i):R.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,c,A,T){if(Rt(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),c===void 0&&(c=i?i.length:0),A===void 0&&(A=0),T===void 0&&(T=this.length),u<0||c>i.length||A<0||T>this.length)throw new RangeError("out of range index");if(A>=T&&u>=c)return 0;if(A>=T)return-1;if(u>=c)return 1;if(u>>>=0,c>>>=0,A>>>=0,T>>>=0,this===i)return 0;let x=T-A,W=c-u,gt=Math.min(x,W),At=this.slice(A,T),wt=i.slice(u,c);for(let bt=0;bt<gt;++bt)if(At[bt]!==wt[bt]){x=At[bt],W=wt[bt];break}return x<W?-1:W<x?1:0};function S(i,u,c,A,T){if(i.length===0)return-1;if(typeof c=="string"?(A=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,he(c)&&(c=T?0:i.length-1),c<0&&(c=i.length+c),c>=i.length){if(T)return-1;c=i.length-1}else if(c<0)if(T)c=0;else return-1;if(typeof u=="string"&&(u=o.from(u,A)),o.isBuffer(u))return u.length===0?-1:j(i,u,c,A,T);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(i,u,c):Uint8Array.prototype.lastIndexOf.call(i,u,c):j(i,[u],c,A,T);throw new TypeError("val must be string, number or Buffer")}function j(i,u,c,A,T){let x=1,W=i.length,gt=u.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(i.length<2||u.length<2)return-1;x=2,W/=2,gt/=2,c/=2}function At(bt,Et){return x===1?bt[Et]:bt.readUInt16BE(Et*x)}let wt;if(T){let bt=-1;for(wt=c;wt<W;wt++)if(At(i,wt)===At(u,bt===-1?0:wt-bt)){if(bt===-1&&(bt=wt),wt-bt+1===gt)return bt*x}else bt!==-1&&(wt-=wt-bt),bt=-1}else for(c+gt>W&&(c=W-gt),wt=c;wt>=0;wt--){let bt=!0;for(let Et=0;Et<gt;Et++)if(At(i,wt+Et)!==At(u,Et)){bt=!1;break}if(bt)return wt}return-1}o.prototype.includes=function(i,u,c){return this.indexOf(i,u,c)!==-1},o.prototype.indexOf=function(i,u,c){return S(this,i,u,c,!0)},o.prototype.lastIndexOf=function(i,u,c){return S(this,i,u,c,!1)};function C(i,u,c,A){c=Number(c)||0;let T=i.length-c;A?(A=Number(A),A>T&&(A=T)):A=T;let x=u.length;A>x/2&&(A=x/2);let W;for(W=0;W<A;++W){let gt=parseInt(u.substr(W*2,2),16);if(he(gt))return W;i[c+W]=gt}return W}function z(i,u,c,A){return Vt(yt(u,i.length-c),i,c,A)}function V(i,u,c,A){return Vt(at(u),i,c,A)}function N(i,u,c,A){return Vt(Ft(u),i,c,A)}function q(i,u,c,A){return Vt(P(u,i.length-c),i,c,A)}o.prototype.write=function(i,u,c,A){if(u===void 0)A="utf8",c=this.length,u=0;else if(c===void 0&&typeof u=="string")A=u,c=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(c)?(c=c>>>0,A===void 0&&(A="utf8")):(A=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let T=this.length-u;if((c===void 0||c>T)&&(c=T),i.length>0&&(c<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let x=!1;for(;;)switch(A){case"hex":return C(this,i,u,c);case"utf8":case"utf-8":return z(this,i,u,c);case"ascii":case"latin1":case"binary":return V(this,i,u,c);case"base64":return N(this,i,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,i,u,c);default:if(x)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),x=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(i,u,c){return u===0&&c===i.length?e.fromByteArray(i):e.fromByteArray(i.slice(u,c))}function rt(i,u,c){c=Math.min(i.length,c);let A=[],T=u;for(;T<c;){let x=i[T],W=null,gt=x>239?4:x>223?3:x>191?2:1;if(T+gt<=c){let At,wt,bt,Et;switch(gt){case 1:x<128&&(W=x);break;case 2:At=i[T+1],(At&192)===128&&(Et=(x&31)<<6|At&63,Et>127&&(W=Et));break;case 3:At=i[T+1],wt=i[T+2],(At&192)===128&&(wt&192)===128&&(Et=(x&15)<<12|(At&63)<<6|wt&63,Et>2047&&(Et<55296||Et>57343)&&(W=Et));break;case 4:At=i[T+1],wt=i[T+2],bt=i[T+3],(At&192)===128&&(wt&192)===128&&(bt&192)===128&&(Et=(x&15)<<18|(At&63)<<12|(wt&63)<<6|bt&63,Et>65535&&Et<1114112&&(W=Et))}}W===null?(W=65533,gt=1):W>65535&&(W-=65536,A.push(W>>>10&1023|55296),W=56320|W&1023),A.push(W),T+=gt}return dt(A)}var it=4096;function dt(i){let u=i.length;if(u<=it)return String.fromCharCode.apply(String,i);let c="",A=0;for(;A<u;)c+=String.fromCharCode.apply(String,i.slice(A,A+=it));return c}function ht(i,u,c){let A="";c=Math.min(i.length,c);for(let T=u;T<c;++T)A+=String.fromCharCode(i[T]&127);return A}function mt(i,u,c){let A="";c=Math.min(i.length,c);for(let T=u;T<c;++T)A+=String.fromCharCode(i[T]);return A}function vt(i,u,c){let A=i.length;(!u||u<0)&&(u=0),(!c||c<0||c>A)&&(c=A);let T="";for(let x=u;x<c;++x)T+=Ae[i[x]];return T}function kt(i,u,c){let A=i.slice(u,c),T="";for(let x=0;x<A.length-1;x+=2)T+=String.fromCharCode(A[x]+A[x+1]*256);return T}o.prototype.slice=function(i,u){let c=this.length;i=~~i,u=u===void 0?c:~~u,i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),u<0?(u+=c,u<0&&(u=0)):u>c&&(u=c),u<i&&(u=i);let A=this.subarray(i,u);return Object.setPrototypeOf(A,o.prototype),A};function ft(i,u,c){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>c)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,c){i=i>>>0,u=u>>>0,c||ft(i,u,this.length);let A=this[i],T=1,x=0;for(;++x<u&&(T*=256);)A+=this[i+x]*T;return A},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,c){i=i>>>0,u=u>>>0,c||ft(i,u,this.length);let A=this[i+--u],T=1;for(;u>0&&(T*=256);)A+=this[i+--u]*T;return A},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||ft(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||ft(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||ft(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=Lt(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let A=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,T=this[++i]+this[++i]*2**8+this[++i]*2**16+c*2**24;return BigInt(A)+(BigInt(T)<<BigInt(32))}),o.prototype.readBigUInt64BE=Lt(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let A=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],T=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c;return(BigInt(A)<<BigInt(32))+BigInt(T)}),o.prototype.readIntLE=function(i,u,c){i=i>>>0,u=u>>>0,c||ft(i,u,this.length);let A=this[i],T=1,x=0;for(;++x<u&&(T*=256);)A+=this[i+x]*T;return T*=128,A>=T&&(A-=Math.pow(2,8*u)),A},o.prototype.readIntBE=function(i,u,c){i=i>>>0,u=u>>>0,c||ft(i,u,this.length);let A=u,T=1,x=this[i+--A];for(;A>0&&(T*=256);)x+=this[i+--A]*T;return T*=128,x>=T&&(x-=Math.pow(2,8*u)),x},o.prototype.readInt8=function(i,u){return i=i>>>0,u||ft(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||ft(i,2,this.length);let c=this[i]|this[i+1]<<8;return c&32768?c|4294901760:c},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||ft(i,2,this.length);let c=this[i+1]|this[i]<<8;return c&32768?c|4294901760:c},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=Lt(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let A=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(c<<24);return(BigInt(A)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=Lt(function(i){i=i>>>0,m(i,"offset");let u=this[i],c=this[i+7];(u===void 0||c===void 0)&&w(i,this.length-8);let A=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(A)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||ft(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||ft(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||ft(i,8,this.length),r.read(this,i,!1,52,8)};function O(i,u,c,A,T,x){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>T||u<x)throw new RangeError('"value" argument is out of bounds');if(c+A>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,c,A){if(i=+i,u=u>>>0,c=c>>>0,!A){let W=Math.pow(2,8*c)-1;O(this,i,u,c,W,0)}let T=1,x=0;for(this[u]=i&255;++x<c&&(T*=256);)this[u+x]=i/T&255;return u+c},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,c,A){if(i=+i,u=u>>>0,c=c>>>0,!A){let W=Math.pow(2,8*c)-1;O(this,i,u,c,W,0)}let T=c-1,x=1;for(this[u+T]=i&255;--T>=0&&(x*=256);)this[u+T]=i/x&255;return u+c},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function U(i,u,c,A,T){nt(u,A,T,i,c,7);let x=Number(u&BigInt(4294967295));i[c++]=x,x=x>>8,i[c++]=x,x=x>>8,i[c++]=x,x=x>>8,i[c++]=x;let W=Number(u>>BigInt(32)&BigInt(4294967295));return i[c++]=W,W=W>>8,i[c++]=W,W=W>>8,i[c++]=W,W=W>>8,i[c++]=W,c}function $(i,u,c,A,T){nt(u,A,T,i,c,7);let x=Number(u&BigInt(4294967295));i[c+7]=x,x=x>>8,i[c+6]=x,x=x>>8,i[c+5]=x,x=x>>8,i[c+4]=x;let W=Number(u>>BigInt(32)&BigInt(4294967295));return i[c+3]=W,W=W>>8,i[c+2]=W,W=W>>8,i[c+1]=W,W=W>>8,i[c]=W,c+8}o.prototype.writeBigUInt64LE=Lt(function(i,u=0){return U(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Lt(function(i,u=0){return $(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,c,A){if(i=+i,u=u>>>0,!A){let gt=Math.pow(2,8*c-1);O(this,i,u,c,gt-1,-gt)}let T=0,x=1,W=0;for(this[u]=i&255;++T<c&&(x*=256);)i<0&&W===0&&this[u+T-1]!==0&&(W=1),this[u+T]=(i/x>>0)-W&255;return u+c},o.prototype.writeIntBE=function(i,u,c,A){if(i=+i,u=u>>>0,!A){let gt=Math.pow(2,8*c-1);O(this,i,u,c,gt-1,-gt)}let T=c-1,x=1,W=0;for(this[u+T]=i&255;--T>=0&&(x*=256);)i<0&&W===0&&this[u+T+1]!==0&&(W=1),this[u+T]=(i/x>>0)-W&255;return u+c},o.prototype.writeInt8=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,c){return i=+i,u=u>>>0,c||O(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=Lt(function(i,u=0){return U(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Lt(function(i,u=0){return $(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(i,u,c,A,T,x){if(c+A>i.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function pt(i,u,c,A,T){return u=+u,c=c>>>0,T||J(i,u,c,4),r.write(i,u,c,A,23,4),c+4}o.prototype.writeFloatLE=function(i,u,c){return pt(this,i,u,!0,c)},o.prototype.writeFloatBE=function(i,u,c){return pt(this,i,u,!1,c)};function ut(i,u,c,A,T){return u=+u,c=c>>>0,T||J(i,u,c,8),r.write(i,u,c,A,52,8),c+8}o.prototype.writeDoubleLE=function(i,u,c){return ut(this,i,u,!0,c)},o.prototype.writeDoubleBE=function(i,u,c){return ut(this,i,u,!1,c)},o.prototype.copy=function(i,u,c,A){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(c||(c=0),!A&&A!==0&&(A=this.length),u>=i.length&&(u=i.length),u||(u=0),A>0&&A<c&&(A=c),A===c||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),i.length-u<A-c&&(A=i.length-u+c);let T=A-c;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,c,A):Uint8Array.prototype.set.call(i,this.subarray(c,A),u),T},o.prototype.fill=function(i,u,c,A){if(typeof i=="string"){if(typeof u=="string"?(A=u,u=0,c=this.length):typeof c=="string"&&(A=c,c=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!o.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(i.length===1){let x=i.charCodeAt(0);(A==="utf8"&&x<128||A==="latin1")&&(i=x)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<c)throw new RangeError("Out of range index");if(c<=u)return this;u=u>>>0,c=c===void 0?this.length:c>>>0,i||(i=0);let T;if(typeof i=="number")for(T=u;T<c;++T)this[T]=i;else{let x=o.isBuffer(i)?i:o.from(i,A),W=x.length;if(W===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(T=0;T<c-u;++T)this[T+u]=x[T%W]}return this};var I={};function L(i,u,c){I[i]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(i,u,c){let A=`The value of "${i}" is out of range.`,T=c;return Number.isInteger(c)&&Math.abs(c)>2**32?T=D(String(c)):typeof c=="bigint"&&(T=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(T=D(T)),T+="n"),A+=` It must be ${u}. Received ${T}`,A},RangeError);function D(i){let u="",c=i.length,A=i[0]==="-"?1:0;for(;c>=A+4;c-=3)u=`_${i.slice(c-3,c)}${u}`;return`${i.slice(0,c)}${u}`}function X(i,u,c){m(u,"offset"),(i[u]===void 0||i[u+c]===void 0)&&w(u,i.length-(c+1))}function nt(i,u,c,A,T,x){if(i>c||i<u){let W=typeof u=="bigint"?"n":"",gt;throw x>3?u===0||u===BigInt(0)?gt=`>= 0${W} and < 2${W} ** ${(x+1)*8}${W}`:gt=`>= -(2${W} ** ${(x+1)*8-1}${W}) and < 2 ** ${(x+1)*8-1}${W}`:gt=`>= ${u}${W} and <= ${c}${W}`,new I.ERR_OUT_OF_RANGE("value",gt,i)}X(A,T,x)}function m(i,u){if(typeof i!="number")throw new I.ERR_INVALID_ARG_TYPE(u,"number",i)}function w(i,u,c){throw Math.floor(i)!==i?(m(i,c),new I.ERR_OUT_OF_RANGE(c||"offset","an integer",i)):u<0?new I.ERR_BUFFER_OUT_OF_BOUNDS:new I.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${u}`,i)}var F=/[^+/0-9A-Za-z-_]/g;function G(i){if(i=i.split("=")[0],i=i.trim().replace(F,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function yt(i,u){u=u||1/0;let c,A=i.length,T=null,x=[];for(let W=0;W<A;++W){if(c=i.charCodeAt(W),c>55295&&c<57344){if(!T){if(c>56319){(u-=3)>-1&&x.push(239,191,189);continue}else if(W+1===A){(u-=3)>-1&&x.push(239,191,189);continue}T=c;continue}if(c<56320){(u-=3)>-1&&x.push(239,191,189),T=c;continue}c=(T-55296<<10|c-56320)+65536}else T&&(u-=3)>-1&&x.push(239,191,189);if(T=null,c<128){if((u-=1)<0)break;x.push(c)}else if(c<2048){if((u-=2)<0)break;x.push(c>>6|192,c&63|128)}else if(c<65536){if((u-=3)<0)break;x.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((u-=4)<0)break;x.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return x}function at(i){let u=[];for(let c=0;c<i.length;++c)u.push(i.charCodeAt(c)&255);return u}function P(i,u){let c,A,T,x=[];for(let W=0;W<i.length&&!((u-=2)<0);++W)c=i.charCodeAt(W),A=c>>8,T=c%256,x.push(T),x.push(A);return x}function Ft(i){return e.toByteArray(G(i))}function Vt(i,u,c,A){let T;for(T=0;T<A&&!(T+c>=u.length||T>=i.length);++T)u[T+c]=i[T];return T}function Rt(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function he(i){return i!==i}var Ae=function(){let i="0123456789abcdef",u=new Array(256);for(let c=0;c<16;++c){let A=c*16;for(let T=0;T<16;++T)u[A+T]=i[c]+i[T]}return u}();function Lt(i){return typeof BigInt>"u"?de:i}function de(){throw new Error("BigInt not supported")}}),Q,et,Kt,K=En(()=>{Q=Ut(Se(),1),et={env:{},nextTick:(t,...e)=>{globalThis.setTimeout(t,0,...e)}},Kt=globalThis}),ke=tt((t,e)=>{K();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(S,j,C){return Function.prototype.apply.call(S,j,C)},a;r&&typeof r.ownKeys=="function"?a=r.ownKeys:Object.getOwnPropertySymbols?a=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:a=function(S){return Object.getOwnPropertyNames(S)};function s(S){console&&console.warn&&console.warn(S)}var l=Number.isNaN||function(S){return S!==S};function o(){o.init.call(this)}e.exports=o,e.exports.once=B,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");f=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||l(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function p(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(S){for(var j=[],C=1;C<arguments.length;C++)j.push(arguments[C]);var z=S==="error",V=this._events;if(V!==void 0)z=z&&V.error===void 0;else if(!z)return!1;if(z){var N;if(j.length>0&&(N=j[0]),N instanceof Error)throw N;var q=new Error("Unhandled error."+(N?" ("+N.message+")":""));throw q.context=N,q}var H=V[S];if(H===void 0)return!1;if(typeof H=="function")n(H,this,j);else for(var rt=H.length,it=v(H,rt),C=0;C<rt;++C)n(it[C],this,j);return!0};function g(S,j,C,z){var V,N,q;if(d(C),N=S._events,N===void 0?(N=S._events=Object.create(null),S._eventsCount=0):(N.newListener!==void 0&&(S.emit("newListener",j,C.listener?C.listener:C),N=S._events),q=N[j]),q===void 0)q=N[j]=C,++S._eventsCount;else if(typeof q=="function"?q=N[j]=z?[C,q]:[q,C]:z?q.unshift(C):q.push(C),V=p(S),V>0&&q.length>V&&!q.warned){q.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=S,H.type=j,H.count=q.length,s(H)}return S}o.prototype.addListener=function(S,j){return g(this,S,j,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(S,j){return g(this,S,j,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(S,j,C){var z={fired:!1,wrapFn:void 0,target:S,type:j,listener:C},V=b.bind(z);return V.listener=C,z.wrapFn=V,V}o.prototype.once=function(S,j){return d(j),this.on(S,_(this,S,j)),this},o.prototype.prependOnceListener=function(S,j){return d(j),this.prependListener(S,_(this,S,j)),this},o.prototype.removeListener=function(S,j){var C,z,V,N,q;if(d(j),z=this._events,z===void 0)return this;if(C=z[S],C===void 0)return this;if(C===j||C.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete z[S],z.removeListener&&this.emit("removeListener",S,C.listener||j));else if(typeof C!="function"){for(V=-1,N=C.length-1;N>=0;N--)if(C[N]===j||C[N].listener===j){q=C[N].listener,V=N;break}if(V<0)return this;V===0?C.shift():k(C,V),C.length===1&&(z[S]=C[0]),z.removeListener!==void 0&&this.emit("removeListener",S,q||j)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(S){var j,C,z;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[S]),this;if(arguments.length===0){var V=Object.keys(C),N;for(z=0;z<V.length;++z)N=V[z],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=C[S],typeof j=="function")this.removeListener(S,j);else if(j!==void 0)for(z=j.length-1;z>=0;z--)this.removeListener(S,j[z]);return this};function h(S,j,C){var z=S._events;if(z===void 0)return[];var V=z[j];return V===void 0?[]:typeof V=="function"?C?[V.listener||V]:[V]:C?E(V):v(V,V.length)}o.prototype.listeners=function(S){return h(this,S,!0)},o.prototype.rawListeners=function(S){return h(this,S,!1)},o.listenerCount=function(S,j){return typeof S.listenerCount=="function"?S.listenerCount(j):y.call(S,j)},o.prototype.listenerCount=y;function y(S){var j=this._events;if(j!==void 0){var C=j[S];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]};function v(S,j){for(var C=new Array(j),z=0;z<j;++z)C[z]=S[z];return C}function k(S,j){for(;j+1<S.length;j++)S[j]=S[j+1];S.pop()}function E(S){for(var j=new Array(S.length),C=0;C<j.length;++C)j[C]=S[C].listener||S[C];return j}function B(S,j){return new Promise(function(C,z){function V(q){S.removeListener(j,N),z(q)}function N(){typeof S.removeListener=="function"&&S.removeListener("error",V),C([].slice.call(arguments))}M(S,j,N,{once:!0}),j!=="error"&&R(S,V,{once:!0})})}function R(S,j,C){typeof S.on=="function"&&M(S,"error",j,C)}function M(S,j,C,z){if(typeof S.on=="function")z.once?S.once(j,C):S.on(j,C);else if(typeof S.addEventListener=="function")S.addEventListener(j,function V(N){z.once&&S.removeEventListener(j,V),C(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}}),kr=tt((t,e)=>{K(),e.exports=ke().EventEmitter}),Ar=tt(()=>{K()}),In=tt((t,e)=>{K();function r(h,y){var v=Object.keys(h);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(h);y&&(k=k.filter(function(E){return Object.getOwnPropertyDescriptor(h,E).enumerable})),v.push.apply(v,k)}return v}function n(h){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?r(Object(v),!0).forEach(function(k){a(h,k,v[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):r(Object(v)).forEach(function(k){Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(v,k))})}return h}function a(h,y,v){return y in h?Object.defineProperty(h,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[y]=v,h}function s(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}function l(h,y){for(var v=0;v<y.length;v++){var k=y[v];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}function o(h,y,v){return y&&l(h.prototype,y),v&&l(h,v),h}var f=Se(),d=f.Buffer,p=Ar(),g=p.inspect,b=g&&g.custom||"inspect";function _(h,y,v){d.prototype.copy.call(h,y,v)}e.exports=function(){function h(){s(this,h),this.head=null,this.tail=null,this.length=0}return o(h,[{key:"push",value:function(y){var v={data:y,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(y){var v={data:y,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var v=this.head,k=""+v.data;v=v.next;)k+=y+v.data;return k}},{key:"concat",value:function(y){if(this.length===0)return d.alloc(0);for(var v=d.allocUnsafe(y>>>0),k=this.head,E=0;k;)_(k.data,v,E),E+=k.data.length,k=k.next;return v}},{key:"consume",value:function(y,v){var k;return y<this.head.data.length?(k=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?k=this.shift():k=v?this._getString(y):this._getBuffer(y),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var v=this.head,k=1,E=v.data;for(y-=E.length;v=v.next;){var B=v.data,R=y>B.length?B.length:y;if(R===B.length?E+=B:E+=B.slice(0,y),y-=R,y===0){R===B.length?(++k,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=B.slice(R));break}++k}return this.length-=k,E}},{key:"_getBuffer",value:function(y){var v=d.allocUnsafe(y),k=this.head,E=1;for(k.data.copy(v),y-=k.data.length;k=k.next;){var B=k.data,R=y>B.length?B.length:y;if(B.copy(v,v.length-y,0,R),y-=R,y===0){R===B.length?(++E,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=B.slice(R));break}++E}return this.length-=E,v}},{key:b,value:function(y,v){return g(this,n({},v,{depth:0,customInspect:!1}))}}]),h}()}),Ir=tt((t,e)=>{K();function r(f,d){var p=this,g=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return g||b?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,et.nextTick(l,this,f)):et.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(_){!d&&_?p._writableState?p._writableState.errorEmitted?et.nextTick(a,p):(p._writableState.errorEmitted=!0,et.nextTick(n,p,_)):et.nextTick(n,p,_):d?(et.nextTick(a,p),d(_)):et.nextTick(a,p)}),this)}function n(f,d){l(f,d),a(f)}function a(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var p=f._readableState,g=f._writableState;p&&p.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}e.exports={destroy:r,undestroy:s,errorOrDestroy:o}}),fe=tt((t,e)=>{K();function r(d,p){d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.__proto__=p}var n={};function a(d,p,g){g||(g=Error);function b(h,y,v){return typeof p=="string"?p:p(h,y,v)}var _=function(h){r(y,h);function y(v,k,E){return h.call(this,b(v,k,E))||this}return y}(g);_.prototype.name=g.name,_.prototype.code=d,n[d]=_}function s(d,p){if(Array.isArray(d)){var g=d.length;return d=d.map(function(b){return String(b)}),g>2?"one of ".concat(p," ").concat(d.slice(0,g-1).join(", "),", or ")+d[g-1]:g===2?"one of ".concat(p," ").concat(d[0]," or ").concat(d[1]):"of ".concat(p," ").concat(d[0])}else return"of ".concat(p," ").concat(String(d))}function l(d,p,g){return d.substr(!g||g<0?0:+g,p.length)===p}function o(d,p,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-p.length,g)===p}function f(d,p,g){return typeof g!="number"&&(g=0),g+p.length>d.length?!1:d.indexOf(p,g)!==-1}a("ERR_INVALID_OPT_VALUE",function(d,p){return'The value "'+p+'" is invalid for option "'+d+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(d,p,g){var b;typeof p=="string"&&l(p,"not ")?(b="must not be",p=p.replace(/^not /,"")):b="must be";var _;if(o(d," argument"))_="The ".concat(d," ").concat(b," ").concat(s(p,"type"));else{var h=f(d,".")?"property":"argument";_='The "'.concat(d,'" ').concat(h," ").concat(b," ").concat(s(p,"type"))}return _+=". Received type ".concat(typeof g),_},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n}),Br=tt((t,e)=>{K();var r=fe().codes.ERR_INVALID_OPT_VALUE;function n(s,l,o){return s.highWaterMark!=null?s.highWaterMark:l?s[o]:null}function a(s,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var p=f?o:"highWaterMark";throw new r(p,d)}return Math.floor(d)}return s.objectMode?16:16*1024}e.exports={getHighWaterMark:a}}),Ht=tt((t,e)=>{K(),typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}}}),Bn=tt((t,e)=>{K(),e.exports=r;function r(a,s){if(n("noDeprecation"))return a;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(s);n("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return a.apply(this,arguments)}return o}function n(a){try{if(!Kt.localStorage)return!1}catch{return!1}var s=Kt.localStorage[a];return s==null?!1:String(s).toLowerCase()==="true"}}),Or=tt((t,e)=>{K(),e.exports=V;function r(I){var L=this;this.next=null,this.entry=null,this.finish=function(){ut(L,I)}}var n;V.WritableState=C;var a={deprecate:Bn()},s=kr(),l=Se().Buffer,o=Kt.Uint8Array||function(){};function f(I){return l.from(I)}function d(I){return l.isBuffer(I)||I instanceof o}var p=Ir(),g=Br(),b=g.getHighWaterMark,_=fe().codes,h=_.ERR_INVALID_ARG_TYPE,y=_.ERR_METHOD_NOT_IMPLEMENTED,v=_.ERR_MULTIPLE_CALLBACK,k=_.ERR_STREAM_CANNOT_PIPE,E=_.ERR_STREAM_DESTROYED,B=_.ERR_STREAM_NULL_VALUES,R=_.ERR_STREAM_WRITE_AFTER_END,M=_.ERR_UNKNOWN_ENCODING,S=p.errorOrDestroy;Ht()(V,s);function j(){}function C(I,L,D){n=n||ae(),I=I||{},typeof D!="boolean"&&(D=L instanceof n),this.objectMode=!!I.objectMode,D&&(this.objectMode=this.objectMode||!!I.writableObjectMode),this.highWaterMark=b(this,I,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var X=I.decodeStrings===!1;this.decodeStrings=!X,this.defaultEncoding=I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(nt){mt(L,nt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=I.emitClose!==!1,this.autoDestroy=!!I.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}C.prototype.getBuffer=function(){for(var I=this.bufferedRequest,L=[];I;)L.push(I),I=I.next;return L},function(){try{Object.defineProperty(C.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(I){return z.call(this,I)?!0:this!==V?!1:I&&I._writableState instanceof C}})):z=function(I){return I instanceof this};function V(I){n=n||ae();var L=this instanceof n;if(!L&&!z.call(V,this))return new V(I);this._writableState=new C(I,this,L),this.writable=!0,I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final)),s.call(this)}V.prototype.pipe=function(){S(this,new k)};function N(I,L){var D=new R;S(I,D),et.nextTick(L,D)}function q(I,L,D,X){var nt;return D===null?nt=new B:typeof D!="string"&&!L.objectMode&&(nt=new h("chunk",["string","Buffer"],D)),nt?(S(I,nt),et.nextTick(X,nt),!1):!0}V.prototype.write=function(I,L,D){var X=this._writableState,nt=!1,m=!X.objectMode&&d(I);return m&&!l.isBuffer(I)&&(I=f(I)),typeof L=="function"&&(D=L,L=null),m?L="buffer":L||(L=X.defaultEncoding),typeof D!="function"&&(D=j),X.ending?N(this,D):(m||q(this,X,I,D))&&(X.pendingcb++,nt=rt(this,X,m,I,L,D)),nt},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,!I.writing&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&ft(this,I))},V.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new M(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function H(I,L,D){return!I.objectMode&&I.decodeStrings!==!1&&typeof L=="string"&&(L=l.from(L,D)),L}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function rt(I,L,D,X,nt,m){if(!D){var w=H(L,X,nt);X!==w&&(D=!0,nt="buffer",X=w)}var F=L.objectMode?1:X.length;L.length+=F;var G=L.length<L.highWaterMark;if(G||(L.needDrain=!0),L.writing||L.corked){var yt=L.lastBufferedRequest;L.lastBufferedRequest={chunk:X,encoding:nt,isBuf:D,callback:m,next:null},yt?yt.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else it(I,L,!1,F,X,nt,m);return G}function it(I,L,D,X,nt,m,w){L.writelen=X,L.writecb=w,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new E("write")):D?I._writev(nt,L.onwrite):I._write(nt,m,L.onwrite),L.sync=!1}function dt(I,L,D,X,nt){--L.pendingcb,D?(et.nextTick(nt,X),et.nextTick(J,I,L),I._writableState.errorEmitted=!0,S(I,X)):(nt(X),I._writableState.errorEmitted=!0,S(I,X),J(I,L))}function ht(I){I.writing=!1,I.writecb=null,I.length-=I.writelen,I.writelen=0}function mt(I,L){var D=I._writableState,X=D.sync,nt=D.writecb;if(typeof nt!="function")throw new v;if(ht(D),L)dt(I,D,X,L,nt);else{var m=O(D)||I.destroyed;!m&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&ft(I,D),X?et.nextTick(vt,I,D,m,nt):vt(I,D,m,nt)}}function vt(I,L,D,X){D||kt(I,L),L.pendingcb--,X(),J(I,L)}function kt(I,L){L.length===0&&L.needDrain&&(L.needDrain=!1,I.emit("drain"))}function ft(I,L){L.bufferProcessing=!0;var D=L.bufferedRequest;if(I._writev&&D&&D.next){var X=L.bufferedRequestCount,nt=new Array(X),m=L.corkedRequestsFree;m.entry=D;for(var w=0,F=!0;D;)nt[w]=D,D.isBuf||(F=!1),D=D.next,w+=1;nt.allBuffers=F,it(I,L,!0,L.length,nt,"",m.finish),L.pendingcb++,L.lastBufferedRequest=null,m.next?(L.corkedRequestsFree=m.next,m.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;D;){var G=D.chunk,yt=D.encoding,at=D.callback,P=L.objectMode?1:G.length;if(it(I,L,!1,P,G,yt,at),D=D.next,L.bufferedRequestCount--,L.writing)break}D===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=D,L.bufferProcessing=!1}V.prototype._write=function(I,L,D){D(new y("_write()"))},V.prototype._writev=null,V.prototype.end=function(I,L,D){var X=this._writableState;return typeof I=="function"?(D=I,I=null,L=null):typeof L=="function"&&(D=L,L=null),I!=null&&this.write(I,L),X.corked&&(X.corked=1,this.uncork()),X.ending||pt(this,X,D),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function O(I){return I.ending&&I.length===0&&I.bufferedRequest===null&&!I.finished&&!I.writing}function U(I,L){I._final(function(D){L.pendingcb--,D&&S(I,D),L.prefinished=!0,I.emit("prefinish"),J(I,L)})}function $(I,L){!L.prefinished&&!L.finalCalled&&(typeof I._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,et.nextTick(U,I,L)):(L.prefinished=!0,I.emit("prefinish")))}function J(I,L){var D=O(L);if(D&&($(I,L),L.pendingcb===0&&(L.finished=!0,I.emit("finish"),L.autoDestroy))){var X=I._readableState;(!X||X.autoDestroy&&X.endEmitted)&&I.destroy()}return D}function pt(I,L,D){L.ending=!0,J(I,L),D&&(L.finished?et.nextTick(D):I.once("finish",D)),L.ended=!0,I.writable=!1}function ut(I,L,D){var X=I.entry;for(I.entry=null;X;){var nt=X.callback;L.pendingcb--,nt(D),X=X.next}L.corkedRequestsFree.next=I}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(I){!this._writableState||(this._writableState.destroyed=I)}}),V.prototype.destroy=p.destroy,V.prototype._undestroy=p.undestroy,V.prototype._destroy=function(I,L){L(I)}}),ae=tt((t,e)=>{K();var r=Object.keys||function(g){var b=[];for(var _ in g)b.push(_);return b};e.exports=f;var n=Rr(),a=Or();for(Ht()(f,n),s=r(a.prototype),o=0;o<s.length;o++)l=s[o],f.prototype[l]||(f.prototype[l]=a.prototype[l]);var s,l,o;function f(g){if(!(this instanceof f))return new f(g);n.call(this,g),a.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||et.nextTick(p,this)}function p(g){g.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}),On=tt((t,e)=>{K();var r=Se(),n=r.Buffer;function a(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=s);function s(l,o,f){return n(l,o,f)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},s.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),nr=tt(t=>{K();var e=On().Buffer,r=e.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(E){if(!E)return"utf8";for(var B;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(B)return;E=(""+E).toLowerCase(),B=!0}}function a(E){var B=n(E);if(typeof B!="string"&&(e.isEncoding===r||!r(E)))throw new Error("Unknown encoding: "+E);return B||E}t.StringDecoder=s;function s(E){this.encoding=a(E);var B;switch(this.encoding){case"utf16le":this.text=b,this.end=_,B=4;break;case"utf8":this.fillLast=d,B=4;break;case"base64":this.text=h,this.end=y,B=3;break;default:this.write=v,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(B)}s.prototype.write=function(E){if(E.length===0)return"";var B,R;if(this.lastNeed){if(B=this.fillLast(E),B===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<E.length?B?B+this.text(E,R):this.text(E,R):B||""},s.prototype.end=g,s.prototype.text=p,s.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function l(E){return E<=127?0:E>>5===6?2:E>>4===14?3:E>>3===30?4:E>>6===2?-1:-2}function o(E,B,R){var M=B.length-1;if(M<R)return 0;var S=l(B[M]);return S>=0?(S>0&&(E.lastNeed=S-1),S):--M<R||S===-2?0:(S=l(B[M]),S>=0?(S>0&&(E.lastNeed=S-2),S):--M<R||S===-2?0:(S=l(B[M]),S>=0?(S>0&&(S===2?S=0:E.lastNeed=S-3),S):0))}function f(E,B,R){if((B[0]&192)!==128)return E.lastNeed=0,"\uFFFD";if(E.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return E.lastNeed=1,"\uFFFD";if(E.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return E.lastNeed=2,"\uFFFD"}}function d(E){var B=this.lastTotal-this.lastNeed,R=f(this,E);if(R!==void 0)return R;if(this.lastNeed<=E.length)return E.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,B,0,E.length),this.lastNeed-=E.length}function p(E,B){var R=o(this,E,B);if(!this.lastNeed)return E.toString("utf8",B);this.lastTotal=R;var M=E.length-(R-this.lastNeed);return E.copy(this.lastChar,0,M),E.toString("utf8",B,M)}function g(E){var B=E&&E.length?this.write(E):"";return this.lastNeed?B+"\uFFFD":B}function b(E,B){if((E.length-B)%2===0){var R=E.toString("utf16le",B);if(R){var M=R.charCodeAt(R.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",B,E.length-1)}function _(E){var B=E&&E.length?this.write(E):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,R)}return B}function h(E,B){var R=(E.length-B)%3;return R===0?E.toString("base64",B):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",B,E.length-R))}function y(E){var B=E&&E.length?this.write(E):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function v(E){return E.toString(this.encoding)}function k(E){return E&&E.length?this.write(E):""}}),Ke=tt((t,e)=>{K();var r=fe().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,p=new Array(d),g=0;g<d;g++)p[g]=arguments[g];o.apply(this,p)}}}function a(){}function s(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||a);var p=f.readable||f.readable!==!1&&o.readable,g=f.writable||f.writable!==!1&&o.writable,b=function(){o.writable||h()},_=o._writableState&&o._writableState.finished,h=function(){g=!1,_=!0,p||d.call(o)},y=o._readableState&&o._readableState.endEmitted,v=function(){p=!1,y=!0,g||d.call(o)},k=function(R){d.call(o,R)},E=function(){var R;if(p&&!y)return(!o._readableState||!o._readableState.ended)&&(R=new r),d.call(o,R);if(g&&!_)return(!o._writableState||!o._writableState.ended)&&(R=new r),d.call(o,R)},B=function(){o.req.on("finish",h)};return s(o)?(o.on("complete",h),o.on("abort",E),o.req?B():o.on("request",B)):g&&!o._writableState&&(o.on("end",b),o.on("close",b)),o.on("end",v),o.on("finish",h),f.error!==!1&&o.on("error",k),o.on("close",E),function(){o.removeListener("complete",h),o.removeListener("abort",E),o.removeListener("request",B),o.req&&o.req.removeListener("finish",h),o.removeListener("end",b),o.removeListener("close",b),o.removeListener("finish",h),o.removeListener("end",v),o.removeListener("error",k),o.removeListener("close",E)}}e.exports=l}),Rn=tt((t,e)=>{K();var r;function n(B,R,M){return R in B?Object.defineProperty(B,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):B[R]=M,B}var a=Ke(),s=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),p=Symbol("handlePromise"),g=Symbol("stream");function b(B,R){return{value:B,done:R}}function _(B){var R=B[s];if(R!==null){var M=B[g].read();M!==null&&(B[d]=null,B[s]=null,B[l]=null,R(b(M,!1)))}}function h(B){et.nextTick(_,B)}function y(B,R){return function(M,S){B.then(function(){if(R[f]){M(b(void 0,!0));return}R[p](M,S)},S)}}var v=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((r={get stream(){return this[g]},next:function(){var B=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[f])return Promise.resolve(b(void 0,!0));if(this[g].destroyed)return new Promise(function(C,z){et.nextTick(function(){B[o]?z(B[o]):C(b(void 0,!0))})});var M=this[d],S;if(M)S=new Promise(y(M,this));else{var j=this[g].read();if(j!==null)return Promise.resolve(b(j,!1));S=new Promise(this[p])}return this[d]=S,S}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var B=this;return new Promise(function(R,M){B[g].destroy(null,function(S){if(S){M(S);return}R(b(void 0,!0))})})}),r),v),E=function(B){var R,M=Object.create(k,(R={},n(R,g,{value:B,writable:!0}),n(R,s,{value:null,writable:!0}),n(R,l,{value:null,writable:!0}),n(R,o,{value:null,writable:!0}),n(R,f,{value:B._readableState.endEmitted,writable:!0}),n(R,p,{value:function(S,j){var C=M[g].read();C?(M[d]=null,M[s]=null,M[l]=null,S(b(C,!1))):(M[s]=S,M[l]=j)},writable:!0}),R));return M[d]=null,a(B,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=M[l];j!==null&&(M[d]=null,M[s]=null,M[l]=null,j(S)),M[o]=S;return}var C=M[s];C!==null&&(M[d]=null,M[s]=null,M[l]=null,C(b(void 0,!0))),M[f]=!0}),B.on("readable",h.bind(null,M)),M};e.exports=E}),Tn=tt((t,e)=>{K(),e.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Rr=tt((t,e)=>{K(),e.exports=N;var r;N.ReadableState=V,ke().EventEmitter;var n=function(m,w){return m.listeners(w).length},a=kr(),s=Se().Buffer,l=Kt.Uint8Array||function(){};function o(m){return s.from(m)}function f(m){return s.isBuffer(m)||m instanceof l}var d=Ar(),p;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var g=In(),b=Ir(),_=Br(),h=_.getHighWaterMark,y=fe().codes,v=y.ERR_INVALID_ARG_TYPE,k=y.ERR_STREAM_PUSH_AFTER_EOF,E=y.ERR_METHOD_NOT_IMPLEMENTED,B=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,M,S;Ht()(N,a);var j=b.errorOrDestroy,C=["error","close","destroy","pause","resume"];function z(m,w,F){if(typeof m.prependListener=="function")return m.prependListener(w,F);!m._events||!m._events[w]?m.on(w,F):Array.isArray(m._events[w])?m._events[w].unshift(F):m._events[w]=[F,m._events[w]]}function V(m,w,F){r=r||ae(),m=m||{},typeof F!="boolean"&&(F=w instanceof r),this.objectMode=!!m.objectMode,F&&(this.objectMode=this.objectMode||!!m.readableObjectMode),this.highWaterMark=h(this,m,"readableHighWaterMark",F),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=m.emitClose!==!1,this.autoDestroy=!!m.autoDestroy,this.destroyed=!1,this.defaultEncoding=m.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,m.encoding&&(R||(R=nr().StringDecoder),this.decoder=new R(m.encoding),this.encoding=m.encoding)}function N(m){if(r=r||ae(),!(this instanceof N))return new N(m);var w=this instanceof r;this._readableState=new V(m,this,w),this.readable=!0,m&&(typeof m.read=="function"&&(this._read=m.read),typeof m.destroy=="function"&&(this._destroy=m.destroy)),a.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){!this._readableState||(this._readableState.destroyed=m)}}),N.prototype.destroy=b.destroy,N.prototype._undestroy=b.undestroy,N.prototype._destroy=function(m,w){w(m)},N.prototype.push=function(m,w){var F=this._readableState,G;return F.objectMode?G=!0:typeof m=="string"&&(w=w||F.defaultEncoding,w!==F.encoding&&(m=s.from(m,w),w=""),G=!0),q(this,m,w,!1,G)},N.prototype.unshift=function(m){return q(this,m,null,!0,!1)};function q(m,w,F,G,yt){p("readableAddChunk",w);var at=m._readableState;if(w===null)at.reading=!1,mt(m,at);else{var P;if(yt||(P=rt(at,w)),P)j(m,P);else if(at.objectMode||w&&w.length>0)if(typeof w!="string"&&!at.objectMode&&Object.getPrototypeOf(w)!==s.prototype&&(w=o(w)),G)at.endEmitted?j(m,new B):H(m,at,w,!0);else if(at.ended)j(m,new k);else{if(at.destroyed)return!1;at.reading=!1,at.decoder&&!F?(w=at.decoder.write(w),at.objectMode||w.length!==0?H(m,at,w,!1):ft(m,at)):H(m,at,w,!1)}else G||(at.reading=!1,ft(m,at))}return!at.ended&&(at.length<at.highWaterMark||at.length===0)}function H(m,w,F,G){w.flowing&&w.length===0&&!w.sync?(w.awaitDrain=0,m.emit("data",F)):(w.length+=w.objectMode?1:F.length,G?w.buffer.unshift(F):w.buffer.push(F),w.needReadable&&vt(m)),ft(m,w)}function rt(m,w){var F;return!f(w)&&typeof w!="string"&&w!==void 0&&!m.objectMode&&(F=new v("chunk",["string","Buffer","Uint8Array"],w)),F}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(m){R||(R=nr().StringDecoder);var w=new R(m);this._readableState.decoder=w,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,G="";F!==null;)G+=w.write(F.data),F=F.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var it=1073741824;function dt(m){return m>=it?m=it:(m--,m|=m>>>1,m|=m>>>2,m|=m>>>4,m|=m>>>8,m|=m>>>16,m++),m}function ht(m,w){return m<=0||w.length===0&&w.ended?0:w.objectMode?1:m!==m?w.flowing&&w.length?w.buffer.head.data.length:w.length:(m>w.highWaterMark&&(w.highWaterMark=dt(m)),m<=w.length?m:w.ended?w.length:(w.needReadable=!0,0))}N.prototype.read=function(m){p("read",m),m=parseInt(m,10);var w=this._readableState,F=m;if(m!==0&&(w.emittedReadable=!1),m===0&&w.needReadable&&((w.highWaterMark!==0?w.length>=w.highWaterMark:w.length>0)||w.ended))return p("read: emitReadable",w.length,w.ended),w.length===0&&w.ended?D(this):vt(this),null;if(m=ht(m,w),m===0&&w.ended)return w.length===0&&D(this),null;var G=w.needReadable;p("need readable",G),(w.length===0||w.length-m<w.highWaterMark)&&(G=!0,p("length less than watermark",G)),w.ended||w.reading?(G=!1,p("reading or ended",G)):G&&(p("do read"),w.reading=!0,w.sync=!0,w.length===0&&(w.needReadable=!0),this._read(w.highWaterMark),w.sync=!1,w.reading||(m=ht(F,w)));var yt;return m>0?yt=L(m,w):yt=null,yt===null?(w.needReadable=w.length<=w.highWaterMark,m=0):(w.length-=m,w.awaitDrain=0),w.length===0&&(w.ended||(w.needReadable=!0),F!==m&&w.ended&&D(this)),yt!==null&&this.emit("data",yt),yt};function mt(m,w){if(p("onEofChunk"),!w.ended){if(w.decoder){var F=w.decoder.end();F&&F.length&&(w.buffer.push(F),w.length+=w.objectMode?1:F.length)}w.ended=!0,w.sync?vt(m):(w.needReadable=!1,w.emittedReadable||(w.emittedReadable=!0,kt(m)))}}function vt(m){var w=m._readableState;p("emitReadable",w.needReadable,w.emittedReadable),w.needReadable=!1,w.emittedReadable||(p("emitReadable",w.flowing),w.emittedReadable=!0,et.nextTick(kt,m))}function kt(m){var w=m._readableState;p("emitReadable_",w.destroyed,w.length,w.ended),!w.destroyed&&(w.length||w.ended)&&(m.emit("readable"),w.emittedReadable=!1),w.needReadable=!w.flowing&&!w.ended&&w.length<=w.highWaterMark,I(m)}function ft(m,w){w.readingMore||(w.readingMore=!0,et.nextTick(O,m,w))}function O(m,w){for(;!w.reading&&!w.ended&&(w.length<w.highWaterMark||w.flowing&&w.length===0);){var F=w.length;if(p("maybeReadMore read 0"),m.read(0),F===w.length)break}w.readingMore=!1}N.prototype._read=function(m){j(this,new E("_read()"))},N.prototype.pipe=function(m,w){var F=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=m;break;case 1:G.pipes=[G.pipes,m];break;default:G.pipes.push(m);break}G.pipesCount+=1,p("pipe count=%d opts=%j",G.pipesCount,w);var yt=(!w||w.end!==!1)&&m!==et.stdout&&m!==et.stderr,at=yt?Ft:u;G.endEmitted?et.nextTick(at):F.once("end",at),m.on("unpipe",P);function P(c,A){p("onunpipe"),c===F&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,he())}function Ft(){p("onend"),m.end()}var Vt=U(F);m.on("drain",Vt);var Rt=!1;function he(){p("cleanup"),m.removeListener("close",de),m.removeListener("finish",i),m.removeListener("drain",Vt),m.removeListener("error",Lt),m.removeListener("unpipe",P),F.removeListener("end",Ft),F.removeListener("end",u),F.removeListener("data",Ae),Rt=!0,G.awaitDrain&&(!m._writableState||m._writableState.needDrain)&&Vt()}F.on("data",Ae);function Ae(c){p("ondata");var A=m.write(c);p("dest.write",A),A===!1&&((G.pipesCount===1&&G.pipes===m||G.pipesCount>1&&nt(G.pipes,m)!==-1)&&!Rt&&(p("false write response, pause",G.awaitDrain),G.awaitDrain++),F.pause())}function Lt(c){p("onerror",c),u(),m.removeListener("error",Lt),n(m,"error")===0&&j(m,c)}z(m,"error",Lt);function de(){m.removeListener("finish",i),u()}m.once("close",de);function i(){p("onfinish"),m.removeListener("close",de),u()}m.once("finish",i);function u(){p("unpipe"),F.unpipe(m)}return m.emit("pipe",F),G.flowing||(p("pipe resume"),F.resume()),m};function U(m){return function(){var w=m._readableState;p("pipeOnDrain",w.awaitDrain),w.awaitDrain&&w.awaitDrain--,w.awaitDrain===0&&n(m,"data")&&(w.flowing=!0,I(m))}}N.prototype.unpipe=function(m){var w=this._readableState,F={hasUnpiped:!1};if(w.pipesCount===0)return this;if(w.pipesCount===1)return m&&m!==w.pipes?this:(m||(m=w.pipes),w.pipes=null,w.pipesCount=0,w.flowing=!1,m&&m.emit("unpipe",this,F),this);if(!m){var G=w.pipes,yt=w.pipesCount;w.pipes=null,w.pipesCount=0,w.flowing=!1;for(var at=0;at<yt;at++)G[at].emit("unpipe",this,{hasUnpiped:!1});return this}var P=nt(w.pipes,m);return P===-1?this:(w.pipes.splice(P,1),w.pipesCount-=1,w.pipesCount===1&&(w.pipes=w.pipes[0]),m.emit("unpipe",this,F),this)},N.prototype.on=function(m,w){var F=a.prototype.on.call(this,m,w),G=this._readableState;return m==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):m==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,p("on readable",G.length,G.reading),G.length?vt(this):G.reading||et.nextTick(J,this)),F},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(m,w){var F=a.prototype.removeListener.call(this,m,w);return m==="readable"&&et.nextTick($,this),F},N.prototype.removeAllListeners=function(m){var w=a.prototype.removeAllListeners.apply(this,arguments);return(m==="readable"||m===void 0)&&et.nextTick($,this),w};function $(m){var w=m._readableState;w.readableListening=m.listenerCount("readable")>0,w.resumeScheduled&&!w.paused?w.flowing=!0:m.listenerCount("data")>0&&m.resume()}function J(m){p("readable nexttick read 0"),m.read(0)}N.prototype.resume=function(){var m=this._readableState;return m.flowing||(p("resume"),m.flowing=!m.readableListening,pt(this,m)),m.paused=!1,this};function pt(m,w){w.resumeScheduled||(w.resumeScheduled=!0,et.nextTick(ut,m,w))}function ut(m,w){p("resume",w.reading),w.reading||m.read(0),w.resumeScheduled=!1,m.emit("resume"),I(m),w.flowing&&!w.reading&&m.read(0)}N.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function I(m){var w=m._readableState;for(p("flow",w.flowing);w.flowing&&m.read()!==null;);}N.prototype.wrap=function(m){var w=this,F=this._readableState,G=!1;m.on("end",function(){if(p("wrapped end"),F.decoder&&!F.ended){var P=F.decoder.end();P&&P.length&&w.push(P)}w.push(null)}),m.on("data",function(P){if(p("wrapped data"),F.decoder&&(P=F.decoder.write(P)),!(F.objectMode&&P==null)&&!(!F.objectMode&&(!P||!P.length))){var Ft=w.push(P);Ft||(G=!0,m.pause())}});for(var yt in m)this[yt]===void 0&&typeof m[yt]=="function"&&(this[yt]=function(P){return function(){return m[P].apply(m,arguments)}}(yt));for(var at=0;at<C.length;at++)m.on(C[at],this.emit.bind(this,C[at]));return this._read=function(P){p("wrapped _read",P),G&&(G=!1,m.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=Rn()),M(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(m){this._readableState&&(this._readableState.flowing=m)}}),N._fromList=L,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(m,w){if(w.length===0)return null;var F;return w.objectMode?F=w.buffer.shift():!m||m>=w.length?(w.decoder?F=w.buffer.join(""):w.buffer.length===1?F=w.buffer.first():F=w.buffer.concat(w.length),w.buffer.clear()):F=w.buffer.consume(m,w.decoder),F}function D(m){var w=m._readableState;p("endReadable",w.endEmitted),w.endEmitted||(w.ended=!0,et.nextTick(X,w,m))}function X(m,w){if(p("endReadableNT",m.endEmitted,m.length),!m.endEmitted&&m.length===0&&(m.endEmitted=!0,w.readable=!1,w.emit("end"),m.autoDestroy)){var F=w._writableState;(!F||F.autoDestroy&&F.finished)&&w.destroy()}}typeof Symbol=="function"&&(N.from=function(m,w){return S===void 0&&(S=Tn()),S(N,m,w)});function nt(m,w){for(var F=0,G=m.length;F<G;F++)if(m[F]===w)return F;return-1}}),Tr=tt((t,e)=>{K(),e.exports=d;var r=fe().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=ae();Ht()(d,o);function f(b,_){var h=this._transformState;h.transforming=!1;var y=h.writecb;if(y===null)return this.emit("error",new a);h.writechunk=null,h.writecb=null,_!=null&&this.push(_),y(b);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);o.call(this,b),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",p)}function p(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_,h){g(b,_,h)}):g(this,null,null)}d.prototype.push=function(b,_){return this._transformState.needTransform=!1,o.prototype.push.call(this,b,_)},d.prototype._transform=function(b,_,h){h(new n("_transform()"))},d.prototype._write=function(b,_,h){var y=this._transformState;if(y.writecb=h,y.writechunk=b,y.writeencoding=_,!y.transforming){var v=this._readableState;(y.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},d.prototype._read=function(b){var _=this._transformState;_.writechunk!==null&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0},d.prototype._destroy=function(b,_){o.prototype._destroy.call(this,b,function(h){_(h)})};function g(b,_,h){if(_)return b.emit("error",_);if(h!=null&&b.push(h),b._writableState.length)throw new l;if(b._transformState.transforming)throw new s;return b.push(null)}}),Ln=tt((t,e)=>{K(),e.exports=n;var r=Tr();Ht()(n,r);function n(a){if(!(this instanceof n))return new n(a);r.call(this,a)}n.prototype._transform=function(a,s,l){l(null,a)}}),jn=tt((t,e)=>{K();var r;function n(h){var y=!1;return function(){y||(y=!0,h.apply(void 0,arguments))}}var a=fe().codes,s=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function o(h){if(h)throw h}function f(h){return h.setHeader&&typeof h.abort=="function"}function d(h,y,v,k){k=n(k);var E=!1;h.on("close",function(){E=!0}),r===void 0&&(r=Ke()),r(h,{readable:y,writable:v},function(R){if(R)return k(R);E=!0,k()});var B=!1;return function(R){if(!E&&!B){if(B=!0,f(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();k(R||new l("pipe"))}}}function p(h){h()}function g(h,y){return h.pipe(y)}function b(h){return!h.length||typeof h[h.length-1]!="function"?o:h.pop()}function _(){for(var h=arguments.length,y=new Array(h),v=0;v<h;v++)y[v]=arguments[v];var k=b(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new s("streams");var E,B=y.map(function(R,M){var S=M<y.length-1,j=M>0;return d(R,S,j,function(C){E||(E=C),C&&B.forEach(p),!S&&(B.forEach(p),k(E))})});return y.reduce(g)}e.exports=_}),ce=tt((t,e)=>{K(),t=e.exports=Rr(),t.Stream=t,t.Readable=t,t.Writable=Or(),t.Duplex=ae(),t.Transform=Tr(),t.PassThrough=Ln(),t.finished=Ke(),t.pipeline=jn()}),Pn=tt((t,e)=>{K(),e.exports=r;function r(n,a){if(n&&a)return r(n)(a);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){s[l]=n[l]}),s;function s(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(p){f[p]=d[p]}),f}}}),Lr=tt((t,e)=>{K();var r=Pn();e.exports=r(n),e.exports.strict=r(a),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})});function n(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function a(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},o=s.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),jr=tt((t,e)=>{K();var r=Lr(),n=function(){},a=function(o){return o.setHeader&&typeof o.abort=="function"},s=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var p=o._writableState,g=o._readableState,b=f.readable||f.readable!==!1&&o.readable,_=f.writable||f.writable!==!1&&o.writable,h=!1,y=function(){o.writable||v()},v=function(){_=!1,b||d.call(o)},k=function(){b=!1,_||d.call(o)},E=function(j){d.call(o,j?new Error("exited with error code: "+j):null)},B=function(j){d.call(o,j)},R=function(){et.nextTick(M)},M=function(){if(!h){if(b&&!(g&&g.ended&&!g.destroyed))return d.call(o,new Error("premature close"));if(_&&!(p&&p.ended&&!p.destroyed))return d.call(o,new Error("premature close"))}},S=function(){o.req.on("finish",v)};return a(o)?(o.on("complete",v),o.on("abort",R),o.req?S():o.on("request",S)):_&&!p&&(o.on("end",y),o.on("close",y)),s(o)&&o.on("exit",E),o.on("end",k),o.on("finish",v),f.error!==!1&&o.on("error",B),o.on("close",R),function(){h=!0,o.removeListener("complete",v),o.removeListener("abort",R),o.removeListener("request",S),o.req&&o.req.removeListener("finish",v),o.removeListener("end",y),o.removeListener("close",y),o.removeListener("finish",v),o.removeListener("exit",E),o.removeListener("end",k),o.removeListener("error",B),o.removeListener("close",R)}};e.exports=l}),Mn=tt(()=>{K()}),Un=tt((t,e)=>{K();var r=Lr(),n=jr(),a=Mn(),s=function(){},l=/^v?\.0/.test(et.version),o=function(h){return typeof h=="function"},f=function(h){return!l||!a?!1:(h instanceof(a.ReadStream||s)||h instanceof(a.WriteStream||s))&&o(h.close)},d=function(h){return h.setHeader&&o(h.abort)},p=function(h,y,v,k){k=r(k);var E=!1;h.on("close",function(){E=!0}),n(h,{readable:y,writable:v},function(R){if(R)return k(R);E=!0,k()});var B=!1;return function(R){if(!E&&!B){if(B=!0,f(h))return h.close(s);if(d(h))return h.abort();if(o(h.destroy))return h.destroy();k(R||new Error("stream was destroyed"))}}},g=function(h){h()},b=function(h,y){return h.pipe(y)},_=function(){var h=Array.prototype.slice.call(arguments),y=o(h[h.length-1]||s)&&h.pop()||s;if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new Error("pump requires two streams per minimum");var v,k=h.map(function(E,B){var R=B<h.length-1,M=B>0;return p(E,R,M,function(S){v||(v=S),S&&k.forEach(g),!R&&(k.forEach(g),y(v))})});return h.reduce(b)};e.exports=_}),xn=tt((t,e)=>{K(),e.exports=r;function r(a){var s=a._readableState;return s?s.objectMode||typeof a._duplexState=="number"?a.read():a.read(n(s)):null}function n(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}}),Cn=tt((t,e)=>{K();var r=ce(),n=jr(),a=Ht(),s=xn(),l=Q.Buffer.from&&Q.Buffer.from!==Uint8Array.from?Q.Buffer.from([0]):new Q.Buffer([0]),o=function(h,y){h._corked?h.once("uncork",y):y()},f=function(h,y){h._autoDestroy&&h.destroy(y)},d=function(h,y){return function(v){v?f(h,v.message==="premature close"?null:v):y&&!h._ended&&h.end()}},p=function(h,y){if(!h||h._writableState&&h._writableState.finished)return y();if(h._writableState)return h.end(y);h.end(),y()},g=function(){},b=function(h){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(h)},_=function(h,y,v){if(!(this instanceof _))return new _(h,y,v);r.Duplex.call(this,v),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!v||v.autoDestroy!==!1,this._forwardDestroy=!v||v.destroy!==!1,this._forwardEnd=!v||v.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,h&&this.setWritable(h),y&&this.setReadable(y)};a(_,r.Duplex),_.obj=function(h,y,v){return v||(v={}),v.objectMode=!0,v.highWaterMark=16,new _(h,y,v)},_.prototype.cork=function(){++this._corked===1&&this.emit("cork")},_.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},_.prototype.setWritable=function(h){if(this._unwrite&&this._unwrite(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.end();return}var y=this,v=n(h,{writable:!0,readable:!1},d(this,this._forwardEnd)),k=function(){var B=y._ondrain;y._ondrain=null,B&&B()},E=function(){y._writable.removeListener("drain",k),v()};this._unwrite&&et.nextTick(k),this._writable=h,this._writable.on("drain",k),this._unwrite=E,this.uncork()},_.prototype.setReadable=function(h){if(this._unread&&this._unread(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.push(null),this.resume();return}var y=this,v=n(h,{writable:!1,readable:!0},d(this)),k=function(){y._forward()},E=function(){y.push(null)},B=function(){y._readable2.removeListener("readable",k),y._readable2.removeListener("end",E),v()};this._drained=!0,this._readable=h,this._readable2=h._readableState?h:b(h),this._readable2.on("readable",k),this._readable2.on("end",E),this._unread=B,this._forward()},_.prototype._read=function(){this._drained=!0,this._forward()},_.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var h;this._drained&&(h=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(h));this._forwarding=!1}},_.prototype.destroy=function(h,y){if(y||(y=g),this.destroyed)return y(null);this.destroyed=!0;var v=this;et.nextTick(function(){v._destroy(h),y(null)})},_.prototype._destroy=function(h){if(h){var y=this._ondrain;this._ondrain=null,y?y(h):this.emit("error",h)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},_.prototype._write=function(h,y,v){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,h,y,v));if(h===l)return this._finish(v);if(!this._writable)return v();this._writable.write(h)===!1?this._ondrain=v:this.destroyed||v()}},_.prototype._finish=function(h){var y=this;this.emit("preend"),o(this,function(){p(y._forwardEnd&&y._writable,function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),o(y,h)})})},_.prototype.end=function(h,y,v){return typeof h=="function"?this.end(null,null,h):typeof y=="function"?this.end(h,null,y):(this._ended=!0,h&&this.write(h),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,v))},e.exports=_}),Nn=tt((t,e)=>{K();var r=Un(),n=Ht(),a=Cn(),s=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=s(arguments);if(!(this instanceof f))return new f(d);a.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,a),f.prototype.setPipeline=function(){var d=s(arguments),p=this,g=!1,b=d[0],_=d[d.length-1];_=_.readable?_:null,b=b.writable?b:null;var h=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",h),this.on("prefinish",function(){g||p.cork()}),r(d,function(y){if(p.removeListener("close",h),y)return p.destroy(y.message==="premature close"?null:y);g=!0,p._autoDestroy===!1&&(p._autoDestroy=!0),p.uncork()}),this.destroyed)return h();this.setWritable(b),this.setReadable(_)},f};e.exports=l({autoDestroy:!1,destroy:!1}),e.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),e.exports.ctor=l}),Dn=tt(()=>{K()}),Pr=tt((t,e)=>{K(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof e<"u"&&e.exports?e.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof et<"u"&&typeof et.pid=="number"&&et.versions&&et.versions.node)return a(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return s(l,o)}function a(l,o){var f=Dn(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var p=new Uint8Array(l),g=0;g<l;++g)p[g]=d.readUInt8(g);return p;default:throw new Error(o.type+" is unsupported.")}}function s(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var p=new Q.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new Q.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(t)}),Mr=tt((t,e)=>{K(),e.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[n]=s;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==s||o.enumerable!==!0)return!1}return!0}}),Le=tt((t,e)=>{K();var r=Mr();e.exports=function(){return r()&&!!Symbol.toStringTag}}),Fn=tt((t,e)=>{K();var r=typeof Symbol<"u"&&Symbol,n=Mr();e.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),$n=tt((t,e)=>{K();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";e.exports=function(l){var o=this;if(typeof o!="function"||a.call(o)!==s)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,p=function(){if(this instanceof d){var y=o.apply(this,f.concat(n.call(arguments)));return Object(y)===y?y:this}else return o.apply(l,f.concat(n.call(arguments)))},g=Math.max(0,o.length-f.length),b=[],_=0;_<g;_++)b.push("$"+_);if(d=Function("binder","return function ("+b.join(",")+"){ return binder.apply(this,arguments); }")(p),o.prototype){var h=function(){};h.prototype=o.prototype,d.prototype=new h,h.prototype=null}return d}}),He=tt((t,e)=>{K();var r=$n();e.exports=Function.prototype.bind||r}),Wn=tt((t,e)=>{K();var r=He();e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),Je=tt((t,e)=>{K();var r,n=SyntaxError,a=Function,s=TypeError,l=function(N){try{return a('"use strict"; return ('+N+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new s},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,p=Fn()(),g=Object.getPrototypeOf||function(N){return N.__proto__},b={},_=typeof Uint8Array>"u"?r:g(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":p?g([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?g(g([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?r:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?r:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?g(""[Symbol.iterator]()):r,"%Symbol%":p?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":_,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},y=function N(q){var H;if(q==="%AsyncFunction%")H=l("async function () {}");else if(q==="%GeneratorFunction%")H=l("function* () {}");else if(q==="%AsyncGeneratorFunction%")H=l("async function* () {}");else if(q==="%AsyncGenerator%"){var rt=N("%AsyncGeneratorFunction%");rt&&(H=rt.prototype)}else if(q==="%AsyncIteratorPrototype%"){var it=N("%AsyncGenerator%");it&&(H=g(it.prototype))}return h[q]=H,H},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=He(),E=Wn(),B=k.call(Function.call,Array.prototype.concat),R=k.call(Function.apply,Array.prototype.splice),M=k.call(Function.call,String.prototype.replace),S=k.call(Function.call,String.prototype.slice),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,z=function(N){var q=S(N,0,1),H=S(N,-1);if(q==="%"&&H!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&q!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var rt=[];return M(N,j,function(it,dt,ht,mt){rt[rt.length]=ht?M(mt,C,"$1"):dt||it}),rt},V=function(N,q){var H=N,rt;if(E(v,H)&&(rt=v[H],H="%"+rt[0]+"%"),E(h,H)){var it=h[H];if(it===b&&(it=y(H)),typeof it>"u"&&!q)throw new s("intrinsic "+N+" exists, but is not available. Please file an issue!");return{alias:rt,name:H,value:it}}throw new n("intrinsic "+N+" does not exist!")};e.exports=function(N,q){if(typeof N!="string"||N.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new s('"allowMissing" argument must be a boolean');var H=z(N),rt=H.length>0?H[0]:"",it=V("%"+rt+"%",q),dt=it.name,ht=it.value,mt=!1,vt=it.alias;vt&&(rt=vt[0],R(H,B([0,1],vt)));for(var kt=1,ft=!0;kt<H.length;kt+=1){var O=H[kt],U=S(O,0,1),$=S(O,-1);if((U==='"'||U==="'"||U==="`"||$==='"'||$==="'"||$==="`")&&U!==$)throw new n("property names with quotes must have matching quotes");if((O==="constructor"||!ft)&&(mt=!0),rt+="."+O,dt="%"+rt+"%",E(h,dt))ht=h[dt];else if(ht!=null){if(!(O in ht)){if(!q)throw new s("base intrinsic for "+N+" exists, but the property is not available.");return}if(o&&kt+1>=H.length){var J=o(ht,O);ft=!!J,ft&&"get"in J&&!("originalValue"in J.get)?ht=J.get:ht=ht[O]}else ft=E(ht,O),ht=ht[O];ft&&!mt&&(h[dt]=ht)}}return ht}}),qn=tt((t,e)=>{K();var r=He(),n=Je(),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(s,a),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}e.exports=function(g){var b=l(r,s,arguments);if(o&&f){var _=o(b,"length");_.configurable&&f(b,"length",{value:1+d(0,g.length-(arguments.length-1))})}return b};var p=function(){return l(r,a,arguments)};f?f(e.exports,"apply",{value:p}):e.exports.apply=p}),Ye=tt((t,e)=>{K();var r=Je(),n=qn(),a=n(r("String.prototype.indexOf"));e.exports=function(s,l){var o=r(s,!!l);return typeof o=="function"&&a(s,".prototype.")>-1?n(o):o}}),Vn=tt((t,e)=>{K();var r=Le()(),n=Ye(),a=n("Object.prototype.toString"),s=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:a(f)==="[object Arguments]"},l=function(f){return s(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&a(f)!=="[object Array]"&&a(f.callee)==="[object Function]"},o=function(){return s(arguments)}();s.isLegacyArguments=l,e.exports=o?s:l}),zn=tt((t,e)=>{K();var r=Object.prototype.toString,n=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=Le()(),l=Object.getPrototypeOf,o=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;e.exports=function(d){if(typeof d!="function")return!1;if(a.test(n.call(d)))return!0;if(!s){var p=r.call(d);return p==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var g=o();f=g?l(g):!1}return l(d)===f}}),Ur=tt((t,e)=>{K();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(a,s,l){if(n.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var o=a.length;if(o===+o)for(var f=0;f<o;f++)s.call(l,a[f],f,a);else for(var d in a)r.call(a,d)&&s.call(l,a[d],d,a)}}),xr=tt((t,e)=>{K();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Kt:globalThis;e.exports=function(){for(var a=[],s=0;s<r.length;s++)typeof n[r[s]]=="function"&&(a[a.length]=r[s]);return a}}),Cr=tt((t,e)=>{K();var r=Je(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}e.exports=n}),Nr=tt((t,e)=>{K();var r=Ur(),n=xr(),a=Ye(),s=a("Object.prototype.toString"),l=Le()(),o=typeof globalThis>"u"?Kt:globalThis,f=n(),d=a("Array.prototype.indexOf",!0)||function(y,v){for(var k=0;k<y.length;k+=1)if(y[k]===v)return k;return-1},p=a("String.prototype.slice"),g={},b=Cr(),_=Object.getPrototypeOf;l&&b&&_&&r(f,function(y){var v=new o[y];if(Symbol.toStringTag in v){var k=_(v),E=b(k,Symbol.toStringTag);if(!E){var B=_(k);E=b(B,Symbol.toStringTag)}g[y]=E.get}});var h=function(y){var v=!1;return r(g,function(k,E){if(!v)try{v=k.call(y)===E}catch{}}),v};e.exports=function(y){if(!y||typeof y!="object")return!1;if(!l||!(Symbol.toStringTag in y)){var v=p(s(y),8,-1);return d(f,v)>-1}return b?h(y):!1}}),Gn=tt((t,e)=>{K();var r=Ur(),n=xr(),a=Ye(),s=a("Object.prototype.toString"),l=Le()(),o=typeof globalThis>"u"?Kt:globalThis,f=n(),d=a("String.prototype.slice"),p={},g=Cr(),b=Object.getPrototypeOf;l&&g&&b&&r(f,function(y){if(typeof o[y]=="function"){var v=new o[y];if(Symbol.toStringTag in v){var k=b(v),E=g(k,Symbol.toStringTag);if(!E){var B=b(k);E=g(B,Symbol.toStringTag)}p[y]=E.get}}});var _=function(y){var v=!1;return r(p,function(k,E){if(!v)try{var B=k.call(y);B===E&&(v=B)}catch{}}),v},h=Nr();e.exports=function(y){return h(y)?!l||!(Symbol.toStringTag in y)?d(s(y),8,-1):_(y):!1}}),Kn=tt(t=>{K();var e=Vn(),r=zn(),n=Gn(),a=Nr();function s(P){return P.call.bind(P)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=s(Object.prototype.toString),d=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);l&&(b=s(BigInt.prototype.valueOf));var b;o&&(_=s(Symbol.prototype.valueOf));var _;function h(P,Ft){if(typeof P!="object")return!1;try{return Ft(P),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=a;function y(P){return typeof Promise<"u"&&P instanceof Promise||P!==null&&typeof P=="object"&&typeof P.then=="function"&&typeof P.catch=="function"}t.isPromise=y;function v(P){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(P):a(P)||U(P)}t.isArrayBufferView=v;function k(P){return n(P)==="Uint8Array"}t.isUint8Array=k;function E(P){return n(P)==="Uint8ClampedArray"}t.isUint8ClampedArray=E;function B(P){return n(P)==="Uint16Array"}t.isUint16Array=B;function R(P){return n(P)==="Uint32Array"}t.isUint32Array=R;function M(P){return n(P)==="Int8Array"}t.isInt8Array=M;function S(P){return n(P)==="Int16Array"}t.isInt16Array=S;function j(P){return n(P)==="Int32Array"}t.isInt32Array=j;function C(P){return n(P)==="Float32Array"}t.isFloat32Array=C;function z(P){return n(P)==="Float64Array"}t.isFloat64Array=z;function V(P){return n(P)==="BigInt64Array"}t.isBigInt64Array=V;function N(P){return n(P)==="BigUint64Array"}t.isBigUint64Array=N;function q(P){return f(P)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function H(P){return typeof Map>"u"?!1:q.working?q(P):P instanceof Map}t.isMap=H;function rt(P){return f(P)==="[object Set]"}rt.working=typeof Set<"u"&&rt(new Set);function it(P){return typeof Set>"u"?!1:rt.working?rt(P):P instanceof Set}t.isSet=it;function dt(P){return f(P)==="[object WeakMap]"}dt.working=typeof WeakMap<"u"&&dt(new WeakMap);function ht(P){return typeof WeakMap>"u"?!1:dt.working?dt(P):P instanceof WeakMap}t.isWeakMap=ht;function mt(P){return f(P)==="[object WeakSet]"}mt.working=typeof WeakSet<"u"&&mt(new WeakSet);function vt(P){return mt(P)}t.isWeakSet=vt;function kt(P){return f(P)==="[object ArrayBuffer]"}kt.working=typeof ArrayBuffer<"u"&&kt(new ArrayBuffer);function ft(P){return typeof ArrayBuffer>"u"?!1:kt.working?kt(P):P instanceof ArrayBuffer}t.isArrayBuffer=ft;function O(P){return f(P)==="[object DataView]"}O.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&O(new DataView(new ArrayBuffer(1),0,1));function U(P){return typeof DataView>"u"?!1:O.working?O(P):P instanceof DataView}t.isDataView=U;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function J(P){return f(P)==="[object SharedArrayBuffer]"}function pt(P){return typeof $>"u"?!1:(typeof J.working>"u"&&(J.working=J(new $)),J.working?J(P):P instanceof $)}t.isSharedArrayBuffer=pt;function ut(P){return f(P)==="[object AsyncFunction]"}t.isAsyncFunction=ut;function I(P){return f(P)==="[object Map Iterator]"}t.isMapIterator=I;function L(P){return f(P)==="[object Set Iterator]"}t.isSetIterator=L;function D(P){return f(P)==="[object Generator]"}t.isGeneratorObject=D;function X(P){return f(P)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=X;function nt(P){return h(P,d)}t.isNumberObject=nt;function m(P){return h(P,p)}t.isStringObject=m;function w(P){return h(P,g)}t.isBooleanObject=w;function F(P){return l&&h(P,b)}t.isBigIntObject=F;function G(P){return o&&h(P,_)}t.isSymbolObject=G;function yt(P){return nt(P)||m(P)||w(P)||F(P)||G(P)}t.isBoxedPrimitive=yt;function at(P){return typeof Uint8Array<"u"&&(ft(P)||pt(P))}t.isAnyArrayBuffer=at,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(P){Object.defineProperty(t,P,{enumerable:!1,value:function(){throw new Error(P+" is not supported in userland")}})})}),Hn=tt((t,e)=>{K(),e.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),Jn=tt(t=>{K();var e=Object.getOwnPropertyDescriptors||function(O){for(var U=Object.keys(O),$={},J=0;J<U.length;J++)$[U[J]]=Object.getOwnPropertyDescriptor(O,U[J]);return $},r=/%[sdj%]/g;t.format=function(O){if(!M(O)){for(var U=[],$=0;$<arguments.length;$++)U.push(l(arguments[$]));return U.join(" ")}for(var $=1,J=arguments,pt=J.length,ut=String(O).replace(r,function(D){if(D==="%%")return"%";if($>=pt)return D;switch(D){case"%s":return String(J[$++]);case"%d":return Number(J[$++]);case"%j":try{return JSON.stringify(J[$++])}catch{return"[Circular]"}default:return D}}),I=J[$];$<pt;I=J[++$])E(I)||!z(I)?ut+=" "+I:ut+=" "+l(I);return ut},t.deprecate=function(O,U){if(typeof et<"u"&&et.noDeprecation===!0)return O;if(typeof et>"u")return function(){return t.deprecate(O,U).apply(this,arguments)};var $=!1;function J(){if(!$){if(et.throwDeprecation)throw new Error(U);et.traceDeprecation?console.trace(U):console.error(U),$=!0}return O.apply(this,arguments)}return J};var n={},a=/^$/;et.env.NODE_DEBUG&&(s=et.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i"));var s;t.debuglog=function(O){if(O=O.toUpperCase(),!n[O])if(a.test(O)){var U=et.pid;n[O]=function(){var $=t.format.apply(t,arguments);console.error("%s %d: %s",O,U,$)}}else n[O]=function(){};return n[O]};function l(O,U){var $={seen:[],stylize:f};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),k(U)?$.showHidden=U:U&&t._extend($,U),j($.showHidden)&&($.showHidden=!1),j($.depth)&&($.depth=2),j($.colors)&&($.colors=!1),j($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=o),p($,O,$.depth)}t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(O,U){var $=l.styles[U];return $?"\x1B["+l.colors[$][0]+"m"+O+"\x1B["+l.colors[$][1]+"m":O}function f(O,U){return O}function d(O){var U={};return O.forEach(function($,J){U[$]=!0}),U}function p(O,U,$){if(O.customInspect&&U&&q(U.inspect)&&U.inspect!==t.inspect&&!(U.constructor&&U.constructor.prototype===U)){var J=U.inspect($,O);return M(J)||(J=p(O,J,$)),J}var pt=g(O,U);if(pt)return pt;var ut=Object.keys(U),I=d(ut);if(O.showHidden&&(ut=Object.getOwnPropertyNames(U)),N(U)&&(ut.indexOf("message")>=0||ut.indexOf("description")>=0))return b(U);if(ut.length===0){if(q(U)){var L=U.name?": "+U.name:"";return O.stylize("[Function"+L+"]","special")}if(C(U))return O.stylize(RegExp.prototype.toString.call(U),"regexp");if(V(U))return O.stylize(Date.prototype.toString.call(U),"date");if(N(U))return b(U)}var D="",X=!1,nt=["{","}"];if(v(U)&&(X=!0,nt=["[","]"]),q(U)){var m=U.name?": "+U.name:"";D=" [Function"+m+"]"}if(C(U)&&(D=" "+RegExp.prototype.toString.call(U)),V(U)&&(D=" "+Date.prototype.toUTCString.call(U)),N(U)&&(D=" "+b(U)),ut.length===0&&(!X||U.length==0))return nt[0]+D+nt[1];if($<0)return C(U)?O.stylize(RegExp.prototype.toString.call(U),"regexp"):O.stylize("[Object]","special");O.seen.push(U);var w;return X?w=_(O,U,$,I,ut):w=ut.map(function(F){return h(O,U,$,I,F,X)}),O.seen.pop(),y(w,D,nt)}function g(O,U){if(j(U))return O.stylize("undefined","undefined");if(M(U)){var $="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize($,"string")}if(R(U))return O.stylize(""+U,"number");if(k(U))return O.stylize(""+U,"boolean");if(E(U))return O.stylize("null","null")}function b(O){return"["+Error.prototype.toString.call(O)+"]"}function _(O,U,$,J,pt){for(var ut=[],I=0,L=U.length;I<L;++I)mt(U,String(I))?ut.push(h(O,U,$,J,String(I),!0)):ut.push("");return pt.forEach(function(D){D.match(/^\d+$/)||ut.push(h(O,U,$,J,D,!0))}),ut}function h(O,U,$,J,pt,ut){var I,L,D;if(D=Object.getOwnPropertyDescriptor(U,pt)||{value:U[pt]},D.get?D.set?L=O.stylize("[Getter/Setter]","special"):L=O.stylize("[Getter]","special"):D.set&&(L=O.stylize("[Setter]","special")),mt(J,pt)||(I="["+pt+"]"),L||(O.seen.indexOf(D.value)<0?(E($)?L=p(O,D.value,null):L=p(O,D.value,$-1),L.indexOf(`
`)>-1&&(ut?L=L.split(`
`).map(function(X){return"  "+X}).join(`
`).substr(2):L=`
`+L.split(`
`).map(function(X){return"   "+X}).join(`
`))):L=O.stylize("[Circular]","special")),j(I)){if(ut&&pt.match(/^\d+$/))return L;I=JSON.stringify(""+pt),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.substr(1,I.length-2),I=O.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=O.stylize(I,"string"))}return I+": "+L}function y(O,U,$){var J=0,pt=O.reduce(function(ut,I){return J++,I.indexOf(`
`)>=0&&J++,ut+I.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pt>60?$[0]+(U===""?"":U+`
 `)+" "+O.join(`,
  `)+" "+$[1]:$[0]+U+" "+O.join(", ")+" "+$[1]}t.types=Kn();function v(O){return Array.isArray(O)}t.isArray=v;function k(O){return typeof O=="boolean"}t.isBoolean=k;function E(O){return O===null}t.isNull=E;function B(O){return O==null}t.isNullOrUndefined=B;function R(O){return typeof O=="number"}t.isNumber=R;function M(O){return typeof O=="string"}t.isString=M;function S(O){return typeof O=="symbol"}t.isSymbol=S;function j(O){return O===void 0}t.isUndefined=j;function C(O){return z(O)&&rt(O)==="[object RegExp]"}t.isRegExp=C,t.types.isRegExp=C;function z(O){return typeof O=="object"&&O!==null}t.isObject=z;function V(O){return z(O)&&rt(O)==="[object Date]"}t.isDate=V,t.types.isDate=V;function N(O){return z(O)&&(rt(O)==="[object Error]"||O instanceof Error)}t.isError=N,t.types.isNativeError=N;function q(O){return typeof O=="function"}t.isFunction=q;function H(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||typeof O>"u"}t.isPrimitive=H,t.isBuffer=Hn();function rt(O){return Object.prototype.toString.call(O)}function it(O){return O<10?"0"+O.toString(10):O.toString(10)}var dt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ht(){var O=new Date,U=[it(O.getHours()),it(O.getMinutes()),it(O.getSeconds())].join(":");return[O.getDate(),dt[O.getMonth()],U].join(" ")}t.log=function(){console.log("%s - %s",ht(),t.format.apply(t,arguments))},t.inherits=Ht(),t._extend=function(O,U){if(!U||!z(U))return O;for(var $=Object.keys(U),J=$.length;J--;)O[$[J]]=U[$[J]];return O};function mt(O,U){return Object.prototype.hasOwnProperty.call(O,U)}var vt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(vt&&O[vt]){var U=O[vt];if(typeof U!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,vt,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var $,J,pt=new Promise(function(L,D){$=L,J=D}),ut=[],I=0;I<arguments.length;I++)ut.push(arguments[I]);ut.push(function(L,D){L?J(L):$(D)});try{O.apply(this,ut)}catch(L){J(L)}return pt}return Object.setPrototypeOf(U,Object.getPrototypeOf(O)),vt&&Object.defineProperty(U,vt,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,e(O))},t.promisify.custom=vt;function kt(O,U){if(!O){var $=new Error("Promise was rejected with a falsy value");$.reason=O,O=$}return U(O)}function ft(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var $=[],J=0;J<arguments.length;J++)$.push(arguments[J]);var pt=$.pop();if(typeof pt!="function")throw new TypeError("The last argument must be of type Function");var ut=this,I=function(){return pt.apply(ut,arguments)};O.apply(this,$).then(function(L){et.nextTick(I.bind(null,null,L))},function(L){et.nextTick(kt.bind(null,L,I))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(O)),Object.defineProperties(U,e(O)),U}t.callbackify=ft}),Yn=tt((t,e)=>{K();var r=ce(),n=Jn(),a=r.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,a.call(this,l)}n.inherits(s,a),s.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},e.exports=s});K();K();var Dr=Ut(ce(),1),Fr=Ut(Nn(),1);K();var $r=Ut(ce(),1);function Wr(t,e){let r=[],n;t.on("data",a=>r.push(a)),t.on("end",()=>{n||(n=!0,e(null,Q.Buffer.concat(r)))}),t.on("error",a=>{n||(n=!0,e(a))})}function qr(t){let e;return new $r.Transform({transform(r,n,a){e&&(r=Q.Buffer.concat([e,r]));let s=Math.floor(r.length/t)*t;s?r.length>s?(e=r.slice(s),this.push(r.slice(0,s))):(e=void 0,this.push(r)):e=e?Q.Buffer.concat([e,r]):r,a()},flush(r){e&&this.push(e),r()}})}function Xn(t,e){let r=[],n=0;return new $r.Transform({transform(a,s,l){r.push(a),n+=a.length,l()},flush(a){e(n);function s(){for(;r.length;)if(!t.write(r.shift()))return t.once("drain",s);t.end(),a()}s()}})}function Ot(t){let e,r=new Promise((n,a)=>{e=(s,l)=>{s?a(s):n(l)}});return t&&r.then(n=>t(null,n),t),[e,r]}var Zn=Ut(Pr(),1);K();K();var Xe=class{constructor(t){this._tables[0][0][0]||this._precompute();let e,r,n,a,s,l=this._tables[0][4],o=this._tables[1],f=t.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[a=t.slice(0),s=[]],e=f;e<4*f+28;e++)n=a[e-1],(e%f===0||f===8&&e%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],e%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),a[e]=a[e-f]^n;for(r=0;e;r++,e--)n=a[r&3?e:e-4],e<=4||r<4?s[r]=n:s[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){let t=this._tables[0],e=this._tables[1],r=t[4],n=e[4],a,s,l,o=[],f=[],d,p,g,b,_,h;for(a=0;a<256;a++)f[(o[a]=a<<1^(a>>7)*283)^a]=a;for(s=l=0;!r[s];s^=d||1,l=f[l]||1)for(b=l^l<<1^l<<2^l<<3^l<<4,b=b>>8^b&255^99,r[s]=b,n[b]=s,g=o[p=o[d=o[s]]],h=g*16843009^p*65537^d*257^s*16843008,_=o[b]*257^b*16843008,a=0;a<4;a++)t[a][s]=_=_<<24^_>>>8,e[a][b]=h=h<<24^h>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),e[a]=e[a].slice(0)}_crypt(t,e){if(t.length!==4)throw new Error("invalid aes block size");let r=this._key[e],n=t[0]^r[0],a=t[e?3:1]^r[1],s=t[2]^r[2],l=t[e?1:3]^r[3],o,f,d,p=r.length/4-2,g,b=4,_=[0,0,0,0],h=this._tables[e],y=h[0],v=h[1],k=h[2],E=h[3],B=h[4];for(g=0;g<p;g++)o=y[n>>>24]^v[a>>16&255]^k[s>>8&255]^E[l&255]^r[b],f=y[a>>>24]^v[s>>16&255]^k[l>>8&255]^E[n&255]^r[b+1],d=y[s>>>24]^v[l>>16&255]^k[n>>8&255]^E[a&255]^r[b+2],l=y[l>>>24]^v[n>>16&255]^k[a>>8&255]^E[s&255]^r[b+3],b+=4,n=o,a=f,s=d;for(g=0;g<4;g++)_[e?3&-g:g]=B[n>>>24]<<24^B[a>>16&255]<<16^B[s>>8&255]<<8^B[l&255]^r[b++],o=n,n=a,a=s,s=l,l=o;return _}};Xe.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function Qn(t){let e,r,n,a=[2479122403,2108737444,3518906241,22203222],s=Q.Buffer.alloc(Math.ceil(t.length/4)*4);for(s.set(t,0),n=65536;n--;)for(r=0;r<t.length;r+=16){let o=[0,0,0,0];for(e=0;e<16;e+=4)e+r<t.length&&(o[e/4]=s.readInt32BE(e+r));a=new Xe(o).encrypt(a)}let l=Q.Buffer.allocUnsafe(16);for(e=0;e<4;e++)l.writeInt32BE(a[e],e*4);return l}function ti(t,e,r){let n=Q.Buffer.from(e.s,"base64"),a=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:a,hash:{name:s}},l,256)).then(l=>{r(null,Q.Buffer.from(l))}).catch(r)}var Dt=class{constructor(t){if(t.length!==16)throw Error("Wrong key length. Key must be 128bit.");let e=[];for(let r=0;r<4;r++)e[r]=t.readInt32BE(r*4);this.aes=new Xe(e)}encryptCBC(t){let e=[0,0,0,0],r=Array(4),n,a;for(n=0;n<t.length;n+=16){for(a=0;a<4;a++)r[a]=t.readUInt32BE(n+a*4)^e[a];for(e=this.aes.encrypt(r),a=0;a<4;a++)t.writeInt32BE(e[a],n+a*4)}}decryptCBC(t){let e=[0,0,0,0],r=Array(4),n=Array(4),a,s;for(a=0;a<t.length;a+=16){for(s=0;s<4;s++)r[s]=t.readUInt32BE(a+s*4);for(n=r,r=this.aes.decrypt(r),s=0;s<4;s++)t.writeInt32BE(r[s]^e[s],a+s*4);e=n}}stringhash(t){let e=[0,0,0,0];for(let n=0;n<t.length;n+=4)if(t.length-n<4){let a=t.length-n;e[n/4&3]^=t.readIntBE(n,a)<<(4-a)*8}else e[n/4&3]^=t.readInt32BE(n);for(let n=16384;n--;)e=this.aes.encrypt(e);let r=Q.Buffer.allocUnsafe(8);return r.writeInt32BE(e[0],0),r.writeInt32BE(e[2],4),r}encryptECB(t){let e=[];for(let r=0;r<t.length;r+=16)e[0]=t.readInt32BE(r),e[1]=t.readInt32BE(r+4),e[2]=t.readInt32BE(r+8),e[3]=t.readInt32BE(r+12),e=this.aes.encrypt(e),t.writeInt32BE(e[0],r),t.writeInt32BE(e[1],r+4),t.writeInt32BE(e[2],r+8),t.writeInt32BE(e[3],r+12);return t}decryptECB(t){let e=[];for(let r=0;r<t.length;r+=16)e[0]=t.readInt32BE(r),e[1]=t.readInt32BE(r+4),e[2]=t.readInt32BE(r+8),e[3]=t.readInt32BE(r+12),e=this.aes.decrypt(e),t.writeInt32BE(e[0],r),t.writeInt32BE(e[1],r+4),t.writeInt32BE(e[2],r+8),t.writeInt32BE(e[3],r+12);return t}},Vr=class{constructor(t,e,r=0){this.aes=t,this.nonce=e.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=Q.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(t){for(let e=0;e<t.length;e+=16){let r=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let n=0;n<16;n++)t[e+n]^=r[n];this.incrementCTR()}return t}decrypt(t){for(let e=0;e<t.length;e+=16){let r=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let n=0;n<16;n++)t[e+n]^=r[n];this.incrementCTR()}return t}incrementCTR(t=1){let e=this.ctr,r=15,n;for(;t!==0;)n=(t+e[r])%256,t=Math.floor((t+e[r])/256),e[r]=n,r-=1,r<0&&(r=15)}},zr=class{constructor(t,e,r=0){this.aes=t,this.nonce=e.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=Q.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let t=Q.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)t[n]^=this.macs[r][n];this.aes.encryptECB(t)}let e=Q.Buffer.allocUnsafe(8);return e.writeInt32BE(t.readInt32BE(0)^t.readInt32BE(4),0),e.writeInt32BE(t.readInt32BE(8)^t.readInt32BE(12),4),e}update(t){for(let e=0;e<t.length;e+=16){for(let r=0;r<16;r++)this.mac[r]^=t[e+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(Q.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function xt(t){return typeof t=="string"?Ze(t):t}function St(t){return t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ze(t){return Q.Buffer.from(t,"base64")}function Yt(t){return new Dt(Gr(t).slice(0,16))}function ei(t,e={}){let r=e.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");t=xt(t),t||(t=(0,Zn.default)(24)),t instanceof Q.Buffer||(t=Q.Buffer.from(t));let n=new Dr.Transform({transform(o,f,d){l.update(o);let p=s.encrypt(o);d(null,Q.Buffer.from(p))},flush(o){n.mac=l.condense(),n.key=ni(t,n.mac),o()}});if(t.length!==24)throw Error("Wrong key length. Key must be 192bit.");let a=new Dt(t.slice(0,16)),s=new Vr(a,t.slice(16),r),l=new zr(a,t.slice(16));return n=(0,Fr.default)(qr(16),n),n}function ri(t,e={}){let r=e.start||0;if(r!==0&&(e.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");t=xt(t),t instanceof Q.Buffer||(t=Q.Buffer.from(t));let n=Yt(t),a=new Vr(n,t.slice(16),r),s=!e.disableVerification&&new zr(n,t.slice(16)),l=new Dr.Transform({transform(o,f,d){let p=a.decrypt(o);s&&s.update(p),d(null,Q.Buffer.from(p))},flush(o){if(s&&(l.mac=s.condense()),!e.disableVerification&&!l.mac.equals(t.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,Fr.default)(qr(16),l),l}function Gr(t){let e=Q.Buffer.alloc(32);t.copy(e);for(let r=0;r<16;r++)e.writeUInt8(e.readUInt8(r)^e.readUInt8(16+r,!0),r);return e}function ni(t,e){let r=Q.Buffer.alloc(32);t.copy(r),e.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function ii(t,e){if(t.length!==e.length)return!1;let r=t.length,n=0;for(let a=0;a<r;a++)n|=t[a]^e[a];return n===0}K();K();var $t={},oi=Math.log(2);function _e(t){let e=[];for(;t-- >0;)e[t]=0;return e}function Ee(t){let e=t.length;if(t[e-1])return t;for(;e>1&&t[e-1]===0;)e--;return t.slice(0,e)}function ai(t){let e=1,r;return(r=t>>>16)!==0&&(t=r,e+=16),(r=t>>8)!==0&&(t=r,e+=8),(r=t>>4)!==0&&(t=r,e+=4),(r=t>>2)!==0&&(t=r,e+=2),(r=t>>1)!==0&&(t=r,e+=1),e}function Kr(t,e){let r=t.length,n=e.length;if(r<n)return Kr(e,t);let a=[],s=0,l=0;for(;l<n;l++)s+=t[l]+e[l],a[l]=s&268435455,s>>>=28;for(;l<r;l++)s+=t[l],a[l]=s&268435455,s>>>=28;return s&&(a[l]=s),a}function jt(t,e){let r=t.length,n=e.length;if(n>r)return[];if(n===r){if(e[n-1]>t[n-1])return[];if(n===1)return[t[0]-e[0]]}let a=[],s=0,l;for(l=0;l<n;l++)s+=t[l]-e[l],a[l]=s&268435455,s>>=28;for(;l<r;l++)s+=t[l],a[l]=s&268435455,s>>=28;return s?[]:Ee(a)}function Ne(t,e,r,n,a){let s=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*s,p=s*o+((d&16383)<<14)+t[e]+a;return t[e]=p&268435455,a=l*f+(d>>14)+(p>>28),a}function si(t){let e=t.length,r=2*e,n=_e(r),a=0,s,l;for(s=0;s<e;s++){for(a=Ne(n,2*s,t[s],t[s],0),l=s+1;l<e;l++)a=Ne(n,s+l,2*t[l],t[s],a);n[s+e]=a}return Ee(n)}function Gt(t,e){let r=t.length,n=e.length,a=_e(r+n-1),s,l,o;for(l=0;l<n;l++){for(s=0,o=0;o<r;o++)s=Ne(a,l+o,t[o],e[l],s);a[l+r]=s}return Ee(a)}function pe(t,e,r){let n=0;for(;e>=0&&r-- >0;)n=n*268435456+t[e--];return n}function Hr(t,e){let r=t.length-1,n=e.length-1,a=r-n,s,l,o,f;if(r<n||r===n&&(t[r]<e[r]||r>0&&t[r]===e[r]&&t[r-1]<e[r-1]))return $t.q=[0],$t.mod=t,$t;if(r===n&&pe(t,n,2)/pe(e,n,2)<4){for(s=t.concat(),l=0;o=jt(s,e),o.length!==0;)s=o,l++;return $t.q=[l],$t.mod=s,$t}let d=Math.floor(Math.log(e[n])/oi)+1,p=28-d;s=t.concat();let g=e.concat();if(p){for(f=n;f>0;f--)g[f]=g[f]<<p&268435455|g[f-1]>>d;for(g[0]=g[0]<<p&268435455,s[r]&(268435455<<d&268435455)&&(s[++r]=0,a++),f=r;f>0;f--)s[f]=s[f]<<p&268435455|s[f-1]>>d;s[0]=s[0]<<p&268435455}let b,_=_e(a+1),h=_e(a).concat(g);for(;b=jt(s,h),b.length!==0;)_[a]++,s=b;let y=g[n],v=pe(g,n,2),k;for(f=r;f>n;f--){k=f-n-1,f>=s.length?_[k]=1:s[f]===y?_[k]=268435455:_[k]=Math.floor(pe(s,f,2)/y);let E=pe(s,f,3);for(;_[k]*v>E;)_[k]--;h=h.slice(1),b=jt(s,Gt([_[k]],h)),b.length===0&&(_[k]--,b=jt(s,Gt([_[k]],h))),s=b}if(p){for(f=0;f<s.length-1;f++)s[f]=s[f]>>p|s[f+1]<<d&268435455;s[s.length-1]>>=p}return $t.q=Ee(_),$t.mod=Ee(s),$t}function li(t,e){let r=0,n;for(let a=t.length-1;a>=0;a--)n=t[a],r=((n>>14)+(r<<14))%e,r=((n&16383)+(r<<14))%e;return r}function ne(t,e){if(e.length===1){if(t.length===1)return[t[0]%e[0]];if(e[0]<16383)return[li(t,e[0])]}return Hr(t,e).mod}function me(t,e,r){let n=t.length-(e.length<<1);if(n>0)return me(t.slice(0,n).concat(me(t.slice(n),e,r)),e,r);let a=e.length+1,s=e.length-1,l,o=Gt(t.slice(s),r).slice(a),f=t.slice(0,a),d=Gt(o,e).slice(0,a),p=jt(f,d);p.length===0&&(f[a]=1,p=jt(f,d));for(let g=0;l=jt(p,e),l.length!==0;g++)if(p=l,g>=3)return me(p,e,r);return p}function ir(t,e,r){let n=t.concat(),a=e.length-1,s=r.length*2,l=_e(s+1);for(l[s]=1,l=Hr(l,r).q,s=ai(e[a])-2;a>=0;a--){for(;s>=0;s-=1)n=me(si(n),r,l),e[a]&1<<s&&(n=me(Gt(n,t),r,l));s=28-1}return n}function ui(t,e,r,n,a){let s=ir(ne(t,r),ne(e,jt(r,[1])),r),l=ir(ne(t,n),ne(e,jt(n,[1])),n),o=jt(l,s);return o.length===0?(o=jt(s,l),o=ne(Gt(o,a),n),o=jt(n,o)):o=ne(Gt(o,a),n),Kr(Gt(o,r),s)}function Jr(t){let e=1,r=[0],n=0,a=256,s=t.length,l;if(s<2)return 0;let o=(s-2)*8,f=t.charCodeAt(0)*256+t.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(a<<=1)>255&&(a=1,l=t.charCodeAt(--s)),e>268435455&&(e=1,r[++n]=0),l&a&&(r[n]|=e),e<<=1;return r}function fi(t){let e=1,r=0,n=[0],a=1,s=0,l=t.length*28,o="",f;for(f=0;f<l;f++)t[r]&e&&(n[s]|=a),(a<<=1)>255&&(a=1,n[++s]=0),(e<<=1)>268435455&&(e=1,r++);for(;s>=0&&n[s]===0;)s--;for(f=0;f<=s;f++)o=String.fromCharCode(n[f])+o;return o}function ci(t){let e=[];for(let r=0;r<4;r++){let n=(t[0]*256+t[1]+7>>3)+2;if(e[r]=Jr(t.toString("binary").substr(0,n)),typeof e[r]=="number"){if(r!==4||t.length>=16)return!1;break}t=t.slice(n)}return e}function hi(t,e){let r=Jr(t.toString("binary")),n=fi(ui(r,e[2],e[0],e[1],e[3]));return Q.Buffer.from(n,"binary")}K();var di=Ut(ke(),1);K();var pi=null;K();var yi=globalThis.fetch,gi=yi;K();var bi=globalThis.AbortController||pi,De=bi,Fe=4,or={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+Fe+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},mi="https://g.api.mega.co.nz/",wi=null,vi=null,ye=class extends di.EventEmitter{constructor(t,e={}){super(),this.keepalive=t,this.counterId=Math.random().toString().substr(2,10),this.gateway=e.gateway||mi;let r="1.0.6";this.userAgent=e.userAgent===null?null:`${e.userAgent||""} megajs/${r}`.trim(),this.httpAgent=e.httpAgent||wi,this.httpsAgent=e.httpsAgent||vi,this.fetch=e.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(t,e){return e||(e={}),e.agent||(e.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(e.headers||(e.headers={}),e.headers["user-agent"]||(e.headers["user-agent"]=this.userAgent)),gi(t,e)}request(t,e,r=0){let n=t.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[a,s]=Ot(e),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof t._querystring=="object"&&(Object.assign(l,t._querystring),delete t._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([t])}).then(ar).then(o=>{if(this.closed&&!n)return;if(!o)return a(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<Fe)return setTimeout(()=>{this.request(t,a,r+1)},Math.pow(2,r+1)*1e3);f=Error(or[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);a(f,o)}).catch(o=>{a(o)}),s}pull(t,e=0){let r=new De;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:t,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(ar).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&e<Fe)return setTimeout(()=>{this.pull(t,e+1)},Math.pow(2,e+1)*1e3);this.emit("error",Error(or[-n]))}n.w?this.wait(n.w,t):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(_i).catch(n=>{this.emit("error",n)})}wait(t,e){let r=new De;this.sn=r,this.fetch(t,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(e)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return ye.globalApi||(ye.globalApi=new ye),ye.globalApi}};function ar(t){if(t.statusText==="Server Too Busy")return-3;if(!t.ok)throw Error(`Server returned error: ${t.statusText}`);return t.json()}function _i(t){if(t.name!=="AbortError")throw t}var $e=ye,Ei=Ut(ke(),1);K();K();var Si=Ut(ke(),1),ki=Ut(ce(),1),Ai=Ut(Yn(),1),Jt=class extends Si.EventEmitter{constructor(t){if(super(),this.checkConstructorArgument(t.downloadId),this.checkConstructorArgument(t.key),this.checkConstructorArgument(t.loadedFile),this.downloadId=t.downloadId,this.key=t.key?xt(t.key):null,this.type=t.directory?1:0,this.directory=!!t.directory,this.api=t.api||$e.getGlobalApi(),!(this.api instanceof $e))throw Error("api must be a instance of API");this.loadedFile=t.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(t){if(typeof t=="string"&&!/^[\w-]+$/.test(t))throw Error(`Invalid argument: "${t}"`)}loadMetadata(t,e){if(this.size=e.s||0,this.timestamp=e.ts||0,this.type=e.t,this.directory=!!e.t,this.owner=e.u,this.name=null,!t||!e.k)return;let r=e.k.split(":");this.key=xt(r[r.length-1]),t.decryptECB(this.key),e.a&&this.decryptAttributes(e.a)}decryptAttributes(t){if(!this.key)return this;t=Ze(t),Yt(this.key).decryptCBC(t);let e=Jt.unpackAttributes(t);e&&this.parseAttributes(e)}parseAttributes(t){this.attributes=t,this.name=t.n,this.label=Yr[t.lbl||0],this.favorited=!!t.fav}loadAttributes(t){let[e,r]=Ot(t),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(a,s)=>{if(a)return e(a);if(this.directory){let l=Object.create(null),o=s.f,f=o.find(p=>p.k&&p.h===p.k.split(":")[0]),d=this.key?new Dt(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let p of o){if(p===f)continue;let g=new Jt(p,this.storage);g.loadMetadata(d,p),g.downloadId=[this.downloadId,p.h],l[p.h]=g}for(let p of o){let g=l[p.p];if(g){let b=l[p.h];g.children||(g.children=[]),g.children.push(b),b.parent=g}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return e(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let p=l[this.loadedFile];typeof p>"u"?e(Error("Node (file or folder) not found in folder")):e(null,p)}else e(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return e(Error("Attributes could not be decrypted with provided key."));e(null,this)}}),r}download(t,e){var h;typeof t=="function"&&(e=t,t={}),t||(t={});let r=t.start||0,n=t.returnCiphertext?r:r-r%16,a=t.end||null,s=t.maxConnections||4,l=t.initialChunkSize||128*1024,o=t.chunkSizeIncrement||128*1024,f=t.maxChunkSize||1024*1024,d=(h=t.forceHttps)==null||h?2:0,p={a:"g",g:1,ssl:d};if(this.nodeId?p.n=this.nodeId:Array.isArray(this.downloadId)?(p._querystring={n:this.downloadId[0]},p.n=this.downloadId[1]):p.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!t.returnCiphertext)throw Error("Can't download: key isn't defined");let g=this.key&&!t.returnCiphertext?ri(this.key,{start:n,disableVerification:n!==0||a!==null}):new ki.PassThrough,b=n===r?g:g.pipe(new Ai.default({skip:r-n})),_=t.handleRetries||Jt.defaultHandleRetries;return this.api.request(p,(y,v)=>{if(y)return b.emit("error",y);if(typeof v.g!="string"||v.g.substr(0,4)!=="http")return b.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(v.s===0)return b.end();if(a||(a=v.s-1),r>a)return b.emit("error",Error("You can't download past the end of the file."));function k(q){if(q.status!==200){if(q.status===509){let H=q.headers.get("x-mega-time-left"),rt=Error("Bandwidth limit reached: "+H+" seconds until it resets");rt.timeLimit=H,b.emit("error",rt);return}b.emit("error",Error("MEGA returned a "+q.status+" status code"))}}function E(q){b.emit("error",q)}let B=0;if(b.on("data",q=>{B+=q.length,b.emit("progress",{bytesLoaded:B,bytesTotal:v.s})}),s===1){let q=new De;b.on("close",()=>{q.abort()}),this.api.fetch(v.g+"/"+n+"-"+a,{signal:q.signal}).then(H=>{k(H);let rt=H.body;if(rt)if(rt.pipe)H.body.pipe(g);else if(rt.getReader){let it=rt.getReader(),dt=({done:ht,value:mt})=>{if(ht)g.end();else return g.write(mt),it.read().then(dt)};it.read().then(dt)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(E);return}let R={},M=0,S=0,j=!1,C=n,z=l;b.on("error",()=>{j=!0}),b.on("close",()=>{j=!0});let V=()=>{if(C>a){j=!0,M===S&&g.end();return}let q=C,H=Math.min(a,q+z-1),rt=M++,it=0,dt=()=>{it++,this.api.fetch(v.g+"/"+q+"-"+H).then(ht=>(k(ht),ht.arrayBuffer())).then(ht=>{let mt=Q.Buffer.from(ht);R[rt]=mt,S===rt&&N()},ht=>{_(it,ht,mt=>{mt?E(mt):dt()})})};dt(),C=H+1,z<f&&(z=z+o)},N=()=>{let q;for(;;){let H=R[S];if(!H||(q=!g.write(H),delete R[S],S++,q))break}j&&M===S&&g.end(),q?g.once("drain",N):V()};for(let q=0;q<s;q++)V()}),e&&Wr(b,e),b}downloadBuffer(t,e){let[r,n]=Ot(e);return this.download(t,r),n}link(t,e){arguments.length===1&&typeof t=="function"&&(e=t,t={noKey:!1});let[r,n]=Ot(e);typeof t=="boolean"&&(t={noKey:t});let a=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!t.noKey&&this.key&&(a+=`#${St(this.key)}`),!t.noKey&&this.loadedFile&&(a+=`/file/${this.loadedFile}`),r(null,a),n}static fromURL(t,e={}){if(typeof t=="object")return new Jt(t);let r=new URL(t);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),a=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),s=n[0];if(a&&!s||!a&&s)throw Error("Invalid URL: too few arguments");return new Jt({downloadId:a,key:s,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...e})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new Jt({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...e})}}static unpackAttributes(t){let e=0;for(;e<t.length&&t.readUInt8(e);)e++;if(t=t.slice(0,e).toString(),t.substr(0,6)==='MEGA{"')try{return JSON.parse(t.substr(4))}catch{}}static defaultHandleRetries(t,e,r){t>8?r(e):setTimeout(r,1e3*Math.pow(2,t))}},Yr=["","red","orange","yellow","green","blue","purple","grey"],Wt=Jt,Ue=Ut(Pr(),1),sr=Ut(ce(),1),lr={},ge=class extends Wt{constructor(t,e){if(super(t),this.storage=e,this.api=e.api,this.nodeId=t.h,this.timestamp=t.ts,this.type=t.t,this.directory=!!this.type,t.k){let r=t.k.split("/"),n=e.aes;for(let a of r){let s=a.split(":")[0];if(s===e.user){t.k=a;break}let l=e.shareKeys[s];if(l){t.k=a,n=lr[s],n||(n=lr[s]=new Dt(l));break}}this.loadMetadata(n,t)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(t,e){if(!this.directory)throw Error("node isn't a directory");let[r,n]=Ot(e);if(typeof t=="string"&&(t={name:t}),t.attributes||(t.attributes={}),t.name&&(t.attributes.n=t.name),!t.attributes.n)throw Error("file name is required");if(t.target||(t.target=this),t.key||(t.key=Q.Buffer.from((0,Ue.default)(16))),t.key.length!==16)throw Error("wrong key length, must be 128bit");let a=t.key,s=ge.packAttributes(t.attributes);Yt(a).encryptCBC(s);let l=Q.Buffer.from(a);this.storage.aes.encryptECB(l);let o={a:"p",t:t.target.nodeId?t.target.nodeId:t.target,n:[{h:"xxxxxxxx",t:1,a:St(s),k:St(l)}]},f=we(this.storage.shareKeys,this);return f.length>0&&(o.cr=Ie(this.storage,[{nodeId:"xxxxxxxx",key:a}],f)),this.api.request(o,(d,p)=>{if(d)return r(d);let g=this.storage._importFile(p.f[0]);this.storage.emit("add",g),r(null,g)}),n}upload(t,e,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof e=="function"&&([r,e]=[e,null]);let[n,a]=Ot(r);if(typeof t=="string"&&(t={name:t}),t.attributes||(t.attributes={}),t.name&&(t.attributes.n=t.name),!t.attributes.n)throw Error("File name is required.");if(!(typeof t.size=="number"&&t.size>=0)&&!(e&&typeof e.pipe!="function"&&typeof e.length=="number")&&!t.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");t.target||(t.target=this);let s,l=xt(t.key);l||(l=(0,Ue.default)(24)),l instanceof Q.Buffer||(l=Q.Buffer.from(l));let o=t.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");t.uploadCiphertext&&(s=l,l=Gr(l).slice(0,24)),t.key=l;let f=[],d=(b,_,h,y)=>{if(b)return g(b);if(!h||h.length===0){g(Error("Server returned a invalid response while uploading"));return}let v=Number(h.toString());if(v<0){g(Error("Server returned error "+v+" while uploading"));return}if(f[_]=h,_===0&&!s&&(s=y.key),t.thumbnailImage&&!f[1]||t.previewImage&&!f[2]||!f[0])return;let k=ge.packAttributes(t.attributes);Yt(s).encryptCBC(k);let E=Q.Buffer.from(s);this.storage.aes.encryptECB(E);let B={h:St(f[0]),t:0,a:St(k),k:St(E)};f.length!==1&&(B.fa=f.slice(1).map((S,j)=>j+"*"+St(S)).filter(S=>S).join("/"));let R={a:"p",t:t.target.nodeId?t.target.nodeId:t.target,n:[B]},M=we(this.storage.shareKeys,this);M.length>0&&(R.cr=Ie(this.storage,[{nodeId:B.h,key:s}],M)),this.api.request(R,(S,j)=>{if(S)return g(S);let C=this.storage._importFile(j.f[0]);this.storage.emit("add",C),p.emit("complete",C),n&&n(null,C)})};t.thumbnailImage&&this._uploadAttribute(t,t.thumbnailImage,1,d),t.previewImage&&this._uploadAttribute(t,t.previewImage,2,d);let p=this._upload(t,e,0,d);function g(b){p.listenerCount("error")?p.emit("error",b):n(b)}return p.complete=a,p}_upload(t,e,r,n){let a=t.uploadCiphertext?new sr.PassThrough:ei(t.key),s=a,l=t.size;return e&&typeof e.pipe!="function"&&(l=e.length,s.end(e)),l!=null?(l===0&&a.end(),this._uploadWithSize(s,l,a,r,t,n)):s=Xn(s,o=>{this._uploadWithSize(s,o,a,r,t,n)}),e&&typeof e.pipe=="function"&&e.pipe(s),s}_uploadAttribute(t,e,r,n){let a=(s,l)=>{if(s)return n(s);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=Q.Buffer.concat([l,Q.Buffer.alloc(f)])),(t.handle?Yt(t.key):new Dt(t.key.slice(0,16))).encryptCBC(l);let d=new sr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,t,n)};if(e instanceof Q.Buffer){a(null,e);return}Wr(e,a)}_uploadWithSize(t,e,r,n,a,s){var V;let l=(V=a.forceHttps)==null||V?2:0,o=n===0?{a:"u",ssl:l,s:e,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:e};a.handle&&(o.h=a.handle);let f=n===0?a.initialChunkSize||128*1024:e,d=a.chunkSizeIncrement||128*1024,p=a.maxChunkSize||1024*1024,g=a.maxConnections||4,b=a.handleRetries||Wt.defaultHandleRetries,_=f,h=0,y=!1,v=0,k,E,B,R,M,S=()=>{R=Math.min(_,e-v),E=Q.Buffer.alloc(R),h++,_<p&&(_+=d),M=0,k&&(k.copy(E),M=Math.min(k.length,R),k=k.length>R?k.slice(R):null),M===R?j():(y=!0,z())},j=()=>{let N=v,q=E,H=0,rt=()=>{H++,this.api.fetch(B+"/"+(n===0?N:n-1),{method:"POST",body:q,headers:{"content-length":q.length}}).then(it=>{if(it.status!==200)throw Error("MEGA returned a "+it.status+" status code");return it.arrayBuffer()}).then(it=>{let dt=Q.Buffer.from(it);dt.length>0?(r.end(),et.nextTick(()=>{s(null,n,dt,r)})):v<e&&!y&&S()},it=>{b(H,it,dt=>{dt?t.emit("error",dt):rt()})})};rt(),E=null,v+=R,v<e&&!y&&h<g&&S()},C=0,z=()=>{for(;;){let N=r.read();if(N===null){r.once("readable",z);break}if(C+=N.length,t.emit("progress",{bytesLoaded:C,bytesTotal:e}),N.copy(E,M),M+=N.length,M>=R){y=!1,k=N.slice(N.length-(M-R)),j();break}}};r.on("end",()=>{e&&C!==e&&t.emit("error",Error("Specified data size does not match: "+e+" !== "+C))}),this.api.request(o,(N,q)=>{if(N)return s(N);B=q.p,S()})}uploadAttribute(t,e,r){let[n,a]=Ot(r);if(typeof t=="string"&&(t=["thumbnail","preview"].indexOf(t)),t!==0&&t!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},e,t+1,(s,l,o,f)=>{if(s)return n(s);let d={a:"pfa",n:this.nodeId,fa:t+"*"+St(o)};this.api.request(d,(p,g)=>{if(p)return n(p);n(null,this)})}),a}delete(t,e){return typeof t=="function"&&(e=t,t=void 0),typeof t>"u"&&(t=this.parent===this.storage.trash),t?this.api.request({a:"d",n:this.nodeId},e):this.moveTo(this.storage.trash,e)}moveTo(t,e){if(typeof t=="string"&&(t=this.storage.files[t]),!(t instanceof Wt))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:t.nodeId},n=we(this.storage.shareKeys,t);return n.length>0&&(r.cr=Ie(this.storage,[this],n)),this.api.request(r,e)}setAttributes(t,e){let[r,n]=Ot(e);Object.assign(this.attributes,t);let a=ge.packAttributes(this.attributes);return Yt(this.key).encryptCBC(a),this.api.request({a:"a",n:this.nodeId,at:St(a)},s=>{this.parseAttributes(this.attributes),r(s)}),n}rename(t,e){return this.setAttributes({n:t},e)}setLabel(t,e){if(typeof t=="string"&&(t=Yr.indexOf(t)),typeof t!="number"||Math.floor(t)!==t||t<0||t>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:t},e)}setFavorite(t,e){return this.setAttributes({fav:t?1:0},e)}link(t,e){arguments.length===1&&typeof t=="function"&&(e=t,t={noKey:!1}),typeof t=="boolean"&&(t={noKey:t}),t||(t={});let r=t.__folderKey;if(this.directory&&!r)return this.shareFolder(t,e);let[n,a]=Ot(e);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return n(s);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!t.noKey&&this.key&&(o+=`#${St(r||this.key)}`),n(null,o)}),a}shareFolder(t,e){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},t),e);let a=xt(t.key);a||(a=(0,Ue.default)(16)),a instanceof Q.Buffer||(a=Q.Buffer.from(a));let[s,l]=Ot(e);if(a.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=a;let o=Q.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:St(this.storage.aes.encryptECB(Q.Buffer.from(a))),ha:St(o),cr:Ie(this.storage,this)};return this.api.request(f,d=>{if(d)return s(d);this.link(Object.assign({__folderKey:a},t),s)}),l}unshare(t){return this.directory?this.unshareFolder(t):this.api.request({a:"l",n:this.nodeId,d:1},t)}unshareFolder(t){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},t)}importFile(t,e){let[r,n]=Ot(e);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof t=="string"&&(t=Wt.fromURL(t)),!(t instanceof Wt))throw Error("First argument of importFile should be a File or a URL string");if(!t.key)return r(Error("Can't import files without encryption keys")),n;let a=(s,l)=>{if(s)return r(s);let o=ge.packAttributes(l.attributes);Yt(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:St(o),k:St(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(p,g)=>{if(p)return r(p);let b=this.storage._importFile(g.f[0]);this.storage.emit("add",b),r(null,b)})};return t.attributes?a(null,t):t.loadAttributes(a),n}static packAttributes(t){let e=JSON.stringify(t);e=Q.Buffer.from(`MEGA${e}`);let r=Q.Buffer.alloc(Math.ceil(e.length/16)*16);return e.copy(r),r}};function Ie(t,e,r){let n=t.shareKeys;Array.isArray(e)||(e=Xr(e)),r||(r=e.map(s=>we(n,s)).reduce((s,l)=>s.concat(l)).filter((s,l,o)=>l===o.indexOf(s)));let a=[r,e.map(s=>s.nodeId),[]];for(let s=r.length;s--;){let l=new Dt(n[r[s]]);for(let o=e.length;o--;){let f=Q.Buffer.from(e[o].key);f&&(f.length===32||f.length===16)&&a[2].push(s,o,St(l.encryptECB(f)))}}return a}function Xr(t){return[t].concat((t.children||[]).map(Xr).reduce((e,r)=>e.concat(r),[]))}function we(t,e){let r=e.nodeId,n=e.parent,a=[];return t[r]&&a.push(r),n?a.concat(we(t,n)):a}var Ii=ge,Bi=class extends Ei.EventEmitter{constructor(t,e){super(),arguments.length===1&&typeof t=="function"&&(e=t,t={});let[r,n]=Ot(e);this.ready=n,t.keepalive=t.keepalive===void 0?!0:!!t.keepalive,t.autoload=t.autoload===void 0?!0:!!t.autoload,t.autologin=t.autologin===void 0?!0:!!t.autologin,this.api=new $e(t.keepalive,t),this.files={},this.options=t,this.status="closed",t.autologin?this.login(r):et.nextTick(()=>{r(null,this)})}login(t){let[e,r]=Ot(t);if(typeof this.options.email!="string")return et.nextTick(()=>{e(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",e(null,this),this.emit("ready",this)},a=f=>{this.api.request({a:"ug"},(d,p)=>{if(d)return f(d);this.name=p.name,this.user=p.u,this.options.autoload?this.reload(!0,g=>{if(g)return f(g);n()}):n()})};this.email=this.options.email.toLowerCase();let s=f=>{let d=Qn(Q.Buffer.from(this.options.password));delete this.options.password;let p=new Dt(d),g=St(p.stringhash(Q.Buffer.from(this.email))),b={a:"us",user:this.email,uh:g};o(b,p,f)},l=(f,d)=>{ti(Q.Buffer.from(this.options.password),f,(p,g)=>{if(p)return d(p);delete this.options.password;let b=new Dt(g.slice(0,16)),_=St(g.slice(16)),h={a:"us",user:this.email,uh:_};o(h,b,d)})},o=(f,d,p)=>{this.api.request(f,(g,b)=>{if(g)return p(g);this.key=xt(b.k),d.decryptECB(this.key),this.aes=new Dt(this.key);let _=xt(b.csid),h=this.aes.decryptECB(xt(b.privk)),y=ci(h);if(!y)throw Error("invalid credentials");let v=St(hi(_,y).slice(0,43));this.api.sid=this.sid=v,this.RSAPrivateKey=y,a(p)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return e(f);if(d.v===1)return s(e);if(d.v===2)return l(d,e);e(Error("Account version not supported"))}),this.status="connecting",r}reload(t,e){typeof t=="function"&&([t,e]=[e,t]);let[r,n]=Ot(e);return this.status==="connecting"&&!t?(this.once("ready",()=>{this.reload(t,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(a,s)=>{if(a)return r(a);this.shareKeys=s.ok.reduce((l,o)=>{let f=o.h,d=this.aes.encryptECB(Q.Buffer.from(f+f));return ii(xt(o.ha),d)&&(l[f]=this.aes.decryptECB(xt(o.k))),l},{}),s.f.forEach(l=>{var o;l=this._importFile(l),s.ph!==void 0&&(l.shareId=(o=s.ph.find(f=>f.h===l.nodeId))==null?void 0:o.ph,l.shared=!!l.shareId,l.shared&&(l.shareURL=`https://mega.nz/${l.directory?"folder":"file"}/${l.shareId}`,l.key&&(l.shareURL+=`#${St(l.directory?this.shareKeys[l.nodeId]:l.key)}`)))}),r(null,this.mounts)}),this.api.on("sc",a=>{let s={};a.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete s[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(s).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(t){if(!this.files[t.h]){let e=this.files[t.h]=new Ii(t,this);if(t.t===Oi&&(this.root=e,e.name="Cloud Drive"),t.t===Ti&&(this.trash=e,e.name="Rubbish Bin"),t.t===Ri&&(this.inbox=e,e.name="Inbox"),t.t>1&&this.mounts.push(e),t.p){let r=this.files[t.p];r&&(r.children||(r.children=[]),r.children.push(e),e.parent=r)}}return this.files[t.h]}mkdir(t,e){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(t,e)}upload(t,e,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(t,e,r)}close(t){return this.status="closed",this.api.close(),this.api.request({a:"sml"},t)}getAccountInfo(t){let[e,r]=Ot(t);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,a)=>{n&&e(n);let s={};s.type=a.utype,s.spaceUsed=a.cstrg,s.spaceTotal=a.mstrg,s.downloadBandwidthTotal=a.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=a.caxfer||0,s.sharedBandwidthUsed=a.csxfer||0,s.sharedBandwidthLimit=a.srvratio,e(null,s)}),r}toJSON(){return{key:St(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(t){let e=new Bi(Object.assign(t.options,{autoload:!1,autologin:!1}));return e.key=Ze(t.key),e.aes=new Dt(e.key),e.api.sid=e.sid=t.sid,e.name=t.name,e.user=t.user,e}},Oi=2,Ri=3,Ti=4;Wt.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function re(){return await dn("music",void 0,{upgrade(t,e,r,n,a){t.createObjectStore("album",{keyPath:"folderName"}),t.createObjectStore("image",{keyPath:"id"}),t.createObjectStore("song",{keyPath:"id"})}})}async function Li(){const t=await re(),e=t.getAll("album");return t.close(),e}async function ji(t){const e=await re(),r=e.transaction("album","readwrite"),n=r.objectStore("album"),a=[];for(const s of t)a.push(n.put(s));await Promise.all(a),r.commit(),e.close()}const ur={};async function Zr(t){const e=JSON.stringify(t);let r=ur[e];if(!r){const n=await Pi(t);r=URL.createObjectURL(n),ur[e]=r}return r}async function Pi(t){const e=JSON.stringify(t),r=await re(),n=await r.get("image",e);if(r.close(),n)return n.blob;const a=await new Wt({key:t.key,downloadId:t.downloadId}).downloadBuffer({}),s=new Blob([a]);return Mi(t,s),s}async function Mi(t,e){const n={id:JSON.stringify(t),blob:e},a=await re();await a.add("image",n),a.close()}async function Qr(t){const e=JSON.stringify({key:t.key,downloadId:t.downloadId}),r=await re(),n=await r.get("song",e);if(r.close(),n)return n.blob;const a=await new Wt({key:t.key,downloadId:t.downloadId}).downloadBuffer({}),s=new Blob([a]);return Ui(t,s),s}async function Ui(t,e){const n={id:JSON.stringify({key:t.key,downloadId:t.downloadId}),name:t.name,blob:e},a=await re();await a.add("song",n),a.close()}async function Re(t){const e=JSON.stringify(t),r=await re(),n=await r.get("song",e)!=null;return r.close(),n}const xi={ROOT_URL:"https://mega.nz/folder/HrY2VQ4B#bHcKtZGU3gvx0yq1K2YvoQ"};async function Ci(){const t=Wt.fromURL(xi.ROOT_URL);return await t.loadAttributes(),t.children.map(e=>{const r=e.children.find(n=>n.name.endsWith(".jpg"));return{name:e.name.split("(")[0].trim(),folderName:e.name,image:r?{key:r.key,downloadId:r.downloadId}:null,songs:e.children.filter(n=>n.name.endsWith(".mp3")).map(n=>({name:n.name.substring(0,n.name.length-4).trim(),link:{key:n.key,downloadId:n.downloadId}}))}})}async function tn(t,e){try{ie.update(n=>({...n,isLoading:!0}));const r=await Qr({name:t.name,key:t.link.key,downloadId:t.link.downloadId});ie.update(n=>(n.src!=null&&URL.revokeObjectURL(n.src),{...n,isLoading:!1,src:URL.createObjectURL(r),song:t.link,onFinish:e}))}catch{ie.update(r=>({...r,isLoading:!1,fileLink:null,src:null}))}}function fr(t,e,r){const n=t.slice();return n[11]=e[r],n}function Ni(t){let e,r,n,a;return{c(){e=st("button"),r=Ct("download"),this.h()},l(s){e=lt(s,"BUTTON",{class:!0});var l=ct(e);r=Nt(l,"download"),l.forEach(Z),this.h()},h(){Y(e,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){_t(s,e,l),ot(e,r),n||(a=ee(e,"click",t[5]),n=!0)},p:qt,d(s){s&&Z(e),n=!1,a()}}}function Di(t){let e,r;return{c(){e=st("div"),r=st("progress"),this.h()},l(n){e=lt(n,"DIV",{class:!0});var a=ct(e);r=lt(a,"PROGRESS",{class:!0}),ct(r).forEach(Z),a.forEach(Z),this.h()},h(){Y(r,"class","progress w-56 mb-2 h-4"),Y(e,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){_t(n,e,a),ot(e,r)},p:qt,d(n){n&&Z(e)}}}function Fi(t){let e,r,n;return{c(){e=st("figure"),r=st("img"),this.h()},l(a){e=lt(a,"FIGURE",{});var s=ct(e);r=lt(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Z),this.h()},h(){oe(r.src,n=t[2])||Y(r,"src",n),Y(r,"alt","Albumbild"),Y(r,"class","w-48 h-48 object-scale-down")},m(a,s){_t(a,e,s),ot(e,r)},p(a,s){s&4&&!oe(r.src,n=a[2])&&Y(r,"src",n)},d(a){a&&Z(e)}}}function cr(t){let e;return{c(){e=Ct("(Offline)")},l(r){e=Nt(r,"(Offline)")},m(r,n){_t(r,e,n)},d(r){r&&Z(e)}}}function hr(t){let e,r=t[11].name+"",n,a,s=t[1].includes(t[11].link),l,o,f,d,p=s&&cr();function g(){return t[8](t[11])}return{c(){e=st("li"),n=Ct(r),a=It(),p&&p.c(),l=It(),this.h()},l(b){e=lt(b,"LI",{class:!0});var _=ct(e);n=Nt(_,r),a=Bt(_),p&&p.l(_),l=Bt(_),_.forEach(Z),this.h()},h(){Y(e,"class",o=`cursor-pointer hover:underline ${t[11].link===t[3].song?"font-bold":""}`)},m(b,_){_t(b,e,_),ot(e,n),ot(e,a),p&&p.m(e,null),ot(e,l),f||(d=ee(e,"click",g),f=!0)},p(b,_){t=b,_&1&&r!==(r=t[11].name+"")&&Te(n,r),_&3&&(s=t[1].includes(t[11].link)),s?p||(p=cr(),p.c(),p.m(e,l)):p&&(p.d(1),p=null),_&9&&o!==(o=`cursor-pointer hover:underline ${t[11].link===t[3].song?"font-bold":""}`)&&Y(e,"class",o)},d(b){b&&Z(e),p&&p.d(),f=!1,d()}}}function $i(t){var y,v;let e,r,n,a,s,l,o,f,d;r=new _r({props:{title:(y=t[0].name)!=null?y:"L\xE4dt...",withCloseButton:!0,$$slots:{default:[Ni]},$$scope:{ctx:t}}});function p(k,E){return k[2]?Fi:Di}let g=p(t),b=g(t),_=(v=t[0].songs)!=null?v:[],h=[];for(let k=0;k<_.length;k+=1)h[k]=hr(fr(t,_,k));return{c(){e=st("main"),Xt(r.$$.fragment),n=It(),a=st("div"),s=st("div"),l=st("div"),b.c(),o=It(),f=st("ul");for(let k=0;k<h.length;k+=1)h[k].c();this.h()},l(k){e=lt(k,"MAIN",{class:!0});var E=ct(e);Zt(r.$$.fragment,E),n=Bt(E),a=lt(E,"DIV",{class:!0});var B=ct(a);s=lt(B,"DIV",{class:!0});var R=ct(s);l=lt(R,"DIV",{class:!0});var M=ct(l);b.l(M),M.forEach(Z),o=Bt(R),f=lt(R,"UL",{class:!0});var S=ct(f);for(let j=0;j<h.length;j+=1)h[j].l(S);S.forEach(Z),R.forEach(Z),B.forEach(Z),E.forEach(Z),this.h()},h(){Y(l,"class","mb-2"),Y(f,"class","mx-2"),Y(s,"class","card w-full md:w-96 bg-base-100 shadow-xl"),Y(a,"class","flex-1 flex justify-center"),Y(e,"class","flex-1 flex flex-col")},m(k,E){_t(k,e,E),Qt(r,e,null),ot(e,n),ot(e,a),ot(a,s),ot(s,l),b.m(l,null),ot(s,o),ot(s,f);for(let B=0;B<h.length;B+=1)h[B].m(f,null);d=!0},p(k,[E]){var R,M;const B={};if(E&1&&(B.title=(R=k[0].name)!=null?R:"L\xE4dt..."),E&16384&&(B.$$scope={dirty:E,ctx:k}),r.$set(B),g===(g=p(k))&&b?b.p(k,E):(b.d(1),b=g(k),b&&(b.c(),b.m(l,null))),E&27){_=(M=k[0].songs)!=null?M:[];let S;for(S=0;S<_.length;S+=1){const j=fr(k,_,S);h[S]?h[S].p(j,E):(h[S]=hr(j),h[S].c(),h[S].m(f,null))}for(;S<h.length;S+=1)h[S].d(1);h.length=_.length}},i(k){d||(Pt(r.$$.fragment,k),d=!0)},o(k){Mt(r.$$.fragment,k),d=!1},d(k){k&&Z(e),te(r),b.d(),wr(h,k)}}}function Wi(t,e,r){let n,a,s;Tt(t,ve,h=>r(7,a=h)),Tt(t,ie,h=>r(3,s=h));let{album:l}=e,o=[],f,d;async function p(h){await tn(h,()=>{const y=n.songs.indexOf(h)+1;p(n.songs.length<=y?n.songs[0]:n.songs[y])}),g()}async function g(){const h=[];for(const y of n.songs)await Re(y.link)&&h.push(y.link);r(1,o=h)}async function b(){try{d=!0;for(const h of n.songs)await Re(h.link)||(await Qr({name:h.name,key:h.link.key,downloadId:h.link.downloadId}),g())}finally{d=!1}}We(()=>{g()});const _=h=>p(h);return t.$$set=h=>{"album"in h&&r(6,l=h.album)},t.$$.update=()=>{t.$$.dirty&192&&r(0,n=a.find(h=>h.folderName===l)),t.$$.dirty&1&&n.image&&Zr(n.image).then(h=>r(2,f=h))},[n,o,f,s,p,b,l,a,_]}class qi extends se{constructor(e){super(),le(this,e,Wi,$i,ue,{album:6})}}function Vi(t){let e,r;return{c(){e=st("div"),r=st("progress"),this.h()},l(n){e=lt(n,"DIV",{class:!0});var a=ct(e);r=lt(a,"PROGRESS",{class:!0}),ct(r).forEach(Z),a.forEach(Z),this.h()},h(){Y(r,"class","progress w-56 mb-2 h-4"),Y(e,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){_t(n,e,a),ot(e,r)},p:qt,d(n){n&&Z(e)}}}function zi(t){let e,r,n;return{c(){e=st("figure"),r=st("img"),this.h()},l(a){e=lt(a,"FIGURE",{});var s=ct(e);r=lt(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(Z),this.h()},h(){oe(r.src,n=t[1])||Y(r,"src",n),Y(r,"alt","Albumbild"),Y(r,"class","w-48 h-48 object-scale-down")},m(a,s){_t(a,e,s),ot(e,r)},p(a,s){s&2&&!oe(r.src,n=a[1])&&Y(r,"src",n)},d(a){a&&Z(e)}}}function Gi(t){let e,r,n,a,s=t[0].name+"",l,o,f,d,p,g,b;function _(v,k){return v[1]?zi:Vi}let h=_(t),y=h(t);return{c(){e=st("div"),y.c(),r=It(),n=st("div"),a=st("p"),l=Ct(s),o=It(),f=st("div"),d=st("a"),p=Ct("\xD6ffnen"),this.h()},l(v){e=lt(v,"DIV",{id:!0,class:!0});var k=ct(e);y.l(k),r=Bt(k),n=lt(k,"DIV",{class:!0});var E=ct(n);a=lt(E,"P",{class:!0});var B=ct(a);l=Nt(B,s),B.forEach(Z),E.forEach(Z),o=Bt(k),f=lt(k,"DIV",{class:!0});var R=ct(f);d=lt(R,"A",{class:!0,href:!0});var M=ct(d);p=Nt(M,"\xD6ffnen"),M.forEach(Z),R.forEach(Z),k.forEach(Z),this.h()},h(){Y(a,"class","card-title"),Y(n,"class","card-body w-full md:w-96"),Y(d,"class","btn btn-primary capitalize"),Y(d,"href",g=`#album/${t[0].folderName}`),Y(f,"class","card-actions justify-end"),Y(e,"id",b=`album_card_${t[0].name}`),Y(e,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(v,k){_t(v,e,k),y.m(e,null),ot(e,r),ot(e,n),ot(n,a),ot(a,l),ot(e,o),ot(e,f),ot(f,d),ot(d,p)},p(v,[k]){h===(h=_(v))&&y?y.p(v,k):(y.d(1),y=h(v),y&&(y.c(),y.m(e,r))),k&1&&s!==(s=v[0].name+"")&&Te(l,s),k&1&&g!==(g=`#album/${v[0].folderName}`)&&Y(d,"href",g),k&1&&b!==(b=`album_card_${v[0].name}`)&&Y(e,"id",b)},i:qt,o:qt,d(v){v&&Z(e),y.d()}}}function Ki(t,e,r){let{album:n}=e,a,s,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!a&&(r(1,a=await Zr(n.image)),l.unobserve(s),l=null)}),We(()=>{s=document.getElementById(`album_card_${n.name}`),l.observe(s)}),en(()=>{l==null||l.unobserve(s)}),t.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,a]}class Hi extends se{constructor(e){super(),le(this,e,Ki,Gi,ue,{album:0})}}function dr(t,e,r){const n=t.slice();return n[8]=e[r],n}function pr(t,e){let r,n,a;return n=new Hi({props:{album:e[8]}}),{key:t,first:null,c(){r=Qe(),Xt(n.$$.fragment),this.h()},l(s){r=Qe(),Zt(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,l){_t(s,r,l),Qt(n,s,l),a=!0},p(s,l){e=s;const o={};l&2&&(o.album=e[8]),n.$set(o)},i(s){a||(Pt(n.$$.fragment,s),a=!0)},o(s){Mt(n.$$.fragment,s),a=!1},d(s){s&&Z(r),te(n,s)}}}function Ji(t){let e,r,n,a,s=[],l=new Map,o,f,d,p=t[1];const g=b=>b[8].folderName;for(let b=0;b<p.length;b+=1){let _=dr(t,p,b),h=g(_);l.set(h,s[b]=pr(h,_))}return{c(){e=st("div"),r=st("input"),n=It(),a=st("div");for(let b=0;b<s.length;b+=1)s[b].c();this.h()},l(b){e=lt(b,"DIV",{class:!0});var _=ct(e);r=lt(_,"INPUT",{class:!0,placeholder:!0,type:!0}),n=Bt(_),a=lt(_,"DIV",{class:!0});var h=ct(a);for(let y=0;y<s.length;y+=1)s[y].l(h);h.forEach(Z),_.forEach(Z),this.h()},h(){Y(r,"class","input input-bordered w-full max-w-md mb-2 self-center"),Y(r,"placeholder","Suche"),Y(r,"type","search"),Y(a,"class","flex-1 flex flex-wrap justify-between gap-4"),Y(e,"class","flex-1 flex flex-col")},m(b,_){_t(b,e,_),ot(e,r),Be(r,t[0]),ot(e,n),ot(e,a);for(let h=0;h<s.length;h+=1)s[h].m(a,null);o=!0,f||(d=ee(r,"input",t[6]),f=!0)},p(b,[_]){_&1&&Be(r,b[0]),_&2&&(p=b[1],qe(),s=rn(s,_,g,1,b,p,l,a,nn,pr,null,dr),Ve())},i(b){if(!o){for(let _=0;_<p.length;_+=1)Pt(s[_]);o=!0}},o(b){for(let _=0;_<s.length;_+=1)Mt(s[_]);o=!1},d(b){b&&Z(e);for(let _=0;_<s.length;_+=1)s[_].d();f=!1,d()}}}async function Yi(t,e){for(const r of t)if(await e(r))return!0;return!1}function Xi(t,e,r){let n,a,s,l;Tt(t,ve,g=>r(3,a=g)),Tt(t,Oe,g=>r(4,s=g)),Tt(t,be,g=>r(5,l=g));let o=navigator.onLine?a:[],f="";async function d(g,b){const _=[];for(const h of b)(g||await Yi(h.songs,async y=>await Re(y.link)))&&_.push(h);r(2,o=_.sort((h,y)=>h.name>y.name?1:-1))}function p(){f=this.value,r(0,f)}return t.$$.update=()=>{t.$$.dirty&56&&d(l&&!s,a),t.$$.dirty&5&&r(1,n=o.filter(g=>f.toLocaleLowerCase().split(" ").every(b=>g.name.toLocaleLowerCase().includes(b))))},[f,n,o,a,s,l,p]}class Zi extends se{constructor(e){super(),le(this,e,Xi,Ji,ue,{})}}function yr(t,e,r){const n=t.slice();return n[12]=e[r],n}function gr(t){let e;return{c(){e=Ct("(Offline)")},l(r){e=Nt(r,"(Offline)")},m(r,n){_t(r,e,n)},d(r){r&&Z(e)}}}function br(t){let e,r=t[12].name+"",n,a,s=t[1].includes(t[12].link),l,o,f,d,p=s&&gr();function g(){return t[11](t[12])}return{c(){e=st("li"),n=Ct(r),a=It(),p&&p.c(),l=It(),this.h()},l(b){e=lt(b,"LI",{class:!0});var _=ct(e);n=Nt(_,r),a=Bt(_),p&&p.l(_),l=Bt(_),_.forEach(Z),this.h()},h(){Y(e,"class",o=`cursor-pointer ${t[12].link===t[3].song?"font-bold":""}`)},m(b,_){_t(b,e,_),ot(e,n),ot(e,a),p&&p.m(e,null),ot(e,l),f||(d=ee(e,"click",g),f=!0)},p(b,_){t=b,_&4&&r!==(r=t[12].name+"")&&Te(n,r),_&6&&(s=t[1].includes(t[12].link)),s?p||(p=gr(),p.c(),p.m(e,l)):p&&(p.d(1),p=null),_&12&&o!==(o=`cursor-pointer ${t[12].link===t[3].song?"font-bold":""}`)&&Y(e,"class",o)},d(b){b&&Z(e),p&&p.d(),f=!1,d()}}}function Qi(t){let e,r,n,a,s,l,o=t[2],f=[];for(let d=0;d<o.length;d+=1)f[d]=br(yr(t,o,d));return{c(){e=st("div"),r=st("input"),n=It(),a=st("ul");for(let d=0;d<f.length;d+=1)f[d].c();this.h()},l(d){e=lt(d,"DIV",{class:!0});var p=ct(e);r=lt(p,"INPUT",{class:!0,placeholder:!0,type:!0}),n=Bt(p),a=lt(p,"UL",{class:!0});var g=ct(a);for(let b=0;b<f.length;b+=1)f[b].l(g);g.forEach(Z),p.forEach(Z),this.h()},h(){Y(r,"class","input input-bordered w-full max-w-md mb-2 self-center"),Y(r,"placeholder","Suche"),Y(r,"type","search"),Y(a,"class","flex-1 overflow-auto mx-2"),Y(e,"class","flex-1 flex flex-col justify-center")},m(d,p){_t(d,e,p),ot(e,r),Be(r,t[0]),ot(e,n),ot(e,a);for(let g=0;g<f.length;g+=1)f[g].m(a,null);s||(l=ee(r,"input",t[10]),s=!0)},p(d,[p]){if(p&1&&Be(r,d[0]),p&30){o=d[2];let g;for(g=0;g<o.length;g+=1){const b=yr(d,o,g);f[g]?f[g].p(b,p):(f[g]=br(b),f[g].c(),f[g].m(a,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=o.length}},i:qt,o:qt,d(d){d&&Z(e),wr(f,d),s=!1,l()}}}function to(t,e,r){let n,a,s,l,o,f,d;Tt(t,Oe,y=>r(7,l=y)),Tt(t,be,y=>r(8,o=y)),Tt(t,ve,y=>r(9,f=y)),Tt(t,ie,y=>r(3,d=y));let p="",g=[];async function b(y){tn(y,()=>{const v=a.indexOf(y)+1;b(a.length<=v?a[0]:a[v])})}function _(){p=this.value,r(0,p)}const h=y=>b(y);return t.$$.update=()=>{if(t.$$.dirty&512&&r(6,n=f.flatMap(y=>y.songs).sort((y,v)=>y.name>v.name?1:-1)),t.$$.dirty&64){async function y(){const v=[];for(const k of n)await Re(k.link)&&v.push(k.link);r(1,g=v)}y()}t.$$.dirty&450&&r(5,a=n.filter(y=>o&&!l||g.includes(y.link))),t.$$.dirty&33&&r(2,s=a.filter(y=>p.toLocaleLowerCase().split(" ").every(v=>y.name.toLocaleLowerCase().includes(v))))},[p,g,s,d,b,a,n,l,o,f,_,h]}class eo extends se{constructor(e){super(),le(this,e,to,Qi,ue,{})}}function ro(t){let e,r=t[0]?"wifi_off":"wifi",n,a,s,l,o,f;return{c(){e=st("button"),n=Ct(r),a=It(),s=st("a"),l=Ct("lyrics"),this.h()},l(d){e=lt(d,"BUTTON",{class:!0});var p=ct(e);n=Nt(p,r),p.forEach(Z),a=Bt(d),s=lt(d,"A",{class:!0,href:!0});var g=ct(s);l=Nt(g,"lyrics"),g.forEach(Z),this.h()},h(){Y(e,"class","material-symbols-outlined btn btn-sm btn-circle"),Y(s,"class","material-symbols-outlined btn btn-sm btn-circle"),Y(s,"href","/")},m(d,p){_t(d,e,p),ot(e,n),_t(d,a,p),_t(d,s,p),ot(s,l),o||(f=ee(e,"click",t[2]),o=!0)},p(d,p){p&1&&r!==(r=d[0]?"wifi_off":"wifi")&&Te(n,r)},d(d){d&&Z(e),d&&Z(a),d&&Z(s),o=!1,f()}}}function no(t){let e,r;return e=new Zi({}),{c(){Xt(e.$$.fragment)},l(n){Zt(e.$$.fragment,n)},m(n,a){Qt(e,n,a),r=!0},i(n){r||(Pt(e.$$.fragment,n),r=!0)},o(n){Mt(e.$$.fragment,n),r=!1},d(n){te(e,n)}}}function io(t){let e,r;return e=new eo({}),{c(){Xt(e.$$.fragment)},l(n){Zt(e.$$.fragment,n)},m(n,a){Qt(e,n,a),r=!0},i(n){r||(Pt(e.$$.fragment,n),r=!0)},o(n){Mt(e.$$.fragment,n),r=!1},d(n){te(e,n)}}}function oo(t){let e,r,n,a,s,l,o,f,d,p,g,b,_,h,y,v;r=new _r({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[ro]},$$scope:{ctx:t}}});const k=[io,no],E=[];function B(R,M){return R[1].url.hash===""?0:R[1].url.hash==="#alben"?1:-1}return~(h=B(t))&&(y=E[h]=k[h](t)),{c(){e=st("div"),Xt(r.$$.fragment),n=It(),a=st("div"),s=st("a"),l=Ct("Lieder"),f=It(),d=st("a"),p=Ct("Alben"),b=It(),_=st("div"),y&&y.c(),this.h()},l(R){e=lt(R,"DIV",{class:!0});var M=ct(e);Zt(r.$$.fragment,M),n=Bt(M),a=lt(M,"DIV",{class:!0});var S=ct(a);s=lt(S,"A",{class:!0,href:!0});var j=ct(s);l=Nt(j,"Lieder"),j.forEach(Z),f=Bt(S),d=lt(S,"A",{class:!0,href:!0});var C=ct(d);p=Nt(C,"Alben"),C.forEach(Z),S.forEach(Z),b=Bt(M),_=lt(M,"DIV",{class:!0});var z=ct(_);y&&y.l(z),z.forEach(Z),M.forEach(Z),this.h()},h(){Y(s,"class",o=`tab ${t[1].url.hash===""?"tab-active":""}`),Y(s,"href","/music"),Y(d,"class",g=`tab ${t[1].url.hash==="#alben"?"tab-active":""}`),Y(d,"href","/music#alben"),Y(a,"class","tabs justify-center"),Y(_,"class","flex-1 flex overflow-auto"),Y(e,"class","flex-1 flex flex-col")},m(R,M){_t(R,e,M),Qt(r,e,null),ot(e,n),ot(e,a),ot(a,s),ot(s,l),ot(a,f),ot(a,d),ot(d,p),ot(e,b),ot(e,_),~h&&E[h].m(_,null),v=!0},p(R,[M]){const S={};M&9&&(S.$$scope={dirty:M,ctx:R}),r.$set(S),(!v||M&2&&o!==(o=`tab ${R[1].url.hash===""?"tab-active":""}`))&&Y(s,"class",o),(!v||M&2&&g!==(g=`tab ${R[1].url.hash==="#alben"?"tab-active":""}`))&&Y(d,"class",g);let j=h;h=B(R),h!==j&&(y&&(qe(),Mt(E[j],1,1,()=>{E[j]=null}),Ve()),~h?(y=E[h],y||(y=E[h]=k[h](R),y.c()),Pt(y,1),y.m(_,null)):y=null)},i(R){v||(Pt(r.$$.fragment,R),Pt(y),v=!0)},o(R){Mt(r.$$.fragment,R),Mt(y),v=!1},d(R){R&&Z(e),te(r),~h&&E[h].d()}}}function ao(t,e,r){let n,a;Tt(t,Oe,l=>r(0,n=l)),Tt(t,vr,l=>r(1,a=l));function s(){Oe.update(l=>!l)}return[n,a,s]}class so extends se{constructor(e){super(),le(this,e,ao,oo,ue,{})}}function lo(t){let e,r;return e=new qi({props:{album:t[2]()}}),{c(){Xt(e.$$.fragment)},l(n){Zt(e.$$.fragment,n)},m(n,a){Qt(e,n,a),r=!0},p:qt,i(n){r||(Pt(e.$$.fragment,n),r=!0)},o(n){Mt(e.$$.fragment,n),r=!1},d(n){te(e,n)}}}function uo(t){let e,r;return e=new so({}),{c(){Xt(e.$$.fragment)},l(n){Zt(e.$$.fragment,n)},m(n,a){Qt(e,n,a),r=!0},p:qt,i(n){r||(Pt(e.$$.fragment,n),r=!0)},o(n){Mt(e.$$.fragment,n),r=!1},d(n){te(e,n)}}}function mr(t){let e,r,n,a,s,l;function o(p,g){return p[1].isLoading?co:fo}let f=o(t),d=f(t);return{c(){d.c(),e=It(),r=st("div"),n=st("audio"),this.h()},l(p){d.l(p),e=Bt(p),r=lt(p,"DIV",{class:!0});var g=ct(r);n=lt(g,"AUDIO",{class:!0,src:!0}),ct(n).forEach(Z),g.forEach(Z),this.h()},h(){Y(n,"class","self-center mb-2"),n.controls=!0,n.autoplay=!0,oe(n.src,a=t[1].src)||Y(n,"src",a),Y(r,"class","self-center")},m(p,g){d.m(p,g),_t(p,e,g),_t(p,r,g),ot(r,n),s||(l=ee(n,"ended",t[3]),s=!0)},p(p,g){f!==(f=o(p))&&(d.d(1),d=f(p),d&&(d.c(),d.m(e.parentNode,e))),g&2&&!oe(n.src,a=p[1].src)&&Y(n,"src",a)},d(p){d.d(p),p&&Z(e),p&&Z(r),s=!1,l()}}}function fo(t){let e;return{c(){e=st("div"),this.h()},l(r){e=lt(r,"DIV",{class:!0}),ct(e).forEach(Z),this.h()},h(){Y(e,"class","h-2 mb-2")},m(r,n){_t(r,e,n)},d(r){r&&Z(e)}}}function co(t){let e;return{c(){e=st("progress"),this.h()},l(r){e=lt(r,"PROGRESS",{class:!0}),ct(e).forEach(Z),this.h()},h(){Y(e,"class","progress w-56 self-center mb-2")},m(r,n){_t(r,e,n)},d(r){r&&Z(e)}}}function ho(t){let e,r,n,a,s,l,o;const f=[uo,lo],d=[];function p(b,_){return _&1&&(n=null),b[0].url.hash===""||b[0].url.hash==="#alben"?0:(n==null&&(n=!!b[0].url.hash.startsWith("#album")),n?1:-1)}~(a=p(t,-1))&&(s=d[a]=f[a](t));let g=(t[1].src!=null||t[1].isLoading)&&mr(t);return{c(){e=st("div"),r=st("main"),s&&s.c(),l=It(),g&&g.c(),this.h()},l(b){e=lt(b,"DIV",{class:!0});var _=ct(e);r=lt(_,"MAIN",{class:!0});var h=ct(r);s&&s.l(h),h.forEach(Z),l=Bt(_),g&&g.l(_),_.forEach(Z),this.h()},h(){Y(r,"class","overflow-auto flex-1 flex flex-col"),Y(e,"class","w-full h-full flex flex-col")},m(b,_){_t(b,e,_),ot(e,r),~a&&d[a].m(r,null),ot(e,l),g&&g.m(e,null),o=!0},p(b,[_]){let h=a;a=p(b,_),a===h?~a&&d[a].p(b,_):(s&&(qe(),Mt(d[h],1,1,()=>{d[h]=null}),Ve()),~a?(s=d[a],s?s.p(b,_):(s=d[a]=f[a](b),s.c()),Pt(s,1),s.m(r,null)):s=null),b[1].src!=null||b[1].isLoading?g?g.p(b,_):(g=mr(b),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(b){o||(Pt(s),o=!0)},o(b){Mt(s),o=!1},d(b){b&&Z(e),~a&&d[a].d(),g&&g.d()}}}function po(t,e,r){let n,a;Tt(t,vr,d=>r(0,n=d)),Tt(t,ie,d=>r(1,a=d)),be.set(navigator.onLine);const s=()=>be.set(!0),l=()=>be.set(!1);We(async()=>{let d;return"wakeLock"in navigator&&(d=await navigator.wakeLock.request("screen")),Li().then(ve.set),navigator.onLine&&await Ci().then(async p=>{ve.set(p),await ji(p)}),document.addEventListener("offline",l),document.addEventListener("online",s),()=>{document.removeEventListener("offline",l),document.removeEventListener("online",s),d.release()}});function o(){return decodeURI(n.url.hash.substring(7))}return[n,a,o,()=>a.onFinish==null?null:a.onFinish()]}class wo extends se{constructor(e){super(),le(this,e,po,ho,ue,{})}}export{wo as default};
