import{S as ot,i as at,s as st,k as X,a as ve,q as be,l as Z,m as ee,c as _e,r as we,h as G,n as K,J as ut,K as Ct,b as ke,F as W,L as ft,M as Be,u as ct,A as Ue,N as er,G as Ge,o as xt,O as Tt,P as yn,Q as gn,v as Xe,w as Ze,x as Qe,f as Pe,t as Me,y as et,R as tr,T as mn,U as ht,g as Mt,V as bn,d as Ut,e as cr,W as wn,X as Kt}from"../../../../chunks/index-c9ad3d2c.js";import{p as Ur}from"../../../../chunks/stores-52a3e50d.js";import{T as Nr,i as vn}from"../../../../chunks/TitleBar-17d224f1.js";import{c as Ke,d as At}from"../../../../chunks/store-9ea2ec21.js";const _n=(e,t)=>t.some(r=>e instanceof r);let hr,dr;function En(){return hr||(hr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sn(){return dr||(dr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cr=new WeakMap,Ht=new WeakMap,xr=new WeakMap,Ft=new WeakMap,rr=new WeakMap;function An(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",l)},s=()=>{r(He(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Cr.set(r,e)}).catch(()=>{}),rr.set(t,e),t}function kn(e){if(Ht.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",l),e.removeEventListener("abort",l)},s=()=>{r(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",l),e.addEventListener("abort",l)});Ht.set(e,t)}let Jt={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Ht.get(e);if(t==="objectStoreNames")return e.objectStoreNames||xr.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return He(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function In(e){Jt=e(Jt)}function Bn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call($t(this),t,...r);return xr.set(n,t.sort?t.sort():[t]),He(n)}:Sn().includes(e)?function(...t){return e.apply($t(this),t),He(Cr.get(this))}:function(...t){return He(e.apply($t(this),t))}}function On(e){return typeof e=="function"?Bn(e):(e instanceof IDBTransaction&&kn(e),_n(e,En())?new Proxy(e,Jt):e)}function He(e){if(e instanceof IDBRequest)return An(e);if(Ft.has(e))return Ft.get(e);const t=On(e);return t!==e&&(Ft.set(e,t),rr.set(t,e)),t}const $t=e=>rr.get(e);function Rn(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const l=indexedDB.open(e,t),o=He(l);return n&&l.addEventListener("upgradeneeded",f=>{n(He(l.result),f.oldVersion,f.newVersion,He(l.transaction),f)}),r&&l.addEventListener("blocked",f=>r(f.oldVersion,f.newVersion,f)),o.then(f=>{s&&f.addEventListener("close",()=>s()),a&&f.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const Tn=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],Wt=new Map;function pr(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Wt.get(t))return Wt.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Ln.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Tn.includes(r)))return;const s=async function(l,...o){const f=this.transaction(l,a?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&f.done]))[0]};return Wt.set(t,s),s}In(e=>({...e,get:(t,r,n)=>pr(t,r)||e.get(t,r,n),has:(t,r)=>!!pr(t,r)||e.has(t,r)}));var Pn=Object.create,nr=Object.defineProperty,jn=Object.getOwnPropertyDescriptor,Mn=Object.getOwnPropertyNames,Un=Object.getPrototypeOf,Nn=Object.prototype.hasOwnProperty,Cn=e=>nr(e,"__esModule",{value:!0}),xn=(e,t)=>()=>(e&&(t=e(e=0)),t),ae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Mn(t))!Nn.call(e,a)&&(r||a!=="default")&&nr(e,a,{get:()=>t[a],enumerable:!(n=jn(t,a))||n.enumerable});return e},De=(e,t)=>Dn(Cn(nr(e!=null?Pn(Un(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Fn=ae(e=>{te(),e.byteLength=f,e.toByteArray=y,e.fromByteArray=A;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=a.length;s<l;++s)t[s]=a[s],r[a.charCodeAt(s)]=s;var s,l;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(c){var p=c.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=c.indexOf("=");m===-1&&(m=p);var S=m===p?0:4-m%4;return[m,S]}function f(c){var p=o(c),m=p[0],S=p[1];return(m+S)*3/4-S}function d(c,p,m){return(p+m)*3/4-m}function y(c){var p,m=o(c),S=m[0],b=m[1],I=new n(d(c,S,b)),R=0,M=b>0?S-4:S,E;for(E=0;E<M;E+=4)p=r[c.charCodeAt(E)]<<18|r[c.charCodeAt(E+1)]<<12|r[c.charCodeAt(E+2)]<<6|r[c.charCodeAt(E+3)],I[R++]=p>>16&255,I[R++]=p>>8&255,I[R++]=p&255;return b===2&&(p=r[c.charCodeAt(E)]<<2|r[c.charCodeAt(E+1)]>>4,I[R++]=p&255),b===1&&(p=r[c.charCodeAt(E)]<<10|r[c.charCodeAt(E+1)]<<4|r[c.charCodeAt(E+2)]>>2,I[R++]=p>>8&255,I[R++]=p&255),I}function g(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}function _(c,p,m){for(var S,b=[],I=p;I<m;I+=3)S=(c[I]<<16&16711680)+(c[I+1]<<8&65280)+(c[I+2]&255),b.push(g(S));return b.join("")}function A(c){for(var p,m=c.length,S=m%3,b=[],I=16383,R=0,M=m-S;R<M;R+=I)b.push(_(c,R,R+I>M?M:R+I));return S===1?(p=c[m-1],b.push(t[p>>2]+t[p<<4&63]+"==")):S===2&&(p=(c[m-2]<<8)+c[m-1],b.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),b.join("")}}),$n=ae(e=>{te(),e.read=function(t,r,n,a,s){var l,o,f=s*8-a-1,d=(1<<f)-1,y=d>>1,g=-7,_=n?s-1:0,A=n?-1:1,c=t[r+_];for(_+=A,l=c&(1<<-g)-1,c>>=-g,g+=f;g>0;l=l*256+t[r+_],_+=A,g-=8);for(o=l&(1<<-g)-1,l>>=-g,g+=a;g>0;o=o*256+t[r+_],_+=A,g-=8);if(l===0)l=1-y;else{if(l===d)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-y}return(c?-1:1)*o*Math.pow(2,l-a)},e.write=function(t,r,n,a,s,l){var o,f,d,y=l*8-s-1,g=(1<<y)-1,_=g>>1,A=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=a?0:l-1,p=a?1:-1,m=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,o=g):(o=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?r+=A/d:r+=A*Math.pow(2,1-_),r*d>=2&&(o++,d/=2),o+_>=g?(f=0,o=g):o+_>=1?(f=(r*d-1)*Math.pow(2,s),o=o+_):(f=r*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;t[n+c]=f&255,c+=p,f/=256,s-=8);for(o=o<<s|f,y+=s;y>0;t[n+c]=o&255,c+=p,o/=256,y-=8);t[n+c-p]|=m*128}}),Bt=ae(e=>{te();var t=Fn(),r=$n(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;var a=2147483647;e.kMaxLength=a,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let i=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(i,u),i.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');let u=new Uint8Array(i);return Object.setPrototypeOf(u,o.prototype),u}function o(i,u,h){if(typeof i=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(i)}return f(i,u,h)}o.poolSize=8192;function f(i,u,h){if(typeof i=="string")return _(i,u);if(ArrayBuffer.isView(i))return c(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Le(i,ArrayBuffer)||i&&Le(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Le(i,SharedArrayBuffer)||i&&Le(i.buffer,SharedArrayBuffer)))return p(i,u,h);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=i.valueOf&&i.valueOf();if(B!=null&&B!==i)return o.from(B,u,h);let j=m(i);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return o.from(i[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}o.from=function(i,u,h){return f(i,u,h)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function y(i,u,h){return d(i),i<=0?l(i):u!==void 0?typeof h=="string"?l(i).fill(u,h):l(i).fill(u):l(i)}o.alloc=function(i,u,h){return y(i,u,h)};function g(i){return d(i),l(i<0?0:S(i)|0)}o.allocUnsafe=function(i){return g(i)},o.allocUnsafeSlow=function(i){return g(i)};function _(i,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let h=I(i,u)|0,B=l(h),j=B.write(i,u);return j!==h&&(B=B.slice(0,j)),B}function A(i){let u=i.length<0?0:S(i.length)|0,h=l(u);for(let B=0;B<u;B+=1)h[B]=i[B]&255;return h}function c(i){if(Le(i,Uint8Array)){let u=new Uint8Array(i);return p(u.buffer,u.byteOffset,u.byteLength)}return A(i)}function p(i,u,h){if(u<0||i.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');let B;return u===void 0&&h===void 0?B=new Uint8Array(i):h===void 0?B=new Uint8Array(i,u):B=new Uint8Array(i,u,h),Object.setPrototypeOf(B,o.prototype),B}function m(i){if(o.isBuffer(i)){let u=S(i.length)|0,h=l(u);return h.length===0||i.copy(h,0,0,u),h}if(i.length!==void 0)return typeof i.length!="number"||gt(i.length)?l(0):A(i);if(i.type==="Buffer"&&Array.isArray(i.data))return A(i.data)}function S(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return i|0}function b(i){return+i!=i&&(i=0),o.alloc(+i)}o.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==o.prototype},o.compare=function(i,u){if(Le(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),Le(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(i)||!o.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===u)return 0;let h=i.length,B=u.length;for(let j=0,D=Math.min(h,B);j<D;++j)if(i[j]!==u[j]){h=i[j],B=u[j];break}return h<B?-1:B<h?1:0},o.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(i,u){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return o.alloc(0);let h;if(u===void 0)for(u=0,h=0;h<i.length;++h)u+=i[h].length;let B=o.allocUnsafe(u),j=0;for(h=0;h<i.length;++h){let D=i[h];if(Le(D,Uint8Array))j+D.length>B.length?(o.isBuffer(D)||(D=o.from(D)),D.copy(B,j)):Uint8Array.prototype.set.call(B,D,j);else if(o.isBuffer(D))D.copy(B,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=D.length}return B};function I(i,u){if(o.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Le(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let h=i.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&h===0)return 0;let j=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return me(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ne(i).length;default:if(j)return B?-1:me(i).length;u=(""+u).toLowerCase(),j=!0}}o.byteLength=I;function R(i,u,h){let B=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(i||(i="utf8");;)switch(i){case"hex":return fe(this,u,h);case"utf8":case"utf-8":return ne(this,u,h);case"ascii":return pe(this,u,h);case"latin1":case"binary":return ge(this,u,h);case"base64":return Y(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,u,h);default:if(B)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),B=!0}}o.prototype._isBuffer=!0;function M(i,u,h){let B=i[u];i[u]=i[h],i[h]=B}o.prototype.swap16=function(){let i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<i;u+=2)M(this,u,u+1);return this},o.prototype.swap32=function(){let i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<i;u+=4)M(this,u,u+3),M(this,u+1,u+2);return this},o.prototype.swap64=function(){let i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<i;u+=8)M(this,u,u+7),M(this,u+1,u+6),M(this,u+2,u+5),M(this,u+3,u+4);return this},o.prototype.toString=function(){let i=this.length;return i===0?"":arguments.length===0?ne(this,0,i):R.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(i){if(!o.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:o.compare(this,i)===0},o.prototype.inspect=function(){let i="",u=e.INSPECT_MAX_BYTES;return i=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(i+=" ... "),"<Buffer "+i+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(i,u,h,B,j){if(Le(i,Uint8Array)&&(i=o.from(i,i.offset,i.byteLength)),!o.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(u===void 0&&(u=0),h===void 0&&(h=i?i.length:0),B===void 0&&(B=0),j===void 0&&(j=this.length),u<0||h>i.length||B<0||j>this.length)throw new RangeError("out of range index");if(B>=j&&u>=h)return 0;if(B>=j)return-1;if(u>=h)return 1;if(u>>>=0,h>>>=0,B>>>=0,j>>>=0,this===i)return 0;let D=j-B,H=h-u,Se=Math.min(D,H),Te=this.slice(B,j),Ie=i.slice(u,h);for(let Ae=0;Ae<Se;++Ae)if(Te[Ae]!==Ie[Ae]){D=Te[Ae],H=Ie[Ae];break}return D<H?-1:H<D?1:0};function E(i,u,h,B,j){if(i.length===0)return-1;if(typeof h=="string"?(B=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,gt(h)&&(h=j?0:i.length-1),h<0&&(h=i.length+h),h>=i.length){if(j)return-1;h=i.length-1}else if(h<0)if(j)h=0;else return-1;if(typeof u=="string"&&(u=o.from(u,B)),o.isBuffer(u))return u.length===0?-1:k(i,u,h,B,j);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(i,u,h):Uint8Array.prototype.lastIndexOf.call(i,u,h):k(i,[u],h,B,j);throw new TypeError("val must be string, number or Buffer")}function k(i,u,h,B,j){let D=1,H=i.length,Se=u.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(i.length<2||u.length<2)return-1;D=2,H/=2,Se/=2,h/=2}function Te(Ae,Oe){return D===1?Ae[Oe]:Ae.readUInt16BE(Oe*D)}let Ie;if(j){let Ae=-1;for(Ie=h;Ie<H;Ie++)if(Te(i,Ie)===Te(u,Ae===-1?0:Ie-Ae)){if(Ae===-1&&(Ae=Ie),Ie-Ae+1===Se)return Ae*D}else Ae!==-1&&(Ie-=Ie-Ae),Ae=-1}else for(h+Se>H&&(h=H-Se),Ie=h;Ie>=0;Ie--){let Ae=!0;for(let Oe=0;Oe<Se;Oe++)if(Te(i,Ie+Oe)!==Te(u,Oe)){Ae=!1;break}if(Ae)return Ie}return-1}o.prototype.includes=function(i,u,h){return this.indexOf(i,u,h)!==-1},o.prototype.indexOf=function(i,u,h){return E(this,i,u,h,!0)},o.prototype.lastIndexOf=function(i,u,h){return E(this,i,u,h,!1)};function L(i,u,h,B){h=Number(h)||0;let j=i.length-h;B?(B=Number(B),B>j&&(B=j)):B=j;let D=u.length;B>D/2&&(B=D/2);let H;for(H=0;H<B;++H){let Se=parseInt(u.substr(H*2,2),16);if(gt(Se))return H;i[h+H]=Se}return H}function q(i,u,h,B){return Fe(me(u,i.length-h),i,h,B)}function $(i,u,h,B){return Fe(se(u),i,h,B)}function N(i,u,h,B){return Fe(Ne(u),i,h,B)}function F(i,u,h,B){return Fe(U(u,i.length-h),i,h,B)}o.prototype.write=function(i,u,h,B){if(u===void 0)B="utf8",h=this.length,u=0;else if(h===void 0&&typeof u=="string")B=u,h=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(h)?(h=h>>>0,B===void 0&&(B="utf8")):(B=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let j=this.length-u;if((h===void 0||h>j)&&(h=j),i.length>0&&(h<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let D=!1;for(;;)switch(B){case"hex":return L(this,i,u,h);case"utf8":case"utf-8":return q(this,i,u,h);case"ascii":case"latin1":case"binary":return $(this,i,u,h);case"base64":return N(this,i,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,i,u,h);default:if(D)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),D=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(i,u,h){return u===0&&h===i.length?t.fromByteArray(i):t.fromByteArray(i.slice(u,h))}function ne(i,u,h){h=Math.min(i.length,h);let B=[],j=u;for(;j<h;){let D=i[j],H=null,Se=D>239?4:D>223?3:D>191?2:1;if(j+Se<=h){let Te,Ie,Ae,Oe;switch(Se){case 1:D<128&&(H=D);break;case 2:Te=i[j+1],(Te&192)===128&&(Oe=(D&31)<<6|Te&63,Oe>127&&(H=Oe));break;case 3:Te=i[j+1],Ie=i[j+2],(Te&192)===128&&(Ie&192)===128&&(Oe=(D&15)<<12|(Te&63)<<6|Ie&63,Oe>2047&&(Oe<55296||Oe>57343)&&(H=Oe));break;case 4:Te=i[j+1],Ie=i[j+2],Ae=i[j+3],(Te&192)===128&&(Ie&192)===128&&(Ae&192)===128&&(Oe=(D&15)<<18|(Te&63)<<12|(Ie&63)<<6|Ae&63,Oe>65535&&Oe<1114112&&(H=Oe))}}H===null?(H=65533,Se=1):H>65535&&(H-=65536,B.push(H>>>10&1023|55296),H=56320|H&1023),B.push(H),j+=Se}return ce(B)}var ie=4096;function ce(i){let u=i.length;if(u<=ie)return String.fromCharCode.apply(String,i);let h="",B=0;for(;B<u;)h+=String.fromCharCode.apply(String,i.slice(B,B+=ie));return h}function pe(i,u,h){let B="";h=Math.min(i.length,h);for(let j=u;j<h;++j)B+=String.fromCharCode(i[j]&127);return B}function ge(i,u,h){let B="";h=Math.min(i.length,h);for(let j=u;j<h;++j)B+=String.fromCharCode(i[j]);return B}function fe(i,u,h){let B=i.length;(!u||u<0)&&(u=0),(!h||h<0||h>B)&&(h=B);let j="";for(let D=u;D<h;++D)j+=Rt[i[D]];return j}function Ee(i,u,h){let B=i.slice(u,h),j="";for(let D=0;D<B.length-1;D+=2)j+=String.fromCharCode(B[D]+B[D+1]*256);return j}o.prototype.slice=function(i,u){let h=this.length;i=~~i,u=u===void 0?h:~~u,i<0?(i+=h,i<0&&(i=0)):i>h&&(i=h),u<0?(u+=h,u<0&&(u=0)):u>h&&(u=h),u<i&&(u=i);let B=this.subarray(i,u);return Object.setPrototypeOf(B,o.prototype),B};function he(i,u,h){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+u>h)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||he(i,u,this.length);let B=this[i],j=1,D=0;for(;++D<u&&(j*=256);)B+=this[i+D]*j;return B},o.prototype.readUintBE=o.prototype.readUIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||he(i,u,this.length);let B=this[i+--u],j=1;for(;u>0&&(j*=256);)B+=this[i+--u]*j;return B},o.prototype.readUint8=o.prototype.readUInt8=function(i,u){return i=i>>>0,u||he(i,1,this.length),this[i]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(i,u){return i=i>>>0,u||he(i,2,this.length),this[i]|this[i+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(i,u){return i=i>>>0,u||he(i,2,this.length),this[i]<<8|this[i+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(i,u){return i=i>>>0,u||he(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(i,u){return i=i>>>0,u||he(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},o.prototype.readBigUInt64LE=Ce(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let B=u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,j=this[++i]+this[++i]*2**8+this[++i]*2**16+h*2**24;return BigInt(B)+(BigInt(j)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ce(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let B=u*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],j=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h;return(BigInt(B)<<BigInt(32))+BigInt(j)}),o.prototype.readIntLE=function(i,u,h){i=i>>>0,u=u>>>0,h||he(i,u,this.length);let B=this[i],j=1,D=0;for(;++D<u&&(j*=256);)B+=this[i+D]*j;return j*=128,B>=j&&(B-=Math.pow(2,8*u)),B},o.prototype.readIntBE=function(i,u,h){i=i>>>0,u=u>>>0,h||he(i,u,this.length);let B=u,j=1,D=this[i+--B];for(;B>0&&(j*=256);)D+=this[i+--B]*j;return j*=128,D>=j&&(D-=Math.pow(2,8*u)),D},o.prototype.readInt8=function(i,u){return i=i>>>0,u||he(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},o.prototype.readInt16LE=function(i,u){i=i>>>0,u||he(i,2,this.length);let h=this[i]|this[i+1]<<8;return h&32768?h|4294901760:h},o.prototype.readInt16BE=function(i,u){i=i>>>0,u||he(i,2,this.length);let h=this[i+1]|this[i]<<8;return h&32768?h|4294901760:h},o.prototype.readInt32LE=function(i,u){return i=i>>>0,u||he(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},o.prototype.readInt32BE=function(i,u){return i=i>>>0,u||he(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},o.prototype.readBigInt64LE=Ce(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let B=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(h<<24);return(BigInt(B)<<BigInt(32))+BigInt(u+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),o.prototype.readBigInt64BE=Ce(function(i){i=i>>>0,w(i,"offset");let u=this[i],h=this[i+7];(u===void 0||h===void 0)&&v(i,this.length-8);let B=(u<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(B)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+h)}),o.prototype.readFloatLE=function(i,u){return i=i>>>0,u||he(i,4,this.length),r.read(this,i,!0,23,4)},o.prototype.readFloatBE=function(i,u){return i=i>>>0,u||he(i,4,this.length),r.read(this,i,!1,23,4)},o.prototype.readDoubleLE=function(i,u){return i=i>>>0,u||he(i,8,this.length),r.read(this,i,!0,52,8)},o.prototype.readDoubleBE=function(i,u){return i=i>>>0,u||he(i,8,this.length),r.read(this,i,!1,52,8)};function T(i,u,h,B,j,D){if(!o.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>j||u<D)throw new RangeError('"value" argument is out of bounds');if(h+B>i.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(i,u,h,B){if(i=+i,u=u>>>0,h=h>>>0,!B){let H=Math.pow(2,8*h)-1;T(this,i,u,h,H,0)}let j=1,D=0;for(this[u]=i&255;++D<h&&(j*=256);)this[u+D]=i/j&255;return u+h},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(i,u,h,B){if(i=+i,u=u>>>0,h=h>>>0,!B){let H=Math.pow(2,8*h)-1;T(this,i,u,h,H,0)}let j=h-1,D=1;for(this[u+j]=i&255;--j>=0&&(D*=256);)this[u+j]=i/D&255;return u+h},o.prototype.writeUint8=o.prototype.writeUInt8=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,1,255,0),this[u]=i&255,u+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,65535,0),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,65535,0),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,4294967295,0),this[u+3]=i>>>24,this[u+2]=i>>>16,this[u+1]=i>>>8,this[u]=i&255,u+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,4294967295,0),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4};function C(i,u,h,B,j){le(u,B,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D,D=D>>8,i[h++]=D;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,H=H>>8,i[h++]=H,h}function z(i,u,h,B,j){le(u,B,j,i,h,7);let D=Number(u&BigInt(4294967295));i[h+7]=D,D=D>>8,i[h+6]=D,D=D>>8,i[h+5]=D,D=D>>8,i[h+4]=D;let H=Number(u>>BigInt(32)&BigInt(4294967295));return i[h+3]=H,H=H>>8,i[h+2]=H,H=H>>8,i[h+1]=H,H=H>>8,i[h]=H,h+8}o.prototype.writeBigUInt64LE=Ce(function(i,u=0){return C(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ce(function(i,u=0){return z(this,i,u,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(i,u,h,B){if(i=+i,u=u>>>0,!B){let Se=Math.pow(2,8*h-1);T(this,i,u,h,Se-1,-Se)}let j=0,D=1,H=0;for(this[u]=i&255;++j<h&&(D*=256);)i<0&&H===0&&this[u+j-1]!==0&&(H=1),this[u+j]=(i/D>>0)-H&255;return u+h},o.prototype.writeIntBE=function(i,u,h,B){if(i=+i,u=u>>>0,!B){let Se=Math.pow(2,8*h-1);T(this,i,u,h,Se-1,-Se)}let j=h-1,D=1,H=0;for(this[u+j]=i&255;--j>=0&&(D*=256);)i<0&&H===0&&this[u+j+1]!==0&&(H=1),this[u+j]=(i/D>>0)-H&255;return u+h},o.prototype.writeInt8=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,1,127,-128),i<0&&(i=255+i+1),this[u]=i&255,u+1},o.prototype.writeInt16LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,32767,-32768),this[u]=i&255,this[u+1]=i>>>8,u+2},o.prototype.writeInt16BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,2,32767,-32768),this[u]=i>>>8,this[u+1]=i&255,u+2},o.prototype.writeInt32LE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,2147483647,-2147483648),this[u]=i&255,this[u+1]=i>>>8,this[u+2]=i>>>16,this[u+3]=i>>>24,u+4},o.prototype.writeInt32BE=function(i,u,h){return i=+i,u=u>>>0,h||T(this,i,u,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[u]=i>>>24,this[u+1]=i>>>16,this[u+2]=i>>>8,this[u+3]=i&255,u+4},o.prototype.writeBigInt64LE=Ce(function(i,u=0){return C(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ce(function(i,u=0){return z(this,i,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function re(i,u,h,B,j,D){if(h+B>i.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function ye(i,u,h,B,j){return u=+u,h=h>>>0,j||re(i,u,h,4),r.write(i,u,h,B,23,4),h+4}o.prototype.writeFloatLE=function(i,u,h){return ye(this,i,u,!0,h)},o.prototype.writeFloatBE=function(i,u,h){return ye(this,i,u,!1,h)};function de(i,u,h,B,j){return u=+u,h=h>>>0,j||re(i,u,h,8),r.write(i,u,h,B,52,8),h+8}o.prototype.writeDoubleLE=function(i,u,h){return de(this,i,u,!0,h)},o.prototype.writeDoubleBE=function(i,u,h){return de(this,i,u,!1,h)},o.prototype.copy=function(i,u,h,B){if(!o.isBuffer(i))throw new TypeError("argument should be a Buffer");if(h||(h=0),!B&&B!==0&&(B=this.length),u>=i.length&&(u=i.length),u||(u=0),B>0&&B<h&&(B=h),B===h||i.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),i.length-u<B-h&&(B=i.length-u+h);let j=B-h;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,h,B):Uint8Array.prototype.set.call(i,this.subarray(h,B),u),j},o.prototype.fill=function(i,u,h,B){if(typeof i=="string"){if(typeof u=="string"?(B=u,u=0,h=this.length):typeof h=="string"&&(B=h,h=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!o.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(i.length===1){let D=i.charCodeAt(0);(B==="utf8"&&D<128||B==="latin1")&&(i=D)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(u<0||this.length<u||this.length<h)throw new RangeError("Out of range index");if(h<=u)return this;u=u>>>0,h=h===void 0?this.length:h>>>0,i||(i=0);let j;if(typeof i=="number")for(j=u;j<h;++j)this[j]=i;else{let D=o.isBuffer(i)?i:o.from(i,B),H=D.length;if(H===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(j=0;j<h-u;++j)this[j+u]=D[j%H]}return this};var O={};function P(i,u,h){O[i]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}P("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(i,u){return`The "${i}" argument must be of type number. Received type ${typeof u}`},TypeError),P("ERR_OUT_OF_RANGE",function(i,u,h){let B=`The value of "${i}" is out of range.`,j=h;return Number.isInteger(h)&&Math.abs(h)>2**32?j=x(String(h)):typeof h=="bigint"&&(j=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(j=x(j)),j+="n"),B+=` It must be ${u}. Received ${j}`,B},RangeError);function x(i){let u="",h=i.length,B=i[0]==="-"?1:0;for(;h>=B+4;h-=3)u=`_${i.slice(h-3,h)}${u}`;return`${i.slice(0,h)}${u}`}function J(i,u,h){w(u,"offset"),(i[u]===void 0||i[u+h]===void 0)&&v(u,i.length-(h+1))}function le(i,u,h,B,j,D){if(i>h||i<u){let H=typeof u=="bigint"?"n":"",Se;throw D>3?u===0||u===BigInt(0)?Se=`>= 0${H} and < 2${H} ** ${(D+1)*8}${H}`:Se=`>= -(2${H} ** ${(D+1)*8-1}${H}) and < 2 ** ${(D+1)*8-1}${H}`:Se=`>= ${u}${H} and <= ${h}${H}`,new O.ERR_OUT_OF_RANGE("value",Se,i)}J(B,j,D)}function w(i,u){if(typeof i!="number")throw new O.ERR_INVALID_ARG_TYPE(u,"number",i)}function v(i,u,h){throw Math.floor(i)!==i?(w(i,h),new O.ERR_OUT_OF_RANGE(h||"offset","an integer",i)):u<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE(h||"offset",`>= ${h?1:0} and <= ${u}`,i)}var V=/[^+/0-9A-Za-z-_]/g;function Q(i){if(i=i.split("=")[0],i=i.trim().replace(V,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function me(i,u){u=u||1/0;let h,B=i.length,j=null,D=[];for(let H=0;H<B;++H){if(h=i.charCodeAt(H),h>55295&&h<57344){if(!j){if(h>56319){(u-=3)>-1&&D.push(239,191,189);continue}else if(H+1===B){(u-=3)>-1&&D.push(239,191,189);continue}j=h;continue}if(h<56320){(u-=3)>-1&&D.push(239,191,189),j=h;continue}h=(j-55296<<10|h-56320)+65536}else j&&(u-=3)>-1&&D.push(239,191,189);if(j=null,h<128){if((u-=1)<0)break;D.push(h)}else if(h<2048){if((u-=2)<0)break;D.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;D.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;D.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return D}function se(i){let u=[];for(let h=0;h<i.length;++h)u.push(i.charCodeAt(h)&255);return u}function U(i,u){let h,B,j,D=[];for(let H=0;H<i.length&&!((u-=2)<0);++H)h=i.charCodeAt(H),B=h>>8,j=h%256,D.push(j),D.push(B);return D}function Ne(i){return t.toByteArray(Q(i))}function Fe(i,u,h,B){let j;for(j=0;j<B&&!(j+h>=u.length||j>=i.length);++j)u[j+h]=i[j];return j}function Le(i,u){return i instanceof u||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===u.name}function gt(i){return i!==i}var Rt=function(){let i="0123456789abcdef",u=new Array(256);for(let h=0;h<16;++h){let B=h*16;for(let j=0;j<16;++j)u[B+j]=i[h]+i[j]}return u}();function Ce(i){return typeof BigInt>"u"?mt:i}function mt(){throw new Error("BigInt not supported")}}),oe,ue,Ye,te=xn(()=>{oe=De(Bt(),1),ue={env:{},nextTick:(e,...t)=>{globalThis.setTimeout(e,0,...t)}},Ye=globalThis}),Ot=ae((e,t)=>{te();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(E,k,L){return Function.prototype.apply.call(E,k,L)},a;r&&typeof r.ownKeys=="function"?a=r.ownKeys:Object.getOwnPropertySymbols?a=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:a=function(E){return Object.getOwnPropertyNames(E)};function s(E){console&&console.warn&&console.warn(E)}var l=Number.isNaN||function(E){return E!==E};function o(){o.init.call(this)}t.exports=o,t.exports.once=I,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function d(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");f=E}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function y(E){return E._maxListeners===void 0?o.defaultMaxListeners:E._maxListeners}o.prototype.getMaxListeners=function(){return y(this)},o.prototype.emit=function(E){for(var k=[],L=1;L<arguments.length;L++)k.push(arguments[L]);var q=E==="error",$=this._events;if($!==void 0)q=q&&$.error===void 0;else if(!q)return!1;if(q){var N;if(k.length>0&&(N=k[0]),N instanceof Error)throw N;var F=new Error("Unhandled error."+(N?" ("+N.message+")":""));throw F.context=N,F}var Y=$[E];if(Y===void 0)return!1;if(typeof Y=="function")n(Y,this,k);else for(var ne=Y.length,ie=m(Y,ne),L=0;L<ne;++L)n(ie[L],this,k);return!0};function g(E,k,L,q){var $,N,F;if(d(L),N=E._events,N===void 0?(N=E._events=Object.create(null),E._eventsCount=0):(N.newListener!==void 0&&(E.emit("newListener",k,L.listener?L.listener:L),N=E._events),F=N[k]),F===void 0)F=N[k]=L,++E._eventsCount;else if(typeof F=="function"?F=N[k]=q?[L,F]:[F,L]:q?F.unshift(L):F.push(L),$=y(E),$>0&&F.length>$&&!F.warned){F.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=E,Y.type=k,Y.count=F.length,s(Y)}return E}o.prototype.addListener=function(E,k){return g(this,E,k,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(E,k){return g(this,E,k,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(E,k,L){var q={fired:!1,wrapFn:void 0,target:E,type:k,listener:L},$=_.bind(q);return $.listener=L,q.wrapFn=$,$}o.prototype.once=function(E,k){return d(k),this.on(E,A(this,E,k)),this},o.prototype.prependOnceListener=function(E,k){return d(k),this.prependListener(E,A(this,E,k)),this},o.prototype.removeListener=function(E,k){var L,q,$,N,F;if(d(k),q=this._events,q===void 0)return this;if(L=q[E],L===void 0)return this;if(L===k||L.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete q[E],q.removeListener&&this.emit("removeListener",E,L.listener||k));else if(typeof L!="function"){for($=-1,N=L.length-1;N>=0;N--)if(L[N]===k||L[N].listener===k){F=L[N].listener,$=N;break}if($<0)return this;$===0?L.shift():S(L,$),L.length===1&&(q[E]=L[0]),q.removeListener!==void 0&&this.emit("removeListener",E,F||k)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(E){var k,L,q;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[E]),this;if(arguments.length===0){var $=Object.keys(L),N;for(q=0;q<$.length;++q)N=$[q],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=L[E],typeof k=="function")this.removeListener(E,k);else if(k!==void 0)for(q=k.length-1;q>=0;q--)this.removeListener(E,k[q]);return this};function c(E,k,L){var q=E._events;if(q===void 0)return[];var $=q[k];return $===void 0?[]:typeof $=="function"?L?[$.listener||$]:[$]:L?b($):m($,$.length)}o.prototype.listeners=function(E){return c(this,E,!0)},o.prototype.rawListeners=function(E){return c(this,E,!1)},o.listenerCount=function(E,k){return typeof E.listenerCount=="function"?E.listenerCount(k):p.call(E,k)},o.prototype.listenerCount=p;function p(E){var k=this._events;if(k!==void 0){var L=k[E];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]};function m(E,k){for(var L=new Array(k),q=0;q<k;++q)L[q]=E[q];return L}function S(E,k){for(;k+1<E.length;k++)E[k]=E[k+1];E.pop()}function b(E){for(var k=new Array(E.length),L=0;L<k.length;++L)k[L]=E[L].listener||E[L];return k}function I(E,k){return new Promise(function(L,q){function $(F){E.removeListener(k,N),q(F)}function N(){typeof E.removeListener=="function"&&E.removeListener("error",$),L([].slice.call(arguments))}M(E,k,N,{once:!0}),k!=="error"&&R(E,$,{once:!0})})}function R(E,k,L){typeof E.on=="function"&&M(E,"error",k,L)}function M(E,k,L,q){if(typeof E.on=="function")q.once?E.once(k,L):E.on(k,L);else if(typeof E.addEventListener=="function")E.addEventListener(k,function $(N){q.once&&E.removeEventListener(k,$),L(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}}),Dr=ae((e,t)=>{te(),t.exports=Ot().EventEmitter}),Fr=ae(()=>{te()}),Wn=ae((e,t)=>{te();function r(c,p){var m=Object.keys(c);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(c);p&&(S=S.filter(function(b){return Object.getOwnPropertyDescriptor(c,b).enumerable})),m.push.apply(m,S)}return m}function n(c){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?r(Object(m),!0).forEach(function(S){a(c,S,m[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(S){Object.defineProperty(c,S,Object.getOwnPropertyDescriptor(m,S))})}return c}function a(c,p,m){return p in c?Object.defineProperty(c,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[p]=m,c}function s(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function l(c,p){for(var m=0;m<p.length;m++){var S=p[m];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(c,S.key,S)}}function o(c,p,m){return p&&l(c.prototype,p),m&&l(c,m),c}var f=Bt(),d=f.Buffer,y=Fr(),g=y.inspect,_=g&&g.custom||"inspect";function A(c,p,m){d.prototype.copy.call(c,p,m)}t.exports=function(){function c(){s(this,c),this.head=null,this.tail=null,this.length=0}return o(c,[{key:"push",value:function(p){var m={data:p,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(p){var m={data:p,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var m=this.head,S=""+m.data;m=m.next;)S+=p+m.data;return S}},{key:"concat",value:function(p){if(this.length===0)return d.alloc(0);for(var m=d.allocUnsafe(p>>>0),S=this.head,b=0;S;)A(S.data,m,b),b+=S.data.length,S=S.next;return m}},{key:"consume",value:function(p,m){var S;return p<this.head.data.length?(S=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?S=this.shift():S=m?this._getString(p):this._getBuffer(p),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var m=this.head,S=1,b=m.data;for(p-=b.length;m=m.next;){var I=m.data,R=p>I.length?I.length:p;if(R===I.length?b+=I:b+=I.slice(0,p),p-=R,p===0){R===I.length?(++S,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=I.slice(R));break}++S}return this.length-=S,b}},{key:"_getBuffer",value:function(p){var m=d.allocUnsafe(p),S=this.head,b=1;for(S.data.copy(m),p-=S.data.length;S=S.next;){var I=S.data,R=p>I.length?I.length:p;if(I.copy(m,m.length-p,0,R),p-=R,p===0){R===I.length?(++b,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=I.slice(R));break}++b}return this.length-=b,m}},{key:_,value:function(p,m){return g(this,n({},m,{depth:0,customInspect:!1}))}}]),c}()}),$r=ae((e,t)=>{te();function r(f,d){var y=this,g=this._readableState&&this._readableState.destroyed,_=this._writableState&&this._writableState.destroyed;return g||_?(d?d(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ue.nextTick(l,this,f)):ue.nextTick(l,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(A){!d&&A?y._writableState?y._writableState.errorEmitted?ue.nextTick(a,y):(y._writableState.errorEmitted=!0,ue.nextTick(n,y,A)):ue.nextTick(n,y,A):d?(ue.nextTick(a,y),d(A)):ue.nextTick(a,y)}),this)}function n(f,d){l(f,d),a(f)}function a(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(f,d){f.emit("error",d)}function o(f,d){var y=f._readableState,g=f._writableState;y&&y.autoDestroy||g&&g.autoDestroy?f.destroy(d):f.emit("error",d)}t.exports={destroy:r,undestroy:s,errorOrDestroy:o}}),pt=ae((e,t)=>{te();function r(d,y){d.prototype=Object.create(y.prototype),d.prototype.constructor=d,d.__proto__=y}var n={};function a(d,y,g){g||(g=Error);function _(c,p,m){return typeof y=="string"?y:y(c,p,m)}var A=function(c){r(p,c);function p(m,S,b){return c.call(this,_(m,S,b))||this}return p}(g);A.prototype.name=g.name,A.prototype.code=d,n[d]=A}function s(d,y){if(Array.isArray(d)){var g=d.length;return d=d.map(function(_){return String(_)}),g>2?"one of ".concat(y," ").concat(d.slice(0,g-1).join(", "),", or ")+d[g-1]:g===2?"one of ".concat(y," ").concat(d[0]," or ").concat(d[1]):"of ".concat(y," ").concat(d[0])}else return"of ".concat(y," ").concat(String(d))}function l(d,y,g){return d.substr(!g||g<0?0:+g,y.length)===y}function o(d,y,g){return(g===void 0||g>d.length)&&(g=d.length),d.substring(g-y.length,g)===y}function f(d,y,g){return typeof g!="number"&&(g=0),g+y.length>d.length?!1:d.indexOf(y,g)!==-1}a("ERR_INVALID_OPT_VALUE",function(d,y){return'The value "'+y+'" is invalid for option "'+d+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(d,y,g){var _;typeof y=="string"&&l(y,"not ")?(_="must not be",y=y.replace(/^not /,"")):_="must be";var A;if(o(d," argument"))A="The ".concat(d," ").concat(_," ").concat(s(y,"type"));else{var c=f(d,".")?"property":"argument";A='The "'.concat(d,'" ').concat(c," ").concat(_," ").concat(s(y,"type"))}return A+=". Received type ".concat(typeof g),A},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}),Wr=ae((e,t)=>{te();var r=pt().codes.ERR_INVALID_OPT_VALUE;function n(s,l,o){return s.highWaterMark!=null?s.highWaterMark:l?s[o]:null}function a(s,l,o,f){var d=n(l,f,o);if(d!=null){if(!(isFinite(d)&&Math.floor(d)===d)||d<0){var y=f?o:"highWaterMark";throw new r(y,d)}return Math.floor(d)}return s.objectMode?16:16*1024}t.exports={getHighWaterMark:a}}),tt=ae((e,t)=>{te(),typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var a=function(){};a.prototype=n.prototype,r.prototype=new a,r.prototype.constructor=r}}}),qn=ae((e,t)=>{te(),t.exports=r;function r(a,s){if(n("noDeprecation"))return a;var l=!1;function o(){if(!l){if(n("throwDeprecation"))throw new Error(s);n("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return a.apply(this,arguments)}return o}function n(a){try{if(!Ye.localStorage)return!1}catch{return!1}var s=Ye.localStorage[a];return s==null?!1:String(s).toLowerCase()==="true"}}),qr=ae((e,t)=>{te(),t.exports=$;function r(O){var P=this;this.next=null,this.entry=null,this.finish=function(){de(P,O)}}var n;$.WritableState=L;var a={deprecate:qn()},s=Dr(),l=Bt().Buffer,o=Ye.Uint8Array||function(){};function f(O){return l.from(O)}function d(O){return l.isBuffer(O)||O instanceof o}var y=$r(),g=Wr(),_=g.getHighWaterMark,A=pt().codes,c=A.ERR_INVALID_ARG_TYPE,p=A.ERR_METHOD_NOT_IMPLEMENTED,m=A.ERR_MULTIPLE_CALLBACK,S=A.ERR_STREAM_CANNOT_PIPE,b=A.ERR_STREAM_DESTROYED,I=A.ERR_STREAM_NULL_VALUES,R=A.ERR_STREAM_WRITE_AFTER_END,M=A.ERR_UNKNOWN_ENCODING,E=y.errorOrDestroy;tt()($,s);function k(){}function L(O,P,x){n=n||dt(),O=O||{},typeof x!="boolean"&&(x=P instanceof n),this.objectMode=!!O.objectMode,x&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=_(this,O,"writableHighWaterMark",x),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var J=O.decodeStrings===!1;this.decodeStrings=!J,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){ge(P,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}L.prototype.getBuffer=function(){for(var O=this.bufferedRequest,P=[];O;)P.push(O),O=O.next;return P},function(){try{Object.defineProperty(L.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(O){return q.call(this,O)?!0:this!==$?!1:O&&O._writableState instanceof L}})):q=function(O){return O instanceof this};function $(O){n=n||dt();var P=this instanceof n;if(!P&&!q.call($,this))return new $(O);this._writableState=new L(O,this,P),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),s.call(this)}$.prototype.pipe=function(){E(this,new S)};function N(O,P){var x=new R;E(O,x),ue.nextTick(P,x)}function F(O,P,x,J){var le;return x===null?le=new I:typeof x!="string"&&!P.objectMode&&(le=new c("chunk",["string","Buffer"],x)),le?(E(O,le),ue.nextTick(J,le),!1):!0}$.prototype.write=function(O,P,x){var J=this._writableState,le=!1,w=!J.objectMode&&d(O);return w&&!l.isBuffer(O)&&(O=f(O)),typeof P=="function"&&(x=P,P=null),w?P="buffer":P||(P=J.defaultEncoding),typeof x!="function"&&(x=k),J.ending?N(this,x):(w||F(this,J,O,x))&&(J.pendingcb++,le=ne(this,J,w,O,P,x)),le},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&he(this,O))},$.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new M(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Y(O,P,x){return!O.objectMode&&O.decodeStrings!==!1&&typeof P=="string"&&(P=l.from(P,x)),P}Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ne(O,P,x,J,le,w){if(!x){var v=Y(P,J,le);J!==v&&(x=!0,le="buffer",J=v)}var V=P.objectMode?1:J.length;P.length+=V;var Q=P.length<P.highWaterMark;if(Q||(P.needDrain=!0),P.writing||P.corked){var me=P.lastBufferedRequest;P.lastBufferedRequest={chunk:J,encoding:le,isBuf:x,callback:w,next:null},me?me.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else ie(O,P,!1,V,J,le,w);return Q}function ie(O,P,x,J,le,w,v){P.writelen=J,P.writecb=v,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new b("write")):x?O._writev(le,P.onwrite):O._write(le,w,P.onwrite),P.sync=!1}function ce(O,P,x,J,le){--P.pendingcb,x?(ue.nextTick(le,J),ue.nextTick(re,O,P),O._writableState.errorEmitted=!0,E(O,J)):(le(J),O._writableState.errorEmitted=!0,E(O,J),re(O,P))}function pe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function ge(O,P){var x=O._writableState,J=x.sync,le=x.writecb;if(typeof le!="function")throw new m;if(pe(x),P)ce(O,x,J,P,le);else{var w=T(x)||O.destroyed;!w&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&he(O,x),J?ue.nextTick(fe,O,x,w,le):fe(O,x,w,le)}}function fe(O,P,x,J){x||Ee(O,P),P.pendingcb--,J(),re(O,P)}function Ee(O,P){P.length===0&&P.needDrain&&(P.needDrain=!1,O.emit("drain"))}function he(O,P){P.bufferProcessing=!0;var x=P.bufferedRequest;if(O._writev&&x&&x.next){var J=P.bufferedRequestCount,le=new Array(J),w=P.corkedRequestsFree;w.entry=x;for(var v=0,V=!0;x;)le[v]=x,x.isBuf||(V=!1),x=x.next,v+=1;le.allBuffers=V,ie(O,P,!0,P.length,le,"",w.finish),P.pendingcb++,P.lastBufferedRequest=null,w.next?(P.corkedRequestsFree=w.next,w.next=null):P.corkedRequestsFree=new r(P),P.bufferedRequestCount=0}else{for(;x;){var Q=x.chunk,me=x.encoding,se=x.callback,U=P.objectMode?1:Q.length;if(ie(O,P,!1,U,Q,me,se),x=x.next,P.bufferedRequestCount--,P.writing)break}x===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=x,P.bufferProcessing=!1}$.prototype._write=function(O,P,x){x(new p("_write()"))},$.prototype._writev=null,$.prototype.end=function(O,P,x){var J=this._writableState;return typeof O=="function"?(x=O,O=null,P=null):typeof P=="function"&&(x=P,P=null),O!=null&&this.write(O,P),J.corked&&(J.corked=1,this.uncork()),J.ending||ye(this,J,x),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function C(O,P){O._final(function(x){P.pendingcb--,x&&E(O,x),P.prefinished=!0,O.emit("prefinish"),re(O,P)})}function z(O,P){!P.prefinished&&!P.finalCalled&&(typeof O._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,ue.nextTick(C,O,P)):(P.prefinished=!0,O.emit("prefinish")))}function re(O,P){var x=T(P);if(x&&(z(O,P),P.pendingcb===0&&(P.finished=!0,O.emit("finish"),P.autoDestroy))){var J=O._readableState;(!J||J.autoDestroy&&J.endEmitted)&&O.destroy()}return x}function ye(O,P,x){P.ending=!0,re(O,P),x&&(P.finished?ue.nextTick(x):O.once("finish",x)),P.ended=!0,O.writable=!1}function de(O,P,x){var J=O.entry;for(O.entry=null;J;){var le=J.callback;P.pendingcb--,le(x),J=J.next}P.corkedRequestsFree.next=O}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(O){!this._writableState||(this._writableState.destroyed=O)}}),$.prototype.destroy=y.destroy,$.prototype._undestroy=y.undestroy,$.prototype._destroy=function(O,P){P(O)}}),dt=ae((e,t)=>{te();var r=Object.keys||function(g){var _=[];for(var A in g)_.push(A);return _};t.exports=f;var n=Vr(),a=qr();for(tt()(f,n),s=r(a.prototype),o=0;o<s.length;o++)l=s[o],f.prototype[l]||(f.prototype[l]=a.prototype[l]);var s,l,o;function f(g){if(!(this instanceof f))return new f(g);n.call(this,g),a.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||ue.nextTick(y,this)}function y(g){g.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}),Vn=ae((e,t)=>{te();var r=Bt(),n=r.Buffer;function a(l,o){for(var f in l)o[f]=l[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=s);function s(l,o,f){return n(l,o,f)}s.prototype=Object.create(n.prototype),a(n,s),s.from=function(l,o,f){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,f)},s.alloc=function(l,o,f){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof f=="string"?d.fill(o,f):d.fill(o):d.fill(0),d},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(l)}}),yr=ae(e=>{te();var t=Vn().Buffer,r=t.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(b){if(!b)return"utf8";for(var I;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(I)return;b=(""+b).toLowerCase(),I=!0}}function a(b){var I=n(b);if(typeof I!="string"&&(t.isEncoding===r||!r(b)))throw new Error("Unknown encoding: "+b);return I||b}e.StringDecoder=s;function s(b){this.encoding=a(b);var I;switch(this.encoding){case"utf16le":this.text=_,this.end=A,I=4;break;case"utf8":this.fillLast=d,I=4;break;case"base64":this.text=c,this.end=p,I=3;break;default:this.write=m,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(I)}s.prototype.write=function(b){if(b.length===0)return"";var I,R;if(this.lastNeed){if(I=this.fillLast(b),I===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<b.length?I?I+this.text(b,R):this.text(b,R):I||""},s.prototype.end=g,s.prototype.text=y,s.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function l(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function o(b,I,R){var M=I.length-1;if(M<R)return 0;var E=l(I[M]);return E>=0?(E>0&&(b.lastNeed=E-1),E):--M<R||E===-2?0:(E=l(I[M]),E>=0?(E>0&&(b.lastNeed=E-2),E):--M<R||E===-2?0:(E=l(I[M]),E>=0?(E>0&&(E===2?E=0:b.lastNeed=E-3),E):0))}function f(b,I,R){if((I[0]&192)!==128)return b.lastNeed=0,"\uFFFD";if(b.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return b.lastNeed=1,"\uFFFD";if(b.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return b.lastNeed=2,"\uFFFD"}}function d(b){var I=this.lastTotal-this.lastNeed,R=f(this,b);if(R!==void 0)return R;if(this.lastNeed<=b.length)return b.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,I,0,b.length),this.lastNeed-=b.length}function y(b,I){var R=o(this,b,I);if(!this.lastNeed)return b.toString("utf8",I);this.lastTotal=R;var M=b.length-(R-this.lastNeed);return b.copy(this.lastChar,0,M),b.toString("utf8",I,M)}function g(b){var I=b&&b.length?this.write(b):"";return this.lastNeed?I+"\uFFFD":I}function _(b,I){if((b.length-I)%2===0){var R=b.toString("utf16le",I);if(R){var M=R.charCodeAt(R.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",I,b.length-1)}function A(b){var I=b&&b.length?this.write(b):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,R)}return I}function c(b,I){var R=(b.length-I)%3;return R===0?b.toString("base64",I):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",I,b.length-R))}function p(b){var I=b&&b.length?this.write(b):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function m(b){return b.toString(this.encoding)}function S(b){return b&&b.length?this.write(b):""}}),ir=ae((e,t)=>{te();var r=pt().codes.ERR_STREAM_PREMATURE_CLOSE;function n(o){var f=!1;return function(){if(!f){f=!0;for(var d=arguments.length,y=new Array(d),g=0;g<d;g++)y[g]=arguments[g];o.apply(this,y)}}}function a(){}function s(o){return o.setHeader&&typeof o.abort=="function"}function l(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=n(d||a);var y=f.readable||f.readable!==!1&&o.readable,g=f.writable||f.writable!==!1&&o.writable,_=function(){o.writable||c()},A=o._writableState&&o._writableState.finished,c=function(){g=!1,A=!0,y||d.call(o)},p=o._readableState&&o._readableState.endEmitted,m=function(){y=!1,p=!0,g||d.call(o)},S=function(R){d.call(o,R)},b=function(){var R;if(y&&!p)return(!o._readableState||!o._readableState.ended)&&(R=new r),d.call(o,R);if(g&&!A)return(!o._writableState||!o._writableState.ended)&&(R=new r),d.call(o,R)},I=function(){o.req.on("finish",c)};return s(o)?(o.on("complete",c),o.on("abort",b),o.req?I():o.on("request",I)):g&&!o._writableState&&(o.on("end",_),o.on("close",_)),o.on("end",m),o.on("finish",c),f.error!==!1&&o.on("error",S),o.on("close",b),function(){o.removeListener("complete",c),o.removeListener("abort",b),o.removeListener("request",I),o.req&&o.req.removeListener("finish",c),o.removeListener("end",_),o.removeListener("close",_),o.removeListener("finish",c),o.removeListener("end",m),o.removeListener("error",S),o.removeListener("close",b)}}t.exports=l}),zn=ae((e,t)=>{te();var r;function n(I,R,M){return R in I?Object.defineProperty(I,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):I[R]=M,I}var a=ir(),s=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),f=Symbol("ended"),d=Symbol("lastPromise"),y=Symbol("handlePromise"),g=Symbol("stream");function _(I,R){return{value:I,done:R}}function A(I){var R=I[s];if(R!==null){var M=I[g].read();M!==null&&(I[d]=null,I[s]=null,I[l]=null,R(_(M,!1)))}}function c(I){ue.nextTick(A,I)}function p(I,R){return function(M,E){I.then(function(){if(R[f]){M(_(void 0,!0));return}R[y](M,E)},E)}}var m=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((r={get stream(){return this[g]},next:function(){var I=this,R=this[o];if(R!==null)return Promise.reject(R);if(this[f])return Promise.resolve(_(void 0,!0));if(this[g].destroyed)return new Promise(function(L,q){ue.nextTick(function(){I[o]?q(I[o]):L(_(void 0,!0))})});var M=this[d],E;if(M)E=new Promise(p(M,this));else{var k=this[g].read();if(k!==null)return Promise.resolve(_(k,!1));E=new Promise(this[y])}return this[d]=E,E}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var I=this;return new Promise(function(R,M){I[g].destroy(null,function(E){if(E){M(E);return}R(_(void 0,!0))})})}),r),m),b=function(I){var R,M=Object.create(S,(R={},n(R,g,{value:I,writable:!0}),n(R,s,{value:null,writable:!0}),n(R,l,{value:null,writable:!0}),n(R,o,{value:null,writable:!0}),n(R,f,{value:I._readableState.endEmitted,writable:!0}),n(R,y,{value:function(E,k){var L=M[g].read();L?(M[d]=null,M[s]=null,M[l]=null,E(_(L,!1))):(M[s]=E,M[l]=k)},writable:!0}),R));return M[d]=null,a(I,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=M[l];k!==null&&(M[d]=null,M[s]=null,M[l]=null,k(E)),M[o]=E;return}var L=M[s];L!==null&&(M[d]=null,M[s]=null,M[l]=null,L(_(void 0,!0))),M[f]=!0}),I.on("readable",c.bind(null,M)),M};t.exports=b}),Gn=ae((e,t)=>{te(),t.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Vr=ae((e,t)=>{te(),t.exports=N;var r;N.ReadableState=$,Ot().EventEmitter;var n=function(w,v){return w.listeners(v).length},a=Dr(),s=Bt().Buffer,l=Ye.Uint8Array||function(){};function o(w){return s.from(w)}function f(w){return s.isBuffer(w)||w instanceof l}var d=Fr(),y;d&&d.debuglog?y=d.debuglog("stream"):y=function(){};var g=Wn(),_=$r(),A=Wr(),c=A.getHighWaterMark,p=pt().codes,m=p.ERR_INVALID_ARG_TYPE,S=p.ERR_STREAM_PUSH_AFTER_EOF,b=p.ERR_METHOD_NOT_IMPLEMENTED,I=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,M,E;tt()(N,a);var k=_.errorOrDestroy,L=["error","close","destroy","pause","resume"];function q(w,v,V){if(typeof w.prependListener=="function")return w.prependListener(v,V);!w._events||!w._events[v]?w.on(v,V):Array.isArray(w._events[v])?w._events[v].unshift(V):w._events[v]=[V,w._events[v]]}function $(w,v,V){r=r||dt(),w=w||{},typeof V!="boolean"&&(V=v instanceof r),this.objectMode=!!w.objectMode,V&&(this.objectMode=this.objectMode||!!w.readableObjectMode),this.highWaterMark=c(this,w,"readableHighWaterMark",V),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=w.emitClose!==!1,this.autoDestroy=!!w.autoDestroy,this.destroyed=!1,this.defaultEncoding=w.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,w.encoding&&(R||(R=yr().StringDecoder),this.decoder=new R(w.encoding),this.encoding=w.encoding)}function N(w){if(r=r||dt(),!(this instanceof N))return new N(w);var v=this instanceof r;this._readableState=new $(w,this,v),this.readable=!0,w&&(typeof w.read=="function"&&(this._read=w.read),typeof w.destroy=="function"&&(this._destroy=w.destroy)),a.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(w){!this._readableState||(this._readableState.destroyed=w)}}),N.prototype.destroy=_.destroy,N.prototype._undestroy=_.undestroy,N.prototype._destroy=function(w,v){v(w)},N.prototype.push=function(w,v){var V=this._readableState,Q;return V.objectMode?Q=!0:typeof w=="string"&&(v=v||V.defaultEncoding,v!==V.encoding&&(w=s.from(w,v),v=""),Q=!0),F(this,w,v,!1,Q)},N.prototype.unshift=function(w){return F(this,w,null,!0,!1)};function F(w,v,V,Q,me){y("readableAddChunk",v);var se=w._readableState;if(v===null)se.reading=!1,ge(w,se);else{var U;if(me||(U=ne(se,v)),U)k(w,U);else if(se.objectMode||v&&v.length>0)if(typeof v!="string"&&!se.objectMode&&Object.getPrototypeOf(v)!==s.prototype&&(v=o(v)),Q)se.endEmitted?k(w,new I):Y(w,se,v,!0);else if(se.ended)k(w,new S);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!V?(v=se.decoder.write(v),se.objectMode||v.length!==0?Y(w,se,v,!1):he(w,se)):Y(w,se,v,!1)}else Q||(se.reading=!1,he(w,se))}return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function Y(w,v,V,Q){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,w.emit("data",V)):(v.length+=v.objectMode?1:V.length,Q?v.buffer.unshift(V):v.buffer.push(V),v.needReadable&&fe(w)),he(w,v)}function ne(w,v){var V;return!f(v)&&typeof v!="string"&&v!==void 0&&!w.objectMode&&(V=new m("chunk",["string","Buffer","Uint8Array"],v)),V}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(w){R||(R=yr().StringDecoder);var v=new R(w);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,Q="";V!==null;)Q+=v.write(V.data),V=V.next;return this._readableState.buffer.clear(),Q!==""&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this};var ie=1073741824;function ce(w){return w>=ie?w=ie:(w--,w|=w>>>1,w|=w>>>2,w|=w>>>4,w|=w>>>8,w|=w>>>16,w++),w}function pe(w,v){return w<=0||v.length===0&&v.ended?0:v.objectMode?1:w!==w?v.flowing&&v.length?v.buffer.head.data.length:v.length:(w>v.highWaterMark&&(v.highWaterMark=ce(w)),w<=v.length?w:v.ended?v.length:(v.needReadable=!0,0))}N.prototype.read=function(w){y("read",w),w=parseInt(w,10);var v=this._readableState,V=w;if(w!==0&&(v.emittedReadable=!1),w===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return y("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?x(this):fe(this),null;if(w=pe(w,v),w===0&&v.ended)return v.length===0&&x(this),null;var Q=v.needReadable;y("need readable",Q),(v.length===0||v.length-w<v.highWaterMark)&&(Q=!0,y("length less than watermark",Q)),v.ended||v.reading?(Q=!1,y("reading or ended",Q)):Q&&(y("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(w=pe(V,v)));var me;return w>0?me=P(w,v):me=null,me===null?(v.needReadable=v.length<=v.highWaterMark,w=0):(v.length-=w,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),V!==w&&v.ended&&x(this)),me!==null&&this.emit("data",me),me};function ge(w,v){if(y("onEofChunk"),!v.ended){if(v.decoder){var V=v.decoder.end();V&&V.length&&(v.buffer.push(V),v.length+=v.objectMode?1:V.length)}v.ended=!0,v.sync?fe(w):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,Ee(w)))}}function fe(w){var v=w._readableState;y("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(y("emitReadable",v.flowing),v.emittedReadable=!0,ue.nextTick(Ee,w))}function Ee(w){var v=w._readableState;y("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(w.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,O(w)}function he(w,v){v.readingMore||(v.readingMore=!0,ue.nextTick(T,w,v))}function T(w,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var V=v.length;if(y("maybeReadMore read 0"),w.read(0),V===v.length)break}v.readingMore=!1}N.prototype._read=function(w){k(this,new b("_read()"))},N.prototype.pipe=function(w,v){var V=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=w;break;case 1:Q.pipes=[Q.pipes,w];break;default:Q.pipes.push(w);break}Q.pipesCount+=1,y("pipe count=%d opts=%j",Q.pipesCount,v);var me=(!v||v.end!==!1)&&w!==ue.stdout&&w!==ue.stderr,se=me?Ne:u;Q.endEmitted?ue.nextTick(se):V.once("end",se),w.on("unpipe",U);function U(h,B){y("onunpipe"),h===V&&B&&B.hasUnpiped===!1&&(B.hasUnpiped=!0,gt())}function Ne(){y("onend"),w.end()}var Fe=C(V);w.on("drain",Fe);var Le=!1;function gt(){y("cleanup"),w.removeListener("close",mt),w.removeListener("finish",i),w.removeListener("drain",Fe),w.removeListener("error",Ce),w.removeListener("unpipe",U),V.removeListener("end",Ne),V.removeListener("end",u),V.removeListener("data",Rt),Le=!0,Q.awaitDrain&&(!w._writableState||w._writableState.needDrain)&&Fe()}V.on("data",Rt);function Rt(h){y("ondata");var B=w.write(h);y("dest.write",B),B===!1&&((Q.pipesCount===1&&Q.pipes===w||Q.pipesCount>1&&le(Q.pipes,w)!==-1)&&!Le&&(y("false write response, pause",Q.awaitDrain),Q.awaitDrain++),V.pause())}function Ce(h){y("onerror",h),u(),w.removeListener("error",Ce),n(w,"error")===0&&k(w,h)}q(w,"error",Ce);function mt(){w.removeListener("finish",i),u()}w.once("close",mt);function i(){y("onfinish"),w.removeListener("close",mt),u()}w.once("finish",i);function u(){y("unpipe"),V.unpipe(w)}return w.emit("pipe",V),Q.flowing||(y("pipe resume"),V.resume()),w};function C(w){return function(){var v=w._readableState;y("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&n(w,"data")&&(v.flowing=!0,O(w))}}N.prototype.unpipe=function(w){var v=this._readableState,V={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return w&&w!==v.pipes?this:(w||(w=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,w&&w.emit("unpipe",this,V),this);if(!w){var Q=v.pipes,me=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var se=0;se<me;se++)Q[se].emit("unpipe",this,{hasUnpiped:!1});return this}var U=le(v.pipes,w);return U===-1?this:(v.pipes.splice(U,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),w.emit("unpipe",this,V),this)},N.prototype.on=function(w,v){var V=a.prototype.on.call(this,w,v),Q=this._readableState;return w==="data"?(Q.readableListening=this.listenerCount("readable")>0,Q.flowing!==!1&&this.resume()):w==="readable"&&!Q.endEmitted&&!Q.readableListening&&(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,y("on readable",Q.length,Q.reading),Q.length?fe(this):Q.reading||ue.nextTick(re,this)),V},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(w,v){var V=a.prototype.removeListener.call(this,w,v);return w==="readable"&&ue.nextTick(z,this),V},N.prototype.removeAllListeners=function(w){var v=a.prototype.removeAllListeners.apply(this,arguments);return(w==="readable"||w===void 0)&&ue.nextTick(z,this),v};function z(w){var v=w._readableState;v.readableListening=w.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:w.listenerCount("data")>0&&w.resume()}function re(w){y("readable nexttick read 0"),w.read(0)}N.prototype.resume=function(){var w=this._readableState;return w.flowing||(y("resume"),w.flowing=!w.readableListening,ye(this,w)),w.paused=!1,this};function ye(w,v){v.resumeScheduled||(v.resumeScheduled=!0,ue.nextTick(de,w,v))}function de(w,v){y("resume",v.reading),v.reading||w.read(0),v.resumeScheduled=!1,w.emit("resume"),O(w),v.flowing&&!v.reading&&w.read(0)}N.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(w){var v=w._readableState;for(y("flow",v.flowing);v.flowing&&w.read()!==null;);}N.prototype.wrap=function(w){var v=this,V=this._readableState,Q=!1;w.on("end",function(){if(y("wrapped end"),V.decoder&&!V.ended){var U=V.decoder.end();U&&U.length&&v.push(U)}v.push(null)}),w.on("data",function(U){if(y("wrapped data"),V.decoder&&(U=V.decoder.write(U)),!(V.objectMode&&U==null)&&!(!V.objectMode&&(!U||!U.length))){var Ne=v.push(U);Ne||(Q=!0,w.pause())}});for(var me in w)this[me]===void 0&&typeof w[me]=="function"&&(this[me]=function(U){return function(){return w[U].apply(w,arguments)}}(me));for(var se=0;se<L.length;se++)w.on(L[se],this.emit.bind(this,L[se]));return this._read=function(U){y("wrapped _read",U),Q&&(Q=!1,w.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return M===void 0&&(M=zn()),M(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(w){this._readableState&&(this._readableState.flowing=w)}}),N._fromList=P,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(w,v){if(v.length===0)return null;var V;return v.objectMode?V=v.buffer.shift():!w||w>=v.length?(v.decoder?V=v.buffer.join(""):v.buffer.length===1?V=v.buffer.first():V=v.buffer.concat(v.length),v.buffer.clear()):V=v.buffer.consume(w,v.decoder),V}function x(w){var v=w._readableState;y("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,ue.nextTick(J,v,w))}function J(w,v){if(y("endReadableNT",w.endEmitted,w.length),!w.endEmitted&&w.length===0&&(w.endEmitted=!0,v.readable=!1,v.emit("end"),w.autoDestroy)){var V=v._writableState;(!V||V.autoDestroy&&V.finished)&&v.destroy()}}typeof Symbol=="function"&&(N.from=function(w,v){return E===void 0&&(E=Gn()),E(N,w,v)});function le(w,v){for(var V=0,Q=w.length;V<Q;V++)if(w[V]===v)return V;return-1}}),zr=ae((e,t)=>{te(),t.exports=d;var r=pt().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,o=dt();tt()(d,o);function f(_,A){var c=this._transformState;c.transforming=!1;var p=c.writecb;if(p===null)return this.emit("error",new a);c.writechunk=null,c.writecb=null,A!=null&&this.push(A),p(_);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function d(_){if(!(this instanceof d))return new d(_);o.call(this,_),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&(typeof _.transform=="function"&&(this._transform=_.transform),typeof _.flush=="function"&&(this._flush=_.flush)),this.on("prefinish",y)}function y(){var _=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(A,c){g(_,A,c)}):g(this,null,null)}d.prototype.push=function(_,A){return this._transformState.needTransform=!1,o.prototype.push.call(this,_,A)},d.prototype._transform=function(_,A,c){c(new n("_transform()"))},d.prototype._write=function(_,A,c){var p=this._transformState;if(p.writecb=c,p.writechunk=_,p.writeencoding=A,!p.transforming){var m=this._readableState;(p.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},d.prototype._read=function(_){var A=this._transformState;A.writechunk!==null&&!A.transforming?(A.transforming=!0,this._transform(A.writechunk,A.writeencoding,A.afterTransform)):A.needTransform=!0},d.prototype._destroy=function(_,A){o.prototype._destroy.call(this,_,function(c){A(c)})};function g(_,A,c){if(A)return _.emit("error",A);if(c!=null&&_.push(c),_._writableState.length)throw new l;if(_._transformState.transforming)throw new s;return _.push(null)}}),Kn=ae((e,t)=>{te(),t.exports=n;var r=zr();tt()(n,r);function n(a){if(!(this instanceof n))return new n(a);r.call(this,a)}n.prototype._transform=function(a,s,l){l(null,a)}}),Hn=ae((e,t)=>{te();var r;function n(c){var p=!1;return function(){p||(p=!0,c.apply(void 0,arguments))}}var a=pt().codes,s=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function o(c){if(c)throw c}function f(c){return c.setHeader&&typeof c.abort=="function"}function d(c,p,m,S){S=n(S);var b=!1;c.on("close",function(){b=!0}),r===void 0&&(r=ir()),r(c,{readable:p,writable:m},function(R){if(R)return S(R);b=!0,S()});var I=!1;return function(R){if(!b&&!I){if(I=!0,f(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();S(R||new l("pipe"))}}}function y(c){c()}function g(c,p){return c.pipe(p)}function _(c){return!c.length||typeof c[c.length-1]!="function"?o:c.pop()}function A(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];var S=_(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new s("streams");var b,I=p.map(function(R,M){var E=M<p.length-1,k=M>0;return d(R,E,k,function(L){b||(b=L),L&&I.forEach(y),!E&&(I.forEach(y),S(b))})});return p.reduce(g)}t.exports=A}),yt=ae((e,t)=>{te(),e=t.exports=Vr(),e.Stream=e,e.Readable=e,e.Writable=qr(),e.Duplex=dt(),e.Transform=zr(),e.PassThrough=Kn(),e.finished=ir(),e.pipeline=Hn()}),Jn=ae((e,t)=>{te(),t.exports=r;function r(n,a){if(n&&a)return r(n)(a);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(l){s[l]=n[l]}),s;function s(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];var f=n.apply(this,l),d=l[l.length-1];return typeof f=="function"&&f!==d&&Object.keys(d).forEach(function(y){f[y]=d[y]}),f}}}),Gr=ae((e,t)=>{te();var r=Jn();t.exports=r(n),t.exports.strict=r(a),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return a(this)},configurable:!0})});function n(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function a(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},o=s.name||"Function wrapped with `once`";return l.onceError=o+" shouldn't be called more than once",l.called=!1,l}}),Kr=ae((e,t)=>{te();var r=Gr(),n=function(){},a=function(o){return o.setHeader&&typeof o.abort=="function"},s=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},l=function(o,f,d){if(typeof f=="function")return l(o,null,f);f||(f={}),d=r(d||n);var y=o._writableState,g=o._readableState,_=f.readable||f.readable!==!1&&o.readable,A=f.writable||f.writable!==!1&&o.writable,c=!1,p=function(){o.writable||m()},m=function(){A=!1,_||d.call(o)},S=function(){_=!1,A||d.call(o)},b=function(k){d.call(o,k?new Error("exited with error code: "+k):null)},I=function(k){d.call(o,k)},R=function(){ue.nextTick(M)},M=function(){if(!c){if(_&&!(g&&g.ended&&!g.destroyed))return d.call(o,new Error("premature close"));if(A&&!(y&&y.ended&&!y.destroyed))return d.call(o,new Error("premature close"))}},E=function(){o.req.on("finish",m)};return a(o)?(o.on("complete",m),o.on("abort",R),o.req?E():o.on("request",E)):A&&!y&&(o.on("end",p),o.on("close",p)),s(o)&&o.on("exit",b),o.on("end",S),o.on("finish",m),f.error!==!1&&o.on("error",I),o.on("close",R),function(){c=!0,o.removeListener("complete",m),o.removeListener("abort",R),o.removeListener("request",E),o.req&&o.req.removeListener("finish",m),o.removeListener("end",p),o.removeListener("close",p),o.removeListener("finish",m),o.removeListener("exit",b),o.removeListener("end",S),o.removeListener("error",I),o.removeListener("close",R)}};t.exports=l}),Yn=ae(()=>{te()}),Xn=ae((e,t)=>{te();var r=Gr(),n=Kr(),a=Yn(),s=function(){},l=/^v?\.0/.test(ue.version),o=function(c){return typeof c=="function"},f=function(c){return!l||!a?!1:(c instanceof(a.ReadStream||s)||c instanceof(a.WriteStream||s))&&o(c.close)},d=function(c){return c.setHeader&&o(c.abort)},y=function(c,p,m,S){S=r(S);var b=!1;c.on("close",function(){b=!0}),n(c,{readable:p,writable:m},function(R){if(R)return S(R);b=!0,S()});var I=!1;return function(R){if(!b&&!I){if(I=!0,f(c))return c.close(s);if(d(c))return c.abort();if(o(c.destroy))return c.destroy();S(R||new Error("stream was destroyed"))}}},g=function(c){c()},_=function(c,p){return c.pipe(p)},A=function(){var c=Array.prototype.slice.call(arguments),p=o(c[c.length-1]||s)&&c.pop()||s;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new Error("pump requires two streams per minimum");var m,S=c.map(function(b,I){var R=I<c.length-1,M=I>0;return y(b,R,M,function(E){m||(m=E),E&&S.forEach(g),!R&&(S.forEach(g),p(m))})});return c.reduce(_)};t.exports=A}),Zn=ae((e,t)=>{te(),t.exports=r;function r(a){var s=a._readableState;return s?s.objectMode||typeof a._duplexState=="number"?a.read():a.read(n(s)):null}function n(a){return a.buffer.length?a.buffer.head?a.buffer.head.data.length:a.buffer[0].length:a.length}}),Qn=ae((e,t)=>{te();var r=yt(),n=Kr(),a=tt(),s=Zn(),l=oe.Buffer.from&&oe.Buffer.from!==Uint8Array.from?oe.Buffer.from([0]):new oe.Buffer([0]),o=function(c,p){c._corked?c.once("uncork",p):p()},f=function(c,p){c._autoDestroy&&c.destroy(p)},d=function(c,p){return function(m){m?f(c,m.message==="premature close"?null:m):p&&!c._ended&&c.end()}},y=function(c,p){if(!c||c._writableState&&c._writableState.finished)return p();if(c._writableState)return c.end(p);c.end(),p()},g=function(){},_=function(c){return new r.Readable({objectMode:!0,highWaterMark:16}).wrap(c)},A=function(c,p,m){if(!(this instanceof A))return new A(c,p,m);r.Duplex.call(this,m),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!m||m.autoDestroy!==!1,this._forwardDestroy=!m||m.destroy!==!1,this._forwardEnd=!m||m.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,c&&this.setWritable(c),p&&this.setReadable(p)};a(A,r.Duplex),A.obj=function(c,p,m){return m||(m={}),m.objectMode=!0,m.highWaterMark=16,new A(c,p,m)},A.prototype.cork=function(){++this._corked===1&&this.emit("cork")},A.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},A.prototype.setWritable=function(c){if(this._unwrite&&this._unwrite(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.end();return}var p=this,m=n(c,{writable:!0,readable:!1},d(this,this._forwardEnd)),S=function(){var I=p._ondrain;p._ondrain=null,I&&I()},b=function(){p._writable.removeListener("drain",S),m()};this._unwrite&&ue.nextTick(S),this._writable=c,this._writable.on("drain",S),this._unwrite=b,this.uncork()},A.prototype.setReadable=function(c){if(this._unread&&this._unread(),this.destroyed){c&&c.destroy&&c.destroy();return}if(c===null||c===!1){this.push(null),this.resume();return}var p=this,m=n(c,{writable:!1,readable:!0},d(this)),S=function(){p._forward()},b=function(){p.push(null)},I=function(){p._readable2.removeListener("readable",S),p._readable2.removeListener("end",b),m()};this._drained=!0,this._readable=c,this._readable2=c._readableState?c:_(c),this._readable2.on("readable",S),this._readable2.on("end",b),this._unread=I,this._forward()},A.prototype._read=function(){this._drained=!0,this._forward()},A.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var c;this._drained&&(c=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(c));this._forwarding=!1}},A.prototype.destroy=function(c,p){if(p||(p=g),this.destroyed)return p(null);this.destroyed=!0;var m=this;ue.nextTick(function(){m._destroy(c),p(null)})},A.prototype._destroy=function(c){if(c){var p=this._ondrain;this._ondrain=null,p?p(c):this.emit("error",c)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},A.prototype._write=function(c,p,m){if(!this.destroyed){if(this._corked)return o(this,this._write.bind(this,c,p,m));if(c===l)return this._finish(m);if(!this._writable)return m();this._writable.write(c)===!1?this._ondrain=m:this.destroyed||m()}},A.prototype._finish=function(c){var p=this;this.emit("preend"),o(this,function(){y(p._forwardEnd&&p._writable,function(){p._writableState.prefinished===!1&&(p._writableState.prefinished=!0),p.emit("prefinish"),o(p,c)})})},A.prototype.end=function(c,p,m){return typeof c=="function"?this.end(null,null,c):typeof p=="function"?this.end(c,null,p):(this._ended=!0,c&&this.write(c),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),r.Writable.prototype.end.call(this,m))},t.exports=A}),ei=ae((e,t)=>{te();var r=Xn(),n=tt(),a=Qn(),s=function(o){return o.length?Array.isArray(o[0])?o[0]:Array.prototype.slice.call(o):[]},l=function(o){var f=function(){var d=s(arguments);if(!(this instanceof f))return new f(d);a.call(this,null,null,o),d.length&&this.setPipeline(d)};return n(f,a),f.prototype.setPipeline=function(){var d=s(arguments),y=this,g=!1,_=d[0],A=d[d.length-1];A=A.readable?A:null,_=_.writable?_:null;var c=function(){d[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",c),this.on("prefinish",function(){g||y.cork()}),r(d,function(p){if(y.removeListener("close",c),p)return y.destroy(p.message==="premature close"?null:p);g=!0,y._autoDestroy===!1&&(y._autoDestroy=!0),y.uncork()}),this.destroyed)return c();this.setWritable(_),this.setReadable(A)},f};t.exports=l({autoDestroy:!1,destroy:!1}),t.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),t.exports.ctor=l}),ti=ae(()=>{te()}),Hr=ae((e,t)=>{te(),function(r){typeof define<"u"&&define.amd?define([],function(){return n}):typeof t<"u"&&t.exports?t.exports=n:r.secureRandom=n;function n(l,o){if(o=o||{type:"Array"},typeof ue<"u"&&typeof ue.pid=="number"&&ue.versions&&ue.versions.node)return a(l,o);var f=window.crypto||window.msCrypto;if(!f)throw new Error("Your browser does not support window.crypto.");return s(l,o)}function a(l,o){var f=ti(),d=f.randomBytes(l);switch(o.type){case"Array":return[].slice.call(d);case"Buffer":return d;case"Uint8Array":for(var y=new Uint8Array(l),g=0;g<l;++g)y[g]=d.readUInt8(g);return y;default:throw new Error(o.type+" is unsupported.")}}function s(l,o){var f=new Uint8Array(l),d=window.crypto||window.msCrypto;switch(d.getRandomValues(f),o.type){case"Array":return[].slice.call(f);case"Buffer":try{var y=new oe.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new oe.Buffer(f);case"Uint8Array":return f;default:throw new Error(o.type+" is unsupported.")}}n.randomArray=function(l){return n(l,{type:"Array"})},n.randomUint8Array=function(l){return n(l,{type:"Uint8Array"})},n.randomBuffer=function(l){return n(l,{type:"Buffer"})}}(e)}),Jr=ae((e,t)=>{te(),t.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[n]=s;for(n in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var l=Object.getOwnPropertySymbols(r);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(r,n);if(o.value!==s||o.enumerable!==!0)return!1}return!0}}),Dt=ae((e,t)=>{te();var r=Jr();t.exports=function(){return r()&&!!Symbol.toStringTag}}),ri=ae((e,t)=>{te();var r=typeof Symbol<"u"&&Symbol,n=Jr();t.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),ni=ae((e,t)=>{te();var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";t.exports=function(l){var o=this;if(typeof o!="function"||a.call(o)!==s)throw new TypeError(r+o);for(var f=n.call(arguments,1),d,y=function(){if(this instanceof d){var p=o.apply(this,f.concat(n.call(arguments)));return Object(p)===p?p:this}else return o.apply(l,f.concat(n.call(arguments)))},g=Math.max(0,o.length-f.length),_=[],A=0;A<g;A++)_.push("$"+A);if(d=Function("binder","return function ("+_.join(",")+"){ return binder.apply(this,arguments); }")(y),o.prototype){var c=function(){};c.prototype=o.prototype,d.prototype=new c,c.prototype=null}return d}}),or=ae((e,t)=>{te();var r=ni();t.exports=Function.prototype.bind||r}),ii=ae((e,t)=>{te();var r=or();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}),ar=ae((e,t)=>{te();var r,n=SyntaxError,a=Function,s=TypeError,l=function(N){try{return a('"use strict"; return ('+N+").constructor;")()}catch{}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch{o=null}var f=function(){throw new s},d=o?function(){try{return arguments.callee,f}catch{try{return o(arguments,"callee").get}catch{return f}}}():f,y=ri()(),g=Object.getPrototypeOf||function(N){return N.__proto__},_={},A=typeof Uint8Array>"u"?r:g(Uint8Array),c={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":y?g([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":_,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?g(g([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y?r:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y?r:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?g(""[Symbol.iterator]()):r,"%Symbol%":y?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":A,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},p=function N(F){var Y;if(F==="%AsyncFunction%")Y=l("async function () {}");else if(F==="%GeneratorFunction%")Y=l("function* () {}");else if(F==="%AsyncGeneratorFunction%")Y=l("async function* () {}");else if(F==="%AsyncGenerator%"){var ne=N("%AsyncGeneratorFunction%");ne&&(Y=ne.prototype)}else if(F==="%AsyncIteratorPrototype%"){var ie=N("%AsyncGenerator%");ie&&(Y=g(ie.prototype))}return c[F]=Y,Y},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=or(),b=ii(),I=S.call(Function.call,Array.prototype.concat),R=S.call(Function.apply,Array.prototype.splice),M=S.call(Function.call,String.prototype.replace),E=S.call(Function.call,String.prototype.slice),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,q=function(N){var F=E(N,0,1),Y=E(N,-1);if(F==="%"&&Y!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(Y==="%"&&F!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ne=[];return M(N,k,function(ie,ce,pe,ge){ne[ne.length]=pe?M(ge,L,"$1"):ce||ie}),ne},$=function(N,F){var Y=N,ne;if(b(m,Y)&&(ne=m[Y],Y="%"+ne[0]+"%"),b(c,Y)){var ie=c[Y];if(ie===_&&(ie=p(Y)),typeof ie>"u"&&!F)throw new s("intrinsic "+N+" exists, but is not available. Please file an issue!");return{alias:ne,name:Y,value:ie}}throw new n("intrinsic "+N+" does not exist!")};t.exports=function(N,F){if(typeof N!="string"||N.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof F!="boolean")throw new s('"allowMissing" argument must be a boolean');var Y=q(N),ne=Y.length>0?Y[0]:"",ie=$("%"+ne+"%",F),ce=ie.name,pe=ie.value,ge=!1,fe=ie.alias;fe&&(ne=fe[0],R(Y,I([0,1],fe)));for(var Ee=1,he=!0;Ee<Y.length;Ee+=1){var T=Y[Ee],C=E(T,0,1),z=E(T,-1);if((C==='"'||C==="'"||C==="`"||z==='"'||z==="'"||z==="`")&&C!==z)throw new n("property names with quotes must have matching quotes");if((T==="constructor"||!he)&&(ge=!0),ne+="."+T,ce="%"+ne+"%",b(c,ce))pe=c[ce];else if(pe!=null){if(!(T in pe)){if(!F)throw new s("base intrinsic for "+N+" exists, but the property is not available.");return}if(o&&Ee+1>=Y.length){var re=o(pe,T);he=!!re,he&&"get"in re&&!("originalValue"in re.get)?pe=re.get:pe=pe[T]}else he=b(pe,T),pe=pe[T];he&&!ge&&(c[ce]=pe)}}return pe}}),oi=ae((e,t)=>{te();var r=or(),n=ar(),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||r.call(s,a),o=n("%Object.getOwnPropertyDescriptor%",!0),f=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}t.exports=function(g){var _=l(r,s,arguments);if(o&&f){var A=o(_,"length");A.configurable&&f(_,"length",{value:1+d(0,g.length-(arguments.length-1))})}return _};var y=function(){return l(r,a,arguments)};f?f(t.exports,"apply",{value:y}):t.exports.apply=y}),sr=ae((e,t)=>{te();var r=ar(),n=oi(),a=n(r("String.prototype.indexOf"));t.exports=function(s,l){var o=r(s,!!l);return typeof o=="function"&&a(s,".prototype.")>-1?n(o):o}}),ai=ae((e,t)=>{te();var r=Dt()(),n=sr(),a=n("Object.prototype.toString"),s=function(f){return r&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:a(f)==="[object Arguments]"},l=function(f){return s(f)?!0:f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&a(f)!=="[object Array]"&&a(f.callee)==="[object Function]"},o=function(){return s(arguments)}();s.isLegacyArguments=l,t.exports=o?s:l}),si=ae((e,t)=>{te();var r=Object.prototype.toString,n=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=Dt()(),l=Object.getPrototypeOf,o=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;t.exports=function(d){if(typeof d!="function")return!1;if(a.test(n.call(d)))return!0;if(!s){var y=r.call(d);return y==="[object GeneratorFunction]"}if(!l)return!1;if(typeof f>"u"){var g=o();f=g?l(g):!1}return l(d)===f}}),Yr=ae((e,t)=>{te();var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(a,s,l){if(n.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var o=a.length;if(o===+o)for(var f=0;f<o;f++)s.call(l,a[f],f,a);else for(var d in a)r.call(a,d)&&s.call(l,a[d],d,a)}}),Xr=ae((e,t)=>{te();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?Ye:globalThis;t.exports=function(){for(var a=[],s=0;s<r.length;s++)typeof n[r[s]]=="function"&&(a[a.length]=r[s]);return a}}),Zr=ae((e,t)=>{te();var r=ar(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}t.exports=n}),Qr=ae((e,t)=>{te();var r=Yr(),n=Xr(),a=sr(),s=a("Object.prototype.toString"),l=Dt()(),o=typeof globalThis>"u"?Ye:globalThis,f=n(),d=a("Array.prototype.indexOf",!0)||function(p,m){for(var S=0;S<p.length;S+=1)if(p[S]===m)return S;return-1},y=a("String.prototype.slice"),g={},_=Zr(),A=Object.getPrototypeOf;l&&_&&A&&r(f,function(p){var m=new o[p];if(Symbol.toStringTag in m){var S=A(m),b=_(S,Symbol.toStringTag);if(!b){var I=A(S);b=_(I,Symbol.toStringTag)}g[p]=b.get}});var c=function(p){var m=!1;return r(g,function(S,b){if(!m)try{m=S.call(p)===b}catch{}}),m};t.exports=function(p){if(!p||typeof p!="object")return!1;if(!l||!(Symbol.toStringTag in p)){var m=y(s(p),8,-1);return d(f,m)>-1}return _?c(p):!1}}),li=ae((e,t)=>{te();var r=Yr(),n=Xr(),a=sr(),s=a("Object.prototype.toString"),l=Dt()(),o=typeof globalThis>"u"?Ye:globalThis,f=n(),d=a("String.prototype.slice"),y={},g=Zr(),_=Object.getPrototypeOf;l&&g&&_&&r(f,function(p){if(typeof o[p]=="function"){var m=new o[p];if(Symbol.toStringTag in m){var S=_(m),b=g(S,Symbol.toStringTag);if(!b){var I=_(S);b=g(I,Symbol.toStringTag)}y[p]=b.get}}});var A=function(p){var m=!1;return r(y,function(S,b){if(!m)try{var I=S.call(p);I===b&&(m=I)}catch{}}),m},c=Qr();t.exports=function(p){return c(p)?!l||!(Symbol.toStringTag in p)?d(s(p),8,-1):A(p):!1}}),ui=ae(e=>{te();var t=ai(),r=si(),n=li(),a=Qr();function s(U){return U.call.bind(U)}var l=typeof BigInt<"u",o=typeof Symbol<"u",f=s(Object.prototype.toString),d=s(Number.prototype.valueOf),y=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);l&&(_=s(BigInt.prototype.valueOf));var _;o&&(A=s(Symbol.prototype.valueOf));var A;function c(U,Ne){if(typeof U!="object")return!1;try{return Ne(U),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=a;function p(U){return typeof Promise<"u"&&U instanceof Promise||U!==null&&typeof U=="object"&&typeof U.then=="function"&&typeof U.catch=="function"}e.isPromise=p;function m(U){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(U):a(U)||C(U)}e.isArrayBufferView=m;function S(U){return n(U)==="Uint8Array"}e.isUint8Array=S;function b(U){return n(U)==="Uint8ClampedArray"}e.isUint8ClampedArray=b;function I(U){return n(U)==="Uint16Array"}e.isUint16Array=I;function R(U){return n(U)==="Uint32Array"}e.isUint32Array=R;function M(U){return n(U)==="Int8Array"}e.isInt8Array=M;function E(U){return n(U)==="Int16Array"}e.isInt16Array=E;function k(U){return n(U)==="Int32Array"}e.isInt32Array=k;function L(U){return n(U)==="Float32Array"}e.isFloat32Array=L;function q(U){return n(U)==="Float64Array"}e.isFloat64Array=q;function $(U){return n(U)==="BigInt64Array"}e.isBigInt64Array=$;function N(U){return n(U)==="BigUint64Array"}e.isBigUint64Array=N;function F(U){return f(U)==="[object Map]"}F.working=typeof Map<"u"&&F(new Map);function Y(U){return typeof Map>"u"?!1:F.working?F(U):U instanceof Map}e.isMap=Y;function ne(U){return f(U)==="[object Set]"}ne.working=typeof Set<"u"&&ne(new Set);function ie(U){return typeof Set>"u"?!1:ne.working?ne(U):U instanceof Set}e.isSet=ie;function ce(U){return f(U)==="[object WeakMap]"}ce.working=typeof WeakMap<"u"&&ce(new WeakMap);function pe(U){return typeof WeakMap>"u"?!1:ce.working?ce(U):U instanceof WeakMap}e.isWeakMap=pe;function ge(U){return f(U)==="[object WeakSet]"}ge.working=typeof WeakSet<"u"&&ge(new WeakSet);function fe(U){return ge(U)}e.isWeakSet=fe;function Ee(U){return f(U)==="[object ArrayBuffer]"}Ee.working=typeof ArrayBuffer<"u"&&Ee(new ArrayBuffer);function he(U){return typeof ArrayBuffer>"u"?!1:Ee.working?Ee(U):U instanceof ArrayBuffer}e.isArrayBuffer=he;function T(U){return f(U)==="[object DataView]"}T.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&T(new DataView(new ArrayBuffer(1),0,1));function C(U){return typeof DataView>"u"?!1:T.working?T(U):U instanceof DataView}e.isDataView=C;var z=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function re(U){return f(U)==="[object SharedArrayBuffer]"}function ye(U){return typeof z>"u"?!1:(typeof re.working>"u"&&(re.working=re(new z)),re.working?re(U):U instanceof z)}e.isSharedArrayBuffer=ye;function de(U){return f(U)==="[object AsyncFunction]"}e.isAsyncFunction=de;function O(U){return f(U)==="[object Map Iterator]"}e.isMapIterator=O;function P(U){return f(U)==="[object Set Iterator]"}e.isSetIterator=P;function x(U){return f(U)==="[object Generator]"}e.isGeneratorObject=x;function J(U){return f(U)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=J;function le(U){return c(U,d)}e.isNumberObject=le;function w(U){return c(U,y)}e.isStringObject=w;function v(U){return c(U,g)}e.isBooleanObject=v;function V(U){return l&&c(U,_)}e.isBigIntObject=V;function Q(U){return o&&c(U,A)}e.isSymbolObject=Q;function me(U){return le(U)||w(U)||v(U)||V(U)||Q(U)}e.isBoxedPrimitive=me;function se(U){return typeof Uint8Array<"u"&&(he(U)||ye(U))}e.isAnyArrayBuffer=se,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(U){Object.defineProperty(e,U,{enumerable:!1,value:function(){throw new Error(U+" is not supported in userland")}})})}),fi=ae((e,t)=>{te(),t.exports=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}}),ci=ae(e=>{te();var t=Object.getOwnPropertyDescriptors||function(T){for(var C=Object.keys(T),z={},re=0;re<C.length;re++)z[C[re]]=Object.getOwnPropertyDescriptor(T,C[re]);return z},r=/%[sdj%]/g;e.format=function(T){if(!M(T)){for(var C=[],z=0;z<arguments.length;z++)C.push(l(arguments[z]));return C.join(" ")}for(var z=1,re=arguments,ye=re.length,de=String(T).replace(r,function(x){if(x==="%%")return"%";if(z>=ye)return x;switch(x){case"%s":return String(re[z++]);case"%d":return Number(re[z++]);case"%j":try{return JSON.stringify(re[z++])}catch{return"[Circular]"}default:return x}}),O=re[z];z<ye;O=re[++z])b(O)||!q(O)?de+=" "+O:de+=" "+l(O);return de},e.deprecate=function(T,C){if(typeof ue<"u"&&ue.noDeprecation===!0)return T;if(typeof ue>"u")return function(){return e.deprecate(T,C).apply(this,arguments)};var z=!1;function re(){if(!z){if(ue.throwDeprecation)throw new Error(C);ue.traceDeprecation?console.trace(C):console.error(C),z=!0}return T.apply(this,arguments)}return re};var n={},a=/^$/;ue.env.NODE_DEBUG&&(s=ue.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i"));var s;e.debuglog=function(T){if(T=T.toUpperCase(),!n[T])if(a.test(T)){var C=ue.pid;n[T]=function(){var z=e.format.apply(e,arguments);console.error("%s %d: %s",T,C,z)}}else n[T]=function(){};return n[T]};function l(T,C){var z={seen:[],stylize:f};return arguments.length>=3&&(z.depth=arguments[2]),arguments.length>=4&&(z.colors=arguments[3]),S(C)?z.showHidden=C:C&&e._extend(z,C),k(z.showHidden)&&(z.showHidden=!1),k(z.depth)&&(z.depth=2),k(z.colors)&&(z.colors=!1),k(z.customInspect)&&(z.customInspect=!0),z.colors&&(z.stylize=o),y(z,T,z.depth)}e.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(T,C){var z=l.styles[C];return z?"\x1B["+l.colors[z][0]+"m"+T+"\x1B["+l.colors[z][1]+"m":T}function f(T,C){return T}function d(T){var C={};return T.forEach(function(z,re){C[z]=!0}),C}function y(T,C,z){if(T.customInspect&&C&&F(C.inspect)&&C.inspect!==e.inspect&&!(C.constructor&&C.constructor.prototype===C)){var re=C.inspect(z,T);return M(re)||(re=y(T,re,z)),re}var ye=g(T,C);if(ye)return ye;var de=Object.keys(C),O=d(de);if(T.showHidden&&(de=Object.getOwnPropertyNames(C)),N(C)&&(de.indexOf("message")>=0||de.indexOf("description")>=0))return _(C);if(de.length===0){if(F(C)){var P=C.name?": "+C.name:"";return T.stylize("[Function"+P+"]","special")}if(L(C))return T.stylize(RegExp.prototype.toString.call(C),"regexp");if($(C))return T.stylize(Date.prototype.toString.call(C),"date");if(N(C))return _(C)}var x="",J=!1,le=["{","}"];if(m(C)&&(J=!0,le=["[","]"]),F(C)){var w=C.name?": "+C.name:"";x=" [Function"+w+"]"}if(L(C)&&(x=" "+RegExp.prototype.toString.call(C)),$(C)&&(x=" "+Date.prototype.toUTCString.call(C)),N(C)&&(x=" "+_(C)),de.length===0&&(!J||C.length==0))return le[0]+x+le[1];if(z<0)return L(C)?T.stylize(RegExp.prototype.toString.call(C),"regexp"):T.stylize("[Object]","special");T.seen.push(C);var v;return J?v=A(T,C,z,O,de):v=de.map(function(V){return c(T,C,z,O,V,J)}),T.seen.pop(),p(v,x,le)}function g(T,C){if(k(C))return T.stylize("undefined","undefined");if(M(C)){var z="'"+JSON.stringify(C).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return T.stylize(z,"string")}if(R(C))return T.stylize(""+C,"number");if(S(C))return T.stylize(""+C,"boolean");if(b(C))return T.stylize("null","null")}function _(T){return"["+Error.prototype.toString.call(T)+"]"}function A(T,C,z,re,ye){for(var de=[],O=0,P=C.length;O<P;++O)ge(C,String(O))?de.push(c(T,C,z,re,String(O),!0)):de.push("");return ye.forEach(function(x){x.match(/^\d+$/)||de.push(c(T,C,z,re,x,!0))}),de}function c(T,C,z,re,ye,de){var O,P,x;if(x=Object.getOwnPropertyDescriptor(C,ye)||{value:C[ye]},x.get?x.set?P=T.stylize("[Getter/Setter]","special"):P=T.stylize("[Getter]","special"):x.set&&(P=T.stylize("[Setter]","special")),ge(re,ye)||(O="["+ye+"]"),P||(T.seen.indexOf(x.value)<0?(b(z)?P=y(T,x.value,null):P=y(T,x.value,z-1),P.indexOf(`
`)>-1&&(de?P=P.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):P=`
`+P.split(`
`).map(function(J){return"   "+J}).join(`
`))):P=T.stylize("[Circular]","special")),k(O)){if(de&&ye.match(/^\d+$/))return P;O=JSON.stringify(""+ye),O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=T.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=T.stylize(O,"string"))}return O+": "+P}function p(T,C,z){var re=0,ye=T.reduce(function(de,O){return re++,O.indexOf(`
`)>=0&&re++,de+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ye>60?z[0]+(C===""?"":C+`
 `)+" "+T.join(`,
  `)+" "+z[1]:z[0]+C+" "+T.join(", ")+" "+z[1]}e.types=ui();function m(T){return Array.isArray(T)}e.isArray=m;function S(T){return typeof T=="boolean"}e.isBoolean=S;function b(T){return T===null}e.isNull=b;function I(T){return T==null}e.isNullOrUndefined=I;function R(T){return typeof T=="number"}e.isNumber=R;function M(T){return typeof T=="string"}e.isString=M;function E(T){return typeof T=="symbol"}e.isSymbol=E;function k(T){return T===void 0}e.isUndefined=k;function L(T){return q(T)&&ne(T)==="[object RegExp]"}e.isRegExp=L,e.types.isRegExp=L;function q(T){return typeof T=="object"&&T!==null}e.isObject=q;function $(T){return q(T)&&ne(T)==="[object Date]"}e.isDate=$,e.types.isDate=$;function N(T){return q(T)&&(ne(T)==="[object Error]"||T instanceof Error)}e.isError=N,e.types.isNativeError=N;function F(T){return typeof T=="function"}e.isFunction=F;function Y(T){return T===null||typeof T=="boolean"||typeof T=="number"||typeof T=="string"||typeof T=="symbol"||typeof T>"u"}e.isPrimitive=Y,e.isBuffer=fi();function ne(T){return Object.prototype.toString.call(T)}function ie(T){return T<10?"0"+T.toString(10):T.toString(10)}var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var T=new Date,C=[ie(T.getHours()),ie(T.getMinutes()),ie(T.getSeconds())].join(":");return[T.getDate(),ce[T.getMonth()],C].join(" ")}e.log=function(){console.log("%s - %s",pe(),e.format.apply(e,arguments))},e.inherits=tt(),e._extend=function(T,C){if(!C||!q(C))return T;for(var z=Object.keys(C),re=z.length;re--;)T[z[re]]=C[z[re]];return T};function ge(T,C){return Object.prototype.hasOwnProperty.call(T,C)}var fe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');if(fe&&T[fe]){var C=T[fe];if(typeof C!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(C,fe,{value:C,enumerable:!1,writable:!1,configurable:!0}),C}function C(){for(var z,re,ye=new Promise(function(P,x){z=P,re=x}),de=[],O=0;O<arguments.length;O++)de.push(arguments[O]);de.push(function(P,x){P?re(P):z(x)});try{T.apply(this,de)}catch(P){re(P)}return ye}return Object.setPrototypeOf(C,Object.getPrototypeOf(T)),fe&&Object.defineProperty(C,fe,{value:C,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(C,t(T))},e.promisify.custom=fe;function Ee(T,C){if(!T){var z=new Error("Promise was rejected with a falsy value");z.reason=T,T=z}return C(T)}function he(T){if(typeof T!="function")throw new TypeError('The "original" argument must be of type Function');function C(){for(var z=[],re=0;re<arguments.length;re++)z.push(arguments[re]);var ye=z.pop();if(typeof ye!="function")throw new TypeError("The last argument must be of type Function");var de=this,O=function(){return ye.apply(de,arguments)};T.apply(this,z).then(function(P){ue.nextTick(O.bind(null,null,P))},function(P){ue.nextTick(Ee.bind(null,P,O))})}return Object.setPrototypeOf(C,Object.getPrototypeOf(T)),Object.defineProperties(C,t(T)),C}e.callbackify=he}),hi=ae((e,t)=>{te();var r=yt(),n=ci(),a=r.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,a.call(this,l)}n.inherits(s,a),s.prototype._transform=function(l,o,f){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),f()},t.exports=s});te();te();var en=De(yt(),1),tn=De(ei(),1);te();var rn=De(yt(),1);function nn(e,t){let r=[],n;e.on("data",a=>r.push(a)),e.on("end",()=>{n||(n=!0,t(null,oe.Buffer.concat(r)))}),e.on("error",a=>{n||(n=!0,t(a))})}function on(e){let t;return new rn.Transform({transform(r,n,a){t&&(r=oe.Buffer.concat([t,r]));let s=Math.floor(r.length/e)*e;s?r.length>s?(t=r.slice(s),this.push(r.slice(0,s))):(t=void 0,this.push(r)):t=t?oe.Buffer.concat([t,r]):r,a()},flush(r){t&&this.push(t),r()}})}function di(e,t){let r=[],n=0;return new rn.Transform({transform(a,s,l){r.push(a),n+=a.length,l()},flush(a){t(n);function s(){for(;r.length;)if(!e.write(r.shift()))return e.once("drain",s);e.end(),a()}s()}})}function je(e){let t,r=new Promise((n,a)=>{t=(s,l)=>{s?a(s):n(l)}});return e&&r.then(n=>e(null,n),e),[t,r]}var pi=De(Hr(),1);te();te();var lr=class{constructor(e){this._tables[0][0][0]||this._precompute();let t,r,n,a,s,l=this._tables[0][4],o=this._tables[1],f=e.length,d=1;if(f!==4&&f!==6&&f!==8)throw new Error("invalid aes key size");for(this._key=[a=e.slice(0),s=[]],t=f;t<4*f+28;t++)n=a[t-1],(t%f===0||f===8&&t%f===4)&&(n=l[n>>>24]<<24^l[n>>16&255]<<16^l[n>>8&255]<<8^l[n&255],t%f===0&&(n=n<<8^n>>>24^d<<24,d=d<<1^(d>>7)*283)),a[t]=a[t-f]^n;for(r=0;t;r++,t--)n=a[r&3?t:t-4],t<=4||r<4?s[r]=n:s[r]=o[0][l[n>>>24]]^o[1][l[n>>16&255]]^o[2][l[n>>8&255]]^o[3][l[n&255]]}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){let e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],a,s,l,o=[],f=[],d,y,g,_,A,c;for(a=0;a<256;a++)f[(o[a]=a<<1^(a>>7)*283)^a]=a;for(s=l=0;!r[s];s^=d||1,l=f[l]||1)for(_=l^l<<1^l<<2^l<<3^l<<4,_=_>>8^_&255^99,r[s]=_,n[_]=s,g=o[y=o[d=o[s]]],c=g*16843009^y*65537^d*257^s*16843008,A=o[_]*257^_*16843008,a=0;a<4;a++)e[a][s]=A=A<<24^A>>>8,t[a][_]=c=c<<24^c>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),t[a]=t[a].slice(0)}_crypt(e,t){if(e.length!==4)throw new Error("invalid aes block size");let r=this._key[t],n=e[0]^r[0],a=e[t?3:1]^r[1],s=e[2]^r[2],l=e[t?1:3]^r[3],o,f,d,y=r.length/4-2,g,_=4,A=[0,0,0,0],c=this._tables[t],p=c[0],m=c[1],S=c[2],b=c[3],I=c[4];for(g=0;g<y;g++)o=p[n>>>24]^m[a>>16&255]^S[s>>8&255]^b[l&255]^r[_],f=p[a>>>24]^m[s>>16&255]^S[l>>8&255]^b[n&255]^r[_+1],d=p[s>>>24]^m[l>>16&255]^S[n>>8&255]^b[a&255]^r[_+2],l=p[l>>>24]^m[n>>16&255]^S[a>>8&255]^b[s&255]^r[_+3],_+=4,n=o,a=f,s=d;for(g=0;g<4;g++)A[t?3&-g:g]=I[n>>>24]<<24^I[a>>16&255]<<16^I[s>>8&255]<<8^I[l&255]^r[_++],o=n,n=a,a=s,s=l,l=o;return A}};lr.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function yi(e){let t,r,n,a=[2479122403,2108737444,3518906241,22203222],s=oe.Buffer.alloc(Math.ceil(e.length/4)*4);for(s.set(e,0),n=65536;n--;)for(r=0;r<e.length;r+=16){let o=[0,0,0,0];for(t=0;t<16;t+=4)t+r<e.length&&(o[t/4]=s.readInt32BE(t+r));a=new lr(o).encrypt(a)}let l=oe.Buffer.allocUnsafe(16);for(t=0;t<4;t++)l.writeInt32BE(a[t],t*4);return l}function gi(e,t,r){let n=oe.Buffer.from(t.s,"base64"),a=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:a,hash:{name:s}},l,256)).then(l=>{r(null,oe.Buffer.from(l))}).catch(r)}var qe=class{constructor(e){if(e.length!==16)throw Error("Wrong key length. Key must be 128bit.");let t=[];for(let r=0;r<4;r++)t[r]=e.readInt32BE(r*4);this.aes=new lr(t)}encryptCBC(e){let t=[0,0,0,0],r=Array(4),n,a;for(n=0;n<e.length;n+=16){for(a=0;a<4;a++)r[a]=e.readUInt32BE(n+a*4)^t[a];for(t=this.aes.encrypt(r),a=0;a<4;a++)e.writeInt32BE(t[a],n+a*4)}}decryptCBC(e){let t=[0,0,0,0],r=Array(4),n=Array(4),a,s;for(a=0;a<e.length;a+=16){for(s=0;s<4;s++)r[s]=e.readUInt32BE(a+s*4);for(n=r,r=this.aes.decrypt(r),s=0;s<4;s++)e.writeInt32BE(r[s]^t[s],a+s*4);t=n}}stringhash(e){let t=[0,0,0,0];for(let n=0;n<e.length;n+=4)if(e.length-n<4){let a=e.length-n;t[n/4&3]^=e.readIntBE(n,a)<<(4-a)*8}else t[n/4&3]^=e.readInt32BE(n);for(let n=16384;n--;)t=this.aes.encrypt(t);let r=oe.Buffer.allocUnsafe(8);return r.writeInt32BE(t[0],0),r.writeInt32BE(t[2],4),r}encryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.encrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}decryptECB(e){let t=[];for(let r=0;r<e.length;r+=16)t[0]=e.readInt32BE(r),t[1]=e.readInt32BE(r+4),t[2]=e.readInt32BE(r+8),t[3]=e.readInt32BE(r+12),t=this.aes.decrypt(t),e.writeInt32BE(t[0],r),e.writeInt32BE(t[1],r+4),e.writeInt32BE(t[2],r+8),e.writeInt32BE(t[3],r+12);return e}},an=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=oe.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(r/16)}encrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(oe.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}decrypt(e){for(let t=0;t<e.length;t+=16){let r=this.aes.encryptECB(oe.Buffer.from(this.ctr));for(let n=0;n<16;n++)e[t+n]^=r[n];this.incrementCTR()}return e}incrementCTR(e=1){let t=this.ctr,r=15,n;for(;e!==0;)n=(e+t[r])%256,e=Math.floor((e+t[r])/256),t[r]=n,r-=1,r<0&&(r=15)}},sn=class{constructor(e,t,r=0){this.aes=e,this.nonce=t.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=oe.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let e=oe.Buffer.alloc(16);for(let r=0;r<this.macs.length;r++){for(let n=0;n<16;n++)e[n]^=this.macs[r][n];this.aes.encryptECB(e)}let t=oe.Buffer.allocUnsafe(8);return t.writeInt32BE(e.readInt32BE(0)^e.readInt32BE(4),0),t.writeInt32BE(e.readInt32BE(8)^e.readInt32BE(12),4),t}update(e){for(let t=0;t<e.length;t+=16){for(let r=0;r<16;r++)this.mac[r]^=e[t+r];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(oe.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function $e(e){return typeof e=="string"?ur(e):e}function Re(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ur(e){return oe.Buffer.from(e,"base64")}function it(e){return new qe(ln(e).slice(0,16))}function mi(e,t={}){let r=t.start||0;if(r!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");e=$e(e),e||(e=(0,pi.default)(24)),e instanceof oe.Buffer||(e=oe.Buffer.from(e));let n=new en.Transform({transform(o,f,d){l.update(o);let y=s.encrypt(o);d(null,oe.Buffer.from(y))},flush(o){n.mac=l.condense(),n.key=wi(e,n.mac),o()}});if(e.length!==24)throw Error("Wrong key length. Key must be 192bit.");let a=new qe(e.slice(0,16)),s=new an(a,e.slice(16),r),l=new sn(a,e.slice(16));return n=(0,tn.default)(on(16),n),n}function bi(e,t={}){let r=t.start||0;if(r!==0&&(t.disableVerification=!0),r%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");e=$e(e),e instanceof oe.Buffer||(e=oe.Buffer.from(e));let n=it(e),a=new an(n,e.slice(16),r),s=!t.disableVerification&&new sn(n,e.slice(16)),l=new en.Transform({transform(o,f,d){let y=a.decrypt(o);s&&s.update(y),d(null,oe.Buffer.from(y))},flush(o){if(s&&(l.mac=s.condense()),!t.disableVerification&&!l.mac.equals(e.slice(24))){o(Error("MAC verification failed"));return}o()}});return l=(0,tn.default)(on(16),l),l}function ln(e){let t=oe.Buffer.alloc(32);e.copy(t);for(let r=0;r<16;r++)t.writeUInt8(t.readUInt8(r)^t.readUInt8(16+r,!0),r);return t}function wi(e,t){let r=oe.Buffer.alloc(32);e.copy(r),t.copy(r,24);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n),n);return r}function vi(e,t){if(e.length!==t.length)return!1;let r=e.length,n=0;for(let a=0;a<r;a++)n|=e[a]^t[a];return n===0}te();te();var Ve={},_i=Math.log(2);function kt(e){let t=[];for(;e-- >0;)t[e]=0;return t}function It(e){let t=e.length;if(e[t-1])return e;for(;t>1&&e[t-1]===0;)t--;return e.slice(0,t)}function Ei(e){let t=1,r;return(r=e>>>16)!==0&&(e=r,t+=16),(r=e>>8)!==0&&(e=r,t+=8),(r=e>>4)!==0&&(e=r,t+=4),(r=e>>2)!==0&&(e=r,t+=2),(r=e>>1)!==0&&(e=r,t+=1),t}function un(e,t){let r=e.length,n=t.length;if(r<n)return un(t,e);let a=[],s=0,l=0;for(;l<n;l++)s+=e[l]+t[l],a[l]=s&268435455,s>>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>>=28;return s&&(a[l]=s),a}function xe(e,t){let r=e.length,n=t.length;if(n>r)return[];if(n===r){if(t[n-1]>e[n-1])return[];if(n===1)return[e[0]-t[0]]}let a=[],s=0,l;for(l=0;l<n;l++)s+=e[l]-t[l],a[l]=s&268435455,s>>=28;for(;l<r;l++)s+=e[l],a[l]=s&268435455,s>>=28;return s?[]:It(a)}function Yt(e,t,r,n,a){let s=r&16383,l=r>>14,o=n&16383,f=n>>14,d=l*o+f*s,y=s*o+((d&16383)<<14)+e[t]+a;return e[t]=y&268435455,a=l*f+(d>>14)+(y>>28),a}function Si(e){let t=e.length,r=2*t,n=kt(r),a=0,s,l;for(s=0;s<t;s++){for(a=Yt(n,2*s,e[s],e[s],0),l=s+1;l<t;l++)a=Yt(n,s+l,2*e[l],e[s],a);n[s+t]=a}return It(n)}function Je(e,t){let r=e.length,n=t.length,a=kt(r+n-1),s,l,o;for(l=0;l<n;l++){for(s=0,o=0;o<r;o++)s=Yt(a,l+o,e[o],t[l],s);a[l+r]=s}return It(a)}function bt(e,t,r){let n=0;for(;t>=0&&r-- >0;)n=n*268435456+e[t--];return n}function fn(e,t){let r=e.length-1,n=t.length-1,a=r-n,s,l,o,f;if(r<n||r===n&&(e[r]<t[r]||r>0&&e[r]===t[r]&&e[r-1]<t[r-1]))return Ve.q=[0],Ve.mod=e,Ve;if(r===n&&bt(e,n,2)/bt(t,n,2)<4){for(s=e.concat(),l=0;o=xe(s,t),o.length!==0;)s=o,l++;return Ve.q=[l],Ve.mod=s,Ve}let d=Math.floor(Math.log(t[n])/_i)+1,y=28-d;s=e.concat();let g=t.concat();if(y){for(f=n;f>0;f--)g[f]=g[f]<<y&268435455|g[f-1]>>d;for(g[0]=g[0]<<y&268435455,s[r]&(268435455<<d&268435455)&&(s[++r]=0,a++),f=r;f>0;f--)s[f]=s[f]<<y&268435455|s[f-1]>>d;s[0]=s[0]<<y&268435455}let _,A=kt(a+1),c=kt(a).concat(g);for(;_=xe(s,c),_.length!==0;)A[a]++,s=_;let p=g[n],m=bt(g,n,2),S;for(f=r;f>n;f--){S=f-n-1,f>=s.length?A[S]=1:s[f]===p?A[S]=268435455:A[S]=Math.floor(bt(s,f,2)/p);let b=bt(s,f,3);for(;A[S]*m>b;)A[S]--;c=c.slice(1),_=xe(s,Je([A[S]],c)),_.length===0&&(A[S]--,_=xe(s,Je([A[S]],c))),s=_}if(y){for(f=0;f<s.length-1;f++)s[f]=s[f]>>y|s[f+1]<<d&268435455;s[s.length-1]>>=y}return Ve.q=It(A),Ve.mod=It(s),Ve}function Ai(e,t){let r=0,n;for(let a=e.length-1;a>=0;a--)n=e[a],r=((n>>14)+(r<<14))%t,r=((n&16383)+(r<<14))%t;return r}function lt(e,t){if(t.length===1){if(e.length===1)return[e[0]%t[0]];if(t[0]<16383)return[Ai(e,t[0])]}return fn(e,t).mod}function _t(e,t,r){let n=e.length-(t.length<<1);if(n>0)return _t(e.slice(0,n).concat(_t(e.slice(n),t,r)),t,r);let a=t.length+1,s=t.length-1,l,o=Je(e.slice(s),r).slice(a),f=e.slice(0,a),d=Je(o,t).slice(0,a),y=xe(f,d);y.length===0&&(f[a]=1,y=xe(f,d));for(let g=0;l=xe(y,t),l.length!==0;g++)if(y=l,g>=3)return _t(y,t,r);return y}function gr(e,t,r){let n=e.concat(),a=t.length-1,s=r.length*2,l=kt(s+1);for(l[s]=1,l=fn(l,r).q,s=Ei(t[a])-2;a>=0;a--){for(;s>=0;s-=1)n=_t(Si(n),r,l),t[a]&1<<s&&(n=_t(Je(n,e),r,l));s=28-1}return n}function ki(e,t,r,n,a){let s=gr(lt(e,r),lt(t,xe(r,[1])),r),l=gr(lt(e,n),lt(t,xe(n,[1])),n),o=xe(l,s);return o.length===0?(o=xe(s,l),o=lt(Je(o,a),n),o=xe(n,o)):o=lt(Je(o,a),n),un(Je(o,r),s)}function cn(e){let t=1,r=[0],n=0,a=256,s=e.length,l;if(s<2)return 0;let o=(s-2)*8,f=e.charCodeAt(0)*256+e.charCodeAt(1);if(f>o||f<o-8)return 0;for(let d=0;d<o;d++)(a<<=1)>255&&(a=1,l=e.charCodeAt(--s)),t>268435455&&(t=1,r[++n]=0),l&a&&(r[n]|=t),t<<=1;return r}function Ii(e){let t=1,r=0,n=[0],a=1,s=0,l=e.length*28,o="",f;for(f=0;f<l;f++)e[r]&t&&(n[s]|=a),(a<<=1)>255&&(a=1,n[++s]=0),(t<<=1)>268435455&&(t=1,r++);for(;s>=0&&n[s]===0;)s--;for(f=0;f<=s;f++)o=String.fromCharCode(n[f])+o;return o}function Bi(e){let t=[];for(let r=0;r<4;r++){let n=(e[0]*256+e[1]+7>>3)+2;if(t[r]=cn(e.toString("binary").substr(0,n)),typeof t[r]=="number"){if(r!==4||e.length>=16)return!1;break}e=e.slice(n)}return t}function Oi(e,t){let r=cn(e.toString("binary")),n=Ii(ki(r,t[2],t[0],t[1],t[3]));return oe.Buffer.from(n,"binary")}te();var Ri=De(Ot(),1);te();var Ti=null;te();var Li=globalThis.fetch,Pi=Li;te();var ji=globalThis.AbortController||Ti,Xt=ji,Zt=4,mr={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+Zt+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},Mi="https://g.api.mega.co.nz/",Ui=null,Ni=null,wt=class extends Ri.EventEmitter{constructor(e,t={}){super(),this.keepalive=e,this.counterId=Math.random().toString().substr(2,10),this.gateway=t.gateway||Mi;let r="1.0.6";this.userAgent=t.userAgent===null?null:`${t.userAgent||""} megajs/${r}`.trim(),this.httpAgent=t.httpAgent||Ui,this.httpsAgent=t.httpsAgent||Ni,this.fetch=t.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(e,t){return t||(t={}),t.agent||(t.agent=r=>r.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(t.headers||(t.headers={}),t.headers["user-agent"]||(t.headers["user-agent"]=this.userAgent)),Pi(e,t)}request(e,t,r=0){let n=e.a==="sml";if(this.closed&&!n)throw Error("API is closed");let[a,s]=je(t),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof e._querystring=="object"&&(Object.assign(l,e._querystring),delete e._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])}).then(br).then(o=>{if(this.closed&&!n)return;if(!o)return a(Error("Empty response"));o.length&&(o=o[0]);let f;if(typeof o=="number"&&o<0){if(o===-3&&r<Zt)return setTimeout(()=>{this.request(e,a,r+1)},Math.pow(2,r+1)*1e3);f=Error(mr[-o])}else this.keepalive&&o&&o.sn&&this.pull(o.sn);a(f,o)}).catch(o=>{a(o)}),s}pull(e,t=0){let r=new Xt;this.sn=r,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:e,sid:this.sid})}`,{method:"POST",signal:r.signal}).then(br).then(n=>{if(this.sn=void 0,!this.closed){if(typeof n=="number"&&n<0){if(n===-3&&t<Zt)return setTimeout(()=>{this.pull(e,t+1)},Math.pow(2,t+1)*1e3);this.emit("error",Error(mr[-n]))}n.w?this.wait(n.w,e):n.sn&&(n.a&&this.emit("sc",n.a),this.pull(n.sn))}}).catch(Ci).catch(n=>{this.emit("error",n)})}wait(e,t){let r=new Xt;this.sn=r,this.fetch(e,{method:"POST",signal:r.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(t)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return wt.globalApi||(wt.globalApi=new wt),wt.globalApi}};function br(e){if(e.statusText==="Server Too Busy")return-3;if(!e.ok)throw Error(`Server returned error: ${e.statusText}`);return e.json()}function Ci(e){if(e.name!=="AbortError")throw e}var Nt=wt,xi=De(Ot(),1);te();te();var Di=De(Ot(),1),Fi=De(yt(),1),$i=De(hi(),1),nt=class extends Di.EventEmitter{constructor(e){if(super(),this.checkConstructorArgument(e.downloadId),this.checkConstructorArgument(e.key),this.checkConstructorArgument(e.loadedFile),this.downloadId=e.downloadId,this.key=e.key?$e(e.key):null,this.type=e.directory?1:0,this.directory=!!e.directory,this.api=e.api||Nt.getGlobalApi(),!(this.api instanceof Nt))throw Error("api must be a instance of API");this.loadedFile=e.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(e){if(typeof e=="string"&&!/^[\w-]+$/.test(e))throw Error(`Invalid argument: "${e}"`)}loadMetadata(e,t){if(this.size=t.s||0,this.timestamp=t.ts||0,this.type=t.t,this.directory=!!t.t,this.owner=t.u,this.name=null,!e||!t.k)return;let r=t.k.split(":");this.key=$e(r[r.length-1]),e.decryptECB(this.key),t.a&&this.decryptAttributes(t.a)}decryptAttributes(e){if(!this.key)return this;e=ur(e),it(this.key).decryptCBC(e);let t=nt.unpackAttributes(e);t&&this.parseAttributes(t)}parseAttributes(e){this.attributes=e,this.name=e.n,this.label=hn[e.lbl||0],this.favorited=!!e.fav}loadAttributes(e){let[t,r]=je(e),n=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(n,(a,s)=>{if(a)return t(a);if(this.directory){let l=Object.create(null),o=s.f,f=o.find(y=>y.k&&y.h===y.k.split(":")[0]),d=this.key?new qe(this.key):null;this.nodeId=f.h,this.timestamp=f.ts,l[f.h]=this;for(let y of o){if(y===f)continue;let g=new nt(y,this.storage);g.loadMetadata(d,y),g.downloadId=[this.downloadId,y.h],l[y.h]=g}for(let y of o){let g=l[y.p];if(g){let _=l[y.h];g.children||(g.children=[]),g.children.push(_),_.parent=g}}if(this.loadMetadata(d,f),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let y=l[this.loadedFile];typeof y>"u"?t(Error("Node (file or folder) not found in folder")):t(null,y)}else t(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return t(Error("Attributes could not be decrypted with provided key."));t(null,this)}}),r}download(e,t){var c;typeof e=="function"&&(t=e,e={}),e||(e={});let r=e.start||0,n=e.returnCiphertext?r:r-r%16,a=e.end||null,s=e.maxConnections||4,l=e.initialChunkSize||128*1024,o=e.chunkSizeIncrement||128*1024,f=e.maxChunkSize||1024*1024,d=(c=e.forceHttps)==null||c?2:0,y={a:"g",g:1,ssl:d};if(this.nodeId?y.n=this.nodeId:Array.isArray(this.downloadId)?(y._querystring={n:this.downloadId[0]},y.n=this.downloadId[1]):y.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!e.returnCiphertext)throw Error("Can't download: key isn't defined");let g=this.key&&!e.returnCiphertext?bi(this.key,{start:n,disableVerification:n!==0||a!==null}):new Fi.PassThrough,_=n===r?g:g.pipe(new $i.default({skip:r-n})),A=e.handleRetries||nt.defaultHandleRetries;return this.api.request(y,(p,m)=>{if(p)return _.emit("error",p);if(typeof m.g!="string"||m.g.substr(0,4)!=="http")return _.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(m.s===0)return _.end();if(a||(a=m.s-1),r>a)return _.emit("error",Error("You can't download past the end of the file."));function S(F){if(F.status!==200){if(F.status===509){let Y=F.headers.get("x-mega-time-left"),ne=Error("Bandwidth limit reached: "+Y+" seconds until it resets");ne.timeLimit=Y,_.emit("error",ne);return}_.emit("error",Error("MEGA returned a "+F.status+" status code"))}}function b(F){_.emit("error",F)}let I=0;if(_.on("data",F=>{I+=F.length,_.emit("progress",{bytesLoaded:I,bytesTotal:m.s})}),s===1){let F=new Xt;_.on("close",()=>{F.abort()}),this.api.fetch(m.g+"/"+n+"-"+a,{signal:F.signal}).then(Y=>{S(Y);let ne=Y.body;if(ne)if(ne.pipe)Y.body.pipe(g);else if(ne.getReader){let ie=ne.getReader(),ce=({done:pe,value:ge})=>{if(pe)g.end();else return g.write(ge),ie.read().then(ce)};ie.read().then(ce)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(b);return}let R={},M=0,E=0,k=!1,L=n,q=l;_.on("error",()=>{k=!0}),_.on("close",()=>{k=!0});let $=()=>{if(L>a){k=!0,M===E&&g.end();return}let F=L,Y=Math.min(a,F+q-1),ne=M++,ie=0,ce=()=>{ie++,this.api.fetch(m.g+"/"+F+"-"+Y).then(pe=>(S(pe),pe.arrayBuffer())).then(pe=>{let ge=oe.Buffer.from(pe);R[ne]=ge,E===ne&&N()},pe=>{A(ie,pe,ge=>{ge?b(ge):ce()})})};ce(),L=Y+1,q<f&&(q=q+o)},N=()=>{let F;for(;;){let Y=R[E];if(!Y||(F=!g.write(Y),delete R[E],E++,F))break}k&&M===E&&g.end(),F?g.once("drain",N):$()};for(let F=0;F<s;F++)$()}),t&&nn(_,t),_}downloadBuffer(e,t){let[r,n]=je(t);return this.download(e,r),n}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1});let[r,n]=je(t);typeof e=="boolean"&&(e={noKey:e});let a=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!e.noKey&&this.key&&(a+=`#${Re(this.key)}`),!e.noKey&&this.loadedFile&&(a+=`/file/${this.loadedFile}`),r(null,a),n}static fromURL(e,t={}){if(typeof e=="object")return new nt(e);let r=new URL(e);if(r.hostname!=="mega.nz"&&r.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!r.hash)throw Error("Invalid URL: no hash");if(r.pathname.match(/\/(file|folder)\//)!==null){let n=r.hash.substr(1).split("/file/"),a=r.pathname.substring(r.pathname.lastIndexOf("/")+1,r.pathname.length+1),s=n[0];if(a&&!s||!a&&s)throw Error("Invalid URL: too few arguments");return new nt({downloadId:a,key:s,directory:r.pathname.indexOf("/folder/")>=0,loadedFile:n[1],...t})}else{let n=r.hash.split("!");if(n[0]!=="#"&&n[0]!=="#F")throw Error("Invalid URL: format not recognized");if(n.length<=1)throw Error("Invalid URL: too few arguments");if(n.length>=(n[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new nt({downloadId:n[1],key:n[2],directory:n[0]==="#F",loadedFile:n[3],...t})}}static unpackAttributes(e){let t=0;for(;t<e.length&&e.readUInt8(t);)t++;if(e=e.slice(0,t).toString(),e.substr(0,6)==='MEGA{"')try{return JSON.parse(e.substr(4))}catch{}}static defaultHandleRetries(e,t,r){e>8?r(t):setTimeout(r,1e3*Math.pow(2,e))}},hn=["","red","orange","yellow","green","blue","purple","grey"],ze=nt,qt=De(Hr(),1),wr=De(yt(),1),vr={},vt=class extends ze{constructor(e,t){if(super(e),this.storage=t,this.api=t.api,this.nodeId=e.h,this.timestamp=e.ts,this.type=e.t,this.directory=!!this.type,e.k){let r=e.k.split("/"),n=t.aes;for(let a of r){let s=a.split(":")[0];if(s===t.user){e.k=a;break}let l=t.shareKeys[s];if(l){e.k=a,n=vr[s],n||(n=vr[s]=new qe(l));break}}this.loadMetadata(n,e)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(e,t){if(!this.directory)throw Error("node isn't a directory");let[r,n]=je(t);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("file name is required");if(e.target||(e.target=this),e.key||(e.key=oe.Buffer.from((0,qt.default)(16))),e.key.length!==16)throw Error("wrong key length, must be 128bit");let a=e.key,s=vt.packAttributes(e.attributes);it(a).encryptCBC(s);let l=oe.Buffer.from(a);this.storage.aes.encryptECB(l);let o={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[{h:"xxxxxxxx",t:1,a:Re(s),k:Re(l)}]},f=Et(this.storage.shareKeys,this);return f.length>0&&(o.cr=Lt(this.storage,[{nodeId:"xxxxxxxx",key:a}],f)),this.api.request(o,(d,y)=>{if(d)return r(d);let g=this.storage._importFile(y.f[0]);this.storage.emit("add",g),r(null,g)}),n}upload(e,t,r){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof t=="function"&&([r,t]=[t,null]);let[n,a]=je(r);if(typeof e=="string"&&(e={name:e}),e.attributes||(e.attributes={}),e.name&&(e.attributes.n=e.name),!e.attributes.n)throw Error("File name is required.");if(!(typeof e.size=="number"&&e.size>=0)&&!(t&&typeof t.pipe!="function"&&typeof t.length=="number")&&!e.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");e.target||(e.target=this);let s,l=$e(e.key);l||(l=(0,qt.default)(24)),l instanceof oe.Buffer||(l=oe.Buffer.from(l));let o=e.uploadCiphertext?32:24;if(l.length!==o)throw Error("Wrong key length. Key must be 192bit");e.uploadCiphertext&&(s=l,l=ln(l).slice(0,24)),e.key=l;let f=[],d=(_,A,c,p)=>{if(_)return g(_);if(!c||c.length===0){g(Error("Server returned a invalid response while uploading"));return}let m=Number(c.toString());if(m<0){g(Error("Server returned error "+m+" while uploading"));return}if(f[A]=c,A===0&&!s&&(s=p.key),e.thumbnailImage&&!f[1]||e.previewImage&&!f[2]||!f[0])return;let S=vt.packAttributes(e.attributes);it(s).encryptCBC(S);let b=oe.Buffer.from(s);this.storage.aes.encryptECB(b);let I={h:Re(f[0]),t:0,a:Re(S),k:Re(b)};f.length!==1&&(I.fa=f.slice(1).map((E,k)=>k+"*"+Re(E)).filter(E=>E).join("/"));let R={a:"p",t:e.target.nodeId?e.target.nodeId:e.target,n:[I]},M=Et(this.storage.shareKeys,this);M.length>0&&(R.cr=Lt(this.storage,[{nodeId:I.h,key:s}],M)),this.api.request(R,(E,k)=>{if(E)return g(E);let L=this.storage._importFile(k.f[0]);this.storage.emit("add",L),y.emit("complete",L),n&&n(null,L)})};e.thumbnailImage&&this._uploadAttribute(e,e.thumbnailImage,1,d),e.previewImage&&this._uploadAttribute(e,e.previewImage,2,d);let y=this._upload(e,t,0,d);function g(_){y.listenerCount("error")?y.emit("error",_):n(_)}return y.complete=a,y}_upload(e,t,r,n){let a=e.uploadCiphertext?new wr.PassThrough:mi(e.key),s=a,l=e.size;return t&&typeof t.pipe!="function"&&(l=t.length,s.end(t)),l!=null?(l===0&&a.end(),this._uploadWithSize(s,l,a,r,e,n)):s=di(s,o=>{this._uploadWithSize(s,o,a,r,e,n)}),t&&typeof t.pipe=="function"&&t.pipe(s),s}_uploadAttribute(e,t,r,n){let a=(s,l)=>{if(s)return n(s);let o=l.length,f=Math.ceil(o/16)*16-o;f!==0&&(l=oe.Buffer.concat([l,oe.Buffer.alloc(f)])),(e.handle?it(e.key):new qe(e.key.slice(0,16))).encryptCBC(l);let d=new wr.PassThrough;d.end(l),this._uploadWithSize(d,l.length,d,r,e,n)};if(t instanceof oe.Buffer){a(null,t);return}nn(t,a)}_uploadWithSize(e,t,r,n,a,s){var $;let l=($=a.forceHttps)==null||$?2:0,o=n===0?{a:"u",ssl:l,s:t,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:t};a.handle&&(o.h=a.handle);let f=n===0?a.initialChunkSize||128*1024:t,d=a.chunkSizeIncrement||128*1024,y=a.maxChunkSize||1024*1024,g=a.maxConnections||4,_=a.handleRetries||ze.defaultHandleRetries,A=f,c=0,p=!1,m=0,S,b,I,R,M,E=()=>{R=Math.min(A,t-m),b=oe.Buffer.alloc(R),c++,A<y&&(A+=d),M=0,S&&(S.copy(b),M=Math.min(S.length,R),S=S.length>R?S.slice(R):null),M===R?k():(p=!0,q())},k=()=>{let N=m,F=b,Y=0,ne=()=>{Y++,this.api.fetch(I+"/"+(n===0?N:n-1),{method:"POST",body:F,headers:{"content-length":F.length}}).then(ie=>{if(ie.status!==200)throw Error("MEGA returned a "+ie.status+" status code");return ie.arrayBuffer()}).then(ie=>{let ce=oe.Buffer.from(ie);ce.length>0?(r.end(),ue.nextTick(()=>{s(null,n,ce,r)})):m<t&&!p&&E()},ie=>{_(Y,ie,ce=>{ce?e.emit("error",ce):ne()})})};ne(),b=null,m+=R,m<t&&!p&&c<g&&E()},L=0,q=()=>{for(;;){let N=r.read();if(N===null){r.once("readable",q);break}if(L+=N.length,e.emit("progress",{bytesLoaded:L,bytesTotal:t}),N.copy(b,M),M+=N.length,M>=R){p=!1,S=N.slice(N.length-(M-R)),k();break}}};r.on("end",()=>{t&&L!==t&&e.emit("error",Error("Specified data size does not match: "+t+" !== "+L))}),this.api.request(o,(N,F)=>{if(N)return s(N);I=F.p,E()})}uploadAttribute(e,t,r){let[n,a]=je(r);if(typeof e=="string"&&(e=["thumbnail","preview"].indexOf(e)),e!==0&&e!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},t,e+1,(s,l,o,f)=>{if(s)return n(s);let d={a:"pfa",n:this.nodeId,fa:e+"*"+Re(o)};this.api.request(d,(y,g)=>{if(y)return n(y);n(null,this)})}),a}delete(e,t){return typeof e=="function"&&(t=e,e=void 0),typeof e>"u"&&(e=this.parent===this.storage.trash),e?this.api.request({a:"d",n:this.nodeId},t):this.moveTo(this.storage.trash,t)}moveTo(e,t){if(typeof e=="string"&&(e=this.storage.files[e]),!(e instanceof ze))throw Error("target must be a folder or a nodeId");let r={a:"m",n:this.nodeId,t:e.nodeId},n=Et(this.storage.shareKeys,e);return n.length>0&&(r.cr=Lt(this.storage,[this],n)),this.api.request(r,t)}setAttributes(e,t){let[r,n]=je(t);Object.assign(this.attributes,e);let a=vt.packAttributes(this.attributes);return it(this.key).encryptCBC(a),this.api.request({a:"a",n:this.nodeId,at:Re(a)},s=>{this.parseAttributes(this.attributes),r(s)}),n}rename(e,t){return this.setAttributes({n:e},t)}setLabel(e,t){if(typeof e=="string"&&(e=hn.indexOf(e)),typeof e!="number"||Math.floor(e)!==e||e<0||e>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:e},t)}setFavorite(e,t){return this.setAttributes({fav:e?1:0},t)}link(e,t){arguments.length===1&&typeof e=="function"&&(t=e,e={noKey:!1}),typeof e=="boolean"&&(e={noKey:e}),e||(e={});let r=e.__folderKey;if(this.directory&&!r)return this.shareFolder(e,t);let[n,a]=je(t);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return n(s);let o=`https://mega.nz/${r?"folder":"file"}/${l}`;!e.noKey&&this.key&&(o+=`#${Re(r||this.key)}`),n(null,o)}),a}shareFolder(e,t){if(!this.directory)throw Error("node isn't a folder");let r=this.nodeId,n=this.storage.shareKeys[r];if(n)return this.link(Object.assign({__folderKey:n},e),t);let a=$e(e.key);a||(a=(0,qt.default)(16)),a instanceof oe.Buffer||(a=oe.Buffer.from(a));let[s,l]=je(t);if(a.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[r]=a;let o=oe.Buffer.from(r+r);this.storage.aes.encryptECB(o);let f={a:"s2",n:r,s:[{u:"EXP",r:0}],ok:Re(this.storage.aes.encryptECB(oe.Buffer.from(a))),ha:Re(o),cr:Lt(this.storage,this)};return this.api.request(f,d=>{if(d)return s(d);this.link(Object.assign({__folderKey:a},e),s)}),l}unshare(e){return this.directory?this.unshareFolder(e):this.api.request({a:"l",n:this.nodeId,d:1},e)}unshareFolder(e){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},e)}importFile(e,t){let[r,n]=je(t);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof e=="string"&&(e=ze.fromURL(e)),!(e instanceof ze))throw Error("First argument of importFile should be a File or a URL string");if(!e.key)return r(Error("Can't import files without encryption keys")),n;let a=(s,l)=>{if(s)return r(s);let o=vt.packAttributes(l.attributes);it(l.key).encryptCBC(o);let f=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,d={a:"p",t:this.nodeId,n:[{ph:f,t:0,a:Re(o),k:Re(this.storage.aes.encryptECB(l.key))}]};this.api.request(d,(y,g)=>{if(y)return r(y);let _=this.storage._importFile(g.f[0]);this.storage.emit("add",_),r(null,_)})};return e.attributes?a(null,e):e.loadAttributes(a),n}static packAttributes(e){let t=JSON.stringify(e);t=oe.Buffer.from(`MEGA${t}`);let r=oe.Buffer.alloc(Math.ceil(t.length/16)*16);return t.copy(r),r}};function Lt(e,t,r){let n=e.shareKeys;Array.isArray(t)||(t=dn(t)),r||(r=t.map(s=>Et(n,s)).reduce((s,l)=>s.concat(l)).filter((s,l,o)=>l===o.indexOf(s)));let a=[r,t.map(s=>s.nodeId),[]];for(let s=r.length;s--;){let l=new qe(n[r[s]]);for(let o=t.length;o--;){let f=oe.Buffer.from(t[o].key);f&&(f.length===32||f.length===16)&&a[2].push(s,o,Re(l.encryptECB(f)))}}return a}function dn(e){return[e].concat((e.children||[]).map(dn).reduce((t,r)=>t.concat(r),[]))}function Et(e,t){let r=t.nodeId,n=t.parent,a=[];return e[r]&&a.push(r),n?a.concat(Et(e,n)):a}var Wi=vt,qi=class extends xi.EventEmitter{constructor(e,t){super(),arguments.length===1&&typeof e=="function"&&(t=e,e={});let[r,n]=je(t);this.ready=n,e.keepalive=e.keepalive===void 0?!0:!!e.keepalive,e.autoload=e.autoload===void 0?!0:!!e.autoload,e.autologin=e.autologin===void 0?!0:!!e.autologin,this.api=new Nt(e.keepalive,e),this.files={},this.options=e,this.status="closed",e.autologin?this.login(r):ue.nextTick(()=>{r(null,this)})}login(e){let[t,r]=je(e);if(typeof this.options.email!="string")return ue.nextTick(()=>{t(Error("starting a session without credentials isn't supported"))}),r;let n=()=>{this.status="ready",t(null,this),this.emit("ready",this)},a=f=>{this.api.request({a:"ug"},(d,y)=>{if(d)return f(d);this.name=y.name,this.user=y.u,this.options.autoload?this.reload(!0,g=>{if(g)return f(g);n()}):n()})};this.email=this.options.email.toLowerCase();let s=f=>{let d=yi(oe.Buffer.from(this.options.password));delete this.options.password;let y=new qe(d),g=Re(y.stringhash(oe.Buffer.from(this.email))),_={a:"us",user:this.email,uh:g};o(_,y,f)},l=(f,d)=>{gi(oe.Buffer.from(this.options.password),f,(y,g)=>{if(y)return d(y);delete this.options.password;let _=new qe(g.slice(0,16)),A=Re(g.slice(16)),c={a:"us",user:this.email,uh:A};o(c,_,d)})},o=(f,d,y)=>{this.api.request(f,(g,_)=>{if(g)return y(g);this.key=$e(_.k),d.decryptECB(this.key),this.aes=new qe(this.key);let A=$e(_.csid),c=this.aes.decryptECB($e(_.privk)),p=Bi(c);if(!p)throw Error("invalid credentials");let m=Re(Oi(A,p).slice(0,43));this.api.sid=this.sid=m,this.RSAPrivateKey=p,a(y)})};return this.api.request({a:"us0",user:this.email},(f,d)=>{if(f)return t(f);if(d.v===1)return s(t);if(d.v===2)return l(d,t);t(Error("Account version not supported"))}),this.status="connecting",r}reload(e,t){typeof e=="function"&&([e,t]=[t,e]);let[r,n]=je(t);return this.status==="connecting"&&!e?(this.once("ready",()=>{this.reload(e,r)}),n):(this.mounts=[],this.api.request({a:"f",c:1},(a,s)=>{if(a)return r(a);this.shareKeys=s.ok.reduce((l,o)=>{let f=o.h,d=this.aes.encryptECB(oe.Buffer.from(f+f));return vi($e(o.ha),d)&&(l[f]=this.aes.decryptECB($e(o.k))),l},{}),s.f.forEach(l=>{var o;l=this._importFile(l),s.ph!==void 0&&(l.shareId=(o=s.ph.find(f=>f.h===l.nodeId))==null?void 0:o.ph,l.shared=!!l.shareId,l.shared&&(l.shareURL=`https://mega.nz/${l.directory?"folder":"file"}/${l.shareId}`,l.key&&(l.shareURL+=`#${Re(l.directory?this.shareKeys[l.nodeId]:l.key)}`)))}),r(null,this.mounts)}),this.api.on("sc",a=>{let s={};a.forEach(l=>{if(l.a==="u"){let o=this.files[l.n];o&&(o.timestamp=l.ts,o.decryptAttributes(l.at),o.emit("update"),this.emit("update",o))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(o=>{let f=this.files[o.h];if(f){delete s[o.h];let d=f.parent;if(d.nodeId===o.p)return;d.children.splice(d.children.indexOf(f),1),f.parent=this.files[o.p],f.parent.children||(f.parent.children=[]),f.parent.children.push(f),f.emit("move",d),this.emit("move",f,d)}else this.emit("add",this._importFile(o))})}),Object.keys(s).forEach(l=>{let o=this.files[l],f=o.parent;f.children.splice(f.children.indexOf(o),1),this.emit("delete",o),o.emit("delete")})}),n)}_importFile(e){if(!this.files[e.h]){let t=this.files[e.h]=new Wi(e,this);if(e.t===Vi&&(this.root=t,t.name="Cloud Drive"),e.t===Gi&&(this.trash=t,t.name="Rubbish Bin"),e.t===zi&&(this.inbox=t,t.name="Inbox"),e.t>1&&this.mounts.push(t),e.p){let r=this.files[e.p];r&&(r.children||(r.children=[]),r.children.push(t),t.parent=r)}}return this.files[e.h]}mkdir(e,t){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(e,t)}upload(e,t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(e,t,r)}close(e){return this.status="closed",this.api.close(),this.api.request({a:"sml"},e)}getAccountInfo(e){let[t,r]=je(e);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(n,a)=>{n&&t(n);let s={};s.type=a.utype,s.spaceUsed=a.cstrg,s.spaceTotal=a.mstrg,s.downloadBandwidthTotal=a.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=a.caxfer||0,s.sharedBandwidthUsed=a.csxfer||0,s.sharedBandwidthLimit=a.srvratio,t(null,s)}),r}toJSON(){return{key:Re(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(e){let t=new qi(Object.assign(e.options,{autoload:!1,autologin:!1}));return t.key=ur(e.key),t.aes=new qe(t.key),t.api.sid=t.sid=e.sid,t.name=e.name,t.user=e.user,t}},Vi=2,zi=3,Gi=4;ze.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */async function rt(){return await Rn("music",2,{upgrade(e,t,r,n,a){t<1&&(e.createObjectStore("album",{keyPath:"folderName"}),e.createObjectStore("image",{keyPath:"id"}),e.createObjectStore("song",{keyPath:"id"})),e.createObjectStore("albumFolder")}})}async function Ki(){var s,l,o;const e=await rt(),t=await e.getAll("album"),r=(s=await e.get("albumFolder","german"))!=null?s:[],n=(l=await e.get("albumFolder","russian"))!=null?l:[],a=(o=await e.get("albumFolder","instrumental"))!=null?o:[];return e.close(),{german:t.filter(f=>r.includes(f.folderName)),russian:t.filter(f=>n.includes(f.folderName)),instrumental:t.filter(f=>a.includes(f.folderName))}}async function Hi(e){const t=await rt(),r=t.transaction(["album","albumFolder"],"readwrite"),n=r.objectStore("albumFolder");n.clear(),n.put(e.german.map(l=>l.folderName),"german"),n.put(e.russian.map(l=>l.folderName),"russian"),n.put(e.instrumental.map(l=>l.folderName),"instrumental");const a=r.objectStore("album");a.clear();const s=[];for(const l of e.german)s.push(a.put(l));for(const l of e.russian)s.push(a.put(l));for(const l of e.instrumental)s.push(a.put(l));await Promise.all(s),r.commit(),t.close()}const _r={};async function fr(e){const t=We(e);let r=_r[t];if(!r){const n=await Ji(e);r=URL.createObjectURL(n),_r[t]=r}return r}async function Ji(e){const t=We(e),r=await rt(),n=await r.get("image",t);if(r.close(),n)return n.blob;const a=await new ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a]);return Yi(e,s),s}async function Yi(e,t){const n={id:We(e),blob:t},a=await rt();await a.add("image",n),a.close()}async function pn(e){const t=We(e),r=await rt(),n=await r.get("song",t);if(r.close(),n)return n.blob;const a=await new ze({key:e.key,downloadId:e.downloadId}).downloadBuffer({end:e.fileSize}),s=new Blob([a],{type:"audio/mpeg"});return Xi(e,s),s}async function Xi(e,t){const n={id:We(e),name:e.name,blob:t},a=await rt();await a.add("song",n),a.close()}async function Zi(e){const t=await rt(),r=await t.getAllKeys("song");return t.close(),e.filter(n=>r.includes(We(n)))}async function Qi(){const e=await rt(),t=await e.getAllKeys("song");return e.close(),t}function We(e){return JSON.stringify({key:e.key,downloadId:e.downloadId})}const Vt={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA"};function zt(e){return e.german.flatMap(t=>t.songs).concat(e.russian.flatMap(t=>t.songs)).concat(e.instrumental.flatMap(t=>t.songs))}async function eo(){return{german:await Gt(Vt.GERMAN_SONGS_URL),russian:await Gt(Vt.RUSSIAN_SONGS_URL),instrumental:await Gt(Vt.INSTRUMENTAL_SONGS_URL)}}async function Gt(e){const t=ze.fromURL(e);return await t.loadAttributes(),t.children.filter(r=>r.directory).map(r=>{const n=r.children.find(a=>{var s;return(s=a.name)==null?void 0:s.endsWith(".jpg")});return{name:r.name.split("(")[0].trim(),folderName:r.name,image:n?{key:n.key,downloadId:n.downloadId,fileSize:n.size}:null,songs:r.children.filter(a=>a.name.endsWith(".mp3")).map(a=>({name:a.name.substring(0,a.name.length-4).trim(),link:{key:a.key,downloadId:a.downloadId,fileSize:a.size}}))}})}async function St(e,t,r){try{const n=t[r];Ke.update(s=>({...s,isLoading:!0}));const a=await pn({name:n.name,...n.link});Ke.update(s=>(s.src!=null&&URL.revokeObjectURL(s.src),{...s,isLoading:!1,src:URL.createObjectURL(a),album:e,song:n,playPrevious:r>0?()=>St(e,t,r-1):null,playNext:r<t.length-1?()=>St(e,t,r+1):null,playRandom:()=>St(e,t,to(t.length))}))}catch{Ke.update(n=>({...n,isLoading:!1,fileLink:null,src:null}))}}function to(e){return Math.floor(Math.random()*e)}const jt="music/favorites";function Qt(e){var r,n;const t=We(e);return(n=(r=localStorage.getItem(jt))==null?void 0:r.includes(t))!=null?n:!1}function ro(e){var n;const t=`;${We(e)};`,r=localStorage.getItem(jt);(n=r==null?void 0:r.includes(t))!=null&&n?localStorage.setItem(jt,r.replace(t,"")):localStorage.setItem(jt,r+t)}function no(e){let t,r,n,a,s;return{c(){t=X("button"),r=be("play_arrow"),this.h()},l(l){t=Z(l,"BUTTON",{class:!0});var o=ee(t);r=we(o,"play_arrow"),o.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle"),t.disabled=n=e[1].isLoading},m(l,o){ke(l,t,o),W(t,r),a||(s=Be(t,"click",e[6]),a=!0)},p(l,o){o&2&&n!==(n=l[1].isLoading)&&(t.disabled=n)},d(l){l&&G(t),a=!1,s()}}}function io(e){let t,r,n,a;return{c(){t=X("button"),r=be("pause"),this.h()},l(s){t=Z(s,"BUTTON",{class:!0});var l=ee(t);r=we(l,"pause"),l.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){ke(s,t,l),W(t,r),n||(a=Be(t,"click",e[7]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function oo(e){let t,r,n,a,s,l,o,f,d,y,g=Pt(e[5])+"",_,A,c,p=Pt(e[3])+"",m,S,b,I,R,M,E,k,L,q,$,N,F,Y,ne,ie,ce,pe,ge,fe,Ee,he=!0,T=!1,C,z,re;function ye(x,J){return x[2]?no:io}let de=ye(e),O=de(e);function P(){cancelAnimationFrame(C),fe.paused||(C=gn(P),T=!0),e[13].call(fe)}return{c(){t=X("div"),r=X("div"),n=X("div"),a=X("input"),s=ve(),l=X("button"),o=be("X"),f=ve(),d=X("div"),y=X("p"),_=be(g),A=ve(),c=X("p"),m=be(p),S=ve(),b=X("div"),I=X("button"),R=be("favorite"),E=ve(),k=X("button"),L=be("skip_previous"),$=ve(),O.c(),N=ve(),F=X("button"),Y=be("skip_next"),ie=ve(),ce=X("button"),pe=be("shuffle"),ge=ve(),fe=X("audio"),this.h()},l(x){t=Z(x,"DIV",{class:!0});var J=ee(t);r=Z(J,"DIV",{class:!0});var le=ee(r);n=Z(le,"DIV",{class:!0});var w=ee(n);a=Z(w,"INPUT",{class:!0,type:!0,min:!0,max:!0}),s=_e(w),l=Z(w,"BUTTON",{class:!0});var v=ee(l);o=we(v,"X"),v.forEach(G),w.forEach(G),le.forEach(G),f=_e(J),d=Z(J,"DIV",{class:!0});var V=ee(d);y=Z(V,"P",{});var Q=ee(y);_=we(Q,g),Q.forEach(G),A=_e(V),c=Z(V,"P",{});var me=ee(c);m=we(me,p),me.forEach(G),V.forEach(G),S=_e(J),b=Z(J,"DIV",{class:!0});var se=ee(b);I=Z(se,"BUTTON",{class:!0});var U=ee(I);R=we(U,"favorite"),U.forEach(G),E=_e(se),k=Z(se,"BUTTON",{class:!0});var Ne=ee(k);L=we(Ne,"skip_previous"),Ne.forEach(G),$=_e(se),O.l(se),N=_e(se),F=Z(se,"BUTTON",{class:!0});var Fe=ee(F);Y=we(Fe,"skip_next"),Fe.forEach(G),ie=_e(se),ce=Z(se,"BUTTON",{class:!0});var Le=ee(ce);pe=we(Le,"shuffle"),Le.forEach(G),se.forEach(G),ge=_e(J),fe=Z(J,"AUDIO",{id:!0,src:!0}),ee(fe).forEach(G),J.forEach(G),this.h()},h(){K(a,"class","range flex-1"),K(a,"type","range"),K(a,"min","0"),K(a,"max",e[3]),K(l,"class","inline btn btn-sm btn-circle ml-2 relative bottom-2"),K(n,"class","flex"),K(r,"class","flex-1 w-full max-w-lg relative mt-2"),K(d,"class","w-full max-w-lg flex flex-row justify-between"),K(I,"class",M=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`),K(k,"class","material-symbols-outlined btn btn-sm btn-circle"),k.disabled=q=e[1].playPrevious==null,K(F,"class","material-symbols-outlined btn btn-sm btn-circle"),F.disabled=ne=e[1].playNext==null,K(ce,"class","material-symbols-outlined btn btn-sm btn-circle"),K(b,"class","h-8 flex justify-center gap-1"),K(fe,"id","audio"),fe.autoplay=!0,ut(fe.src,Ee=e[1].src)||K(fe,"src",Ee),e[3]===void 0&&Ct(()=>e[12].call(fe)),K(t,"class","h-18 flex flex-col items-center rounded-md border-t-2")},m(x,J){ke(x,t,J),W(t,r),W(r,n),W(n,a),ft(a,e[0]),W(n,s),W(n,l),W(l,o),W(t,f),W(t,d),W(d,y),W(y,_),W(d,A),W(d,c),W(c,m),W(t,S),W(t,b),W(b,I),W(I,R),W(b,E),W(b,k),W(k,L),W(b,$),O.m(b,null),W(b,N),W(b,F),W(F,Y),W(b,ie),W(b,ce),W(ce,pe),W(t,ge),W(t,fe),z||(re=[Be(a,"change",e[10]),Be(a,"input",e[10]),Be(l,"click",e[9]),Be(I,"click",e[8]),Be(k,"click",function(){Tt(e[1].playPrevious)&&e[1].playPrevious.apply(this,arguments)}),Be(F,"click",function(){Tt(e[1].playNext)&&e[1].playNext.apply(this,arguments)}),Be(ce,"click",function(){Tt(e[1].playRandom)&&e[1].playRandom.apply(this,arguments)}),Be(fe,"play",e[11]),Be(fe,"pause",e[11]),Be(fe,"durationchange",e[12]),Be(fe,"timeupdate",P),Be(fe,"ended",function(){Tt(e[1].playNext)&&e[1].playNext.apply(this,arguments)})],z=!0)},p(x,[J]){e=x,J&8&&K(a,"max",e[3]),J&1&&ft(a,e[0]),J&32&&g!==(g=Pt(e[5])+"")&&ct(_,g),J&8&&p!==(p=Pt(e[3])+"")&&ct(m,p),J&16&&M!==(M=`material-symbols-outlined ${e[4]?"material-symbols-filled":""} btn btn-sm btn-circle`)&&K(I,"class",M),J&2&&q!==(q=e[1].playPrevious==null)&&(k.disabled=q),de===(de=ye(e))&&O?O.p(e,J):(O.d(1),O=de(e),O&&(O.c(),O.m(b,N))),J&2&&ne!==(ne=e[1].playNext==null)&&(F.disabled=ne),J&2&&!ut(fe.src,Ee=e[1].src)&&K(fe,"src",Ee),J&4&&he!==(he=e[2])&&fe[he?"pause":"play"](),!T&&J&1&&!isNaN(e[0])&&(fe.currentTime=e[0]),T=!1},i:Ue,o:Ue,d(x){x&&G(t),O.d(),z=!1,er(re)}}}function Pt(e){return e=Math.round(e),`${Math.floor(e/60)}`.padStart(2,"0")+":"+`${e%60}`.padStart(2,"0")}function ao(e,t,r){let n,a,s;Ge(e,Ke,I=>r(1,s=I));let l=null;xt(()=>{l=document.getElementById("audio")});let o=!0,f=0,d=0;async function y(I){const R=await fr(I);navigator.mediaSession.metadata.artwork=[{src:R}]}function g(){l.play()}function _(){l.pause()}function A(){!s.song||(ro(s.song.link),r(4,a=Qt(s.song.link)))}function c(){Ke.set({isLoading:!1,song:null,album:null,src:null})}function p(){d=yn(this.value),r(0,d)}function m(){o=this.paused,r(2,o)}function S(){f=this.duration,r(3,f)}function b(){d=this.currentTime,r(0,d)}return e.$$.update=()=>{var I,R,M,E,k;e.$$.dirty&1&&r(5,n=Math.round(d)),e.$$.dirty&2&&r(4,a=s.song!=null&&Qt(s.song.link)),e.$$.dirty&2&&"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:(I=s.song)==null?void 0:I.name,album:(R=s.album)==null?void 0:R.name}),(M=s.album)!=null&&M.image&&y(s.album.image),navigator.mediaSession.setActionHandler("nexttrack",(E=s.playNext)!=null?E:null),navigator.mediaSession.setActionHandler("previoustrack",(k=s.playPrevious)!=null?k:null))},[d,s,o,f,a,n,g,_,A,c,p,m,S,b]}class so extends ot{constructor(t){super(),at(this,t,ao,oo,st,{})}}function Er(e,t,r){const n=e.slice();return n[11]=t[r],n}function lo(e){let t,r,n,a;return{c(){t=X("button"),r=be("download"),this.h()},l(s){t=Z(s,"BUTTON",{class:!0});var l=ee(t);r=we(l,"download"),l.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle")},m(s,l){ke(s,t,l),W(t,r),n||(a=Be(t,"click",e[5]),n=!0)},p:Ue,d(s){s&&G(t),n=!1,a()}}}function uo(e){let t,r;return{c(){t=X("div"),r=X("progress"),this.h()},l(n){t=Z(n,"DIV",{class:!0});var a=ee(t);r=Z(a,"PROGRESS",{class:!0}),ee(r).forEach(G),a.forEach(G),this.h()},h(){K(r,"class","progress w-56 mb-2 h-4"),K(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){ke(n,t,a),W(t,r)},p:Ue,d(n){n&&G(t)}}}function fo(e){let t,r,n;return{c(){t=X("figure"),r=X("img"),this.h()},l(a){t=Z(a,"FIGURE",{});var s=ee(t);r=Z(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[2])||K(r,"src",n),K(r,"alt","Albumbild"),K(r,"class","w-48 h-48 object-scale-down")},m(a,s){ke(a,t,s),W(t,r)},p(a,s){s&4&&!ut(r.src,n=a[2])&&K(r,"src",n)},d(a){a&&G(t)}}}function Sr(e){let t,r;return{c(){t=X("span"),r=be("download"),this.h()},l(n){t=Z(n,"SPAN",{class:!0});var a=ee(t);r=we(a,"download"),a.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined")},m(n,a){ke(n,t,a),W(t,r)},d(n){n&&G(t)}}}function Ar(e){let t,r,n=e[11].name+"",a,s,l=e[1].includes(e[11].link),o,f,d,y,g=l&&Sr();function _(){return e[8](e[11])}return{c(){t=X("li"),r=X("p"),a=be(n),s=ve(),g&&g.c(),o=ve(),this.h()},l(A){t=Z(A,"LI",{class:!0});var c=ee(t);r=Z(c,"P",{class:!0});var p=ee(r);a=we(p,n),p.forEach(G),s=_e(c),g&&g.l(c),o=_e(c),c.forEach(G),this.h()},h(){K(r,"class","flex-1 hover:underline"),K(t,"class",f=`cursor-pointer flex ${e[11]===e[3].song?"font-bold":""}`)},m(A,c){ke(A,t,c),W(t,r),W(r,a),W(t,s),g&&g.m(t,null),W(t,o),d||(y=Be(t,"click",_),d=!0)},p(A,c){e=A,c&1&&n!==(n=e[11].name+"")&&ct(a,n),c&3&&(l=e[1].includes(e[11].link)),l?g||(g=Sr(),g.c(),g.m(t,o)):g&&(g.d(1),g=null),c&9&&f!==(f=`cursor-pointer flex ${e[11]===e[3].song?"font-bold":""}`)&&K(t,"class",f)},d(A){A&&G(t),g&&g.d(),d=!1,y()}}}function co(e){var p,m;let t,r,n,a,s,l,o,f,d;r=new Nr({props:{title:(p=e[0].name)!=null?p:"L\xE4dt...",withCloseButton:!0,$$slots:{default:[lo]},$$scope:{ctx:e}}});function y(S,b){return S[2]?fo:uo}let g=y(e),_=g(e),A=(m=e[0].songs)!=null?m:[],c=[];for(let S=0;S<A.length;S+=1)c[S]=Ar(Er(e,A,S));return{c(){t=X("main"),Xe(r.$$.fragment),n=ve(),a=X("div"),s=X("div"),l=X("div"),_.c(),o=ve(),f=X("ul");for(let S=0;S<c.length;S+=1)c[S].c();this.h()},l(S){t=Z(S,"MAIN",{class:!0});var b=ee(t);Ze(r.$$.fragment,b),n=_e(b),a=Z(b,"DIV",{class:!0});var I=ee(a);s=Z(I,"DIV",{class:!0});var R=ee(s);l=Z(R,"DIV",{class:!0});var M=ee(l);_.l(M),M.forEach(G),o=_e(R),f=Z(R,"UL",{class:!0});var E=ee(f);for(let k=0;k<c.length;k+=1)c[k].l(E);E.forEach(G),R.forEach(G),I.forEach(G),b.forEach(G),this.h()},h(){K(l,"class","mb-2"),K(f,"class","mx-2"),K(s,"class","card w-full md:w-96 bg-base-100 shadow-xl"),K(a,"class","flex-1 flex justify-center"),K(t,"class","flex-1 flex flex-col")},m(S,b){ke(S,t,b),Qe(r,t,null),W(t,n),W(t,a),W(a,s),W(s,l),_.m(l,null),W(s,o),W(s,f);for(let I=0;I<c.length;I+=1)c[I].m(f,null);d=!0},p(S,[b]){var R,M;const I={};if(b&1&&(I.title=(R=S[0].name)!=null?R:"L\xE4dt..."),b&16384&&(I.$$scope={dirty:b,ctx:S}),r.$set(I),g===(g=y(S))&&_?_.p(S,b):(_.d(1),_=g(S),_&&(_.c(),_.m(l,null))),b&27){A=(M=S[0].songs)!=null?M:[];let E;for(E=0;E<A.length;E+=1){const k=Er(S,A,E);c[E]?c[E].p(k,b):(c[E]=Ar(k),c[E].c(),c[E].m(f,null))}for(;E<c.length;E+=1)c[E].d(1);c.length=A.length}},i(S){d||(Pe(r.$$.fragment,S),d=!0)},o(S){Me(r.$$.fragment,S),d=!1},d(S){S&&G(t),et(r),_.d(),tr(c,S)}}}function ho(e,t,r){let n,a,s;Ge(e,At,c=>r(7,a=c)),Ge(e,Ke,c=>r(3,s=c));let{album:l}=t,o=[],f,d;async function y(c){const p=n.songs.indexOf(c);St(n,n.songs,p),g()}async function g(){r(1,o=await Zi(n.songs.map(c=>c.link)))}async function _(){try{d=!0;for(const c of n.songs)await pn({name:c.name,...c.link}),g()}finally{d=!1}}xt(()=>{g()});const A=c=>y(c);return e.$$set=c=>{"album"in c&&r(6,l=c.album)},e.$$.update=()=>{e.$$.dirty&192&&r(0,n=a.german.concat(a.russian).concat(a.instrumental).find(c=>c.folderName===l)),e.$$.dirty&1&&n.image&&fr(n.image).then(c=>r(2,f=c))},[n,o,f,s,y,_,l,a,A]}class po extends ot{constructor(t){super(),at(this,t,ho,co,st,{album:6})}}function yo(e){let t,r;return{c(){t=X("div"),r=X("progress"),this.h()},l(n){t=Z(n,"DIV",{class:!0});var a=ee(t);r=Z(a,"PROGRESS",{class:!0}),ee(r).forEach(G),a.forEach(G),this.h()},h(){K(r,"class","progress w-56 mb-2 h-4"),K(t,"class","w-48 h-48 flex self-center justify-center items-center")},m(n,a){ke(n,t,a),W(t,r)},p:Ue,d(n){n&&G(t)}}}function go(e){let t,r,n;return{c(){t=X("figure"),r=X("img"),this.h()},l(a){t=Z(a,"FIGURE",{});var s=ee(t);r=Z(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(G),this.h()},h(){ut(r.src,n=e[1])||K(r,"src",n),K(r,"alt","Albumbild"),K(r,"class","w-48 h-48 object-scale-down")},m(a,s){ke(a,t,s),W(t,r)},p(a,s){s&2&&!ut(r.src,n=a[1])&&K(r,"src",n)},d(a){a&&G(t)}}}function mo(e){let t,r,n,a,s=e[0].name+"",l,o,f,d,y,g,_;function A(m,S){return m[1]?go:yo}let c=A(e),p=c(e);return{c(){t=X("div"),p.c(),r=ve(),n=X("div"),a=X("p"),l=be(s),o=ve(),f=X("div"),d=X("a"),y=be("\xD6ffnen"),this.h()},l(m){t=Z(m,"DIV",{id:!0,class:!0});var S=ee(t);p.l(S),r=_e(S),n=Z(S,"DIV",{class:!0});var b=ee(n);a=Z(b,"P",{class:!0});var I=ee(a);l=we(I,s),I.forEach(G),b.forEach(G),o=_e(S),f=Z(S,"DIV",{class:!0});var R=ee(f);d=Z(R,"A",{class:!0,href:!0});var M=ee(d);y=we(M,"\xD6ffnen"),M.forEach(G),R.forEach(G),S.forEach(G),this.h()},h(){K(a,"class","card-title"),K(n,"class","card-body w-full md:w-96"),K(d,"class","btn btn-primary capitalize"),K(d,"href",g=`#album/${e[0].folderName}`),K(f,"class","card-actions justify-end"),K(t,"id",_=`album_card_${e[0].name}`),K(t,"class","card w-full md:w-96 bg-base-100 shadow-xl h-min")},m(m,S){ke(m,t,S),p.m(t,null),W(t,r),W(t,n),W(n,a),W(a,l),W(t,o),W(t,f),W(f,d),W(d,y)},p(m,[S]){c===(c=A(m))&&p?p.p(m,S):(p.d(1),p=c(m),p&&(p.c(),p.m(t,r))),S&1&&s!==(s=m[0].name+"")&&ct(l,s),S&1&&g!==(g=`#album/${m[0].folderName}`)&&K(d,"href",g),S&1&&_!==(_=`album_card_${m[0].name}`)&&K(t,"id",_)},i:Ue,o:Ue,d(m){m&&G(t),p.d()}}}function bo(e,t,r){let{album:n}=t,a,s,l;return l=new IntersectionObserver(async o=>{o[0].isIntersecting&&!a&&(r(1,a=await fr(n.image)),l.unobserve(s),l=null)}),xt(()=>{s=document.getElementById(`album_card_${n.name}`),l.observe(s)}),mn(()=>{l==null||l.unobserve(s)}),e.$$set=o=>{"album"in o&&r(0,n=o.album)},[n,a]}class wo extends ot{constructor(t){super(),at(this,t,bo,mo,st,{album:0})}}function kr(e,t,r){const n=e.slice();return n[6]=t[r],n}function Ir(e,t){let r,n,a;return n=new wo({props:{album:t[6]}}),{key:e,first:null,c(){r=cr(),Xe(n.$$.fragment),this.h()},l(s){r=cr(),Ze(n.$$.fragment,s),this.h()},h(){this.first=r},m(s,l){ke(s,r,l),Qe(n,s,l),a=!0},p(s,l){t=s;const o={};l&4&&(o.album=t[6]),n.$set(o)},i(s){a||(Pe(n.$$.fragment,s),a=!0)},o(s){Me(n.$$.fragment,s),a=!1},d(s){s&&G(r),et(n,s)}}}function vo(e){let t,r,n,a,s,l,o,f,d,y,g,_,A,c,p,m=[],S=new Map,b,I,R,M=e[2];const E=k=>k[6].folderName;for(let k=0;k<M.length;k+=1){let L=kr(e,M,k),q=E(L);S.set(q,m[k]=Ir(q,L))}return{c(){t=X("div"),r=X("div"),n=X("select"),a=X("option"),s=be("Alle Alben"),l=X("option"),o=be("Deutsche Alben"),f=X("option"),d=be("Russische Alben"),y=X("option"),g=be("Instrumentelle Alben"),_=ve(),A=X("input"),c=ve(),p=X("div");for(let k=0;k<m.length;k+=1)m[k].c();this.h()},l(k){t=Z(k,"DIV",{class:!0});var L=ee(t);r=Z(L,"DIV",{class:!0});var q=ee(r);n=Z(q,"SELECT",{class:!0});var $=ee(n);a=Z($,"OPTION",{});var N=ee(a);s=we(N,"Alle Alben"),N.forEach(G),l=Z($,"OPTION",{});var F=ee(l);o=we(F,"Deutsche Alben"),F.forEach(G),f=Z($,"OPTION",{});var Y=ee(f);d=we(Y,"Russische Alben"),Y.forEach(G),y=Z($,"OPTION",{});var ne=ee(y);g=we(ne,"Instrumentelle Alben"),ne.forEach(G),$.forEach(G),_=_e(q),A=Z(q,"INPUT",{class:!0,placeholder:!0,type:!0}),q.forEach(G),c=_e(L),p=Z(L,"DIV",{class:!0});var ie=ee(p);for(let ce=0;ce<m.length;ce+=1)m[ce].l(ie);ie.forEach(G),L.forEach(G),this.h()},h(){a.__value="all",a.value=a.__value,l.__value="german",l.value=l.__value,f.__value="russian",f.value=f.__value,y.__value="instrumental",y.value=y.__value,K(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ct(()=>e[4].call(n)),K(A,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),K(A,"placeholder","Suche"),K(A,"type","search"),K(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),K(p,"class","flex-1 flex flex-wrap justify-between gap-4 overflow-auto"),K(t,"class","flex-1 flex flex-col overflow-hidden")},m(k,L){ke(k,t,L),W(t,r),W(r,n),W(n,a),W(a,s),W(n,l),W(l,o),W(n,f),W(f,d),W(n,y),W(y,g),ht(n,e[1]),W(r,_),W(r,A),ft(A,e[0]),W(t,c),W(t,p);for(let q=0;q<m.length;q+=1)m[q].m(p,null);b=!0,I||(R=[Be(n,"change",e[4]),Be(A,"input",e[5])],I=!0)},p(k,[L]){L&2&&ht(n,k[1]),L&1&&ft(A,k[0]),L&4&&(M=k[2],Mt(),m=bn(m,L,E,1,k,M,S,p,wn,Ir,null,kr),Ut())},i(k){if(!b){for(let L=0;L<M.length;L+=1)Pe(m[L]);b=!0}},o(k){for(let L=0;L<m.length;L+=1)Me(m[L]);b=!1},d(k){k&&G(t);for(let L=0;L<m.length;L+=1)m[L].d();I=!1,er(R)}}}function _o(e,t,r){let n;Ge(e,At,d=>r(3,n=d));let a=[],s="",l="all";function o(){l=Kt(this),r(1,l)}function f(){s=this.value,r(0,s)}return e.$$.update=()=>{if(e.$$.dirty&11){let d;if(l==="all")d=n.german.concat(n.russian).concat(n.instrumental);else if(l==="german")d=n.german;else if(l==="russian")d=n.russian;else if(l==="instrumental")d=n.instrumental;else throw new Error("No album selected.");r(2,a=d.filter(y=>s.toLocaleLowerCase().split(" ").every(g=>y.name.toLocaleLowerCase().includes(g))).sort((y,g)=>y.name>g.name?1:-1))}},[s,l,a,n,o,f]}class Eo extends ot{constructor(t){super(),at(this,t,_o,vo,st,{})}}function Br(e,t,r){const n=e.slice();return n[20]=t[r],n}function Or(e,t,r){const n=e.slice();return n[23]=t[r],n}function Rr(e){let t,r,n,a,s,l=e[3],o=[];for(let f=0;f<l.length;f+=1)o[f]=Tr(Or(e,l,f));return{c(){t=X("select"),r=X("option"),n=be("Alle Lieder");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){t=Z(f,"SELECT",{class:!0});var d=ee(t);r=Z(d,"OPTION",{});var y=ee(r);n=we(y,"Alle Lieder"),y.forEach(G);for(let g=0;g<o.length;g+=1)o[g].l(d);d.forEach(G),this.h()},h(){r.__value=null,r.value=r.__value,K(t,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[2]===void 0&&Ct(()=>e[17].call(t))},m(f,d){ke(f,t,d),W(t,r),W(r,n);for(let y=0;y<o.length;y+=1)o[y].m(t,null);ht(t,e[2]),a||(s=Be(t,"change",e[17]),a=!0)},p(f,d){if(d&8){l=f[3];let y;for(y=0;y<l.length;y+=1){const g=Or(f,l,y);o[y]?o[y].p(g,d):(o[y]=Tr(g),o[y].c(),o[y].m(t,null))}for(;y<o.length;y+=1)o[y].d(1);o.length=l.length}d&12&&ht(t,f[2])},d(f){f&&G(t),tr(o,f),a=!1,s()}}}function Tr(e){let t,r=e[23].name+"",n,a;return{c(){t=X("option"),n=be(r),this.h()},l(s){t=Z(s,"OPTION",{});var l=ee(t);n=we(l,r),l.forEach(G),this.h()},h(){t.__value=a=e[23],t.value=t.__value},m(s,l){ke(s,t,l),W(t,n)},p(s,l){l&8&&r!==(r=s[23].name+"")&&ct(n,r),l&8&&a!==(a=s[23])&&(t.__value=a,t.value=t.__value)},d(s){s&&G(t)}}}function Lr(e){let t,r;return{c(){t=X("span"),r=be("download"),this.h()},l(n){t=Z(n,"SPAN",{class:!0});var a=ee(t);r=we(a,"download"),a.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined")},m(n,a){ke(n,t,a),W(t,r)},d(n){n&&G(t)}}}function Pr(e){var A;let t,r,n=e[20].name+"",a,s,l=(A=e[4])==null?void 0:A.includes(We(e[20].link)),o,f,d,y,g=l&&Lr();function _(){return e[19](e[20])}return{c(){t=X("li"),r=X("p"),a=be(n),s=ve(),g&&g.c(),o=ve(),this.h()},l(c){t=Z(c,"LI",{class:!0});var p=ee(t);r=Z(p,"P",{class:!0});var m=ee(r);a=we(m,n),m.forEach(G),s=_e(p),g&&g.l(p),o=_e(p),p.forEach(G),this.h()},h(){K(r,"class","flex-1 hover:underline"),K(t,"class",f=`cursor-pointer flex ${e[20]===e[6].song?"font-bold":""}`)},m(c,p){ke(c,t,p),W(t,r),W(r,a),W(t,s),g&&g.m(t,null),W(t,o),d||(y=Be(t,"click",_),d=!0)},p(c,p){var m;e=c,p&32&&n!==(n=e[20].name+"")&&ct(a,n),p&48&&(l=(m=e[4])==null?void 0:m.includes(We(e[20].link))),l?g||(g=Lr(),g.c(),g.m(t,o)):g&&(g.d(1),g=null),p&96&&f!==(f=`cursor-pointer flex ${e[20]===e[6].song?"font-bold":""}`)&&K(t,"class",f)},d(c){c&&G(t),g&&g.d(),d=!1,y()}}}function So(e){let t,r,n,a,s,l,o,f,d,y,g,_,A,c,p,m,S,b,I,R,M,E,k=e[3]&&Rr(e),L=e[5],q=[];for(let $=0;$<L.length;$+=1)q[$]=Pr(Br(e,L,$));return{c(){t=X("div"),r=X("div"),n=X("select"),a=X("option"),s=be("Alle Lieder"),l=X("option"),o=be("Favoriten"),f=X("option"),d=be("Heruntergeladene Lieder"),y=X("option"),g=be("Deutsche Lieder"),_=X("option"),A=be("Russische Lieder"),c=X("option"),p=be("Instrumentelle Lieder"),m=ve(),k&&k.c(),S=ve(),b=X("input"),I=ve(),R=X("ul");for(let $=0;$<q.length;$+=1)q[$].c();this.h()},l($){t=Z($,"DIV",{class:!0});var N=ee(t);r=Z(N,"DIV",{class:!0});var F=ee(r);n=Z(F,"SELECT",{class:!0});var Y=ee(n);a=Z(Y,"OPTION",{});var ne=ee(a);s=we(ne,"Alle Lieder"),ne.forEach(G),l=Z(Y,"OPTION",{});var ie=ee(l);o=we(ie,"Favoriten"),ie.forEach(G),f=Z(Y,"OPTION",{});var ce=ee(f);d=we(ce,"Heruntergeladene Lieder"),ce.forEach(G),y=Z(Y,"OPTION",{});var pe=ee(y);g=we(pe,"Deutsche Lieder"),pe.forEach(G),_=Z(Y,"OPTION",{});var ge=ee(_);A=we(ge,"Russische Lieder"),ge.forEach(G),c=Z(Y,"OPTION",{});var fe=ee(c);p=we(fe,"Instrumentelle Lieder"),fe.forEach(G),Y.forEach(G),m=_e(F),k&&k.l(F),S=_e(F),b=Z(F,"INPUT",{class:!0,placeholder:!0,type:!0}),F.forEach(G),I=_e(N),R=Z(N,"UL",{class:!0});var Ee=ee(R);for(let he=0;he<q.length;he+=1)q[he].l(Ee);Ee.forEach(G),N.forEach(G),this.h()},h(){a.__value=e[7],a.value=a.__value,l.__value=e[8],l.value=l.__value,f.__value=e[9],f.value=f.__value,y.__value=e[10],y.value=y.__value,_.__value=e[11],_.value=_.__value,c.__value=e[12],c.value=c.__value,K(n,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0 focus:outline-none"),e[1]===void 0&&Ct(()=>e[16].call(n)),K(b,"class","input input-bordered w-full max-w-md mb-2 focus:outline-none"),K(b,"placeholder","Suche"),K(b,"type","search"),K(r,"class","w-full flex justify-center md:gap-2 flex-wrap"),K(R,"class","flex-1 overflow-auto mx-2"),K(t,"class","flex-1 flex flex-col justify-center")},m($,N){ke($,t,N),W(t,r),W(r,n),W(n,a),W(a,s),W(n,l),W(l,o),W(n,f),W(f,d),W(n,y),W(y,g),W(n,_),W(_,A),W(n,c),W(c,p),ht(n,e[1]),W(r,m),k&&k.m(r,null),W(r,S),W(r,b),ft(b,e[0]),W(t,I),W(t,R);for(let F=0;F<q.length;F+=1)q[F].m(R,null);M||(E=[Be(n,"change",e[16]),Be(b,"input",e[18])],M=!0)},p($,[N]){if(N&8066&&ht(n,$[1]),$[3]?k?k.p($,N):(k=Rr($),k.c(),k.m(r,S)):k&&(k.d(1),k=null),N&1&&ft(b,$[0]),N&8304){L=$[5];let F;for(F=0;F<L.length;F+=1){const Y=Br($,L,F);q[F]?q[F].p(Y,N):(q[F]=Pr(Y),q[F].c(),q[F].m(R,null))}for(;F<q.length;F+=1)q[F].d(1);q.length=L.length}},i:Ue,o:Ue,d($){$&&G(t),k&&k.d(),tr(q,$),M=!1,er(E)}}}function Ao(e,t,r){let n,a,s,l;Ge(e,At,k=>r(15,s=k)),Ge(e,Ke,k=>r(6,l=k));let o="";const f={getSongs:k=>zt(k)},d={getSongs:k=>zt(k).filter(L=>Qt(L.link))},y={getSongs:k=>zt(k).filter(L=>p.includes(We(L.link)))},g={getAlbums:k=>k.german,getSongs:k=>k.german.flatMap(L=>L.songs)},_={getAlbums:k=>k.russian,getSongs:k=>k.russian.flatMap(L=>L.songs)},A={getAlbums:k=>k.instrumental,getSongs:k=>k.instrumental.flatMap(L=>L.songs)};let c=f,p,m=null,S;async function b(k){const L=S.indexOf(k);St(null,S,L)}function I(){c=Kt(this),r(1,c),r(12,A),r(11,_),r(10,g),r(9,y),r(8,d),r(7,f)}function R(){m=Kt(this),r(2,m),r(3,n),r(1,c),r(15,s),r(3,n),r(1,c),r(15,s)}function M(){o=this.value,r(0,o)}const E=k=>b(k);e.$$.update=()=>{e.$$.dirty&32770&&r(3,n=c.getAlbums==null?null:c.getAlbums(s)),e.$$.dirty&12&&m&&(!n||!n.includes(m))&&r(2,m=null),e.$$.dirty&32774&&(m?r(14,S=m.songs.sort((k,L)=>k.name>L.name?1:-1)):r(14,S=c.getSongs(s).sort((k,L)=>k.name>L.name?1:-1))),e.$$.dirty&16385&&r(5,a=S.filter(k=>o.toLocaleLowerCase().split(" ").every(L=>k.name.toLocaleLowerCase().includes(L))))};{async function k(){r(4,p=await Qi())}k()}return[o,c,m,n,p,a,l,f,d,y,g,_,A,b,S,s,I,R,M,E]}class ko extends ot{constructor(t){super(),at(this,t,Ao,So,st,{})}}function Io(e){let t,r;return{c(){t=X("a"),r=be("lyrics"),this.h()},l(n){t=Z(n,"A",{class:!0,href:!0});var a=ee(t);r=we(a,"lyrics"),a.forEach(G),this.h()},h(){K(t,"class","material-symbols-outlined btn btn-sm btn-circle"),K(t,"href","/")},m(n,a){ke(n,t,a),W(t,r)},p:Ue,d(n){n&&G(t)}}}function Bo(e){let t,r;return t=new Eo({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Oo(e){let t,r;return t=new ko({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function Ro(e){let t,r,n,a,s,l,o,f,d,y,g,_,A,c,p,m;r=new Nr({props:{title:"Geistliche Lieder!",withCloseButton:!1,$$slots:{default:[Io]},$$scope:{ctx:e}}});const S=[Oo,Bo],b=[];function I(R,M){return R[0].url.hash===""?0:R[0].url.hash==="#alben"?1:-1}return~(c=I(e))&&(p=b[c]=S[c](e)),{c(){t=X("div"),Xe(r.$$.fragment),n=ve(),a=X("div"),s=X("a"),l=be("Lieder"),f=ve(),d=X("a"),y=be("Alben"),_=ve(),A=X("div"),p&&p.c(),this.h()},l(R){t=Z(R,"DIV",{class:!0});var M=ee(t);Ze(r.$$.fragment,M),n=_e(M),a=Z(M,"DIV",{class:!0});var E=ee(a);s=Z(E,"A",{class:!0,href:!0});var k=ee(s);l=we(k,"Lieder"),k.forEach(G),f=_e(E),d=Z(E,"A",{class:!0,href:!0});var L=ee(d);y=we(L,"Alben"),L.forEach(G),E.forEach(G),_=_e(M),A=Z(M,"DIV",{class:!0});var q=ee(A);p&&p.l(q),q.forEach(G),M.forEach(G),this.h()},h(){K(s,"class",o=`tab ${e[0].url.hash===""?"tab-active":""}`),K(s,"href","/music"),K(d,"class",g=`tab ${e[0].url.hash==="#alben"?"tab-active":""}`),K(d,"href","/music#alben"),K(a,"class","tabs justify-center"),K(A,"class","flex-1 flex overflow-auto p-1"),K(t,"class","flex-1 flex flex-col overflow-hidden")},m(R,M){ke(R,t,M),Qe(r,t,null),W(t,n),W(t,a),W(a,s),W(s,l),W(a,f),W(a,d),W(d,y),W(t,_),W(t,A),~c&&b[c].m(A,null),m=!0},p(R,[M]){const E={};M&2&&(E.$$scope={dirty:M,ctx:R}),r.$set(E),(!m||M&1&&o!==(o=`tab ${R[0].url.hash===""?"tab-active":""}`))&&K(s,"class",o),(!m||M&1&&g!==(g=`tab ${R[0].url.hash==="#alben"?"tab-active":""}`))&&K(d,"class",g);let k=c;c=I(R),c!==k&&(p&&(Mt(),Me(b[k],1,1,()=>{b[k]=null}),Ut()),~c?(p=b[c],p||(p=b[c]=S[c](R),p.c()),Pe(p,1),p.m(A,null)):p=null)},i(R){m||(Pe(r.$$.fragment,R),Pe(p),m=!0)},o(R){Me(r.$$.fragment,R),Me(p),m=!1},d(R){R&&G(t),et(r),~c&&b[c].d()}}}function To(e,t,r){let n;return Ge(e,Ur,a=>r(0,n=a)),[n]}class Lo extends ot{constructor(t){super(),at(this,t,To,Ro,st,{})}}function Po(e){let t,r;return t=new po({props:{album:e[2]()}}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function jo(e){let t,r;return t=new Lo({}),{c(){Xe(t.$$.fragment)},l(n){Ze(t.$$.fragment,n)},m(n,a){Qe(t,n,a),r=!0},p:Ue,i(n){r||(Pe(t.$$.fragment,n),r=!0)},o(n){Me(t.$$.fragment,n),r=!1},d(n){et(t,n)}}}function jr(e){let t,r,n,a,s=e[1].isLoading&&Mr();return n=new so({}),{c(){s&&s.c(),t=ve(),r=X("div"),Xe(n.$$.fragment),this.h()},l(l){s&&s.l(l),t=_e(l),r=Z(l,"DIV",{class:!0});var o=ee(r);Ze(n.$$.fragment,o),o.forEach(G),this.h()},h(){K(r,"class","self-center mb-2 w-full")},m(l,o){s&&s.m(l,o),ke(l,t,o),ke(l,r,o),Qe(n,r,null),a=!0},p(l,o){l[1].isLoading?s||(s=Mr(),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i(l){a||(Pe(n.$$.fragment,l),a=!0)},o(l){Me(n.$$.fragment,l),a=!1},d(l){s&&s.d(l),l&&G(t),l&&G(r),et(n)}}}function Mr(e){let t;return{c(){t=X("progress"),this.h()},l(r){t=Z(r,"PROGRESS",{class:!0}),ee(t).forEach(G),this.h()},h(){K(t,"class","progress w-56 self-center mb-2")},m(r,n){ke(r,t,n)},d(r){r&&G(t)}}}function Mo(e){let t,r,n,a,s,l,o;const f=[jo,Po],d=[];function y(_,A){return A&1&&(n=null),_[0].url.hash===""||_[0].url.hash==="#alben"?0:(n==null&&(n=!!_[0].url.hash.startsWith("#album")),n?1:-1)}~(a=y(e,-1))&&(s=d[a]=f[a](e));let g=(e[1].src!=null||e[1].isLoading)&&jr(e);return{c(){t=X("div"),r=X("main"),s&&s.c(),l=ve(),g&&g.c(),this.h()},l(_){t=Z(_,"DIV",{class:!0});var A=ee(t);r=Z(A,"MAIN",{class:!0});var c=ee(r);s&&s.l(c),c.forEach(G),l=_e(A),g&&g.l(A),A.forEach(G),this.h()},h(){K(r,"class","overflow-auto flex-1 flex flex-col"),K(t,"class","w-full h-full flex flex-col")},m(_,A){ke(_,t,A),W(t,r),~a&&d[a].m(r,null),W(t,l),g&&g.m(t,null),o=!0},p(_,[A]){let c=a;a=y(_,A),a===c?~a&&d[a].p(_,A):(s&&(Mt(),Me(d[c],1,1,()=>{d[c]=null}),Ut()),~a?(s=d[a],s?s.p(_,A):(s=d[a]=f[a](_),s.c()),Pe(s,1),s.m(r,null)):s=null),_[1].src!=null||_[1].isLoading?g?(g.p(_,A),A&2&&Pe(g,1)):(g=jr(_),g.c(),Pe(g,1),g.m(t,null)):g&&(Mt(),Me(g,1,1,()=>{g=null}),Ut())},i(_){o||(Pe(s),Pe(g),o=!0)},o(_){Me(s),Me(g),o=!1},d(_){_&&G(t),~a&&d[a].d(),g&&g.d()}}}function Uo(e,t,r){let n,a;Ge(e,Ur,l=>r(0,n=l)),Ge(e,Ke,l=>r(1,a=l)),xt(async()=>{vn()&&(Nt.getGlobalApi().userAgent=null);let l;return"wakeLock"in navigator&&(l=await navigator.wakeLock.request("screen")),Ki().then(At.set),navigator.onLine&&await eo().then(async o=>{At.set(o),await Hi(o)}),()=>{l.release()}});function s(){return decodeURI(n.url.hash.substring(7))}return[n,a,s]}class Fo extends ot{constructor(t){super(),at(this,t,Uo,Mo,st,{})}}export{Fo as default};
