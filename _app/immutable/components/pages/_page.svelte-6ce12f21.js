import{S as Q,i as X,s as j,k as B,a as U,q as Y,l as y,m as N,h as m,c as q,r as Z,n as E,b as F,D as S,K,E as oe,J as P,p as D,L as ce,M as ue,N as Oe,g as Se,O as Ve,d as Be,f as A,t as C,o as Fe,F as Ae,G as Ce,H as He,I as Pe,P as We,z as ae,Q as fe,v as x,w as $,x as ee,y as te,R as ie,T as _e,U as ye,V as Me,W as he,u as Re,X as ge}from"../../chunks/index-37370bd0.js";import{s as re,g as De,t as Ue,a as qe,F as ze,A as Ge,b as Ke,c as ne,d as Je,u as de,e as me}from"../../chunks/song-8524cbf7.js";function Qe(s,e){return e=e.toLocaleLowerCase(),s.filter(t=>Xe(t,e)).sort((t,l)=>pe(t,l,o=>o.T.toLocaleLowerCase().includes(e))).sort((t,l)=>pe(t,l,o=>o.T.toLocaleLowerCase().startsWith(e)))}function pe(s,e,t){const l=t(s.song),o=t(e.song);return l&&!o?-1:!l&&o?1:0}function Xe(s,e){if(e.trim()==="")return!0;const t=s.song.T.toLocaleLowerCase();e=e.toLocaleLowerCase();const l=Number(e);return!Number.isNaN(l)&&s.songInsideBook?s.songInsideBook.I===l:!!e.trim().split(" ").every(n=>t.includes(n))}function je(s){let e,t,l,o,n,a,i,r,f;return{c(){e=B("div"),t=B("a"),o=U(),n=B("span"),a=Y("star"),this.h()},l(_){e=y(_,"DIV",{class:!0});var c=N(e);t=y(c,"A",{class:!0,href:!0});var u=N(t);u.forEach(m),o=q(c),n=y(c,"SPAN",{class:!0});var d=N(n);a=Z(d,"star"),d.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","flex-1 whitespace-nowrap overflow-hidden"),E(t,"href",l=`song/${s[0].song.I}`),E(n,"class",i=`material-symbols-outlined ${s[2]?"material-symbols-filled":""}`),E(e,"class","flex")},m(_,c){F(_,e,c),S(e,t),t.innerHTML=s[1],S(e,o),S(e,n),S(n,a),r||(f=K(n,"click",s[3]),r=!0)},p(_,[c]){c&2&&(t.innerHTML=_[1]),c&1&&l!==(l=`song/${_[0].song.I}`)&&E(t,"href",l),c&4&&i!==(i=`material-symbols-outlined ${_[2]?"material-symbols-filled":""}`)&&E(n,"class",i)},i:oe,o:oe,d(_){_&&m(e),r=!1,f()}}}function Ye(s,e,t){let l;P(s,re,r=>t(4,l=r));let{songWithInsideBook:o}=e,n=!1;const a=()=>{Ue(o.song.I),t(2,n=!n)};let i;return s.$$set=r=>{"songWithInsideBook"in r&&t(0,o=r.songWithInsideBook)},s.$$.update=()=>{var r,f;if(s.$$.dirty&1&&t(2,n=De(o.song.I)),s.$$.dirty&19){const _=l.trim().toLocaleLowerCase().split(" ");_.sort((u,d)=>u.length<d.length?1:-1);const c=(f=(r=o.songInsideBook)==null?void 0:r.I)!=null?f:null;t(1,i=o.song.T),c&&t(1,i=`${c} - ${i}`);for(const u of _){const d=u.length;let p=-1;const O=()=>p+d;do{if(p>=i.length){p=-1;break}p=i.toLocaleLowerCase().indexOf(u,p+1)}while(p>=0&&(i.substring(0,p).split("<").length%2===0||i.substring(p,O()).split("<").length%2===0));if(p>=0){const v=i.substring(p,O());t(1,i=i.slice(0,p)+`<p class="font-bold inline">${v}</p>`+i.slice(O()))}}}},[o,i,n,a,l]}class Ze extends Q{constructor(e){super(),X(this,e,Ye,je,j,{songWithInsideBook:0})}}function ve(s,e,t){const l=s.slice();return l[22]=e[t],l}const xe=s=>({item:s&16}),be=s=>({item:s[22].data});function $e(s){let e;return{c(){e=Y("Missing template")},l(t){e=Z(t,"Missing template")},m(t,l){F(t,e,l)},d(t){t&&m(e)}}}function ke(s,e){let t,l,o;const n=e[14].default,a=Ae(n,e,e[13],be),i=a||$e();return{key:s,first:null,c(){t=B("svelte-virtual-list-row"),i&&i.c(),l=U(),this.h()},l(r){t=y(r,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=N(t);i&&i.l(f),l=q(f),f.forEach(m),this.h()},h(){ce(t,"class","svelte-102fq2u"),this.first=t},m(r,f){F(r,t,f),i&&i.m(t,null),S(t,l),o=!0},p(r,f){e=r,a&&a.p&&(!o||f&8208)&&Ce(a,n,e,e[13],o?Pe(n,e[13],f,xe):He(e[13]),be)},i(r){o||(A(i,r),o=!0)},o(r){C(i,r),o=!1},d(r){r&&m(t),i&&i.d(r)}}}function et(s){let e,t,l=[],o=new Map,n,a,i,r,f=s[4];const _=c=>c[22].index;for(let c=0;c<f.length;c+=1){let u=ve(s,f,c),d=_(u);o.set(d,l[c]=ke(d,u))}return{c(){e=B("svelte-virtual-list-viewport"),t=B("svelte-virtual-list-contents");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=y(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var u=N(e);t=y(u,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=N(t);for(let p=0;p<l.length;p+=1)l[p].l(d);d.forEach(m),u.forEach(m),this.h()},h(){D(t,"padding-top",s[5]+"px"),D(t,"padding-bottom",s[6]+"px"),ce(t,"class","svelte-102fq2u"),D(e,"height",s[0]),ce(e,"class","svelte-102fq2u"),ue(()=>s[17].call(e))},m(c,u){F(c,e,u),S(e,t);for(let d=0;d<l.length;d+=1)l[d].m(t,null);s[15](t),s[16](e),n=Oe(e,s[17].bind(e)),a=!0,i||(r=K(e,"scroll",s[7]),i=!0)},p(c,[u]){u&8208&&(f=c[4],Se(),l=Ve(l,u,_,1,c,f,o,t,We,ke,null,ve),Be()),(!a||u&32)&&D(t,"padding-top",c[5]+"px"),(!a||u&64)&&D(t,"padding-bottom",c[6]+"px"),(!a||u&1)&&D(e,"height",c[0])},i(c){if(!a){for(let u=0;u<f.length;u+=1)A(l[u]);a=!0}},o(c){for(let u=0;u<l.length;u+=1)C(l[u]);a=!1},d(c){c&&m(e);for(let u=0;u<l.length;u+=1)l[u].d();s[15](null),s[16](null),n(),i=!1,r()}}}function tt(s,e,t){let{$$slots:l={},$$scope:o}=e,{items:n}=e,{height:a="100%"}=e,{itemHeight:i=void 0}=e,{start:r=0}=e,{end:f=0}=e,_=[],c,u,d,p=0,O,v,b=0,W=0,L;async function le(g,M,V){const{scrollTop:H}=u;await ae();let z=b-H,w=r;for(;z<M&&w<g.length;){let G=c[w-r];G||(t(9,f=w+1),await ae(),G=c[w-r]),z+=_[w]=V||G.offsetHeight,w+=1}t(9,f=w);const se=g.length-f;L=(b+z)/f,t(6,W=se*L),_.length=g.length,u.scrollTo(0,0)}async function h(){const{scrollTop:g}=u,M=r;for(let w=0;w<c.length;w+=1)_[r+w]=i||c[w].offsetHeight;let V=0,H=0;for(;V<n.length;){const w=_[V]||L;if(H+w>g){t(8,r=V),t(5,b=H);break}H+=w,V+=1}for(;V<n.length&&(H+=_[V]||L,V+=1,!(H>g+p)););t(9,f=V);const z=n.length-f;for(L=H/f;V<n.length;)_[V++]=L;if(t(6,W=z*L),r<M){await ae();let w=0,se=0;for(let R=r;R<M;R+=1)c[R-r]&&(w+=_[R],se+=i||c[R-r].offsetHeight);const G=se-w;u.scrollTo(0,g+G)}}Fe(()=>{c=d.getElementsByTagName("svelte-virtual-list-row"),t(12,v=!0)});function k(g){fe[g?"unshift":"push"](()=>{d=g,t(3,d)})}function I(g){fe[g?"unshift":"push"](()=>{u=g,t(2,u)})}function T(){p=this.offsetHeight,t(1,p)}return s.$$set=g=>{"items"in g&&t(10,n=g.items),"height"in g&&t(0,a=g.height),"itemHeight"in g&&t(11,i=g.itemHeight),"start"in g&&t(8,r=g.start),"end"in g&&t(9,f=g.end),"$$scope"in g&&t(13,o=g.$$scope)},s.$$.update=()=>{s.$$.dirty&1792&&t(4,O=n.slice(r,f).map((g,M)=>({index:M+r,data:g}))),s.$$.dirty&7170&&v&&le(n,p,i)},[a,p,u,d,O,b,W,h,r,f,n,i,v,o,l,k,I,T]}class lt extends Q{constructor(e){super(),X(this,e,tt,et,j,{items:10,height:0,itemHeight:11,start:8,end:9})}}function st(s){let e,t;return e=new Ze({props:{songWithInsideBook:s[4]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&16&&(n.songWithInsideBook=l[4]),e.$set(n)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function nt(s){let e,t,l;return t=new lt({props:{items:s[0],height:"100%",$$slots:{default:[st,({item:o})=>({4:o}),({item:o})=>o?16:0]},$$scope:{ctx:s}}}),{c(){e=B("div"),x(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{id:!0,class:!0});var n=N(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"id","virtual-list-div"),E(e,"class","text-left flex-1 overflow-auto px-1 w-full")},m(o,n){F(o,e,n),ee(t,e,null),l=!0},p(o,[n]){const a={};n&1&&(a.items=o[0]),n&48&&(a.$$scope={dirty:n,ctx:o}),t.$set(a)},i(o){l||(A(t.$$.fragment,o),l=!0)},o(o){C(t.$$.fragment,o),l=!1},d(o){o&&m(e),te(t)}}}function ot(s,e,t){let l,o;P(s,re,i=>t(2,l=i)),P(s,qe,i=>t(3,o=i));let{selectedBook:n}=e,a;return s.$$set=i=>{"selectedBook"in i&&t(1,n=i.selectedBook)},s.$$.update=()=>{if(s.$$.dirty&14){let i;if(n.T!==ze)i=o[n.T];else{const r=o[Ge],f=Ke();i=r.filter(_=>f.includes(_.song.I))}t(0,a=Qe(i,l))}},[a,n,l,o]}class Ne extends Q{constructor(e){super(),X(this,e,ot,nt,j,{selectedBook:1})}}function we(s,e,t){const l=s.slice();return l[9]=e[t],l}function Te(s,e,t){const l=s.slice();return l[9]=e[t],l}function Le(s){let e,t=s[9].T+"",l;return{c(){e=B("option"),l=Y(t),this.h()},l(o){e=y(o,"OPTION",{});var n=N(e);l=Z(n,t),n.forEach(m),this.h()},h(){e.__value=s[9],e.value=e.__value},m(o,n){F(o,e,n),S(e,l)},p:oe,d(o){o&&m(e)}}}function Ie(s){let e,t,l,o=s[2],n=[];for(let a=0;a<o.length;a+=1)n[a]=Ee(we(s,o,a));return{c(){e=B("select");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=y(a,"SELECT",{class:!0});var i=N(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(m),this.h()},h(){E(e,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0"),s[0]===void 0&&ue(()=>s[7].call(e))},m(a,i){F(a,e,i);for(let r=0;r<n.length;r+=1)n[r].m(e,null);ie(e,s[0]),t||(l=K(e,"change",s[7]),t=!0)},p(a,i){if(i&4){o=a[2];let r;for(r=0;r<o.length;r+=1){const f=we(a,o,r);n[r]?n[r].p(f,i):(n[r]=Ee(f),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=o.length}i&5&&ie(e,a[0])},d(a){a&&m(e),ye(n,a),t=!1,l()}}}function Ee(s){let e,t=s[9].T.split(" ",2)[1]+"",l,o;return{c(){e=B("option"),l=Y(t),this.h()},l(n){e=y(n,"OPTION",{});var a=N(e);l=Z(a,t),a.forEach(m),this.h()},h(){e.__value=o=s[9],e.value=e.__value},m(n,a){F(n,e,a),S(e,l)},p(n,a){a&4&&t!==(t=n[9].T.split(" ",2)[1]+"")&&Re(l,t),a&4&&o!==(o=n[9])&&(e.__value=o,e.value=e.__value)},d(n){n&&m(e)}}}function it(s){let e,t;return e=new Ne({props:{selectedBook:s[1]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&2&&(n.selectedBook=l[1]),e.$set(n)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function rt(s){let e,t;return e=new Ne({props:{selectedBook:s[0]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&1&&(n.selectedBook=l[0]),e.$set(n)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){C(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function at(s){let e,t,l,o,n=s[1]!=null&&J(s[1]),a,i,r,f,_,c,u,d,p,O=s[4],v=[];for(let h=0;h<O.length;h+=1)v[h]=Le(Te(s,O,h));let b=n&&Ie(s);const W=[rt,it],L=[];function le(h,k){return k&2&&(f=null),h[1]!=null&&h[0]?0:(f==null&&(f=!!(h[1]!=null&&ct(h[1]))),f?1:-1)}return~(_=le(s,-1))&&(c=L[_]=W[_](s)),{c(){e=B("div"),t=B("div"),l=B("select");for(let h=0;h<v.length;h+=1)v[h].c();o=U(),b&&b.c(),a=U(),i=B("input"),r=U(),c&&c.c(),this.h()},l(h){e=y(h,"DIV",{class:!0});var k=N(e);t=y(k,"DIV",{});var I=N(t);l=y(I,"SELECT",{class:!0});var T=N(l);for(let g=0;g<v.length;g+=1)v[g].l(T);T.forEach(m),o=q(I),b&&b.l(I),a=q(I),i=y(I,"INPUT",{class:!0,placeholder:!0,type:!0}),I.forEach(m),r=q(k),c&&c.l(k),k.forEach(m),this.h()},h(){E(l,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0"),s[1]===void 0&&ue(()=>s[6].call(l)),E(i,"class","input input-bordered w-full max-w-md mb-1 focus:border-current focus:ring-0"),E(i,"placeholder","Suche"),E(i,"type","search"),E(e,"class","flex flex-col overflow-hidden w-full h-full p-1")},m(h,k){F(h,e,k),S(e,t),S(t,l);for(let I=0;I<v.length;I+=1)v[I].m(l,null);ie(l,s[1]),S(t,o),b&&b.m(t,null),S(t,a),S(t,i),_e(i,s[3]),S(e,r),~_&&L[_].m(e,null),u=!0,d||(p=[K(l,"change",s[6]),K(i,"input",s[8])],d=!0)},p(h,[k]){if(k&16){O=h[4];let T;for(T=0;T<O.length;T+=1){const g=Te(h,O,T);v[T]?v[T].p(g,k):(v[T]=Le(g),v[T].c(),v[T].m(l,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=O.length}k&18&&ie(l,h[1]),k&2&&(n=h[1]!=null&&J(h[1])),n?b?b.p(h,k):(b=Ie(h),b.c(),b.m(t,a)):b&&(b.d(1),b=null),k&8&&_e(i,h[3]);let I=_;_=le(h,k),_===I?~_&&L[_].p(h,k):(c&&(Se(),C(L[I],1,1,()=>{L[I]=null}),Be()),~_?(c=L[_],c?c.p(h,k):(c=L[_]=W[_](h),c.c()),A(c,1),c.m(e,null)):c=null)},i(h){u||(A(c),u=!0)},o(h){C(c),u=!1},d(h){h&&m(e),ye(v,h),b&&b.d(),~_&&L[_].d(),d=!1,Me(p)}}}function J(s){return s.hasOwnProperty("F")}function ct(s){return!J(s)}function ut(s,e,t){let l,o,n,a,i;P(s,ne,u=>t(0,o=u)),P(s,Je,u=>t(5,n=u)),P(s,de,u=>t(1,a=u)),P(s,re,u=>t(3,i=u));const r=[...n.filter(u=>!me.some(d=>u.T.startsWith(d.F))),...me];function f(){a=ge(this),de.set(a),t(4,r)}function _(){o=ge(this),ne.set(o),t(2,l),t(1,a),t(5,n)}function c(){i=this.value,re.set(i)}return s.$$.update=()=>{if(s.$$.dirty&34&&t(2,l=a&&J(a)?n.filter(u=>u.T.startsWith(a.F)):new Array),s.$$.dirty&35)if(a&&J(a)){const u=a.F;(!o||!o.T.startsWith(u))&&he(ne,o=n.filter(d=>d.T.startsWith(u))[0],o)}else he(ne,o=null,o)},[o,a,l,i,r,n,f,_,c]}class ft extends Q{constructor(e){super(),X(this,e,ut,at,j,{})}}function _t(s){let e,t,l,o,n,a;return n=new ft({}),{c(){e=B("div"),t=B("h1"),l=Y("Geistliche Lieder!"),o=U(),x(n.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var r=N(e);t=y(r,"H1",{class:!0});var f=N(t);l=Z(f,"Geistliche Lieder!"),f.forEach(m),r.forEach(m),o=q(i),$(n.$$.fragment,i),this.h()},h(){E(t,"class","svelte-yzh2bf"),E(e,"class","prose m-auto h-auto mx-auto my-1")},m(i,r){F(i,e,r),S(e,t),S(t,l),F(i,o,r),ee(n,i,r),a=!0},p:oe,i(i){a||(A(n.$$.fragment,i),a=!0)},o(i){C(n.$$.fragment,i),a=!1},d(i){i&&m(e),i&&m(o),te(n,i)}}}class dt extends Q{constructor(e){super(),X(this,e,null,_t,j,{})}}export{dt as default};
