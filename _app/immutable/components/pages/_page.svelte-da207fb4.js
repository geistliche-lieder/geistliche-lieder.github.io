import{S as Q,i as X,s as j,k as B,a as U,q as Y,l as y,m as V,h as m,c as q,r as Z,n as E,b as O,D as S,K,E as oe,J as W,p as D,L as ce,M as ue,N as Fe,g as Se,O as Ne,d as Be,f as C,t as H,o as Oe,F as Ce,G as He,H as Pe,I as We,P as Ae,z as ae,Q as fe,v as x,w as $,x as ee,y as te,R as ie,T as he,U as ye,V as Re,W as _e,u as Me,X as ge}from"../../chunks/index-37370bd0.js";import{s as re,g as De,t as Ue,a as qe,b as ze,F as Ge,c as Ke,d as ne,e as Je,u as de,f as me}from"../../chunks/song-9a1cbec6.js";function Qe(s,e){return e=e.toLocaleLowerCase(),s.filter(t=>Xe(t,e)).sort((t,l)=>pe(t,l,o=>o.T.toLocaleLowerCase().includes(e))).sort((t,l)=>pe(t,l,o=>o.T.toLocaleLowerCase().startsWith(e)))}function pe(s,e,t){const l=t(s.song),o=t(e.song);return l&&!o?-1:!l&&o?1:0}function Xe(s,e){if(e.trim()==="")return!0;const t=s.song.T.toLocaleLowerCase();e=e.toLocaleLowerCase();const l=Number(e);return!Number.isNaN(l)&&s.songInsideBook?s.songInsideBook.I===l:!!e.trim().split(" ").every(n=>t.includes(n))}function je(s){let e,t,l,o,n,a,r,i,f;return{c(){e=B("div"),t=B("a"),o=U(),n=B("span"),a=Y("star"),this.h()},l(h){e=y(h,"DIV",{class:!0});var c=V(e);t=y(c,"A",{class:!0,href:!0});var u=V(t);u.forEach(m),o=q(c),n=y(c,"SPAN",{class:!0});var d=V(n);a=Z(d,"star"),d.forEach(m),c.forEach(m),this.h()},h(){E(t,"class","flex-1 whitespace-nowrap overflow-hidden"),E(t,"href",l=`song/${s[0].song.I}`),E(n,"class",r=`material-symbols-outlined ${s[2]?"material-symbols-filled":""}`),E(e,"class","flex")},m(h,c){O(h,e,c),S(e,t),t.innerHTML=s[1],S(e,o),S(e,n),S(n,a),i||(f=K(n,"click",s[3]),i=!0)},p(h,[c]){c&2&&(t.innerHTML=h[1]),c&1&&l!==(l=`song/${h[0].song.I}`)&&E(t,"href",l),c&4&&r!==(r=`material-symbols-outlined ${h[2]?"material-symbols-filled":""}`)&&E(n,"class",r)},i:oe,o:oe,d(h){h&&m(e),i=!1,f()}}}function Ye(s,e,t){let l;W(s,re,i=>t(4,l=i));let{songWithInsideBook:o}=e,n=!1;const a=()=>{Ue(o.song.I),t(2,n=!n)};let r;return s.$$set=i=>{"songWithInsideBook"in i&&t(0,o=i.songWithInsideBook)},s.$$.update=()=>{var i,f;if(s.$$.dirty&1&&t(2,n=De(o.song.I)),s.$$.dirty&19){const h=l.trim().toLocaleLowerCase().split(" ");h.sort((u,d)=>u.length<d.length?1:-1);const c=(f=(i=o.songInsideBook)==null?void 0:i.I)!=null?f:null;t(1,r=o.song.T),c&&t(1,r=`${c} - ${r}`);for(const u of h){const d=u.length;let p=-1;const F=()=>p+d;do{if(p>=r.length){p=-1;break}p=r.toLocaleLowerCase().indexOf(u,p+1)}while(p>=0&&(r.substring(0,p).split("<").length%2===0||r.substring(p,F()).split("<").length%2===0));if(p>=0){const v=r.substring(p,F());t(1,r=r.slice(0,p)+`<p class="font-bold inline">${v}</p>`+r.slice(F()))}}}},[o,r,n,a,l]}class Ze extends Q{constructor(e){super(),X(this,e,Ye,je,j,{songWithInsideBook:0})}}function ve(s,e,t){const l=s.slice();return l[22]=e[t],l}const xe=s=>({item:s&16}),be=s=>({item:s[22].data});function $e(s){let e;return{c(){e=Y("Missing template")},l(t){e=Z(t,"Missing template")},m(t,l){O(t,e,l)},d(t){t&&m(e)}}}function ke(s,e){let t,l,o;const n=e[14].default,a=Ce(n,e,e[13],be),r=a||$e();return{key:s,first:null,c(){t=B("svelte-virtual-list-row"),r&&r.c(),l=U(),this.h()},l(i){t=y(i,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var f=V(t);r&&r.l(f),l=q(f),f.forEach(m),this.h()},h(){ce(t,"class","svelte-102fq2u"),this.first=t},m(i,f){O(i,t,f),r&&r.m(t,null),S(t,l),o=!0},p(i,f){e=i,a&&a.p&&(!o||f&8208)&&He(a,n,e,e[13],o?We(n,e[13],f,xe):Pe(e[13]),be)},i(i){o||(C(r,i),o=!0)},o(i){H(r,i),o=!1},d(i){i&&m(t),r&&r.d(i)}}}function et(s){let e,t,l=[],o=new Map,n,a,r,i,f=s[4];const h=c=>c[22].index;for(let c=0;c<f.length;c+=1){let u=ve(s,f,c),d=h(u);o.set(d,l[c]=ke(d,u))}return{c(){e=B("svelte-virtual-list-viewport"),t=B("svelte-virtual-list-contents");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=y(c,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var u=V(e);t=y(u,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=V(t);for(let p=0;p<l.length;p+=1)l[p].l(d);d.forEach(m),u.forEach(m),this.h()},h(){D(t,"padding-top",s[5]+"px"),D(t,"padding-bottom",s[6]+"px"),ce(t,"class","svelte-102fq2u"),D(e,"height",s[0]),ce(e,"class","svelte-102fq2u"),ue(()=>s[17].call(e))},m(c,u){O(c,e,u),S(e,t);for(let d=0;d<l.length;d+=1)l[d].m(t,null);s[15](t),s[16](e),n=Fe(e,s[17].bind(e)),a=!0,r||(i=K(e,"scroll",s[7]),r=!0)},p(c,[u]){u&8208&&(f=c[4],Se(),l=Ne(l,u,h,1,c,f,o,t,Ae,ke,null,ve),Be()),(!a||u&32)&&D(t,"padding-top",c[5]+"px"),(!a||u&64)&&D(t,"padding-bottom",c[6]+"px"),(!a||u&1)&&D(e,"height",c[0])},i(c){if(!a){for(let u=0;u<f.length;u+=1)C(l[u]);a=!0}},o(c){for(let u=0;u<l.length;u+=1)H(l[u]);a=!1},d(c){c&&m(e);for(let u=0;u<l.length;u+=1)l[u].d();s[15](null),s[16](null),n(),r=!1,i()}}}function tt(s,e,t){let{$$slots:l={},$$scope:o}=e,{items:n}=e,{height:a="100%"}=e,{itemHeight:r=void 0}=e,{start:i=0}=e,{end:f=0}=e,h=[],c,u,d,p=0,F,v,b=0,A=0,I;async function le(g,R,N){const{scrollTop:P}=u;await ae();let z=b-P,w=i;for(;z<R&&w<g.length;){let G=c[w-i];G||(t(9,f=w+1),await ae(),G=c[w-i]),z+=h[w]=N||G.offsetHeight,w+=1}t(9,f=w);const se=g.length-f;I=(b+z)/f,t(6,A=se*I),h.length=g.length,u.scrollTo(0,0)}async function _(){const{scrollTop:g}=u,R=i;for(let w=0;w<c.length;w+=1)h[i+w]=r||c[w].offsetHeight;let N=0,P=0;for(;N<n.length;){const w=h[N]||I;if(P+w>g){t(8,i=N),t(5,b=P);break}P+=w,N+=1}for(;N<n.length&&(P+=h[N]||I,N+=1,!(P>g+p)););t(9,f=N);const z=n.length-f;for(I=P/f;N<n.length;)h[N++]=I;if(t(6,A=z*I),i<R){await ae();let w=0,se=0;for(let M=i;M<R;M+=1)c[M-i]&&(w+=h[M],se+=r||c[M-i].offsetHeight);const G=se-w;u.scrollTo(0,g+G)}}Oe(()=>{c=d.getElementsByTagName("svelte-virtual-list-row"),t(12,v=!0)});function k(g){fe[g?"unshift":"push"](()=>{d=g,t(3,d)})}function L(g){fe[g?"unshift":"push"](()=>{u=g,t(2,u)})}function T(){p=this.offsetHeight,t(1,p)}return s.$$set=g=>{"items"in g&&t(10,n=g.items),"height"in g&&t(0,a=g.height),"itemHeight"in g&&t(11,r=g.itemHeight),"start"in g&&t(8,i=g.start),"end"in g&&t(9,f=g.end),"$$scope"in g&&t(13,o=g.$$scope)},s.$$.update=()=>{s.$$.dirty&1792&&t(4,F=n.slice(i,f).map((g,R)=>({index:R+i,data:g}))),s.$$.dirty&7170&&v&&le(n,p,r)},[a,p,u,d,F,b,A,_,i,f,n,r,v,o,l,k,L,T]}class lt extends Q{constructor(e){super(),X(this,e,tt,et,j,{items:10,height:0,itemHeight:11,start:8,end:9})}}function st(s){let e,t;return e=new Ze({props:{songWithInsideBook:s[5]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&32&&(n.songWithInsideBook=l[5]),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function nt(s){let e,t,l;return t=new lt({props:{items:s[0],height:"100%",$$slots:{default:[st,({item:o})=>({5:o}),({item:o})=>o?32:0]},$$scope:{ctx:s}}}),{c(){e=B("div"),x(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{id:!0,class:!0});var n=V(e);$(t.$$.fragment,n),n.forEach(m),this.h()},h(){E(e,"id","virtual-list-div"),E(e,"class","text-left flex-1 overflow-auto px-1 w-full")},m(o,n){O(o,e,n),ee(t,e,null),l=!0},p(o,[n]){const a={};n&1&&(a.items=o[0]),n&96&&(a.$$scope={dirty:n,ctx:o}),t.$set(a)},i(o){l||(C(t.$$.fragment,o),l=!0)},o(o){H(t.$$.fragment,o),l=!1},d(o){o&&m(e),te(t)}}}function ot(s,e,t){let l,o,n;W(s,re,i=>t(2,l=i)),W(s,qe,i=>t(3,o=i)),W(s,ze,i=>t(4,n=i));let{selectedBook:a}=e,r;return s.$$set=i=>{"selectedBook"in i&&t(1,a=i.selectedBook)},s.$$.update=()=>{if(s.$$.dirty&30){let i;if(a.T!==Ge)i=n[a.T];else{const f=Ke();i=o.filter(h=>f.includes(h.I)).map(h=>({song:h}))}t(0,r=Qe(i,l))}},[r,a,l,o,n]}class Ve extends Q{constructor(e){super(),X(this,e,ot,nt,j,{selectedBook:1})}}function we(s,e,t){const l=s.slice();return l[9]=e[t],l}function Te(s,e,t){const l=s.slice();return l[9]=e[t],l}function Ie(s){let e,t=s[9].T+"",l;return{c(){e=B("option"),l=Y(t),this.h()},l(o){e=y(o,"OPTION",{});var n=V(e);l=Z(n,t),n.forEach(m),this.h()},h(){e.__value=s[9],e.value=e.__value},m(o,n){O(o,e,n),S(e,l)},p:oe,d(o){o&&m(e)}}}function Le(s){let e,t,l,o=s[2],n=[];for(let a=0;a<o.length;a+=1)n[a]=Ee(we(s,o,a));return{c(){e=B("select");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=y(a,"SELECT",{class:!0});var r=V(e);for(let i=0;i<n.length;i+=1)n[i].l(r);r.forEach(m),this.h()},h(){E(e,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0"),s[0]===void 0&&ue(()=>s[7].call(e))},m(a,r){O(a,e,r);for(let i=0;i<n.length;i+=1)n[i].m(e,null);ie(e,s[0]),t||(l=K(e,"change",s[7]),t=!0)},p(a,r){if(r&4){o=a[2];let i;for(i=0;i<o.length;i+=1){const f=we(a,o,i);n[i]?n[i].p(f,r):(n[i]=Ee(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}r&5&&ie(e,a[0])},d(a){a&&m(e),ye(n,a),t=!1,l()}}}function Ee(s){let e,t=s[9].T.split(" ",2)[1]+"",l,o;return{c(){e=B("option"),l=Y(t),this.h()},l(n){e=y(n,"OPTION",{});var a=V(e);l=Z(a,t),a.forEach(m),this.h()},h(){e.__value=o=s[9],e.value=e.__value},m(n,a){O(n,e,a),S(e,l)},p(n,a){a&4&&t!==(t=n[9].T.split(" ",2)[1]+"")&&Me(l,t),a&4&&o!==(o=n[9])&&(e.__value=o,e.value=e.__value)},d(n){n&&m(e)}}}function it(s){let e,t;return e=new Ve({props:{selectedBook:s[1]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&2&&(n.selectedBook=l[1]),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function rt(s){let e,t;return e=new Ve({props:{selectedBook:s[0]}}),{c(){x(e.$$.fragment)},l(l){$(e.$$.fragment,l)},m(l,o){ee(e,l,o),t=!0},p(l,o){const n={};o&1&&(n.selectedBook=l[0]),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function at(s){let e,t,l,o,n=s[1]!=null&&J(s[1]),a,r,i,f,h,c,u,d,p,F=s[4],v=[];for(let _=0;_<F.length;_+=1)v[_]=Ie(Te(s,F,_));let b=n&&Le(s);const A=[rt,it],I=[];function le(_,k){return k&2&&(f=null),_[1]!=null&&_[0]?0:(f==null&&(f=!!(_[1]!=null&&ct(_[1]))),f?1:-1)}return~(h=le(s,-1))&&(c=I[h]=A[h](s)),{c(){e=B("div"),t=B("div"),l=B("select");for(let _=0;_<v.length;_+=1)v[_].c();o=U(),b&&b.c(),a=U(),r=B("input"),i=U(),c&&c.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var k=V(e);t=y(k,"DIV",{});var L=V(t);l=y(L,"SELECT",{class:!0});var T=V(l);for(let g=0;g<v.length;g+=1)v[g].l(T);T.forEach(m),o=q(L),b&&b.l(L),a=q(L),r=y(L,"INPUT",{class:!0,placeholder:!0,type:!0}),L.forEach(m),i=q(k),c&&c.l(k),k.forEach(m),this.h()},h(){E(l,"class","select select-bordered w-full max-w-md mb-1 lg:mb-0"),s[1]===void 0&&ue(()=>s[6].call(l)),E(r,"class","input input-bordered w-full max-w-md mb-1 focus:border-current focus:ring-0"),E(r,"placeholder","Suche"),E(r,"type","search"),E(e,"class","flex flex-col overflow-hidden w-full h-full p-1")},m(_,k){O(_,e,k),S(e,t),S(t,l);for(let L=0;L<v.length;L+=1)v[L].m(l,null);ie(l,s[1]),S(t,o),b&&b.m(t,null),S(t,a),S(t,r),he(r,s[3]),S(e,i),~h&&I[h].m(e,null),u=!0,d||(p=[K(l,"change",s[6]),K(r,"input",s[8])],d=!0)},p(_,[k]){if(k&16){F=_[4];let T;for(T=0;T<F.length;T+=1){const g=Te(_,F,T);v[T]?v[T].p(g,k):(v[T]=Ie(g),v[T].c(),v[T].m(l,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=F.length}k&18&&ie(l,_[1]),k&2&&(n=_[1]!=null&&J(_[1])),n?b?b.p(_,k):(b=Le(_),b.c(),b.m(t,a)):b&&(b.d(1),b=null),k&8&&he(r,_[3]);let L=h;h=le(_,k),h===L?~h&&I[h].p(_,k):(c&&(Se(),H(I[L],1,1,()=>{I[L]=null}),Be()),~h?(c=I[h],c?c.p(_,k):(c=I[h]=A[h](_),c.c()),C(c,1),c.m(e,null)):c=null)},i(_){u||(C(c),u=!0)},o(_){H(c),u=!1},d(_){_&&m(e),ye(v,_),b&&b.d(),~h&&I[h].d(),d=!1,Re(p)}}}function J(s){return s.hasOwnProperty("F")}function ct(s){return!J(s)}function ut(s,e,t){let l,o,n,a,r;W(s,ne,u=>t(0,o=u)),W(s,Je,u=>t(5,n=u)),W(s,de,u=>t(1,a=u)),W(s,re,u=>t(3,r=u));const i=[...n.filter(u=>!me.some(d=>u.T.startsWith(d.F))),...me];function f(){a=ge(this),de.set(a),t(4,i)}function h(){o=ge(this),ne.set(o),t(2,l),t(1,a),t(5,n)}function c(){r=this.value,re.set(r)}return s.$$.update=()=>{if(s.$$.dirty&34&&t(2,l=a&&J(a)?n.filter(u=>u.T.startsWith(a.F)):new Array),s.$$.dirty&35)if(a&&J(a)){const u=a.F;(!o||!o.T.startsWith(u))&&_e(ne,o=n.filter(d=>d.T.startsWith(u))[0],o)}else _e(ne,o=null,o)},[o,a,l,r,i,n,f,h,c]}class ft extends Q{constructor(e){super(),X(this,e,ut,at,j,{})}}function ht(s){let e,t,l,o,n,a;return n=new ft({}),{c(){e=B("div"),t=B("h1"),l=Y("Geistliche Lieder!"),o=U(),x(n.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=V(e);t=y(i,"H1",{class:!0});var f=V(t);l=Z(f,"Geistliche Lieder!"),f.forEach(m),i.forEach(m),o=q(r),$(n.$$.fragment,r),this.h()},h(){E(t,"class","svelte-yzh2bf"),E(e,"class","prose m-auto h-auto mx-auto my-1")},m(r,i){O(r,e,i),S(e,t),S(t,l),O(r,o,i),ee(n,r,i),a=!0},p:oe,i(r){a||(C(n.$$.fragment,r),a=!0)},o(r){H(n.$$.fragment,r),a=!1},d(r){r&&m(e),r&&m(o),te(n,r)}}}class dt extends Q{constructor(e){super(),X(this,e,null,ht,j,{})}}export{dt as default};
