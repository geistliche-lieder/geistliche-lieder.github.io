import{e as S,b as h,A as d,F as m,d as L}from"./store.8dced48f.js";function $(e){let o=e.T;for(;o.includes(";");)o=o.replace(";"," ");return o}function T(e){return e.V.some(o=>o.L.some(l=>l.includes("{")))}async function I(){return JSON.parse(await fetch("/songs.json").then(e=>e.text()))}let f=!1;async function x(){if(f)return;const e=await I();O(e),f=!0}function O(e){e.B.sort((t,n)=>t.T>n.T?1:-1),e.S.sort((t,n)=>t.T>n.T?1:-1);const o=e.S.reduce((t,n)=>(t[n.I]=n,t),{}),l=e.S.reduce((t,n)=>((t[n.T]==null||T(n))&&(t[n.T]=n),t),{}),s=e.B.reduce((t,n)=>{S.update(a=>[...a,n]);const r=n.S.map(a=>({song:o[a.V],songInsideBook:a}));return t[n.T]=r,t},{});h.set(e.S);const i=e.S.map(t=>t.T).filter((t,n,r)=>r.indexOf(t)===n);s[d]=i.map(t=>({song:l[t]})),s[m]=[],L.set(s);for(const t of e.S)p(t)}function c(e,o){let l="",s=!1;for(const i of e)i==="{"?s=!0:i==="}"?s=!1:s?o&&(l+=`<sup class="text-red-600">${i}</sup>`):l+=i;return l}const g={};function p(e){g[e.I]=e.V.map(v).join(" ")}function v(e){return e.L.map(o=>c(o,!1)).join(" ")}function B(e){return g[e.I]}function C(e){const o=e.O[e.O.length-1],s=e.O.filter(n=>n===o).length>1;let t=`\uFEFF#LangCount=${e.M?2:1}\r
`;t+=`#Title=${e.T}\r
`,t+=`#Version=3\r
`,t+=`#VerseOrder=${e.O.map((n,r)=>`${e.V.find(a=>a.I===n).T}${s&&r===e.O.length-1?" (Ende)":""}`).join(", ")}\r
`;for(const n of e.V){t+=`---\r
`,t+=`${n.T}\r
`;const r=e.M?n.L.filter((a,u)=>u<n.L.length-2):n.L;for(const a of r)t+=`${c(a,!1)}\r
`}if(s){const n=e.V.find(r=>r.I===o);t+=`---\r
`,t+=`${n.T} (Ende)\r
`;for(const r of n.L)t+=`${c(r,!1)}\r
`}return t+=`-----\r
`,t}function w(e){const o=localStorage.getItem("favorites");return o!=null&&o.includes(e)}function y(e){let o=localStorage.getItem("favorites")??"";e=`${e};`,o.length&&o.includes(e)?o=o.replace(e,""):o+=e;try{localStorage.setItem("favorites",o)}catch{}}function A(){const e=localStorage.getItem("favorites");return e?e.split(";"):[]}function _(){localStorage.getItem("hideLatinLetters")!=null?localStorage.removeItem("hideLatinLetters"):localStorage.setItem("hideLatinLetters","")}function E(){return localStorage.getItem("hideLatinLetters")==null}function M(){localStorage.getItem("hideTranslation")!=null?localStorage.removeItem("hideTranslation"):localStorage.setItem("hideTranslation","")}function F(){return localStorage.getItem("hideTranslation")==null}function b(){localStorage.getItem("hideNotes")!=null?localStorage.removeItem("hideNotes"):localStorage.setItem("hideNotes","")}function G(){return localStorage.getItem("hideNotes")==null}function J(){N()?localStorage.removeItem("fullTextSearch"):localStorage.setItem("fullTextSearch","")}function N(){return localStorage.getItem("fullTextSearch")!=null}export{B as a,w as b,y as c,A as d,E as e,F as f,N as g,G as h,x as i,$ as j,C as k,_ as l,M as m,b as n,c as o,T as s,J as t};
