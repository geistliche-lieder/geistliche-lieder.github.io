import{b as m,a as d,A as T,F as I,s as p}from"./D79XK5zt.js";function C(t){let n=t.T;for(;n.includes(";");)n=n.replace(";"," ");return n}function O(t){return t.V.some(n=>n.L.some(a=>a.includes("{")))}async function V(){return JSON.parse(await fetch("/songs.json").then(t=>t.text()))}let h=!1;async function B(){if(h)return;const t=await V();w(t),h=!0}function w(t){t.B.sort((e,s)=>e.T>s.T?1:-1),t.S.sort((e,s)=>e.T>s.T?1:-1);const n=t.S.reduce((e,s)=>(e[s.I]=s,e),{}),a=t.S.reduce((e,s)=>((e[s.T]==null||O(s))&&(e[s.T]=s),e),{}),c=t.B.reduce((e,s)=>{m.update(o=>[...o,s]);const r=s.S.map(o=>({song:n[o.V],songInsideBook:o}));return e[s.T]=r,e},{});d.set(t.S);const i=t.S.map(e=>e.T).filter((e,s,r)=>r.indexOf(e)===s);c[T]=i.map(e=>({song:a[e]})),c[I]=[],p.set(c);for(const e of t.S)v(e)}function g(t,n){let a="",c=!1;for(const i of t)i==="{"?c=!0:i==="}"?c=!1:c?n&&(a+=`<sup class="text-red-600">${i}</sup>`):a+=i;return a}const S={},L={};function v(t){S[t.I]=t.V.map(N).join(" "),L[t.I]=S[t.I].toLocaleLowerCase()}function N(t){return t.L.map(n=>g(n,!1)).join(" ")}function _(t){return S[t.I]}function x(t){return L[t.I]}function y(t,n){const a=t.O[t.O.length-1],i=t.O.filter(o=>o===a).length>1,e=t.V.find(o=>o.I===a).T;if(i)if(e.split(" ").length===1)t.V.filter(o=>o.T===e).forEach(o=>o.T+=" 1");else return null;let r=`\uFEFF#LangCount=${t.M?2:1}\r
`;r+=`#Title=${t.T}\r
`,n!=null&&n.trim()!==""&&(r+=`#Songbook=${n}\r
`),r+=`#Version=3\r
`,r+=`#VerseOrder=${t.O.map((o,f)=>i&&f===t.O.length-1?`${e} 2`:`${t.V.find(l=>l.I===o).T}`).join(",")}\r
`;for(const o of t.V){r+=`---\r
`,r+=`${o.T}\r
`;const f=t.M?o.L.filter((l,u)=>u<o.L.length-2):o.L;for(const l of f)r+=`${g(l,!1)}\r
`}if(i){const o=t.V.find(l=>l.I===a);r+=`---\r
`,r+=`${e} 2\r
`;const f=t.M?o.L.filter((l,u)=>u<o.L.length-2):o.L;for(const l of f)r+=`${g(l,!1)}\r
`}return r+="-----",r}function A(t){const n=localStorage.getItem("favorites");return n!=null&&n.includes(t)}function M(t){let n=localStorage.getItem("favorites")??"";t=`${t};`,n.length&&n.includes(t)?n=n.replace(t,""):n+=t;try{localStorage.setItem("favorites",n)}catch{}}function E(){const t=localStorage.getItem("favorites");return t?t.split(";"):[]}function F(){localStorage.getItem("hideLatinLetters")!=null?localStorage.removeItem("hideLatinLetters"):localStorage.setItem("hideLatinLetters","")}function G(){return localStorage.getItem("hideLatinLetters")==null}function J(){localStorage.getItem("showTranslation")!=null?localStorage.removeItem("showTranslation"):localStorage.setItem("showTranslation","")}function K(){return localStorage.getItem("showTranslation")!=null}function q(){localStorage.getItem("hideNotes")!=null?localStorage.removeItem("hideNotes"):localStorage.setItem("hideNotes","")}function z(){return localStorage.getItem("hideNotes")==null}export{y as a,x as b,_ as c,A as d,E as e,G as f,C as g,K as h,B as i,z as j,g as k,q as l,J as m,F as n,O as s,M as t};
