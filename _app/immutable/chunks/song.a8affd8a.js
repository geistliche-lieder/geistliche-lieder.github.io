import{e as h,b as d,A as L,F as m,d as T}from"./store.8dced48f.js";function $(e){let o=e.T;for(;o.includes(";");)o=o.replace(";"," ");return o}function I(e){return e.V.some(o=>o.L.some(l=>l.includes("{")))}async function p(){return JSON.parse(await fetch("/songs.json").then(e=>e.text()))}let g=!1;async function w(){if(g)return;const e=await p();O(e),g=!0}function O(e){e.B.sort((t,n)=>t.T>n.T?1:-1),e.S.sort((t,n)=>t.T>n.T?1:-1);const o=e.S.reduce((t,n)=>(t[n.I]=n,t),{}),l=e.S.reduce((t,n)=>((t[n.T]==null||I(n))&&(t[n.T]=n),t),{}),s=e.B.reduce((t,n)=>{h.update(a=>[...a,n]);const r=n.S.map(a=>({song:o[a.V],songInsideBook:a}));return t[n.T]=r,t},{});d.set(e.S);const i=e.S.map(t=>t.T).filter((t,n,r)=>r.indexOf(t)===n);s[L]=i.map(t=>({song:l[t]})),s[m]=[],T.set(s);for(const t of e.S)v(t)}function c(e,o){let l="",s=!1;for(const i of e)i==="{"?s=!0:i==="}"?s=!1:s?o&&(l+=`<sup class="text-red-600">${i}</sup>`):l+=i;return l}const u={},S={};function v(e){u[e.I]=e.V.map(N).join(" "),S[e.I]=u[e.I].toLocaleLowerCase()}function N(e){return e.L.map(o=>c(o,!1)).join(" ")}function x(e){return u[e.I]}function B(e){return S[e.I]}function y(e){const o=e.O[e.O.length-1],s=e.O.filter(n=>n===o).length>1;let t=`\uFEFF#LangCount=${e.M?2:1}\r
`;t+=`#Title=${e.T}\r
`,t+=`#Version=3\r
`,t+=`#VerseOrder=${e.O.map((n,r)=>`${e.V.find(a=>a.I===n).T}${s&&r===e.O.length-1?" (Ende)":""}`).join(", ")}\r
`;for(const n of e.V){t+=`---\r
`,t+=`${n.T}\r
`;const r=e.M?n.L.filter((a,f)=>f<n.L.length-2):n.L;for(const a of r)t+=`${c(a,!1)}\r
`}if(s){const n=e.V.find(r=>r.I===o);t+=`---\r
`,t+=`${n.T} (Ende)\r
`;for(const r of n.L)t+=`${c(r,!1)}\r
`}return t+=`-----\r
`,t}function A(e){const o=localStorage.getItem("favorites");return o!=null&&o.includes(e)}function _(e){let o=localStorage.getItem("favorites")??"";e=`${e};`,o.length&&o.includes(e)?o=o.replace(e,""):o+=e;try{localStorage.setItem("favorites",o)}catch{}}function E(){const e=localStorage.getItem("favorites");return e?e.split(";"):[]}function M(){localStorage.getItem("hideLatinLetters")!=null?localStorage.removeItem("hideLatinLetters"):localStorage.setItem("hideLatinLetters","")}function F(){return localStorage.getItem("hideLatinLetters")==null}function b(){localStorage.getItem("hideTranslation")!=null?localStorage.removeItem("hideTranslation"):localStorage.setItem("hideTranslation","")}function G(){return localStorage.getItem("hideTranslation")==null}function J(){localStorage.getItem("hideNotes")!=null?localStorage.removeItem("hideNotes"):localStorage.setItem("hideNotes","")}function K(){return localStorage.getItem("hideNotes")==null}function k(){V()?localStorage.removeItem("fullTextSearch"):localStorage.setItem("fullTextSearch","")}function V(){return localStorage.getItem("fullTextSearch")!=null}export{B as a,x as b,A as c,_ as d,E as e,F as f,V as g,G as h,w as i,K as j,$ as k,y as l,M as m,b as n,J as o,c as p,I as s,k as t};
