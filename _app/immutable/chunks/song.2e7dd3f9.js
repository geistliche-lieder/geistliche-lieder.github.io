import{e as L,b as d,A as m,F as T,d as I}from"./store.8dced48f.js";function $(e){let n=e.T;for(;n.includes(";");)n=n.replace(";"," ");return n}function p(e){return e.V.some(n=>n.L.some(c=>c.includes("{")))}async function O(){return JSON.parse(await fetch("/songs.json").then(e=>e.text()))}let S=!1;async function w(){if(S)return;const e=await O();V(e),S=!0}function V(e){e.B.sort((o,t)=>o.T>t.T?1:-1),e.S.sort((o,t)=>o.T>t.T?1:-1);const n=e.S.reduce((o,t)=>(o[t.I]=t,o),{}),c=e.S.reduce((o,t)=>((o[t.T]==null||p(t))&&(o[t.T]=t),o),{}),r=e.B.reduce((o,t)=>{L.update(i=>[...i,t]);const s=t.S.map(i=>({song:n[i.V],songInsideBook:i}));return o[t.T]=s,o},{});d.set(e.S);const a=e.S.map(o=>o.T).filter((o,t,s)=>s.indexOf(o)===t);r[m]=a.map(o=>({song:c[o]})),r[T]=[],I.set(r);for(const o of e.S)N(o)}function u(e,n){let c="",r=!1;for(const a of e)a==="{"?r=!0:a==="}"?r=!1:r?n&&(c+=`<sup class="text-red-600">${a}</sup>`):c+=a;return c}const g={},h={};function N(e){g[e.I]=e.V.map(v).join(" "),h[e.I]=g[e.I].toLocaleLowerCase()}function v(e){return e.L.map(n=>u(n,!1)).join(" ")}function B(e){return g[e.I]}function _(e){return h[e.I]}function x(e){const n=e.O[e.O.length-1],r=e.O.filter(s=>s===n).length>1,a=e.V.find(s=>s.I===n).T;if(r)if(a.split(" ").length===1)e.V.filter(s=>s.T===a).forEach(s=>s.T+=" 1");else return null;let t=`\uFEFF#LangCount=${e.M?2:1}\r
`;t+=`#Title=${e.T}\r
`,t+=`#Version=3\r
`,t+=`#VerseOrder=${e.O.map((s,i)=>r&&i===e.O.length-1?`${a} 2`:`${e.V.find(l=>l.I===s).T}`).join(",")}\r
`;for(const s of e.V){t+=`---\r
`,t+=`${s.T}\r
`;const i=e.M?s.L.filter((l,f)=>f<s.L.length-2):s.L;for(const l of i)t+=`${u(l,!1)}\r
`}if(r){const s=e.V.find(l=>l.I===n);t+=`---\r
`,t+=`${a} 2\r
`;const i=e.M?s.L.filter((l,f)=>f<s.L.length-2):s.L;for(const l of i)t+=`${u(l,!1)}\r
`}return t+="-----",t}function y(e){const n=localStorage.getItem("favorites");return n!=null&&n.includes(e)}function A(e){let n=localStorage.getItem("favorites")??"";e=`${e};`,n.length&&n.includes(e)?n=n.replace(e,""):n+=e;try{localStorage.setItem("favorites",n)}catch{}}function M(){const e=localStorage.getItem("favorites");return e?e.split(";"):[]}function E(){localStorage.getItem("hideLatinLetters")!=null?localStorage.removeItem("hideLatinLetters"):localStorage.setItem("hideLatinLetters","")}function F(){return localStorage.getItem("hideLatinLetters")==null}function b(){localStorage.getItem("hideTranslation")!=null?localStorage.removeItem("hideTranslation"):localStorage.setItem("hideTranslation","")}function G(){return localStorage.getItem("hideTranslation")==null}function J(){localStorage.getItem("hideNotes")!=null?localStorage.removeItem("hideNotes"):localStorage.setItem("hideNotes","")}function K(){return localStorage.getItem("hideNotes")==null}export{B as a,y as b,M as c,F as d,G as e,K as f,_ as g,$ as h,w as i,x as j,E as k,b as l,J as m,u as n,p as s,A as t};
