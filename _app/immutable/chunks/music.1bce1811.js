import{w as mr}from"./scheduler.a6ab6dcc.js";import{o as De,a as Re,f as re,c as oe}from"./store.c404d4b6.js";import{i as wr}from"./common.1905f694.js";var vr=Object.create,me=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,_r=Object.getOwnPropertyNames,Sr=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty,Br=t=>me(t,"__esModule",{value:!0}),Ir=(t,r)=>()=>(t&&(r=t(t=0)),r),X=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Rr=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of _r(r))!Ar.call(t,u)&&(n||u!=="default")&&me(t,u,{get:()=>r[u],enumerable:!(o=Er(r,u))||o.enumerable});return t},St=(t,r)=>Rr(Br(me(t!=null?vr(Sr(t)):{},"default",!r&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),kr=X(t=>{K(),t.byteLength=c,t.toByteArray=b,t.fromByteArray=T;var r=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,l=u.length;s<l;++s)r[s]=u[s],n[u.charCodeAt(s)]=s;var s,l;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function i(h){var g=h.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=h.indexOf("=");w===-1&&(w=g);var k=w===g?0:4-w%4;return[w,k]}function c(h){var g=i(h),w=g[0],k=g[1];return(w+k)*3/4-k}function p(h,g,w){return(g+w)*3/4-w}function b(h){var g,w=i(h),k=w[0],E=w[1],I=new o(p(h,k,E)),L=0,F=E>0?k-4:k,_;for(_=0;_<F;_+=4)g=n[h.charCodeAt(_)]<<18|n[h.charCodeAt(_+1)]<<12|n[h.charCodeAt(_+2)]<<6|n[h.charCodeAt(_+3)],I[L++]=g>>16&255,I[L++]=g>>8&255,I[L++]=g&255;return E===2&&(g=n[h.charCodeAt(_)]<<2|n[h.charCodeAt(_+1)]>>4,I[L++]=g&255),E===1&&(g=n[h.charCodeAt(_)]<<10|n[h.charCodeAt(_+1)]<<4|n[h.charCodeAt(_+2)]>>2,I[L++]=g>>8&255,I[L++]=g&255),I}function m(h){return r[h>>18&63]+r[h>>12&63]+r[h>>6&63]+r[h&63]}function A(h,g,w){for(var k,E=[],I=g;I<w;I+=3)k=(h[I]<<16&16711680)+(h[I+1]<<8&65280)+(h[I+2]&255),E.push(m(k));return E.join("")}function T(h){for(var g,w=h.length,k=w%3,E=[],I=16383,L=0,F=w-k;L<F;L+=I)E.push(A(h,L,L+I>F?F:L+I));return k===1?(g=h[w-1],E.push(r[g>>2]+r[g<<4&63]+"==")):k===2&&(g=(h[w-2]<<8)+h[w-1],E.push(r[g>>10]+r[g>>4&63]+r[g<<2&63]+"=")),E.join("")}}),Or=X(t=>{K(),t.read=function(r,n,o,u,s){var l,i,c=s*8-u-1,p=(1<<c)-1,b=p>>1,m=-7,A=o?s-1:0,T=o?-1:1,h=r[n+A];for(A+=T,l=h&(1<<-m)-1,h>>=-m,m+=c;m>0;l=l*256+r[n+A],A+=T,m-=8);for(i=l&(1<<-m)-1,l>>=-m,m+=u;m>0;i=i*256+r[n+A],A+=T,m-=8);if(l===0)l=1-b;else{if(l===p)return i?NaN:(h?-1:1)*(1/0);i=i+Math.pow(2,u),l=l-b}return(h?-1:1)*i*Math.pow(2,l-u)},t.write=function(r,n,o,u,s,l){var i,c,p,b=l*8-s-1,m=(1<<b)-1,A=m>>1,T=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=u?0:l-1,g=u?1:-1,w=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(c=isNaN(n)?1:0,i=m):(i=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-i))<1&&(i--,p*=2),i+A>=1?n+=T/p:n+=T*Math.pow(2,1-A),n*p>=2&&(i++,p/=2),i+A>=m?(c=0,i=m):i+A>=1?(c=(n*p-1)*Math.pow(2,s),i=i+A):(c=n*Math.pow(2,A-1)*Math.pow(2,s),i=0));s>=8;r[o+h]=c&255,h+=g,c/=256,s-=8);for(i=i<<s|c,b+=s;b>0;r[o+h]=i&255,h+=g,i/=256,b-=8);r[o+h-g]|=w*128}}),Xt=X(t=>{K();var r=kr(),n=Or(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=i,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;var u=2147483647;t.kMaxLength=u,i.TYPED_ARRAY_SUPPORT=s(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let e=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(e,a),e.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function l(e){if(e>u)throw new RangeError('The value "'+e+'" is invalid for option "size"');let a=new Uint8Array(e);return Object.setPrototypeOf(a,i.prototype),a}function i(e,a,f){if(typeof e=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return c(e,a,f)}i.poolSize=8192;function c(e,a,f){if(typeof e=="string")return A(e,a);if(ArrayBuffer.isView(e))return h(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(vt(e,ArrayBuffer)||e&&vt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vt(e,SharedArrayBuffer)||e&&vt(e.buffer,SharedArrayBuffer)))return g(e,a,f);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let v=e.valueOf&&e.valueOf();if(v!=null&&v!==e)return i.from(v,a,f);let R=w(e);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return i.from(e[Symbol.toPrimitive]("string"),a,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}i.from=function(e,a,f){return c(e,a,f)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function p(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function b(e,a,f){return p(e),e<=0?l(e):a!==void 0?typeof f=="string"?l(e).fill(a,f):l(e).fill(a):l(e)}i.alloc=function(e,a,f){return b(e,a,f)};function m(e){return p(e),l(e<0?0:k(e)|0)}i.allocUnsafe=function(e){return m(e)},i.allocUnsafeSlow=function(e){return m(e)};function A(e,a){if((typeof a!="string"||a==="")&&(a="utf8"),!i.isEncoding(a))throw new TypeError("Unknown encoding: "+a);let f=I(e,a)|0,v=l(f),R=v.write(e,a);return R!==f&&(v=v.slice(0,R)),v}function T(e){let a=e.length<0?0:k(e.length)|0,f=l(a);for(let v=0;v<a;v+=1)f[v]=e[v]&255;return f}function h(e){if(vt(e,Uint8Array)){let a=new Uint8Array(e);return g(a.buffer,a.byteOffset,a.byteLength)}return T(e)}function g(e,a,f){if(a<0||e.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<a+(f||0))throw new RangeError('"length" is outside of buffer bounds');let v;return a===void 0&&f===void 0?v=new Uint8Array(e):f===void 0?v=new Uint8Array(e,a):v=new Uint8Array(e,a,f),Object.setPrototypeOf(v,i.prototype),v}function w(e){if(i.isBuffer(e)){let a=k(e.length)|0,f=l(a);return f.length===0||e.copy(f,0,0,a),f}if(e.length!==void 0)return typeof e.length!="number"||qt(e.length)?l(0):T(e);if(e.type==="Buffer"&&Array.isArray(e.data))return T(e.data)}function k(e){if(e>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return e|0}function E(e){return+e!=e&&(e=0),i.alloc(+e)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,a){if(vt(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),vt(a,Uint8Array)&&(a=i.from(a,a.offset,a.byteLength)),!i.isBuffer(e)||!i.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===a)return 0;let f=e.length,v=a.length;for(let R=0,x=Math.min(f,v);R<x;++R)if(e[R]!==a[R]){f=e[R],v=a[R];break}return f<v?-1:v<f?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,a){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);let f;if(a===void 0)for(a=0,f=0;f<e.length;++f)a+=e[f].length;let v=i.allocUnsafe(a),R=0;for(f=0;f<e.length;++f){let x=e[f];if(vt(x,Uint8Array))R+x.length>v.length?(i.isBuffer(x)||(x=i.from(x)),x.copy(v,R)):Uint8Array.prototype.set.call(v,x,R);else if(i.isBuffer(x))x.copy(v,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=x.length}return v};function I(e,a){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||vt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let f=e.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&f===0)return 0;let R=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return lt(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Rt(e).length;default:if(R)return v?-1:lt(e).length;a=(""+a).toLowerCase(),R=!0}}i.byteLength=I;function L(e,a,f){let v=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,a>>>=0,f<=a))return"";for(e||(e="utf8");;)switch(e){case"hex":return pt(this,a,f);case"utf8":case"utf-8":return tt(this,a,f);case"ascii":return at(this,a,f);case"latin1":case"binary":return bt(this,a,f);case"base64":return H(this,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,a,f);default:if(v)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),v=!0}}i.prototype._isBuffer=!0;function F(e,a,f){let v=e[a];e[a]=e[f],e[f]=v}i.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<e;a+=2)F(this,a,a+1);return this},i.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<e;a+=4)F(this,a,a+3),F(this,a+1,a+2);return this},i.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<e;a+=8)F(this,a,a+7),F(this,a+1,a+6),F(this,a+2,a+5),F(this,a+3,a+4);return this},i.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?tt(this,0,e):L.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){let e="",a=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(e+=" ... "),"<Buffer "+e+">"},o&&(i.prototype[o]=i.prototype.inspect),i.prototype.compare=function(e,a,f,v,R){if(vt(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(a===void 0&&(a=0),f===void 0&&(f=e?e.length:0),v===void 0&&(v=0),R===void 0&&(R=this.length),a<0||f>e.length||v<0||R>this.length)throw new RangeError("out of range index");if(v>=R&&a>=f)return 0;if(v>=R)return-1;if(a>=f)return 1;if(a>>>=0,f>>>=0,v>>>=0,R>>>=0,this===e)return 0;let x=R-v,z=f-a,ft=Math.min(x,z),mt=this.slice(v,R),ht=e.slice(a,f);for(let ct=0;ct<ft;++ct)if(mt[ct]!==ht[ct]){x=mt[ct],z=ht[ct];break}return x<z?-1:z<x?1:0};function _(e,a,f,v,R){if(e.length===0)return-1;if(typeof f=="string"?(v=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,qt(f)&&(f=R?0:e.length-1),f<0&&(f=e.length+f),f>=e.length){if(R)return-1;f=e.length-1}else if(f<0)if(R)f=0;else return-1;if(typeof a=="string"&&(a=i.from(a,v)),i.isBuffer(a))return a.length===0?-1:U(e,a,f,v,R);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(e,a,f):Uint8Array.prototype.lastIndexOf.call(e,a,f):U(e,[a],f,v,R);throw new TypeError("val must be string, number or Buffer")}function U(e,a,f,v,R){let x=1,z=e.length,ft=a.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(e.length<2||a.length<2)return-1;x=2,z/=2,ft/=2,f/=2}function mt(ct,dt){return x===1?ct[dt]:ct.readUInt16BE(dt*x)}let ht;if(R){let ct=-1;for(ht=f;ht<z;ht++)if(mt(e,ht)===mt(a,ct===-1?0:ht-ct)){if(ct===-1&&(ct=ht),ht-ct+1===ft)return ct*x}else ct!==-1&&(ht-=ht-ct),ct=-1}else for(f+ft>z&&(f=z-ft),ht=f;ht>=0;ht--){let ct=!0;for(let dt=0;dt<ft;dt++)if(mt(e,ht+dt)!==mt(a,dt)){ct=!1;break}if(ct)return ht}return-1}i.prototype.includes=function(e,a,f){return this.indexOf(e,a,f)!==-1},i.prototype.indexOf=function(e,a,f){return _(this,e,a,f,!0)},i.prototype.lastIndexOf=function(e,a,f){return _(this,e,a,f,!1)};function C(e,a,f,v){f=Number(f)||0;let R=e.length-f;v?(v=Number(v),v>R&&(v=R)):v=R;let x=a.length;v>x/2&&(v=x/2);let z;for(z=0;z<v;++z){let ft=parseInt(a.substr(z*2,2),16);if(qt(ft))return z;e[f+z]=ft}return z}function V(e,a,f,v){return Ot(lt(a,e.length-f),e,f,v)}function q(e,a,f,v){return Ot(nt(a),e,f,v)}function P(e,a,f,v){return Ot(Rt(a),e,f,v)}function G(e,a,f,v){return Ot(j(a,e.length-f),e,f,v)}i.prototype.write=function(e,a,f,v){if(a===void 0)v="utf8",f=this.length,a=0;else if(f===void 0&&typeof a=="string")v=a,f=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(f)?(f=f>>>0,v===void 0&&(v="utf8")):(v=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let R=this.length-a;if((f===void 0||f>R)&&(f=R),e.length>0&&(f<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let x=!1;for(;;)switch(v){case"hex":return C(this,e,a,f);case"utf8":case"utf-8":return V(this,e,a,f);case"ascii":case"latin1":case"binary":return q(this,e,a,f);case"base64":return P(this,e,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,a,f);default:if(x)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),x=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(e,a,f){return a===0&&f===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(a,f))}function tt(e,a,f){f=Math.min(e.length,f);let v=[],R=a;for(;R<f;){let x=e[R],z=null,ft=x>239?4:x>223?3:x>191?2:1;if(R+ft<=f){let mt,ht,ct,dt;switch(ft){case 1:x<128&&(z=x);break;case 2:mt=e[R+1],(mt&192)===128&&(dt=(x&31)<<6|mt&63,dt>127&&(z=dt));break;case 3:mt=e[R+1],ht=e[R+2],(mt&192)===128&&(ht&192)===128&&(dt=(x&15)<<12|(mt&63)<<6|ht&63,dt>2047&&(dt<55296||dt>57343)&&(z=dt));break;case 4:mt=e[R+1],ht=e[R+2],ct=e[R+3],(mt&192)===128&&(ht&192)===128&&(ct&192)===128&&(dt=(x&15)<<18|(mt&63)<<12|(ht&63)<<6|ct&63,dt>65535&&dt<1114112&&(z=dt))}}z===null?(z=65533,ft=1):z>65535&&(z-=65536,v.push(z>>>10&1023|55296),z=56320|z&1023),v.push(z),R+=ft}return ut(v)}var rt=4096;function ut(e){let a=e.length;if(a<=rt)return String.fromCharCode.apply(String,e);let f="",v=0;for(;v<a;)f+=String.fromCharCode.apply(String,e.slice(v,v+=rt));return f}function at(e,a,f){let v="";f=Math.min(e.length,f);for(let R=a;R<f;++R)v+=String.fromCharCode(e[R]&127);return v}function bt(e,a,f){let v="";f=Math.min(e.length,f);for(let R=a;R<f;++R)v+=String.fromCharCode(e[R]);return v}function pt(e,a,f){let v=e.length;(!a||a<0)&&(a=0),(!f||f<0||f>v)&&(f=v);let R="";for(let x=a;x<f;++x)R+=te[e[x]];return R}function gt(e,a,f){let v=e.slice(a,f),R="";for(let x=0;x<v.length-1;x+=2)R+=String.fromCharCode(v[x]+v[x+1]*256);return R}i.prototype.slice=function(e,a){let f=this.length;e=~~e,a=a===void 0?f:~~a,e<0?(e+=f,e<0&&(e=0)):e>f&&(e=f),a<0?(a+=f,a<0&&(a=0)):a>f&&(a=f),a<e&&(a=e);let v=this.subarray(e,a);return Object.setPrototypeOf(v,i.prototype),v};function ot(e,a,f){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+a>f)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,a,f){e=e>>>0,a=a>>>0,f||ot(e,a,this.length);let v=this[e],R=1,x=0;for(;++x<a&&(R*=256);)v+=this[e+x]*R;return v},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,a,f){e=e>>>0,a=a>>>0,f||ot(e,a,this.length);let v=this[e+--a],R=1;for(;a>0&&(R*=256);)v+=this[e+--a]*R;return v},i.prototype.readUint8=i.prototype.readUInt8=function(e,a){return e=e>>>0,a||ot(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,a){return e=e>>>0,a||ot(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,a){return e=e>>>0,a||ot(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=Et(function(e){e=e>>>0,d(e,"offset");let a=this[e],f=this[e+7];(a===void 0||f===void 0)&&y(e,this.length-8);let v=a+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,R=this[++e]+this[++e]*2**8+this[++e]*2**16+f*2**24;return BigInt(v)+(BigInt(R)<<BigInt(32))}),i.prototype.readBigUInt64BE=Et(function(e){e=e>>>0,d(e,"offset");let a=this[e],f=this[e+7];(a===void 0||f===void 0)&&y(e,this.length-8);let v=a*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],R=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+f;return(BigInt(v)<<BigInt(32))+BigInt(R)}),i.prototype.readIntLE=function(e,a,f){e=e>>>0,a=a>>>0,f||ot(e,a,this.length);let v=this[e],R=1,x=0;for(;++x<a&&(R*=256);)v+=this[e+x]*R;return R*=128,v>=R&&(v-=Math.pow(2,8*a)),v},i.prototype.readIntBE=function(e,a,f){e=e>>>0,a=a>>>0,f||ot(e,a,this.length);let v=a,R=1,x=this[e+--v];for(;v>0&&(R*=256);)x+=this[e+--v]*R;return R*=128,x>=R&&(x-=Math.pow(2,8*a)),x},i.prototype.readInt8=function(e,a){return e=e>>>0,a||ot(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,a){e=e>>>0,a||ot(e,2,this.length);let f=this[e]|this[e+1]<<8;return f&32768?f|4294901760:f},i.prototype.readInt16BE=function(e,a){e=e>>>0,a||ot(e,2,this.length);let f=this[e+1]|this[e]<<8;return f&32768?f|4294901760:f},i.prototype.readInt32LE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=Et(function(e){e=e>>>0,d(e,"offset");let a=this[e],f=this[e+7];(a===void 0||f===void 0)&&y(e,this.length-8);let v=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(f<<24);return(BigInt(v)<<BigInt(32))+BigInt(a+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),i.prototype.readBigInt64BE=Et(function(e){e=e>>>0,d(e,"offset");let a=this[e],f=this[e+7];(a===void 0||f===void 0)&&y(e,this.length-8);let v=(a<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(v)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+f)}),i.prototype.readFloatLE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),n.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,a){return e=e>>>0,a||ot(e,4,this.length),n.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,a){return e=e>>>0,a||ot(e,8,this.length),n.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,a){return e=e>>>0,a||ot(e,8,this.length),n.read(this,e,!1,52,8)};function B(e,a,f,v,R,x){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>R||a<x)throw new RangeError('"value" argument is out of bounds');if(f+v>e.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,a,f,v){if(e=+e,a=a>>>0,f=f>>>0,!v){let z=Math.pow(2,8*f)-1;B(this,e,a,f,z,0)}let R=1,x=0;for(this[a]=e&255;++x<f&&(R*=256);)this[a+x]=e/R&255;return a+f},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,a,f,v){if(e=+e,a=a>>>0,f=f>>>0,!v){let z=Math.pow(2,8*f)-1;B(this,e,a,f,z,0)}let R=f-1,x=1;for(this[a+R]=e&255;--R>=0&&(x*=256);)this[a+R]=e/x&255;return a+f},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,1,255,0),this[a]=e&255,a+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,2,65535,0),this[a]=e&255,this[a+1]=e>>>8,a+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,2,65535,0),this[a]=e>>>8,this[a+1]=e&255,a+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,4,4294967295,0),this[a+3]=e>>>24,this[a+2]=e>>>16,this[a+1]=e>>>8,this[a]=e&255,a+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,4,4294967295,0),this[a]=e>>>24,this[a+1]=e>>>16,this[a+2]=e>>>8,this[a+3]=e&255,a+4};function M(e,a,f,v,R){et(a,v,R,e,f,7);let x=Number(a&BigInt(4294967295));e[f++]=x,x=x>>8,e[f++]=x,x=x>>8,e[f++]=x,x=x>>8,e[f++]=x;let z=Number(a>>BigInt(32)&BigInt(4294967295));return e[f++]=z,z=z>>8,e[f++]=z,z=z>>8,e[f++]=z,z=z>>8,e[f++]=z,f}function W(e,a,f,v,R){et(a,v,R,e,f,7);let x=Number(a&BigInt(4294967295));e[f+7]=x,x=x>>8,e[f+6]=x,x=x>>8,e[f+5]=x,x=x>>8,e[f+4]=x;let z=Number(a>>BigInt(32)&BigInt(4294967295));return e[f+3]=z,z=z>>8,e[f+2]=z,z=z>>8,e[f+1]=z,z=z>>8,e[f]=z,f+8}i.prototype.writeBigUInt64LE=Et(function(e,a=0){return M(this,e,a,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Et(function(e,a=0){return W(this,e,a,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,a,f,v){if(e=+e,a=a>>>0,!v){let ft=Math.pow(2,8*f-1);B(this,e,a,f,ft-1,-ft)}let R=0,x=1,z=0;for(this[a]=e&255;++R<f&&(x*=256);)e<0&&z===0&&this[a+R-1]!==0&&(z=1),this[a+R]=(e/x>>0)-z&255;return a+f},i.prototype.writeIntBE=function(e,a,f,v){if(e=+e,a=a>>>0,!v){let ft=Math.pow(2,8*f-1);B(this,e,a,f,ft-1,-ft)}let R=f-1,x=1,z=0;for(this[a+R]=e&255;--R>=0&&(x*=256);)e<0&&z===0&&this[a+R+1]!==0&&(z=1),this[a+R]=(e/x>>0)-z&255;return a+f},i.prototype.writeInt8=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,1,127,-128),e<0&&(e=255+e+1),this[a]=e&255,a+1},i.prototype.writeInt16LE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,2,32767,-32768),this[a]=e&255,this[a+1]=e>>>8,a+2},i.prototype.writeInt16BE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,2,32767,-32768),this[a]=e>>>8,this[a+1]=e&255,a+2},i.prototype.writeInt32LE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,4,2147483647,-2147483648),this[a]=e&255,this[a+1]=e>>>8,this[a+2]=e>>>16,this[a+3]=e>>>24,a+4},i.prototype.writeInt32BE=function(e,a,f){return e=+e,a=a>>>0,f||B(this,e,a,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[a]=e>>>24,this[a+1]=e>>>16,this[a+2]=e>>>8,this[a+3]=e&255,a+4},i.prototype.writeBigInt64LE=Et(function(e,a=0){return M(this,e,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Et(function(e,a=0){return W(this,e,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(e,a,f,v,R,x){if(f+v>e.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function st(e,a,f,v,R){return a=+a,f=f>>>0,R||Y(e,a,f,4),n.write(e,a,f,v,23,4),f+4}i.prototype.writeFloatLE=function(e,a,f){return st(this,e,a,!0,f)},i.prototype.writeFloatBE=function(e,a,f){return st(this,e,a,!1,f)};function it(e,a,f,v,R){return a=+a,f=f>>>0,R||Y(e,a,f,8),n.write(e,a,f,v,52,8),f+8}i.prototype.writeDoubleLE=function(e,a,f){return it(this,e,a,!0,f)},i.prototype.writeDoubleBE=function(e,a,f){return it(this,e,a,!1,f)},i.prototype.copy=function(e,a,f,v){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(f||(f=0),!v&&v!==0&&(v=this.length),a>=e.length&&(a=e.length),a||(a=0),v>0&&v<f&&(v=f),v===f||e.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),e.length-a<v-f&&(v=e.length-a+f);let R=v-f;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,f,v):Uint8Array.prototype.set.call(e,this.subarray(f,v),a),R},i.prototype.fill=function(e,a,f,v){if(typeof e=="string"){if(typeof a=="string"?(v=a,a=0,f=this.length):typeof f=="string"&&(v=f,f=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!i.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(e.length===1){let x=e.charCodeAt(0);(v==="utf8"&&x<128||v==="latin1")&&(e=x)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(a<0||this.length<a||this.length<f)throw new RangeError("Out of range index");if(f<=a)return this;a=a>>>0,f=f===void 0?this.length:f>>>0,e||(e=0);let R;if(typeof e=="number")for(R=a;R<f;++R)this[R]=e;else{let x=i.isBuffer(e)?e:i.from(e,v),z=x.length;if(z===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(R=0;R<f-a;++R)this[R+a]=x[R%z]}return this};var S={};function O(e,a,f){S[e]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}O("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(e,a){return`The "${e}" argument must be of type number. Received type ${typeof a}`},TypeError),O("ERR_OUT_OF_RANGE",function(e,a,f){let v=`The value of "${e}" is out of range.`,R=f;return Number.isInteger(f)&&Math.abs(f)>2**32?R=N(String(f)):typeof f=="bigint"&&(R=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(R=N(R)),R+="n"),v+=` It must be ${a}. Received ${R}`,v},RangeError);function N(e){let a="",f=e.length,v=e[0]==="-"?1:0;for(;f>=v+4;f-=3)a=`_${e.slice(f-3,f)}${a}`;return`${e.slice(0,f)}${a}`}function J(e,a,f){d(a,"offset"),(e[a]===void 0||e[a+f]===void 0)&&y(a,e.length-(f+1))}function et(e,a,f,v,R,x){if(e>f||e<a){let z=typeof a=="bigint"?"n":"",ft;throw x>3?a===0||a===BigInt(0)?ft=`>= 0${z} and < 2${z} ** ${(x+1)*8}${z}`:ft=`>= -(2${z} ** ${(x+1)*8-1}${z}) and < 2 ** ${(x+1)*8-1}${z}`:ft=`>= ${a}${z} and <= ${f}${z}`,new S.ERR_OUT_OF_RANGE("value",ft,e)}J(v,R,x)}function d(e,a){if(typeof e!="number")throw new S.ERR_INVALID_ARG_TYPE(a,"number",e)}function y(e,a,f){throw Math.floor(e)!==e?(d(e,f),new S.ERR_OUT_OF_RANGE(f||"offset","an integer",e)):a<0?new S.ERR_BUFFER_OUT_OF_BOUNDS:new S.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${a}`,e)}var D=/[^+/0-9A-Za-z-_]/g;function $(e){if(e=e.split("=")[0],e=e.trim().replace(D,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function lt(e,a){a=a||1/0;let f,v=e.length,R=null,x=[];for(let z=0;z<v;++z){if(f=e.charCodeAt(z),f>55295&&f<57344){if(!R){if(f>56319){(a-=3)>-1&&x.push(239,191,189);continue}else if(z+1===v){(a-=3)>-1&&x.push(239,191,189);continue}R=f;continue}if(f<56320){(a-=3)>-1&&x.push(239,191,189),R=f;continue}f=(R-55296<<10|f-56320)+65536}else R&&(a-=3)>-1&&x.push(239,191,189);if(R=null,f<128){if((a-=1)<0)break;x.push(f)}else if(f<2048){if((a-=2)<0)break;x.push(f>>6|192,f&63|128)}else if(f<65536){if((a-=3)<0)break;x.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((a-=4)<0)break;x.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return x}function nt(e){let a=[];for(let f=0;f<e.length;++f)a.push(e.charCodeAt(f)&255);return a}function j(e,a){let f,v,R,x=[];for(let z=0;z<e.length&&!((a-=2)<0);++z)f=e.charCodeAt(z),v=f>>8,R=f%256,x.push(R),x.push(v);return x}function Rt(e){return r.toByteArray($(e))}function Ot(e,a,f,v){let R;for(R=0;R<v&&!(R+f>=a.length||R>=e.length);++R)a[R+f]=e[R];return R}function vt(e,a){return e instanceof a||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===a.name}function qt(e){return e!==e}var te=function(){let e="0123456789abcdef",a=new Array(256);for(let f=0;f<16;++f){let v=f*16;for(let R=0;R<16;++R)a[v+R]=e[f]+e[R]}return a}();function Et(e){return typeof BigInt>"u"?zt:e}function zt(){throw new Error("BigInt not supported")}}),Q,Z,jt,K=Ir(()=>{Q=St(Xt(),1),Z={env:{},nextTick:(t,...r)=>{globalThis.setTimeout(t,0,...r)}},jt=globalThis}),Zt=X((t,r)=>{K();var n=typeof Reflect=="object"?Reflect:null,o=n&&typeof n.apply=="function"?n.apply:function(_,U,C){return Function.prototype.apply.call(_,U,C)},u;n&&typeof n.ownKeys=="function"?u=n.ownKeys:Object.getOwnPropertySymbols?u=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:u=function(_){return Object.getOwnPropertyNames(_)};function s(_){console&&console.warn&&console.warn(_)}var l=Number.isNaN||function(_){return _!==_};function i(){i.init.call(this)}r.exports=i,r.exports.once=I,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var c=10;function p(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(_){if(typeof _!="number"||_<0||l(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");c=_}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||l(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function b(_){return _._maxListeners===void 0?i.defaultMaxListeners:_._maxListeners}i.prototype.getMaxListeners=function(){return b(this)},i.prototype.emit=function(_){for(var U=[],C=1;C<arguments.length;C++)U.push(arguments[C]);var V=_==="error",q=this._events;if(q!==void 0)V=V&&q.error===void 0;else if(!V)return!1;if(V){var P;if(U.length>0&&(P=U[0]),P instanceof Error)throw P;var G=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw G.context=P,G}var H=q[_];if(H===void 0)return!1;if(typeof H=="function")o(H,this,U);else for(var tt=H.length,rt=w(H,tt),C=0;C<tt;++C)o(rt[C],this,U);return!0};function m(_,U,C,V){var q,P,G;if(p(C),P=_._events,P===void 0?(P=_._events=Object.create(null),_._eventsCount=0):(P.newListener!==void 0&&(_.emit("newListener",U,C.listener?C.listener:C),P=_._events),G=P[U]),G===void 0)G=P[U]=C,++_._eventsCount;else if(typeof G=="function"?G=P[U]=V?[C,G]:[G,C]:V?G.unshift(C):G.push(C),q=b(_),q>0&&G.length>q&&!G.warned){G.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=_,H.type=U,H.count=G.length,s(H)}return _}i.prototype.addListener=function(_,U){return m(this,_,U,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,U){return m(this,_,U,!0)};function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(_,U,C){var V={fired:!1,wrapFn:void 0,target:_,type:U,listener:C},q=A.bind(V);return q.listener=C,V.wrapFn=q,q}i.prototype.once=function(_,U){return p(U),this.on(_,T(this,_,U)),this},i.prototype.prependOnceListener=function(_,U){return p(U),this.prependListener(_,T(this,_,U)),this},i.prototype.removeListener=function(_,U){var C,V,q,P,G;if(p(U),V=this._events,V===void 0)return this;if(C=V[_],C===void 0)return this;if(C===U||C.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete V[_],V.removeListener&&this.emit("removeListener",_,C.listener||U));else if(typeof C!="function"){for(q=-1,P=C.length-1;P>=0;P--)if(C[P]===U||C[P].listener===U){G=C[P].listener,q=P;break}if(q<0)return this;q===0?C.shift():k(C,q),C.length===1&&(V[_]=C[0]),V.removeListener!==void 0&&this.emit("removeListener",_,G||U)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var U,C,V;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[_]),this;if(arguments.length===0){var q=Object.keys(C),P;for(V=0;V<q.length;++V)P=q[V],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=C[_],typeof U=="function")this.removeListener(_,U);else if(U!==void 0)for(V=U.length-1;V>=0;V--)this.removeListener(_,U[V]);return this};function h(_,U,C){var V=_._events;if(V===void 0)return[];var q=V[U];return q===void 0?[]:typeof q=="function"?C?[q.listener||q]:[q]:C?E(q):w(q,q.length)}i.prototype.listeners=function(_){return h(this,_,!0)},i.prototype.rawListeners=function(_){return h(this,_,!1)},i.listenerCount=function(_,U){return typeof _.listenerCount=="function"?_.listenerCount(U):g.call(_,U)},i.prototype.listenerCount=g;function g(_){var U=this._events;if(U!==void 0){var C=U[_];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function w(_,U){for(var C=new Array(U),V=0;V<U;++V)C[V]=_[V];return C}function k(_,U){for(;U+1<_.length;U++)_[U]=_[U+1];_.pop()}function E(_){for(var U=new Array(_.length),C=0;C<U.length;++C)U[C]=_[C].listener||_[C];return U}function I(_,U){return new Promise(function(C,V){function q(G){_.removeListener(U,P),V(G)}function P(){typeof _.removeListener=="function"&&_.removeListener("error",q),C([].slice.call(arguments))}F(_,U,P,{once:!0}),U!=="error"&&L(_,q,{once:!0})})}function L(_,U,C){typeof _.on=="function"&&F(_,"error",U,C)}function F(_,U,C,V){if(typeof _.on=="function")V.once?_.once(U,C):_.on(U,C);else if(typeof _.addEventListener=="function")_.addEventListener(U,function q(P){V.once&&_.removeEventListener(U,q),C(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}}),We=X((t,r)=>{K(),r.exports=Zt().EventEmitter}),qe=X(()=>{K()}),Tr=X((t,r)=>{K();function n(h,g){var w=Object.keys(h);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(h);g&&(k=k.filter(function(E){return Object.getOwnPropertyDescriptor(h,E).enumerable})),w.push.apply(w,k)}return w}function o(h){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?arguments[g]:{};g%2?n(Object(w),!0).forEach(function(k){u(h,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(w)):n(Object(w)).forEach(function(k){Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(w,k))})}return h}function u(h,g,w){return g in h?Object.defineProperty(h,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):h[g]=w,h}function s(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function l(h,g){for(var w=0;w<g.length;w++){var k=g[w];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}function i(h,g,w){return g&&l(h.prototype,g),w&&l(h,w),h}var c=Xt(),p=c.Buffer,b=qe(),m=b.inspect,A=m&&m.custom||"inspect";function T(h,g,w){p.prototype.copy.call(h,g,w)}r.exports=function(){function h(){s(this,h),this.head=null,this.tail=null,this.length=0}return i(h,[{key:"push",value:function(g){var w={data:g,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(g){var w={data:g,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var w=this.head,k=""+w.data;w=w.next;)k+=g+w.data;return k}},{key:"concat",value:function(g){if(this.length===0)return p.alloc(0);for(var w=p.allocUnsafe(g>>>0),k=this.head,E=0;k;)T(k.data,w,E),E+=k.data.length,k=k.next;return w}},{key:"consume",value:function(g,w){var k;return g<this.head.data.length?(k=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?k=this.shift():k=w?this._getString(g):this._getBuffer(g),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var w=this.head,k=1,E=w.data;for(g-=E.length;w=w.next;){var I=w.data,L=g>I.length?I.length:g;if(L===I.length?E+=I:E+=I.slice(0,g),g-=L,g===0){L===I.length?(++k,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=I.slice(L));break}++k}return this.length-=k,E}},{key:"_getBuffer",value:function(g){var w=p.allocUnsafe(g),k=this.head,E=1;for(k.data.copy(w),g-=k.data.length;k=k.next;){var I=k.data,L=g>I.length?I.length:g;if(I.copy(w,w.length-g,0,L),g-=L,g===0){L===I.length?(++E,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=I.slice(L));break}++E}return this.length-=E,w}},{key:A,value:function(g,w){return m(this,o({},w,{depth:0,customInspect:!1}))}}]),h}()}),ze=X((t,r)=>{K();function n(c,p){var b=this,m=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return m||A?(p?p(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Z.nextTick(l,this,c)):Z.nextTick(l,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(T){!p&&T?b._writableState?b._writableState.errorEmitted?Z.nextTick(u,b):(b._writableState.errorEmitted=!0,Z.nextTick(o,b,T)):Z.nextTick(o,b,T):p?(Z.nextTick(u,b),p(T)):Z.nextTick(u,b)}),this)}function o(c,p){l(c,p),u(c)}function u(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(c,p){c.emit("error",p)}function i(c,p){var b=c._readableState,m=c._writableState;b&&b.autoDestroy||m&&m.autoDestroy?c.destroy(p):c.emit("error",p)}r.exports={destroy:n,undestroy:s,errorOrDestroy:i}}),Ft=X((t,r)=>{K();function n(p,b){p.prototype=Object.create(b.prototype),p.prototype.constructor=p,p.__proto__=b}var o={};function u(p,b,m){m||(m=Error);function A(h,g,w){return typeof b=="string"?b:b(h,g,w)}var T=function(h){n(g,h);function g(w,k,E){return h.call(this,A(w,k,E))||this}return g}(m);T.prototype.name=m.name,T.prototype.code=p,o[p]=T}function s(p,b){if(Array.isArray(p)){var m=p.length;return p=p.map(function(A){return String(A)}),m>2?"one of ".concat(b," ").concat(p.slice(0,m-1).join(", "),", or ")+p[m-1]:m===2?"one of ".concat(b," ").concat(p[0]," or ").concat(p[1]):"of ".concat(b," ").concat(p[0])}else return"of ".concat(b," ").concat(String(p))}function l(p,b,m){return p.substr(!m||m<0?0:+m,b.length)===b}function i(p,b,m){return(m===void 0||m>p.length)&&(m=p.length),p.substring(m-b.length,m)===b}function c(p,b,m){return typeof m!="number"&&(m=0),m+b.length>p.length?!1:p.indexOf(b,m)!==-1}u("ERR_INVALID_OPT_VALUE",function(p,b){return'The value "'+b+'" is invalid for option "'+p+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(p,b,m){var A;typeof b=="string"&&l(b,"not ")?(A="must not be",b=b.replace(/^not /,"")):A="must be";var T;if(i(p," argument"))T="The ".concat(p," ").concat(A," ").concat(s(b,"type"));else{var h=c(p,".")?"property":"argument";T='The "'.concat(p,'" ').concat(h," ").concat(A," ").concat(s(b,"type"))}return T+=". Received type ".concat(typeof m),T},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.codes=o}),Ge=X((t,r)=>{K();var n=Ft().codes.ERR_INVALID_OPT_VALUE;function o(s,l,i){return s.highWaterMark!=null?s.highWaterMark:l?s[i]:null}function u(s,l,i,c){var p=o(l,c,i);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var b=c?i:"highWaterMark";throw new n(b,p)}return Math.floor(p)}return s.objectMode?16:16*1024}r.exports={getHighWaterMark:u}}),Pt=X((t,r)=>{K(),typeof Object.create=="function"?r.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(n,o){if(o){n.super_=o;var u=function(){};u.prototype=o.prototype,n.prototype=new u,n.prototype.constructor=n}}}),Lr=X((t,r)=>{K(),r.exports=n;function n(u,s){if(o("noDeprecation"))return u;var l=!1;function i(){if(!l){if(o("throwDeprecation"))throw new Error(s);o("traceDeprecation")?console.trace(s):console.warn(s),l=!0}return u.apply(this,arguments)}return i}function o(u){try{if(!jt.localStorage)return!1}catch{return!1}var s=jt.localStorage[u];return s==null?!1:String(s).toLowerCase()==="true"}}),$e=X((t,r)=>{K(),r.exports=q;function n(S){var O=this;this.next=null,this.entry=null,this.finish=function(){it(O,S)}}var o;q.WritableState=C;var u={deprecate:Lr()},s=We(),l=Xt().Buffer,i=jt.Uint8Array||function(){};function c(S){return l.from(S)}function p(S){return l.isBuffer(S)||S instanceof i}var b=ze(),m=Ge(),A=m.getHighWaterMark,T=Ft().codes,h=T.ERR_INVALID_ARG_TYPE,g=T.ERR_METHOD_NOT_IMPLEMENTED,w=T.ERR_MULTIPLE_CALLBACK,k=T.ERR_STREAM_CANNOT_PIPE,E=T.ERR_STREAM_DESTROYED,I=T.ERR_STREAM_NULL_VALUES,L=T.ERR_STREAM_WRITE_AFTER_END,F=T.ERR_UNKNOWN_ENCODING,_=b.errorOrDestroy;Pt()(q,s);function U(){}function C(S,O,N){o=o||Nt(),S=S||{},typeof N!="boolean"&&(N=O instanceof o),this.objectMode=!!S.objectMode,N&&(this.objectMode=this.objectMode||!!S.writableObjectMode),this.highWaterMark=A(this,S,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var J=S.decodeStrings===!1;this.decodeStrings=!J,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(et){bt(O,et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}C.prototype.getBuffer=function(){for(var S=this.bufferedRequest,O=[];S;)O.push(S),S=S.next;return O},function(){try{Object.defineProperty(C.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var V;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(S){return V.call(this,S)?!0:this!==q?!1:S&&S._writableState instanceof C}})):V=function(S){return S instanceof this};function q(S){o=o||Nt();var O=this instanceof o;if(!O&&!V.call(q,this))return new q(S);this._writableState=new C(S,this,O),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final)),s.call(this)}q.prototype.pipe=function(){_(this,new k)};function P(S,O){var N=new L;_(S,N),Z.nextTick(O,N)}function G(S,O,N,J){var et;return N===null?et=new I:typeof N!="string"&&!O.objectMode&&(et=new h("chunk",["string","Buffer"],N)),et?(_(S,et),Z.nextTick(J,et),!1):!0}q.prototype.write=function(S,O,N){var J=this._writableState,et=!1,d=!J.objectMode&&p(S);return d&&!l.isBuffer(S)&&(S=c(S)),typeof O=="function"&&(N=O,O=null),d?O="buffer":O||(O=J.defaultEncoding),typeof N!="function"&&(N=U),J.ending?P(this,N):(d||G(this,J,S,N))&&(J.pendingcb++,et=tt(this,J,d,S,O,N)),et},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,!S.writing&&!S.corked&&!S.bufferProcessing&&S.bufferedRequest&&ot(this,S))},q.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new F(S);return this._writableState.defaultEncoding=S,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function H(S,O,N){return!S.objectMode&&S.decodeStrings!==!1&&typeof O=="string"&&(O=l.from(O,N)),O}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function tt(S,O,N,J,et,d){if(!N){var y=H(O,J,et);J!==y&&(N=!0,et="buffer",J=y)}var D=O.objectMode?1:J.length;O.length+=D;var $=O.length<O.highWaterMark;if($||(O.needDrain=!0),O.writing||O.corked){var lt=O.lastBufferedRequest;O.lastBufferedRequest={chunk:J,encoding:et,isBuf:N,callback:d,next:null},lt?lt.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else rt(S,O,!1,D,J,et,d);return $}function rt(S,O,N,J,et,d,y){O.writelen=J,O.writecb=y,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new E("write")):N?S._writev(et,O.onwrite):S._write(et,d,O.onwrite),O.sync=!1}function ut(S,O,N,J,et){--O.pendingcb,N?(Z.nextTick(et,J),Z.nextTick(Y,S,O),S._writableState.errorEmitted=!0,_(S,J)):(et(J),S._writableState.errorEmitted=!0,_(S,J),Y(S,O))}function at(S){S.writing=!1,S.writecb=null,S.length-=S.writelen,S.writelen=0}function bt(S,O){var N=S._writableState,J=N.sync,et=N.writecb;if(typeof et!="function")throw new w;if(at(N),O)ut(S,N,J,O,et);else{var d=B(N)||S.destroyed;!d&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&ot(S,N),J?Z.nextTick(pt,S,N,d,et):pt(S,N,d,et)}}function pt(S,O,N,J){N||gt(S,O),O.pendingcb--,J(),Y(S,O)}function gt(S,O){O.length===0&&O.needDrain&&(O.needDrain=!1,S.emit("drain"))}function ot(S,O){O.bufferProcessing=!0;var N=O.bufferedRequest;if(S._writev&&N&&N.next){var J=O.bufferedRequestCount,et=new Array(J),d=O.corkedRequestsFree;d.entry=N;for(var y=0,D=!0;N;)et[y]=N,N.isBuf||(D=!1),N=N.next,y+=1;et.allBuffers=D,rt(S,O,!0,O.length,et,"",d.finish),O.pendingcb++,O.lastBufferedRequest=null,d.next?(O.corkedRequestsFree=d.next,d.next=null):O.corkedRequestsFree=new n(O),O.bufferedRequestCount=0}else{for(;N;){var $=N.chunk,lt=N.encoding,nt=N.callback,j=O.objectMode?1:$.length;if(rt(S,O,!1,j,$,lt,nt),N=N.next,O.bufferedRequestCount--,O.writing)break}N===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=N,O.bufferProcessing=!1}q.prototype._write=function(S,O,N){N(new g("_write()"))},q.prototype._writev=null,q.prototype.end=function(S,O,N){var J=this._writableState;return typeof S=="function"?(N=S,S=null,O=null):typeof O=="function"&&(N=O,O=null),S!=null&&this.write(S,O),J.corked&&(J.corked=1,this.uncork()),J.ending||st(this,J,N),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function B(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function M(S,O){S._final(function(N){O.pendingcb--,N&&_(S,N),O.prefinished=!0,S.emit("prefinish"),Y(S,O)})}function W(S,O){!O.prefinished&&!O.finalCalled&&(typeof S._final=="function"&&!O.destroyed?(O.pendingcb++,O.finalCalled=!0,Z.nextTick(M,S,O)):(O.prefinished=!0,S.emit("prefinish")))}function Y(S,O){var N=B(O);if(N&&(W(S,O),O.pendingcb===0&&(O.finished=!0,S.emit("finish"),O.autoDestroy))){var J=S._readableState;(!J||J.autoDestroy&&J.endEmitted)&&S.destroy()}return N}function st(S,O,N){O.ending=!0,Y(S,O),N&&(O.finished?Z.nextTick(N):S.once("finish",N)),O.ended=!0,S.writable=!1}function it(S,O,N){var J=S.entry;for(S.entry=null;J;){var et=J.callback;O.pendingcb--,et(N),J=J.next}O.corkedRequestsFree.next=S}Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(S){!this._writableState||(this._writableState.destroyed=S)}}),q.prototype.destroy=b.destroy,q.prototype._undestroy=b.undestroy,q.prototype._destroy=function(S,O){O(S)}}),Nt=X((t,r)=>{K();var n=Object.keys||function(m){var A=[];for(var T in m)A.push(T);return A};r.exports=c;var o=Ve(),u=$e();for(Pt()(c,o),s=n(u.prototype),i=0;i<s.length;i++)l=s[i],c.prototype[l]||(c.prototype[l]=u.prototype[l]);var s,l,i;function c(m){if(!(this instanceof c))return new c(m);o.call(this,m),u.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||Z.nextTick(b,this)}function b(m){m.end()}Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}),jr=X((t,r)=>{K();var n=Xt(),o=n.Buffer;function u(l,i){for(var c in l)i[c]=l[c]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=n:(u(n,t),t.Buffer=s);function s(l,i,c){return o(l,i,c)}s.prototype=Object.create(o.prototype),u(o,s),s.from=function(l,i,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return o(l,i,c)},s.alloc=function(l,i,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var p=o(l);return i!==void 0?typeof c=="string"?p.fill(i,c):p.fill(i):p.fill(0),p},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return o(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}}),ke=X(t=>{K();var r=jr().Buffer,n=r.isEncoding||function(E){switch(E=""+E,E&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(E){if(!E)return"utf8";for(var I;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(I)return;E=(""+E).toLowerCase(),I=!0}}function u(E){var I=o(E);if(typeof I!="string"&&(r.isEncoding===n||!n(E)))throw new Error("Unknown encoding: "+E);return I||E}t.StringDecoder=s;function s(E){this.encoding=u(E);var I;switch(this.encoding){case"utf16le":this.text=A,this.end=T,I=4;break;case"utf8":this.fillLast=p,I=4;break;case"base64":this.text=h,this.end=g,I=3;break;default:this.write=w,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(I)}s.prototype.write=function(E){if(E.length===0)return"";var I,L;if(this.lastNeed){if(I=this.fillLast(E),I===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<E.length?I?I+this.text(E,L):this.text(E,L):I||""},s.prototype.end=m,s.prototype.text=b,s.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length};function l(E){return E<=127?0:E>>5===6?2:E>>4===14?3:E>>3===30?4:E>>6===2?-1:-2}function i(E,I,L){var F=I.length-1;if(F<L)return 0;var _=l(I[F]);return _>=0?(_>0&&(E.lastNeed=_-1),_):--F<L||_===-2?0:(_=l(I[F]),_>=0?(_>0&&(E.lastNeed=_-2),_):--F<L||_===-2?0:(_=l(I[F]),_>=0?(_>0&&(_===2?_=0:E.lastNeed=_-3),_):0))}function c(E,I,L){if((I[0]&192)!==128)return E.lastNeed=0,"";if(E.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return E.lastNeed=1,"";if(E.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return E.lastNeed=2,""}}function p(E){var I=this.lastTotal-this.lastNeed,L=c(this,E);if(L!==void 0)return L;if(this.lastNeed<=E.length)return E.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,I,0,E.length),this.lastNeed-=E.length}function b(E,I){var L=i(this,E,I);if(!this.lastNeed)return E.toString("utf8",I);this.lastTotal=L;var F=E.length-(L-this.lastNeed);return E.copy(this.lastChar,0,F),E.toString("utf8",I,F)}function m(E){var I=E&&E.length?this.write(E):"";return this.lastNeed?I+"":I}function A(E,I){if((E.length-I)%2===0){var L=E.toString("utf16le",I);if(L){var F=L.charCodeAt(L.length-1);if(F>=55296&&F<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",I,E.length-1)}function T(E){var I=E&&E.length?this.write(E):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,L)}return I}function h(E,I){var L=(E.length-I)%3;return L===0?E.toString("base64",I):(this.lastNeed=3-L,this.lastTotal=3,L===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",I,E.length-L))}function g(E){var I=E&&E.length?this.write(E):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function w(E){return E.toString(this.encoding)}function k(E){return E&&E.length?this.write(E):""}}),we=X((t,r)=>{K();var n=Ft().codes.ERR_STREAM_PREMATURE_CLOSE;function o(i){var c=!1;return function(){if(!c){c=!0;for(var p=arguments.length,b=new Array(p),m=0;m<p;m++)b[m]=arguments[m];i.apply(this,b)}}}function u(){}function s(i){return i.setHeader&&typeof i.abort=="function"}function l(i,c,p){if(typeof c=="function")return l(i,null,c);c||(c={}),p=o(p||u);var b=c.readable||c.readable!==!1&&i.readable,m=c.writable||c.writable!==!1&&i.writable,A=function(){i.writable||h()},T=i._writableState&&i._writableState.finished,h=function(){m=!1,T=!0,b||p.call(i)},g=i._readableState&&i._readableState.endEmitted,w=function(){b=!1,g=!0,m||p.call(i)},k=function(L){p.call(i,L)},E=function(){var L;if(b&&!g)return(!i._readableState||!i._readableState.ended)&&(L=new n),p.call(i,L);if(m&&!T)return(!i._writableState||!i._writableState.ended)&&(L=new n),p.call(i,L)},I=function(){i.req.on("finish",h)};return s(i)?(i.on("complete",h),i.on("abort",E),i.req?I():i.on("request",I)):m&&!i._writableState&&(i.on("end",A),i.on("close",A)),i.on("end",w),i.on("finish",h),c.error!==!1&&i.on("error",k),i.on("close",E),function(){i.removeListener("complete",h),i.removeListener("abort",E),i.removeListener("request",I),i.req&&i.req.removeListener("finish",h),i.removeListener("end",A),i.removeListener("close",A),i.removeListener("finish",h),i.removeListener("end",w),i.removeListener("error",k),i.removeListener("close",E)}}r.exports=l}),Pr=X((t,r)=>{K();var n;function o(I,L,F){return L in I?Object.defineProperty(I,L,{value:F,enumerable:!0,configurable:!0,writable:!0}):I[L]=F,I}var u=we(),s=Symbol("lastResolve"),l=Symbol("lastReject"),i=Symbol("error"),c=Symbol("ended"),p=Symbol("lastPromise"),b=Symbol("handlePromise"),m=Symbol("stream");function A(I,L){return{value:I,done:L}}function T(I){var L=I[s];if(L!==null){var F=I[m].read();F!==null&&(I[p]=null,I[s]=null,I[l]=null,L(A(F,!1)))}}function h(I){Z.nextTick(T,I)}function g(I,L){return function(F,_){I.then(function(){if(L[c]){F(A(void 0,!0));return}L[b](F,_)},_)}}var w=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((n={get stream(){return this[m]},next:function(){var I=this,L=this[i];if(L!==null)return Promise.reject(L);if(this[c])return Promise.resolve(A(void 0,!0));if(this[m].destroyed)return new Promise(function(C,V){Z.nextTick(function(){I[i]?V(I[i]):C(A(void 0,!0))})});var F=this[p],_;if(F)_=new Promise(g(F,this));else{var U=this[m].read();if(U!==null)return Promise.resolve(A(U,!1));_=new Promise(this[b])}return this[p]=_,_}},o(n,Symbol.asyncIterator,function(){return this}),o(n,"return",function(){var I=this;return new Promise(function(L,F){I[m].destroy(null,function(_){if(_){F(_);return}L(A(void 0,!0))})})}),n),w),E=function(I){var L,F=Object.create(k,(L={},o(L,m,{value:I,writable:!0}),o(L,s,{value:null,writable:!0}),o(L,l,{value:null,writable:!0}),o(L,i,{value:null,writable:!0}),o(L,c,{value:I._readableState.endEmitted,writable:!0}),o(L,b,{value:function(_,U){var C=F[m].read();C?(F[p]=null,F[s]=null,F[l]=null,_(A(C,!1))):(F[s]=_,F[l]=U)},writable:!0}),L));return F[p]=null,u(I,function(_){if(_&&_.code!=="ERR_STREAM_PREMATURE_CLOSE"){var U=F[l];U!==null&&(F[p]=null,F[s]=null,F[l]=null,U(_)),F[i]=_;return}var C=F[s];C!==null&&(F[p]=null,F[s]=null,F[l]=null,C(A(void 0,!0))),F[c]=!0}),I.on("readable",h.bind(null,F)),F};r.exports=E}),Mr=X((t,r)=>{K(),r.exports=function(){throw new Error("Readable.from is not available in the browser")}}),Ve=X((t,r)=>{K(),r.exports=P;var n;P.ReadableState=q,Zt().EventEmitter;var o=function(d,y){return d.listeners(y).length},u=We(),s=Xt().Buffer,l=jt.Uint8Array||function(){};function i(d){return s.from(d)}function c(d){return s.isBuffer(d)||d instanceof l}var p=qe(),b;p&&p.debuglog?b=p.debuglog("stream"):b=function(){};var m=Tr(),A=ze(),T=Ge(),h=T.getHighWaterMark,g=Ft().codes,w=g.ERR_INVALID_ARG_TYPE,k=g.ERR_STREAM_PUSH_AFTER_EOF,E=g.ERR_METHOD_NOT_IMPLEMENTED,I=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,L,F,_;Pt()(P,u);var U=A.errorOrDestroy,C=["error","close","destroy","pause","resume"];function V(d,y,D){if(typeof d.prependListener=="function")return d.prependListener(y,D);!d._events||!d._events[y]?d.on(y,D):Array.isArray(d._events[y])?d._events[y].unshift(D):d._events[y]=[D,d._events[y]]}function q(d,y,D){n=n||Nt(),d=d||{},typeof D!="boolean"&&(D=y instanceof n),this.objectMode=!!d.objectMode,D&&(this.objectMode=this.objectMode||!!d.readableObjectMode),this.highWaterMark=h(this,d,"readableHighWaterMark",D),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=d.emitClose!==!1,this.autoDestroy=!!d.autoDestroy,this.destroyed=!1,this.defaultEncoding=d.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,d.encoding&&(L||(L=ke().StringDecoder),this.decoder=new L(d.encoding),this.encoding=d.encoding)}function P(d){if(n=n||Nt(),!(this instanceof P))return new P(d);var y=this instanceof n;this._readableState=new q(d,this,y),this.readable=!0,d&&(typeof d.read=="function"&&(this._read=d.read),typeof d.destroy=="function"&&(this._destroy=d.destroy)),u.call(this)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(d){!this._readableState||(this._readableState.destroyed=d)}}),P.prototype.destroy=A.destroy,P.prototype._undestroy=A.undestroy,P.prototype._destroy=function(d,y){y(d)},P.prototype.push=function(d,y){var D=this._readableState,$;return D.objectMode?$=!0:typeof d=="string"&&(y=y||D.defaultEncoding,y!==D.encoding&&(d=s.from(d,y),y=""),$=!0),G(this,d,y,!1,$)},P.prototype.unshift=function(d){return G(this,d,null,!0,!1)};function G(d,y,D,$,lt){b("readableAddChunk",y);var nt=d._readableState;if(y===null)nt.reading=!1,bt(d,nt);else{var j;if(lt||(j=tt(nt,y)),j)U(d,j);else if(nt.objectMode||y&&y.length>0)if(typeof y!="string"&&!nt.objectMode&&Object.getPrototypeOf(y)!==s.prototype&&(y=i(y)),$)nt.endEmitted?U(d,new I):H(d,nt,y,!0);else if(nt.ended)U(d,new k);else{if(nt.destroyed)return!1;nt.reading=!1,nt.decoder&&!D?(y=nt.decoder.write(y),nt.objectMode||y.length!==0?H(d,nt,y,!1):ot(d,nt)):H(d,nt,y,!1)}else $||(nt.reading=!1,ot(d,nt))}return!nt.ended&&(nt.length<nt.highWaterMark||nt.length===0)}function H(d,y,D,$){y.flowing&&y.length===0&&!y.sync?(y.awaitDrain=0,d.emit("data",D)):(y.length+=y.objectMode?1:D.length,$?y.buffer.unshift(D):y.buffer.push(D),y.needReadable&&pt(d)),ot(d,y)}function tt(d,y){var D;return!c(y)&&typeof y!="string"&&y!==void 0&&!d.objectMode&&(D=new w("chunk",["string","Buffer","Uint8Array"],y)),D}P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(d){L||(L=ke().StringDecoder);var y=new L(d);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;for(var D=this._readableState.buffer.head,$="";D!==null;)$+=y.write(D.data),D=D.next;return this._readableState.buffer.clear(),$!==""&&this._readableState.buffer.push($),this._readableState.length=$.length,this};var rt=1073741824;function ut(d){return d>=rt?d=rt:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++),d}function at(d,y){return d<=0||y.length===0&&y.ended?0:y.objectMode?1:d!==d?y.flowing&&y.length?y.buffer.head.data.length:y.length:(d>y.highWaterMark&&(y.highWaterMark=ut(d)),d<=y.length?d:y.ended?y.length:(y.needReadable=!0,0))}P.prototype.read=function(d){b("read",d),d=parseInt(d,10);var y=this._readableState,D=d;if(d!==0&&(y.emittedReadable=!1),d===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return b("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?N(this):pt(this),null;if(d=at(d,y),d===0&&y.ended)return y.length===0&&N(this),null;var $=y.needReadable;b("need readable",$),(y.length===0||y.length-d<y.highWaterMark)&&($=!0,b("length less than watermark",$)),y.ended||y.reading?($=!1,b("reading or ended",$)):$&&(b("do read"),y.reading=!0,y.sync=!0,y.length===0&&(y.needReadable=!0),this._read(y.highWaterMark),y.sync=!1,y.reading||(d=at(D,y)));var lt;return d>0?lt=O(d,y):lt=null,lt===null?(y.needReadable=y.length<=y.highWaterMark,d=0):(y.length-=d,y.awaitDrain=0),y.length===0&&(y.ended||(y.needReadable=!0),D!==d&&y.ended&&N(this)),lt!==null&&this.emit("data",lt),lt};function bt(d,y){if(b("onEofChunk"),!y.ended){if(y.decoder){var D=y.decoder.end();D&&D.length&&(y.buffer.push(D),y.length+=y.objectMode?1:D.length)}y.ended=!0,y.sync?pt(d):(y.needReadable=!1,y.emittedReadable||(y.emittedReadable=!0,gt(d)))}}function pt(d){var y=d._readableState;b("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(b("emitReadable",y.flowing),y.emittedReadable=!0,Z.nextTick(gt,d))}function gt(d){var y=d._readableState;b("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&(y.length||y.ended)&&(d.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,S(d)}function ot(d,y){y.readingMore||(y.readingMore=!0,Z.nextTick(B,d,y))}function B(d,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){var D=y.length;if(b("maybeReadMore read 0"),d.read(0),D===y.length)break}y.readingMore=!1}P.prototype._read=function(d){U(this,new E("_read()"))},P.prototype.pipe=function(d,y){var D=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=d;break;case 1:$.pipes=[$.pipes,d];break;default:$.pipes.push(d);break}$.pipesCount+=1,b("pipe count=%d opts=%j",$.pipesCount,y);var lt=(!y||y.end!==!1)&&d!==Z.stdout&&d!==Z.stderr,nt=lt?Rt:a;$.endEmitted?Z.nextTick(nt):D.once("end",nt),d.on("unpipe",j);function j(f,v){b("onunpipe"),f===D&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,qt())}function Rt(){b("onend"),d.end()}var Ot=M(D);d.on("drain",Ot);var vt=!1;function qt(){b("cleanup"),d.removeListener("close",zt),d.removeListener("finish",e),d.removeListener("drain",Ot),d.removeListener("error",Et),d.removeListener("unpipe",j),D.removeListener("end",Rt),D.removeListener("end",a),D.removeListener("data",te),vt=!0,$.awaitDrain&&(!d._writableState||d._writableState.needDrain)&&Ot()}D.on("data",te);function te(f){b("ondata");var v=d.write(f);b("dest.write",v),v===!1&&(($.pipesCount===1&&$.pipes===d||$.pipesCount>1&&et($.pipes,d)!==-1)&&!vt&&(b("false write response, pause",$.awaitDrain),$.awaitDrain++),D.pause())}function Et(f){b("onerror",f),a(),d.removeListener("error",Et),o(d,"error")===0&&U(d,f)}V(d,"error",Et);function zt(){d.removeListener("finish",e),a()}d.once("close",zt);function e(){b("onfinish"),d.removeListener("close",zt),a()}d.once("finish",e);function a(){b("unpipe"),D.unpipe(d)}return d.emit("pipe",D),$.flowing||(b("pipe resume"),D.resume()),d};function M(d){return function(){var y=d._readableState;b("pipeOnDrain",y.awaitDrain),y.awaitDrain&&y.awaitDrain--,y.awaitDrain===0&&o(d,"data")&&(y.flowing=!0,S(d))}}P.prototype.unpipe=function(d){var y=this._readableState,D={hasUnpiped:!1};if(y.pipesCount===0)return this;if(y.pipesCount===1)return d&&d!==y.pipes?this:(d||(d=y.pipes),y.pipes=null,y.pipesCount=0,y.flowing=!1,d&&d.emit("unpipe",this,D),this);if(!d){var $=y.pipes,lt=y.pipesCount;y.pipes=null,y.pipesCount=0,y.flowing=!1;for(var nt=0;nt<lt;nt++)$[nt].emit("unpipe",this,{hasUnpiped:!1});return this}var j=et(y.pipes,d);return j===-1?this:(y.pipes.splice(j,1),y.pipesCount-=1,y.pipesCount===1&&(y.pipes=y.pipes[0]),d.emit("unpipe",this,D),this)},P.prototype.on=function(d,y){var D=u.prototype.on.call(this,d,y),$=this._readableState;return d==="data"?($.readableListening=this.listenerCount("readable")>0,$.flowing!==!1&&this.resume()):d==="readable"&&!$.endEmitted&&!$.readableListening&&($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,b("on readable",$.length,$.reading),$.length?pt(this):$.reading||Z.nextTick(Y,this)),D},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(d,y){var D=u.prototype.removeListener.call(this,d,y);return d==="readable"&&Z.nextTick(W,this),D},P.prototype.removeAllListeners=function(d){var y=u.prototype.removeAllListeners.apply(this,arguments);return(d==="readable"||d===void 0)&&Z.nextTick(W,this),y};function W(d){var y=d._readableState;y.readableListening=d.listenerCount("readable")>0,y.resumeScheduled&&!y.paused?y.flowing=!0:d.listenerCount("data")>0&&d.resume()}function Y(d){b("readable nexttick read 0"),d.read(0)}P.prototype.resume=function(){var d=this._readableState;return d.flowing||(b("resume"),d.flowing=!d.readableListening,st(this,d)),d.paused=!1,this};function st(d,y){y.resumeScheduled||(y.resumeScheduled=!0,Z.nextTick(it,d,y))}function it(d,y){b("resume",y.reading),y.reading||d.read(0),y.resumeScheduled=!1,d.emit("resume"),S(d),y.flowing&&!y.reading&&d.read(0)}P.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function S(d){var y=d._readableState;for(b("flow",y.flowing);y.flowing&&d.read()!==null;);}P.prototype.wrap=function(d){var y=this,D=this._readableState,$=!1;d.on("end",function(){if(b("wrapped end"),D.decoder&&!D.ended){var j=D.decoder.end();j&&j.length&&y.push(j)}y.push(null)}),d.on("data",function(j){if(b("wrapped data"),D.decoder&&(j=D.decoder.write(j)),!(D.objectMode&&j==null)&&!(!D.objectMode&&(!j||!j.length))){var Rt=y.push(j);Rt||($=!0,d.pause())}});for(var lt in d)this[lt]===void 0&&typeof d[lt]=="function"&&(this[lt]=function(j){return function(){return d[j].apply(d,arguments)}}(lt));for(var nt=0;nt<C.length;nt++)d.on(C[nt],this.emit.bind(this,C[nt]));return this._read=function(j){b("wrapped _read",j),$&&($=!1,d.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return F===void 0&&(F=Pr()),F(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(d){this._readableState&&(this._readableState.flowing=d)}}),P._fromList=O,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function O(d,y){if(y.length===0)return null;var D;return y.objectMode?D=y.buffer.shift():!d||d>=y.length?(y.decoder?D=y.buffer.join(""):y.buffer.length===1?D=y.buffer.first():D=y.buffer.concat(y.length),y.buffer.clear()):D=y.buffer.consume(d,y.decoder),D}function N(d){var y=d._readableState;b("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,Z.nextTick(J,y,d))}function J(d,y){if(b("endReadableNT",d.endEmitted,d.length),!d.endEmitted&&d.length===0&&(d.endEmitted=!0,y.readable=!1,y.emit("end"),d.autoDestroy)){var D=y._writableState;(!D||D.autoDestroy&&D.finished)&&y.destroy()}}typeof Symbol=="function"&&(P.from=function(d,y){return _===void 0&&(_=Mr()),_(P,d,y)});function et(d,y){for(var D=0,$=d.length;D<$;D++)if(d[D]===y)return D;return-1}}),Ke=X((t,r)=>{K(),r.exports=p;var n=Ft().codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=n.ERR_TRANSFORM_WITH_LENGTH_0,i=Nt();Pt()(p,i);function c(A,T){var h=this._transformState;h.transforming=!1;var g=h.writecb;if(g===null)return this.emit("error",new u);h.writechunk=null,h.writecb=null,T!=null&&this.push(T),g(A);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function p(A){if(!(this instanceof p))return new p(A);i.call(this,A),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),this.on("prefinish",b)}function b(){var A=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(T,h){m(A,T,h)}):m(this,null,null)}p.prototype.push=function(A,T){return this._transformState.needTransform=!1,i.prototype.push.call(this,A,T)},p.prototype._transform=function(A,T,h){h(new o("_transform()"))},p.prototype._write=function(A,T,h){var g=this._transformState;if(g.writecb=h,g.writechunk=A,g.writeencoding=T,!g.transforming){var w=this._readableState;(g.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},p.prototype._read=function(A){var T=this._transformState;T.writechunk!==null&&!T.transforming?(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform)):T.needTransform=!0},p.prototype._destroy=function(A,T){i.prototype._destroy.call(this,A,function(h){T(h)})};function m(A,T,h){if(T)return A.emit("error",T);if(h!=null&&A.push(h),A._writableState.length)throw new l;if(A._transformState.transforming)throw new s;return A.push(null)}}),Ur=X((t,r)=>{K(),r.exports=o;var n=Ke();Pt()(o,n);function o(u){if(!(this instanceof o))return new o(u);n.call(this,u)}o.prototype._transform=function(u,s,l){l(null,u)}}),xr=X((t,r)=>{K();var n;function o(h){var g=!1;return function(){g||(g=!0,h.apply(void 0,arguments))}}var u=Ft().codes,s=u.ERR_MISSING_ARGS,l=u.ERR_STREAM_DESTROYED;function i(h){if(h)throw h}function c(h){return h.setHeader&&typeof h.abort=="function"}function p(h,g,w,k){k=o(k);var E=!1;h.on("close",function(){E=!0}),n===void 0&&(n=we()),n(h,{readable:g,writable:w},function(L){if(L)return k(L);E=!0,k()});var I=!1;return function(L){if(!E&&!I){if(I=!0,c(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();k(L||new l("pipe"))}}}function b(h){h()}function m(h,g){return h.pipe(g)}function A(h){return!h.length||typeof h[h.length-1]!="function"?i:h.pop()}function T(){for(var h=arguments.length,g=new Array(h),w=0;w<h;w++)g[w]=arguments[w];var k=A(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new s("streams");var E,I=g.map(function(L,F){var _=F<g.length-1,U=F>0;return p(L,_,U,function(C){E||(E=C),C&&I.forEach(b),!_&&(I.forEach(b),k(E))})});return g.reduce(m)}r.exports=T}),Dt=X((t,r)=>{K(),t=r.exports=Ve(),t.Stream=t,t.Readable=t,t.Writable=$e(),t.Duplex=Nt(),t.Transform=Ke(),t.PassThrough=Ur(),t.finished=we(),t.pipeline=xr()}),Cr=X((t,r)=>{K(),r.exports=n;function n(o,u){if(o&&u)return n(o)(u);if(typeof o!="function")throw new TypeError("need wrapper function");return Object.keys(o).forEach(function(l){s[l]=o[l]}),s;function s(){for(var l=new Array(arguments.length),i=0;i<l.length;i++)l[i]=arguments[i];var c=o.apply(this,l),p=l[l.length-1];return typeof c=="function"&&c!==p&&Object.keys(p).forEach(function(b){c[b]=p[b]}),c}}}),He=X((t,r)=>{K();var n=Cr();r.exports=n(o),r.exports.strict=n(u),o.proto=o(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return u(this)},configurable:!0})});function o(s){var l=function(){return l.called?l.value:(l.called=!0,l.value=s.apply(this,arguments))};return l.called=!1,l}function u(s){var l=function(){if(l.called)throw new Error(l.onceError);return l.called=!0,l.value=s.apply(this,arguments)},i=s.name||"Function wrapped with `once`";return l.onceError=i+" shouldn't be called more than once",l.called=!1,l}}),Ye=X((t,r)=>{K();var n=He(),o=function(){},u=function(i){return i.setHeader&&typeof i.abort=="function"},s=function(i){return i.stdio&&Array.isArray(i.stdio)&&i.stdio.length===3},l=function(i,c,p){if(typeof c=="function")return l(i,null,c);c||(c={}),p=n(p||o);var b=i._writableState,m=i._readableState,A=c.readable||c.readable!==!1&&i.readable,T=c.writable||c.writable!==!1&&i.writable,h=!1,g=function(){i.writable||w()},w=function(){T=!1,A||p.call(i)},k=function(){A=!1,T||p.call(i)},E=function(U){p.call(i,U?new Error("exited with error code: "+U):null)},I=function(U){p.call(i,U)},L=function(){Z.nextTick(F)},F=function(){if(!h){if(A&&!(m&&m.ended&&!m.destroyed))return p.call(i,new Error("premature close"));if(T&&!(b&&b.ended&&!b.destroyed))return p.call(i,new Error("premature close"))}},_=function(){i.req.on("finish",w)};return u(i)?(i.on("complete",w),i.on("abort",L),i.req?_():i.on("request",_)):T&&!b&&(i.on("end",g),i.on("close",g)),s(i)&&i.on("exit",E),i.on("end",k),i.on("finish",w),c.error!==!1&&i.on("error",I),i.on("close",L),function(){h=!0,i.removeListener("complete",w),i.removeListener("abort",L),i.removeListener("request",_),i.req&&i.req.removeListener("finish",w),i.removeListener("end",g),i.removeListener("close",g),i.removeListener("finish",w),i.removeListener("exit",E),i.removeListener("end",k),i.removeListener("error",I),i.removeListener("close",L)}};r.exports=l}),Nr=X(()=>{K()}),Fr=X((t,r)=>{K();var n=He(),o=Ye(),u=Nr(),s=function(){},l=/^v?\.0/.test(Z.version),i=function(h){return typeof h=="function"},c=function(h){return!l||!u?!1:(h instanceof(u.ReadStream||s)||h instanceof(u.WriteStream||s))&&i(h.close)},p=function(h){return h.setHeader&&i(h.abort)},b=function(h,g,w,k){k=n(k);var E=!1;h.on("close",function(){E=!0}),o(h,{readable:g,writable:w},function(L){if(L)return k(L);E=!0,k()});var I=!1;return function(L){if(!E&&!I){if(I=!0,c(h))return h.close(s);if(p(h))return h.abort();if(i(h.destroy))return h.destroy();k(L||new Error("stream was destroyed"))}}},m=function(h){h()},A=function(h,g){return h.pipe(g)},T=function(){var h=Array.prototype.slice.call(arguments),g=i(h[h.length-1]||s)&&h.pop()||s;if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new Error("pump requires two streams per minimum");var w,k=h.map(function(E,I){var L=I<h.length-1,F=I>0;return b(E,L,F,function(_){w||(w=_),_&&k.forEach(m),!L&&(k.forEach(m),g(w))})});return h.reduce(A)};r.exports=T}),Dr=X((t,r)=>{K(),r.exports=n;function n(u){var s=u._readableState;return s?s.objectMode||typeof u._duplexState=="number"?u.read():u.read(o(s)):null}function o(u){return u.buffer.length?u.buffer.head?u.buffer.head.data.length:u.buffer[0].length:u.length}}),Wr=X((t,r)=>{K();var n=Dt(),o=Ye(),u=Pt(),s=Dr(),l=Q.Buffer.from&&Q.Buffer.from!==Uint8Array.from?Q.Buffer.from([0]):new Q.Buffer([0]),i=function(h,g){h._corked?h.once("uncork",g):g()},c=function(h,g){h._autoDestroy&&h.destroy(g)},p=function(h,g){return function(w){w?c(h,w.message==="premature close"?null:w):g&&!h._ended&&h.end()}},b=function(h,g){if(!h||h._writableState&&h._writableState.finished)return g();if(h._writableState)return h.end(g);h.end(),g()},m=function(){},A=function(h){return new n.Readable({objectMode:!0,highWaterMark:16}).wrap(h)},T=function(h,g,w){if(!(this instanceof T))return new T(h,g,w);n.Duplex.call(this,w),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!w||w.autoDestroy!==!1,this._forwardDestroy=!w||w.destroy!==!1,this._forwardEnd=!w||w.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,h&&this.setWritable(h),g&&this.setReadable(g)};u(T,n.Duplex),T.obj=function(h,g,w){return w||(w={}),w.objectMode=!0,w.highWaterMark=16,new T(h,g,w)},T.prototype.cork=function(){++this._corked===1&&this.emit("cork")},T.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},T.prototype.setWritable=function(h){if(this._unwrite&&this._unwrite(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.end();return}var g=this,w=o(h,{writable:!0,readable:!1},p(this,this._forwardEnd)),k=function(){var I=g._ondrain;g._ondrain=null,I&&I()},E=function(){g._writable.removeListener("drain",k),w()};this._unwrite&&Z.nextTick(k),this._writable=h,this._writable.on("drain",k),this._unwrite=E,this.uncork()},T.prototype.setReadable=function(h){if(this._unread&&this._unread(),this.destroyed){h&&h.destroy&&h.destroy();return}if(h===null||h===!1){this.push(null),this.resume();return}var g=this,w=o(h,{writable:!1,readable:!0},p(this)),k=function(){g._forward()},E=function(){g.push(null)},I=function(){g._readable2.removeListener("readable",k),g._readable2.removeListener("end",E),w()};this._drained=!0,this._readable=h,this._readable2=h._readableState?h:A(h),this._readable2.on("readable",k),this._readable2.on("end",E),this._unread=I,this._forward()},T.prototype._read=function(){this._drained=!0,this._forward()},T.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var h;this._drained&&(h=s(this._readable2))!==null;)this.destroyed||(this._drained=this.push(h));this._forwarding=!1}},T.prototype.destroy=function(h,g){if(g||(g=m),this.destroyed)return g(null);this.destroyed=!0;var w=this;Z.nextTick(function(){w._destroy(h),g(null)})},T.prototype._destroy=function(h){if(h){var g=this._ondrain;this._ondrain=null,g?g(h):this.emit("error",h)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},T.prototype._write=function(h,g,w){if(!this.destroyed){if(this._corked)return i(this,this._write.bind(this,h,g,w));if(h===l)return this._finish(w);if(!this._writable)return w();this._writable.write(h)===!1?this._ondrain=w:this.destroyed||w()}},T.prototype._finish=function(h){var g=this;this.emit("preend"),i(this,function(){b(g._forwardEnd&&g._writable,function(){g._writableState.prefinished===!1&&(g._writableState.prefinished=!0),g.emit("prefinish"),i(g,h)})})},T.prototype.end=function(h,g,w){return typeof h=="function"?this.end(null,null,h):typeof g=="function"?this.end(h,null,g):(this._ended=!0,h&&this.write(h),!this._writableState.ending&&!this._writableState.destroyed&&this.write(l),n.Writable.prototype.end.call(this,w))},r.exports=T}),qr=X((t,r)=>{K();var n=Fr(),o=Pt(),u=Wr(),s=function(i){return i.length?Array.isArray(i[0])?i[0]:Array.prototype.slice.call(i):[]},l=function(i){var c=function(){var p=s(arguments);if(!(this instanceof c))return new c(p);u.call(this,null,null,i),p.length&&this.setPipeline(p)};return o(c,u),c.prototype.setPipeline=function(){var p=s(arguments),b=this,m=!1,A=p[0],T=p[p.length-1];T=T.readable?T:null,A=A.writable?A:null;var h=function(){p[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",h),this.on("prefinish",function(){m||b.cork()}),n(p,function(g){if(b.removeListener("close",h),g)return b.destroy(g.message==="premature close"?null:g);m=!0,b._autoDestroy===!1&&(b._autoDestroy=!0),b.uncork()}),this.destroyed)return h();this.setWritable(A),this.setReadable(T)},c};r.exports=l({autoDestroy:!1,destroy:!1}),r.exports.obj=l({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16}),r.exports.ctor=l}),zr=X(()=>{K()}),Je=X((t,r)=>{K(),function(n){typeof define<"u"&&define.amd?define([],function(){return o}):typeof r<"u"&&r.exports?r.exports=o:n.secureRandom=o;function o(l,i){if(i=i||{type:"Array"},typeof Z<"u"&&typeof Z.pid=="number"&&Z.versions&&Z.versions.node)return u(l,i);var c=window.crypto||window.msCrypto;if(!c)throw new Error("Your browser does not support window.crypto.");return s(l,i)}function u(l,i){var c=zr(),p=c.randomBytes(l);switch(i.type){case"Array":return[].slice.call(p);case"Buffer":return p;case"Uint8Array":for(var b=new Uint8Array(l),m=0;m<l;++m)b[m]=p.readUInt8(m);return b;default:throw new Error(i.type+" is unsupported.")}}function s(l,i){var c=new Uint8Array(l),p=window.crypto||window.msCrypto;switch(p.getRandomValues(c),i.type){case"Array":return[].slice.call(c);case"Buffer":try{var b=new Q.Buffer(1)}catch{throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new Q.Buffer(c);case"Uint8Array":return c;default:throw new Error(i.type+" is unsupported.")}}o.randomArray=function(l){return o(l,{type:"Array"})},o.randomUint8Array=function(l){return o(l,{type:"Uint8Array"})},o.randomBuffer=function(l){return o(l,{type:"Buffer"})}}(t)}),Qe=X((t,r)=>{K(),r.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},o=Symbol("test"),u=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(u)!=="[object Symbol]")return!1;var s=42;n[o]=s;for(o in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var l=Object.getOwnPropertySymbols(n);if(l.length!==1||l[0]!==o||!Object.prototype.propertyIsEnumerable.call(n,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(n,o);if(i.value!==s||i.enumerable!==!0)return!1}return!0}}),ie=X((t,r)=>{K();var n=Qe();r.exports=function(){return n()&&!!Symbol.toStringTag}}),Gr=X((t,r)=>{K();var n=typeof Symbol<"u"&&Symbol,o=Qe();r.exports=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:o()}}),$r=X((t,r)=>{K();var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,u=Object.prototype.toString,s="[object Function]";r.exports=function(l){var i=this;if(typeof i!="function"||u.call(i)!==s)throw new TypeError(n+i);for(var c=o.call(arguments,1),p,b=function(){if(this instanceof p){var g=i.apply(this,c.concat(o.call(arguments)));return Object(g)===g?g:this}else return i.apply(l,c.concat(o.call(arguments)))},m=Math.max(0,i.length-c.length),A=[],T=0;T<m;T++)A.push("$"+T);if(p=Function("binder","return function ("+A.join(",")+"){ return binder.apply(this,arguments); }")(b),i.prototype){var h=function(){};h.prototype=i.prototype,p.prototype=new h,h.prototype=null}return p}}),ve=X((t,r)=>{K();var n=$r();r.exports=Function.prototype.bind||n}),Vr=X((t,r)=>{K();var n=ve();r.exports=n.call(Function.call,Object.prototype.hasOwnProperty)}),Ee=X((t,r)=>{K();var n,o=SyntaxError,u=Function,s=TypeError,l=function(P){try{return u('"use strict"; return ('+P+").constructor;")()}catch{}},i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch{i=null}var c=function(){throw new s},p=i?function(){try{return arguments.callee,c}catch{try{return i(arguments,"callee").get}catch{return c}}}():c,b=Gr()(),m=Object.getPrototypeOf||function(P){return P.__proto__},A={},T=typeof Uint8Array>"u"?n:m(Uint8Array),h={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":b?m([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":A,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?m(m([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!b?n:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!b?n:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?m(""[Symbol.iterator]()):n,"%Symbol%":b?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":p,"%TypedArray%":T,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet},g=function P(G){var H;if(G==="%AsyncFunction%")H=l("async function () {}");else if(G==="%GeneratorFunction%")H=l("function* () {}");else if(G==="%AsyncGeneratorFunction%")H=l("async function* () {}");else if(G==="%AsyncGenerator%"){var tt=P("%AsyncGeneratorFunction%");tt&&(H=tt.prototype)}else if(G==="%AsyncIteratorPrototype%"){var rt=P("%AsyncGenerator%");rt&&(H=m(rt.prototype))}return h[G]=H,H},w={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=ve(),E=Vr(),I=k.call(Function.call,Array.prototype.concat),L=k.call(Function.apply,Array.prototype.splice),F=k.call(Function.call,String.prototype.replace),_=k.call(Function.call,String.prototype.slice),U=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,V=function(P){var G=_(P,0,1),H=_(P,-1);if(G==="%"&&H!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(H==="%"&&G!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var tt=[];return F(P,U,function(rt,ut,at,bt){tt[tt.length]=at?F(bt,C,"$1"):ut||rt}),tt},q=function(P,G){var H=P,tt;if(E(w,H)&&(tt=w[H],H="%"+tt[0]+"%"),E(h,H)){var rt=h[H];if(rt===A&&(rt=g(H)),typeof rt>"u"&&!G)throw new s("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:tt,name:H,value:rt}}throw new o("intrinsic "+P+" does not exist!")};r.exports=function(P,G){if(typeof P!="string"||P.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof G!="boolean")throw new s('"allowMissing" argument must be a boolean');var H=V(P),tt=H.length>0?H[0]:"",rt=q("%"+tt+"%",G),ut=rt.name,at=rt.value,bt=!1,pt=rt.alias;pt&&(tt=pt[0],L(H,I([0,1],pt)));for(var gt=1,ot=!0;gt<H.length;gt+=1){var B=H[gt],M=_(B,0,1),W=_(B,-1);if((M==='"'||M==="'"||M==="`"||W==='"'||W==="'"||W==="`")&&M!==W)throw new o("property names with quotes must have matching quotes");if((B==="constructor"||!ot)&&(bt=!0),tt+="."+B,ut="%"+tt+"%",E(h,ut))at=h[ut];else if(at!=null){if(!(B in at)){if(!G)throw new s("base intrinsic for "+P+" exists, but the property is not available.");return}if(i&&gt+1>=H.length){var Y=i(at,B);ot=!!Y,ot&&"get"in Y&&!("originalValue"in Y.get)?at=Y.get:at=at[B]}else ot=E(at,B),at=at[B];ot&&!bt&&(h[ut]=at)}}return at}}),Kr=X((t,r)=>{K();var n=ve(),o=Ee(),u=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),l=o("%Reflect.apply%",!0)||n.call(s,u),i=o("%Object.getOwnPropertyDescriptor%",!0),c=o("%Object.defineProperty%",!0),p=o("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}r.exports=function(m){var A=l(n,s,arguments);if(i&&c){var T=i(A,"length");T.configurable&&c(A,"length",{value:1+p(0,m.length-(arguments.length-1))})}return A};var b=function(){return l(n,u,arguments)};c?c(r.exports,"apply",{value:b}):r.exports.apply=b}),_e=X((t,r)=>{K();var n=Ee(),o=Kr(),u=o(n("String.prototype.indexOf"));r.exports=function(s,l){var i=n(s,!!l);return typeof i=="function"&&u(s,".prototype.")>-1?o(i):i}}),Hr=X((t,r)=>{K();var n=ie()(),o=_e(),u=o("Object.prototype.toString"),s=function(c){return n&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:u(c)==="[object Arguments]"},l=function(c){return s(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&u(c)!=="[object Array]"&&u(c.callee)==="[object Function]"},i=function(){return s(arguments)}();s.isLegacyArguments=l,r.exports=i?s:l}),Yr=X((t,r)=>{K();var n=Object.prototype.toString,o=Function.prototype.toString,u=/^\s*(?:function)?\*/,s=ie()(),l=Object.getPrototypeOf,i=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},c;r.exports=function(p){if(typeof p!="function")return!1;if(u.test(o.call(p)))return!0;if(!s){var b=n.call(p);return b==="[object GeneratorFunction]"}if(!l)return!1;if(typeof c>"u"){var m=i();c=m?l(m):!1}return l(p)===c}}),Xe=X((t,r)=>{K();var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString;r.exports=function(u,s,l){if(o.call(s)!=="[object Function]")throw new TypeError("iterator must be a function");var i=u.length;if(i===+i)for(var c=0;c<i;c++)s.call(l,u[c],c,u);else for(var p in u)n.call(u,p)&&s.call(l,u[p],p,u)}}),Ze=X((t,r)=>{K();var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o=typeof globalThis>"u"?jt:globalThis;r.exports=function(){for(var u=[],s=0;s<n.length;s++)typeof o[n[s]]=="function"&&(u[u.length]=n[s]);return u}}),tr=X((t,r)=>{K();var n=Ee(),o=n("%Object.getOwnPropertyDescriptor%",!0);if(o)try{o([],"length")}catch{o=null}r.exports=o}),er=X((t,r)=>{K();var n=Xe(),o=Ze(),u=_e(),s=u("Object.prototype.toString"),l=ie()(),i=typeof globalThis>"u"?jt:globalThis,c=o(),p=u("Array.prototype.indexOf",!0)||function(g,w){for(var k=0;k<g.length;k+=1)if(g[k]===w)return k;return-1},b=u("String.prototype.slice"),m={},A=tr(),T=Object.getPrototypeOf;l&&A&&T&&n(c,function(g){var w=new i[g];if(Symbol.toStringTag in w){var k=T(w),E=A(k,Symbol.toStringTag);if(!E){var I=T(k);E=A(I,Symbol.toStringTag)}m[g]=E.get}});var h=function(g){var w=!1;return n(m,function(k,E){if(!w)try{w=k.call(g)===E}catch{}}),w};r.exports=function(g){if(!g||typeof g!="object")return!1;if(!l||!(Symbol.toStringTag in g)){var w=b(s(g),8,-1);return p(c,w)>-1}return A?h(g):!1}}),Jr=X((t,r)=>{K();var n=Xe(),o=Ze(),u=_e(),s=u("Object.prototype.toString"),l=ie()(),i=typeof globalThis>"u"?jt:globalThis,c=o(),p=u("String.prototype.slice"),b={},m=tr(),A=Object.getPrototypeOf;l&&m&&A&&n(c,function(g){if(typeof i[g]=="function"){var w=new i[g];if(Symbol.toStringTag in w){var k=A(w),E=m(k,Symbol.toStringTag);if(!E){var I=A(k);E=m(I,Symbol.toStringTag)}b[g]=E.get}}});var T=function(g){var w=!1;return n(b,function(k,E){if(!w)try{var I=k.call(g);I===E&&(w=I)}catch{}}),w},h=er();r.exports=function(g){return h(g)?!l||!(Symbol.toStringTag in g)?p(s(g),8,-1):T(g):!1}}),Qr=X(t=>{K();var r=Hr(),n=Yr(),o=Jr(),u=er();function s(j){return j.call.bind(j)}var l=typeof BigInt<"u",i=typeof Symbol<"u",c=s(Object.prototype.toString),p=s(Number.prototype.valueOf),b=s(String.prototype.valueOf),m=s(Boolean.prototype.valueOf);l&&(A=s(BigInt.prototype.valueOf));var A;i&&(T=s(Symbol.prototype.valueOf));var T;function h(j,Rt){if(typeof j!="object")return!1;try{return Rt(j),!0}catch{return!1}}t.isArgumentsObject=r,t.isGeneratorFunction=n,t.isTypedArray=u;function g(j){return typeof Promise<"u"&&j instanceof Promise||j!==null&&typeof j=="object"&&typeof j.then=="function"&&typeof j.catch=="function"}t.isPromise=g;function w(j){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(j):u(j)||M(j)}t.isArrayBufferView=w;function k(j){return o(j)==="Uint8Array"}t.isUint8Array=k;function E(j){return o(j)==="Uint8ClampedArray"}t.isUint8ClampedArray=E;function I(j){return o(j)==="Uint16Array"}t.isUint16Array=I;function L(j){return o(j)==="Uint32Array"}t.isUint32Array=L;function F(j){return o(j)==="Int8Array"}t.isInt8Array=F;function _(j){return o(j)==="Int16Array"}t.isInt16Array=_;function U(j){return o(j)==="Int32Array"}t.isInt32Array=U;function C(j){return o(j)==="Float32Array"}t.isFloat32Array=C;function V(j){return o(j)==="Float64Array"}t.isFloat64Array=V;function q(j){return o(j)==="BigInt64Array"}t.isBigInt64Array=q;function P(j){return o(j)==="BigUint64Array"}t.isBigUint64Array=P;function G(j){return c(j)==="[object Map]"}G.working=typeof Map<"u"&&G(new Map);function H(j){return typeof Map>"u"?!1:G.working?G(j):j instanceof Map}t.isMap=H;function tt(j){return c(j)==="[object Set]"}tt.working=typeof Set<"u"&&tt(new Set);function rt(j){return typeof Set>"u"?!1:tt.working?tt(j):j instanceof Set}t.isSet=rt;function ut(j){return c(j)==="[object WeakMap]"}ut.working=typeof WeakMap<"u"&&ut(new WeakMap);function at(j){return typeof WeakMap>"u"?!1:ut.working?ut(j):j instanceof WeakMap}t.isWeakMap=at;function bt(j){return c(j)==="[object WeakSet]"}bt.working=typeof WeakSet<"u"&&bt(new WeakSet);function pt(j){return bt(j)}t.isWeakSet=pt;function gt(j){return c(j)==="[object ArrayBuffer]"}gt.working=typeof ArrayBuffer<"u"&&gt(new ArrayBuffer);function ot(j){return typeof ArrayBuffer>"u"?!1:gt.working?gt(j):j instanceof ArrayBuffer}t.isArrayBuffer=ot;function B(j){return c(j)==="[object DataView]"}B.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&B(new DataView(new ArrayBuffer(1),0,1));function M(j){return typeof DataView>"u"?!1:B.working?B(j):j instanceof DataView}t.isDataView=M;var W=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Y(j){return c(j)==="[object SharedArrayBuffer]"}function st(j){return typeof W>"u"?!1:(typeof Y.working>"u"&&(Y.working=Y(new W)),Y.working?Y(j):j instanceof W)}t.isSharedArrayBuffer=st;function it(j){return c(j)==="[object AsyncFunction]"}t.isAsyncFunction=it;function S(j){return c(j)==="[object Map Iterator]"}t.isMapIterator=S;function O(j){return c(j)==="[object Set Iterator]"}t.isSetIterator=O;function N(j){return c(j)==="[object Generator]"}t.isGeneratorObject=N;function J(j){return c(j)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=J;function et(j){return h(j,p)}t.isNumberObject=et;function d(j){return h(j,b)}t.isStringObject=d;function y(j){return h(j,m)}t.isBooleanObject=y;function D(j){return l&&h(j,A)}t.isBigIntObject=D;function $(j){return i&&h(j,T)}t.isSymbolObject=$;function lt(j){return et(j)||d(j)||y(j)||D(j)||$(j)}t.isBoxedPrimitive=lt;function nt(j){return typeof Uint8Array<"u"&&(ot(j)||st(j))}t.isAnyArrayBuffer=nt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(j){Object.defineProperty(t,j,{enumerable:!1,value:function(){throw new Error(j+" is not supported in userland")}})})}),Xr=X((t,r)=>{K(),r.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}}),Zr=X(t=>{K();var r=Object.getOwnPropertyDescriptors||function(B){for(var M=Object.keys(B),W={},Y=0;Y<M.length;Y++)W[M[Y]]=Object.getOwnPropertyDescriptor(B,M[Y]);return W},n=/%[sdj%]/g;t.format=function(B){if(!F(B)){for(var M=[],W=0;W<arguments.length;W++)M.push(l(arguments[W]));return M.join(" ")}for(var W=1,Y=arguments,st=Y.length,it=String(B).replace(n,function(N){if(N==="%%")return"%";if(W>=st)return N;switch(N){case"%s":return String(Y[W++]);case"%d":return Number(Y[W++]);case"%j":try{return JSON.stringify(Y[W++])}catch{return"[Circular]"}default:return N}}),S=Y[W];W<st;S=Y[++W])E(S)||!V(S)?it+=" "+S:it+=" "+l(S);return it},t.deprecate=function(B,M){if(typeof Z<"u"&&Z.noDeprecation===!0)return B;if(typeof Z>"u")return function(){return t.deprecate(B,M).apply(this,arguments)};var W=!1;function Y(){if(!W){if(Z.throwDeprecation)throw new Error(M);Z.traceDeprecation?console.trace(M):console.error(M),W=!0}return B.apply(this,arguments)}return Y};var o={},u=/^$/;Z.env.NODE_DEBUG&&(s=Z.env.NODE_DEBUG,s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),u=new RegExp("^"+s+"$","i"));var s;t.debuglog=function(B){if(B=B.toUpperCase(),!o[B])if(u.test(B)){var M=Z.pid;o[B]=function(){var W=t.format.apply(t,arguments);console.error("%s %d: %s",B,M,W)}}else o[B]=function(){};return o[B]};function l(B,M){var W={seen:[],stylize:c};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),k(M)?W.showHidden=M:M&&t._extend(W,M),U(W.showHidden)&&(W.showHidden=!1),U(W.depth)&&(W.depth=2),U(W.colors)&&(W.colors=!1),U(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=i),b(W,B,W.depth)}t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(B,M){var W=l.styles[M];return W?"\x1B["+l.colors[W][0]+"m"+B+"\x1B["+l.colors[W][1]+"m":B}function c(B,M){return B}function p(B){var M={};return B.forEach(function(W,Y){M[W]=!0}),M}function b(B,M,W){if(B.customInspect&&M&&G(M.inspect)&&M.inspect!==t.inspect&&!(M.constructor&&M.constructor.prototype===M)){var Y=M.inspect(W,B);return F(Y)||(Y=b(B,Y,W)),Y}var st=m(B,M);if(st)return st;var it=Object.keys(M),S=p(it);if(B.showHidden&&(it=Object.getOwnPropertyNames(M)),P(M)&&(it.indexOf("message")>=0||it.indexOf("description")>=0))return A(M);if(it.length===0){if(G(M)){var O=M.name?": "+M.name:"";return B.stylize("[Function"+O+"]","special")}if(C(M))return B.stylize(RegExp.prototype.toString.call(M),"regexp");if(q(M))return B.stylize(Date.prototype.toString.call(M),"date");if(P(M))return A(M)}var N="",J=!1,et=["{","}"];if(w(M)&&(J=!0,et=["[","]"]),G(M)){var d=M.name?": "+M.name:"";N=" [Function"+d+"]"}if(C(M)&&(N=" "+RegExp.prototype.toString.call(M)),q(M)&&(N=" "+Date.prototype.toUTCString.call(M)),P(M)&&(N=" "+A(M)),it.length===0&&(!J||M.length==0))return et[0]+N+et[1];if(W<0)return C(M)?B.stylize(RegExp.prototype.toString.call(M),"regexp"):B.stylize("[Object]","special");B.seen.push(M);var y;return J?y=T(B,M,W,S,it):y=it.map(function(D){return h(B,M,W,S,D,J)}),B.seen.pop(),g(y,N,et)}function m(B,M){if(U(M))return B.stylize("undefined","undefined");if(F(M)){var W="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(W,"string")}if(L(M))return B.stylize(""+M,"number");if(k(M))return B.stylize(""+M,"boolean");if(E(M))return B.stylize("null","null")}function A(B){return"["+Error.prototype.toString.call(B)+"]"}function T(B,M,W,Y,st){for(var it=[],S=0,O=M.length;S<O;++S)bt(M,String(S))?it.push(h(B,M,W,Y,String(S),!0)):it.push("");return st.forEach(function(N){N.match(/^\d+$/)||it.push(h(B,M,W,Y,N,!0))}),it}function h(B,M,W,Y,st,it){var S,O,N;if(N=Object.getOwnPropertyDescriptor(M,st)||{value:M[st]},N.get?N.set?O=B.stylize("[Getter/Setter]","special"):O=B.stylize("[Getter]","special"):N.set&&(O=B.stylize("[Setter]","special")),bt(Y,st)||(S="["+st+"]"),O||(B.seen.indexOf(N.value)<0?(E(W)?O=b(B,N.value,null):O=b(B,N.value,W-1),O.indexOf(`
`)>-1&&(it?O=O.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):O=`
`+O.split(`
`).map(function(J){return"   "+J}).join(`
`))):O=B.stylize("[Circular]","special")),U(S)){if(it&&st.match(/^\d+$/))return O;S=JSON.stringify(""+st),S.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(S=S.substr(1,S.length-2),S=B.stylize(S,"name")):(S=S.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),S=B.stylize(S,"string"))}return S+": "+O}function g(B,M,W){var Y=0,st=B.reduce(function(it,S){return Y++,S.indexOf(`
`)>=0&&Y++,it+S.replace(/\u001b\[\d\d?m/g,"").length+1},0);return st>60?W[0]+(M===""?"":M+`
 `)+" "+B.join(`,
  `)+" "+W[1]:W[0]+M+" "+B.join(", ")+" "+W[1]}t.types=Qr();function w(B){return Array.isArray(B)}t.isArray=w;function k(B){return typeof B=="boolean"}t.isBoolean=k;function E(B){return B===null}t.isNull=E;function I(B){return B==null}t.isNullOrUndefined=I;function L(B){return typeof B=="number"}t.isNumber=L;function F(B){return typeof B=="string"}t.isString=F;function _(B){return typeof B=="symbol"}t.isSymbol=_;function U(B){return B===void 0}t.isUndefined=U;function C(B){return V(B)&&tt(B)==="[object RegExp]"}t.isRegExp=C,t.types.isRegExp=C;function V(B){return typeof B=="object"&&B!==null}t.isObject=V;function q(B){return V(B)&&tt(B)==="[object Date]"}t.isDate=q,t.types.isDate=q;function P(B){return V(B)&&(tt(B)==="[object Error]"||B instanceof Error)}t.isError=P,t.types.isNativeError=P;function G(B){return typeof B=="function"}t.isFunction=G;function H(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B>"u"}t.isPrimitive=H,t.isBuffer=Xr();function tt(B){return Object.prototype.toString.call(B)}function rt(B){return B<10?"0"+B.toString(10):B.toString(10)}var ut=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function at(){var B=new Date,M=[rt(B.getHours()),rt(B.getMinutes()),rt(B.getSeconds())].join(":");return[B.getDate(),ut[B.getMonth()],M].join(" ")}t.log=function(){console.log("%s - %s",at(),t.format.apply(t,arguments))},t.inherits=Pt(),t._extend=function(B,M){if(!M||!V(M))return B;for(var W=Object.keys(M),Y=W.length;Y--;)B[W[Y]]=M[W[Y]];return B};function bt(B,M){return Object.prototype.hasOwnProperty.call(B,M)}var pt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(B){if(typeof B!="function")throw new TypeError('The "original" argument must be of type Function');if(pt&&B[pt]){var M=B[pt];if(typeof M!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(M,pt,{value:M,enumerable:!1,writable:!1,configurable:!0}),M}function M(){for(var W,Y,st=new Promise(function(O,N){W=O,Y=N}),it=[],S=0;S<arguments.length;S++)it.push(arguments[S]);it.push(function(O,N){O?Y(O):W(N)});try{B.apply(this,it)}catch(O){Y(O)}return st}return Object.setPrototypeOf(M,Object.getPrototypeOf(B)),pt&&Object.defineProperty(M,pt,{value:M,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(M,r(B))},t.promisify.custom=pt;function gt(B,M){if(!B){var W=new Error("Promise was rejected with a falsy value");W.reason=B,B=W}return M(B)}function ot(B){if(typeof B!="function")throw new TypeError('The "original" argument must be of type Function');function M(){for(var W=[],Y=0;Y<arguments.length;Y++)W.push(arguments[Y]);var st=W.pop();if(typeof st!="function")throw new TypeError("The last argument must be of type Function");var it=this,S=function(){return st.apply(it,arguments)};B.apply(this,W).then(function(O){Z.nextTick(S.bind(null,null,O))},function(O){Z.nextTick(gt.bind(null,O,S))})}return Object.setPrototypeOf(M,Object.getPrototypeOf(B)),Object.defineProperties(M,r(B)),M}t.callbackify=ot}),tn=X((t,r)=>{K();var n=Dt(),o=Zr(),u=n.Transform;function s(l){if(!(this instanceof s))return new s(l);this._toSkip=l.skip,u.call(this,l)}o.inherits(s,u),s.prototype._transform=function(l,i,c){this._toSkip==0?this.push(l):this._toSkip>l.length?this._toSkip-=l.length:(this._toSkip!==l.length&&this.push(l.slice(this._toSkip)),this._toSkip=0),c()},r.exports=s});K();K();var rr=St(Dt(),1),nr=St(qr(),1);K();var ir=St(Dt(),1);function or(t,r){let n=[],o;t.on("data",u=>n.push(u)),t.on("end",()=>{o||(o=!0,r(null,Q.Buffer.concat(n)))}),t.on("error",u=>{o||(o=!0,r(u))})}function ar(t){let r;return new ir.Transform({transform(n,o,u){r&&(n=Q.Buffer.concat([r,n]));let s=Math.floor(n.length/t)*t;s?n.length>s?(r=n.slice(s),this.push(n.slice(0,s))):(r=void 0,this.push(n)):r=r?Q.Buffer.concat([r,n]):n,u()},flush(n){r&&this.push(r),n()}})}function en(t,r){let n=[],o=0;return new ir.Transform({transform(u,s,l){n.push(u),o+=u.length,l()},flush(u){r(o);function s(){for(;n.length;)if(!t.write(n.shift()))return t.once("drain",s);t.end(),u()}s()}})}function wt(t){let r,n=new Promise((o,u)=>{r=(s,l)=>{s?u(s):o(l)}});return t&&n.then(o=>t(null,o),t),[r,n]}var rn=St(Je(),1);K();K();var Se=class{constructor(t){this._tables[0][0][0]||this._precompute();let r,n,o,u,s,l=this._tables[0][4],i=this._tables[1],c=t.length,p=1;if(c!==4&&c!==6&&c!==8)throw new Error("invalid aes key size");for(this._key=[u=t.slice(0),s=[]],r=c;r<4*c+28;r++)o=u[r-1],(r%c===0||c===8&&r%c===4)&&(o=l[o>>>24]<<24^l[o>>16&255]<<16^l[o>>8&255]<<8^l[o&255],r%c===0&&(o=o<<8^o>>>24^p<<24,p=p<<1^(p>>7)*283)),u[r]=u[r-c]^o;for(n=0;r;n++,r--)o=u[n&3?r:r-4],r<=4||n<4?s[n]=o:s[n]=i[0][l[o>>>24]]^i[1][l[o>>16&255]]^i[2][l[o>>8&255]]^i[3][l[o&255]]}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){let t=this._tables[0],r=this._tables[1],n=t[4],o=r[4],u,s,l,i=[],c=[],p,b,m,A,T,h;for(u=0;u<256;u++)c[(i[u]=u<<1^(u>>7)*283)^u]=u;for(s=l=0;!n[s];s^=p||1,l=c[l]||1)for(A=l^l<<1^l<<2^l<<3^l<<4,A=A>>8^A&255^99,n[s]=A,o[A]=s,m=i[b=i[p=i[s]]],h=m*16843009^b*65537^p*257^s*16843008,T=i[A]*257^A*16843008,u=0;u<4;u++)t[u][s]=T=T<<24^T>>>8,r[u][A]=h=h<<24^h>>>8;for(u=0;u<5;u++)t[u]=t[u].slice(0),r[u]=r[u].slice(0)}_crypt(t,r){if(t.length!==4)throw new Error("invalid aes block size");let n=this._key[r],o=t[0]^n[0],u=t[r?3:1]^n[1],s=t[2]^n[2],l=t[r?1:3]^n[3],i,c,p,b=n.length/4-2,m,A=4,T=[0,0,0,0],h=this._tables[r],g=h[0],w=h[1],k=h[2],E=h[3],I=h[4];for(m=0;m<b;m++)i=g[o>>>24]^w[u>>16&255]^k[s>>8&255]^E[l&255]^n[A],c=g[u>>>24]^w[s>>16&255]^k[l>>8&255]^E[o&255]^n[A+1],p=g[s>>>24]^w[l>>16&255]^k[o>>8&255]^E[u&255]^n[A+2],l=g[l>>>24]^w[o>>16&255]^k[u>>8&255]^E[s&255]^n[A+3],A+=4,o=i,u=c,s=p;for(m=0;m<4;m++)T[r?3&-m:m]=I[o>>>24]<<24^I[u>>16&255]<<16^I[s>>8&255]<<8^I[l&255]^n[A++],i=o,o=u,u=s,s=l,l=i;return T}};Se.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];function nn(t){let r,n,o,u=[2479122403,2108737444,3518906241,22203222],s=Q.Buffer.alloc(Math.ceil(t.length/4)*4);for(s.set(t,0),o=65536;o--;)for(n=0;n<t.length;n+=16){let i=[0,0,0,0];for(r=0;r<16;r+=4)r+n<t.length&&(i[r/4]=s.readInt32BE(r+n));u=new Se(i).encrypt(u)}let l=Q.Buffer.allocUnsafe(16);for(r=0;r<4;r++)l.writeInt32BE(u[r],r*4);return l}function on(t,r,n){let o=Q.Buffer.from(r.s,"base64"),u=1e5,s="SHA-512";window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey","deriveBits"]).then(l=>window.crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:u,hash:{name:s}},l,256)).then(l=>{n(null,Q.Buffer.from(l))}).catch(n)}var It=class{constructor(t){if(t.length!==16)throw Error("Wrong key length. Key must be 128bit.");let r=[];for(let n=0;n<4;n++)r[n]=t.readInt32BE(n*4);this.aes=new Se(r)}encryptCBC(t){let r=[0,0,0,0],n=Array(4),o,u;for(o=0;o<t.length;o+=16){for(u=0;u<4;u++)n[u]=t.readUInt32BE(o+u*4)^r[u];for(r=this.aes.encrypt(n),u=0;u<4;u++)t.writeInt32BE(r[u],o+u*4)}}decryptCBC(t){let r=[0,0,0,0],n=Array(4),o=Array(4),u,s;for(u=0;u<t.length;u+=16){for(s=0;s<4;s++)n[s]=t.readUInt32BE(u+s*4);for(o=n,n=this.aes.decrypt(n),s=0;s<4;s++)t.writeInt32BE(n[s]^r[s],u+s*4);r=o}}stringhash(t){let r=[0,0,0,0];for(let o=0;o<t.length;o+=4)if(t.length-o<4){let u=t.length-o;r[o/4&3]^=t.readIntBE(o,u)<<(4-u)*8}else r[o/4&3]^=t.readInt32BE(o);for(let o=16384;o--;)r=this.aes.encrypt(r);let n=Q.Buffer.allocUnsafe(8);return n.writeInt32BE(r[0],0),n.writeInt32BE(r[2],4),n}encryptECB(t){let r=[];for(let n=0;n<t.length;n+=16)r[0]=t.readInt32BE(n),r[1]=t.readInt32BE(n+4),r[2]=t.readInt32BE(n+8),r[3]=t.readInt32BE(n+12),r=this.aes.encrypt(r),t.writeInt32BE(r[0],n),t.writeInt32BE(r[1],n+4),t.writeInt32BE(r[2],n+8),t.writeInt32BE(r[3],n+12);return t}decryptECB(t){let r=[];for(let n=0;n<t.length;n+=16)r[0]=t.readInt32BE(n),r[1]=t.readInt32BE(n+4),r[2]=t.readInt32BE(n+8),r[3]=t.readInt32BE(n+12),r=this.aes.decrypt(r),t.writeInt32BE(r[0],n),t.writeInt32BE(r[1],n+4),t.writeInt32BE(r[2],n+8),t.writeInt32BE(r[3],n+12);return t}},sr=class{constructor(t,r,n=0){this.aes=t,this.nonce=r.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=Q.Buffer.alloc(16),this.nonce.copy(this.ctr,0),this.incrementCTR(n/16)}encrypt(t){for(let r=0;r<t.length;r+=16){let n=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let o=0;o<16;o++)t[r+o]^=n[o];this.incrementCTR()}return t}decrypt(t){for(let r=0;r<t.length;r+=16){let n=this.aes.encryptECB(Q.Buffer.from(this.ctr));for(let o=0;o<16;o++)t[r+o]^=n[o];this.incrementCTR()}return t}incrementCTR(t=1){let r=this.ctr,n=15,o;for(;t!==0;)o=(t+r[n])%256,t=Math.floor((t+r[n])/256),r[n]=o,n-=1,n<0&&(n=15)}},ur=class{constructor(t,r,n=0){this.aes=t,this.nonce=r.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.mac=Q.Buffer.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[]}condense(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let t=Q.Buffer.alloc(16);for(let n=0;n<this.macs.length;n++){for(let o=0;o<16;o++)t[o]^=this.macs[n][o];this.aes.encryptECB(t)}let r=Q.Buffer.allocUnsafe(8);return r.writeInt32BE(t.readInt32BE(0)^t.readInt32BE(4),0),r.writeInt32BE(t.readInt32BE(8)^t.readInt32BE(12),4),r}update(t){for(let r=0;r<t.length;r+=16){for(let n=0;n<16;n++)this.mac[n]^=t[r+n];this.aes.encryptECB(this.mac),this.checkBounding()}}checkBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(Q.Buffer.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.increment<1048576&&(this.increment+=131072),this.posNext+=this.increment)}};function At(t){return typeof t=="string"?Ae(t):t}function yt(t){return t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ae(t){return Q.Buffer.from(t,"base64")}function Ut(t){return new It(lr(t).slice(0,16))}function an(t,r={}){let n=r.start||0;if(n!==0)throw Error("Encryption cannot start midstream otherwise MAC verification will fail.");t=At(t),t||(t=(0,rn.default)(24)),t instanceof Q.Buffer||(t=Q.Buffer.from(t));let o=new rr.Transform({transform(i,c,p){l.update(i);let b=s.encrypt(i);p(null,Q.Buffer.from(b))},flush(i){o.mac=l.condense(),o.key=un(t,o.mac),i()}});if(t.length!==24)throw Error("Wrong key length. Key must be 192bit.");let u=new It(t.slice(0,16)),s=new sr(u,t.slice(16),n),l=new ur(u,t.slice(16));return o=(0,nr.default)(ar(16),o),o}function sn(t,r={}){let n=r.start||0;if(n!==0&&(r.disableVerification=!0),n%16!==0)throw Error("start argument of megaDecrypt must be a multiple of 16");t=At(t),t instanceof Q.Buffer||(t=Q.Buffer.from(t));let o=Ut(t),u=new sr(o,t.slice(16),n),s=!r.disableVerification&&new ur(o,t.slice(16)),l=new rr.Transform({transform(i,c,p){let b=u.decrypt(i);s&&s.update(b),p(null,Q.Buffer.from(b))},flush(i){if(s&&(l.mac=s.condense()),!r.disableVerification&&!l.mac.equals(t.slice(24))){i(Error("MAC verification failed"));return}i()}});return l=(0,nr.default)(ar(16),l),l}function lr(t){let r=Q.Buffer.alloc(32);t.copy(r);for(let n=0;n<16;n++)r.writeUInt8(r.readUInt8(n)^r.readUInt8(16+n,!0),n);return r}function un(t,r){let n=Q.Buffer.alloc(32);t.copy(n),r.copy(n,24);for(let o=0;o<16;o++)n.writeUInt8(n.readUInt8(o)^n.readUInt8(16+o),o);return n}function ln(t,r){if(t.length!==r.length)return!1;let n=t.length,o=0;for(let u=0;u<n;u++)o|=t[u]^r[u];return o===0}K();K();var kt={},fn=Math.log(2);function Jt(t){let r=[];for(;t-- >0;)r[t]=0;return r}function Qt(t){let r=t.length;if(t[r-1])return t;for(;r>1&&t[r-1]===0;)r--;return t.slice(0,r)}function cn(t){let r=1,n;return(n=t>>>16)!==0&&(t=n,r+=16),(n=t>>8)!==0&&(t=n,r+=8),(n=t>>4)!==0&&(t=n,r+=4),(n=t>>2)!==0&&(t=n,r+=2),(n=t>>1)!==0&&(t=n,r+=1),r}function fr(t,r){let n=t.length,o=r.length;if(n<o)return fr(r,t);let u=[],s=0,l=0;for(;l<o;l++)s+=t[l]+r[l],u[l]=s&268435455,s>>>=28;for(;l<n;l++)s+=t[l],u[l]=s&268435455,s>>>=28;return s&&(u[l]=s),u}function _t(t,r){let n=t.length,o=r.length;if(o>n)return[];if(o===n){if(r[o-1]>t[o-1])return[];if(o===1)return[t[0]-r[0]]}let u=[],s=0,l;for(l=0;l<o;l++)s+=t[l]-r[l],u[l]=s&268435455,s>>=28;for(;l<n;l++)s+=t[l],u[l]=s&268435455,s>>=28;return s?[]:Qt(u)}function pe(t,r,n,o,u){let s=n&16383,l=n>>14,i=o&16383,c=o>>14,p=l*i+c*s,b=s*i+((p&16383)<<14)+t[r]+u;return t[r]=b&268435455,u=l*c+(p>>14)+(b>>28),u}function hn(t){let r=t.length,n=2*r,o=Jt(n),u=0,s,l;for(s=0;s<r;s++){for(u=pe(o,2*s,t[s],t[s],0),l=s+1;l<r;l++)u=pe(o,s+l,2*t[l],t[s],u);o[s+r]=u}return Qt(o)}function Tt(t,r){let n=t.length,o=r.length,u=Jt(n+o-1),s,l,i;for(l=0;l<o;l++){for(s=0,i=0;i<n;i++)s=pe(u,l+i,t[i],r[l],s);u[l+n]=s}return Qt(u)}function Gt(t,r,n){let o=0;for(;r>=0&&n-- >0;)o=o*268435456+t[r--];return o}function cr(t,r){let n=t.length-1,o=r.length-1,u=n-o,s,l,i,c;if(n<o||n===o&&(t[n]<r[n]||n>0&&t[n]===r[n]&&t[n-1]<r[n-1]))return kt.q=[0],kt.mod=t,kt;if(n===o&&Gt(t,o,2)/Gt(r,o,2)<4){for(s=t.concat(),l=0;i=_t(s,r),i.length!==0;)s=i,l++;return kt.q=[l],kt.mod=s,kt}let p=Math.floor(Math.log(r[o])/fn)+1,b=28-p;s=t.concat();let m=r.concat();if(b){for(c=o;c>0;c--)m[c]=m[c]<<b&268435455|m[c-1]>>p;for(m[0]=m[0]<<b&268435455,s[n]&(268435455<<p&268435455)&&(s[++n]=0,u++),c=n;c>0;c--)s[c]=s[c]<<b&268435455|s[c-1]>>p;s[0]=s[0]<<b&268435455}let A,T=Jt(u+1),h=Jt(u).concat(m);for(;A=_t(s,h),A.length!==0;)T[u]++,s=A;let g=m[o],w=Gt(m,o,2),k;for(c=n;c>o;c--){k=c-o-1,c>=s.length?T[k]=1:s[c]===g?T[k]=268435455:T[k]=Math.floor(Gt(s,c,2)/g);let E=Gt(s,c,3);for(;T[k]*w>E;)T[k]--;h=h.slice(1),A=_t(s,Tt([T[k]],h)),A.length===0&&(T[k]--,A=_t(s,Tt([T[k]],h))),s=A}if(b){for(c=0;c<s.length-1;c++)s[c]=s[c]>>b|s[c+1]<<p&268435455;s[s.length-1]>>=b}return kt.q=Qt(T),kt.mod=Qt(s),kt}function pn(t,r){let n=0,o;for(let u=t.length-1;u>=0;u--)o=t[u],n=((o>>14)+(n<<14))%r,n=((o&16383)+(n<<14))%r;return n}function Ct(t,r){if(r.length===1){if(t.length===1)return[t[0]%r[0]];if(r[0]<16383)return[pn(t,r[0])]}return cr(t,r).mod}function Ht(t,r,n){let o=t.length-(r.length<<1);if(o>0)return Ht(t.slice(0,o).concat(Ht(t.slice(o),r,n)),r,n);let u=r.length+1,s=r.length-1,l,i=Tt(t.slice(s),n).slice(u),c=t.slice(0,u),p=Tt(i,r).slice(0,u),b=_t(c,p);b.length===0&&(c[u]=1,b=_t(c,p));for(let m=0;l=_t(b,r),l.length!==0;m++)if(b=l,m>=3)return Ht(b,r,n);return b}function Oe(t,r,n){let o=t.concat(),u=r.length-1,s=n.length*2,l=Jt(s+1);for(l[s]=1,l=cr(l,n).q,s=cn(r[u])-2;u>=0;u--){for(;s>=0;s-=1)o=Ht(hn(o),n,l),r[u]&1<<s&&(o=Ht(Tt(o,t),n,l));s=28-1}return o}function dn(t,r,n,o,u){let s=Oe(Ct(t,n),Ct(r,_t(n,[1])),n),l=Oe(Ct(t,o),Ct(r,_t(o,[1])),o),i=_t(l,s);return i.length===0?(i=_t(s,l),i=Ct(Tt(i,u),o),i=_t(o,i)):i=Ct(Tt(i,u),o),fr(Tt(i,n),s)}function hr(t){let r=1,n=[0],o=0,u=256,s=t.length,l;if(s<2)return 0;let i=(s-2)*8,c=t.charCodeAt(0)*256+t.charCodeAt(1);if(c>i||c<i-8)return 0;for(let p=0;p<i;p++)(u<<=1)>255&&(u=1,l=t.charCodeAt(--s)),r>268435455&&(r=1,n[++o]=0),l&u&&(n[o]|=r),r<<=1;return n}function yn(t){let r=1,n=0,o=[0],u=1,s=0,l=t.length*28,i="",c;for(c=0;c<l;c++)t[n]&r&&(o[s]|=u),(u<<=1)>255&&(u=1,o[++s]=0),(r<<=1)>268435455&&(r=1,n++);for(;s>=0&&o[s]===0;)s--;for(c=0;c<=s;c++)i=String.fromCharCode(o[c])+i;return i}function gn(t){let r=[];for(let n=0;n<4;n++){let o=(t[0]*256+t[1]+7>>3)+2;if(r[n]=hr(t.toString("binary").substr(0,o)),typeof r[n]=="number"){if(n!==4||t.length>=16)return!1;break}t=t.slice(o)}return r}function bn(t,r){let n=hr(t.toString("binary")),o=yn(dn(n,r[2],r[0],r[1],r[3]));return Q.Buffer.from(o,"binary")}K();var mn=St(Zt(),1);K();var wn=null;K();var vn=globalThis.fetch,En=vn;K();var _n=globalThis.AbortController||wn,de=_n,ye=4,Te={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried "+ye+" times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later",19:"ETOOMANYCONNECTIONS (-19)",24:"EGOINGOVERQUOTA (-24)",25:"EROLLEDBACK (-25)",26:"EMFAREQUIRED (-26): Multi-Factor Authentication Required",27:"EMASTERONLY (-27)",28:"EBUSINESSPASTDUE (-28)",29:"EPAYWALL (-29): ODQ paywall state",400:"ETOOERR (-400)",401:"ESHAREROVERQUOTA (-401)"},Sn="https://g.api.mega.co.nz/",An=null,Bn=null,Vt=class extends mn.EventEmitter{constructor(t,r={}){super(),this.keepalive=t,this.counterId=Math.random().toString().substr(2,10),this.gateway=r.gateway||Sn;let n="1.1.2";this.userAgent=r.userAgent===null?null:`${r.userAgent||""} megajs/${n}`.trim(),this.httpAgent=r.httpAgent||An,this.httpsAgent=r.httpsAgent||Bn,this.fetch=r.fetch||this.defaultFetch.bind(this),this.closed=!1}defaultFetch(t,r){return r||(r={}),r.agent||(r.agent=n=>n.protocol==="http:"?this.httpAgent:this.httpsAgent),this.userAgent&&(r.headers||(r.headers={}),r.headers["user-agent"]||(r.headers["user-agent"]=this.userAgent)),En(t,r)}request(t,r,n=0){let o=t.a==="sml";if(this.closed&&!o)throw Error("API is closed");let[u,s]=wt(r),l={id:(this.counterId++).toString()};return this.sid&&(l.sid=this.sid),typeof t._querystring=="object"&&(Object.assign(l,t._querystring),delete t._querystring),this.fetch(`${this.gateway}cs?${new URLSearchParams(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([t])}).then(Le).then(i=>{if(this.closed&&!o)return;if(!i)return u(Error("Empty response"));i.length&&(i=i[0]);let c;if(typeof i=="number"&&i<0){if(i===-3&&n<ye)return setTimeout(()=>{this.request(t,u,n+1)},Math.pow(2,n+1)*1e3);c=Error(Te[-i])}else this.keepalive&&i&&i.sn&&this.pull(i.sn);u(c,i)}).catch(i=>{u(i)}),s}pull(t,r=0){let n=new de;this.sn=n,this.fetch(`${this.gateway}sc?${new URLSearchParams({sn:t,sid:this.sid})}`,{method:"POST",signal:n.signal}).then(Le).then(o=>{if(this.sn=void 0,!this.closed){if(typeof o=="number"&&o<0){if(o===-3&&r<ye)return setTimeout(()=>{this.pull(t,r+1)},Math.pow(2,r+1)*1e3);this.emit("error",Error(Te[-o]))}o.w?this.wait(o.w,t):o.sn&&(o.a&&this.emit("sc",o.a),this.pull(o.sn))}}).catch(In).catch(o=>{this.emit("error",o)})}wait(t,r){let n=new de;this.sn=n,this.fetch(t,{method:"POST",signal:n.signal}).catch(()=>{}).then(()=>{this.sn=void 0,this.pull(r)})}close(){this.sn&&this.sn.abort(),this.closed=!0}static getGlobalApi(){return Vt.globalApi||(Vt.globalApi=new Vt),Vt.globalApi}};function Le(t){if(t.statusText==="Server Too Busy")return-3;if(!t.ok)throw Error(`Server returned error: ${t.statusText}`);return t.json()}function In(t){if(t.name!=="AbortError")throw t}var ne=Vt,Rn=St(Zt(),1);K();K();var kn=St(Zt(),1),On=St(Dt(),1),Tn=St(tn(),1),Mt=class extends kn.EventEmitter{constructor(t){if(super(),this.checkConstructorArgument(t.downloadId),this.checkConstructorArgument(t.key),this.checkConstructorArgument(t.loadedFile),this.downloadId=t.downloadId,this.key=t.key?At(t.key):null,this.type=t.directory?1:0,this.directory=!!t.directory,this.api=t.api||ne.getGlobalApi(),!(this.api instanceof ne))throw Error("api must be a instance of API");this.loadedFile=t.loadedFile}get createdAt(){if(typeof this.timestamp<"u")return this.timestamp*1e3}checkConstructorArgument(t){if(typeof t=="string"&&!/^[\w-]+$/.test(t))throw Error(`Invalid argument: "${t}"`)}loadMetadata(t,r){if(this.size=r.s||0,this.timestamp=r.ts||0,this.type=r.t,this.directory=!!r.t,this.owner=r.u,this.name=null,!t||!r.k)return;let n=r.k.split(":");this.key=At(n[n.length-1]),t.decryptECB(this.key),r.a&&this.decryptAttributes(r.a)}decryptAttributes(t){if(!this.key)return this;t=Ae(t),Ut(this.key).decryptCBC(t);let r=Mt.unpackAttributes(t);r&&this.parseAttributes(r)}parseAttributes(t){this.attributes=t,this.name=t.n,this.label=pr[t.lbl||0],this.favorited=!!t.fav}loadAttributes(t){let[r,n]=wt(t),o=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(o,(u,s)=>{if(u)return r(u);if(this.directory){let l=Object.create(null),i=s.f,c=i.find(b=>b.k&&b.h===b.k.split(":")[0]),p=this.key?new It(this.key):null;this.nodeId=c.h,this.timestamp=c.ts,l[c.h]=this;for(let b of i){if(b===c)continue;let m=new Mt(b,this.storage);m.loadMetadata(p,b),m.downloadId=[this.downloadId,b.h],l[b.h]=m}for(let b of i){let m=l[b.p];if(m){let A=l[b.h];m.children||(m.children=[]),m.children.push(A),A.parent=m}}if(this.loadMetadata(p,c),this.key&&!this.attributes)return r(Error("Attributes could not be decrypted with provided key."));if(this.loadedFile){let b=l[this.loadedFile];typeof b>"u"?r(Error("Node (file or folder) not found in folder")):r(null,b)}else r(null,this)}else{if(this.size=s.s,this.decryptAttributes(s.at),this.key&&!this.attributes)return r(Error("Attributes could not be decrypted with provided key."));r(null,this)}}),n}download(t,r){typeof t=="function"&&(r=t,t={}),t||(t={});let n=t.start||0,o=t.returnCiphertext?n:n-n%16,u=t.end||null,s=t.maxConnections||4,l=t.initialChunkSize||128*1024,i=t.chunkSizeIncrement||128*1024,c=t.maxChunkSize||1024*1024,p=t.forceHttps??!0?2:0,b={a:"g",g:1,ssl:p};if(this.nodeId?b.n=this.nodeId:Array.isArray(this.downloadId)?(b._querystring={n:this.downloadId[0]},b.n=this.downloadId[1]):b.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!t.returnCiphertext)throw Error("Can't download: key isn't defined");let m=this.key&&!t.returnCiphertext?sn(this.key,{start:o,disableVerification:o!==0||u!==null}):new On.PassThrough,A=o===n?m:m.pipe(new Tn.default({skip:n-o})),T=t.handleRetries||Mt.defaultHandleRetries;return this.api.request(b,(h,g)=>{if(h)return A.emit("error",h);if(typeof g.g!="string"||g.g.substr(0,4)!=="http")return A.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(g.s===0)return A.end();if(u||(u=g.s-1),n>u)return A.emit("error",Error("You can't download past the end of the file."));function w(P){if(P.status!==200){if(P.status===509){let G=P.headers.get("x-mega-time-left"),H=Error("Bandwidth limit reached: "+G+" seconds until it resets");H.timeLimit=G,A.emit("error",H);return}A.emit("error",Error("MEGA returned a "+P.status+" status code"))}}function k(P){A.emit("error",P)}let E=0;if(A.on("data",P=>{E+=P.length,A.emit("progress",{bytesLoaded:E,bytesTotal:g.s})}),s===1){let P=new de;A.on("close",()=>{P.abort()}),this.api.fetch(g.g+"/"+o+"-"+u,{signal:P.signal}).then(G=>{w(G);let H=G.body;if(H)if(H.pipe)G.body.pipe(m);else if(H.getReader){let tt=H.getReader(),rt=({done:ut,value:at})=>{if(ut)m.end();else return m.write(at),tt.read().then(rt)};tt.read().then(rt)}else throw Error("Single connection streaming not supported by fetch");else throw Error("Missing response body")}).catch(k);return}let I={},L=0,F=0,_=!1,U=o,C=l;A.on("error",()=>{_=!0}),A.on("close",()=>{_=!0});let V=()=>{if(U>u){_=!0,L===F&&m.end();return}let P=U,G=Math.min(u,P+C-1),H=L++,tt=0,rt=()=>{tt++,this.api.fetch(g.g+"/"+P+"-"+G).then(ut=>(w(ut),ut.arrayBuffer())).then(ut=>{let at=Q.Buffer.from(ut);I[H]=at,F===H&&q()},ut=>{T(tt,ut,at=>{at?k(at):rt()})})};rt(),U=G+1,C<c&&(C=C+i)},q=()=>{let P;for(;;){let G=I[F];if(!G||(P=!m.write(G),delete I[F],F++,P))break}_&&L===F&&m.end(),P?m.once("drain",q):V()};for(let P=0;P<s;P++)V()}),r&&or(A,r),A}downloadBuffer(t,r){let[n,o]=wt(r);return this.download(t,n),o}link(t,r){arguments.length===1&&typeof t=="function"&&(r=t,t={noKey:!1});let[n,o]=wt(r);typeof t=="boolean"&&(t={noKey:t});let u=`https://mega.nz/${this.directory?"folder":"file"}/${this.downloadId}`;return!t.noKey&&this.key&&(u+=`#${yt(this.key)}`),!t.noKey&&this.loadedFile&&(u+=`/file/${this.loadedFile}`),n(null,u),o}static fromURL(t,r={}){if(typeof t=="object")return new Mt(t);let n=new URL(t);if(n.hostname!=="mega.nz"&&n.hostname!=="mega.co.nz")throw Error("Invalid URL: wrong hostname");if(!n.hash)throw Error("Invalid URL: no hash");if(n.pathname.match(/\/(file|folder)\//)!==null){let o=n.hash.substr(1).split("/file/"),u=n.pathname.substring(n.pathname.lastIndexOf("/")+1,n.pathname.length+1),s=o[0];if(u&&!s||!u&&s)throw Error("Invalid URL: too few arguments");return new Mt({downloadId:u,key:s,directory:n.pathname.indexOf("/folder/")>=0,loadedFile:o[1],...r})}else{let o=n.hash.split("!");if(o[0]!=="#"&&o[0]!=="#F")throw Error("Invalid URL: format not recognized");if(o.length<=1)throw Error("Invalid URL: too few arguments");if(o.length>=(o[0]==="#"?4:5))throw Error("Invalid URL: too many arguments");return new Mt({downloadId:o[1],key:o[2],directory:o[0]==="#F",loadedFile:o[3],...r})}}static unpackAttributes(t){let r=0;for(;r<t.length&&t.readUInt8(r);)r++;if(t=t.slice(0,r).toString(),t.substr(0,6)==='MEGA{"')try{return JSON.parse(t.substr(4))}catch{}}static defaultHandleRetries(t,r,n){t>8?n(r):setTimeout(n,1e3*Math.pow(2,t))}},pr=["","red","orange","yellow","green","blue","purple","grey"],Bt=Mt,ae=St(Je(),1),je=St(Dt(),1),Pe={},Kt=class extends Bt{constructor(t,r){if(super(t),this.storage=r,this.api=r.api,this.nodeId=t.h,this.timestamp=t.ts,this.type=t.t,this.directory=!!this.type,t.k){let n=t.k.split("/"),o=r.aes;for(let u of n){let s=u.split(":")[0];if(s===r.user){t.k=u;break}let l=r.shareKeys[s];if(l){t.k=u,o=Pe[s],o||(o=Pe[s]=new It(l));break}}this.loadMetadata(o,t)}}loadAttributes(){throw Error("This is not needed for files loaded from logged in sessions")}mkdir(t,r){if(!this.directory)throw Error("node isn't a directory");let[n,o]=wt(r);if(typeof t=="string"&&(t={name:t}),t.attributes||(t.attributes={}),t.name&&(t.attributes.n=t.name),!t.attributes.n)throw Error("file name is required");if(t.target||(t.target=this),t.key||(t.key=Q.Buffer.from((0,ae.default)(16))),t.key.length!==16)throw Error("wrong key length, must be 128bit");let u=t.key,s=Kt.packAttributes(t.attributes);Ut(u).encryptCBC(s);let l=Q.Buffer.from(u);this.storage.aes.encryptECB(l);let i={a:"p",t:t.target.nodeId?t.target.nodeId:t.target,n:[{h:"xxxxxxxx",t:1,a:yt(s),k:yt(l)}]},c=Yt(this.storage.shareKeys,this);return c.length>0&&(i.cr=ee(this.storage,[{nodeId:"xxxxxxxx",key:u}],c)),this.api.request(i,(p,b)=>{if(p)return n(p);let m=this.storage._importFile(b.f[0]);this.storage.emit("add",m),n(null,m)}),o}upload(t,r,n){if(!this.directory)throw Error("node is not a directory");arguments.length===2&&typeof r=="function"&&([n,r]=[r,null]);let[o,u]=wt(n);if(typeof t=="string"&&(t={name:t}),t.attributes||(t.attributes={}),t.name&&(t.attributes.n=t.name),!t.attributes.n)throw Error("File name is required.");if(!(typeof t.size=="number"&&t.size>=0)&&!(r&&typeof r.pipe!="function"&&typeof r.length=="number")&&!t.allowUploadBuffering)throw Error("Specify a file size or set allowUploadBuffering to true");t.target||(t.target=this);let s,l=At(t.key);l||(l=(0,ae.default)(24)),l instanceof Q.Buffer||(l=Q.Buffer.from(l));let i=t.uploadCiphertext?32:24;if(l.length!==i)throw Error("Wrong key length. Key must be 192bit");t.uploadCiphertext&&(s=l,l=lr(l).slice(0,24)),t.key=l;let c=[],p=(A,T,h,g)=>{if(A)return m(A);if(!h||h.length===0){m(Error("Server returned a invalid response while uploading"));return}let w=Number(h.toString());if(w<0){m(Error("Server returned error "+w+" while uploading"));return}if(c[T]=h,T===0&&!s&&(s=g.key),t.thumbnailImage&&!c[1]||t.previewImage&&!c[2]||!c[0])return;let k=Kt.packAttributes(t.attributes);Ut(s).encryptCBC(k);let E=Q.Buffer.from(s);this.storage.aes.encryptECB(E);let I={h:yt(c[0]),t:0,a:yt(k),k:yt(E)};c.length!==1&&(I.fa=c.slice(1).map((_,U)=>U+"*"+yt(_)).filter(_=>_).join("/"));let L={a:"p",t:t.target.nodeId?t.target.nodeId:t.target,n:[I]},F=Yt(this.storage.shareKeys,this);F.length>0&&(L.cr=ee(this.storage,[{nodeId:I.h,key:s}],F)),this.api.request(L,(_,U)=>{if(_)return m(_);let C=this.storage._importFile(U.f[0]);this.storage.emit("add",C),b.emit("complete",C),o&&o(null,C)})};t.thumbnailImage&&this._uploadAttribute(t,t.thumbnailImage,1,p),t.previewImage&&this._uploadAttribute(t,t.previewImage,2,p);let b=this._upload(t,r,0,p);function m(A){b.listenerCount("error")?b.emit("error",A):o(A)}return b.complete=u,b}_upload(t,r,n,o){let u=t.uploadCiphertext?new je.PassThrough:an(t.key),s=u,l=t.size;return r&&typeof r.pipe!="function"&&(l=r.length,s.end(r)),l!=null?(l===0&&u.end(),this._uploadWithSize(s,l,u,n,t,o)):s=en(s,i=>{this._uploadWithSize(s,i,u,n,t,o)}),r&&typeof r.pipe=="function"&&r.pipe(s),s}_uploadAttribute(t,r,n,o){let u=(s,l)=>{if(s)return o(s);let i=l.length,c=Math.ceil(i/16)*16-i;c!==0&&(l=Q.Buffer.concat([l,Q.Buffer.alloc(c)])),(t.handle?Ut(t.key):new It(t.key.slice(0,16))).encryptCBC(l);let p=new je.PassThrough;p.end(l),this._uploadWithSize(p,l.length,p,n,t,o)};if(r instanceof Q.Buffer){u(null,r);return}or(r,u)}_uploadWithSize(t,r,n,o,u,s){let l=u.forceHttps??!0?2:0,i=o===0?{a:"u",ssl:l,s:r,ms:0,r:0,e:0,v:2}:{a:"ufa",ssl:l,s:r};u.handle&&(i.h=u.handle);let c=o===0?u.initialChunkSize||128*1024:r,p=u.chunkSizeIncrement||128*1024,b=u.maxChunkSize||1024*1024,m=u.maxConnections||4,A=u.handleRetries||Bt.defaultHandleRetries,T=c,h=0,g=!1,w=0,k,E,I,L,F,_=()=>{L=Math.min(T,r-w),E=Q.Buffer.alloc(L),h++,T<b&&(T+=p),F=0,k&&(k.copy(E),F=Math.min(k.length,L),k=k.length>L?k.slice(L):null),F===L?U():(g=!0,V())},U=()=>{let q=w,P=E,G=0,H=()=>{G++,this.api.fetch(I+"/"+(o===0?q:o-1),{method:"POST",body:P,headers:{"content-length":P.length}}).then(tt=>{if(tt.status!==200)throw Error("MEGA returned a "+tt.status+" status code");return tt.arrayBuffer()}).then(tt=>{let rt=Q.Buffer.from(tt);rt.length>0?(n.end(),Z.nextTick(()=>{s(null,o,rt,n)})):w<r&&!g&&_()},tt=>{A(G,tt,rt=>{rt?t.emit("error",rt):H()})})};H(),E=null,w+=L,w<r&&!g&&h<m&&_()},C=0,V=()=>{for(;;){let q=n.read();if(q===null){n.once("readable",V);break}if(C+=q.length,t.emit("progress",{bytesLoaded:C,bytesTotal:r}),q.copy(E,F),F+=q.length,F>=L){g=!1,k=q.slice(q.length-(F-L)),U();break}}};n.on("end",()=>{r&&C!==r&&t.emit("error",Error("Specified data size does not match: "+r+" !== "+C))}),this.api.request(i,(q,P)=>{if(q)return s(q);I=P.p,_()})}uploadAttribute(t,r,n){let[o,u]=wt(n);if(typeof t=="string"&&(t=["thumbnail","preview"].indexOf(t)),t!==0&&t!==1)throw Error("Invalid attribute type");return this._uploadAttribute({key:this.key,handle:this.nodeId},r,t+1,(s,l,i,c)=>{if(s)return o(s);let p={a:"pfa",n:this.nodeId,fa:t+"*"+yt(i)};this.api.request(p,(b,m)=>{if(b)return o(b);o(null,this)})}),u}delete(t,r){return typeof t=="function"&&(r=t,t=void 0),typeof t>"u"&&(t=this.parent===this.storage.trash),t?this.api.request({a:"d",n:this.nodeId},r):this.moveTo(this.storage.trash,r)}moveTo(t,r){if(typeof t=="string"&&(t=this.storage.files[t]),!(t instanceof Bt))throw Error("target must be a folder or a nodeId");let n={a:"m",n:this.nodeId,t:t.nodeId},o=Yt(this.storage.shareKeys,t);return o.length>0&&(n.cr=ee(this.storage,[this],o)),this.api.request(n,r)}setAttributes(t,r){let[n,o]=wt(r);Object.assign(this.attributes,t);let u=Kt.packAttributes(this.attributes);return Ut(this.key).encryptCBC(u),this.api.request({a:"a",n:this.nodeId,at:yt(u)},s=>{this.parseAttributes(this.attributes),n(s)}),o}rename(t,r){return this.setAttributes({n:t},r)}setLabel(t,r){if(typeof t=="string"&&(t=pr.indexOf(t)),typeof t!="number"||Math.floor(t)!==t||t<0||t>7)throw Error("label must be a integer between 0 and 7 or a valid label name");return this.setAttributes({lbl:t},r)}setFavorite(t,r){return this.setAttributes({fav:t?1:0},r)}link(t,r){arguments.length===1&&typeof t=="function"&&(r=t,t={noKey:!1}),typeof t=="boolean"&&(t={noKey:t}),t||(t={});let n=t.__folderKey;if(this.directory&&!n)return this.shareFolder(t,r);let[o,u]=wt(r);return this.api.request({a:"l",n:this.nodeId},(s,l)=>{if(s)return o(s);let i=`https://mega.nz/${n?"folder":"file"}/${l}`;!t.noKey&&this.key&&(i+=`#${yt(n||this.key)}`),o(null,i)}),u}shareFolder(t,r){if(!this.directory)throw Error("node isn't a folder");let n=this.nodeId,o=this.storage.shareKeys[n];if(o)return this.link(Object.assign({__folderKey:o},t),r);let u=At(t.key);u||(u=(0,ae.default)(16)),u instanceof Q.Buffer||(u=Q.Buffer.from(u));let[s,l]=wt(r);if(u.length!==16)return s(Error("share key must be 16 byte / 22 characters")),l;this.storage.shareKeys[n]=u;let i=Q.Buffer.from(n+n);this.storage.aes.encryptECB(i);let c={a:"s2",n,s:[{u:"EXP",r:0}],ok:yt(this.storage.aes.encryptECB(Q.Buffer.from(u))),ha:yt(i),cr:ee(this.storage,this)};return this.api.request(c,p=>{if(p)return s(p);this.link(Object.assign({__folderKey:u},t),s)}),l}unshare(t){return this.directory?this.unshareFolder(t):this.api.request({a:"l",n:this.nodeId,d:1},t)}unshareFolder(t){if(!this.directory)throw Error("node isn't a folder");return delete this.storage.shareKeys[this.nodeId],this.api.request({a:"s2",n:this.nodeId,s:[{u:"EXP",r:""}]},t)}importFile(t,r){let[n,o]=wt(r);if(!this.directory)throw Error("importFile can only be called on directories");if(typeof t=="string"&&(t=Bt.fromURL(t)),!(t instanceof Bt))throw Error("First argument of importFile should be a File or a URL string");if(!t.key)return n(Error("Can't import files without encryption keys")),o;let u=(s,l)=>{if(s)return n(s);let i=Kt.packAttributes(l.attributes);Ut(l.key).encryptCBC(i);let c=Array.isArray(l.downloadId)?l.downloadId[1]:l.downloadId,p={a:"p",t:this.nodeId,n:[{ph:c,t:0,a:yt(i),k:yt(this.storage.aes.encryptECB(l.key))}]};this.api.request(p,(b,m)=>{if(b)return n(b);let A=this.storage._importFile(m.f[0]);this.storage.emit("add",A),n(null,A)})};return t.attributes?u(null,t):t.loadAttributes(u),o}static packAttributes(t){let r=JSON.stringify(t);r=Q.Buffer.from(`MEGA${r}`);let n=Q.Buffer.alloc(Math.ceil(r.length/16)*16);return r.copy(n),n}};function ee(t,r,n){let o=t.shareKeys;Array.isArray(r)||(r=dr(r)),n||(n=r.map(s=>Yt(o,s)).reduce((s,l)=>s.concat(l)).filter((s,l,i)=>l===i.indexOf(s)));let u=[n,r.map(s=>s.nodeId),[]];for(let s=n.length;s--;){let l=new It(o[n[s]]);for(let i=r.length;i--;){let c=Q.Buffer.from(r[i].key);c&&(c.length===32||c.length===16)&&u[2].push(s,i,yt(l.encryptECB(c)))}}return u}function dr(t){return[t].concat((t.children||[]).map(dr).reduce((r,n)=>r.concat(n),[]))}function Yt(t,r){let n=r.nodeId,o=r.parent,u=[];return t[n]&&u.push(n),o?u.concat(Yt(t,o)):u}var Ln=Kt,jn=class extends Rn.EventEmitter{constructor(t,r){super(),arguments.length===1&&typeof t=="function"&&(r=t,t={});let[n,o]=wt(r);this.ready=o,t.keepalive=t.keepalive===void 0?!0:!!t.keepalive,t.autoload=t.autoload===void 0?!0:!!t.autoload,t.autologin=t.autologin===void 0?!0:!!t.autologin,this.api=new ne(t.keepalive,t),this.files={},this.options=t,this.status="closed",t.autologin?this.login(n):Z.nextTick(()=>{n(null,this)})}login(t){let[r,n]=wt(t);if(typeof this.options.email!="string")return Z.nextTick(()=>{r(Error("starting a session without credentials isn't supported"))}),n;let o=()=>{this.status="ready",r(null,this),this.emit("ready",this)},u=c=>{this.api.request({a:"ug"},(p,b)=>{if(p)return c(p);this.name=b.name,this.user=b.u,this.options.autoload?this.reload(!0,m=>{if(m)return c(m);o()}):o()})};this.email=this.options.email.toLowerCase();let s=c=>{let p=nn(Q.Buffer.from(this.options.password)),b=new It(p),m=yt(b.stringhash(Q.Buffer.from(this.email))),A={a:"us",user:this.email,uh:m};i(A,b,c)},l=(c,p)=>{on(Q.Buffer.from(this.options.password),c,(b,m)=>{if(b)return p(b);let A=new It(m.slice(0,16)),T=yt(m.slice(16)),h={a:"us",user:this.email,uh:T};i(h,A,p)})},i=(c,p,b)=>{delete this.options.password,this.options.secondFactorCode&&(c.mfa=this.options.secondFactorCode.toString()),this.api.request(c,(m,A)=>{if(m)return b(m);this.key=At(A.k),p.decryptECB(this.key),this.aes=new It(this.key);let T=At(A.csid),h=this.aes.decryptECB(At(A.privk)),g=gn(h);if(!g)throw Error("invalid credentials");let w=yt(bn(T,g).slice(0,43));this.api.sid=this.sid=w,this.RSAPrivateKey=g,u(b)})};return this.api.request({a:"us0",user:this.email},(c,p)=>{if(c)return r(c);if(p.v===1)return s(r);if(p.v===2)return l(p,r);r(Error("Account version not supported"))}),this.status="connecting",n}reload(t,r){typeof t=="function"&&([t,r]=[r,t]);let[n,o]=wt(r);return this.status==="connecting"&&!t?(this.once("ready",()=>{this.reload(t,n)}),o):(this.mounts=[],this.api.request({a:"f",c:1},(u,s)=>{var l;if(u)return n(u);this.shareKeys=s.ok.reduce((i,c)=>{let p=c.h,b=this.aes.encryptECB(Q.Buffer.from(p+p));return ln(At(c.ha),b)&&(i[p]=this.aes.decryptECB(At(c.k))),i},{});for(let i of s.f)if(i=this._importFile(i),s.ph!==void 0&&(i.shareId=(l=s.ph.find(c=>c.h===i.nodeId))==null?void 0:l.ph,i.shared=!!i.shareId,i.shared)){i.shareURL=`https://mega.nz/${i.directory?"folder":"file"}/${i.shareId}`;let c=i.directory?this.shareKeys[i.nodeId]:i.key;c&&(i.shareURL+="#"+yt(c))}n(null,this.mounts)}),this.api.on("sc",u=>{let s={};u.forEach(l=>{if(l.a==="u"){let i=this.files[l.n];i&&(i.timestamp=l.ts,i.decryptAttributes(l.at),i.emit("update"),this.emit("update",i))}else l.a==="d"?s[l.n]=!0:l.a==="t"&&l.t.f.forEach(i=>{let c=this.files[i.h];if(c){delete s[i.h];let p=c.parent;if(p.nodeId===i.p)return;p.children.splice(p.children.indexOf(c),1),c.parent=this.files[i.p],c.parent.children||(c.parent.children=[]),c.parent.children.push(c),c.emit("move",p),this.emit("move",c,p)}else this.emit("add",this._importFile(i))})}),Object.keys(s).forEach(l=>{let i=this.files[l],c=i.parent;c.children.splice(c.children.indexOf(i),1),this.emit("delete",i),i.emit("delete")})}),o)}_importFile(t){if(!this.files[t.h]){let r=this.files[t.h]=new Ln(t,this);if(t.t===Pn&&(this.root=r,r.name="Cloud Drive"),t.t===Un&&(this.trash=r,r.name="Rubbish Bin"),t.t===Mn&&(this.inbox=r,r.name="Inbox"),t.t>1&&this.mounts.push(r),t.p){let n=this.files[t.p];n&&(n.children||(n.children=[]),n.children.push(r),r.parent=n)}}return this.files[t.h]}mkdir(t,r){if(this.status!=="ready")throw Error("storage is not ready");return this.root.mkdir(t,r)}upload(t,r,n){if(this.status!=="ready")throw Error("storage is not ready");return this.root.upload(t,r,n)}close(t){return this.status="closed",this.api.close(),this.api.request({a:"sml"},t)}getAccountInfo(t){let[r,n]=wt(t);return this.api.request({a:"uq",strg:1,xfer:1,pro:1},(o,u)=>{o&&r(o);let s={};s.type=u.utype,s.spaceUsed=u.cstrg,s.spaceTotal=u.mstrg,s.downloadBandwidthTotal=u.mxfer||Math.pow(1024,5)*10,s.downloadBandwidthUsed=u.caxfer||0,s.sharedBandwidthUsed=u.csxfer||0,s.sharedBandwidthLimit=u.srvratio,r(null,s)}),n}toJSON(){return{key:yt(this.key),sid:this.sid,name:this.name,user:this.user,options:this.options}}static fromJSON(t){let r=new jn(Object.assign(t.options,{autoload:!1,autologin:!1}));return r.key=Ae(t.key),r.aes=new It(r.key),r.api.sid=r.sid=t.sid,r.name=t.name,r.user=t.user,r}},Pn=2,Mn=3,Un=4;Bt.fromURL;/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const xn=(t,r)=>r.some(n=>t instanceof n);let Me,Ue;function Cn(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nn(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yr=new WeakMap,ge=new WeakMap,gr=new WeakMap,se=new WeakMap,Be=new WeakMap;function Fn(t){const r=new Promise((n,o)=>{const u=()=>{t.removeEventListener("success",s),t.removeEventListener("error",l)},s=()=>{n(Lt(t.result)),u()},l=()=>{o(t.error),u()};t.addEventListener("success",s),t.addEventListener("error",l)});return r.then(n=>{n instanceof IDBCursor&&yr.set(n,t)}).catch(()=>{}),Be.set(r,t),r}function Dn(t){if(ge.has(t))return;const r=new Promise((n,o)=>{const u=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",l),t.removeEventListener("abort",l)},s=()=>{n(),u()},l=()=>{o(t.error||new DOMException("AbortError","AbortError")),u()};t.addEventListener("complete",s),t.addEventListener("error",l),t.addEventListener("abort",l)});ge.set(t,r)}let be={get(t,r,n){if(t instanceof IDBTransaction){if(r==="done")return ge.get(t);if(r==="objectStoreNames")return t.objectStoreNames||gr.get(t);if(r==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lt(t[r])},set(t,r,n){return t[r]=n,!0},has(t,r){return t instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in t}};function Wn(t){be=t(be)}function qn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(r,...n){const o=t.call(ue(this),r,...n);return gr.set(o,r.sort?r.sort():[r]),Lt(o)}:Nn().includes(t)?function(...r){return t.apply(ue(this),r),Lt(yr.get(this))}:function(...r){return Lt(t.apply(ue(this),r))}}function zn(t){return typeof t=="function"?qn(t):(t instanceof IDBTransaction&&Dn(t),xn(t,Cn())?new Proxy(t,be):t)}function Lt(t){if(t instanceof IDBRequest)return Fn(t);if(se.has(t))return se.get(t);const r=zn(t);return r!==t&&(se.set(t,r),Be.set(r,t)),r}const ue=t=>Be.get(t);function Gn(t,r,{blocked:n,upgrade:o,blocking:u,terminated:s}={}){const l=indexedDB.open(t,r),i=Lt(l);return o&&l.addEventListener("upgradeneeded",c=>{o(Lt(l.result),c.oldVersion,c.newVersion,Lt(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),u&&c.addEventListener("versionchange",p=>u(p.oldVersion,p.newVersion,p))}).catch(()=>{}),i}const $n=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],le=new Map;function xe(t,r){if(!(t instanceof IDBDatabase&&!(r in t)&&typeof r=="string"))return;if(le.get(r))return le.get(r);const n=r.replace(/FromIndex$/,""),o=r!==n,u=Vn.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||$n.includes(n)))return;const s=async function(l,...i){const c=this.transaction(l,u?"readwrite":"readonly");let p=c.store;return o&&(p=p.index(i.shift())),(await Promise.all([p[n](...i),u&&c.done]))[0]};return le.set(r,s),s}Wn(t=>({...t,get:(r,n,o)=>xe(r,n)||t.get(r,n,o),has:(r,n)=>!!xe(r,n)||t.has(r,n)}));let fe=null;async function xt(){const t=await Gn("music",3,{upgrade(r,n,o,u,s){fe=n,n<1&&(r.createObjectStore("album",{keyPath:"folderName"}),r.createObjectStore("image",{keyPath:"id"}),r.createObjectStore("song",{keyPath:"id"})),n<2&&r.createObjectStore("albumFolder")}});return fe&&fe<3&&await t.clear("song"),t}async function Kn(){const t=await xt(),r=await t.getAll("album"),n=await t.get("albumFolder","german")??[],o=await t.get("albumFolder","russian")??[],u=await t.get("albumFolder","instrumental")??[],s=await t.get("albumFolder","geistlicheLieder")??[],l=await t.get("albumFolder","russianBook")??[];return t.close(),{german:r.filter(i=>n.includes(i.folderName)),russian:r.filter(i=>o.includes(i.folderName)),instrumental:r.filter(i=>u.includes(i.folderName)),geistlicheLieder:r.find(i=>s.includes(i.folderName)),russianBook:r.find(i=>l.includes(i.folderName))}}async function Hn(t){const r=await xt(),n=r.transaction(["album","albumFolder"],"readwrite"),o=n.objectStore("albumFolder");o.clear(),o.put(t.german.map(l=>l.folderName),"german"),o.put(t.russian.map(l=>l.folderName),"russian"),o.put(t.instrumental.map(l=>l.folderName),"instrumental"),o.put([t.geistlicheLieder.folderName],"geistlicheLieder"),o.put([t.russianBook.folderName],"russianBook");const u=n.objectStore("album");u.clear();const s=[];for(const l of t.german)s.push(u.put(l));for(const l of t.russian)s.push(u.put(l));for(const l of t.instrumental)s.push(u.put(l));s.push(u.put(t.geistlicheLieder)),s.push(u.put(t.russianBook)),await Promise.all(s),n.commit(),r.close()}const Ce={};async function ui(t){const r=Wt(t);let n=Ce[r];if(!n){const o=await Yn(t);n=URL.createObjectURL(o),Ce[r]=n}return n}async function Yn(t){const r=Wt(t),n=await xt(),o=await n.get("image",r);if(n.close(),o)return o.blob;const u=await new Bt({key:t.key,downloadId:t.downloadId}).downloadBuffer({end:t.fileSize}),s=new Blob([u]);return Jn(t,s),s}async function Jn(t,r){const o={id:Wt(t),blob:r},u=await xt();await u.add("image",o),u.close()}async function Qn(t){const r=Wt(t),n=await xt(),o=await n.get("song",r);if(n.close(),o)return o.blob;const u=await new Bt({key:t.key,downloadId:t.downloadId}).downloadBuffer({end:t.fileSize}),s=new Blob([u],{type:"audio/mpeg"});return Xn(t,s),De.update(l=>l.includes(r)?l:[...l,r]),s}async function Xn(t,r){const o={id:Wt(t),name:t.name,blob:r},u=await xt();await u.add("song",o),u.close()}async function Zn(){const t=await xt(),r=await t.getAllKeys("song");return t.close(),r}function Wt(t){return JSON.stringify(t.downloadId)}const $t={GERMAN_SONGS_URL:"https://mega.nz/folder/b6RACRQI#jDnUGMJCQLF57D0WKd9Vmg",RUSSIAN_SONGS_URL:"https://mega.nz/folder/lExABJSB#kqZ2hZTf2Wg9tdsVIkbIIQ",INSTRUMENTAL_SONGS_URL:"https://mega.nz/folder/N08k2ILC#BNbDNDWmXDXbFIY412V1qA",GEISTLICHE_LIEDER_URL:"https://mega.nz/folder/Dm5x2LRZ#OLhiAvvoX4qZTZGDLPn0SQ",RUSSIAN_BOOK:"https://mega.nz/folder/3zIxQbpT#pwb_r_7oq0ZRnerldK4sLA"};function li(t){var r,n;return t.german.flatMap(o=>o.musics).concat(t.russian.flatMap(o=>o.musics)).concat(t.instrumental.flatMap(o=>o.musics)).concat(((r=t.geistlicheLieder)==null?void 0:r.musics.map(o=>({...o,name:o.name.split("_",2)[1]})))??[]).concat(((n=t.russianBook)==null?void 0:n.musics.map(o=>({...o,name:o.name.split("-",2)[1].trimStart()})))??[])}async function ti(){return{german:await ce($t.GERMAN_SONGS_URL),russian:await ce($t.RUSSIAN_SONGS_URL),instrumental:await ce($t.INSTRUMENTAL_SONGS_URL),geistlicheLieder:await Ne($t.GEISTLICHE_LIEDER_URL),russianBook:await Ne($t.RUSSIAN_BOOK)}}async function ce(t){const r=Bt.fromURL(t);return await r.loadAttributes(),r.children.filter(n=>n.directory).map(br)}async function Ne(t){const r=Bt.fromURL(t);return await r.loadAttributes(),br(r)}function br(t){const r=t.children.find(n=>{var o;return(o=n.name)==null?void 0:o.endsWith(".jpg")});return{name:t.name.split("(")[0].trim(),folderName:t.name,image:r?{key:r.key,downloadId:r.downloadId,fileSize:r.size}:null,musics:t.children.filter(n=>n.name.endsWith(".mp3")||n.name.endsWith(".webm")||n.name.endsWith(".mp4")).map(n=>({name:n.name.substring(0,n.name.lastIndexOf(".")).trim(),link:{key:n.key,downloadId:n.downloadId,fileSize:n.size}}))}}async function he(t,r,n){try{const o=r[n];oe.update(s=>({...s,isLoading:!0}));const u=await Qn({name:o.name,...o.link});oe.update(s=>(s.src!=null&&URL.revokeObjectURL(s.src),{...s,isLoading:!1,src:URL.createObjectURL(u),album:t,song:o,playPrevious:n>0?()=>he(t,r,n-1):null,playNext:n<r.length-1?()=>he(t,r,n+1):null,playRandom:()=>he(t,r,ei(r.length))}))}catch{oe.update(o=>({...o,isLoading:!1,fileLink:null,src:null}))}}function ei(t){return Math.floor(Math.random()*t)}const Ie="music/favorites";function ri(){re.set(localStorage.getItem(Ie)??"")}async function ni(){De.set(await Zn())}function ii(){let t=mr(re);return t==null&&(t=localStorage.getItem(Ie)??"",re.set(t)),t}function fi(t){const r=`;${Wt(t)};`,n=ii();let o;(n==null?void 0:n.includes(r))??!1?o=n.replace(r,""):o=n+r,localStorage.setItem(Ie,o),re.set(o)}let Fe=!1;async function ci(){Fe||(wr()&&(ne.getGlobalApi().userAgent=null),ri(),await ni(),await Kn().then(Re.set),navigator.onLine&&ti().then(async t=>{Re.set(t),await Hn(t)}),Fe=!0)}export{ui as a,Qn as b,li as c,Wt as g,ci as i,he as p,fi as t};
