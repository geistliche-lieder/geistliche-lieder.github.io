import{b as d,e as m,A as T,F as I,s as p}from"./store.616de63b.js";function w(e){let n=e.T;for(;n.includes(";");)n=n.replace(";"," ");return n}function O(e){return e.V.some(n=>n.L.some(i=>i.includes("{")))}async function V(){return JSON.parse(await fetch("/songs.json").then(e=>e.text()))}let h=!1;async function B(){if(h)return;const e=await V();v(e),h=!0}function v(e){e.B.sort((t,s)=>t.T>s.T?1:-1),e.S.sort((t,s)=>t.T>s.T?1:-1);const n=e.S.reduce((t,s)=>(t[s.I]=s,t),{}),i=e.S.reduce((t,s)=>((t[s.T]==null||O(s))&&(t[s.T]=s),t),{}),c=e.B.reduce((t,s)=>{d.update(o=>[...o,s]);const r=s.S.map(o=>({song:n[o.V],songInsideBook:o}));return t[s.T]=r,t},{});m.set(e.S);const a=e.S.map(t=>t.T).filter((t,s,r)=>r.indexOf(t)===s);c[T]=a.map(t=>({song:i[t]})),c[I]=[],p.set(c);for(const t of e.S)N(t)}function g(e,n){let i="",c=!1;for(const a of e)a==="{"?c=!0:a==="}"?c=!1:c?n&&(i+=`<sup class="text-red-600">${a}</sup>`):i+=a;return i}const S={},L={};function N(e){S[e.I]=e.V.map($).join(" "),L[e.I]=S[e.I].toLocaleLowerCase()}function $(e){return e.L.map(n=>g(n,!1)).join(" ")}function _(e){return S[e.I]}function x(e){return L[e.I]}function y(e,n){const i=e.O[e.O.length-1],a=e.O.filter(o=>o===i).length>1,t=e.V.find(o=>o.I===i).T;if(a)if(t.split(" ").length===1)e.V.filter(o=>o.T===t).forEach(o=>o.T+=" 1");else return null;let r=`\uFEFF#LangCount=${e.M?2:1}\r
`;r+=`#Title=${e.T}\r
`,n!=null&&n.trim()!==""&&(r+=`#Songbook=${n}\r
`),r+=`#Version=3\r
`,r+=`#VerseOrder=${e.O.map((o,f)=>a&&f===e.O.length-1?`${t} 2`:`${e.V.find(l=>l.I===o).T}`).join(",")}\r
`;for(const o of e.V){r+=`---\r
`,r+=`${o.T}\r
`;const f=e.M?o.L.filter((l,u)=>u<o.L.length-2):o.L;for(const l of f)r+=`${g(l,!1)}\r
`}if(a){const o=e.V.find(l=>l.I===i);r+=`---\r
`,r+=`${t} 2\r
`;const f=e.M?o.L.filter((l,u)=>u<o.L.length-2):o.L;for(const l of f)r+=`${g(l,!1)}\r
`}return r+="-----",r}function A(e){const n=localStorage.getItem("favorites");return n!=null&&n.includes(e)}function M(e){let n=localStorage.getItem("favorites")??"";e=`${e};`,n.length&&n.includes(e)?n=n.replace(e,""):n+=e;try{localStorage.setItem("favorites",n)}catch{}}function E(){const e=localStorage.getItem("favorites");return e?e.split(";"):[]}function F(){localStorage.getItem("hideLatinLetters")!=null?localStorage.removeItem("hideLatinLetters"):localStorage.setItem("hideLatinLetters","")}function G(){return localStorage.getItem("hideLatinLetters")==null}function J(){localStorage.getItem("hideTranslation")!=null?localStorage.removeItem("hideTranslation"):localStorage.setItem("hideTranslation","")}function K(){return localStorage.getItem("hideTranslation")==null}function q(){localStorage.getItem("hideNotes")!=null?localStorage.removeItem("hideNotes"):localStorage.setItem("hideNotes","")}function z(){return localStorage.getItem("hideNotes")==null}export{y as a,x as b,_ as c,A as d,E as e,G as f,w as g,K as h,B as i,z as j,F as k,J as l,q as m,g as n,O as s,M as t};
